{"title":"XXE-XML","date":"2019-04-19T17:00:02.000Z","thumbnail":"https://i.loli.net/2019/04/20/5cb9fa4757dd7.jpg","link":"post/xxe-xml-dtd","comments":true,"tags":["Web","XML","XXE"],"categories":["XXE"],"updated":"2020-01-06T13:58:00.629Z","content":"<p>最近遇到一些事，使我不得不抓紧时间学习一下XXE相关的漏洞知识<del>~</del></p>\n<a id=\"more\"></a>\n\n<br>\n\n<br>\n\n<center><font color=\"#00B2EE\" face=\"Comic sans MS\" size=\"5\">XXE-XML</font> </center>\n\n<br>\n\n<br>\n\n\n<h3 id=\"一-XML\"><font color=\"#FF6347\" face=\"Comic sans MS\">一. XML</font><a href=\"post/xxe-xml-dtd#一-XML\"></a></h3><h4 id=\"1-1-基本概念\"><font color=\"#3CB371\" face=\"Comic sans MS\">1.1 基本概念</font><a href=\"post/xxe-xml-dtd#1-1-基本概念\"></a></h4><blockquote>\n<ol>\n<li>什么是XML？</li>\n<li>为什么要使用XML？</li>\n<li>怎么使用XML？</li>\n<li>为什么着重强调DTD？</li>\n</ol>\n</blockquote>\n<p><strong>1. XML 是什么？</strong></p>\n<ul>\n<li>指可扩展标记语言（EXtensible Markup Language）。</li>\n<li>是一种很像HTML的标记语言。</li>\n<li>的设计宗旨是传输数据，而不是显示数据。</li>\n<li>标签没有被预定义。您需要自行定义标签。</li>\n<li>被设计为具有自我描述性。</li>\n<li>是 W3C 的推荐标准。</li>\n</ul>\n<p>可以参考：<font color=\"#00B2EE\">[<a href=\"https://blog.csdn.net/Rain722/article/details/52925828\" target=\"_blank\" rel=\"noopener\">XML是什么，它可以做什么？——XML详解</a>]</font><br><br></p>\n<p><strong>2. 为什么要使用XML？</strong><br>参考：<font color=\"#00B2EE\">[<a href=\"http://www.runoob.com/xml/xml-usage.html\" target=\"_blank\" rel=\"noopener\">XML 用途</a>]</font>     </p>\n<p><strong>(1) XML 把数据从 HTML 分离</strong></p>\n<blockquote>\n<ol>\n<li>如果您需要在 HTML 文档中显示动态数据，那么每当数据改变时将花费大量的时间来编辑 HTML。</li>\n<li>通过 XML，数据能够存储在独立的 XML 文件中。这样您就可以专注于使用 HTML/CSS 进行显示和布局，并确保修改底层数据不再需要对 HTML 进行任何的改变。</li>\n<li>通过使用几行 JavaScript 代码，您就可以读取一个外部 XML 文件，并更新您的网页的数据内容。</li>\n</ol>\n</blockquote>\n<p><strong>(2 )XML 简化数据共享</strong></p>\n<blockquote>\n<ol>\n<li>在真实的世界中，计算机系统和数据使用不兼容的格式来存储数据。</li>\n<li>XML 数据以纯文本格式进行存储，因此提供了一种独立于软件和硬件的数据存储方法。</li>\n<li>这让创建不同应用程序可以共享的数据变得更加容易。</li>\n</ol>\n</blockquote>\n<p><strong>(3) XML 简化数据传输</strong></p>\n<blockquote>\n<ol>\n<li>对开发人员来说，其中一项最费时的挑战一直是在互联网上的不兼容系统之间交换数据。</li>\n<li>由于可以通过各种不兼容的应用程序来读取数据，以 XML 交换数据降低了这种复杂性。</li>\n</ol>\n</blockquote>\n<p><strong>(4) XML 简化平台变更</strong></p>\n<blockquote>\n<ol>\n<li>升级到新的系统（硬件或软件平台），总是非常费时的。必须转换大量的数据，不兼容的数据经常会丢失。</li>\n<li>XML 数据以文本格式存储。这使得 XML 在不损失数据的情况下，更容易扩展或升级到新的操作系统、新的应用程序或新的浏览器。</li>\n</ol>\n</blockquote>\n<br>\n**3. 怎么使用？**\n\n<p>可以是这样</p>\n<pre class=\"line-numbers language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>person</span> <span class=\"token attr-name\">age</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>too young<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">experience</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>too simple<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">result</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sometimes naive<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>也可以是这样</p>\n<pre class=\"line-numbers language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>person</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>age</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>too young<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>experience</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>too simple<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>sometimes naive<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>person</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>还可以这样</p>\n<pre class=\"line-numbers language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>person</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>age</span><span class=\"token punctuation\">></span></span>too young<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>age</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>experience</span><span class=\"token punctuation\">></span></span>too simple<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>experience</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span><span class=\"token punctuation\">></span></span>sometimes naive<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>result</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>person</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>但是更推荐使用第三种！主流使用的也是第三种。<br><br></p>\n<p><strong>4. 为什么着重强调DTD？</strong></p>\n<p>DTD实体：DTD实体是用于定义引用普通文本或特殊字符的快捷方式的变量，可以内部声明或外部引用。</p>\n<p>实体又分为一般实体和参数实体</p>\n<ol>\n<li>一般实体的声明语法:<code>&lt;!ENTITY 实体名 &quot;实体内容&quot;&gt;</code><br>引用实体的方式：&amp;实体名；</li>\n<li>参数实体只能在DTD中使用，参数实体的声明格式： <code>&lt;!ENTITY % 实体名 &quot;实体内容&quot;&gt;</code><br>引用实体的方式：%实体名；</li>\n</ol>\n<p>1，何为XXE？<br>答： xxe也就是xml外部实体注入。也就是上述的那一部分。</p>\n<p>2，怎样构建外部实体注入？<br>方式一：直接通过DTD外部实体声明</p>\n<p>可参考：<font color=\"#00B2EE\">[<a href=\"https://www.cnblogs.com/r00tuser/p/7255939.html\" target=\"_blank\" rel=\"noopener\">xxe漏洞的学习与利用总结</a>]</font></p>\n<br>\n\n<h4 id=\"1-2-使用XML\"><font color=\"#3CB371\" face=\"Comic sans MS\">1.2 使用XML</font><a href=\"post/xxe-xml-dtd#1-2-使用XML\"></a></h4><p><strong>实际写文档一般这样用：（新版本）</strong>可参考<font color=\"#00B2EE\">[<a href=\"http://www.runoob.com/dtd/dtd-building.html\" target=\"_blank\" rel=\"noopener\">XML 文档构建模块</a>]</font></p>\n<blockquote>\n<p>所有的 XML 文档（以及 HTML 文档）均由以下简单的构建模块构成：</p>\n</blockquote>\n<ul>\n<li>元素</li>\n<li>属性</li>\n<li>实体   <ul>\n<li><code>&amp;lt;</code>表示<code>&lt;</code></li>\n<li><code>&amp;gt;</code>表示<code>&gt;</code></li>\n<li><code>&amp;amp;</code>表示<code>&amp;</code></li>\n<li><code>&amp;apos;</code>表示<code>&#39;</code></li>\n<li><code>&amp;quot;</code>表示<code>&quot;</code></li>\n</ul>\n</li>\n<li>PCDATA ：被解析的字符数据（parsed character data）</li>\n<li>CDATA  ：不会被解析的字符数据（character data）</li>\n<li>两种文档约束：DTD、Schema</li>\n</ul>\n<p>包含上面那几部分以后，文档还要有一个规范来约束，即需要对自己写的文档进行验证， 验证器会对在自己写的验证规则中对XML文件进行语法检查。</p>\n<p><strong>为什么要有约束？</strong><br>因为XML文件的标签和属性可以随意扩展，有时我们必须要限制每个文档有哪些元素，每个元素有哪些子元素，每个元素有哪些属性，属性的值是什么类型等。从而保证XML文档格式和数据的正确性。</p>\n<br>\n\n<p>实例</p>\n<pre class=\"line-numbers language-xml\"><code class=\"language-xml\"><span class=\"token comment\" spellcheck=\"true\">&lt;!--文档的声明--></span>\n<span class=\"token comment\" spellcheck=\"true\">&lt;!--还有个属性standalone:很少使用，是否是一个单独的XML文件，取值是true或false。默认是true--></span>\n<span class=\"token comment\" spellcheck=\"true\">&lt;!--元素 note、to、from、body等叫做元素，Tove叫做To这个元素的值value，而sex叫做属性，\nfemale叫做属性的值--></span>\n<span class=\"token comment\" spellcheck=\"true\">&lt;!--注释和HTML一样--></span>\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>   \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>note</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>to</span> <span class=\"token attr-name\">sex</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>female<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>Tove<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>to</span><span class=\"token punctuation\">></span></span>       \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>from</span><span class=\"token punctuation\">></span></span>Jani<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>from</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>heading</span><span class=\"token punctuation\">></span></span>Reminder<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>heading</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>Don't forget me this weekend!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>note</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<br>\n\n<p><strong>XML由七种组成元素构成</strong>（老版本）</p>\n<ul>\n<li>文档的声明</li>\n<li>元素</li>\n<li>属性</li>\n<li>注释</li>\n<li>实体字符，如<ul>\n<li><code>&amp;lt;</code>表示<code>&lt;</code></li>\n<li><code>&amp;gt;</code>表示<code>&gt;</code></li>\n<li><code>&amp;amp;</code>表示<code>&amp;</code></li>\n<li><code>&amp;apos;</code>表示<code>&#39;</code></li>\n<li><code>&amp;quot;</code>表示<code>&quot;</code></li>\n</ul>\n</li>\n<li>字符数据区 [!CDATA[内容]]</li>\n<li>处理指令</li>\n</ul>\n<br>\n\n<p>关于学习的资料可参考：<font color=\"#00B2EE\">[<a href=\"http://www.runoob.com/xml/xml-tutorial.html\" target=\"_blank\" rel=\"noopener\">XML 教程</a>]</font>、<font color=\"#00B2EE\">[<a href=\"https://www.cnblogs.com/jb8164/articles/736515.html\" target=\"_blank\" rel=\"noopener\">XML 文档结构简介（一）</a>]</font>、<font color=\"#00B2EE\">[<a href=\"https://blog.csdn.net/RookiexiaoMu_a/article/details/89193062\" target=\"_blank\" rel=\"noopener\">XML</a>]</font>、<font color=\"#00B2EE\">[<a href=\"https://blog.csdn.net/weixin_37641832/article/details/89219411\" target=\"_blank\" rel=\"noopener\">XML</a>]</font></p>\n<p>下面是我的一些关于学习XML的笔记😁(●ˇ∀ˇ●)</p>\n<div class=\"article-img\"><p><img src=\"https://i.loli.net/2019/04/20/5cb9fc94b9af6.jpg\" alt=\"201.jpg\" data-zoomable></p></div>\n<div class=\"article-img\"><p><img src=\"https://i.loli.net/2019/04/20/5cb9fc94bf2ac.jpg\" alt=\"202.jpg\" data-zoomable></p></div>\n<div class=\"article-img\"><p><img src=\"https://i.loli.net/2019/04/20/5cb9fc94af924.jpg\" alt=\"203.jpg\" data-zoomable></p></div>\n<div class=\"article-img\"><p><img src=\"https://i.loli.net/2019/04/20/5cb9fc94886b8.jpg\" alt=\"204.jpg\" data-zoomable></p></div>\n<div class=\"article-img\"><p><img src=\"https://i.loli.net/2019/04/20/5cb9fc94ac31a.jpg\" alt=\"205.jpg\" data-zoomable></p></div>\n<p><br><br><br></p>\n<h3 id=\"二-DTD\"><font color=\"#FF6347\" face=\"Comic sans MS\">二. DTD</font><a href=\"post/xxe-xml-dtd#二-DTD\"></a></h3><h4 id=\"2-1-基本概念\"><font color=\"#3CB371\" face=\"Comic sans MS\">2.1 基本概念</font><a href=\"post/xxe-xml-dtd#2-1-基本概念\"></a></h4><p>DTD为英文(Document Type Definition)，中文意思为“文档类型定义”。</p>\n<p>DTD肩负着两重任务：一方面它帮助你编写合法的代码，另一方面它让浏览器正确地显示器代码。</p>\n<p>DTD扮演着很重要的角色，会使代码变得规范性，打个比方：</p>\n<blockquote>\n<p>良好的xml文档：符合xml的语法规则。<br>有效的xml文档：符合xml语法规则的同时还需要符合DTD文档类型定义。<br>利用DTD可以对xml文档的各个节点进行约束定义，使开发遵循一套“标准”。<br>DTD可以约束xml文档出现的元素，元素名称，元素的先后顺序，属性等。</p>\n</blockquote>\n<p>推荐参考：<font color=\"#00B2EE\">[<a href=\"https://blog.csdn.net/wff900703/article/details/80457635\" target=\"_blank\" rel=\"noopener\">XML中的DTD是什么？</a>]</font>、<font color=\"#00B2EE\">[<a href=\"https://blog.csdn.net/sinat_32366329/article/details/80188837\" target=\"_blank\" rel=\"noopener\">XML之自定义DTD约束</a>]</font>、<font color=\"#00B2EE\">[<a href=\"https://blog.csdn.net/Yeoman92/article/details/53055749\" target=\"_blank\" rel=\"noopener\">XML中DTD介绍及使用</a>]</font></p>\n<br>\n\n<h4 id=\"2-2-使用DTD\"><font color=\"#3CB371\" face=\"Comic sans MS\">2.2 使用DTD</font><a href=\"post/xxe-xml-dtd#2-2-使用DTD\"></a></h4><p><br><br></p>\n<h3 id=\"三-XXE漏洞\"><font color=\"#FF6347\" face=\"Comic sans MS\">三. XXE漏洞</font><a href=\"post/xxe-xml-dtd#三-XXE漏洞\"></a></h3>","prev":{"title":"浅谈 C 和其他语言","link":"post/c-grammer"},"next":{"title":"台儿庄古镇","link":"post/ancientcityoftaierzhaung"},"plink":"https://Directoree.github.io/post/xxe-xml-dtd/","toc":[{"title":"<font color=\"#FF6347\" face=\"Comic sans MS\">一. XML</font>","id":"一-XML","index":"1","children":[{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">1.1 基本概念</font>","id":"1-1-基本概念","index":"1.1"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">1.2 使用XML</font>","id":"1-2-使用XML","index":"1.2"}]},{"title":"<font color=\"#FF6347\" face=\"Comic sans MS\">二. DTD</font>","id":"二-DTD","index":"2","children":[{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">2.1 基本概念</font>","id":"2-1-基本概念","index":"2.1"},{"title":"<font color=\"#3CB371\" face=\"Comic sans MS\">2.2 使用DTD</font>","id":"2-2-使用DTD","index":"2.2"}]},{"title":"<font color=\"#FF6347\" face=\"Comic sans MS\">三. XXE漏洞</font>","id":"三-XXE漏洞","index":"3"}],"reward":true,"copyright":{"author":"Directoree","link":"<a href=\"https://Directoree.github.io/post/xxe-xml-dtd/\" title=\"XXE-XML\">https://Directoree.github.io/post/xxe-xml-dtd/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}